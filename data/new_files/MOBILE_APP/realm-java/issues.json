[{"title":"Realm.Init configuration take too long delay when move intent from 1st page into next page ","body":"### How frequently does the bug occur?\n\nAlways\n\n### Description\n\nI was try to move into next page which in second page of activity. I was used Realm.Init to initialize of realm. But, it takes too long delay when move from 1st page into 2nd page. I'm also try Realm Init call from 1st Activity or Realm Init run inside of runOnUIThread(). but, it doesn't work well.\n\n### Stacktrace & log output\n\n```shell\n2024-03-21 14:50:29.656  4240-4240  data_check  xxx.xxxx.xxx.xxx         D  first access realm init\r\n2024-03-21 14:50:30.012  4240-4240  data_check  xxx.xxxx.xxx.xxx         D  add category of product\r\n2024-03-21 14:50:30.559  4240-4240  data_check  xxx.xxxx.xxx.xxx         D  add product\n```\n\n\n### Can you reproduce the bug?\n\nAlways\n\n### Reproduction Steps\n\n1. Access First Page. \r\n2. Access Second Page After Page was positioned offline mode\n\n### Version\n\n10.15.1\n\n### What Atlas App Services are you using?\n\nLocal Database only\n\n### Are you using encryption?\n\nNo\n\n### Platform OS and version(s)\n\nOne UI v.5.1, Android 13\n\n### Build environment\n\nAndroid Studio version:  2023.2.1 Patch 1\r\nAndroid Build Tools version: 33.0.0\r\nGradle version: 8.0.0\r\n","comments":["\u27a4 PM Bot commented:\n\nJira ticket: RJAVA-1255"],"labels":["T-Bug","O-Community","Frequency:Always","Repro:Always","SDK-Use:Local","Encryption:Off"],"number":7881},{"title":"Realm Transformer Output Missing During Android Instrumented Test","body":"### How frequently does the bug occur?\r\n\r\nAlways\r\n\r\n### Description\r\n\r\nThis is related to https:\/\/github.com\/realm\/realm-java\/issues\/2936 and https:\/\/github.com\/realm\/realm-java\/pull\/3030\r\n\r\nAfter upgrading to Gradle 7, our build is now issuing a warning about a deprecated feature (the AGP Transformer API). It seems that newer versions have been released to address this however our app is not currently able to support realm 10-x versions. \r\n\r\nWhen running Android instrumented tests a ClassCastException is being thrown at runtime. Several attempts were made to resolve this, like adding kotlin-kapt before realm-android Gradle plugin. The exception only occurs during instrumentation tests. \r\n\r\nThe output of the realm transformer is being generated to the app\/build\/intermediates\/transforms. Yet the final APK being ran does not contain the generated source.\r\n\r\n\r\n### Stacktrace & log output\r\n\r\n```shell\r\njava.lang.ClassCastException: my.package.MyRealmObject cannot be cast to io.realm.my_package_MyRealmObjectProxyInterface\r\n```\r\n\r\n\r\n### Can you reproduce the bug?\r\n\r\nAlways\r\n\r\n### Reproduction Steps\r\nin app\/build.gradle\r\n    androidTestImplementation project(\":app\")\r\n\r\n### Version\r\n\r\n6.1.0 up to 10.11.1\r\n\r\n### What Atlas App Services are you using?\r\n\r\nLocal Database only\r\n\r\n### Are you using encryption?\r\n\r\nYes\r\n\r\n### Platform OS and version(s)\r\n\r\nAndroid 10-13\r\n\r\n### Build environment\r\n\r\n- Android Studio Electric Eel\r\n- Gradle 7.5.1 and AGP 7.4.0\r\n- JDK 11\r\n- Kotlin 1.7.21 ","comments":["\u27a4 PM Bot commented:\n\nJira ticket: RJAVA-1254"],"labels":["T-Bug","O-Community","Frequency:Always","Repro:Always","SDK-Use:Local","Encryption:On"],"number":7880},{"title":"io.realm.exceptions.RealmFileException","body":"### How frequently does the bug occur?\n\nAlways\n\n### Description\n\nMy app seems to be crashing on a Google pixel 8 (Android 14) every time it starts and `io.realm.exceptions.RealmFileException` is logged and it seems to be only happening on the app published on play store if I build from Android studio the crash does not occur.  This is my realm initialization class\r\n```\r\nimport android.content.Context\r\nimport io.realm.Realm\r\nimport io.realm.RealmConfiguration\r\n\r\nclass DatabaseService(context: Context) {\r\n    init {\r\n        Realm.init(context)\r\n    }\r\n\r\n    val realmInstance: Realm\r\n        get() {\r\n            val config = RealmConfiguration.Builder().name(Realm.DEFAULT_REALM_NAME)\r\n                .deleteRealmIfMigrationNeeded().schemaVersion(4).build()\r\n            Realm.setDefaultConfiguration(config)\r\n            return Realm.getInstance(config)\r\n        }\r\n}\r\n```\n\n### Stacktrace & log output\n\n```shell\nException io.realm.exceptions.RealmFileException:\r\n  at io.realm.internal.OsSharedRealm.nativeGetSharedRealm\r\n  at io.realm.internal.OsSharedRealm.<init> (OsSharedRealm.java:175)\r\n  at io.realm.internal.OsSharedRealm.getInstance (OsSharedRealm.java:260)\r\n  at io.realm.BaseRealm.<init> (BaseRealm.java:142)\r\n  at io.realm.BaseRealm.<init> (BaseRealm.java:109)\r\n  at io.realm.Realm.<init> (Realm.java:161)\r\n  at io.realm.Realm.createInstance (Realm.java:535)\r\n  at io.realm.RealmCache.createInstance (RealmCache.java:508)\r\n  at io.realm.RealmCache.doCreateRealmOrGetFromCache (RealmCache.java:461)\r\n  at io.realm.RealmCache.createRealmOrGetFromCache (RealmCache.java:422)\r\n  at io.realm.Realm.getInstance (Realm.java:464)\r\n  at org.ole.planet.myplanet.datamanager.DatabaseService.getRealmInstance (DatabaseService.kt:17)\r\n  at org.ole.planet.myplanet.service.UploadToShelfService.uploadUserData (UploadToShelfService.kt:45)\r\n  at org.ole.planet.myplanet.service.AutoSyncWorker.onError (AutoSyncWorker.kt:95)\r\n  at org.ole.planet.myplanet.datamanager.Service$checkVersion$1$onResponse$1.onResponse (Service.kt:148)\r\n  at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$retrofit2-DefaultCallAdapterFactory$ExecutorCallbackCall$1 (DefaultCallAdapterFactory.java:89)\r\n  at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1$$ExternalSyntheticLambda0.run (D8$$SyntheticClass)\r\n  at android.os.Handler.handleCallback (Handler.java:958)\r\n  at android.os.Handler.dispatchMessage (Handler.java:99)\r\n  at android.os.Looper.loopOnce (Looper.java:205)\r\n  at android.os.Looper.loop (Looper.java:294)\r\n  at android.app.ActivityThread.main (ActivityThread.java:8248)\r\n  at java.lang.reflect.Method.invoke\r\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:552)\r\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:971)\r\n```\n```\n\n\n### Can you reproduce the bug?\n\nNo\n\n### Reproduction Steps\n\n**APK build from Android studio**\r\nhttps:\/\/github.com\/open-learning-exchange\/myplanet\/releases\/download\/v0.14.21-lite\/myPlanet.apk\r\n\r\n**APK on playstore**\r\nhttps:\/\/play.google.com\/store\/apps\/details?id=org.ole.planet.myplanet\r\n\r\n**Link to GitHub repo**\r\nhttps:\/\/github.com\/open-learning-exchange\/myplanet\n\n### Version\n\n10.18.0\n\n### What Atlas App Services are you using?\n\nLocal Database only\n\n### Are you using encryption?\n\nNo\n\n### Platform OS and version(s)\n\nGoogle pixel 8 Android 14\n\n### Build environment\n\nAndroid Studio version: Iguana | 2023.2.1\r\nAndroid Build Tools version: 28.0.0\r\nGradle version: 8.4","comments":["\u27a4 PM Bot commented:\n\nJira ticket: RJAVA-1253","@Okuro3499 Thank you for reporting.\r\n\r\nDo you expect a schema migration? If so, the file will be deleted, and the schema version will be set to zero. What if you remove `schemaVersion(4)` - will you still see the exception?","I still get the same exception"],"labels":["T-Bug","O-Community","Needs-Attention","Frequency:Always","SDK-Use:Local","Encryption:Off","Repro:No"],"number":7879},{"title":"Model cannot be cast to ModelRealmProxyInterface while using realm jars built from source in Android Project","body":"### How frequently does the bug occur?\r\n\r\nAlways\r\n\r\n### Description\r\n\r\nI am using Realm jars which are built from source code. I have added realm-library aar file,  realm-annotations-10.18.0.jar, realm-transformer-10.18.0.jar, realm-gradle-plugin into libs folder of Android project and tried to build. Able to launch the application however getting \r\n\r\n\r\nUserModel cannot be cast to io.realm.com_example_mobile_test_auth_model_UserModelRealmProxyInterface\r\n whenever any db operation is performed\r\n\r\n### Stacktrace & log output\r\n\r\n```shell\r\n2024-03-07 15:45:21.304  5922-5922  ExampleException         com.example        D  null : null\r\n2024-03-07 15:45:21.305  5922-5922  ExampleException          com.example         D\r\n UserModel cannot be cast to io.realm.com_example_mobile_test_auth_model_UserModelRealmProxyInterface\r\n\r\n```\r\n\r\n\r\n### Can you reproduce the bug?\r\n\r\nAlways\r\n\r\n### Reproduction Steps\r\n\r\nBuild the realm code base from source\r\n\r\n### Version\r\n\r\n10.18.0\r\n\r\n### What Atlas App Services are you using?\r\n\r\nLocal Database only\r\n\r\n### Are you using encryption?\r\n\r\nNo\r\n\r\n### Platform OS and version(s)\r\n\r\nMac OS 14.3\r\n\r\n### Build environment\r\n\r\nAndroid Studio version: Android Studio Hedgehog | 2023.1.1 Patch 2\r\nAndroid Build Tools version: 33.0.1\r\nGradle version: 8\r\n","comments":["\u27a4 PM Bot commented:\n\nJira ticket: RJAVA-1251","Any help on this. Stuck with the above error and unable to proceed","Looks like you are not transforming the realm model classes. If you don't  apply our plugin you will have to [register the transformer](https:\/\/github.com\/realm\/realm-java\/blob\/main\/realm-transformer\/src\/main\/kotlin\/io\/realm\/transformer\/RealmTransformer.kt#L86) yourself. ","Adding the realm-transformer jar file to libs doesn't help here?\r\n Is there any way to apply the plugin using jar file. \r\nEarlier I used  **android.registerTransform(new RealmTransformer(rootProject))** to register but in Gradle 8 android.registerTransform is deprecated. ","Any help on this","I have tried using \r\n \r\n**import io.realm.transformer.RealmTransformerKt\r\nRealmTransformerKt.registerRealmTransformerTask(rootProject)**\r\n \r\nto register the RealmTransformer in the build.gradle file, however getting below error while trying to build it\r\n\r\nCaused by: org.gradle.api.UnknownDomainObjectException: Extension of type 'AndroidComponentsExtension' does not exist. Currently registered extension types: [ExtraPropertiesExtension, KtlintExtension]\r\n\tat org.gradle.internal.extensibility.ExtensionsStorage.getHolderByType(ExtensionsStorage.java:88)\r\n\tat org.gradle.internal.extensibility.ExtensionsStorage.getByType(ExtensionsStorage.java:74)\r\n\tat org.gradle.internal.extensibility.DefaultConvention.getByType(DefaultConvention.java:160)\r\n\tat org.gradle.internal.extensibility.DefaultConvention.getByType(DefaultConvention.java:155)\r\n\tat io.realm.transformer.RealmTransformerKt.registerRealmTransformerTask(RealmTransformer.kt:88)\r\n\tat io.realm.transformer.RealmTransformerKt$registerRealmTransformerTask.call(Unknown Source)\r\n\t\r\nLet me know if I missed anything here\r\n\t"],"labels":["T-Bug","O-Community","Frequency:Always","Repro:Always","SDK-Use:Local","Encryption:Off"],"number":7875},{"title":"[realm-core-12.3.0] Assertion failed: false","body":"#### SDK and version\nSDK : java realm-core-12.3.0\nVersion: 12.3.0\n\n#### Observations\ni dont not the step, user crashes while using the app\u3002\n\n#### Crash log \/ stacktrace\nbacktrace:\n    #00 pc 000000000007066c  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (abort+160)\n    realm\/realm-core#1 pc 000000000066d55c  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/librealm-jni.so\n    realm\/realm-core#2 pc 000000000066d858  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/librealm-jni.so\n    realm\/realm-core#3 pc 000000000066d694  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/librealm-jni.so\n    realm\/realm-core#4 pc 00000000003c64b8  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/librealm-jni.so\n    realm\/realm-core#5 pc 00000000000d2578  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (__cxa_finalize+212)\n    realm\/realm-core#6 pc 00000000000cdf60  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (exit+24)\n    realm\/realm-core#7 pc 0000000000557828  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/libflutter.so\n    realm\/realm-core#8 pc 00000000005591b8  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/libflutter.so\n    realm\/realm-core#9 pc 000000000062da0c  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/libflutter.so\n    realm\/realm-core#10 pc 000000000062d864  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/libflutter.so\n    realm\/realm-core#11 pc 00000000000044fc  \/data\/app\/com.demo.eh-9zyvbbrKmFJvAIcxvAHXjw==\/lib\/arm64\/libapp.so (_kDartVmSnapshotInstructions+9468)\n\n01-25 15:23:44.968 22446 22649 E REALM   : \/tmp\/realm-java\/realm\/realm-library\/src\/main\/cpp\/jni_util\/jni_utils.cpp:54: [realm-core-12.3.0] Assertion failed: false\n01-25 15:23:44.968 22446 22649 E REALM   : <backtrace not supported on this platform>!!! IMPORTANT: Please report this at https:\/\/github.com\/realm\/realm-core\/issues\/new\/choose\n\n#### Steps & Code to Reproduce\ni dont not the step\n\n","comments":["Hello, thanks for reporting this, however this is not a core issue, It is a JNI issue in the Java SDK. \r\nIn particular, I think this is the offending code:\r\n\r\n```\r\nJNIEnv* JniUtils::get_env(bool attach_if_needed)\r\n{\r\n    REALM_ASSERT_DEBUG(s_instance);\r\n\r\n    JNIEnv* env;\r\n    if (s_instance->m_vm->GetEnv(reinterpret_cast<void**>(&env), s_instance->m_vm_version) != JNI_OK) {\r\n        if (attach_if_needed) {\r\n            jint ret = s_instance->m_vm->AttachCurrentThread(&env, nullptr);\r\n            REALM_ASSERT_RELEASE(ret == JNI_OK);\r\n        }\r\n        else {\r\n            REALM_ASSERT_RELEASE(false);\r\n        }\r\n    }\r\n\r\n    return env;\r\n}\r\n```\r\n\r\nI am not an expert, but it seems to me that `JniUtils::get_env(bool attach_if_needed)` was called with `attach_if_needed = false.`","\u27a4 PM Bot commented:\n\nJira ticket: RJAVA-1252","@jalen-ma \r\n\r\nIt is similar to https:\/\/github.com\/realm\/realm-java\/issues\/6987.\r\n\r\nHow often does it happen? Any particular operation which triggers it?"],"labels":["O-Community","Waiting-For-Reporter"],"number":7877}]