[{"title":"Roll Flutter Engine from 7aa8521e640e to 2f5afdf62365 (2 revisions)","body":"\nhttps:\/\/github.com\/flutter\/engine\/compare\/7aa8521e640e...2f5afdf62365\n\n2024-03-23 skia-flutter-autoroll@skia.org Roll Dart SDK from 567a19adbe9a to 88f531b19ed5 (1 revision) (flutter\/engine#51644)\n2024-03-23 skia-flutter-autoroll@skia.org Roll Fuchsia Linux SDK from _uuBNUJ6KbprCDWmC... to IPZvFWIGJFJnJ409e... (flutter\/engine#51643)\n\nAlso rolling transitive DEPS:\n  fuchsia\/sdk\/core\/linux-amd64 from _uuBNUJ6Kbpr to IPZvFWIGJFJn\n\nIf this roll has caused a breakage, revert this CL and stop the roller\nusing the controls here:\nhttps:\/\/autoroll.skia.org\/r\/flutter-engine-flutter-autoroll\nPlease CC jonahwilliams@google.com,rmistry@google.com,zra@google.com on the revert to ensure that a human\nis aware of the problem.\n\nTo file a bug in Flutter: https:\/\/github.com\/flutter\/flutter\/issues\/new\/choose\n\nTo report a problem with the AutoRoller itself, please file a bug:\nhttps:\/\/issues.skia.org\/issues\/new?component=1389291&template=1850622\n\nDocumentation for the AutoRoller is here:\nhttps:\/\/skia.googlesource.com\/buildbot\/+doc\/main\/autoroll\/README.md\n","comments":[],"labels":["engine","autosubmit"]},{"title":"Draggable feedback positioning","body":"We changed the coordinates used to position the `Draggable` feedback by transforming them into the `Overlay`s coordinate space. This has no influence on any untransformed `Overlay`, most Flutter apps should be not affected. \r\nThis PR fixes the positioning of the feedback in transformed context (see #145639 for before video):\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/42270125\/df34e198-0667-453d-a27a-a79b2e2825a1\r\n\r\n- fixes #145639 \r\n\r\n\r\n## Pre-launch Checklist\r\n\r\n- [X] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [X] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [X] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [X] I signed the [CLA].\r\n- [X] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["It looks like this pull request may not have tests. Please make sure to add tests before merging. If you need [an exemption](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests) to this rule, contact \"@test-exemption-reviewer\" in the #hackers channel in [Chat](https:\/\/github.com\/flutter\/flutter\/wiki\/Chat) (don't just cc them here, they won't see it! Use Discord!).\n\nIf you are not sure if you need tests, consider this rule of thumb: the purpose of a test is to make sure someone doesn't accidentally revert the fix. Ask yourself, **is there anything in your PR that you feel it is important we not accidentally revert back to how it was before your fix?**\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing.","Thanks for your pull request! It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\nView this [failed invocation](https:\/\/github.com\/flutter\/flutter\/pull\/145647\/checks?check_run_id=23015219719) of the CLA check for more information.\n\nFor the most up to date status, view the checks section at the bottom of the pull request."],"labels":["framework"]},{"title":"Flutter Tool supports multi-platform module config","body":"Resolves #145640\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["tool"]},{"title":"[pigeon] `constant_identifier_names` lint complains on generated code","body":"### Steps to reproduce\r\n\r\nWrite a pigeon with a method:\r\n```dart\r\nimport 'package:pigeon\/pigeon.dart';\r\n\r\n@HostApi()\r\nabstract class AHostApi {\r\n  void foo();\r\n}\r\n```\r\n\r\nThen run Pigeon, and run the analyzer on the output.\r\n\r\n### Expected results\r\n\r\nThere should be no lint warnings.\r\n\r\n### Actual results\r\n\r\nThe `constant_identifier_names` lint reports an issue:\r\n```\r\n   info \u2022 The constant name '__pigeon_channelName' isn't a lowerCamelCase identifier \u2022\r\n          lib\/host\/android_notifications.g.dart:29:18 \u2022 constant_identifier_names\r\n```\r\n\r\nThe generated code in question looks like:\r\n\r\n```dart\r\n  Future<void> foo() async {\r\n    const String __pigeon_channelName = 'dev.flutter.pigeon.zulip.AHostApi.foo';\r\n```\r\n\r\nIt's fine that the code looks like that. But then `constant_identifier_names` should just get included in the big `ignore_for_file:` line at the top.\r\n\r\n\r\n### Dependency versions\r\n\r\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```\r\n# Generated by pub\r\n# See https:\/\/dart.dev\/tools\/pub\/glossary#lockfile\r\npackages:\r\n  _fe_analyzer_shared:\r\n    dependency: transitive\r\n    description:\r\n      name: _fe_analyzer_shared\r\n      sha256: \"0b2f2bd91ba804e53a61d757b986f89f1f9eaed5b11e4b2f5a2468d86d6c9fc7\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"67.0.0\"\r\n  _flutterfire_internals:\r\n    dependency: transitive\r\n    description:\r\n      name: _flutterfire_internals\r\n      sha256: \"1a52f1afae8ab7ac4741425114713bdbba802f1ce1e0648e167ffcc6e05e96cf\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.21\"\r\n  analyzer:\r\n    dependency: transitive\r\n    description:\r\n      name: analyzer\r\n      sha256: \"37577842a27e4338429a1cbc32679d508836510b056f1eedf0c8d20e39c1383d\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.4.1\"\r\n  analyzer_plugin:\r\n    dependency: transitive\r\n    description:\r\n      name: analyzer_plugin\r\n      sha256: \"9661b30b13a685efaee9f02e5d01ed9f2b423bd889d28a304d02d704aee69161\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.11.3\"\r\n  app_settings:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: app_settings\r\n      sha256: \"09bc7fe0313a507087bec1a3baf555f0576e816a760cbb31813a88890a09d9e5\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.1.1\"\r\n  args:\r\n    dependency: transitive\r\n    description:\r\n      name: args\r\n      sha256: eef6c46b622e0494a36c5a12d10d77fb4e855501a91c1b9ef9339326e58f0596\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.2\"\r\n  async:\r\n    dependency: transitive\r\n    description:\r\n      name: async\r\n      sha256: \"947bfcf187f74dbc5e146c9eb9c0f10c9f8b30743e341481c1e2ed3ecc18c20c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.11.0\"\r\n  boolean_selector:\r\n    dependency: transitive\r\n    description:\r\n      name: boolean_selector\r\n      sha256: \"6cfb5af12253eaf2b368f07bacc5a80d1301a071c73360d746b7f2e32d762c66\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.1\"\r\n  build:\r\n    dependency: transitive\r\n    description:\r\n      name: build\r\n      sha256: \"80184af8b6cb3e5c1c4ec6d8544d27711700bc3e6d2efad04238c7b5290889f0\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.1\"\r\n  build_config:\r\n    dependency: transitive\r\n    description:\r\n      name: build_config\r\n      sha256: bf80fcfb46a29945b423bd9aad884590fb1dc69b330a4d4700cac476af1708d1\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.1\"\r\n  build_daemon:\r\n    dependency: transitive\r\n    description:\r\n      name: build_daemon\r\n      sha256: \"0343061a33da9c5810b2d6cee51945127d8f4c060b7fbdd9d54917f0a3feaaa1\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.0.1\"\r\n  build_resolvers:\r\n    dependency: transitive\r\n    description:\r\n      name: build_resolvers\r\n      sha256: \"339086358431fa15d7eca8b6a36e5d783728cf025e559b834f4609a1fcfb7b0a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.2\"\r\n  build_runner:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: build_runner\r\n      sha256: \"581bacf68f89ec8792f5e5a0b2c4decd1c948e97ce659dc783688c8a88fbec21\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.8\"\r\n  build_runner_core:\r\n    dependency: transitive\r\n    description:\r\n      name: build_runner_core\r\n      sha256: \"4ae8ffe5ac758da294ecf1802f2aff01558d8b1b00616aa7538ea9a8a5d50799\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.3.0\"\r\n  built_collection:\r\n    dependency: transitive\r\n    description:\r\n      name: built_collection\r\n      sha256: \"376e3dd27b51ea877c28d525560790aee2e6fbb5f20e2f85d5081027d94e2100\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.1.1\"\r\n  built_value:\r\n    dependency: transitive\r\n    description:\r\n      name: built_value\r\n      sha256: a3ec2e0f967bc47f69f95009bb93db936288d61d5343b9436e378b28a2f830c6\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"8.9.0\"\r\n  characters:\r\n    dependency: transitive\r\n    description:\r\n      name: characters\r\n      sha256: \"04a925763edad70e8443c99234dc3328f442e811f1d8fd1a72f1c8ad0f69a605\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.0\"\r\n  charcode:\r\n    dependency: transitive\r\n    description:\r\n      name: charcode\r\n      sha256: fb98c0f6d12c920a02ee2d998da788bca066ca5f148492b7085ee23372b12306\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.1\"\r\n  checked_yaml:\r\n    dependency: transitive\r\n    description:\r\n      name: checked_yaml\r\n      sha256: feb6bed21949061731a7a75fc5d2aa727cf160b91af9a3e464c5e3a32e28b5ff\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.3\"\r\n  checks:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: checks\r\n      sha256: aad431b45a8ae2fa26db8c22e385b9cdec73f72986a1d9d9f2017f4c39ecf5c9\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.0\"\r\n  cli_util:\r\n    dependency: transitive\r\n    description:\r\n      name: cli_util\r\n      sha256: c05b7406fdabc7a49a3929d4af76bcaccbbffcbcdcf185b082e1ae07da323d19\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.4.1\"\r\n  clock:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: clock\r\n      sha256: cb6d7f03e1de671e34607e909a7213e31d7752be4fb66a86d29fe1eb14bfb5cf\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.1\"\r\n  code_builder:\r\n    dependency: transitive\r\n    description:\r\n      name: code_builder\r\n      sha256: f692079e25e7869c14132d39f223f8eec9830eb76131925143b2129c4bb01b37\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.10.0\"\r\n  collection:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: collection\r\n      sha256: ee67cb0715911d28db6bf4af1026078bd6f0128b07a5f66fb2ed94ec6783c09a\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.18.0\"\r\n  color_models:\r\n    dependency: transitive\r\n    description:\r\n      name: color_models\r\n      sha256: \"3683f0a461570161ca22b7d3e1765b2ce2bce3534db14e00d5ee458d0287abac\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.3\"\r\n  convert:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: convert\r\n      sha256: \"0f08b14755d163f6e2134cb58222dd25ea2a2ee8a195e53983d57c075324d592\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.1\"\r\n  coverage:\r\n    dependency: transitive\r\n    description:\r\n      name: coverage\r\n      sha256: \"8acabb8306b57a409bf4c83522065672ee13179297a6bb0cb9ead73948df7c76\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.7.2\"\r\n  cross_file:\r\n    dependency: transitive\r\n    description:\r\n      name: cross_file\r\n      sha256: fedaadfa3a6996f75211d835aaeb8fede285dae94262485698afd832371b9a5e\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.3+8\"\r\n  crypto:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: crypto\r\n      sha256: ff625774173754681d66daaf4a448684fb04b78f902da9cb3d308c19cc5e8bab\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.3\"\r\n  csslib:\r\n    dependency: transitive\r\n    description:\r\n      name: csslib\r\n      sha256: \"706b5707578e0c1b4b7550f64078f0a0f19dec3f50a178ffae7006b0a9ca58fb\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.0\"\r\n  dart_style:\r\n    dependency: transitive\r\n    description:\r\n      name: dart_style\r\n      sha256: \"40ae61a5d43feea6d24bd22c0537a6629db858963b99b4bc1c3db80676f32368\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.4\"\r\n  dbus:\r\n    dependency: transitive\r\n    description:\r\n      name: dbus\r\n      sha256: \"365c771ac3b0e58845f39ec6deebc76e3276aa9922b0cc60840712094d9047ac\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.7.10\"\r\n  device_info_plus:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: device_info_plus\r\n      sha256: \"77f757b789ff68e4eaf9c56d1752309bd9f7ad557cb105b938a7f8eb89e59110\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"9.1.2\"\r\n  device_info_plus_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: device_info_plus_platform_interface\r\n      sha256: d3b01d5868b50ae571cd1dc6e502fc94d956b665756180f7b16ead09e836fd64\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.0.0\"\r\n  drift:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: drift\r\n      sha256: b50a8342c6ddf05be53bda1d246404cbad101b64dc73e8d6d1ac1090d119b4e2\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.15.0\"\r\n  drift_dev:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: drift_dev\r\n      sha256: c037d9431b6f8dc633652b1469e5f53aaec6e4eb405ed29dd232fa888ef10d88\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.15.0\"\r\n  fake_async:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: fake_async\r\n      sha256: \"511392330127add0b769b75a987850d136345d9227c6b94c96a04cf4a391bf78\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.1\"\r\n  ffi:\r\n    dependency: transitive\r\n    description:\r\n      name: ffi\r\n      sha256: \"493f37e7df1804778ff3a53bd691d8692ddf69702cf4c1c1096a2e41b4779e21\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  file:\r\n    dependency: transitive\r\n    description:\r\n      name: file\r\n      sha256: \"5fc22d7c25582e38ad9a8515372cd9a93834027aacf1801cf01164dac0ffa08c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.0.0\"\r\n  file_picker:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: file_picker\r\n      sha256: \"4e42aacde3b993c5947467ab640882c56947d9d27342a5b6f2895b23956954a6\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.1.1\"\r\n  file_selector_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: file_selector_linux\r\n      sha256: \"045d372bf19b02aeb69cacf8b4009555fb5f6f0b7ad8016e5f46dd1387ddd492\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.9.2+1\"\r\n  file_selector_macos:\r\n    dependency: transitive\r\n    description:\r\n      name: file_selector_macos\r\n      sha256: b15c3da8bd4908b9918111fa486903f5808e388b8d1c559949f584725a6594d6\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.9.3+3\"\r\n  file_selector_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: file_selector_platform_interface\r\n      sha256: a3994c26f10378a039faa11de174d7b78eb8f79e4dd0af2a451410c1a5c3f66b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.6.2\"\r\n  file_selector_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: file_selector_windows\r\n      sha256: d3547240c20cabf205c7c7f01a50ecdbc413755814d6677f3cb366f04abcead0\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.9.3+1\"\r\n  firebase_core:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: firebase_core\r\n      sha256: \"7e049e32a9d347616edb39542cf92cd53fdb4a99fb6af0a0bff327c14cd76445\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.25.4\"\r\n  firebase_core_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: firebase_core_platform_interface\r\n      sha256: c437ae5d17e6b5cc7981cf6fd458a5db4d12979905f9aafd1fea930428a9fe63\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.0.0\"\r\n  firebase_core_web:\r\n    dependency: transitive\r\n    description:\r\n      name: firebase_core_web\r\n      sha256: \"57e61d6010e253b36d38191cefd6199d7849152cdcd234b61ca290cdb278a0ba\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.11.4\"\r\n  firebase_messaging:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: firebase_messaging\r\n      sha256: \"9c97b20c012542252a8853f11334efd833ddae83551fe37d27f87d885c655038\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"14.7.15\"\r\n  firebase_messaging_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: firebase_messaging_platform_interface\r\n      sha256: d464b255e922c7915dc4b0ebc305ebad4e1f130519bee3d6e568ef2ea1613a4b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.5.23\"\r\n  firebase_messaging_web:\r\n    dependency: transitive\r\n    description:\r\n      name: firebase_messaging_web\r\n      sha256: f3f71aeec719ec1fe2c99f75cd74d00d33f1c240cf1e402cc9d43883e84f935a\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.6.4\"\r\n  fixnum:\r\n    dependency: transitive\r\n    description:\r\n      name: fixnum\r\n      sha256: \"25517a4deb0c03aa0f32fd12db525856438902d9c16536311e76cdc57b31d7d1\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.0\"\r\n  flutter:\r\n    dependency: \"direct main\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_color_models:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: flutter_color_models\r\n      sha256: \"8454198ba9a82e533452d0764f1df3d6c3ccc2b33e18eb1f2fedc7ae4a5c43be\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.3+2\"\r\n  flutter_driver:\r\n    dependency: \"direct dev\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_lints:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: flutter_lints\r\n      sha256: e2a421b7e59244faef694ba7b30562e489c2b489866e505074eb005cd7060db7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.1\"\r\n  flutter_local_notifications:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: flutter_local_notifications\r\n      sha256: c18f1de98fe0bb9dd5ba91e1330d4febc8b6a7de6aae3ffe475ef423723e72f3\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"16.3.2\"\r\n  flutter_local_notifications_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: flutter_local_notifications_linux\r\n      sha256: \"33f741ef47b5f63cc7f78fe75eeeac7e19f171ff3c3df054d84c1e38bedb6a03\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.0.0+1\"\r\n  flutter_local_notifications_platform_interface:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: flutter_local_notifications_platform_interface\r\n      sha256: \"7cf643d6d5022f3baed0be777b0662cce5919c0a7b86e700299f22dc4ae660ef\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.0.0+1\"\r\n  flutter_localizations:\r\n    dependency: \"direct main\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_plugin_android_lifecycle:\r\n    dependency: transitive\r\n    description:\r\n      name: flutter_plugin_android_lifecycle\r\n      sha256: b068ffc46f82a55844acfa4fdbb61fad72fa2aef0905548419d97f0f95c456da\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.17\"\r\n  flutter_test:\r\n    dependency: \"direct dev\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_web_plugins:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  frontend_server_client:\r\n    dependency: transitive\r\n    description:\r\n      name: frontend_server_client\r\n      sha256: \"408e3ca148b31c20282ad6f37ebfa6f4bdc8fede5b74bc2f08d9d92b55db3612\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.2.0\"\r\n  fuchsia_remote_debug_protocol:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  glob:\r\n    dependency: transitive\r\n    description:\r\n      name: glob\r\n      sha256: \"0e7014b3b7d4dac1ca4d6114f82bf1782ee86745b9b42a92c9289c23d8a0ab63\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  graphs:\r\n    dependency: transitive\r\n    description:\r\n      name: graphs\r\n      sha256: aedc5a15e78fc65a6e23bcd927f24c64dd995062bcd1ca6eda65a3cff92a4d19\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.1\"\r\n  html:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: html\r\n      sha256: \"3a7812d5bcd2894edf53dfaf8cd640876cf6cef50a8f238745c8b8120ea74d3a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.15.4\"\r\n  http:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: http\r\n      sha256: a2bbf9d017fcced29139daa8ed2bba4ece450ab222871df93ca9eec6f80c34ba\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  http_multi_server:\r\n    dependency: transitive\r\n    description:\r\n      name: http_multi_server\r\n      sha256: \"97486f20f9c2f7be8f514851703d0119c3596d14ea63227af6f7a481ef2b2f8b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.2.1\"\r\n  http_parser:\r\n    dependency: transitive\r\n    description:\r\n      name: http_parser\r\n      sha256: \"2aa08ce0341cc9b354a498388e30986515406668dbcc4f7c950c3e715496693b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.0.2\"\r\n  image_picker:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: image_picker\r\n      sha256: \"26222b01a0c9a2c8fe02fc90b8208bd3325da5ed1f4a2acabf75939031ac0bdd\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.7\"\r\n  image_picker_android:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_android\r\n      sha256: \"39f2bfe497e495450c81abcd44b62f56c2a36a37a175da7d137b4454977b51b1\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.8.9+3\"\r\n  image_picker_for_web:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_for_web\r\n      sha256: e2423c53a68b579a7c37a1eda967b8ae536c3d98518e5db95ca1fe5719a730a3\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.2\"\r\n  image_picker_ios:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_ios\r\n      sha256: fadafce49e8569257a0cad56d24438a6fa1f0cbd7ee0af9b631f7492818a4ca3\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.8.9+1\"\r\n  image_picker_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_linux\r\n      sha256: \"4ed1d9bb36f7cd60aa6e6cd479779cc56a4cb4e4de8f49d487b1aaad831300fa\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.2.1+1\"\r\n  image_picker_macos:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_macos\r\n      sha256: \"3f5ad1e8112a9a6111c46d0b57a7be2286a9a07fc6e1976fdf5be2bd31d4ff62\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.2.1+1\"\r\n  image_picker_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_platform_interface\r\n      sha256: fa4e815e6fcada50e35718727d83ba1c92f1edf95c0b4436554cec301b56233b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.9.3\"\r\n  image_picker_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: image_picker_windows\r\n      sha256: \"6ad07afc4eb1bc25f3a01084d28520496c4a3bb0cb13685435838167c9dcedeb\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.2.1+1\"\r\n  integration_test:\r\n    dependency: \"direct dev\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  intl:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: intl\r\n      sha256: d6f56758b7d3014a48af9701c085700aac781a92a87a62b1333b46d8879661cf\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.19.0\"\r\n  io:\r\n    dependency: transitive\r\n    description:\r\n      name: io\r\n      sha256: \"2ec25704aba361659e10e3e5f5d672068d332fc8ac516421d483a11e5cbd061e\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.4\"\r\n  js:\r\n    dependency: transitive\r\n    description:\r\n      name: js\r\n      sha256: f2c445dce49627136094980615a031419f7f3eb393237e4ecd97ac15dea343f3\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.6.7\"\r\n  json_annotation:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: json_annotation\r\n      sha256: b10a7b2ff83d83c777edba3c6a0f97045ddadd56c944e1a23a3fdf43a1bf4467\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.8.1\"\r\n  json_serializable:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: json_serializable\r\n      sha256: aa1f5a8912615733e0fdc7a02af03308933c93235bdc8d50d0b0c8a8ccb0b969\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.7.1\"\r\n  leak_tracker:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker\r\n      sha256: \"7f0df31977cb2c0b88585095d168e689669a2cc9b97c309665e3386f3e9d341a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"10.0.4\"\r\n  leak_tracker_flutter_testing:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker_flutter_testing\r\n      sha256: \"06e98f569d004c1315b991ded39924b21af84cf14cc94791b8aea337d25b57f8\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.3\"\r\n  leak_tracker_testing:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker_testing\r\n      sha256: \"6ba465d5d76e67ddf503e1161d1f4a6bc42306f9d66ca1e8f079a47290fb06d3\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.1\"\r\n  lints:\r\n    dependency: transitive\r\n    description:\r\n      name: lints\r\n      sha256: cbf8d4b858bb0134ef3ef87841abdf8d63bfc255c266b7bf6b39daa1085c4290\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.0\"\r\n  logging:\r\n    dependency: transitive\r\n    description:\r\n      name: logging\r\n      sha256: \"623a88c9594aa774443aa3eb2d41807a48486b5613e67599fb4c41c0ad47c340\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  matcher:\r\n    dependency: transitive\r\n    description:\r\n      name: matcher\r\n      sha256: d2323aa2060500f906aa31a895b4030b6da3ebdcc5619d14ce1aada65cd161cb\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.12.16+1\"\r\n  material_color_utilities:\r\n    dependency: transitive\r\n    description:\r\n      name: material_color_utilities\r\n      sha256: \"0e0a020085b65b6083975e499759762399b4475f766c21668c4ecca34ea74e5a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.8.0\"\r\n  meta:\r\n    dependency: transitive\r\n    description:\r\n      name: meta\r\n      sha256: \"7687075e408b093f36e6bbf6c91878cc0d4cd10f409506f7bc996f68220b9136\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.12.0\"\r\n  mime:\r\n    dependency: transitive\r\n    description:\r\n      name: mime\r\n      sha256: \"2e123074287cc9fd6c09de8336dae606d1ddb88d9ac47358826db698c176a1f2\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.5\"\r\n  node_preamble:\r\n    dependency: transitive\r\n    description:\r\n      name: node_preamble\r\n      sha256: \"6e7eac89047ab8a8d26cf16127b5ed26de65209847630400f9aefd7cd5c730db\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.2\"\r\n  num_utilities:\r\n    dependency: transitive\r\n    description:\r\n      name: num_utilities\r\n      sha256: \"170695bcafd17a19ee3a060325e7e10fb35bb878c8bcb3e6f5691dde1462c0ae\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.5\"\r\n  package_config:\r\n    dependency: transitive\r\n    description:\r\n      name: package_config\r\n      sha256: \"1c5b77ccc91e4823a5af61ee74e6b972db1ef98c2ff5a18d3161c982a55448bd\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.0\"\r\n  package_info_plus:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: package_info_plus\r\n      sha256: \"88bc797f44a94814f2213db1c9bd5badebafdfb8290ca9f78d4b9ee2a3db4d79\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.0.1\"\r\n  package_info_plus_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: package_info_plus_platform_interface\r\n      sha256: \"9bc8ba46813a4cc42c66ab781470711781940780fd8beddd0c3da62506d3a6c6\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.1\"\r\n  path:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: path\r\n      sha256: \"087ce49c3f0dc39180befefc60fdb4acd8f8620e5682fe2476afd0b3688bb4af\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.9.0\"\r\n  path_provider:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: path_provider\r\n      sha256: b27217933eeeba8ff24845c34003b003b2b22151de3c908d0e679e8fe1aa078b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  path_provider_android:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_android\r\n      sha256: \"477184d672607c0a3bf68fbbf601805f92ef79c82b64b4d6eb318cbca4c48668\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.2\"\r\n  path_provider_foundation:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_foundation\r\n      sha256: \"5a7999be66e000916500be4f15a3633ebceb8302719b47b9cc49ce924125350f\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  path_provider_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_linux\r\n      sha256: f7a1fe3a634fe7734c8d3f2766ad746ae2a2884abe22e241a8b301bf5cac3279\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.1\"\r\n  path_provider_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_platform_interface\r\n      sha256: \"88f5779f72ba699763fa3a3b06aa4bf6de76c8e5de842cf6f29e2e06476c2334\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  path_provider_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_windows\r\n      sha256: \"8bc9f22eee8690981c22aa7fc602f5c85b497a6fb2ceb35ee5a5e5ed85ad8170\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.1\"\r\n  petitparser:\r\n    dependency: transitive\r\n    description:\r\n      name: petitparser\r\n      sha256: c15605cd28af66339f8eb6fbe0e541bfe2d1b72d5825efc6598f3e0a31b9ad27\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.0.2\"\r\n  pigeon:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: pigeon\r\n      sha256: ea0db5609f90eb26d6f3d7807558860d0eda5a908f99b3ad7eb6079a8c74378b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"17.2.0\"\r\n  platform:\r\n    dependency: transitive\r\n    description:\r\n      name: platform\r\n      sha256: \"12220bb4b65720483f8fa9450b4332347737cf8213dd2840d8b2c823e47243ec\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.4\"\r\n  plugin_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: plugin_platform_interface\r\n      sha256: \"4820fbfdb9478b1ebae27888254d445073732dae3d6ea81f0b7e06d5dedc3f02\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.8\"\r\n  pool:\r\n    dependency: transitive\r\n    description:\r\n      name: pool\r\n      sha256: \"20fe868b6314b322ea036ba325e6fc0711a22948856475e2c2b6306e8ab39c2a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.5.1\"\r\n  powers:\r\n    dependency: transitive\r\n    description:\r\n      name: powers\r\n      sha256: \"389ba222d4264655ecd3ffa461921bc707a07e4597b98831d21dd516eed6f496\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.0+2\"\r\n  process:\r\n    dependency: transitive\r\n    description:\r\n      name: process\r\n      sha256: \"21e54fd2faf1b5bdd5102afd25012184a6793927648ea81eea80552ac9405b32\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.0.2\"\r\n  pub_semver:\r\n    dependency: transitive\r\n    description:\r\n      name: pub_semver\r\n      sha256: \"40d3ab1bbd474c4c2328c91e3a7df8c6dd629b79ece4c4bd04bee496a224fb0c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.4\"\r\n  pubspec_parse:\r\n    dependency: transitive\r\n    description:\r\n      name: pubspec_parse\r\n      sha256: c63b2876e58e194e4b0828fcb080ad0e06d051cb607a6be51a9e084f47cb9367\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.3\"\r\n  recase:\r\n    dependency: transitive\r\n    description:\r\n      name: recase\r\n      sha256: e4eb4ec2dcdee52dcf99cb4ceabaffc631d7424ee55e56f280bc039737f89213\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.1.0\"\r\n  share_plus:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: share_plus\r\n      sha256: \"3ef39599b00059db0990ca2e30fca0a29d8b37aae924d60063f8e0184cf20900\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.2.2\"\r\n  share_plus_platform_interface:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: share_plus_platform_interface\r\n      sha256: df08bc3a07d01f5ea47b45d03ffcba1fa9cd5370fb44b3f38c70e42cced0f956\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.3.1\"\r\n  shelf:\r\n    dependency: transitive\r\n    description:\r\n      name: shelf\r\n      sha256: ad29c505aee705f41a4d8963641f91ac4cee3c8fad5947e033390a7bd8180fa4\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.4.1\"\r\n  shelf_packages_handler:\r\n    dependency: transitive\r\n    description:\r\n      name: shelf_packages_handler\r\n      sha256: \"89f967eca29607c933ba9571d838be31d67f53f6e4ee15147d5dc2934fee1b1e\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.2\"\r\n  shelf_static:\r\n    dependency: transitive\r\n    description:\r\n      name: shelf_static\r\n      sha256: a41d3f53c4adf0f57480578c1d61d90342cd617de7fc8077b1304643c2d85c1e\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.2\"\r\n  shelf_web_socket:\r\n    dependency: transitive\r\n    description:\r\n      name: shelf_web_socket\r\n      sha256: \"9ca081be41c60190ebcb4766b2486a7d50261db7bd0f5d9615f2d653637a84c1\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.4\"\r\n  sky_engine:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.99\"\r\n  source_gen:\r\n    dependency: transitive\r\n    description:\r\n      name: source_gen\r\n      sha256: \"14658ba5f669685cd3d63701d01b31ea748310f7ab854e471962670abcf57832\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.5.0\"\r\n  source_helper:\r\n    dependency: transitive\r\n    description:\r\n      name: source_helper\r\n      sha256: \"6adebc0006c37dd63fe05bca0a929b99f06402fc95aa35bf36d67f5c06de01fd\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.4\"\r\n  source_map_stack_trace:\r\n    dependency: transitive\r\n    description:\r\n      name: source_map_stack_trace\r\n      sha256: \"84cf769ad83aa6bb61e0aa5a18e53aea683395f196a6f39c4c881fb90ed4f7ae\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.1\"\r\n  source_maps:\r\n    dependency: transitive\r\n    description:\r\n      name: source_maps\r\n      sha256: \"708b3f6b97248e5781f493b765c3337db11c5d2c81c3094f10904bfa8004c703\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.10.12\"\r\n  source_span:\r\n    dependency: transitive\r\n    description:\r\n      name: source_span\r\n      sha256: \"53e943d4206a5e30df338fd4c6e7a077e02254531b138a15aec3bd143c1a8b3c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.10.0\"\r\n  sprintf:\r\n    dependency: transitive\r\n    description:\r\n      name: sprintf\r\n      sha256: \"1fc9ffe69d4df602376b52949af107d8f5703b77cda567c4d7d86a0693120f23\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.0.0\"\r\n  sqlite3:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: sqlite3\r\n      sha256: \"072128763f1547e3e9b4735ce846bfd226d68019ccda54db4cd427b12dfdedc9\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.0\"\r\n  sqlite3_flutter_libs:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: sqlite3_flutter_libs\r\n      sha256: d6c31c8511c441d1f12f20b607343df1afe4eddf24a1cf85021677c8eea26060\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.5.20\"\r\n  sqlparser:\r\n    dependency: transitive\r\n    description:\r\n      name: sqlparser\r\n      sha256: dc384bb1f56d1384ce078edb5ff8247976abdab79d0c83e437210c85f06ecb61\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.34.0\"\r\n  stack_trace:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: stack_trace\r\n      sha256: \"73713990125a6d93122541237550ee3352a2d84baad52d375a4cad2eb9b7ce0b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.11.1\"\r\n  stream_channel:\r\n    dependency: transitive\r\n    description:\r\n      name: stream_channel\r\n      sha256: ba2aa5d8cc609d96bbb2899c28934f9e1af5cddbd60a827822ea467161eb54e7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  stream_transform:\r\n    dependency: transitive\r\n    description:\r\n      name: stream_transform\r\n      sha256: \"14a00e794c7c11aa145a170587321aedce29769c08d7f58b1d141da75e3b1c6f\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.0\"\r\n  string_scanner:\r\n    dependency: transitive\r\n    description:\r\n      name: string_scanner\r\n      sha256: \"556692adab6cfa87322a115640c11f13cb77b3f076ddcc5d6ae3c20242bedcde\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  sync_http:\r\n    dependency: transitive\r\n    description:\r\n      name: sync_http\r\n      sha256: \"7f0cd72eca000d2e026bcd6f990b81d0ca06022ef4e32fb257b30d3d1014a961\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.1\"\r\n  term_glyph:\r\n    dependency: transitive\r\n    description:\r\n      name: term_glyph\r\n      sha256: a29248a84fbb7c79282b40b8c72a1209db169a2e0542bce341da992fe1bc7e84\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.1\"\r\n  test:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: test\r\n      sha256: \"7ee446762c2c50b3bd4ea96fe13ffac69919352bd3b4b17bac3f3465edc58073\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.25.2\"\r\n  test_api:\r\n    dependency: transitive\r\n    description:\r\n      name: test_api\r\n      sha256: \"9955ae474176f7ac8ee4e989dadfb411a58c30415bcfb648fa04b2b8a03afa7f\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.7.0\"\r\n  test_core:\r\n    dependency: transitive\r\n    description:\r\n      name: test_core\r\n      sha256: \"2bc4b4ecddd75309300d8096f781c0e3280ca1ef85beda558d33fcbedc2eead4\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.6.0\"\r\n  timezone:\r\n    dependency: transitive\r\n    description:\r\n      name: timezone\r\n      sha256: \"1cfd8ddc2d1cfd836bc93e67b9be88c3adaeca6f40a00ca999104c30693cdca0\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.9.2\"\r\n  timing:\r\n    dependency: transitive\r\n    description:\r\n      name: timing\r\n      sha256: \"70a3b636575d4163c477e6de42f247a23b315ae20e86442bebe32d3cabf61c32\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.1\"\r\n  typed_data:\r\n    dependency: transitive\r\n    description:\r\n      name: typed_data\r\n      sha256: facc8d6582f16042dd49f2463ff1bd6e2c9ef9f3d5da3d9b087e244a7b564b3c\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.2\"\r\n  url_launcher:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: url_launcher\r\n      sha256: c512655380d241a337521703af62d2c122bf7b77a46ff7dd750092aa9433499c\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.2.4\"\r\n  url_launcher_android:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: url_launcher_android\r\n      sha256: d4ed0711849dd8e33eb2dd69c25db0d0d3fdc37e0a62e629fe32f57a22db2745\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.3.0\"\r\n  url_launcher_ios:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_ios\r\n      sha256: \"75bb6fe3f60070407704282a2d295630cab232991eb52542b18347a8a941df03\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.2.4\"\r\n  url_launcher_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_linux\r\n      sha256: ab360eb661f8879369acac07b6bb3ff09d9471155357da8443fd5d3cf7363811\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.1\"\r\n  url_launcher_macos:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_macos\r\n      sha256: b7244901ea3cf489c5335bdacda07264a6e960b1c1b1a9f91e4bc371d9e68234\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.0\"\r\n  url_launcher_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_platform_interface\r\n      sha256: \"552f8a1e663569be95a8190206a38187b531910283c3e982193e4f2733f01029\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  url_launcher_web:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_web\r\n      sha256: fff0932192afeedf63cdd50ecbb1bc825d31aed259f02bb8dba0f3b729a5e88b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.3\"\r\n  url_launcher_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_windows\r\n      sha256: ecf9725510600aa2bb6d7ddabe16357691b6d2805f66216a97d1b881e21beff7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.1\"\r\n  uuid:\r\n    dependency: transitive\r\n    description:\r\n      name: uuid\r\n      sha256: cd210a09f7c18cbe5a02511718e0334de6559871052c90a90c0cca46a4aa81c8\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.3.3\"\r\n  vector_math:\r\n    dependency: transitive\r\n    description:\r\n      name: vector_math\r\n      sha256: \"80b3257d1492ce4d091729e3a67a60407d227c27241d6927be0130c98e741803\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.4\"\r\n  vm_service:\r\n    dependency: transitive\r\n    description:\r\n      name: vm_service\r\n      sha256: a75f83f14ad81d5fe4b3319710b90dec37da0e22612326b696c9e1b8f34bbf48\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"14.2.0\"\r\n  watcher:\r\n    dependency: transitive\r\n    description:\r\n      name: watcher\r\n      sha256: \"3d2ad6751b3c16cf07c7fca317a1413b3f26530319181b37e3b9039b84fc01d8\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.0\"\r\n  web:\r\n    dependency: transitive\r\n    description:\r\n      name: web\r\n      sha256: \"4188706108906f002b3a293509234588823c8c979dc83304e229ff400c996b05\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.4.2\"\r\n  web_socket_channel:\r\n    dependency: transitive\r\n    description:\r\n      name: web_socket_channel\r\n      sha256: \"939ab60734a4f8fa95feacb55804fa278de28bdeef38e616dc08e44a84adea23\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.4.3\"\r\n  webdriver:\r\n    dependency: transitive\r\n    description:\r\n      name: webdriver\r\n      sha256: \"003d7da9519e1e5f329422b36c4dcdf18d7d2978d1ba099ea4e45ba490ed845e\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.3\"\r\n  webkit_inspection_protocol:\r\n    dependency: transitive\r\n    description:\r\n      name: webkit_inspection_protocol\r\n      sha256: \"87d3f2333bb240704cd3f1c6b5b7acd8a10e7f0bc28c28dcf14e782014f4a572\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.1\"\r\n  win32:\r\n    dependency: transitive\r\n    description:\r\n      name: win32\r\n      sha256: \"464f5674532865248444b4c3daca12bd9bf2d7c47f759ce2617986e7229494a8\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.2.0\"\r\n  win32_registry:\r\n    dependency: transitive\r\n    description:\r\n      name: win32_registry\r\n      sha256: \"41fd8a189940d8696b1b810efb9abcf60827b6cbfab90b0c43e8439e3a39d85a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.2\"\r\n  xdg_directories:\r\n    dependency: transitive\r\n    description:\r\n      name: xdg_directories\r\n      sha256: faea9dee56b520b55a566385b84f2e8de55e7496104adada9962e0bd11bcff1d\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.4\"\r\n  xml:\r\n    dependency: transitive\r\n    description:\r\n      name: xml\r\n      sha256: b015a8ad1c488f66851d762d3090a21c600e479dc75e68328c52774040cf9226\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.5.0\"\r\n  yaml:\r\n    dependency: transitive\r\n    description:\r\n      name: yaml\r\n      sha256: \"75769501ea3489fca56601ff33454fe45507ea3bfb014161abc3b43ae25989d5\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.2\"\r\nsdks:\r\n  dart: \">=3.4.0-256.0.dev <4.0.0\"\r\n  flutter: \">=3.21.0-12.0.pre.26\"\r\n```\r\n\r\n<\/details>\r\n","comments":[],"labels":["package","p: pigeon"]},{"title":"Implementing switch expressions in `flutter_tools\/`","body":"This pull request is step 12 in the journey to make this entire repository more readable.\r\n\r\n(previous PRs: #139048, #139882, #141591, #142279, #142634, #142793, #143293, #143496, #143634, #143812, #144580)\r\n\r\nWe're getting close to the end! \ud83d\ude04","comments":[],"labels":["platform-ios","tool","a: desktop"]},{"title":"RenderFlex test","body":"*Replace this paragraph with a description of what this PR is changing or adding, and why. Consider including before\/after screenshots.*\r\n\r\n*List which issues are fixed by this PR. You must list at least one issue. An issue is not required if the PR fixes something trivial like a typo.*\r\n\r\n*If you had to change anything in the [flutter\/tests] repo, include a link to the migration guide as per the [breaking change policy].*\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework"]},{"title":"RenderTwoDimensionalViewport should dispose _delegate.","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965","comments":[],"labels":["a: leak tracking"]},{"title":"Turn off randomization for leak detection bots.","body":null,"comments":["auto label is removed for flutter\/flutter\/145624, due to This PR has not met approval requirements for merging. Changes were requested by {christopherfujino}, please make the needed changes and resubmit this PR.\nThe PR author is a member of flutter-hackers and needs 0 more review(s) in order to merge this PR.\n\n- Merge guidelines: A PR needs at least one approved review if the author is already part of flutter-hackers or two member reviews if the author is not a flutter-hacker before re-applying the autosubmit label. __Reviewers__: If you left a comment approving, please use the \"approve\" review action instead."],"labels":["autosubmit"]},{"title":"_DropdownMenuState is used after disposal that causes creation of new controller that is never disposed.","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965","comments":[],"labels":["a: leak tracking"]},{"title":"Catch any `FileSystemException` thrown when trying to read the template manifest during `flutter create`","body":"Fixes https:\/\/github.com\/flutter\/flutter\/issues\/145423\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["tool"]},{"title":"Test output is inconsistent for shard tests","body":"Shard tests are using different reporters depending on the defaults of `flutter test` and `dart test`. This causes that sometimes there is not enough information to debug\/triage failures on specific test methods.\r\n\r\nTo mitigate this issue we need to use the `reporter=extended` across all the tests in `dev\/bots\/test.dart` ","comments":[],"labels":["a: tests"]},{"title":"[deps] Bump native assets dependencies","body":"Roll of a bunch of breaking changes from the native_assets_builder and native_assets_cli upstream. Most notably:\r\n\r\n* https:\/\/github.com\/dart-lang\/native\/pull\/946\r\n* https:\/\/github.com\/dart-lang\/native\/pull\/1018\r\n* https:\/\/github.com\/dart-lang\/native\/pull\/1019\r\n\r\nThis PR also updates the template in `flutter create --template=package_ffi` to use the rewritten API.\r\n\r\nThis PR does not change any functionality in Flutter.\r\n\r\nFor reference, the same roll in the Dart SDK:\r\n\r\n* https:\/\/dart-review.googlesource.com\/c\/sdk\/+\/357605\r\n* https:\/\/dart-review.googlesource.com\/c\/sdk\/+\/357623\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] All existing and new tests are passing.\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat","comments":[],"labels":["tool","a: desktop"]},{"title":"Testing Code Coverage percentage does not include untested (not imported) files","body":"### Steps to reproduce\n\n[flutter_demo.zip](https:\/\/github.com\/flutter\/flutter\/files\/14725661\/flutter_demo.zip)\r\n1. Open example flutter project\r\n2. Run `flutter test --coverage` and observe coverage is measured at 83.3%.\r\n3. Uncomment the import for `otherutils.dart` inside of `stringutils_test.dart`.\r\n4. Run `flutter test --coverage` again and observe code coverage is measured at 41.7%.\n\n### Expected results\n\nCode coverage should take into account of all source files and not just the ones that are tested or imported.\n\n### Actual results\n\nCode coverage only takes into account of source files that are tested or imported.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.2.1 23C71 darwin-x64, locale\r\n    en-US)\r\n    \u2022 Flutter version 3.19.2 on channel stable at\r\n      \/Users\/kevin.nguyen\/development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (3 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/kevin.nguyen\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android\r\n      Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-x64     \u2022 macOS 14.2.1 23C71 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n","comments":[],"labels":["customer: castaway"]},{"title":"Some gesture recognizers are not disposed.","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965","comments":[],"labels":["a: leak tracking"]},{"title":"_NullElement is leaking","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965","comments":[],"labels":["a: leak tracking"]},{"title":"CurvedAnimation is leaking.","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965","comments":[],"labels":["a: leak tracking"]},{"title":"SingleChildRenderObjectElement does not dispose ImageStreamCompleterHandle","body":"To repro follow the steps: https:\/\/github.com\/flutter\/flutter\/issues\/141198#issuecomment-1987383965\r\nAnd you need randomization seed:  \r\n`flutter test test\/cupertino\/tab_scaffold_test.dart --test-randomize-ordering-seed=20240321`","comments":["```\r\n                      #9______new_ImageStreamCompleterHandle.__(package:flutter\/src\/painting\/image_stream.dart:465:41)\r\n                      #10_____ImageStreamCompleter.keepAlive_(package:flutter\/src\/painting\/image_stream.dart:655:39)\r\n                      #11_____new__CachedImageBase_(package:flutter\/src\/painting\/image_cache.dart:609:27)\r\n                      #12_____new__LiveImage_(package:flutter\/src\/painting\/image_cache.dart:647:9)\r\n                      #13_____ImageCache._trackLiveImage.<anonymous_closure>_(package:flutter\/src\/painting\/image_cache.dart:302:14)\r\n                      #14______LinkedHashMapMixin.putIfAbsent_(dart:collection-patch\/compact_hash.dart:543:23)\r\n                      #15_____ImageCache._trackLiveImage_(package:flutter\/src\/painting\/image_cache.dart:296:17)\r\n                      #16_____ImageCache.putIfAbsent_(package:flutter\/src\/painting\/image_cache.dart:378:7)\r\n                      #17_____ImageProvider.resolveStreamForKey_(package:flutter\/src\/painting\/image_provider.dart:517:81)\r\n                      #18_____ScrollAwareImageProvider.resolveStreamForKey_(package:flutter\/src\/widgets\/scroll_aware_image_provider.dart:104:19)\r\n                      #19_____ImageProvider.resolve.<anonymous_closure>_(package:flutter\/src\/painting\/image_provider.dart:366:9)\r\n                      #20_____ImageProvider._createErrorHandlerAndKey.<anonymous_closure>_(package:flutter\/src\/painting\/image_provider.dart:479:24)\r\n                      #21_____SynchronousFuture.then_(package:flutter\/src\/foundation\/synchronous_future.dart:43:39)\r\n                      #22_____ImageProvider._createErrorHandlerAndKey_(package:flutter\/src\/painting\/image_provider.dart:476:9)\r\n                      #23_____ImageProvider.resolve_(package:flutter\/src\/painting\/image_provider.dart:363:5)\r\n                      #24______ImageState._resolveImage_(package:flutter\/src\/widgets\/image.dart:1111:16)\r\n                      #25______ImageState.didChangeDependencies_(package:flutter\/src\/widgets\/image.dart:1061:5)\r\n                      #26_____StatefulElement._firstBuild_(package:flutter\/src\/widgets\/framework.dart:5636:11)\r\n                      #27_____ComponentElement.mount_(package:flutter\/src\/widgets\/framework.dart:5463:5)\r\n                      #28_____Element.inflateWidget_(package:flutter\/src\/widgets\/framework.dart:4340:16)\r\n                      #29_____Element.updateChild_(package:flutter\/src\/widgets\/framework.dart:3849:18)\r\n                      #30_____SingleChildRenderObjectElement.mount_(package:flutter\/src\/widgets\/framework.dart:6769:14)\r\n                      #31_____Element.inflateWidget_(package:flutter\/src\/widgets\/framework.dart:4340:16)\r\n                      #32_____Element.updateChild_(package:flutter\/src\/widgets\/framework.dart:3849:18)\r\n                      #33_____ComponentElement.performRebuild_(package:flutter\/src\/widgets\/framework.dart:5512:16)\r\n                      #34_____Element.rebuild_(package:flutter\/src\/widgets\/framework.dart:5203:7)\r\n                      #35_____ComponentElement._firstBuild_(package:flutter\/src\/widgets\/framework.dart:5469:5)\r\n                      #36_____ComponentElement.mount_(package:flutter\/src\/widgets\/framework.dart:5463:5)\r\n                      #37_____Element.inflateWidget_(package:flutter\/src\/widgets\/framework.dart:4340:16)\r\n                      #38_____Element.updateChild_(package:flutter\/src\/widgets\/framework.dart:3849:18)\r\n                      #39_____SingleChildRenderObjectElement.mount_(package:flutter\/src\/widgets\/framework.dart:6769:14)\r\n...\r\n```"],"labels":["a: leak tracking"]},{"title":"Add feature to change layout order of slivers","body":"### Steps to reproduce\r\n\r\n1. Run the example\r\n2. Switch the page from `mainAxisPage` to `pageThroughSlivers`\r\n2.1. hot reload\r\n2.2. observe no changes\r\n3. Switch the page from `pageThroughSlivers` to `pageThroughList`\r\n3.1. hot reload\r\n3.2. observe a different display\r\n\r\n### Expected results\r\n\r\nI expect all of these examples to produce the same result, but they don't.\r\nThe blue box rendered by `mainAxisPage` and `pageThroughSlivers` should be above the brown one like it is for `pageThroughList`.\r\n\r\n### Actual results\r\n\r\nThe actual result is that the brown box is rendered above the blue one for `mainAxisPage` and `pageThroughSlivers`.\r\n\r\nIt seems, when using slivers that wrap box widgets, the slivers are painted in reverse order.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    const mainAxisPage = MainAxisGroupPage();\r\n    const pageThroughSlivers = PageThroughSlivers();\r\n    const pageThroughList = PageThroughList();\r\n\r\n    return const MaterialApp(\r\n      home: mainAxisPage,\r\n    );\r\n  }\r\n}\r\n\r\nconst _brown = ColoredBox(\r\n  color: Colors.brown,\r\n  child: SizedBox(height: 100),\r\n);\r\nfinal _blue = Transform.translate(\r\n  offset: const Offset(0, -50),\r\n  child: const ColoredBox(\r\n    color: Color(0xcc0000ff),\r\n    child: SizedBox(height: 100),\r\n  ),\r\n);\r\n\r\nclass MainAxisGroupPage extends StatelessWidget {\r\n  const MainAxisGroupPage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: CustomScrollView(slivers: [\r\n        SliverMainAxisGroup(slivers: [\r\n          const SliverToBoxAdapter(child: _brown),\r\n          SliverToBoxAdapter(child: _blue),\r\n        ]),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageThroughSlivers extends StatelessWidget {\r\n  const PageThroughSlivers({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: CustomScrollView(slivers: [\r\n        const SliverToBoxAdapter(child: _brown),\r\n        SliverToBoxAdapter(child: _blue),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageThroughList extends StatelessWidget {\r\n  const PageThroughList({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: CustomScrollView(slivers: [\r\n        SliverList.list(children: [\r\n          _brown,\r\n          _blue,\r\n        ]),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en-SI)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/...\/Development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (2 weeks ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/...\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.88.0-insider)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code - Insiders.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["On second thought, as per @Piinks [comment](https:\/\/github.com\/flutter\/flutter\/pull\/145572#discussion_r1535597962) in #145572. This is probably intentional to enable slivers like `SliverAppBar` to render above the other contents in the scroll view.\r\n\r\nSo, this issue is probably more of a request to perhaps give slivers something similar to what `Column` has with `verticalDirection`, where the caller could control in what order slivers are painted in.","Thanks @jellynoone! Yes, this is intentional as slivers like pinned app bars can overlap at the leading edge of the viewport.\r\n\r\nI've updated this to be a request for an option to change that layout order. I think it is documented somewhere, but I could not find it so we should make sure our docs reflect this behavior as well.\r\n\r\nAlternatively, you could change the order of the slivers in the scroll view to achieve the desired effect when applying transforms.\r\n\r\nWe could also consider instead, there are no SliverStack or SliverPositioned widgets, which could behave like Stack and Positioned. Maybe these could create an easier way for folks to layout overlapping slivers."],"labels":["c: new feature","framework","f: scrolling","d: api docs","team-framework"]},{"title":"`SearchAnchor` doesn't hide custom `viewTrailing` when input text is empty","body":"fixes [SearchAnchor doesn't update trailing icons](https:\/\/github.com\/flutter\/flutter\/issues\/144939)\r\n\r\n### Code sample\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() => runApp(const MyApp());\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      debugShowCheckedModeBanner: false,\r\n      home: Material(\r\n        child: SearchAnchor(\r\n          viewTrailing: const <Widget>[Icon(Icons.delete)],\r\n          builder: (BuildContext context, SearchController controller) {\r\n            return Center(\r\n              child: Builder(\r\n                builder: (context) {\r\n                  return IconButton(\r\n                    icon: const Icon(Icons.search),\r\n                    onPressed: () {\r\n                      controller.openView();\r\n                    },\r\n                  );\r\n                }\r\n              ),\r\n            );\r\n          },\r\n          suggestionsBuilder:\r\n              (BuildContext context, SearchController controller) {\r\n            return <Widget>[];\r\n          },\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n### Before\r\n![after](https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/d44adfe5-f352-461f-ba00-6e8ea8557163)\r\n\r\n### After\r\n![before](https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/9a93f8f7-ea9e-465c-9c87-23812508242c)\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: material design"]},{"title":"Cherry pick the text themes","body":"### Use case\n\nWhen we run a web build, we can notice a 17 blocks of this type :\r\n\r\n```js\r\nB.GG=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView displayLarge\",null,null,null,null)\r\nB.HY=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView displayMedium\",null,null,null,null)\r\nB.HD=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView displaySmall\",null,null,null,null)\r\nB.Fb=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView headlineLarge\",null,null,null,null)\r\nB.Hw=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView headlineMedium\",null,null,null,null)\r\nB.GA=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView headlineSmall\",null,null,null,null)\r\nB.I2=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView titleLarge\",null,null,null,null)\r\nB.FL=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView titleMedium\",null,null,null,null)\r\nB.Gf=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView titleSmall\",null,null,null,null)\r\nB.Hp=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView bodyLarge\",null,null,null,null)\r\nB.F2=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView bodyMedium\",null,null,null,null)\r\nB.HF=new A.i(!0,B.v,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView bodySmall\",null,null,null,null)\r\nB.Ht=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView labelLarge\",null,null,null,null)\r\nB.Hl=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView labelMedium\",null,null,null,null)\r\nB.GX=new A.i(!0,B.i,null,\"Roboto\",null,null,null,null,null,null,null,null,null,null,null,null,null,B.e,null,null,null,\"whiteMountainView labelSmall\",null,null,null,null)\r\n```\r\n\r\nEach of these blocks is about 2.5kB. They are defined here : https:\/\/github.com\/flutter\/flutter\/blob\/859eb2eda9818e408df046f5ff790cc9d5c28754\/packages\/flutter\/lib\/src\/material\/typography.dart#L375\r\n\r\nTheir goals is to define text themes for different languages in 3 categories : english like ; dense (chinese, japanese...) ; tall (arabic, hindi...)\r\n\r\nThere are 12 themes for `english like`,  2 for `dense` and 2 for `tall`.\r\nIf we decompose the `english like` themes, there are 2 for each platform target : Android, iOS, Linux, Windows, MacOs + (2 english likes I haven't figured out yet)\r\n\r\n\r\n\n\n### Proposal\n\nIt would be great if we could select the text themes we need. I only build apps that target people speaking french or english. I don't need to provide them support for languages they do not know. If I can remove the `dense` and `tall` text themes, the final `main.dart.js` would be `10kB` smaller. I believe it might reduce a little bit the final size of a mobile app too,\r\n\r\nAs well, an app targeting Hindi speakers may not need a text theme with Roboto.\r\n\r\nIn the case of a web build, I think we could reduce the size of the previous block with this kind of code :\r\n\r\n```dart\r\n  TextStyle generateTextStyleHelsinky(Sting label, Colors color) {\r\n    return TextStyle(debugLabel: 'blackHelsinki $label', fontFamily: 'Roboto', fontFamilyFallback: _helsinkiFontFallbacks, color: color, decoration: TextDecoration.none)\r\n  }\r\n  \r\n  static const TextTheme blackHelsinki = TextTheme(\r\n    displayLarge: generateTextStyleHelsinky(label: 'displayLarge', color: Colors.black54,),\r\n    displayMedium: generateTextStyleHelsinky(label: 'displayMedium', color: Colors.black54,),\r\n    displaySmall: generateTextStyleHelsinky(label: 'displaySmall', color: Colors.black54,),\r\n    headlineLarge: generateTextStyleHelsinky(label: 'headlineLarge', color: Colors.black54,),\r\n    headlineMedium: generateTextStyleHelsinky(label: 'headlineMedium', color: Colors.black54,),\r\n    headlineSmall: generateTextStyleHelsinky(label: 'headlineSmall', color: Colors.black87,),\r\n    titleLarge: generateTextStyleHelsinky(label: 'titleLarge', color: Colors.black87,),\r\n    titleMedium: generateTextStyleHelsinky(label: 'titleMedium', color: Colors.black87,),\r\n    titleSmall: generateTextStyleHelsinky(label: 'titleSmall', color: Colors.black,),\r\n    bodyLarge: generateTextStyleHelsinky(label: 'bodyLarge', color: Colors.black87,),\r\n    bodyMedium: generateTextStyleHelsinky(label: 'bodyMedium', color: Colors.black87,),\r\n    bodySmall: generateTextStyleHelsinky(label: 'bodySmall', color: Colors.black54,),\r\n    labelLarge: generateTextStyleHelsinky(label: 'labelLarge', color: Colors.black87,),\r\n    labelMedium: generateTextStyleHelsinky(label: 'labelMedium', color: Colors.black,),\r\n    labelSmall: generateTextStyleHelsinky(label: 'labelSmall', color: Colors.black,),\r\n  );\r\n```","comments":["Hi @ClementBeal \r\nJust to make this more clear about the use case, do you mean the built web still packs all TextTheme(s) declared in `typography.dart`, even though you have already specified your preferred textTheme in ThemeData like this?\r\n\r\n```dart\r\nMaterialApp(\r\n  theme: ThemeData(\r\n    textTheme: Typography.blackHelsinki,\r\n  ),\r\n)\r\n```","Yes, the web build still packs all the TextThemes even if you speficy a textTheme. \r\n\r\nIf you build the `push the button` template with the `Typography.blackHelsinki`, your final `main.dart.js` still contains all the TextThemes"],"labels":["framework","f: material design","c: proposal","team-design"]},{"title":"[Proposal] Allow disabling the scaling animation of the FloatingActionButton","body":"### Use case\n\nCurrently when the FloatingActionButton widget is added or removed from a Scaffold, it animates its transition.\r\n\r\nWe can control parts of this transition, using the `FloatingActionButtonAnimator`. By default this uses the scaling animator from the framework itself.\r\n\r\nHowever, if I want to disable both the rotation and scaling animations with the following animator subclass:\r\n\r\n```dart\r\nclass _NoAnimationFloatingActionButtonAnimator extends FloatingActionButtonAnimator {\r\n  const _NoAnimationFloatingActionButtonAnimator();\r\n\r\n  @override\r\n  Offset getOffset({required Offset begin, required Offset end, required double progress}) {\r\n    return end;\r\n  }\r\n\r\n  @override\r\n  Animation<double> getRotationAnimation({required Animation<double> parent}) {\r\n    return const AlwaysStoppedAnimation(1.0);\r\n  }\r\n\r\n  @override\r\n  Animation<double> getScaleAnimation({required Animation<double> parent}) {\r\n    return const AlwaysStoppedAnimation(1.0);\r\n  }\r\n}\r\n```\r\n\r\nand I pass an instance to the `floatingActionButtonAnimator` of a Scaffold, I still see a scale transition on the FAB.\n\n### Proposal\n\nAllow disabling both the scaling and rotation transition, using the aforementioned `FloatingActionButtonAnimator`, either through a subclass, or by providing a `FloatingActionButtonAnimator.noAnimation` constant.","comments":[],"labels":["c: new feature","framework","a: animation","f: material design","c: proposal","team-design"]},{"title":"Minify the CSS code injected\/generated during a web build","body":"### Use case\n\nDuring a web build, some CSS code is generated in the `main.dart.js` but it is not minified. For example, \r\n\r\n```css\r\ninput[type=range] {  appearance: none;  -webkit-appearance: none;  width: 100%;  position: absolute;  border: none;  top: 0;  right: 0;  bottom: 0;  left: 0;}\r\n```\r\n\r\nIt's a part of the CSS code we can find. As you can see, there's a lot of unnecessary white spaces.\r\n\n\n### Proposal\n\nSomeone can clear all the white spaces we find in this file :\r\n\r\nhttps:\/\/github.com\/flutter\/engine\/blob\/f9a34ae0b14f4dfd6a8cf9181ab5db3c14c0246d\/lib\/web_ui\/lib\/src\/engine\/view_embedder\/style_manager.dart\r\n\r\nIt would save some bytes in the final `main.dart.js`","comments":[],"labels":["platform-web","c: proposal","team-web"]},{"title":"InputDecorator M3 tests migration - Step7 - container","body":"## Description\r\n\r\nThis PRs adds a test group for the input decorator container, this group is organised similarly to the M3 spec, see https:\/\/m3.material.io\/components\/text-fields\/specs.\r\n\r\nIt is step 7 for the M3 test migration for `InputDecorator`.\r\nStep 1: https:\/\/github.com\/flutter\/flutter\/pull\/142981\r\nStep 2: https:\/\/github.com\/flutter\/flutter\/pull\/143369\r\nStep 3: https:\/\/github.com\/flutter\/flutter\/pull\/143520\r\nStep 4: https:\/\/github.com\/flutter\/flutter\/pull\/144169\r\nStep 5: https:\/\/github.com\/flutter\/flutter\/pull\/144932\r\nStep 6: https:\/\/github.com\/flutter\/flutter\/pull\/145213\r\n\r\n## Related Issue\r\n\r\nRelated to https:\/\/github.com\/flutter\/flutter\/issues\/139076\r\n\r\n@justinmc The diff is not very readable. The tests added by this PR are from line 298 to line 975. Other changes are due to moving some existing tests to this new 'container' group.\r\n","comments":[],"labels":["framework","f: material design"]},{"title":"Flutter 3.13 candidate.6","body":"*Replace this paragraph with a description of what this PR is changing or adding, and why. Consider including before\/after screenshots.*\r\n\r\n*List which issues are fixed by this PR. You must list at least one issue. An issue is not required if the PR fixes something trivial like a typo.*\r\n\r\n*If you had to change anything in the [flutter\/tests] repo, include a link to the migration guide as per the [breaking change policy].*\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["This pull request was opened from and to a release candidate branch. This should only be done as part of the official [Flutter release process](https:\/\/github.com\/flutter\/flutter\/wiki\/Release-process). If you are attempting to make a regular contribution to the Flutter project, please close this PR and follow the instructions at [Tree Hygiene](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene) for detailed instructions on contributing to Flutter.\n\n__Reviewers__: Use caution before merging pull requests to release branches. Ensure the proper procedure has been followed."],"labels":["a: tests","a: text input","tool","framework","engine","a: animation","f: material design","a: accessibility","a: internationalization","f: scrolling","f: cupertino","d: api docs","d: examples","f: routes","f: gestures","f: focus","c: tech-debt"]},{"title":"Consider removing --enable-web and --disable-web from Flutter CLI","body":"The `flutter` command line tooling has the concept of configuration for enabling (and disabling) support for web, Linux, Windows, macOS and Fuschia. (I hope I spelt the last one right)\r\n\r\nGiven we are having to document how to enable Flutter for web in the odd case that someone, somewhere, disable Flutter for web support on their machine, I'd suggest that these configuration options have outlived their usefulness.\r\n\r\nCan we please remove these configuration options and just have web, Linux, Windows and macOS always on? Is there a world where turning these off makes sense?\r\n\r\nWe have the work around of suggesting to users that they pass the platforms they want to support to `flutter create` instead. Or, y'know, just delete the runners you don't want. Both of these options achieve the same goal, while making the system itself less stateful.\r\n\r\nContext: https:\/\/github.com\/flutter\/website\/pull\/10329#discussion_r1535004634\r\n            ","comments":["\/FYI @cbracken who is potentially most impacted on this one.\r\n\r\n\/cc @kevmoo @atsansone if questions come up."],"labels":["tool","platform-web","c: proposal","team-tool"]},{"title":"WebViewWidget stops loading the url if its inside IndexedStack in IOS","body":"### Steps to reproduce\r\n\r\nUsing ios device do the following:\r\n\r\n1. Initialize a WebViewController controller\r\n2. Create a IndexedStack with index that is not pointing to WebViewWidget\r\n3. Try to load the url in IOS device you will notice the progress stops immediately at value 11\/100 or less\r\n\r\n\r\n### Expected results\r\n\r\nShould load the url normally even when IndexedStack is not pointing to WebViewWidget\r\n\r\n### Actual results\r\n\r\n8 out of 10 times it won't load the url\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nIndexedStack(\r\n        index: 0,\r\n        sizing: StackFit.expand,\r\n        children: [\r\n          const Center(\r\n            child: CircularProgressIndicator(\r\n              valueColor: AlwaysStoppedAnimation(Colors.white),\r\n            ),\r\n          ),\r\n          WebViewWidget(controller: _controller),\r\n          Center(\r\n            child: Column(\r\n              mainAxisAlignment: MainAxisAlignment.center,\r\n              children: [\r\n                Text(\r\n                  locale.sorry,\r\n                  style: const TextStyle(\r\n                    fontSize: 40,\r\n                    fontWeight: FontWeight.bold,\r\n                    color: Colors.white,\r\n                  ),\r\n                ),\r\n                const SizedBox(height: 5),\r\n                Text(\r\n                  locale.couldNotReachThePage,\r\n                  style: const TextStyle(\r\n                    fontSize: ConstantFonts.large,\r\n                    fontWeight: FontWeight.bold,\r\n                    color: Colors.white,\r\n                  ),\r\n                ),\r\n                const SizedBox(height: 25),\r\n                PrimaryButton(\r\n                  text: locale.tryAgain,\r\n                  width: 200,\r\n                  onTap: _controller.reload,\r\n                ),\r\n              ],\r\n            ),\r\n          ),\r\n        ],\r\n      )\r\n```\r\n\r\n<\/details>\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.4 23E214 darwin-arm64, locale en-KW)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/yousefalmutairi\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (25 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/yousefalmutairi\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 30.0.3\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 SM S711B (mobile) \u2022 192.168.0.117:5555        \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 iPhone (mobile)   \u2022 00008130-000158AE3498001C \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)   \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)      \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 123.0.6312.59\r\n    ! Error: Browsing on the local area network for iPhone 11 Pro Max. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @YDA93, what version of `webview_flutter` & `webview_flutter_wkwebview` are you experiencing this issue with? \r\n\r\nDoes this work as expected on android? ","@danagbemava-nc \r\n\r\nWorks perfectly in android. Never fails to load the url.\r\n\r\nWhile in ios most of the time it fails because the widget is not visible on the screen or the widget state is not preserved maybe.\r\n\r\nI noticed the issue also persist when using `PageView`.\r\n\r\nCurrently my workaround is to wrap `WebViewWidget` with `Stack` and show loading indicator above it instead of using `IndexedStack` or `PageView`.\r\n\r\n<details>\r\n<summary>workaround<\/summary>\r\n\r\n```\r\nStack(\r\n        children: [\r\n          WebViewWidget(controller: _controller),\r\n          IgnorePointer(\r\n            ignoring: !_isLoading,\r\n            child: Opacity(\r\n              opacity: _isLoading ? 1 : 0,\r\n              child: const Material(\r\n                color: Colors.black54,\r\n                child: Center(\r\n                  child: LoadingIndicator(\r\n                    color: Colors.white,\r\n                    loadingIndicatorType: LoadingIndicatorType.fourRotatingDots,\r\n                  ),\r\n                ),\r\n              ),\r\n            ),\r\n          ),\r\n        ],\r\n      )\r\n```\r\n<\/details>\r\n\r\n\r\n<details>\r\n<summary>pubspec.lock<\/summary>\r\n\r\n```\r\n  webview_flutter:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: webview_flutter\r\n      sha256: \"25e1b6e839e8cbfbd708abc6f85ed09d1727e24e08e08c6b8590d7c65c9a8932\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"4.7.0\"\r\n  webview_flutter_android:\r\n    dependency: transitive\r\n    description:\r\n      name: webview_flutter_android\r\n      sha256: f038ee2fae73b509dde1bc9d2c5a50ca92054282de17631a9a3d515883740934\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.16.0\"\r\n  webview_flutter_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: webview_flutter_platform_interface\r\n      sha256: d937581d6e558908d7ae3dc1989c4f87b786891ab47bb9df7de548a151779d8d\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.10.0\"\r\n  webview_flutter_wkwebview:\r\n    dependency: transitive\r\n    description:\r\n      name: webview_flutter_wkwebview\r\n      sha256: f12f8d8a99784b863e8b85e4a9a5e3cf1839d6803d2c0c3e0533a8f3c5a992a7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.13.0\"\r\n```\r\n<\/details>"],"labels":["in triage"]},{"title":"[go_router]: \"There is nothing to pop\" when popped fast","body":"### Steps to reproduce\r\n\r\n**Steps:**\r\n1. go_router: v12.1.3\r\n2. Launch sample\r\n3. Press 'Push And Pop\" button\r\n\r\n**Explanation:**\r\n\r\nThis issue occurs when pushing and popping pages rapidly enough. Adding a delay of 100-200ms seems to fix the issue, but this is not an optimal solution in my opinion. It's more of a hack that unnecessarily delays app interactions in the hope of avoiding the bug.\r\n\r\nHere's an example use case for this issue and why you might need to pop a newly pushed page very quickly. A good use case would be when a Future completes fast enough, like so:\r\n\r\n```dart\r\nrouter.pushPageA();\r\n\r\nfinal status = await future();\r\n\r\nif (status.isSuccess) {\r\n  router.pushSomeOtherPage();\r\n} else {\r\n  router.pop(); \/\/ close PageA\r\n}\r\n```\r\nIn this example, you push `PageA`, await for a Future to complete, and based on the status, either push another page or pop `PageA`. If the Future completes quickly, the pop operation happens immediately after the push, causing the issue.\r\n\r\n### Expected results\r\n\r\n`PageB` should be popped without errors.\r\n\r\n### Actual results\r\n\r\nThe error 'There is nothing to pop' occurs when attempting to pop a newly pushed `PageB`. A pop occurs before `GoRouter` is able to acknowledge the new route (`PageB`).\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nfinal router = GoRouter(\r\n  routes: [\r\n    GoRoute(\r\n      name: 'A',\r\n      path: '\/',\r\n      builder: (_, __) => const PageA(),\r\n    ),\r\n    GoRoute(\r\n      name: 'B',\r\n      path: '\/B',\r\n      builder: (_, __) => const PageB(),\r\n    ),\r\n  ],\r\n);\r\n\r\nvoid main() => runApp(const App());\r\n\r\nclass App extends StatelessWidget {\r\n  const App({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp.router(\r\n      routerConfig: router,\r\n    );\r\n  }\r\n}\r\n\r\nclass PageA extends StatelessWidget {\r\n  const PageA({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      backgroundColor: Colors.white,\r\n      body: Column(\r\n        mainAxisAlignment: MainAxisAlignment.center,\r\n        children: [\r\n          Center(\r\n            child: TextButton(\r\n              onPressed: () {\r\n                context.pushNamed('B');\r\n                context.pop();\r\n              },\r\n              child: const Text('Push And Pop'),\r\n            ),\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageB extends StatelessWidget {\r\n  const PageB({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      backgroundColor: Colors.black,\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nRestarted application in 835ms.\r\n\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by gesture \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following GoError was thrown while handling a gesture:\r\nThere is nothing to pop\r\n\r\nWhen the exception was thrown, this was the stack:\r\n#0      GoRouterDelegate.pop (package:go_router\/src\/delegate.dart:94:5)\r\ndelegate.dart:94\r\n#1      GoRouter.pop (package:go_router\/src\/router.dart:490:20)\r\nrouter.dart:490\r\n#2      GoRouterHelper.pop (package:go_router\/src\/misc\/extensions.dart:71:65)\r\nextensions.dart:71\r\n#3      PageA.build.<anonymous closure> (package:offsuit\/main_development.dart:46:25)\r\nmain_development.dart:46\r\n#4      _InkResponseState.handleTap (package:flutter\/src\/material\/ink_well.dart:1183:21)\r\nink_well.dart:1183\r\n#5      GestureRecognizer.invokeCallback (package:flutter\/src\/gestures\/recognizer.dart:275:24)\r\nrecognizer.dart:275\r\n#6      TapGestureRecognizer.handleTapUp (package:flutter\/src\/gestures\/tap.dart:652:11)\r\ntap.dart:652\r\n#7      BaseTapGestureRecognizer._checkUp (package:flutter\/src\/gestures\/tap.dart:309:5)\r\ntap.dart:309\r\n#8      BaseTapGestureRecognizer.handlePrimaryPointer (package:flutter\/src\/gestures\/tap.dart:242:7)\r\ntap.dart:242\r\n#9      PrimaryPointerGestureRecognizer.handleEvent (package:flutter\/src\/gestures\/recognizer.dart:630:9)\r\nrecognizer.dart:630\r\n#10     PointerRouter._dispatch (package:flutter\/src\/gestures\/pointer_router.dart:98:12)\r\npointer_router.dart:98\r\n#11     PointerRouter._dispatchEventToRoutes.<anonymous closure> (package:flutter\/src\/gestures\/pointer_router.dart:143:9)\r\npointer_router.dart:143\r\n#12     _LinkedHashMapMixin.forEach (dart:collection-patch\/compact_hash.dart:633:13)\r\ncompact_hash.dart:633\r\n#13     PointerRouter._dispatchEventToRoutes (package:flutter\/src\/gestures\/pointer_router.dart:141:18)\r\npointer_router.dart:141\r\n#14     PointerRouter.route (package:flutter\/src\/gestures\/pointer_router.dart:127:7)\r\npointer_router.dart:127\r\n#15     GestureBinding.handleEvent (package:flutter\/src\/gestures\/binding.dart:488:19)\r\nbinding.dart:488\r\n#16     GestureBinding.dispatchEvent (package:flutter\/src\/gestures\/binding.dart:468:22)\r\nbinding.dart:468\r\n#17     RendererBinding.dispatchEvent (package:flutter\/src\/rendering\/binding.dart:439:11)\r\nbinding.dart:439\r\n#18     GestureBinding._handlePointerEventImmediately (package:flutter\/src\/gestures\/binding.dart:413:7)\r\nbinding.dart:413\r\n#19     GestureBinding.handlePointerEvent (package:flutter\/src\/gestures\/binding.dart:376:5)\r\nbinding.dart:376\r\n#20     GestureBinding._flushPointerEventQueue (package:flutter\/src\/gestures\/binding.dart:323:7)\r\nbinding.dart:323\r\n#21     GestureBinding._handlePointerDataPacket (package:flutter\/src\/gestures\/binding.dart:292:9)\r\nbinding.dart:292\r\n#22     _invoke1 (dart:ui\/hooks.dart:328:13)\r\nhooks.dart:328\r\n#23     PlatformDispatcher._dispatchPointerDataPacket (dart:ui\/platform_dispatcher.dart:410:7)\r\nplatform_dispatcher.dart:410\r\n#24     _dispatchPointerDataPacket (dart:ui\/hooks.dart:262:31)\r\nhooks.dart:262\r\n\r\nHandler: \"onTap\"\r\nRecognizer: TapGestureRecognizer#832a5\r\n    debugOwner: GestureDetector\r\n    state: possible\r\n    won arena\r\n    finalPosition: Offset(226.0, 447.0)\r\n    finalLocalPosition: Offset(78.6, 19.0)\r\n    button: 1\r\n    sent tap down\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.16.7, on macOS 14.2.1 23C71 darwin-arm64, locale en-US)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.3)\r\n[\u2713] VS Code (version 1.86.2)\r\n[\u2713] Connected device (3 available)\r\n[\u2713] Network resources\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I also can reproduce this with the latest package version `go_router: ^13.2.1`. \r\n\r\nThe issue can be also reproduced with:\r\n\r\n```dart\r\ncontext.pushNamed('B').then((_) {\r\n\tprint('Page B is popped');\r\n\tcontext.pop();\r\n});\r\n```\r\n\r\nBut not reproduced with Navigator:\r\n\r\n```dart\r\nNavigator.pushNamed(context, '\/second').then((value) {\r\n\tprint('Second screen is popped');\r\n\tNavigator.pop(context);\r\n});\r\n```\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n"],"labels":["package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"Fix SliverMainAxisGroup layout in reverse","body":"Fixes https:\/\/github.com\/flutter\/flutter\/issues\/145068\r\n\r\nThe original tests for SliverMainAxisGroup did not actually check where the child was painted (#126596).\r\n\r\nFollowed the same pattern in RenderSliverMultiBoxAdaptor:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/11c034f0371eb28576d41a0c218ccae6b38e7702\/packages\/flutter\/lib\/src\/rendering\/sliver_multi_box_adaptor.dart#L666\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: scrolling"]},{"title":"Fix skwasm tests","body":"Skwasm tests are now running as `bringup: true` in postsubmit, but failing. Let's get them fixed.","comments":[],"labels":["tool","framework"]},{"title":"Severe performance regression on Firefox in v. 3.19","body":"### Steps to reproduce\r\n\r\nUse a website built with Flutter 3.19.0 or later in Firefox.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```console\r\n$ flutter create --sample=widgets.ListView.7 .\r\n$ flutter build web --no-pub --no-native-null-assertions --pwa-strategy none --no-web-resources-cdn\r\n```\r\n<\/details>\r\n\r\nI've built ListView.7 sample on versions 3.16.9, 3.19.0, and 3.19.4 using the html and canvaskit renderers:\r\n\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.16.9-canvaskit\/\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.16.9-html\/\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.19.0-canvaskit\/\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.19.0-html\/\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.19.4-canvaskit\/\r\nhttps:\/\/zliide.github.io\/flutter_web_perf\/3.19.4-html\/\r\n\r\nTry opening them in Firefox, scroll up and down a bit, and see if you can spot a pattern.\r\n\r\n### Performance profiling on master channel\r\n\r\n- [X] The issue still persists on the master channel\r\n\r\n### Timeline Traces\r\n\r\n<details open><summary>Timeline Traces JSON<\/summary>\r\n\r\nN\/A; flutter run doesn't work with Firefox.\r\n\r\n<\/details>\r\n\r\n\r\n### Video demonstration\r\n\r\n<details open>\r\n<summary>Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### What target platforms are you seeing this bug on?\r\n\r\nWeb\r\n\r\n### OS\/Browser name and version | Device information\r\n\r\nFirefox v123\r\n\r\n### Does the problem occur on emulator\/simulator as well as on physical devices?\r\n\r\nUnknown\r\n\r\n### Is the problem only reproducible with Impeller?\r\n\r\nN\/A\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n$ flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.22631.3296], locale ...)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\Users\\...\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (2 weeks ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\...\\AppData\\Local\\Android\\sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for more details.\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at .\\Google\\Chrome\\Application\\chrome.exe)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.5)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.4.33403.182\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n\r\n<\/details>\r\n","comments":["+1, can also reproduce.","Thanks for the report @kristoffer-zliide \r\nI followed the steps and ran the code on chrome and firefox respectively but didn't notice \/ observe any performance issue while scrolling the list, as shown below:\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/815edf42-4d1b-438b-ab6a-f791602e6315\r\n\r\nCan you provide a short video which shows the performance difference between chrome and firefox that too with respect to 3.16 vs 3.19 ?\r\n\r\n","OK, I concede it's not so clear with such a simple app, but despite how basic it is I find it very noticeable, with frame rates subjectively between 1 and 5 fps. The point of the sample builds was mostly to prove that the regression occurred in 3.19.0; 3.16.9 is super smooth in Firefox. If you want a taste of how bad it is in a real app, try opening https:\/\/flutter-gallery-archive.web.app\/ in Firefox.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/42271865\/7cbb0b1c-37be-48f3-811d-54fe59fe3440"],"labels":["in triage"]},{"title":"[flutter_tools] Enable WebAssembly compilation everywhere, remove feature flag","body":null,"comments":["Holding off until Monday to make sure the test PR sticks","This pull request has been changed to a draft. The currently pending flutter-gold status will not be able to resolve until a new commit is pushed or the change is marked ready for review again.\n\nFor more guidance, visit [Writing a golden file test for `package:flutter`](https:\/\/github.com\/flutter\/flutter\/wiki\/Writing-a-golden-file-test-for-package:flutter).\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing.\n\n"],"labels":["tool","fyi-web"]},{"title":"Make `generate_gradle_lockfiles.dart` script check exit code of `flutter build apk --config-only`","body":"It currently does not verify that the command succeeds: https:\/\/github.com\/flutter\/flutter\/blob\/deaa600204d8d561f705d8adbaf031f16ec3fc80\/dev\/tools\/bin\/generate_gradle_lockfiles.dart#L102.\r\n\r\nThe script should fail if the command fails","comments":[],"labels":["team-android"]},{"title":"WebTemplateWarning should include (optional) URL for more info","body":"https:\/\/github.com\/flutter\/flutter\/blob\/31209d04ffdb575ab5e2bd587eb606c0faed3e04\/packages\/flutter_tools\/lib\/src\/web_template.dart#L72-L84\r\n\r\nWe should hold our users' hands more here. Linking to docs for each case seems like a great idea.","comments":["`Warning: In index.html:27: Manual service worker registration deprecated. Use flutter.js service worker bootstrapping instead.`\r\n\r\nNo idea what to do with this...I mean, *I* do, but most users won't.","Once we add docs (https:\/\/github.com\/flutter\/website\/issues\/10126), we can make the warnings link to the updated documentation"],"labels":["tool","platform-web","c: proposal","team-web"]},{"title":"Web test bootstrapping needs to be migrated off the window singleton","body":"As part of multi view support, the `window` singleton is deprecated and will be removed in the future. The `flutter\/flutter` repository has been cleaned up to no longer use this property and the only remaining usage is the bootstrapping code for web tests:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/98d10b62112d663549f78528e3901250a9ba3590\/packages\/flutter_tools\/lib\/src\/web\/bootstrap.dart#L416\r\n\r\nThat code needs to be migrated to continue working when the `window` singleton is removed.","comments":["The code in question was recently moved to here:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/31209d04ffdb575ab5e2bd587eb606c0faed3e04\/packages\/flutter_test\/lib\/src\/_test_selector_web.dart#L53","This might require changes to `ui_web`. When I was looking into this, it looks like we have a specific extension that we were using for this that does downcasting to types that aren't visible from outside of `dart:_engine`: https:\/\/github.com\/flutter\/engine\/blob\/a2ed373fa70fd43cd8121e3c7e59bbb5ae6917db\/lib\/web_ui\/lib\/ui_web\/src\/ui_web\/testing.dart#L8\r\n\r\nSo we might need to do the equivalent thing on `FlutterView` instead of the window."],"labels":["fyi-tool","team-web"]},{"title":"[flutter release] strategy on better ways to merge cherry pick PR","body":"For the longest time I thought cherry pick author should be the one tuning the tests and merging the PR, but today I read https:\/\/github.com\/flutter\/flutter\/wiki\/Flutter-Cherrypick-Process and realized that it says \"The release engineering team will merge the cherry-pick pull request\"\r\n\r\nIn this week's release https:\/\/github.com\/flutter\/flutter\/issues\/145184 and https:\/\/github.com\/flutter\/engine\/pull\/51425 were merged by me, and I had to rerun tests and stamp LGTM on one of them. However, I didn't realize https:\/\/github.com\/flutter\/flutter\/pull\/145181 was also left open as a cherry pick PR and not merged. \r\n\r\nWould it be possible to change the policy, so that PR authors are the one merging cherry pick PRs?","comments":["@XilaiZhang we have the automated cherry-pick action.  Wouldn\u2019t we rather just write another action that adds the autosubmit label once the approved label is added?  This takes the burden off of both parties.","Yeah the 3 PRs aren't opened through the automated action because, one of them has a merge conflict, and the two others don't have a corresponding PR merged into main\/master.\r\n\r\nmy understanding is that even if they are opened through automated cherry pick PR, if we submit based on approved status, then:\r\n1. If author approves the bot PR, it can merge it without reviewer \/ TL approval\r\n2. the tests could still be failing when approval is given, and autosubmit label would be removed.\r\nif the cps are manually created, then it is also possible that:\r\n3. approval is granted on cherry pick issue, but not granted on cherry pick PR. \r\n\r\nIf we are okay with the risks, I think submitting based on approval would resolve 1 of the 3 PRs from this week. Are we good with accepting the risks (mostly the potential of skipping TL review?)\r\n"],"labels":["team-release"]},{"title":"Stderr inserted into `--file-report` file when using `flutter test`","body":"Running `SHARD=framework_tests SUBSHARD=misc dart dev\/bots\/test.dart | tee output.txt` generates the following outputs:\r\n\r\n[metrics.json](https:\/\/github.com\/flutter\/flutter\/files\/14705008\/metrics.json)\r\n[output.txt](https:\/\/github.com\/flutter\/flutter\/files\/14705010\/output.txt)\r\n\r\nThere are two issues:\r\n* Error messages from stderr are being added to the metrics.json file.\r\n* Unicode characters are not being processed correctly.","comments":["@christopherfujino FYI","Took a look and this is an error in package:test. Whenever a print function is used within a test the printed string is added as as string of \\u0000 characters to the report file.","@whesse do you know what is the best place to report this bug?","I would file an issue on the test package, at https:\/\/github.com\/dart-lang\/test."],"labels":["a: tests","tool","team-tool"]},{"title":"'Linux flutter release builder' links to wrong build and therefore stuck at yellow","body":"on [builds of release branch](https:\/\/flutter-dashboard.appspot.com\/#\/build?repo=flutter&branch=flutter-3.19-candidate.1), the build target 'Linux flutter release builder' stucks at yellow.\r\n\r\nsir Godofredo pointed out that this is because the [linked build](https:\/\/ci.chromium.org\/ui\/p\/dart-internal\/builders\/luci.flutter.prod\/Linux%20flutter_release_builder) which people don't have permission to view, is in fact wrong. The correct build link should be [this one](https:\/\/ci.chromium.org\/ui\/p\/dart-internal\/builders\/flutter\/Linux%20flutter_release_builder)","comments":[],"labels":["team-infra","P2","triaged-infra","fyi-release"]},{"title":"Refactor add_to_app_life_cycle_tests","body":"Refactor add_to_app_life_cycle_tests in order to reduce testing logic in test.dart, create a suite_runners directory and allow for later implementing package:test onto add_to_app_life_cycle_tests\r\n\r\nPart of https:\/\/github.com\/flutter\/flutter\/issues\/145482\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["team-infra"]},{"title":"Several camera accesses are performed when using the camera plugin on web","body":"If you just wish to show e.g. the stream from the front-facing camera on a phone, it would be nice to be able to simply do so, without having to run [this rather brutal piece of code](https:\/\/github.com\/flutter\/packages\/blob\/bb97da8ec627466fdb45cdd36e2c0e35dee40e9e\/packages\/camera\/camera_web\/lib\/src\/camera_web.dart#L85), which opens all cameras and closes them again, even before the camera is needed.\r\n\r\n### Steps to reproduce\r\n\r\nCall `availableCameras` (as [required on web](https:\/\/github.com\/flutter\/packages\/blob\/bb97da8ec627466fdb45cdd36e2c0e35dee40e9e\/packages\/camera\/camera_web\/lib\/src\/camera_web.dart#L203)), then call `initialize()` on a Camera.\r\n\r\n### Expected results\r\n\r\nA single permission prompt and camera simply turning on, and no crashes.\r\n\r\n### Actual results\r\n\r\n1. The camera is turned on, then off, then on again, prompting\r\n2. permission request already at the point of the call to `availableCameras` and sometimes again after due to the call to `initialize()`, and\r\n3. device LED and OS camera status indicators flickering on and off\r\n4. The camera activity stresses Firefox on Android to the point of crashing\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n$ flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.22631.3296], locale ...)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\Users\\...\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (2 weeks ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\...\\AppData\\Local\\Android\\sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for more details.\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at .\\Google\\Chrome\\Application\\chrome.exe)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.5)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.4.33403.182\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @kristoffer-zliide \r\nAs my understanding, the call `availableCameras` will cause OS camera status indicator flickering as demo video below, right?\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/e15512d1-75b8-4e5d-8cde-6fa9b52216a9\r\n<\/details>\r\n\r\n","Yes, exactly. That's one side effect. On some mobile devices you can even hear the auto focus turning on and off, and it would crash Firefox mobile. Also, in many use cases, there might be a need to ask for permission so early.\r\n\r\nCompare what you have there with the changes from the PR: https:\/\/zliide.github.io\/camera-web-fixed-available\/.","Thanks for the update. I see it's improved on your demo above. \r\n\r\nFor the issue, it can be reproduced with [camera's example](https:\/\/github.com\/flutter\/packages\/tree\/main\/packages\/camera\/camera\/example). \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["platform-web","p: camera","package","has reproducible steps","fyi-ecosystem","team-web","found in release: 3.19","found in release: 3.21"]},{"title":"Consider using `_bitfield_io.dart` instead of `_bitfield_web.dart` on dart2wasm","body":"As of right now, the conditional import in `bitfield.dart` is based on `dart.library.js_util`, which evaluates to `true` on both JS and wasm backends. (See https:\/\/github.com\/flutter\/flutter\/blob\/5545c95df7a8ce4eaa03ce98b0d76d83aaf4ecf7\/packages\/flutter\/lib\/src\/foundation\/bitfield.dart#L6). However, the reason for the separate web implementation is for JS floating-point precision issues, which do not apply to wasm. We should consider using the `_bitfield_io.dart` implementation in dart2wasm, which basically means switching the conditional import to use something like `dart.library.html` or `dart.library.js` or something like that instead.","comments":["Maybe rename `_bitfield_web` to `_bitfield_js` or similar?","I wouldn't worry about it either way, these classes are completely unused and the ifdef only existed to get web compiling at all"],"labels":["engine","platform-web","e: wasm","team-web"]},{"title":"Make const work with LayoutBuilder Widget","body":"### Use case\n\nI tried to use const with responsive widgets like using the `LayoutBuilder` widget or using if statement with `MediaQuery.of(context).size.width` but these const widgets still rebuild. I check it by using print in the `Widget build(BuildContext context)`\r\nI think it is good to make const work for the responsive widget. Many widgets are used in many screen sizes.\r\nFor an example:\r\n```\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    const testWidget = Test();\r\n    return LayoutBuilder(builder: (context, constraints) {\r\n      return constraints.maxWidth > 500 ? const Column(children: [testWidget]) : const Row(children: [testWidget]);\r\n    });\r\n```\r\n```\r\nclass Test extends StatelessWidget {\r\n  const Test({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    print('rebuild');\r\n    return const SizedBox();\r\n  }\r\n}\r\n```\r\nThe console will print rebuild every time you change screen size between 500 units.\n\n### Proposal\n\nMake the `const` widget work with `LayoutBuilder` or other responsive widgets.","comments":[],"labels":["c: new feature","framework","c: proposal","team-framework"]},{"title":"Add `AnimationStyle` to `showBottomSheet` and `showModalBottomSheet`","body":"fixes [Introduce animation customizable with `AnimationStyle` to `BottomSheet`](https:\/\/github.com\/flutter\/flutter\/issues\/145532)\r\n\r\n### Default bottom sheet animation\r\n![00-ezgif com-video-to-gif-converter](https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/a295b002-b310-4dea-8bc4-23b1d299748c)\r\n\r\n### Custom bottom sheet animation\r\n![01-ezgif com-video-to-gif-converter](https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/8c5c3d5f-e67d-4ed5-880d-f17d262087e1)\r\n\r\n### No bottom sheet animation\r\n![02-ezgif com-video-to-gif-converter](https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/872409d8-8a8d-4db9-b95b-7f96a62cdffc)\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","a: animation","f: material design","d: api docs","d: examples"]},{"title":"Introduce animation customizable with `AnimationStyle` to `BottomSheet`","body":"### Use case\n\n`BottomSheet` lacks a way to customize animation duration and reverse animation duration\n\n### Proposal\n\nAdd [AnimationStyle](https:\/\/api.flutter.dev\/flutter\/animation\/AnimationStyle-class.html) to `showBottomSheet` and `showModalBottomSheet`","comments":[],"labels":["c: new feature","framework","a: animation","f: material design","c: proposal"]},{"title":"Space key doesnt work in Flutter Web TextField\/TextFormField","body":"### Steps to reproduce\r\n\r\nCreate a StatefulWidget with Widget Tree Scaffold -> SingleChildScrollView -> Column -> \r\nRow -> children (Expanded -> TextField\/TextFormField), (Expanded -> TextField\/TextFormField)\r\n\r\nDeployed on web server and tried, didnt work\r\n\r\nFlutter version: Flutter 3.16.4 stable\r\n\r\nDuplicate issue: https:\/\/github.com\/flutter\/flutter\/issues\/74191\r\n\r\n### Expected results\r\n\r\nJust like normal JavaScript web, allow to jump from one field or dropdown to the next\r\n\r\n### Actual results\r\n\r\nTry typing \"abc def\" and press Tab key to jump to next text field. Again attempt to type with Space Key. Not working.\r\n\r\n*** IMPORTANT *** Tab key is required for any web application. Please resolve this issue.\r\n\r\nTried to add below code, and Tab key stops working and many users are complaining\r\n\r\n```\r\nfinal shortcuts = WidgetsApp.defaultShortcuts;\r\nshortcuts.remove(LogicalKeySet(LogicalKeyboardKey.space));\r\n\r\nreturn MaterialApp.router(\r\n   shortcuts: shortcuts,\r\n   ...\r\n)\r\n```\r\n\r\nAlso attempted to use FocusNode but does not work. \r\nAlso attempted to build web with canvas and web html renderer and doesn't work.\r\n\r\n### Code sample\r\n\r\n```\r\nColumn(children: [\r\n          SizedBox(\r\n            child: Row(\r\n                crossAxisAlignment: CrossAxisAlignment.center,\r\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n                children: [\r\n                  Expanded(\r\n                    child: SizedBox(\r\n                        height: 40,\r\n                        child: TextFormField(\r\n                            readOnly: true,\r\n                            decoration: InputDecoration(\r\n                              labelText: fieldName,\r\n                              border: const OutlineInputBorder(\r\n                              ),\r\n                              focusedBorder: const OutlineInputBorder(\r\n                                borderSide: BorderSide(color: Colors.grey, width: 1),\r\n                              ),\r\n\r\n                            ),\r\n                            controller: controllerTest\r\n                        )\r\n                    ),\r\n                  ),\r\n                  const SizedBox(width: 20),\r\n                  Expanded(\r\n                    child: SizedBox(\r\n                        height: 40,\r\n                        child: TextFormField(\r\n                            readOnly: true,\r\n                            decoration: InputDecoration(\r\n                              labelText: fieldName,\r\n                              border: const OutlineInputBorder(\r\n                              ),\r\n                              focusedBorder: const OutlineInputBorder(\r\n                                borderSide: BorderSide(color: Colors.grey, width: 1),\r\n                              ),\r\n\r\n                            ),\r\n                            controller: controllerOther\r\n                        )\r\n                    ),\r\n                  )\r\n                ]),\r\n          ),\r\n          \r\n        ])\r\n\r\n```\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["@fatimaI7 \r\nI tried your code sample but was unable to input anything on the textfields, so, I tried below code sample with which I was able to use the space key with tab properly without any issues.\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/a14398fc-3801-4c35-ba9d-00b03b5d22ae\r\n\r\n\r\n<details>\r\n<summary> runnable code sample <\/summary>\r\n\r\n```\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/services.dart';\r\n\r\n\/\/\/ Flutter code sample for [TextFormField].\r\n\r\nvoid main() => runApp(const TextFormFieldExampleApp());\r\n\r\nclass TextFormFieldExampleApp extends StatelessWidget {\r\n  const TextFormFieldExampleApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: TextFormFieldExample(),\r\n    );\r\n  }\r\n}\r\n\r\nclass TextFormFieldExample extends StatefulWidget {\r\n  const TextFormFieldExample({super.key});\r\n\r\n  @override\r\n  State<TextFormFieldExample> createState() => _TextFormFieldExampleState();\r\n}\r\n\r\nclass _TextFormFieldExampleState extends State<TextFormFieldExample> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Material(\r\n      child: Center(\r\n        child: Shortcuts(\r\n          shortcuts: const <ShortcutActivator, Intent>{\r\n            \/\/ Pressing space in the field will now move to the next field.\r\n          \/\/  SingleActivator(LogicalKeyboardKey.space): NextFocusIntent(),\r\n          },\r\n          child: FocusTraversalGroup(\r\n            child: Form(\r\n              autovalidateMode: AutovalidateMode.always,\r\n              onChanged: () {\r\n                Form.of(primaryFocus!.context!).save();\r\n              },\r\n              child: Wrap(\r\n                children: List<Widget>.generate(5, (int index) {\r\n                  return Padding(\r\n                    padding: const EdgeInsets.all(8.0),\r\n                    child: ConstrainedBox(\r\n                      constraints: BoxConstraints.tight(const Size(200, 50)),\r\n                      child: TextFormField(\r\n                        onSaved: (String? value) {\r\n                          debugPrint(\r\n                              'Value for field $index saved as \"$value\"');\r\n                        },\r\n                      ),\r\n                    ),\r\n                  );\r\n                }),\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n\r\nIn above code, I commented out `SingleActivator(LogicalKeyboardKey.space): NextFocusIntent(),` as with it, tapping space key takes us to other textfield.\r\n\r\nTry the same and see if it helps in your case or not."],"labels":["waiting for customer response","in triage"]},{"title":"iOS Crashing Issue after specific Flutter commit throwing `shared_ptr<impeller::CaptureElement>`","body":"### Steps to reproduce\n\nI recently discovered an iOS-specific crashing issue in two of my apps that appears to have started from a Flutter merge 2 weeks ago (Mar 7, 2024) (the Flutter version before the commit had no issues; I switched back and forth twice). For troubleshooting and creating a minimal reproducible example, knowing the commits prior to that merge worked, I moved back to developing on the latest version of Flutter.\r\n\r\n> [Roll Flutter Engine](https:\/\/github.com\/flutter\/flutter\/commits\/master\/?after=d31a85ba5c5e67199a9a3c95fd9fef51c89a9306+174) from 175069397a40 to 80cd7981043f ([5 revisions](https:\/\/github.com\/flutter\/engine\/compare\/175069397a40...80cd7981043f?diff=unified&w=))\r\n> [Commit: d632f34](https:\/\/github.com\/flutter\/flutter\/commit\/d632f34f9debeb9c524f43cd01db602094bebb6f) | Mar 7, 2024, 4:13 PM\r\n\r\nThe crashing issue happens when loading certain layouts or widgets, then tapping an `InkWell` (or `GestureDetector`) in the AppBar. That tap will either:\r\n1. crash the app on an iOS simulator (I've been using an iPad simulator), or \r\n2. hit a debug breakpoint in Xcode (even if running from VS Code, which apparently runs via Xcode) when building to a physical device (I have an iPad), but the breakpoint is in a very unidentifiable area, and so made no sense to me (screenshot attached).\r\n\r\nThe fixes for the crash are multifold (and are numbered in the code), and I've no idea which fix (of 5), _if any_, would be the most proper\u2014if not the root\u2014fix, because I've no idea what the root cause is. And I'm really only looking for advice on which fix(es) might be the better fixes to implement.\r\n\r\nIn the beginning, because I found #2 and #3 at the same time, I figured it had to do with having a `Card` nested in another `Card`, with both having a `clipBehavior`, because commenting out either `clipBehavior` property worked. But then I found the other three fixes where it also didn't crash, which left me with no clue.\r\n\r\n> **Disclaimer:** I only have one physical iOS device, so unsure if any or all of these issues and\/or fixes will apply on other iOS devices. I hope someone else can reproduce it.\r\n\r\n**To Recreate:**\r\n1. Build and run the provided code example on an iOS device or simulator.\r\n2. Tap the title in the AppBar.\r\nNote: If code was changed and hot-refreshed, the first tap could be buffered and the 2nd tap may cause the crash (if expected). Tapping two or more times for testing is recommended.\n\n### Expected results\n\nExpected result: Tapping the title in the AppBar one or more times, the console log should output one line per tap, and the app should not crash.\n\n### Actual results\n\n3. Observe the app:\r\n3a. Crashes (iPad simulator) with the console message, \"Lost connection to device.\", or, \r\n3b. Hits a raster-level breakpoint in Xcode (physical iPad).\r\n- Anecdotally, an iPad simulator crashed, while a physical iPad popped up a breakpoint in Xcode (despite running in VS Code).\r\n- When the physical device hit the breakpoint in Xcode, I 'continued' the step-through over 60 times, and eventually had to just stop the runner.\r\n- Other than the one-line console output after the crash on the simulator, no logs were dumped in either case.\r\n\n\n### Code sample\n\n**Code Example:**\r\nGist: [https:\/\/gist.github.com\/KDCinfo\/ba5d7209197f6c94231753e42baf36c6](https:\/\/gist.github.com\/KDCinfo\/ba5d7209197f6c94231753e42baf36c6)\r\nDartPad: [https:\/\/dartpad.dev\/?id=ba5d7209197f6c94231753e42baf36c6](https:\/\/dartpad.dev\/?id=ba5d7209197f6c94231753e42baf36c6)\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Physical iPad | Xcode debug breakpoint screenshot<\/summary>\r\n\r\n![ios_crashing_flutter_3_21](https:\/\/github.com\/flutter\/flutter\/assets\/495285\/00258e9a-7d87-43a5-9c0c-58679f00cff2)\r\n\r\n<\/details>\r\n\n\n### Logs\n\nNo logs were provided for either the simulator crash, or when the Xcode breakpoint was hit on a physical iPad.\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n```console\r\nMac: MacOS Sonoma Version 14.4\r\n\r\niPad (physical): iPadOS Version 17.1.2 | iPad mini (5th gen)\r\niPad (simulator): iPadOS Version 17.0.1 | iPad Pro (12.9-in; 2nd gen)\r\n```\r\n\r\n```console\r\n[\u2713] Flutter (Channel master, 3.21.0-11.0.pre.32, on macOS 14.4 23E214 darwin-x64, locale en-US)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.32 on channel master at \/Users\/keithdc\/Development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 28498fe18a (2 days ago), 2024-03-19 12:25:57 -0400\r\n    \u2022 Engine revision 59138d5f8e\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-247.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/keithdc\/Library\/Android\/sdk\r\n    \u2022 Platform android-32, build-tools 30.0.3\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.58.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Keith D\u2019s iPad (mobile) \u2022 00008020-000C79160C81402E \u2022 ios            \u2022 iOS 17.1.2 21B101\r\n    \u2022 macOS (desktop)         \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.4 23E214 darwin-x64\r\n    \u2022 Chrome (web)            \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I was able to replicate the reported behavior using the code sample provided and running on iOS simulator 15.3, so it doesn't seem to be specific to device or OS version.\r\nAlso, the crash occurs with Impeller enabled, as without it, the crash doesn't occur after following steps to replicate.\r\nXcode shows below crash log after tapping on the appbar title couple of times.\r\n\r\n```\r\nFlutter`std::_fl::shared_ptr<impeller::CaptureElement>::~shared_ptr[abi:v15000]():\r\n    0x10b28ad2a <+0>:  pushq  %rbp\r\n    0x10b28ad2b <+1>:  movq   %rsp, %rbp\r\n    0x10b28ad2e <+4>:  pushq  %rbx\r\n    0x10b28ad2f <+5>:  pushq  %rax\r\n    0x10b28ad30 <+6>:  movq   0x8(%rdi), %rbx\r\n    0x10b28ad34 <+10>: testq  %rbx, %rbx\r\n    0x10b28ad37 <+13>: je     0x10b28ad4b               ; <+33>\r\n    0x10b28ad39 <+15>: movq   $-0x1, %rax\r\n->  0x10b28ad40 <+22>: lock   \r\n    0x10b28ad41 <+23>: xaddq  %rax, 0x8(%rbx)\r\n    0x10b28ad46 <+28>: testq  %rax, %rax\r\n    0x10b28ad49 <+31>: je     0x10b28ad52               ; <+40>\r\n    0x10b28ad4b <+33>: addq   $0x8, %rsp\r\n    0x10b28ad4f <+37>: popq   %rbx\r\n    0x10b28ad50 <+38>: popq   %rbp\r\n    0x10b28ad51 <+39>: retq   \r\n    0x10b28ad52 <+40>: movq   (%rbx), %rax\r\n    0x10b28ad55 <+43>: movq   %rbx, %rdi\r\n    0x10b28ad58 <+46>: callq  *0x10(%rax)\r\n    0x10b28ad5b <+49>: movq   %rbx, %rdi\r\n    0x10b28ad5e <+52>: addq   $0x8, %rsp\r\n    0x10b28ad62 <+56>: popq   %rbx\r\n    0x10b28ad63 <+57>: popq   %rbp\r\n    0x10b28ad64 <+58>: jmp    0x10af27368               ; std::_fl::__shared_weak_count::__release_weak()\r\n    0x10b28ad69 <+63>: nop    \r\n```\r\n\r\nSame log was reported in this issue comment: https:\/\/github.com\/flutter\/flutter\/issues\/144333#issuecomment-2002404279\r\n\r\n\r\n<details>\r\n<summary> master flutter doctor -v <\/summary>\r\n\r\n```\r\n\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.42, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.42 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 5fab92f062 (23 minutes ago), 2024-03-22 00:56:12 -0400\r\n    \u2022 Engine revision f9a34ae0b1\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n","Thank you for confirming! \r\n\r\nBeing related to Impeller makes sense being it's now enabled by default on iOS, and I haven't touched my apps on iOS since my last release in early January. \r\n\r\nUnless informed otherwise, and because a fix for this issue could likely take some time, I'm going to proceed with just removing the `clipBehavior` property from the two `Card` widgets (fixes #2 and #3 from the code example), allowing defaults to be used. My apps have no need for a preference for clipping. \r\n\r\nCheers!"],"labels":["c: regression","c: crash","platform-ios","engine","has reproducible steps","e: impeller","team-engine","found in release: 3.21"]},{"title":"[HTML renderer] size computed in `performLayout` is different than `computeDryLayout` in some cases","body":"### Steps to reproduce\r\n\r\nThis appeared to be an issue https:\/\/github.com\/flutter\/flutter\/pull\/143932 after https:\/\/github.com\/flutter\/flutter\/pull\/144577.\r\n\r\nUnfortunately, some reason the same tests don't reproduce the issue outside Flutter source code.\r\n\r\n### Actual results\r\n\r\nTest fails\r\n\r\n\r\n","comments":[],"labels":["a: tests","framework","platform-web","e: web_html","team-web"]},{"title":"TextField can not display and opearate normally in flutter web page that was embeded in a html page's modal(diaolg)","body":"### Steps to reproduce\n\n1. write a flutter web page has a TextField and Button....\r\n2. build flutter web page to web and deploy to a website.\r\n3. flutter website start and brower to \"http:\/\/localhost:9000\/index.html\"==>everything is working normally.\r\n4. write a html page(test.html) just has a button to open modal(dialog)\r\n5. The modal(dialog) has a iframe that embedding the flutter web page==> <iframe id=\"ifm\" src=\"http:\/\/localhost:9000\/index.html\" height=\"100%\" width=\"100%\" \r\n6. deploy  test.html to website and brower to http:\/\/localhost:9000\/test.html==>can see a button then click to open modal(dialog),the flutter page(index.html) will show up,but the TextField can not show normally(missing or missing boder) and can not focus in and can not edit.\n\n### Expected results\n\nThe TextField in flutter web page should be edit and work normallhy.\n\n### Actual results\n\nThe TextField in flutter web page can not focus ,can not edit,can not display normally.\n\n### Code sample\n\n<details open><summary>Flutter web page<\/summary>\r\n\r\n```flutter\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'TextField and Button Example',\r\n      home: MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  @override\r\n  _MyHomePageState createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  TextEditingController _textFieldController = TextEditingController();\r\n  String _inputText = '';\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text('TextField and Button Example'),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            TextField(\r\n              controller: _textFieldController,\r\n              onChanged: (value) {\r\n                setState(() {\r\n                  _inputText = value;\r\n                });\r\n              },\r\n              decoration: InputDecoration(\r\n                labelText: 'Enter Text',\r\n              ),\r\n            ),\r\n            SizedBox(height: 20),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                \/\/ Do something with the input text, for example, print it\r\n                print('Input Text: $_inputText');\r\n              },\r\n              child: Text('Submit'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _textFieldController.dispose();\r\n    super.dispose();\r\n  }\r\n}\r\n\r\n```\r\n<details open><summary>Html web page<\/summary>\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Popup Chat Room<\/title>\r\n    <style>\r\n\/* The Modal (background) *\/\r\n.modal {\r\n  display: none; \/* Hidden by default *\/\r\n  position: fixed; \/* Stay in place *\/\r\n  z-index: 1; \/* Sit on top *\/\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%; \/* Full width *\/\r\n  height: 100%; \/* Full height *\/\r\n  overflow: auto; \/* Enable scroll if needed *\/\r\n  background-color: rgb(0,0,0); \/* Fallback color *\/\r\n  background-color: rgba(0,0,0,0.4); \/* Black w\/ opacity *\/\r\n}\r\n\r\n\/* Modal Content\/Box *\/\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  margin: 15% auto; \/* 15% from the top and centered *\/\r\n  padding: 20px;\r\n  border: 1px solid #888;\r\n  width: 80%; \/* Could be more or less, depending on screen size *\/\r\n}\r\n\r\n\/* The Close Button *\/\r\n.close {\r\n  color: #aaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n\r\n.close:hover,\r\n.close:focus {\r\n  color: black;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n    <\/style>\r\n<\/head>\r\n<body>\r\n<!-- Trigger\/Open The Modal -->\r\n<button id=\"myBtn\">Open Modal<\/button>\r\n\r\n<!-- The Modal -->\r\n<div id=\"myModal\" class=\"modal\">\r\n\r\n  <!-- Modal content -->\r\n  <div class=\"modal-content\">\r\n    <span class=\"close\">&times;<\/span>\r\n      <iframe id=\"ifm\" src=\"http:\/\/localhost:9000\/index.html\" height=\"100%\" width=\"100%\" ><\/iframe>\r\n  <\/div>\r\n\r\n<\/div>\r\n\r\n<script>\r\n\/\/ Get the modal\r\nvar modal = document.getElementById(\"myModal\");\r\n\r\n\/\/ Get the button that opens the modal\r\nvar btn = document.getElementById(\"myBtn\");\r\n\r\n\/\/ Get the <span> element that closes the modal\r\nvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n\/\/ When the user clicks on the button, open the modal\r\nbtn.onclick = function() {\r\n  modal.style.display = \"block\";\r\n}\r\n\r\n\/\/ When the user clicks on <span> (x), close the modal\r\nspan.onclick = function() {\r\n  modal.style.display = \"none\";\r\n}\r\n\r\n\/\/ When the user clicks anywhere outside of the modal, close it\r\nwindow.onclick = function(event) {\r\n  if (event.target == modal) {\r\n    modal.style.display = \"none\";\r\n  }\r\n}\r\n<\/script>\r\n<\/body>\r\n<\/html>\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["@kaonick \r\nCan you provide a short video of the behavior when you say textfield cannot display and operate properly by listing down the actual behavior ?\r\nAlso please provide your `flutter doctor -v` to know on which flutter version this behavior is occuring.\r\n","```\r\nPS D:\\00WS\\FLUTTER\\qabot> flutter doctor -v                              \r\n[\u221a] Flutter (Channel stable, 3.16.2, on Microsoft Windows [\u7248\u672c 10.0.22631.3155], locale zh-TW)\r\n    \u2022 Flutter version 3.16.2 on channel stable at D:\\dev_env\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9e1c857886 (4 months ago), 2023-11-30 11:51:18 -0600\r\n    \u2022 Engine revision cf7a9d0800\r\n    \u2022 Dart version 3.2.2\r\n    \u2022 DevTools version 2.28.3\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[X] Android toolchain - develop for Android devices\r\n    X Unable to locate Android SDK.\r\n      Install Android Studio from: https:\/\/developer.android.com\/studio\/index.html\r\n      On first launch it will assist you in installing the Android SDK components.\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n      If the Android SDK has been installed to a custom location, please use\r\n      `flutter config --android-sdk` to update to that location.\r\n\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Build Tools 2019 16.11.33)\r\n    \u2022 Visual Studio at C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\r\n    \u2022 Visual Studio Build Tools 2019 version 16.11.34407.143\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.2)\r\n    \u2022 IntelliJ at C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2023.2.5\r\n    \u2022 Flutter plugin version 76.3.4\r\n    \u2022 Dart plugin version 232.10248\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\n000000930\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension can be installed from:\r\n       https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22631.3155]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 120.0.2210.91\r\n\r\n[!] Network resources\r\n    X A network error occurred while checking \"https:\/\/pub.dev\/\": Failed host lookup: 'pub.dev'\r\n    X A network error occurred while checking \"https:\/\/storage.googleapis.com\/\": Failed host lookup: 'storage.googleapis.com'\r\n    X A network error occurred while checking \"https:\/\/maven.google.com\/\": Failed host lookup: 'maven.google.com'\r\n    X A network error occurred while checking \"https:\/\/cocoapods.org\/\": Failed host lookup: 'cocoapods.org'\r\n    X A network error occurred while checking \"https:\/\/github.com\/\": Failed host lookup: 'github.com'\r\n\r\n! Doctor found issues in 3 categories.\r\n\r\n```","demo video:\r\n\r\nfirst:http:\/\/localhost:9401\/index.html ,open flutter web page directly that is normal(textfield can edit\r\nsenond:http:\/\/localhost:9401\/test.html,open html page(flutter web page embeded in this),then click button to open modal\uff0cyou can try to edit in the textfield ,then you will find out that can not edit. \r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/8186823\/70c3c9ef-faaf-4bed-8f70-d3a4dfdd66ed\r\n\r\n"],"labels":["in triage"]},{"title":"Deprecate `ButtonBar`, `ButtonBarThemeData`, and `ThemeData.buttonBarTheme`","body":"fixes [Deprecate `ButtonBar`](https:\/\/github.com\/flutter\/flutter\/issues\/127955)\r\n\r\n### Code sample\r\n\r\n<details>\r\n<summary>expand to view the code sample<\/summary> \r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() => runApp(const MyApp());\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      theme: ThemeData(\r\n        buttonBarTheme: const ButtonBarThemeData(\r\n          alignment: MainAxisAlignment.spaceEvenly,\r\n        ),\r\n      ),\r\n      home: Scaffold(\r\n        body: ButtonBar(\r\n          alignment: MainAxisAlignment.spaceEvenly,\r\n          children: <Widget>[\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 1'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 2'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 3'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n## Data driven fix\r\n\r\n### Before executing `dart fix --apply`\r\n```dart\r\n  return MaterialApp(\r\n      theme: ThemeData(\r\n        buttonBarTheme: const ButtonBarThemeData(\r\n          alignment: MainAxisAlignment.spaceEvenly,\r\n        ),\r\n      ),\r\n      home: Scaffold(\r\n        body: ButtonBar(\r\n          alignment: MainAxisAlignment.spaceEvenly,\r\n          children: <Widget>[\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 1'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 2'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 3'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n```\r\n\r\n### After executing `dart fix --apply`\r\n```dart\r\n    return MaterialApp(\r\n      theme: ThemeData(\r\n\r\n      ),\r\n      home: Scaffold(\r\n        body: OverflowBar(\r\n          alignment: MainAxisAlignment.spaceEvenly,\r\n          children: <Widget>[\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 1'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 2'),\r\n            ),\r\n            TextButton(\r\n              onPressed: () {},\r\n              child: const Text('Button 3'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n```\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: material design","c: tech-debt"]},{"title":"Backing stores for multi-view partial repaint ","body":"### Document Link\r\n\r\n[https:\/\/flutter.dev\/go\/backing-stores-for-multi-view-partial-repaint](https:\/\/docs.google.com\/document\/d\/1CPpA86BTF6JTvztmRWCeLGQoPEqX_msYMG6avdqhaFk\/edit?usp=sharing)\r\n\r\n### What problem are you solving?\r\n\r\nMulti-view allows Flutter to display in multiple Flutter views or windows. Partial repaint allows Flutter to refresh only dirty parts of the content for a frame in order to reduce energy consumption. This article discusses a design that allows supporting partial repaint in a multi-view macOS app.","comments":[],"labels":["engine","a: multi window","design doc","team-engine",":scroll:"]},{"title":"Showing error packages not found, even though they are added and working perfectly fine","body":"### Steps to reproduce\n\n1. I was developing UI on my Flutter project, which worked perfectly fine. I closed my IDE (VS Code), and the next morning I opened my project it showed me Target URI doesn't exists (for dependencies only).\r\n2. I ran flutter clean, flutter pub get, but it showed me the dependencies I haven't even used.\r\n3. I tried gradlew clean, but it didn't help either\r\n4. Actually my app is working perfectly fine, it is using the features provided by those packages as well (for example GetX routes), but still it is showing errors in the IDE (in both VS Code and Android Studio)\n\n### Expected results\n\nI want these false error indications to be removed.\n\n### Actual results\n\nIt shows these errors, I am attaching the screenshot below\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n<img width=\"1552\" alt=\"Screenshot 2024-03-21 at 11 04 27 AM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/75375280\/14a311a6-f785-4f38-9c88-38b837936aa9\">\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 11.7.10 20G1427 darwin-x64, locale\r\n    en-GB)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.5.1)\r\n    \u2717 Flutter requires Xcode 14 or higher.\r\n      Download the latest version or update via the Mac App Store.\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.2)\r\n[\u2713] VS Code (version 1.87.2)\r\n[\u2713] Connected device (3 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @iamzaidsoomro, this seems like it might be a cache issue. Can you try clearing your IDE caches and maybe your flutter pub cache to see if you still experience this issue? ","Hey, thanks for considering my issue. I am trying to run flutter pub get from the external terminal, still, it is still not getting the dependencies. I have tried in Android Studio, VS Code, cleared VS Code Cache, and cleaned the Flutter cache, but the same issue persists. What to do?\r\n\r\nI have downloaded and setup the fresh copy of flutter as well. "],"labels":["in triage"]},{"title":"GoRouter extra is NULL when pressing browser's back button","body":"### What package does this bug report belong to?\n\ngo_router\n\n### What target platforms are you seeing this bug on?\n\nWeb\n\n### Have you already upgraded your packages?\n\nYes\n\n### Dependency versions\n\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```lock\r\n# Generated by pub\r\n# See https:\/\/dart.dev\/tools\/pub\/glossary#lockfile\r\npackages:\r\n  async:\r\n    dependency: transitive\r\n    description:\r\n      name: async\r\n      sha256: \"947bfcf187f74dbc5e146c9eb9c0f10c9f8b30743e341481c1e2ed3ecc18c20c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.11.0\"\r\n  boolean_selector:\r\n    dependency: transitive\r\n    description:\r\n      name: boolean_selector\r\n      sha256: \"6cfb5af12253eaf2b368f07bacc5a80d1301a071c73360d746b7f2e32d762c66\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.1\"\r\n  characters:\r\n    dependency: transitive\r\n    description:\r\n      name: characters\r\n      sha256: \"04a925763edad70e8443c99234dc3328f442e811f1d8fd1a72f1c8ad0f69a605\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.0\"\r\n  clock:\r\n    dependency: transitive\r\n    description:\r\n      name: clock\r\n      sha256: cb6d7f03e1de671e34607e909a7213e31d7752be4fb66a86d29fe1eb14bfb5cf\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.1\"\r\n  collection:\r\n    dependency: transitive\r\n    description:\r\n      name: collection\r\n      sha256: ee67cb0715911d28db6bf4af1026078bd6f0128b07a5f66fb2ed94ec6783c09a\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.18.0\"\r\n  fake_async:\r\n    dependency: transitive\r\n    description:\r\n      name: fake_async\r\n      sha256: \"511392330127add0b769b75a987850d136345d9227c6b94c96a04cf4a391bf78\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.1\"\r\n  flutter:\r\n    dependency: \"direct main\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_lints:\r\n    dependency: \"direct dev\"\r\n    description:\r\n      name: flutter_lints\r\n      sha256: e2a421b7e59244faef694ba7b30562e489c2b489866e505074eb005cd7060db7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.1\"\r\n  flutter_test:\r\n    dependency: \"direct dev\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_web_plugins:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  go_router:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: go_router\r\n      sha256: \"7ecb2f391edbca5473db591b48555a8912dde60edd0fb3013bd6743033b2d3f8\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"13.2.1\"\r\n  leak_tracker:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker\r\n      sha256: \"78eb209deea09858f5269f5a5b02be4049535f568c07b275096836f01ea323fa\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"10.0.0\"\r\n  leak_tracker_flutter_testing:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker_flutter_testing\r\n      sha256: b46c5e37c19120a8a01918cfaf293547f47269f7cb4b0058f21531c2465d6ef0\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.1\"\r\n  leak_tracker_testing:\r\n    dependency: transitive\r\n    description:\r\n      name: leak_tracker_testing\r\n      sha256: a597f72a664dbd293f3bfc51f9ba69816f84dcd403cdac7066cb3f6003f3ab47\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.0.1\"\r\n  lints:\r\n    dependency: transitive\r\n    description:\r\n      name: lints\r\n      sha256: cbf8d4b858bb0134ef3ef87841abdf8d63bfc255c266b7bf6b39daa1085c4290\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.0.0\"\r\n  logging:\r\n    dependency: transitive\r\n    description:\r\n      name: logging\r\n      sha256: \"623a88c9594aa774443aa3eb2d41807a48486b5613e67599fb4c41c0ad47c340\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  matcher:\r\n    dependency: transitive\r\n    description:\r\n      name: matcher\r\n      sha256: d2323aa2060500f906aa31a895b4030b6da3ebdcc5619d14ce1aada65cd161cb\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.12.16+1\"\r\n  material_color_utilities:\r\n    dependency: transitive\r\n    description:\r\n      name: material_color_utilities\r\n      sha256: \"0e0a020085b65b6083975e499759762399b4475f766c21668c4ecca34ea74e5a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.8.0\"\r\n  meta:\r\n    dependency: transitive\r\n    description:\r\n      name: meta\r\n      sha256: d584fa6707a52763a52446f02cc621b077888fb63b93bbcb1143a7be5a0c0c04\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.11.0\"\r\n  path:\r\n    dependency: transitive\r\n    description:\r\n      name: path\r\n      sha256: \"087ce49c3f0dc39180befefc60fdb4acd8f8620e5682fe2476afd0b3688bb4af\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.9.0\"\r\n  sky_engine:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.99\"\r\n  source_span:\r\n    dependency: transitive\r\n    description:\r\n      name: source_span\r\n      sha256: \"53e943d4206a5e30df338fd4c6e7a077e02254531b138a15aec3bd143c1a8b3c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.10.0\"\r\n  stack_trace:\r\n    dependency: transitive\r\n    description:\r\n      name: stack_trace\r\n      sha256: \"73713990125a6d93122541237550ee3352a2d84baad52d375a4cad2eb9b7ce0b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.11.1\"\r\n  stream_channel:\r\n    dependency: transitive\r\n    description:\r\n      name: stream_channel\r\n      sha256: ba2aa5d8cc609d96bbb2899c28934f9e1af5cddbd60a827822ea467161eb54e7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  string_scanner:\r\n    dependency: transitive\r\n    description:\r\n      name: string_scanner\r\n      sha256: \"556692adab6cfa87322a115640c11f13cb77b3f076ddcc5d6ae3c20242bedcde\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  term_glyph:\r\n    dependency: transitive\r\n    description:\r\n      name: term_glyph\r\n      sha256: a29248a84fbb7c79282b40b8c72a1209db169a2e0542bce341da992fe1bc7e84\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.1\"\r\n  test_api:\r\n    dependency: transitive\r\n    description:\r\n      name: test_api\r\n      sha256: \"5c2f730018264d276c20e4f1503fd1308dfbbae39ec8ee63c5236311ac06954b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.6.1\"\r\n  vector_math:\r\n    dependency: transitive\r\n    description:\r\n      name: vector_math\r\n      sha256: \"80b3257d1492ce4d091729e3a67a60407d227c27241d6927be0130c98e741803\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.4\"\r\n  vm_service:\r\n    dependency: transitive\r\n    description:\r\n      name: vm_service\r\n      sha256: b3d56ff4341b8f182b96aceb2fa20e3dcb336b9f867bc0eafc0de10f1048e957\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"13.0.0\"\r\nsdks:\r\n  dart: \">=3.3.0 <4.0.0\"\r\n  flutter: \">=3.16.0\"\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Steps to reproduce\n\nUsing the sample code below:\r\n1. Press `Hello World!` to navigate to `SettingsPage`.\r\n2. In `SettingsPage`, press `Hello from Home`. This will push another `SettingsPage`.\r\n3. In the 2nd `SettingsPage`, press browser's back button.\n\n### Expected results\n\nAfter pressing browser's back button, 1st `SettingsPage`'s extra should not be NULL.\n\n### Actual results\n\nAfter pressing browser's back button, 1st `SettingsPage`'s extra is NULL.\r\n\r\nHowever, if I set the extra to string, e.g. `extra: 'from Home',`, it's not cleared. Wondering why class extra is being cleared.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  GoRouter.optionURLReflectsImperativeAPIs = true;\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp.router(\r\n      routerConfig: GoRouter(\r\n        initialLocation: '\/',\r\n        routes: <RouteBase>[\r\n          GoRoute(\r\n            path: '\/',\r\n            builder: (_, __) => const HomePage(),\r\n          ),\r\n          GoRoute(\r\n            path: '\/settings',\r\n            builder: (_, state) {\r\n              print('>>>>> settings extra = ${state.extra}');\r\n\r\n              return SettingsPage(\r\n                extra: switch (state.extra) {\r\n                  SettingsPageParams(message: final message) => message,\r\n                  _ => state.extra?.toString(),\r\n                },\r\n              );\r\n            },\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n\/\/--------------------------------------------------------------------------------------------------\r\nclass HomePage extends StatelessWidget {\r\n  const HomePage({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: TextButton(\r\n          onPressed: () => context.push(\r\n            '\/settings',\r\n            extra: const SettingsPageParams('from Home'),\r\n          ),\r\n          child: const Text('Hello World!'),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n\/\/--------------------------------------------------------------------------------------------------\r\nclass SettingsPage extends StatelessWidget {\r\n  const SettingsPage({\r\n    this.extra,\r\n    super.key,\r\n  });\r\n\r\n  final String? extra;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(),\r\n      body: Center(\r\n        child: TextButton(\r\n          onPressed: () => context.push(\r\n            '\/settings',\r\n            extra: const SettingsPageParams('from Settings'),\r\n          ),\r\n          child: Text('Hello $extra'),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n\/\/--------------------------------------------------------------------------------------------------\r\nclass SettingsPageParams {\r\n  const SettingsPageParams(this.message);\r\n\r\n  final String message;\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Videos\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nClass as extra.\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/148017560\/2861ba03-2822-4faf-97f6-2d08286deb4a\r\n\r\nString as extra.\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/148017560\/7535ebaf-1a19-4c80-a41d-a148709c67c2\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en-PH)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/rickimaru\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/rickimaru\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.13.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 CHROME_EXECUTABLE = \/Applications\/Brave Browser.app\/Contents\/MacOS\/Brave Browser\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Brave Browser 123.1.64.109\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I see the same behavior as reported, although only using browser's back button. With app's back button, it doesn't return null.\r\n\r\nSame question \/ issue raised in SO: https:\/\/stackoverflow.com\/questions\/74971201\/go-router-using-browser-back-button-extra-is-null-flutter-web\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n"],"labels":["platform-web","package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"Crash when using Impeller Render Engine","body":"### Steps to reproduce\n\nMy Repo: https:\/\/github.com\/twtstudio\/WePeiYang-Flutter\/tree\/flutter3.19\r\n\r\nI just upgrade to the new Flutter 3.19, and trying to use the new impeller engine, but the app crash just when it open.\r\n\r\nThe app just crash on the native android splash screen, and it seems the flutter didn't work at all\n\n### Expected results\n\nApp runs fine...\n\n### Actual results\n\n\r\nThe app just crash on the native android splash screen, and it seems the flutter didn't work at all\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\nMy Repo: https:\/\/github.com\/twtstudio\/WePeiYang-Flutter\/tree\/flutter3.19\r\n\r\nNo Idea where went wrong, without --enable-impeller parameters the app works fine.\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/25414059\/d98057bc-10dc-46a5-b9f6-32c2961acc8e)\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/25414059\/f74ec8e7-a26e-45e1-a697-a3ffe7e48285)\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[        ] executing: \/opt\/android-sdk\/platform-tools\/adb -s emulator-5554 install -t -r \/home\/steven\/project\/WePeiYang-Flutter\/build\/app\/outputs\/flutter-apk\/app-debug.apk\r\n[ +811 ms] Performing Streamed Install\r\n                    Success\r\n[        ] Installing build\/app\/outputs\/flutter-apk\/app-debug.apk... (completed in 811ms)\r\n[        ] executing: \/opt\/android-sdk\/platform-tools\/adb -s emulator-5554 shell echo -n 032f6e15e647ac3f2a8e4b97c0a816c79ebab8e2 > \/data\/local\/tmp\/sky.com.twt.service.develop.sha1\r\n[  +11 ms] executing: \/opt\/android-sdk\/platform-tools\/adb -s emulator-5554 shell -x logcat -v time -t 1\r\n[  +53 ms] --------- beginning of system\r\n           03-21 09:41:00.967 D\/CompatibilityChangeReporter(  553): Compat change id reported: 143937733; UID 10131; state: ENABLED\r\n[   +4 ms] executing: \/opt\/android-sdk\/platform-tools\/adb -s emulator-5554 shell am start -a android.intent.action.MAIN -c android.intent.category.LAUNCHER -f 0x20000000 --ez\r\nenable-dart-profiling true --ez enable-impeller true --ez enable-checked-mode true --ez verify-entry-points true com.twt.service.develop\/com.twt.service.MainActivity\r\n[  +56 ms] Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x20000000 cmp=com.twt.service.develop\/com.twt.service.MainActivity (has\r\nextras) }\r\n[        ] Waiting for VM Service port to be available...\r\n[ +822 ms] VM Service URL on device: http:\/\/127.0.0.1:42187\/hzf-lZPNks0=\/\r\n[        ] executing: \/opt\/android-sdk\/platform-tools\/adb -s emulator-5554 forward tcp:0 tcp:42187\r\n[   +4 ms] 34307\r\n[        ] Forwarded host port 34307 to device port 42187 for VM Service\r\n[   +3 ms] Caching compiled dill\r\n[  +68 ms] Connecting to service protocol: http:\/\/127.0.0.1:34307\/hzf-lZPNks0=\/\r\n[ +202 ms] Launching a Dart Developer Service (DDS) instance at http:\/\/127.0.0.1:0, connecting to VM service at http:\/\/127.0.0.1:34307\/hzf-lZPNks0=\/.\r\n[  +79 ms] E\/flutter ( 6874): [ERROR:flutter\/shell\/platform\/android\/android_context_vulkan_impeller.cc(52)] Using the Impeller rendering backend (Vulkan).\r\n[  +93 ms] DDS is listening at http:\/\/127.0.0.1:39513\/Biz10VXEpxs=\/.\r\n[  +50 ms] Successfully connected to service protocol: http:\/\/127.0.0.1:34307\/hzf-lZPNks0=\/\r\n[ +345 ms] DevFS: Creating new filesystem on the device (null)\r\n[   +1 ms] D\/WpkPaConfig( 6874): random not check in!\r\n[        ] I\/Matrix.AnrTracer( 6874): anrTrace, final mAnrBeatTime:400, mAnrBeatRate:400\r\n[        ] W\/efs.send_log( 6874): tryFileLock start! \r\n[        ] W\/efs.send_log( 6874): tryFileLock sendlock sucess! processname: com.twt.service.develop\r\n[   +3 ms] I\/efs.config( 6874): delete old config is false\r\n[   +2 ms] I\/efs.config( 6874): current config version (-1) is older than another (1710829522)\r\n[        ] I\/efs.config( 6874): load config from storage and notify observer\r\n[   +4 ms] DevFS: Created new filesystem on the device (file:\/\/\/data\/user\/0\/com.twt.service.develop\/code_cache\/WePeiYang-FlutterCOZZQU\/WePeiYang-Flutter\/)\r\n[   +1 ms] Updating assets\r\n[ +112 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.\r\n[   +2 ms] Syncing files to device sdk gphone64 x86 64...\r\n[   +1 ms] Compiling dart to kernel with 0 updated files\r\n[        ] Processing bundle.\r\n[   +1 ms] <- recompile package:we_pei_yang_flutter\/main.dart 041f6a91-d6be-4fad-ae3b-5d72d831e894\r\n[        ] <- 041f6a91-d6be-4fad-ae3b-5d72d831e894\r\n[   +1 ms] Bundle processing done.\r\n[   +1 ms] D\/LaunchConfigManager( 6874): random not check in!\r\n[        ] I\/UMCrash ( 6874): inner config : net rate is 0\r\n[        ] I\/UMCrash ( 6874): inner config : net close.\r\n[        ] I\/UMCrash ( 6874): inner config : nativeH5Rate is 0\r\n[        ] I\/UMCrash ( 6874): inner config : h5 close.\r\n[        ] I\/LaunchTrace( 6874): begin sendLaunchCache\r\n[   +1 ms] I\/UMLog   ( 6874): APM SDK\u521d\u59cb\u5316\u6210\u529f\r\n[        ] W\/SQLiteLog( 6874): (28) double-quoted string literal: \"1\"\r\n[        ] D\/WBY_UMENG_STATISTICS( 6874): \u53cb\u76dfsdk\u521d\u59cb\u5316\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/Application;->mLoadedApk:Landroid\/app\/LoadedApk; (unsupported, reflection, allowed)\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/LoadedApk;->mActivityThread:Landroid\/app\/ActivityThread; (unsupported, reflection, allowed)\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/ActivityThread;->mActivities:Landroid\/util\/ArrayMap; (unsupported, reflection, allowed)\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/ActivityThread$ActivityClientRecord;->activity:Landroid\/app\/Activity; (unsupported, reflection, allowed)\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/ActivityThread$ActivityClientRecord;->paused:Z (unsupported, reflection, allowed)\r\n[        ] W\/service.develop( 6874): Accessing hidden field Landroid\/app\/ActivityThread$ActivityClientRecord;->stopped:Z (unsupported, reflection, allowed)\r\n[        ] I\/crashsdk( 6874): Unexp log not enabled, skip update unexp info!\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_memperf_sampling_rate ## value is 0\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_memperf_collect_interval ## value is 5\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_memperf_collect_max_period_sec ## value is 600\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_startperf_sampling_rate ## value is 5\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_patrace_switch_rate ## value is 5\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_net_state ## value is 0\r\n[        ] I\/efs.config( 6874): --->>> configCallback key is apm_native_h5_state ## value is 0\r\n[        ] I\/efs.config( 6874): callback netRate is 0\r\n[        ] I\/efs.config( 6874): callback nativeH5Rate is 0\r\n[        ] W\/efs.info.manager( 6874): network change: 3g\r\n[        ] W\/System.err( 6874): java.lang.UnsatisfiedLinkError: dlopen failed: library \"libumeng-spy.so\" not found\r\n[        ] W\/System.err( 6874):         at java.lang.Runtime.loadLibrary0(Runtime.java:1082)\r\n[        ] W\/System.err( 6874):         at java.lang.Runtime.loadLibrary0(Runtime.java:1003)\r\n[        ] W\/System.err( 6874):         at java.lang.System.loadLibrary(System.java:1661)\r\n[        ] W\/System.err( 6874):         at com.umeng.umzid.Spy.<clinit>(Unknown Source:3)\r\n[        ] W\/System.err( 6874):         at com.umeng.umzid.ZIDManager$b.run(:3)\r\n[        ] W\/System.err( 6874):         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:487)\r\n[        ] W\/System.err( 6874):         at java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n[        ] W\/System.err( 6874):         at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:307)\r\n[        ] W\/System.err( 6874):         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n[        ] W\/System.err( 6874):         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644)\r\n[        ] W\/System.err( 6874):         at java.lang.Thread.run(Thread.java:1012)\r\n[        ] W\/service.develop( 6874): Accessing hidden method Landroid\/os\/Build;->getString(Ljava\/lang\/String;)Ljava\/lang\/String; (unsupported, reflection, allowed)\r\n[        ] D\/WBY_PUSH( 6874): [GT-PUSH] [ServiceManager] ServiceManager start from initialize...\r\n[        ] D\/WBY_PUSH( 6874): [GT-PUSH] PushCore started\r\n[        ] I\/UMLog   ( 6874): \u57fa\u7840\u7ec4\u4ef6\u5e93\u5b8c\u6574\u6027\u81ea\u68c0\u901a\u8fc7\u3002\r\n[        ] I\/UMLog   ( 6874): \u7edf\u8ba1SDK\u7248\u672c\u53f7: 9.4.7\r\n[        ] I\/UMLog   ( 6874): ZID SDK\u7248\u672c\u53f7: 1.5.0\r\n[        ] I\/UMLog   ( 6874): \u63a8\u9001SDK\u7248\u672c\u53f7: 6.5.5\r\n[        ] I\/UMLog   ( 6874): APM SDK\u7248\u672c\u53f7: 1.6.2\r\n[        ] I\/UMLog   ( 6874): UABTEST SDK\u7248\u672c\u53f7: 1.0.0\r\n[        ] I\/MobclickAgent( 6874): module init:apzioct\r\n[        ] I\/flutter ( 6874): 09:41:02 | \u6dfb\u52a0\u5bf9\u8c61 Ref{refId: com.twt.service.WBYApplication:188076645, runtimeType: Ref, tag__: null} \u5230\u5168\u5c40\u91ca\u653e\u6c60\r\n[        ] I\/flutter ( 6874): 09:41:02 | fluttify-dart: com.amap.api.location.AMapLocationClient::updatePrivacyAgree(['var1':true])\r\n[        ] D\/fluttify-java( 6874): fluttify-java: com.amap.api.location.AMapLocationClient::updatePrivacyAgree(com.twt.service.WBYApplication@b35d265true)\r\n[        ] E\/service.develop( 6874): Invalid resource ID 0x00000000.\r\n[        ] I\/flutter ( 6874): 09:41:02 | \u6dfb\u52a0\u5bf9\u8c61 Ref{refId: com.twt.service.WBYApplication:188076645, runtimeType: Ref, tag__: null} \u5230\u5168\u5c40\u91ca\u653e\u6c60\r\n[        ] I\/flutter ( 6874): 09:41:02 | fluttify-dart: com.amap.api.location.AMapLocationClient::updatePrivacyShow(['var1':true, 'var2':true])\r\n[        ] D\/fluttify-java( 6874): fluttify-java: com.amap.api.location.AMapLocationClient::updatePrivacyShow(com.twt.service.WBYApplication@b35d265truetrue)\r\n[        ] I\/flutter ( 6874): 09:41:02 | \u6dfb\u52a0\u5bf9\u8c61 Ref{refId: com.twt.service.WBYApplication:188076645, runtimeType: Ref, tag__: null} \u5230\u5168\u5c40\u91ca\u653e\u6c60\r\n[        ] D\/com.twt.service.push.WBYIntentService( 6874): call -> onCreate -------\r\n[        ] D\/com.twt.service.push.WBYIntentService( 6874): call -> onStartCommand -------\r\n[        ] D\/WBY_PUSH( 6874): [GT-PUSH] onBind com.twt.service.push.WBYIntentService@80d9ce2\r\n[        ] D\/ObjectFactory( 6874): \u521b\u5efa\u5bf9\u8c61: com_amap_api_location_AMapLocationClient__android_content_Context\r\n[        ] I\/flutter ( 6874): 09:41:02 | \u6dfb\u52a0\u5bf9\u8c61 Ref{refId: com.amap.api.location.AMapLocationClient:108423240, runtimeType: Ref, tag__: amap_location_fluttify} \u5230\u5168\u5c40\u91ca\u653e\u6c60\r\n[        ] D\/com.twt.service.push.WBYIntentService( 6874): onHandleIntent() action = 10008\r\n[        ] D\/WBY_PUSH( 6874): [GT-PUSH] onHandleIntent() = get sdk service pid \r\n[        ] D\/TrafficStats( 6874): tagSocket(198) with statsTag=0xffffffff, statsUid=-1\r\n[  +15 ms] D\/WBY_PUSH( 6874): [GT-PUSH] GOOGLE PushManager = null\r\n[  +41 ms] Updating files.\r\n[        ] DevFS: Sync finished\r\n[        ] Syncing files to device sdk gphone64 x86 64... (completed in 65ms)\r\n[        ] Synced 0.0MB.\r\n[        ] <- accept\r\n[   +4 ms] D\/CompatibilityChangeReporter( 6874): Compat change id reported: 247079863; UID 10191; state: DISABLED\r\n[  +12 ms] Connected to _flutterView\/0x79f039e1a300.\r\n[        ] Flutter run key commands.\r\n[        ] r Hot reload. \ud83d\udd25\ud83d\udd25\ud83d\udd25\r\n[        ] R Hot restart.\r\n[        ] h List all available interactive commands.\r\n[        ] d Detach (terminate \"flutter run\" but leave application running).\r\n[        ] c Clear the screen\r\n[        ] q Quit (terminate the application on the device).\r\n[        ] A Dart VM Service on sdk gphone64 x86 64 is available at: http:\/\/127.0.0.1:39513\/Biz10VXEpxs=\/\r\n[  +18 ms] D\/TrafficStats( 6874): tagSocket(195) with statsTag=0xffffffff, statsUid=-1\r\n[ +136 ms] E\/service.develop( 6874): Attempt to load writable dex file: \/data\/user\/0\/com.twt.service.develop\/files\/libs\/tdata_QlL106.jar\r\n[        ] D\/CompatibilityChangeReporter( 6874): Compat change id reported: 218865702; UID 10191; state: DISABLED\r\n[        ] W\/ziparchive( 6874): Unable to open '\/data\/user\/0\/com.twt.service.develop\/files\/libs\/tdata_QlL106.dm': No such file or directory\r\n[  +47 ms] E\/service.develop( 6874): Attempt to load writable dex file: \/data\/user\/0\/com.twt.service.develop\/files\/libs\/tdata_FOa572.jar\r\n[        ] W\/Settings( 6874): Setting auto_time has moved from android.provider.Settings.System to android.provider.Settings.Global, returning read-only value.\r\n[        ] W\/ziparchive( 6874): Unable to open '\/data\/user\/0\/com.twt.service.develop\/files\/libs\/tdata_FOa572.dm': No such file or directory\r\n[  +13 ms] W\/Settings( 6874): Setting adb_enabled has moved from android.provider.Settings.Secure to android.provider.Settings.Global.\r\n[   +2 ms] W\/Settings( 6874): Setting auto_time has moved from android.provider.Settings.System to android.provider.Settings.Global, returning read-only value.\r\n[  +76 ms] W\/Settings( 6874): Setting auto_time has moved from android.provider.Settings.System to android.provider.Settings.Global, returning read-only value.\r\n[ +143 ms] D\/TrafficStats( 6874): tagSocket(217) with statsTag=0xffffffff, statsUid=-1\r\n[   +6 ms] I\/UMConfigure( 6874): common version is 9.4.7\r\n[        ] I\/UMConfigure( 6874): common type is 0\r\n[        ] E\/UMConfigure( 6874): has inited !!!\r\n[        ] D\/WBY_UMENG_STATISTICS( 6874): \u53cb\u76dfsdk\u521d\u59cb\u5316\r\n[   +2 ms] D\/TrafficStats( 6874): tagSocket(222) with statsTag=0xffffffff, statsUid=-1\r\n[   +5 ms] D\/WBY_LOCAL_SETTING( 6874): flag already set unsecure\r\n[  +16 ms] W\/System  ( 6874): A resource failed to call AbstractCursor.close. \r\n[  +27 ms] The Flutter DevTools debugger and profiler on sdk gphone64 x86 64 is available at: http:\/\/127.0.0.1:9100?uri=http:\/\/127.0.0.1:39513\/Biz10VXEpxs=\/\r\n```\r\nand then, it stucked....\r\ni tried on the real machine and the app streightly crashed.\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console[\u2713] Flutter (Channel stable, 3.19.2, on Arch Linux 6.8.0-rc7-1-git-00260-gfa4b851b4ad6, locale en_US.UTF-8)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/home\/steven\/fvm\/versions\/3.19.2\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (3 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/opt\/android-sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/opt\/android-sdk\r\n    \u2022 ANDROID_SDK_ROOT = \/opt\/android-sdk\r\n    \u2022 Java binary at: \/opt\/android-studio\/jbr\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at google-chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 clang version 17.0.6\r\n    \u2022 cmake version 3.29.20240212-g55d1de4-dirty\r\n    \u2022 ninja version 1.11.1\r\n    \u2022 pkg-config version 2.1.1\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/opt\/android-studio\r\n    \u2022 Flutter plugin version 78.2.2\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3)\r\n    \u2022 IntelliJ at \/opt\/intellij-idea-ultimate-edition\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 sdk gphone64 x86 64 (mobile) \u2022 emulator-5554 \u2022 android-x64 \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 Linux (desktop)              \u2022 linux         \u2022 linux-x64   \u2022 Arch Linux 6.8.0-rc7-1-git-00260-gfa4b851b4ad6\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>","comments":["Hi @steven12138 \r\nYour sample code is a complex project that is hard to debug. The output log above also doesn't contain the Flutter crash trace. \r\n\r\nI would recommend you narrow down the issue by removing the usage of 3rd party plugins\/packages one by one, unrelated\/unaffected pages, and isolating the affected page into a **minimal sample code** that can produce the crash. And please share it here when you have such an example. Thanks!","thanks, I'll try it","> Hi @steven12138 Your sample code is a complex project that is hard to debug. The output log above also doesn't contain the Flutter crash trace.\r\n> \r\n> I would recommend you narrow down the issue by removing the usage of 3rd party plugins\/packages one by one, unrelated\/unaffected pages, and isolating the affected page into a **minimal sample code** that can produce the crash. And please share it here when you have such an example. Thanks!\r\n\r\nIt's strange that it didn't print any stack trace, and just crashed directly"],"labels":["waiting for customer response","in triage"]},{"title":"[flutter_tools] use dart test to run flutter driver files","body":"Unblocks: https:\/\/github.com\/flutter\/flutter\/issues\/145499","comments":["It looks like this pull request may not have tests. Please make sure to add tests before merging. If you need [an exemption](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests) to this rule, contact \"@test-exemption-reviewer\" in the #hackers channel in [Chat](https:\/\/github.com\/flutter\/flutter\/wiki\/Chat) (don't just cc them here, they won't see it! Use Discord!).\n\nIf you are not sure if you need tests, consider this rule of thumb: the purpose of a test is to make sure someone doesn't accidentally revert the fix. Ask yourself, **is there anything in your PR that you feel it is important we not accidentally revert back to how it was before your fix?**\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing."],"labels":["tool"]},{"title":"[google_maps_flutter] Android TalkBack crashes when useAndroidViewSurface is false","body":"### Steps to reproduce\n\n1. Enable Android TalkBack (Settings -> Accessibility -> TalkBack).\r\n2. Open a Flutter app using google_maps_flutter and a useAndroidViewSurface value of false (the current default).\r\n3. Interact with the map.\r\n4. Observe crashes of the TalkBack service, effectively ANR'ing the app itself.\n\n### Expected results\n\nTalkBack should not crash when used in an app using google_maps_flutter.\n\n### Actual results\n\nTalkBack crashes and causes the app to be unusable.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:google_maps_flutter\/google_maps_flutter.dart';\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:google_maps_flutter_android\/google_maps_flutter_android.dart';\r\nimport 'package:google_maps_flutter_platform_interface\/google_maps_flutter_platform_interface.dart';\r\n\r\nvoid main() async {\r\n  \/\/*****ENABLE this line to avoid TalkBack crashing\r\n  \/\/ _googleMapsFlutterSetup();\r\n  runApp(MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: GoogleMapPage(),\r\n    );\r\n  }\r\n}\r\n\r\nvoid _googleMapsFlutterSetup() {\r\n  final mapsImplementation = GoogleMapsFlutterPlatform.instance;\r\n  if (mapsImplementation is GoogleMapsFlutterAndroid) {\r\n    mapsImplementation.useAndroidViewSurface = true;\r\n  }\r\n}\r\n\r\nclass GoogleMapPage extends StatefulWidget {\r\n  GoogleMapPage({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  State<GoogleMapPage> createState() => _GoogleMapPageState();\r\n}\r\n\r\nclass _GoogleMapPageState extends State<GoogleMapPage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return GoogleMap(\r\n      initialCameraPosition:\r\n          const CameraPosition(target: LatLng(0.0, 0.0), zoom: 1),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n_No response_\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nE\/AndroidRuntime(11211): FATAL EXCEPTION: main\r\nE\/AndroidRuntime(11211): Process: com.google.android.marvin.talkback, PID: 11211\r\nE\/AndroidRuntime(11211): java.lang.StackOverflowError: stack size 8188KB\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityNodeInfo.init(AccessibilityNodeInfo.java:4157)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityNodeInfo.<init>(AccessibilityNodeInfo.java:944)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityCache.getNode(AccessibilityCache.java:344)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityInteractionClient.findAccessibilityNodeInfoByAccessibilityId(AccessibilityInteractionClient.java:541)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityNodeInfo.getNodeForAccessibilityId(AccessibilityNodeInfo.java:4625)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityNodeInfo.getNodeForAccessibilityId(AccessibilityNodeInfo.java:4614)\r\nE\/AndroidRuntime(11211): \tat android.view.accessibility.AccessibilityNodeInfo.getParent(AccessibilityNodeInfo.java:1903)\r\nE\/AndroidRuntime(11211): \tat androidx.core.view.accessibility.AccessibilityNodeInfoCompat.getParent(PG:1)\r\nE\/AndroidRuntime(11211): \tat com.google.android.accessibility.utils.ScrollableNodeInfo.findScrollableNodeForDirectionRecursive(PG:2)\r\nE\/AndroidRuntime(11211): \tat com.google.android.accessibility.utils.ScrollableNodeInfo.findScrollableNodeForDirectionRecursive(PG:2)\r\nE\/AndroidRuntime(11211): \tat com.google.android.accessibility.utils.ScrollableNodeInfo.findScrollableNodeForDirectionRecursive(PG:2)\r\nE\/AndroidRuntime(11211): \tat com.google.android.accessibility.utils.ScrollableNodeInfo.findScrollableNodeForDirectionRecursive(PG:2)\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel google3, on macOS 14.4 23E214 darwin-x64, locale en)\r\n    \u2022 Framework revision 03b5ea519a (2 days ago), 2024-03-18T00:00:00.000\r\n    \u2022 Engine revision aebc0021cd\r\n    \u2022 Dart version d5cf2d3849\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version Stable)\r\n    \u2022 Android SDK at google3\r\n    \u2022 Platform Stable, build-tools Stable\r\n    \u2022 Java binary at: \/Applications\/Android Studio with Blaze\r\n      Beta.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] GoogleMac (on macos)\r\n    \u2022 AppleWWDRCA installed.\r\n    \u2022 Google development certificate installed.\r\n    \u2022 Device 00008101-000539403403001E is whitelisted\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 Pixel 4 (mobile) \u2022 99211FFAZ0054E \u2022 android-arm64 \u2022 Android 13 (API 33)\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Google bug: b\/329766984.","Hi @ChristianEdwardPadilla, what version of `google_maps_flutter` & `google_maps_flutter_android` are you using? I just tested the code sample on a Pixel 7 and a Nokia 6 but I can't seem to reproduce the issue. I panned around and zoomed around for a few minutes. \r\n\r\nThere was a similar issue a while back but it appears to have been fixed. See https:\/\/github.com\/flutter\/flutter\/issues\/38063","I'm seeing this behavior on `google_maps_flutter` version 2.6.0 (also repros for me on 2.5.0 and presumably in between), and `google_maps_flutter_android` version 2.7.0 (similarly, down to 2.5.1).","Hi @ChristianEdwardPadilla, are you only seeing this on the Pixel 4 device or are you experiencing this on other devices as well? When you interact with the map, how long does it take before the ANR occurs?"],"labels":["waiting for customer response","customer: google","in triage"]},{"title":"[web] RFC - Add ability to ignore PointerScrollEvents.","body":"> [!IMPORTANT]\r\n> * Depends on: https:\/\/github.com\/flutter\/engine\/pull\/51566\r\n\r\n---\r\n\r\nThis PR modifies the `PointerScrollEvent` so events can be `.ignore()`d. This lets the engine know that an even is of no interest to the framework, so it can be relayed to the native embedding, instead of consumed.\r\n\r\nCurrently this fixes `wheel` events in flutter being unconditionally swallowed by the web engine, even in apps where there's no scrolling happening.\r\n\r\n(RFC, so no tests for now, attempted to build the minimal changes needed to discuss the approach).\r\n\r\n\r\n## Demo\r\n\r\n* https:\/\/dit-tests.web.app\r\n\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: scrolling","f: gestures"]},{"title":"[flutter_tools] flutter drive should expose --reporter and --file-reporter CLI options","body":null,"comments":[],"labels":["team-tool"]},{"title":"Print lint failure reason to stdout\/err for engine android builds","body":"I believe that because we configure the android_background_image test app [to print to a file](https:\/\/github.com\/flutter\/engine\/blob\/98cfd921333273e9fac8a39359b6830f2b1a956f\/testing\/android_background_image\/android\/app\/build.gradle#L13), the logs don't get printed in the ci output\r\nEx: https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux%20Engine%20Drone\/2122960\/overview\r\n\r\n[The docs for lintOptions](https:\/\/developer.android.com\/reference\/tools\/gradle-api\/4.1\/com\/android\/build\/api\/dsl\/LintOptions) cover how to make it print to stdout\/stderr instead","comments":[],"labels":["team-android"]},{"title":"Configure builder commit batch size in .ci.yaml","body":"This is a feature request to add the ability to configure the commit batch size for each builder individually in the `.ci.yaml` file. As part of this feature, backfilling during idle periods should continue to happen, and intermediate commits would still be possible to trigger manually.\r\n\r\nThe desire for this feature is driven by potential impending resource constrains that may arise out of the deprecation of goma in post-submit mac builds. We may need a larger batch size for mac builds than for other builders.\r\n\r\ncc @keyonghan @godofredoc ","comments":["This should be doable, but I would prefer to hold until datastore migration to firestore is finished. Hopefully mid of Q2."],"labels":["team-infra","P2","triaged-infra"]},{"title":"Registering a custom web service worker in a Flutter web project triggers a MIME type issue","body":"**Describe the bug**\r\n\r\nRegistering a custom service worker for flutter web is not working as expected.\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. create a flutter web-only application using `flutter create --platforms=web testapp`.\r\n2. add `service_worker: ^0.3.0` in your `pubspec.yaml`\r\n3. Edit your `main.dart` code this way:\r\n\r\n```\r\n\/\/ add the following line\r\nimport 'package:service_worker\/window.dart' as sw;\r\n\r\nvoid main() async {\r\n  \/\/ add the following line\r\n  await sw.register('sw.dart.js');\r\n  ...\r\n}\r\n```\r\n4. In your `web\/` folder, add a `sw.dart` file and copy\/paste the contents from the `sw.dart` file from the [example code](https:\/\/github.com\/isoos\/service_worker\/blob\/master\/example\/web\/sw.dart).\r\n5. Copy\/paste the `build.yaml` file from the [example code](https:\/\/github.com\/isoos\/service_worker\/blob\/master\/example\/build.yaml).\r\n6. Place a breakpoint on the line `await sw.register('sw.dart.js')` then launch a debug session by clicking on the `Debug` text above the `main` function.\r\n\r\nMore information in these [instructions](https:\/\/pub.dev\/packages\/service_worker), if needed.\r\n\r\n**Expected behavior**\r\n\r\nThe service worker should be run appropriately. `sw.register` should not raise an exception.\r\n\r\n**Actual behavior**\r\n\r\nExecuting the line `await sw.register('sw.dart.js')` raises the following exception:\r\n\r\n```\r\nError: SecurityError: Failed to register a ServiceWorker for scope ('http:\/\/localhost:51279\/')\r\nwith script ('http:\/\/localhost:51279\/sw.dart.js'): The script has an unsupported MIME type (text\/html)\r\n...\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart\r\n...\r\n```\r\n\r\n**Questions**\r\n\r\nI know getting a service worker to work is going to be [tricky](https:\/\/github.com\/flutter\/flutter\/issues\/67625). Basically, Flutter uses a service worker itself (flutter_service_worker.js), and because of this, a web application using a custom service worker needs special consideration.\r\n\r\nImmediately, my goal is to try to mitigate this issue: is there a way I can force `sw.dart.js` to be sent as `text\/javascript`, for instance ?\r\n\r\n**Please complete the following information:**\r\n\r\n - Operating System and version: Windows 11\r\n - VS Code version: 1.87.2\r\n - Dart extension version: 3.84.0\r\n - Dart\/Flutter SDK version: 3.19.3\r\n - Target device (if the issue relates to Flutter debugging): web (Microsoft Edge)\r\n","comments":["@kevmoo @isoos\r\n","Why did you file this under `devtools` and not the main `flutter` repo?","My sincere apology, it is a mistake. Recreating the issue in the Flutter repo.","@andynewman10 \u2013\u00a0I can MOVE it, too!","Nice, please do!","@andynewman10 \r\nCan you take a look at https:\/\/docs.flutter.dev\/platform-integration\/web\/initialization and see if service-worker implementation mentioned in it helps in your case or not ?\r\n\r\n\r\n> * Target device (if the issue relates to Flutter debugging): web (Microsoft Edge)\r\n\r\nCan you also confirm if it occurs using chrome or is specific to Edge ?","@darshankawar It is not specific to Edge, Chrome and Edge are both affected.","I made some good progress:\r\n\r\n1. when a URL is not found, the `index.html` is indeed returned (I read at multiple places that this behavior was observed by some users), and has an associated MIME type of `text\/html`. That's the phenomenom I was observing: `sw.dart.js` was simply not found.\r\n2. If I use @isoos 's and @kevmoo 's `service_worker\/example` project, build it, and then copy the generated `sw.dart.js` files over to the `web` folder of my project, the `sw.dart.js` is correctly found when I debug my project, is correctly identified as `text\/javascript`, and the exception disappears.\r\n3. This means I only have a build issue: somehow, my `build.yaml` file does not compile my `sw.dart` file into a JS file just like the way this is successfully [performed](https:\/\/github.com\/isoos\/service_worker\/blob\/master\/example\/build.yaml) in `service_worker\/example`.","In my pubspec.yaml, I have the following declarations:\r\n\r\n```\r\ndev_dependencies:\r\n  build_runner:\r\n  build_web_compilers:\r\n```\r\nNevertheless, `sw.dart.js`:\r\n\r\n- is not automatically generated when I enter my debug session. Is this supposed to be this way?\r\n- if I manually launch the generation process using `flutter pub run build_runner build`, the file gets generated in `testapp\/.dart_tool\/build\/generated\/com_example_testapp\/web`, not `testapp\/web`. Why? Because of this, it is not served by the web server when launching a debug session.\r\n","Thanks for the update @andynewman10 \r\n\r\n\r\n> * is not automatically generated when I enter my debug session. Is this supposed to be this way?\r\n\r\nHave you checked with service worker package's owner about this to know whether it is something the package need to take care of ?\r\n\r\n\r\n> 3\\. This means I only have a build issue: somehow, my `build.yaml` file does not compile my `sw.dart` file into a JS file just like the way this is successfully [performed](https:\/\/github.com\/isoos\/service_worker\/blob\/master\/example\/build.yaml) in `service_worker\/example`.\r\n\r\nI suggest you raise this in package's repo to know if this need to be addressed in the package itself or in web framework here.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"[infra + release] since 03\/18 12:00 Linux_android hot_mode_dev_cycle_linux__benchmark consistently fail ","body":"the [target failed](https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux_android%20hot_mode_dev_cycle_linux__benchmark\/9216\/overview) on release branch.\r\n\r\nLooking through the [target history](https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux_android%20hot_mode_dev_cycle_linux__benchmark), it seems like this target had been failing since 03\/18.\r\n\r\nWould be great if some infra expert could help take a look. Thank you!","comments":["The bot configuration the test was using was added for a manual test and was not supposed to block runs in presubmit.","The fix is to CP this change https:\/\/github.com\/flutter\/flutter\/commit\/71c1aba10bf2c0855b05ca7ac0253c460a1c35b6"],"labels":["P1","team-release"]},{"title":"TextStyle with decoration underline behaves weirdly ","body":"### Steps to reproduce\n\n1. Add multiple Text with TextStyle decoration underline and decorationColor in a column\n\n### Expected results\n\nEvery text should have the same underline color\n\n### Actual results\n\nSome texts gets the actual color defined in decorationColor, others gets some kind of faded color\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      backgroundColor: Colors.black,\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            Text(\r\n              'Logout',\r\n              style: TextStyle(\r\n                color: Colors.white,\r\n                decoration: TextDecoration.underline,\r\n                decorationColor: Colors.white,\r\n              ),\r\n            ),\r\n            Text(\r\n              'Logout',\r\n              style: TextStyle(\r\n                color: Colors.white,\r\n                decoration: TextDecoration.underline,\r\n                decorationColor: Colors.white,\r\n              ),\r\n            ),\r\n            Text(\r\n              'Logout',\r\n              style: TextStyle(\r\n                color: Colors.white,\r\n                decoration: TextDecoration.underline,\r\n                decorationColor: Colors.white,\r\n              ),\r\n            ),\r\n            Text(\r\n              'Logout',\r\n              style: TextStyle(\r\n                color: Colors.white,\r\n                decoration: TextDecoration.underline,\r\n                decorationColor: Colors.white,\r\n              ),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/108531792\/8387020d-2878-442f-80d7-eabd95d299f3)\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/108531792\/4e5b6172-bd33-4557-b4e0-4cc77f28c35b)\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n flutter run\r\nLaunching lib\\main.dart on 23049PCD8G in debug mode...\r\nRunning Gradle task 'assembleDebug'...                              3,1s\r\n\u2713  Built build\\app\\outputs\\flutter-apk\\app-debug.apk.\r\nSyncing files to device 23049PCD8G...                               33ms\r\n\r\nFlutter run key commands.\r\nr Hot reload. \ud83d\udd25\ud83d\udd25\ud83d\udd25\r\nR Hot restart.\r\nh List all available interactive commands.\r\nd Detach (terminate \"flutter run\" but leave application running).\r\nc Clear the screen\r\nq Quit (terminate the application on the device).\r\n\r\nA Dart VM Service on 23049PCD8G is available at: http:\/\/127.0.0.1:60957\/6eVDZGfe0N0=\/\r\nThe Flutter DevTools debugger and profiler on 23049PCD8G is available at: http:\/\/127.0.0.1:9101?uri=http:\/\/127.0.0.1:60957\/6eVDZGfe0N0=\/\r\nW\/1.raster(28045): type=1400 audit(0.0:140056): avc: denied { getattr } for path=\"\/sys\/module\/metis\/parameters\/minor_window_app\" dev=\"sysfs\" ino=69274 scontext=u:r:untrusted_app:s0:c250,c257,c512,c768 tcontext=u:object_r:sysfs_migt:s0 tclass=file permissive=0 app=com.example.bug\r\nD\/VRI[MainActivity](28045): vri.Setup new sync id=0 syncSeqId=0\r\nI\/com.example.bug(28045): ProcessProfilingInfo new_methods=0 is saved saved_to_disk=0 resolve_classes_delay=8000\r\nD\/com.example.bug(28045): MiuiProcessManagerServiceStub setSchedFifo\r\nI\/MiuiProcessManagerImpl(28045): setSchedFifo pid:28045, mode:3\r\nE\/perf_hint(28045): Session creation failed, mPreferredRateNanos: -1\r\nD\/VRI[MainActivity](28045): vri.reportDrawFinished syncSeqId=0 android.view.ViewRootImpl.lambda$createSyncIfNeeded$4$android-view-ViewRootImpl:5 android.view.ViewRootImpl$$ExternalSyntheticLambda1.run:6 android.os.Handler.handleCallback:2 android.os.Handler.dispatchMessage:4 android.os.Looper.loopOnce:182\r\nD\/DecorView[](28045): onWindowFocusChanged hasWindowFocus true\r\nI\/HandWritingStubImpl(28045): refreshLastKeyboardType: 1\r\nI\/HandWritingStubImpl(28045): getCurrentKeyboardType: 1\r\nI\/HandWritingStubImpl(28045): getCurrentKeyboardType: 1\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Microsoft Windows [versao 10.0.19045.4170], locale pt-BR)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\src\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at D:\\AndroidSDK\r\n    \u2022 Platform android-34, build-tools 33.0.2\r\n    \u2022 ANDROID_HOME = D:\\AndroidSDK\r\n    \u2022 Java binary at: D:\\Program Files\\AndroidStudio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.5.3)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.5.33516.290\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at D:\\Program Files\\AndroidStudio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Program Files\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 23049PCD8G (mobile) \u2022 f0373bf0 \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 Windows (desktop)   \u2022 windows  \u2022 windows-x64    \u2022 Microsoft Windows [versao 10.0.19045.4170]\r\n    \u2022 Chrome (web)        \u2022 chrome   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)          \u2022 edge     \u2022 web-javascript \u2022 Microsoft Edge 111.0.1661.54\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Have you checked this this on real device ???","Hi @atadeuccislideworks, which platform do you see this issue? I checked this on macOS app but can't see the issue. ","> Hi @atadeuccislideworks, which platform do you see this issue? I checked this on macOS app but can't see the issue.\r\n\r\nHey thanks for the reply, I'm on Android","> Have you checked this this on real device ???\r\n\r\nYes this is on a real device."],"labels":["in triage"]},{"title":"`RenderFlex` baseline intrinsics","body":"Implements `RenderFlex` intrinsics calculation when children are baseline aligned in the cross axis. \r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["@goderbauer I found it strange that the last flex child gets the remaining main axis extent instead of `flex * spacePerFlex` ([here](https:\/\/github.com\/flutter\/flutter\/blame\/68bfaea224880b488c617afe30ab12091ea8fa4e\/packages\/flutter\/lib\/src\/rendering\/flex.dart#L826)). That makes the last flex child special if other flex children opt to not take the full main extent allowance offered to them. I changed the implementation and no existing tests fail. Does that sound like a reasonable change to make?"],"labels":["framework"]},{"title":"Standardize bespoke test reporting within flutter\/flutter test.dart entrypoint","body":"This is a tracking issue for the effort to standardize bespoke test reporting in flutter\/flutter test.dart.\r\n\r\n- [ ] Refactor of suite runner logic in order to separate runner logic from testing\r\n    - [ ] change naming convention of \"shard\" to \"suite\"\r\n- [ ] Bespoke test refactoring\r\n    - [ ]   Add_to_app_life_cycle_tests https:\/\/github.com\/flutter\/flutter\/pull\/145546\r\n    - [ ]   Web_long_running_tests\r\n    - [ ]   flutter_plugins\r\n    - [ ]   skp_generator\r\n    - [ ]   realm_checker\r\n    - [ ]   customer_testing\r\n    - [ ]   fuchsia_precache\r\n    - [ ]   Docs\r\n    - [ ]   Analyze\r\n    - [ ]   verify_binaries_codesigned\r\n- [ ] Apply package:test concepts to bespoke tests\r\n- [ ] Parse tests to present results in similar format to  [Mac Build Integration tests](https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20tool_integration_tests_1_4\/15726\/overview) there is also already a parser for test results: https:\/\/cs.opensource.google\/flutter\/flutter\/+\/master:dev\/bots\/tool_subsharding.dart;l=34\r\n- [ ] Refactor tests which run `flutter test` multiple times so that the test results are not overwritten\r\n    - [ ] _runWebLongRunningTests","comments":["A few additional things to consider: \r\n\r\n- [ ] Some tests like _runWebLongRunningTests are running `flutter test` multiple times which will override the test results file.\r\n- [ ] `Flutter driver` tests are not writing the test events to the file.  \r\n"],"labels":["team-infra","P2","triaged-infra"]},{"title":"Custom Gradient Transformation Causes Dithering Artifacts in Radial Gradient","body":"### Steps to reproduce\n\nWhen utilizing a `GradientTransform` to scale and translate a `RadialGradient`, dithering artifacts are observed with the Impeller rendering engine, an issue that is not present when using Skia.\n\n### Expected results\n\nNon dithering artifacts on Impeller\r\n\r\n<img width=\"173\" alt=\"Screenshot 2024-03-20 at 17 21 41\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/1196374\/bc0257ea-50d8-4bd9-9a8d-53283fb176c4\">\r\n\n\n### Actual results\n\nDithering artifacts on Impeller\r\n\r\n<img width=\"168\" alt=\"Screenshot 2024-03-20 at 17 22 04\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/1196374\/3ae03d9b-2498-47e9-a9c6-2e4fb3810e96\">\r\n\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Center(\r\n      child: Container(\r\n        width: 300,\r\n        height: 100,\r\n        decoration: BoxDecoration(\r\n          gradient: EllipticalGradient(\r\n            colors: [\r\n              Color(0xFF01F6BB).withOpacity(0.15),\r\n              Color(0xFF01F6BB).withOpacity(0),\r\n            ],\r\n            stops: const [0.0, 1.0],\r\n            ellipseRelativeCenter: const Offset(0.5, 1),\r\n            ellipseScale: const Scale(widthFactor: 0.9, heightFactor: 0.6),\r\n            backgroundColor: Color(0xFF1C2B3E),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass EllipticalGradient extends Gradient {\r\n  final Color backgroundColor;\r\n\r\n  \/\/\/ This offset is relative to top left of the widget, [0,0] means top left and [1,1] bottom right.\r\n  \/\/\/\r\n  \/\/\/ The range is not limited to [0,1] for both x and y axis.\r\n  final Offset ellipseRelativeCenter;\r\n  final Scale ellipseScale;\r\n\r\n  const EllipticalGradient({\r\n    required super.colors,\r\n    required this.backgroundColor,\r\n    required this.ellipseRelativeCenter,\r\n    required this.ellipseScale,\r\n    super.stops,\r\n  });\r\n\r\n  @override\r\n  Shader createShader(Rect rect, {TextDirection? textDirection}) {\r\n    return RadialGradient(\r\n      center: Alignment(ellipseRelativeCenter.dx * 2 - 1, ellipseRelativeCenter.dy * 2 - 1),\r\n      colors: colors.map((color) => Color.alphaBlend(color, backgroundColor)).toList(),\r\n      radius: 1,\r\n      stops: stops,\r\n      transform: _EllipseTransform(\r\n        ellipseRelativeCenter: ellipseRelativeCenter,\r\n        ellipseScale: ellipseScale,\r\n      ),\r\n    ).createShader(rect, textDirection: textDirection);\r\n  }\r\n\r\n  @override\r\n  EllipticalGradient scale(double factor) {\r\n    return EllipticalGradient(\r\n      backgroundColor: backgroundColor,\r\n      colors: colors.map<Color>((Color color) => Color.lerp(null, color, factor)!).toList(),\r\n      ellipseRelativeCenter: ellipseRelativeCenter,\r\n      ellipseScale: ellipseScale,\r\n    );\r\n  }\r\n}\r\n\r\nclass _EllipseTransform extends GradientTransform {\r\n  final Offset ellipseRelativeCenter;\r\n  final Scale ellipseScale;\r\n\r\n  const _EllipseTransform({\r\n    required this.ellipseRelativeCenter,\r\n    required this.ellipseScale,\r\n  });\r\n\r\n  @override\r\n  Matrix4? transform(Rect bounds, {TextDirection? textDirection}) {\r\n    final double widthFactor;\r\n    final double heightFactor;\r\n    if (bounds.width > bounds.height) {\r\n      heightFactor = ellipseScale.heightFactor;\r\n      widthFactor = ellipseScale.widthFactor * bounds.width \/ bounds.height;\r\n    } else {\r\n      heightFactor = ellipseScale.heightFactor * bounds.height \/ bounds.width;\r\n      widthFactor = ellipseScale.widthFactor;\r\n    }\r\n    final transformMatrix = Matrix4.identity()..scale(widthFactor, heightFactor);\r\n    final Offset originalCenterOffset = Offset(\r\n      bounds.left + bounds.width * ellipseRelativeCenter.dx,\r\n      bounds.top + bounds.height * ellipseRelativeCenter.dy,\r\n    );\r\n\r\n    final List<double> offsetLocation =\r\n        transformMatrix.applyToVector3Array([originalCenterOffset.dx, originalCenterOffset.dy, 0.0]);\r\n    final dx = originalCenterOffset.dx - offsetLocation[0];\r\n    final dy = originalCenterOffset.dy - offsetLocation[1];\r\n    return transformMatrix..translate(dx \/ widthFactor, dy \/ heightFactor);\r\n  }\r\n}\r\n\r\n@immutable\r\nclass Scale {\r\n  final double heightFactor;\r\n  final double widthFactor;\r\n\r\n  const Scale({\r\n    required this.heightFactor,\r\n    required this.widthFactor,\r\n  });\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.0, on macOS 14.0 23A344 darwin-arm64, locale en-FR)\r\n    \u2022 Flutter version 3.19.0 on channel stable at \/Users\/t.guerin-ext\/fvm\/versions\/3.19.0\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision bae5e49bc2 (5 weeks ago), 2024-02-13 17:46:18 -0800\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/t.guerin-ext\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.13.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.5)\r\n    \u2022 IntelliJ at \/Users\/t.guerin-ext\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 78.1.1\r\n    \u2022 Dart plugin version 233.13763.5\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone 15 (mobile) \u2022 E120F861-78FD-4111-A954-4EB49AC9A2C9 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4 (simulator)\r\n    \u2022 macOS (desktop)    \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.0 23A344 darwin-arm64\r\n    \u2022 Chrome (web)       \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I was able to replicate this on latest versions.\r\n\r\n1. With Impeller:\r\n\r\n<img width=\"356\" alt=\"Screenshot 2024-03-21 at 12 32 59 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/d4b79e12-098e-4775-bdcf-e1dd1a38ef38\">\r\n\r\n\r\n2. Without Impeller:\r\n\r\n<img width=\"311\" alt=\"Screenshot 2024-03-21 at 12 34 01 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/d817d776-9eb6-4eae-9ba5-84f22c1a2b05\">\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>","Just to add to the discussion, when adjusting the height and width properties, the intensity of the dithering issue appears to fluctuate."],"labels":["engine","has reproducible steps","e: impeller","team-engine","found in release: 3.19","found in release: 3.21"]},{"title":"Revisit devicelab configurations in try pool with regard to perf and low end devices","body":"### Type of Request\n\ninfra task\n\n### Infrastructure Environment\n\nLUCI, bot pools\n\n### What is happening?\n\nTracking issue for follow up to this: https:\/\/github.com\/flutter\/flutter\/issues\/145242 after the device lab move is completed.\n\n### Steps to reproduce\n\nna\n\n### Expected results\n\nna","comments":["cc\/ @yusuf-goog @zanderso "],"labels":["team-infra","P3","triaged-infra"]},{"title":"\ud83d\udc1b : FIX : Long labels overflowing in extended navigation rail.","body":"It has been observed that while in extended navigation rail, if longer labels are given the it is overflowing. Problem identified in \"NavigationRail\" widget only in case of extended version of it. This PR includes the fix for the same.\r\n\r\n*Issue : https:\/\/github.com\/flutter\/flutter\/issues\/110901*\r\n\r\n*NO breaking changes.*\r\n\r\n## Pre-launch Checklist\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n","comments":[],"labels":["framework","f: material design"]},{"title":"Fix InputDecorator suffix and prefix icons with `IconButton` widget ignore `IconButtonTheme`","body":"fixes [DropdownMenu TrailingIcon can't be styled through providing an IconButtonTheme](https:\/\/github.com\/flutter\/flutter\/issues\/145081)\r\n\r\n### Code sample\r\n\r\n<details>\r\n<summary>expand to view the code sample<\/summary> \r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() => runApp(const MyApp());\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      debugShowCheckedModeBanner: false,\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: IconButtonTheme(\r\n            data: IconButtonThemeData(\r\n              style: IconButton.styleFrom(\r\n                foregroundColor: const Color(0xffff0000),\r\n                shape: RoundedRectangleBorder(\r\n                  borderRadius: BorderRadius.circular(10.0),\r\n                ),\r\n              ),\r\n            ),\r\n            child: SizedBox(\r\n              width: 300,\r\n              child: Column(\r\n                mainAxisSize: MainAxisSize.min,\r\n                children: [\r\n                  const Text('IconButton'),\r\n                  IconButton(onPressed: () {}, icon: const Icon(Icons.search)),\r\n                  const Text('TextField'),\r\n                  TextField(\r\n                    decoration: InputDecoration(\r\n                      prefixIcon: IconButton(\r\n                        onPressed: () {},\r\n                        icon: const Icon(Icons.search),\r\n                      ),\r\n                      suffixIcon: IconButton(\r\n                        onPressed: () {},\r\n                        icon: const Icon(Icons.search),\r\n                      ),\r\n                    ),\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n| Before | After |\r\n| --------------- | --------------- |\r\n| <img src=\"https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/69b5966b-c95d-4934-b867-3262d1377f70\"  \/> | <img src=\"https:\/\/github.com\/flutter\/flutter\/assets\/48603081\/0064db2b-0379-4424-a5bf-39bdc5441fe8\" \/> |\r\n\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["@justinmc @Piinks \r\n\r\nParent `iconButtonTheme` isn't passed to `IconButton` in the prefix and suffix icons in the input decorator.\r\n\r\nIf this is a disruptive change, i could instead introduce `iconButtonTheme` to `DropdownMenuTheme` only and address the issue https:\/\/github.com\/flutter\/flutter\/issues\/145081. This shouldn't break the customer tests as it is not currently supported. \r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/859eb2eda9818e408df046f5ff790cc9d5c28754\/packages\/flutter\/lib\/src\/material\/dropdown_menu_theme.dart#L31-L35"],"labels":["framework","f: material design"]},{"title":"Gradle Cache  continually growing every build apk run in release mode ","body":"### Type of Request\r\n\r\nbug\r\n\r\n### Infrastructure Environment\r\n\r\nThis happens on local machines and also on Giltab CI  when building apk in release mode. The build is done from the same location in local machines . On CI, it's run from the same path.\r\n\r\n### What is happening?\r\n\r\nOnly in release mode, the gradle build cache, located at $HOME\/.gradle\/build-cache grows on every build apk --release.  Therefore, we can't enable gralde caching (especially on CI environnement, the runner uploads in gitlab cache the folder.\/gradle\/caches but can't if the size of that folder exceeds some size because of growing size). \r\n\r\nEnabling gradle caching allows to reduce drastically the apk build time approaching 50 minutes in our company. \r\n\r\nI would to let you know two informations:\r\n\r\n- In debug mode, this behavior isn't observed. build gradle cache has a stable size.\r\n- This behavior isn't observed with android native project even in release mode.\r\n\r\n\r\n### Steps to reproduce\r\n\r\n- flutter clean\r\n- flutter build apk --release\r\n- check  size of $HOME\/.gradle\/caches\/build-cache-1 \r\n- flutter clean\r\n- flutter build apk --release\r\n- check  size of $HOME\/.gradle\/caches\/build-cache-1  . Size grows again and it grows every execution \r\n\r\nThis behavios is alors observed when run gradle commands:\r\n- flutter pub get\r\n- cd android\r\n- .\/gradlew clean\r\n- .\/gradlew assembleRelease\r\n- .\/gradlew clean\r\n- .\/gradlew assembleRelease\r\n\r\nSamples: \r\n- Flutter project that shows the issue  [flutter_app_demo.zip](https:\/\/github.com\/flutter\/flutter\/files\/14668596\/flutter_app_demo.zip)\r\n- Android native project (works well in release mode): [My Application.zip](https:\/\/github.com\/flutter\/flutter\/files\/14668604\/My.Application.zip)\r\n\r\n\r\n### Expected results\r\nThe size of gralde build cache located at $HOME\/.gradle\/caches\/build-cache remains stable after multiple build apk run. ","comments":[],"labels":["team-android"]},{"title":"\"Failed assertion: line 207 pos 12: '_overlay != null': is not true\" when trying to remove a non null overlayEntry","body":"This issue has been surfing for a while, I am unsure if it's an error in the code sample shared below or an error in the framework, But it looks like it's the latter looking at the logs and I was able to reproduce this without any external package.\r\n\r\noriginally filed here https:\/\/github.com\/maheshmnj\/searchfield\/issues\/43\r\n\r\n### Steps to reproduce\r\n\r\n1. Run the below code sample\r\n2. Tap the textfield\r\n3. select one of the displayed option\r\n\r\n### Expected results\r\n\r\nOverlay entry can be removed and the app runs without the error.\r\n\r\n### Actual results\r\n\r\nAn assertion error is thrown when trying to remove the overlay entry when it is not null and mounted\r\n\r\n```dart\r\n if (_overlayEntry != null && _overlayEntry!.mounted) {\r\n      _overlayEntry!.remove();\r\n    }\r\n```\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() => runApp(const MyApp());\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      title: 'Material App',\r\n      home: BottomNavBarHome(),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageOne extends StatefulWidget {\r\n  const PageOne({Key? key, required this.bottomNavBarKey}) : super(key: key);\r\n\r\n  final GlobalKey<State<BottomNavigationBar>> bottomNavBarKey;\r\n\r\n  @override\r\n  State<PageOne> createState() => _PageOneState();\r\n}\r\n\r\nclass _PageOneState extends State<PageOne> {\r\n  final ScrollController _scrollController = ScrollController();\r\n  BottomNavigationBar? bottomNavKey;\r\n\r\n  Widget _list() {\r\n    return Container(\r\n      height: 5 * 40,\r\n      child: Scrollbar(\r\n          controller: _scrollController,\r\n          thumbVisibility: true,\r\n          child: ListView.builder(\r\n              controller: _scrollController,\r\n              padding: EdgeInsets.zero,\r\n              itemCount: 20,\r\n              itemBuilder: (context, index) => ListTile(\r\n                    title: Text('item $index'),\r\n                    onTap: () {\r\n                      _searchFocus.unfocus();\r\n                      if (widget.bottomNavBarKey.currentWidget != null) {\r\n                        bottomNavKey = widget.bottomNavBarKey.currentWidget\r\n                            as BottomNavigationBar;\r\n                      }\r\n                      bottomNavKey?.onTap!(1);\r\n                    },\r\n                  ))),\r\n    );\r\n  }\r\n\r\n  final LayerLink _layerLink = LayerLink();\r\n\r\n  OverlayEntry _createOverlay() {\r\n    final renderBox = context.findRenderObject() as RenderBox;\r\n    final size = renderBox.size;\r\n    final offset = renderBox.localToGlobal(Offset.zero);\r\n    return OverlayEntry(\r\n        builder: (context) => Positioned(\r\n              left: offset.dx,\r\n              width: size.width,\r\n              child: CompositedTransformFollower(\r\n                  offset: Offset(0, 50),\r\n                  link: _layerLink,\r\n                  child: Material(color: Colors.red, child: _list())),\r\n            ));\r\n  }\r\n\r\n  OverlayEntry? _overlayEntry;\r\n\r\n  @override\r\n  void initState() {\r\n    WidgetsBinding.instance.addPostFrameCallback((_) {\r\n      _overlayEntry = _createOverlay();\r\n    });\r\n    _searchFocus = FocusNode();\r\n    _searchFocus.addListener(() {\r\n      if (!_searchFocus.hasFocus) {\r\n        if (_overlayEntry != null && _overlayEntry!.mounted) {\r\n          _overlayEntry!.remove();\r\n        }\r\n      }\r\n    });\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    if (_overlayEntry != null && _overlayEntry!.mounted) {\r\n      _overlayEntry!.remove();\r\n    }\r\n    _searchFocus.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  late FocusNode _searchFocus;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text('Steps to Reproduce'),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            CompositedTransformTarget(\r\n              link: _layerLink,\r\n              child: TextFormField(\r\n                focusNode: _searchFocus,\r\n                decoration: InputDecoration(\r\n                  focusedBorder: OutlineInputBorder(\r\n                    borderSide: BorderSide(\r\n                      color: Colors.black.withOpacity(0.8),\r\n                    ),\r\n                  ),\r\n                  border: OutlineInputBorder(\r\n                    borderSide: BorderSide(color: Colors.red),\r\n                  ),\r\n                ),\r\n                onTap: () {\r\n                  Overlay.of(context).insert(_overlayEntry!);\r\n                },\r\n                onChanged: (query) {},\r\n              ),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass BottomNavBarHome extends StatefulWidget {\r\n  const BottomNavBarHome({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  State<BottomNavBarHome> createState() => _BottomNavBarHomeState();\r\n}\r\n\r\nclass _BottomNavBarHomeState extends State<BottomNavBarHome> {\r\n  late PageController _pageController;\r\n  late final GlobalKey<State<BottomNavigationBar>> _bottomNavBarKey;\r\n  DateTime? currentBackPressTime;\r\n  @override\r\n  void initState() {\r\n    _pageController = PageController();\r\n    _bottomNavBarKey = GlobalKey<State<BottomNavigationBar>>();\r\n    super.initState();\r\n  }\r\n\r\n  int selectindex = 0;\r\n  void _onItemTapped(int selectedIndex) {\r\n    setState(() {\r\n      selectindex = selectedIndex;\r\n      _pageController.jumpToPage(selectindex);\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Scaffold(\r\n        extendBody: true,\r\n        body: PageView(\r\n          controller: _pageController,\r\n          children: [\r\n            PageOne(\r\n              bottomNavBarKey: _bottomNavBarKey,\r\n            ),\r\n            PageSecond(),\r\n            PageThird(),\r\n          ],\r\n          \/\/ onPageChanged: _onPageChanged,\r\n        ),\r\n        bottomNavigationBar: BottomNavigationBar(\r\n          currentIndex: selectindex,\r\n          type: BottomNavigationBarType.fixed,\r\n          key: _bottomNavBarKey,\r\n          onTap: _onItemTapped,\r\n          items: const [\r\n            BottomNavigationBarItem(\r\n              icon: Icon(Icons.home),\r\n              label: 'Page 1',\r\n              backgroundColor: Colors.blue,\r\n            ),\r\n            BottomNavigationBarItem(\r\n              icon: Icon(Icons.person),\r\n              label: 'Page 2',\r\n              backgroundColor: Colors.blue,\r\n            ),\r\n            BottomNavigationBarItem(\r\n              icon: Icon(Icons.book),\r\n              label: 'Page 3',\r\n              backgroundColor: Colors.blue,\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageSecond extends StatelessWidget {\r\n  const PageSecond({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      body: Center(child: Text('Page Second')),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageThird extends StatelessWidget {\r\n  const PageThird({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      body: Center(\r\n          child: Text(\r\n        'Page Third',\r\n      )),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nRestarted application in 2,512ms.\r\nD\/EGL_emulation( 6657): app_time_stats: avg=98101.58ms min=98101.58ms max=98101.58ms count=1\r\nD\/InputMethodManager( 6657): showSoftInput() view=io.flutter.embedding.android.FlutterView{6bfaeb4 VFE...... .F...... 0,0-1440,3064 #1 aid=1073741824} flags=0 reason=SHOW_SOFT_INPUT\r\nW\/example.exampl( 6657): Reducing the number of considered missed Gc histogram windows from 226 to 100\r\nD\/InsetsController( 6657): show(ime(), fromIme=true)\r\nD\/EGL_emulation( 6657): app_time_stats: avg=5986.86ms min=4.82ms max=119620.28ms count=20\r\nD\/EGL_emulation( 6657): app_time_stats: avg=1997.25ms min=1997.25ms max=1997.25ms count=1\r\nD\/EGL_emulation( 6657): app_time_stats: avg=136.85ms min=17.84ms max=500.48ms count=8\r\nD\/EGL_emulation( 6657): app_time_stats: avg=93.36ms min=5.94ms max=1493.54ms count=18\r\n\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by widgets library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following assertion was thrown while finalizing the widget tree:\r\n'package:flutter\/src\/widgets\/overlay.dart': Failed assertion: line 207 pos 12: '_overlay != null': is not true.\r\n\r\nWhen the exception was thrown, this was the stack:\r\n#2      OverlayEntry.remove (package:flutter\/src\/widgets\/overlay.dart:207:12)\r\n#3      _PageOneState.dispose (package:example\/main.dart:92:22)\r\n#4      StatefulElement.unmount (package:flutter\/src\/widgets\/framework.dart:5867:11)\r\n#5      _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2097:13)\r\n#6      _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#7      SingleChildRenderObjectElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:6940:14)\r\n#8      _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#9      _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#10     SingleChildRenderObjectElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:6940:14)\r\n#11     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#12     _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#13     ComponentElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:5704:14)\r\n#14     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#15     _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#16     ComponentElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:5704:14)\r\n#17     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#18     _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#19     ComponentElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:5704:14)\r\n#20     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#21     _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#22     ComponentElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:5704:14)\r\n#23     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#24     _InactiveElements._unmount.<anonymous closure> (package:flutter\/src\/widgets\/framework.dart:2095:7)\r\n#25     ComponentElement.visitChildren (package:flutter\/src\/widgets\/framework.dart:5704:14)\r\n#26     _InactiveElements._unmount (package:flutter\/src\/widgets\/framework.dart:2093:13)\r\n#27     ListIterable.forEach (dart:_internal\/iterable.dart:49:13)\r\n#28     _InactiveElements._unmountAll (package:flutter\/src\/widgets\/framework.dart:2106:25)\r\n#29     BuildOwner.lockState (package:flutter\/src\/widgets\/framework.dart:2799:15)\r\n#30     BuildOwner.finalizeTree (package:flutter\/src\/widgets\/framework.dart:3234:7)\r\n#31     WidgetsBinding.drawFrame (package:flutter\/src\/widgets\/binding.dart:992:19)\r\n#32     RendererBinding._handlePersistentFrameCallback (package:flutter\/src\/rendering\/binding.dart:448:5)\r\n#33     SchedulerBinding._invokeFrameCallback (package:flutter\/src\/scheduler\/binding.dart:1386:15)\r\n#34     SchedulerBinding.handleDrawFrame (package:flutter\/src\/scheduler\/binding.dart:1311:9)\r\n#35     SchedulerBinding._handleDrawFrame (package:flutter\/src\/scheduler\/binding.dart:1169:5)\r\n#36     _invoke (dart:ui\/hooks.dart:312:13)\r\n#37     PlatformDispatcher._drawFrame (dart:ui\/platform_dispatcher.dart:399:5)\r\n#38     _drawFrame (dart:ui\/hooks.dart:283:31)\r\n(elided 2 frames from class _AssertionError)\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nD\/EGL_emulation( 6657): app_time_stats: avg=3216.29ms min=692.67ms max=5739.90ms count=2\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nmahesh@Maheshs-MacBook-Air-M1-3 searchfield % flutter doctor -v\r\nCould not load custom device from config index 0: Expected enabled to be a boolean.\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-IN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/mahesh\/Development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0-rc4)\r\n    \u2022 Android SDK at \/Users\/mahesh\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.0-rc4\r\n    \u2022 ANDROID_HOME = \/Users\/mahesh\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2021.2.1)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA CE.app\r\n    \u2022 Flutter plugin version 61.2.4\r\n    \u2022 Dart plugin version 212.5080.8\r\n\r\n[\u2713] VS Code (version 1.86.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] VS Code (version 1.79.0-insider)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code - Insiders.app\/Contents\r\n    \u2022 Flutter extension version 3.80.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554 \u2022 android-arm64  \u2022 Android 12 (API 31)\r\n      (emulator)\r\n    \u2022 macOS (desktop)             \u2022 macos         \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60\r\n      darwin-arm64\r\n    \u2022 Chrome (web)                \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome\r\n      120.0.6099.71\r\n\r\n[!] Network resources\r\n    \u2717 An HTTP error occurred while checking \"https:\/\/maven.google.com\/\": Connection closed\r\n      before full header was received\r\n    \u2717 An HTTP error occurred while checking \"https:\/\/github.com\/\": Connection closed before\r\n      full header was received\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report @maheshmnj  Hope you are doing well :)\r\n\r\nI was able to replicate this on latest versions. It is throwing below assertion from the framework:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/0e268b5024b8e1569cc66d82e17680de21458440\/packages\/flutter\/lib\/src\/widgets\/overlay.dart#L207\r\n\r\nwhich could be conflicting with the implementation:\r\n\r\n\r\n\r\n> ```dart\r\n> if (_overlayEntry != null && _overlayEntry!.mounted) {\r\n>       _overlayEntry!.remove();\r\n>     }\r\n> ```\r\n\r\nI also observed that while above condition is executed, the `maintainState` is `false`. I tried to make it `true` but got same result.\r\n\r\nBased on the exception received, I'll keep the issue open and label for team's input \/ tracking.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n"],"labels":["framework","a: error message","has reproducible steps","P2","team-framework","triaged-framework","found in release: 3.19","found in release: 3.21"]},{"title":"Allow to use \"Rectangle\" reaction instead of Radial reaction in Checkbox","body":"### Use case\n\nThe current default behavior of Flutter hover action is paintRadialReaction:\r\n<img width=\"96\" alt=\"Scherm\u00adafbeelding 2024-03-20 om 14 26 24\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/60786797\/baabb872-4c46-4b2d-8a7b-c386954b75d0\">\r\n\r\nwhat I want to customize is that I want it to be rectangle instead of radial:\r\n<img width=\"102\" alt=\"Scherm\u00adafbeelding 2024-03-20 om 14 23 51\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/60786797\/1a15ad11-6025-4867-b0b9-97fe69648ac4\">\r\n\r\nIn the Flutter framework we have:\r\npackage:flutter\/src\/material\/toggleable.dart (https:\/\/api.flutter.dev\/flutter\/material\/ToggleablePainter\/paintRadialReaction.html)\r\n```dart\r\n\/\/\/ paintRadialReaction\r\ncanvas.drawCircle(origin + offset, reactionRadius, reactionPaint);\r\n```\r\n\r\nI can get the result that I want by changing it to:\r\n```dart\r\n\/\/\/ paintRadialReaction\r\nfinal diameter = reactionRadius * 2;\r\ncanvas.drawRect(\r\n  Rect.fromCenter(\r\n    center: origin + offset,\r\n    width: diameter,\r\n    height: diameter,\r\n  ),\r\n  reactionPaint,\r\n);\r\n```\r\n\r\n\n\n### Proposal\n\nThe checkbox class contains a default painter:\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/ba39319843\/packages\/flutter\/lib\/src\/material\/checkbox.dart#L412\r\n\r\n```dart\r\nfinal _CheckboxPainter _painter = _CheckboxPainter();\r\n```\r\n\r\nCan we change this class so that it loads the painter from CheckboxThemeData or add override to class constructor for a custom ToggleablePainter?\r\n\r\n\r\n","comments":[],"labels":["c: new feature","framework","f: material design","c: proposal","team-design"]},{"title":"setPlaybackSpeed() is not working for ios during initialize VideoPlayerController.networkUrl()","body":"Below are the details of my configuration\r\nios v17.4\r\nflutter v3.19.3\r\nvideo_player v2.8.3","comments":[">setPlaybackSpeed() is not working for ios during initialize VideoPlayerController.networkUrl()\r\n\r\nPlease be more specific by providing a complete & minimal sample code. Some issues could be similar but they are clear scenarios (before or after initializing controller), you can check to see if one of them is also your case: https:\/\/github.com\/flutter\/flutter\/issues\/100351, https:\/\/github.com\/flutter\/flutter\/issues\/73643."],"labels":["waiting for customer response","in triage"]},{"title":"ios 17.4 cannot run and debug in vscode, Exception: Did not find a Dart VM Service advertised for \"BundleId\"","body":"### Steps to reproduce\n\n1. \r\n\r\nPress F5 to debug after linking iOS devices in VSCode\n\n### Expected results\n\nEntering the app normally.\n\n### Actual results\n\nAfter starting the app, the screen remains white. And the console prints the following information:\r\n```\r\nLaunching lib\/main.dart on company\u7684iPhone in debug mode...\r\nAutomatically signing iOS for device deployment using specified development team in Xcode project: 2S8X6726CZ\r\nXcode build done.                                           37.3s\r\nYou may be prompted to give access to control Xcode. Flutter uses Xcode to run your app. If access is not allowed, you can change this through your Settings > Privacy & Security > Automation.\r\nThe Dart VM Service was not discovered after 75 seconds. This is taking much longer than expected...\r\nOpen the Xcode window the project is opened in to ensure the app is running. If the app is not running, try selecting \"Product > Run\" to fix the problem.\r\n\r\nClick \"Allow\" to the prompt asking if you would like to find and connect devices on your local network. This is required for wireless debugging. If you selected \"Don't Allow\", you can turn it on in Settings > Your App Name > Local Network. If you don't see your app in the Settings, uninstall the app and rerun to see the prompt again.\r\n```\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["@dualskana \r\nDoes this occur only in debug mode or in `run` mode as well ?\r\nCan you follow below and provide the log ?\r\n\r\nRun the [Dart: Capture Debugging Logs command](https:\/\/dartcode.org\/docs\/logging\/#capture-debugging-logs)\r\nReproduce the issue\r\nClick Cancel on the logging notification to stop logging and open the log\r\nRemove anything sensitive from the log\r\nAttach the log here, in a [gist](https:\/\/gist.github.com\/),"],"labels":["waiting for customer response","in triage"]},{"title":"Marks Mac_ios platform_views_scroll_perf_ad_banners__timeline_summary to be unflaky","body":"<!-- meta-tags: To be used by the automation script only, DO NOT MODIFY.\n{\n  \"name\": \"Mac_ios platform_views_scroll_perf_ad_banners__timeline_summary\"\n}\n-->\nThe test has been passing for [50 consecutive runs](https:\/\/data.corp.google.com\/sites\/flutter_infra_metrics_datasite\/flutter_check_test_flakiness_status_dashboard\/?p=BUILDER_NAME:%22Mac_ios%20platform_views_scroll_perf_ad_banners__timeline_summary%22).\nThis test can be marked as unflaky.\n","comments":[],"labels":["c: flake","autosubmit"]},{"title":"LicenseEntryWithLineBreaks Fails to Properly Display Line Breaks in License Text","body":"### Steps to reproduce\n\n1. Launch the application from the following link and tap on \"showLicensePage\":\r\nhttps:\/\/github.com\/motucraft\/issue_license_new_line\r\n1. Tap on \"add_license_for_sample\".\r\n1. The issue can be observed.\n\n### Expected results\n\nNewlines in the license file are correctly identified.\n\n### Actual results\n\nThe text from the OFL license file (found at https:\/\/openfontlicense.org\/documents\/OFL.txt) does not display with the correct line breaks. Instead of appearing as formatted in the source file, the text runs together without proper line breaks, making it difficult to read and understand.\r\n\n\n### Code sample\n\nhttps:\/\/github.com\/motucraft\/issue_license_new_line\/blob\/main\/lib\/main.dart\n\n### Screenshots or Video\n\nhttps:\/\/github.com\/motucraft\/issue_license_new_line\/tree\/main?tab=readme-ov-file#issue_license_new_line\n\n### Logs\n\n_No response_\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n% flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale ja-JP)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/osaki\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at \/Users\/osaki\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.2\r\n    \u2022 Java binary at: \/Users\/osaki\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Users\/osaki\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.5)\r\n    \u2022 IntelliJ at \/Users\/osaki\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 78.3.1\r\n    \u2022 Dart plugin version 233.14888\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 motucraft (mobile)                  \u2022 00008130-001A34290CC2001C            \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 iPhone SE (3rd generation) (mobile) \u2022 FDAE2A23-F969-4989-91EF-052FC8A2F742 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4 (simulator)\r\n    \u2022 macOS (desktop)                     \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)                        \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the code sample provided above. \r\n\r\nThe paragraphs getter may need to be modified. https:\/\/github.com\/flutter\/flutter\/blob\/994c2fd4d439a477c511895a41eefaff1d01ccc5\/packages\/flutter\/lib\/src\/foundation\/licenses.dart#L145\r\n\r\n@motucraft, if you own the license files you can work around this by inserting line breaks manually \r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Pixel 7 (mobile)     \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-11.0.pre.44, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.44 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 852a10d832 (5 hours ago), 2024-03-20 01:44:17 -0400\r\n    \u2022 Engine revision e96b2b0047\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Pixel 7 (mobile)                \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>"],"labels":["framework","has reproducible steps","P2","team-framework","triaged-framework","found in release: 3.19","found in release: 3.21"]},{"title":"When I running some code by isolate, It running slowly than not using isolate","body":"### Steps to reproduce\n\nI have a program that decodes some images, processes them, and finally encodes them back to a file.\r\n\r\nI found that running it directly caused the UI to block, so I use Isolate to run the same code, but running speed to be slowly, even twice as slowly as without using isolate!\n\n### Code sample\n\nI write a demo about it:\r\n\r\nwhen I click \"Run without isolate\", It's need 21039ms\r\n\r\n![1](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/2e87af38-6349-421d-9305-73e9c32df39d)\r\n\r\n\r\nBut if I using \u201cRun with isolate\u201d\uff0c It's need 38608ms!\r\n\r\n![2](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/fc742fda-682f-41be-9820-8fdd8c01ce39)\r\n\r\n<details open><summary>Code smaple<\/summary>\r\n\r\n```dart\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  int usingTime = 0;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            const CircularProgressIndicator(),\r\n            Text(\"Running time: $usingTime ms\"),\r\n            TextButton(onPressed: _runWithoutIsolate, child: const Text(\"Run without isolate\")),\r\n            TextButton(onPressed: _runWithIsolate, child: const Text(\"Run with isolate\"))\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n\r\n  void _runWithIsolate() async {\r\n    var savePath = await getTemporaryDirectory();\r\n\r\n    var duration = await compute((path) => _runTask(path), \"${savePath.path}\/test.log\");\r\n    if (mounted) {\r\n      setState(() {\r\n        usingTime = duration;\r\n      });\r\n    }\r\n  }\r\n\r\n  void _runWithoutIsolate() async {\r\n    var savePath = await getTemporaryDirectory();\r\n\r\n    var duration = _runTask(\"${savePath.path}\/test.log\");\r\n\r\n    if (mounted) {\r\n      setState(() {\r\n        usingTime = duration;\r\n      });\r\n    }\r\n  }\r\n\r\n  static int _runTask(String savePath) {\r\n    var file = File(savePath);\r\n    var startTime = DateTime.now().millisecondsSinceEpoch;\r\n    for (var i=0;i<1000000;i++) {\r\n      file.writeAsStringSync(\"a\\n\", mode: FileMode.append);\r\n    }\r\n    return DateTime.now().millisecondsSinceEpoch - startTime;\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Performance profiling on master channel\n\n- [x] The issue still persists on the master channel\n\n### Timeline Traces\n\n<details open><summary>Timeline Traces JSON<\/summary>\r\n\r\n```json\r\n[Paste the Timeline Traces here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Video demonstration\n\n<details open>\r\n<summary>Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### What target platforms are you seeing this bug on?\n\nAndroid\n\n### OS\/Browser name and version | Device information\n\nMi 10u\n\n### Does the problem occur on emulator\/simulator as well as on physical devices?\n\nYes\n\n### Is the problem only reproducible with Impeller?\n\nN\/A\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nFlutter assets will be downloaded from https:\/\/storage.flutter-io.cn. Make sure you trust this source!\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[!] Flutter (Channel stable, 3.19.0, on Microsoft Windows [\u7248\u672c 10.0.22621.3155], locale zh-CN)\r\n    ! Warning: `flutter` on your path resolves to D:\\program\\flutter\\bin\\flutter, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_3_19_0. Consider adding D:\\program\\flutter_3_19_0\\bin to the front of\r\n      your path.\r\n    ! Warning: `dart` on your path resolves to D:\\program\\flutter\\bin\\dart, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_3_19_0. Consider adding D:\\program\\flutter_3_19_0\\bin to the front of your\r\n      path.\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u221a] Chrome - develop for the web\r\n[!] Visual Studio - develop Windows apps (Visual Studio \u751f\u6210\u5de5\u5177 2022 17.5.5)\r\n    X Visual Studio is missing necessary components. Please re-run the Visual Studio installer for the \"Desktop development with C++\" workload, and include these components:\r\n        MSVC v142 - VS 2019 C++ x64\/x86 build tools\r\n         - If there are multiple build tool versions available, install the latest\r\n        C++ CMake tools for Windows\r\n        Windows 10 SDK\r\n[\u221a] Android Studio (version 2023.2)\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.3)\r\n[\u221a] Connected device (5 available)\r\n[\u221a] Network resources\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @equationl \r\nThis seems to be fixed on master channel as I see the result has been improved there. Could you switch to master channel and confirm?\r\n\r\n#### Stable 3.19.3\r\n\r\n```console\r\nWith isolate duration: 26995 (slower)\r\nWithout isolate duration: 25544\r\n```\r\n\r\n#### Master 3.21.0\r\n\r\n```console\r\nWith isolate duration: 27826\r\nWithout isolate duration: 31545 (slower)\r\n```\r\n\r\n```console\r\nWith isolate duration: 27831\r\nWithout isolate duration: 31451 (slower)\r\n```\r\n\r\n\r\n<details>\r\n<summary>Complete sample code<\/summary>\r\n\r\n```dart\r\nimport 'dart:io';\r\n\r\nimport 'package:flutter\/foundation.dart';\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:path_provider\/path_provider.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  int usingTime = 0;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            const CircularProgressIndicator(),\r\n            Text(\"Running time: $usingTime ms\"),\r\n            TextButton(onPressed: _runWithoutIsolate, child: const Text(\"Run without isolate\")),\r\n            TextButton(onPressed: _runWithIsolate, child: const Text(\"Run with isolate\"))\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n\r\n  void _runWithIsolate() async {\r\n    var savePath = await getTemporaryDirectory();\r\n\r\n    var duration = await compute((path) => _runTask(path), \"${savePath.path}\/test.log\");\r\n    print('With isolate duration: $duration');\r\n    if (mounted) {\r\n      setState(() {\r\n        usingTime = duration;\r\n      });\r\n    }\r\n  }\r\n\r\n  void _runWithoutIsolate() async {\r\n    var savePath = await getTemporaryDirectory();\r\n\r\n    var duration = _runTask(\"${savePath.path}\/test.log\");\r\n    print('Without isolate duration: $duration');\r\n\r\n    if (mounted) {\r\n      setState(() {\r\n        usingTime = duration;\r\n      });\r\n    }\r\n  }\r\n\r\n  static int _runTask(String savePath) {\r\n    var file = File(savePath);\r\n\t\tif(file.existsSync()) {\r\n\t\t\tfile.deleteSync();\r\n\t\t}\r\n\t\tfile = File(savePath);\r\n    var startTime = DateTime.now().millisecondsSinceEpoch;\r\n    for (var i = 0; i < 1000000; i++) {\r\n      file.writeAsStringSync(\"a\\n\", mode: FileMode.append);\r\n    }\r\n    return DateTime.now().millisecondsSinceEpoch - startTime;\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.42, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.42 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7ffd36cb6d (2 hours ago), 2024-03-19 21:04:25 -0400\r\n    \u2022 Engine revision 3f67bc531e\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-248.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D                         \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPhone (mobile)  \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop)  \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","It got fixed by slowing down without isolate aha. I think the problem here may be, dart uses different thread for i\/o service. I don't think the new isolate really does anything.","Yeah that seems to have worsen the timings :\/","@huycozy It's not work, When I upgradle to 3.19.3, It still slowlt than not using islolate:\r\n\r\nHere is the result :\r\n\r\n- Using isolate \r\n![release_with_isolate](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/61c1b282-99ac-43a5-85e8-f8463bd47892)\r\n\r\n- Not using isolate\r\n![release_without_isolate](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/e0a920d2-92d0-4665-80e8-7fda99d7f241)\r\n\r\nAnd this is my flutter docotor -v :\r\n\r\n<details open><summary>flutter doctor -v<\/summary>\r\n[!] Flutter (Channel stable, 3.19.3, on Microsoft Windows [\u7248\u672c 10.0.22621.3155], locale zh-CN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at D:\\program\\flutter_3_19_3\r\n    ! Warning: `flutter` on your path resolves to D:\\program\\flutter\\bin\\flutter, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_3_19_3. Consider adding D:\\program\\flutter_3_19_3\\bin to the front of \r\n      your path.\r\n    ! Warning: `dart` on your path resolves to D:\\program\\flutter\\bin\\dart, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_3_19_3. Consider adding D:\\program\\flutter_3_19_3\\bin to the front of your  \r\n      path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\DELL\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: D:\\AndroidStudio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    X Visual Studio is missing necessary components. Please re-run the Visual Studio installer for the \"Desktop development with C++\" workload, and include these components:\r\n        MSVC v142 - VS 2019 C++ x64\/x86 build tools\r\n         - If there are multiple build tool versions available, install the latest\r\n        C++ CMake tools for Windows\r\n        Windows 10 SDK\r\n\r\n[\u221a] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at D:\\AndroidStudio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.3)\r\n    \u2022 IntelliJ at D:\\program\\IntelliJ IDEA Community Edition 2022.3.3\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u221a] Connected device (4 available)\r\n    \u2022 M2007J1SC (mobile) \u2022 78cb57bd \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 Windows (desktop)  \u2022 windows  \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22621.3155]\r\n    \u2022 Chrome (web)       \u2022 chrome   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)         \u2022 edge     \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n<\/details>\r\n\r\nBy the way, I found why It's faster than almost 2x without isolate, Because I test in debug mode...\r\n\r\nBut when I switch to release mode (by run `flutter run --release`), The time very same now. But using isolate still slowly than not use. \r\n","sorry, I read it wrong, Here is using master channel result:\r\n\r\n- Using isolate\r\n![release_with_isolate2](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/0604e2d1-4735-42bf-893a-5344ff995cad)\r\n\r\n- Not use isolate\r\n![release_without_isolate2](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/a396608b-63ad-48b5-becf-3257f94cb6fd)\r\n\r\n\r\n<details open><summary>flutter doctor -v<\/summary>\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.61, on Microsoft Windows [\u7248\u672c 10.0.22621.3155], locale zh-CN)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.61 on channel master at D:\\program\\flutter_master\r\n    ! Warning: `flutter` on your path resolves to D:\\program\\flutter\\bin\\flutter, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_master. Consider adding D:\\program\\flutter_master\\bin to the front of\r\n      your path.\r\n    ! Warning: `dart` on your path resolves to D:\\program\\flutter\\bin\\dart, which is not inside your current Flutter SDK checkout at D:\\program\\flutter_master. Consider adding D:\\program\\flutter_master\\bin to the front of your\r\n      path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision e95df00605 (2 hours ago), 2024-03-20 20:11:11 -0400\r\n    \u2022 Engine revision 912c61f305\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-252.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\DELL\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: D:\\AndroidStudio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[!] Visual Studio - develop Windows apps (Visual Studio \u751f\u6210\u5de5\u5177 2022 17.5.5)\r\n    \u2022 Visual Studio at C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\r\n    \u2022 Visual Studio \u751f\u6210\u5de5\u5177 2022 version 17.5.33627.172\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n    X Visual Studio is missing necessary components. Please re-run the Visual Studio installer for the \"Desktop development with C++\" workload, and include these components:\r\n        MSVC v142 - VS 2019 C++ x64\/x86 build tools\r\n         - If there are multiple build tool versions available, install the latest\r\n        C++ CMake tools for Windows\r\n        Windows 10 SDK\r\n\r\n[\u221a] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at D:\\AndroidStudio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.3)\r\n    \u2022 IntelliJ at D:\\program\\IntelliJ IDEA Community Edition 2022.3.3\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u221a] Connected device (4 available)\r\n    \u2022 M2007J1SC (mobile) \u2022 78cb57bd \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 Windows (desktop)  \u2022 windows  \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22621.3155]\r\n    \u2022 Chrome (web)       \u2022 chrome   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)         \u2022 edge     \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n<\/details>\r\n\r\nLook it same.","In your example code, almost all the time is going to be I\/O handling and message passing. Maybe that does take a little longer coming from isolate v.s. main thread. But if you do all your i\/o at once, it may be faster. E.g. build up the StringBuffer in isolate, then do one writeAsStringSync. Instead of 1000000.","@moffatman But in my actually project code, I just decode a big picture file , do some work,  then encode back to file.\r\n\r\nIn this way , I just do twice I\/O handling and message passing, but it still very slowly than using main thread.\r\n\r\nHere my running time info:\r\n\r\n1. Using isolate:\r\n```text\r\nDecode picture file: 310 ms\r\nEdit some pixel: 706 ms\r\nEncode picture file\uff1a1224 ms\r\ntotal:  2241 ms\r\n```\r\n3.Not use isolate:\r\n\r\n```text\r\nDecode picture file: 286 ms\r\nEdit some pixel: 376 ms\r\nEncode picture file\uff1a343 ms\r\ntotal:  1011 ms\r\n```\r\n\r\nAt \"edit some pixel\" step, I just foreach decoded picture data, and replace some pixel data.","Isolate is not magic. It can run in another core of your device. So maybe you can do more things at the same time. But depending on your device number of CPUs and other tasks, it may just compete for the same processor resource with flutter main thread. \r\n\r\nNow, the benefit of isolate, it will allow flutter UI to continue without interruption, so the experience is smooth. But the total runtime may be increased, because before if all work is done in one cpu core, before [encode]=1011ms. Now, [encode+flutter build+flutter render]=2241ms. As the CPU is switching between different tasks. From your time above, you don't know the CPU time used in isolate, just the wall clock time. But isolate may not have dedicated cpu the whole time, it depends on Android scheduler.\r\n\r\nTo be sure about all these troubles, you could take a CPU profile from Android studio. Then it will show the CPU time used in each thread.","How should I got the thread CPU Time ?\r\n\r\nI just use \"The Flutter DevTools\", then get some data like this:\r\n\r\n![1](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/09201195-bbf8-436b-ae2d-ff8c5fe63bd6)\r\n\r\nThis is isolate witch I launcher 's flame chat.\r\nBut I don't know how to check it. \r\n\r\nAnd this is CPU profile from Android studio:\r\n\r\nWall clock time:\r\n\r\n![2](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/598d36d0-930d-44a4-afec-0cea12827a89)\r\n\r\nThread time:\r\n\r\n![3](https:\/\/github.com\/flutter\/flutter\/assets\/6501123\/59081a6f-f734-43a0-86a4-ad8960cb530c)\r\n\r\nBut which is flutter isolate thread?","Hmmm I think it is dartworker. But it looks like your dart profile is for 29 seconds, and the android profile is only 5 seconds. so hard to match it.","@equationl \r\nI checked this again on Android (on Flutter master channel), the issue indeed persists:\r\n\r\n```console\r\nWithout isolate duration: 20532\r\nWith isolate duration: 22658 (slower)\r\n```\r\n\r\nWhen I check this with a Dart program on macOS, the task (write data to file) is also running slower with Isolate:\r\n\r\n```console\r\nWithout isolate duration: 79289\r\nWith isolate duration: 83199 (slower)\r\n```\r\n\r\n<details>\r\n<summary>Sample code Dart program<\/summary>\r\n\r\n```dart\r\nimport 'dart:io';\r\nimport 'dart:isolate';\r\n\r\nvoid main(List<String> args) {\r\n  \/\/ _runWithIsolate();\r\n  _runWithoutIsolate();\r\n}\r\n\r\nvoid _runWithIsolate() async {\r\n  var duration = await Isolate.run(_runTask);\r\n  print('With isolate duration: $duration');\r\n}\r\n\r\nvoid _runWithoutIsolate() async {\r\n  var duration = await _runTask();\r\n  print('Without isolate duration: $duration');\r\n}\r\n\r\nFuture<int> _runTask() async {\r\n  Directory current = Directory.current;\r\n  var file = File('${current.path}\/test.log');\r\n  var startTime = DateTime.now().millisecondsSinceEpoch;\r\n  for (var i = 0; i < 1000000; i++) {\r\n    file.writeAsStringSync(\"a\\n\", mode: FileMode.append);\r\n  }\r\n  return DateTime.now().millisecondsSinceEpoch - startTime;\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\nLabeling this for further insights."],"labels":["engine","perf: speed","has reproducible steps","team-engine","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] Color issue with BlendMode.screen when using `Gradient.linear` shader in Paint","body":"### Steps to reproduce\r\n\r\nI can still replay the issue B at #141160 .\r\nFlutter version 3.19.3 and master channel 3.21.0-11.0.pre.42 .\r\nCode list below.\r\n\r\n### Expected results\r\n\r\nGreen circle.\r\n<img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/11647836\/49173218-afc1-48f3-86c8-f68cd3aa3629\">\r\n\r\n### Actual results\r\n\r\nblack circle.\r\n<img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/11647836\/da2f271a-852e-453b-900d-f8b80b909f32\">\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'dart:ui' as ui;\r\n\r\nvoid main() {\r\n  runApp(const MyWidget());\r\n}\r\n\r\nclass MyWidget extends StatelessWidget {\r\n  const MyWidget({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: Scaffold(\r\n        body: Align(\r\n          alignment: Alignment.center,\r\n          child: CustomPaint(\r\n            size: Size.infinite,\r\n            painter: BubbleLayerPainter(),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass BubbleLayerPainter extends CustomPainter {\r\n  const BubbleLayerPainter();\r\n  @override\r\n  void paint(Canvas canvas, Size size) {\r\n    final colorBlur = Paint()\r\n      ..style = PaintingStyle.fill\r\n      ..maskFilter = const MaskFilter.blur(BlurStyle.normal, 10)\r\n      ..color = Colors.black;\r\n\r\n    final center = size.center(Offset.zero);\r\n    canvas.drawCircle(center, 128, colorBlur);\r\n    final surface = Paint()\r\n      ..blendMode = BlendMode.screen\r\n      ..shader = ui.Gradient.linear(\r\n         Offset.zero, Offset(0, size.height), [Colors.green, Colors.green]);\r\n    canvas.drawPaint(surface);\r\n  }\r\n\r\n  @override\r\n  bool shouldRepaint(BubbleLayerPainter oldDelegate) {\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n<br\/>\r\n\r\n| Impeller On | Impeller Off |\r\n| --------------- | --------------- |\r\n<img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/11647836\/da2f271a-852e-453b-900d-f8b80b909f32\"> | <img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/11647836\/49173218-afc1-48f3-86c8-f68cd3aa3629\">\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 13.6 22G120 darwin-arm64, locale zh-Hans-CN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/abc\/fvm\/versions\/stable\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (12 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/zhx\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode_15.2.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.85.20240301\r\n\r\n[\u2713] Connected device (1 available)\r\n    \u2022 iPhone (mobile) \u2022 ___ \u2022 ios \u2022 iOS 16.5.1 20F75\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @zhxst \r\nI see the sample code is the same as https:\/\/github.com\/flutter\/flutter\/issues\/141160. There were two issues there (A and B). The sample code above is for case B which should be on a different issue. I update the code below for issue A. \r\n\r\nBut I see the issue disappeared on Flutter master channel. I'm not sure which PR fixed this. Could you try below sample code on master channel and confirm?\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'dart:ui' as ui;\r\n\r\nvoid main() {\r\n  runApp(const MyWidget());\r\n}\r\n\r\nclass MyWidget extends StatelessWidget {\r\n  const MyWidget({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: Scaffold(\r\n        body: Align(\r\n          alignment: Alignment.center,\r\n          child: CustomPaint(\r\n            size: Size.infinite,\r\n            painter: BubbleLayerPainter(),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass BubbleLayerPainter extends CustomPainter {\r\n  const BubbleLayerPainter();\r\n  @override\r\n  void paint(Canvas canvas, Size size) {\r\n    final colorBlur = Paint()\r\n      ..style = PaintingStyle.fill\r\n      ..maskFilter = const MaskFilter.blur(BlurStyle.normal, 10)\r\n      ..color = Colors.black;\r\n\r\n    final center = size.center(Offset.zero);\r\n    canvas.drawCircle(center, 128, colorBlur);\r\n    final surface = Paint()\r\n      ..blendMode = BlendMode.screen\r\n      ..color = Colors.green;\r\n    \/\/ ..shader = ui.Gradient.linear(\r\n    \/\/    Offset.zero, Offset(0, size.height), [Colors.green, Colors.green]);\r\n    canvas.drawPaint(surface);\r\n  }\r\n\r\n  @override\r\n  bool shouldRepaint(BubbleLayerPainter oldDelegate) {\r\n    return true;\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.42, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.42 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7ffd36cb6d (2 hours ago), 2024-03-19 21:04:25 -0400\r\n    \u2022 Engine revision 3f67bc531e\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-248.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D                         \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPhone (mobile)  \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop)  \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","> Hi @zhxst I see the sample code is the same as #141160. There were two issues there (A and B). The sample code above is for case B which should be on a different issue. I update the code below for issue A.\r\n> \r\n> But I see the issue disappeared on Flutter master channel. I'm not sure which PR fixed this. Could you try below sample code on master channel and confirm?\r\n> \r\n> Sample code\r\n> flutter doctor -v (stable and master)\r\n\r\nIndeed issue A is Fixed, but Issue B is not.\r\nSo I create this issue for issue B.\r\nMaybe a different title is better ?","Yes, please also help to update the description (text, results, and screenshots) as well to align with issue B.","This is exactly the code and screenshot for issue B.\r\nAnd I have confirmed today with master channel 3.21.0-12.0.pre.36.","You are right, I also can reproduce issue B:\r\n\r\n### Actual result\r\n- On stable 3.19.3: a white screen on screen.\r\n- On master 3.21.0: a black blurred circle on screen.\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["engine","has reproducible steps","e: impeller","team-engine","found in release: 3.19","found in release: 3.21"]},{"title":"Popscope doesn't work on flutter web ","body":"### Steps to reproduce\r\n\r\npopScope in project Flutter web, click back \r\n\r\n### Expected results\r\n\r\nI hope he respects popscope and doesn't return to the page\r\n\r\n### Actual results\r\n\r\ndont work\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output\r\n\u276f flutter doctor -v\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [vers\u00c6o 10.0.22631.3296], locale pt-BR)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\Users\\eduar\\.puro\\envs\\stable\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\eduar\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = C:\\Users\\eduar\\AppData\\Local\\Android\\Sdk\r\n    \u2022 ANDROID_SDK_ROOT = C:\\Users\\eduar\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.9.3)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.9.34701.34\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u221a] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\eduar\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [vers\u00c6o 10.0.22631.3296]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.131\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n\r\n<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["@eduardohr-muniz \r\nCan you provide `flutter doctor -v` and a complete minimal but runnable code sample that shows actual behavior against expected you are looking for ?\r\n","Good morning, I'm sorry I forgot to add it.\r\n\r\nconsider done","> and a complete minimal but runnable code sample that shows actual behavior against expected you are looking for ?\r\n\r\nAnd this as well."],"labels":["waiting for customer response","in triage"]},{"title":"Tappable\/clickable semantic nodes should have reasonable fallback role","body":"Some framework widgets, such as [ExpansionTile](https:\/\/github.com\/flutter\/flutter\/issues\/143852) and `Tab` (via [InkWell](https:\/\/github.com\/flutter\/flutter\/blob\/5c54509ad90ae7d9242a7baa1a43e6eeed9eaa75\/packages\/flutter\/lib\/src\/material\/ink_well.dart#L1327)), and widgets authored by developers, would add a tap action to their respective semantics node, but would not pick a concrete role for the node, such as button, checkbox, radiobox, text field, combobox, link, etc.\r\n\r\nOn the web this translates to an element with a `click` event listener but without an ARIA `role` attribute. Some screen readers would look for the listener and say \"double-tap to activate\" (or whatever is appropriate for the form factor of the device). Some will not communicate that the node is interactive (https:\/\/github.com\/flutter\/flutter\/issues\/143852), prompting custom solutions such as [this](https:\/\/github.com\/flutter\/flutter\/blob\/4d5e675253f21e6405bc325e17cca5221c1d654b\/packages\/flutter_localizations\/lib\/src\/l10n\/generated_material_localizations.dart#L7642).\r\n\r\n## Proposal\r\n\r\nWhen a tap action is present the framework always assigns a role to the node. If the developer does not specify one, the framework fallback to the most reasonable default (e.g. \"button\"). For the cases where it's preferable to communicate the role using a custom hint (like in the `ExpansionTile` case) we introduce a special role for that, in which case the engine would know that the role is communicated using means other than the ARIA role.\r\n\r\nTaking this proposal to extreme, perhaps we should introduce a formal concept of \"role\" in the semantics tree. Currently the role is described using various flags that the engine pattern-matches on to assign it a formal role internally. [Here's how the web engine does it](https:\/\/github.com\/flutter\/engine\/blob\/dce639a4c453bc5682a630918b7606567243059e\/lib\/web_ui\/lib\/src\/engine\/semantics\/semantics.dart#L1577). A formal role enum could improve the following:\r\n\r\n- Remove the guesswork from the engine.\r\n- All engine implementations would be in agreement about what role a particular semantics node plays.\r\n- Enable better validation\/testing of nodes. For example, should a checkbox have the `paste` action?\r\n- Allow the engine to pick the best fallback when there platform does not directly support a role. Let's say we want to have a special role for `Tab`. ARIA does not define a formal \"tab\" role. However, there might be a combination of ARIA attributes that approximate it quite well. Right now, there's no way to tell if something is a tab, and the web engine just falls back to `GenericRole` that's also used for paragraphs of static text (which also doesn't have a role, and is pattern-matched onto \"leaf node with a label\").","comments":["Another use-case for a formal concept of role is when merging framework-side semantics node it would provide an unambiguous signal when two nodes can and cannot be merged. Essentially, if two nodes each has a role, the nodes are not merged. For example, something that claims to be a \"button\" would not be merged with something that claims to be a \"paragraph\". Today, they might."],"labels":["framework","a: accessibility","P2","team-framework","triaged-framework"]},{"title":"Add the `shared_preferences_tools` extension to the `shared_preferences` package","body":"A DevTools extension for the `shared_preferences` package has been published as `package:shared_preferences_tools`: https:\/\/pub.dev\/packages\/shared_preferences_tools.\r\n\r\nTo bring the most value to users of the `shared_preferences` package, we should consider moving this extension into the package it is intended to be used with (`package:shared_preferences`).\r\n\r\nAccompanying issue on the `shared_preferences_tools` repo: https:\/\/github.com\/adsonpleal\/shared_preferences_tools\/issues\/2","comments":["I'm not very familiar with the extension structure; I assume this would be both https:\/\/github.com\/adsonpleal\/shared_preferences_tools\/tree\/main\/packages\/shared_preferences_tools and https:\/\/github.com\/adsonpleal\/shared_preferences_tools\/tree\/main\/packages\/shared_preferences_tools_devtools_extension? The latter has some significant third-party dependencies.","DevTools extension docs: https:\/\/pub.dev\/packages\/devtools_extensions. \r\n\r\nFor a package to provide a DevTools extension, it needs the following content:\r\n```\r\npackage_foo\/\r\n  extension\/\r\n    devtools\/\r\n      build\/  # precompiled assets of the extension flutter web app\r\n      config.yaml. # configuration file that tells DevTools how to display the extension\r\n```\r\n\r\nSo for `shared_preferences` to provide a DevTools extension, only the pre-compiled Flutter web app for (https:\/\/github.com\/adsonpleal\/shared_preferences_tools\/tree\/main\/packages\/shared_preferences_tools_devtools_extension) would need to be included in `shared_preferences\/extension\/devtools\/build`, not the source code itself. That being said, we would still want to review the code before shipping the extension with a first party package.\r\n\r\nDeveloping the source code outside of the flutter\/packages repo could make this a bit odd to maintain, so we may want to bring the source code into this repo as well, even if we don't publish it or roll it into google3.\r\n\r\nIs the concern about bringing new dependencies into the Flutter SDK that are not allowed? This wouldn't be an issue since `shared_preferences_tools_devtools_extension` would not be published nor depended upon by any other package. ","> Developing the source code outside of the flutter\/packages repo could make this a bit odd to maintain, so we may want to bring the source code into this repo as well, even if we don't publish it or roll it into google3.\r\n\r\nI would definitely not want to be shipping precompiled output of code that we don't control. That has significant chain of trust and maintainability issues.\r\n\r\n> Is the concern about bringing new dependencies into the Flutter SDK that are not allowed? This wouldn't be an issue since `shared_preferences_tools_devtools_extension` would not be published nor depended upon by any other package.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/wiki\/Contributing-to-Plugins-and-Packages#dependencies summarizes the concerns with dependencies in flutter\/packages."],"labels":["c: new feature","p: shared_preferences","package","c: proposal","team-ecosystem"]},{"title":"InteractiveViewer gets stuck when zoomed in and unable to zoom out if used with Clip.none","body":"### Steps to reproduce\r\n\r\n1. Run the code sample.\r\n2. Zoom in the image to the max scale.\r\n3. You can move around the image but when you try to zoom out you get stuck.\r\n\r\n### Expected results\r\n\r\nI expect the zoom out to work normally.\r\n\r\n### Actual results\r\n\r\nI get stuck at a zoomed-in position.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n\/\/ Copyright 2019 the Dart project authors. All rights reserved.\r\n\/\/ Use of this source code is governed by a BSD-style license\r\n\/\/ that can be found in the LICENSE file.\r\n\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() => runApp(const MyApp());\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      debugShowCheckedModeBanner: false,\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  final String title;\r\n\r\n  const MyHomePage({\r\n    super.key,\r\n    required this.title,\r\n  });\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: InteractiveViewer(\r\n          clipBehavior: Clip.none,\r\n          child: Image.network(\r\n            'https:\/\/storage.googleapis.com\/cms-storage-bucket\/images\/Cupid_Dash_BlueBG.width-635.png',\r\n            \/\/ If the image cover the screen size, it zoom-out normally.\r\n            \/\/ height: MediaQuery.of(context).size.height,\r\n            \/\/ fit: BoxFit.fitHeight,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\nI've tested it on both Android and iOS, Here's a video of testing it on Android Pixel 7:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/70890146\/1511fc1a-943a-4760-bab1-9430f86c6f61\r\n\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.16.0, on macOS 14.4 23E214 darwin-arm64, locale en-EG)\r\n    \u2022 Flutter version 3.16.0 on channel stable at \/Users\/bx777\/.puro\/envs\/locals\/flutter\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.3.0\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout\r\n      at \/Users\/bx777\/.puro\/envs\/locals\/flutter. Consider adding \/Users\/bx777\/.puro\/envs\/locals\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision db7ef5bf9f (4 months ago), 2023-11-15 11:25:44 -0800\r\n    \u2022 Engine revision 74d16627b9\r\n    \u2022 Dart version 3.2.0\r\n    \u2022 DevTools version 2.28.2\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/bx777\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A240d\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Ahmed\u2019s iPhone (mobile) \u2022 00008020-00155D412243002E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)         \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)            \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\nAlso, tried on master:\r\n```console\r\n[!] Flutter (Channel [user-branch], 3.19.0-9.0.pre.204, on macOS 14.4 23E214 darwin-arm64, locale en-EG)\r\n    ! Flutter version 3.19.0-9.0.pre.204 on channel [user-branch] at \/Users\/bx777\/.puro\/envs\/master\/flutter\r\n      Currently on an unknown channel. Run `flutter channel` to switch to an official channel.\r\n      If that doesn't fix the issue, reinstall Flutter by following instructions at https:\/\/flutter.dev\/docs\/get-started\/install.\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.3.0\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout\r\n      at \/Users\/bx777\/.puro\/envs\/master\/flutter. Consider adding \/Users\/bx777\/.puro\/envs\/master\/flutter\/bin to the front of your path.\r\n    ! Upstream repository unknown source is not a standard remote.\r\n      Set environment variable \"FLUTTER_GIT_URL\" to unknown source to dismiss this error.\r\n    \u2022 Framework revision efb1346767 (8 weeks ago), 2024-01-27 14:07:24 -0500\r\n    \u2022 Engine revision f3d48be766\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-81.0.dev)\r\n    \u2022 DevTools version 2.31.0\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/bx777\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A240d\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)            \r\n    \u2022 Ahmed\u2019s iPhone (mobile) \u2022 00008020-00155D412243002E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)         \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)            \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @AhmedLSayed9, what platform(s) are you experiencing this issue on? \r\n\r\nIt also appears you're using an older version of flutter. Can you upgrade to the latest version of flutter stable (3.19.3) to see if you still experience this issue? \r\n\r\nIf you do, please provide the updated output of flutter doctor -v. \r\n\r\nThank you","Hi @danagbemava-nc,\r\n\r\nI've tested it on newer releases and it's still the same \"I've included flutter doctor at the issue\".\r\n\r\nAlso, I've tested it on both Android (Emulator) and iOS (Physical device). I've included a video of testing it on Android Pixel 7.","Hi @AhmedLSayed9, it appears that this may be working as designed (?). See the doc for InteractiveViewer on the clipBehaviour https:\/\/api.flutter.dev\/flutter\/widgets\/InteractiveViewer-class.html","Alright, I think this works as described.\r\n\r\nI was looking for a way to scale an image in a fullscreen mode, without scrolling outside the image boundaries when it's zoomed in.\r\n\r\nUpdating the above sample to the following:\r\n```dart\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text(widget.title),\r\n      ),\r\n      body: InteractiveViewer(\r\n        child: Center(\r\n          child: Image.network(\r\n            'https:\/\/storage.googleapis.com\/cms-storage-bucket\/images\/Cupid_Dash_BlueBG.width-635.png',\r\n            \/\/ If the image cover the screen size, it zoom-out normally.\r\n            \/\/ height: MediaQuery.of(context).size.height,\r\n            \/\/ fit: BoxFit.fitHeight,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n```\r\nwill fix the zoom in\/out ability but will scroll outside the image boundaries:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/70890146\/b17b4821-5154-4106-8de6-11acb3dafe29\r\n\r\nThis is expected but undesired.\r\n\r\nI think InteractiveViewer should support a better way to interact with an image in a fullscreen mode.\r\nIt's a very common use case and it can be found in the phone's images gallery or any social media app.","Hi @AhmedLSayed9, can you take a look at https:\/\/github.com\/flutter\/flutter\/issues\/58042 to see if it similar to what you want to achieve? ","I've also observed the same issue.\r\n\r\nIt feels like the `InteractiveViewer` \"gets stuck\" and it's no longer possible to zoom out, which is undesired.\r\n\r\nAs a workaround, I've used `SizedBox.expand` in my code, and the issue no longer occurs:\r\n\r\n```dart\r\nSizedBox.expand(\r\n  child: InteractiveViewer(\r\n    panEnabled: true,\r\n    minScale: 1,\r\n    maxScale: 3,\r\n    child: CustomCachedNetworkImage(\r\n      imageUrl: imageUrl,\r\n    ),\r\n  ),\r\n)\r\n```\r\n\r\nHowever, one drawback is that at the max zoom scale, the image itself can go out of bounds entirely when panning. This can happen when the image has an aspect ratio of 16:9 but the container view is tall (like on mobile).","> Hi @AhmedLSayed9, can you take a look at #58042 to see if it similar to what you want to achieve?\r\n\r\nIt's about an overscroll feature but this issue is about \"define panning boundaries\". I think they're related but not the same.\r\n\r\nDespite this issue is about fixing the zoom out stuck thing (which is good if fixed), I don't think that's what we're looking for here.\r\n\r\nWe'll still not be able to start the zoom from outside the image boundaries. i.e: If the image height is small, you've to make the two fingers too close inside the image boundaries to zoom in (which is not the case with Google\/Apple photos or other popular apps).\r\n\r\nWhat we're looking for is the ability to define a pan area different from the zoom area. Check for example the iPhone photos:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/70890146\/edd4ed70-cb3a-4ab1-b1ae-08137043eafd\r\n\r\nYou can start the zoom from anywhere but you can only move within the image boundaries.\r\n\r\n_Note_: We can also notice the overscroll feature at 00:12 sec"],"labels":["in triage"]},{"title":"[flutter_tools] PathNotFoundException trying to open template_manifest.json (path cannot be found)","body":"On 3.19.3\r\n\r\n```\r\nThread 0 main threadPathNotFoundException: PathNotFoundException: Cannot open file, path = 'C:\\Development\\flutter\\packages\\flutter_tools\\templates\\template_manifest.json' (OS Error: The system cannot find the path specified.\r\n, errno = 3)\r\nat _File.throwIfError(file_impl.dart:675)\r\nat _File.openSync(file_impl.dart:490)\r\nat _File.readAsBytesSync(file_impl.dart:574)\r\nat _File.readAsStringSync(file_impl.dart:624)\r\nat ForwardingFile.readAsStringSync(forwarding_file.dart:99)\r\nat ErrorHandlingFile.readAsStringSync.<anonymous closure>(error_handling_io.dart:217)\r\nat _runSync(error_handling_io.dart:587)\r\nat ErrorHandlingFile.readAsStringSync(error_handling_io.dart:216)\r\nat CreateBase._computeTemplateManifest(create_base.dart:670)\r\nat CreateBase._templateManifest(create_base.dart:657)\r\nat CreateBase._templateManifest(create_base.dart)\r\nat CreateBase.renderMerged(create_base.dart:481)\r\nat CreateBase.generateApp(create_base.dart:506)\r\nat CreateCommand.runCommand(create.dart:361)\r\nat <asynchronous gap>(async)\r\nat FlutterCommand.run.<anonymous closure>(flutter_command.dart:1389)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat CommandRunner.runCommand(command_runner.dart:212)\r\nat <asynchronous gap>(async)\r\nat FlutterCommandRunner.runCommand.<anonymous closure>(flutter_command_runner.dart:355)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat FlutterCommandRunner.runCommand(flutter_command_runner.dart:295)\r\nat <asynchronous gap>(async)\r\nat run.<anonymous closure>.<anonymous closure>(runner.dart:119)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat main(executable.dart:90)\r\nat <asynchronous gap>(async)\r\n```","comments":[],"labels":["c: crash","P2","team-tool","triaged-tool"]},{"title":"Glyph Atlas Padding Not Correctly Handled in `typographer_context_stb.cc`.","body":"### Steps to reproduce\n\nThis is more of an analytical code issue, but the issue is visible in generated glyph atlases using the `stb` implementation.\r\n\r\nTo reproduce:\r\n\r\n1. Use the `stb` text atlas implementation.\r\n2. In come situations characters will appear like they have their bottoms cut off.\r\n\r\nUsing `renderdoc` on the subsequent binary, one can see the Glyphs in the atlas are not laid out correctly in relation to the padding between glyphs.\n\n### Expected results\n\nGlyphs shouldn't be cut off along the bottom.\n\n### Actual results\n\nGlyphs sometimes cut off along their bottom.\n\n### Code sample\n\nI believe the issue is in the following section of code:\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n   if (!has_color || DISABLE_COLOR_FONT_SUPPORT) {\r\n     stbtt_MakeGlyphBitmap(typeface_stb->GetFontInfo(), output,\r\n                          location.size.width - kPadding,\r\n                          location.size.height - kPadding,\r\n                           bitmap->GetRowBytes(), scale_x, scale_y, glyph.index);\r\n```\r\n\r\n<\/details>\r\n\r\nNote the `- kPadding`.\r\n\r\nAt this point, the `location` used is the entry describing the glyph in the atlas, but it does not include padding, so the subtraction of `kPadding` is not necessary.\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nHere's a screenshot of some text rendered with the incorrect code:\r\n![Screenshot from 2024-03-19 11-16-01](https:\/\/github.com\/flutter\/flutter\/assets\/2950232\/b6c3cfb6-2c0b-430a-b58e-fea4769493fe)\r\n\r\nAnd a screenshot of some glyphs in the atlas via renderdoc. Note there is double the paddng between characters and some characters (like the \"i\") are clipped along one side.\r\n\r\n\r\n![Screenshot from 2024-03-19 11-17-09](https:\/\/github.com\/flutter\/flutter\/assets\/2950232\/14ca8f84-bf6c-4a2f-9ce8-f9173874ba53)\r\n\r\n\r\nCorrecting the code the text is improved (though in our case still not strictly correct)\r\n\r\n\r\n![Screenshot from 2024-03-19 11-19-44](https:\/\/github.com\/flutter\/flutter\/assets\/2950232\/2dc85902-6629-4a65-b2c6-891838ecbe61)\r\n\r\nAnd lastly, examining the glyph atlas using `renderdoc` with a fix in place, the layout of glyphs is improved:\r\n \r\n![Screenshot from 2024-03-19 11-10-54](https:\/\/github.com\/flutter\/flutter\/assets\/2950232\/d9507529-2288-4780-b6b1-576c2f0b776f)\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Keeping the issue open and labeling for team's input \/ tracking.\r\n","Thanks again for looking at this @darshankawar.\r\n\r\nCC'ing @bdero and @chinmaygarde on this.\r\n\r\nI provided some of the original `stb` support so I believe this silly discrepancy was just my fault.\r\n\r\nI'm tracking one more bug in the same `typographer_context_stb.cc` related what seems like a bug in `stb` (the scaling it provides for glyphs appears to be wrong) but I may file that separately.","Oh right, I might just put up a fix for this in the next couple of days. It's super trivial and I believe well justified."],"labels":["engine","team-engine"]},{"title":"[web] Remove multi-Surface rendering for Firefox and Safari once they have efficient support for `transferToImageBitmap`\/`transferFromImageBitmap`","body":"### Use case\n\nFlutter Web has adopted a rendering strategy making use of an `OffscreenCanvas` which acts as a WebGL surface for Skia to render to. The rendering is then displayed to the user by calling `transferToImageBitmap` to create a `BitmapImage` from the contents of the `OffscreenCanvas`, and then by calling `transferFromImageBitmap` on a `bitmaprenderer` canvas in the DOM, which is shown to the user. There may be more than one `bitmaprenderer` canvas (for example, if there are platform views in the Flutter scene which require overlay canvases), but there is only one `OffscreenCanvas` (and therefore only one WebGL context). Having only a single WebGL context allows Flutter Web to eliminate an entire class of bugs arising from improperly copying GL resources between more than one GL context.\r\n\r\nUsing `transferToImageBitmap`\/`transferFromImageBitmap` is very fast on Chrome, since it just uses a texture saved on the GPU to transfer the rendering from the `OffscreenCanvas` to the `bitmaprenderer` canvas. However, on Firefox and Safari, calling `transferToImageBitmap` is significantly slower, because `transferToImageBitmap` incurs a very expensive call to read all of the pixels in the canvas to create the bitmap image. In practice, this made rendering using `transferToImageBitmap` untenable on Firefox and Safari since it caused considerable jank. So, on Firefox and Safari we have to fall back on an old (and bug-prone) rendering strategy using many WebGL-backed canvases.\n\n### Proposal\n\nThis issue tracks the bugs in Firefox and Safari, which are aware of the performance issues with `transferToImageBitmap` and working on addressing them.\r\n\r\nFirefox issue: https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1788206\r\n\r\nSafari issue: https:\/\/bugs.webkit.org\/show_bug.cgi?id=234920 and https:\/\/bugs.webkit.org\/show_bug.cgi?id=267291\r\n\r\nOnce the performance issues are addressed in Firefox and Safari, we can remove the alternate multi-surface rendering strategy and keep only the `OffscreenCanvas`-based strategy.","comments":["Update:\r\n\r\nMozilla requested a built Flutter app to help them see how Flutter Web makes use of `createImageBitmap`\/`transferToImageBitmap`: https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1788206\r\n\r\nI uploaded a build of the example app and pointed to where in the code we use `createImageBitmap`"],"labels":["c: performance","c: rendering","e: web_canvaskit","browser: safari-macos","browser: firefox","P2","dependency: firefox","browser: safari-ios","e: web_skwasm","team-web","triaged-web"]},{"title":"SliverAppBar in NestedScrollView covers the body","body":"### Steps to reproduce\r\n\r\nApply the following;\r\nThe body must be a scrollable list that allows you to scroll down;\r\nThe app bar must exist and be non-0 size\r\n```\r\nScaffold(\r\n      appBar: null,\r\n      body: NestedScrollView(\r\n        physics: const NeverScrollableScrollPhysics(),\r\n        headerSliverBuilder: (context, innerBoxIsScrolled) {\r\n          return [\r\n            SliverAppBar(\r\n              surfaceTintColor: Colors.blue,\r\n              backgroundColor: Colors.red,\r\n              title: appBar, \/\/ your app bar here, any non-0 app bar will reproduce issue\r\n              centerTitle: true,\r\n              floating: true, \/\/IMPORTANT\r\n              snap: true, \/\/IMPORTANT\r\n              automaticallyImplyLeading: false,\r\n              forceElevated: innerBoxIsScrolled,\r\n              elevation: 0,\r\n            ),\r\n          ];\r\n        },\r\n        body: SafeArea(\r\n          child: Container(\r\n            margin: defaultMargin\r\n                ? context.blockMargin.copyWith(top: 0, bottom: 0)\r\n                : EdgeInsets.zero,\r\n            padding: defaultPadding\r\n                ? context.blockPadding.copyWith(top: 0, bottom: 0)\r\n                : EdgeInsets.zero,\r\n            width: context.blockSize.width,\r\n            child: body,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n```\r\nIn Flutter web only (works on mobile) scroll down, and then scroll back up. Notice the app bar covers top the top of the body, when in reality it should shift the body downward (as it does on mobile).\r\n\r\n### Expected results\r\n\r\nIn Flutter Web, the app bar will push the body down when it appears upon scrolling up.\r\n\r\n### Actual results\r\n\r\nWhen the app bar reappears, the body is not shifted downwards (as it is on mobile).\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nScaffold(\r\n      appBar: null,\r\n      body: NestedScrollView(\r\n        physics: const NeverScrollableScrollPhysics(),\r\n        headerSliverBuilder: (context, innerBoxIsScrolled) {\r\n          return [\r\n            SliverAppBar(\r\n              surfaceTintColor: Colors.blue,\r\n              backgroundColor: Colors.red,\r\n              title: appBar, \/\/ your app bar here, any non-0 app bar will reproduce issue\r\n              centerTitle: true,\r\n              floating: true, \/\/IMPORTANT\r\n              snap: true, \/\/IMPORTANT\r\n              automaticallyImplyLeading: false,\r\n              forceElevated: innerBoxIsScrolled,\r\n              elevation: 0,\r\n            ),\r\n          ];\r\n        },\r\n        body: SafeArea(\r\n          child: Container(\r\n            margin: defaultMargin\r\n                ? context.blockMargin.copyWith(top: 0, bottom: 0)\r\n                : EdgeInsets.zero,\r\n            padding: defaultPadding\r\n                ? context.blockPadding.copyWith(top: 0, bottom: 0)\r\n                : EdgeInsets.zero,\r\n            width: context.blockSize.width,\r\n            child: body,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n```\r\n\r\n<\/details>\r\n- apply a scrollable body that will allow you to scroll to recreate the issue\r\n- apply any non-0 app bar\r\n\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\nNotice the top part of the body is covered.\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n<img width=\"1349\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/5386694\/1429f7d8-f20b-4de2-be40-26b0f03b0c8b\">\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.16.0, on macOS 13.5.1 22G90 darwin-arm64, locale en-US)\r\n[\u2717] Android toolchain - develop for Android devices\r\n    \u2717 Unable to locate Android SDK.\r\n      Install Android Studio from: https:\/\/developer.android.com\/studio\/index.html\r\n      On first launch it will assist you in installing the Android SDK components.\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for detailed instructions).\r\n      If the Android SDK has been installed to a custom location, please use\r\n      `flutter config --android-sdk` to update to that location.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 14.3.1)\r\n[\u2713] Chrome - develop for the web\r\n[!] Android Studio (not installed)\r\n[\u2713] VS Code (version 1.87.1)\r\n[\u2713] Connected device (2 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 2 categories.```\r\n\r\n<\/details>\r\n","comments":["Hi @kornha \r\nYour demo doesn't seem to be clear. Could you please share the demo (video\/gif) illustrating the issue corresponding to your sample code? \r\n\r\nI completed your sample as below but can't see the issue:\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/f4bfea4a-0d44-4bb1-982f-00d89545679d\r\n<\/details>\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: NewWidget(),\r\n    ),\r\n  );\r\n}\r\n\r\nclass NewWidget extends StatelessWidget {\r\n  const NewWidget({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: null,\r\n      body: NestedScrollView(\r\n        physics: const NeverScrollableScrollPhysics(),\r\n        headerSliverBuilder: (context, innerBoxIsScrolled) {\r\n          return [\r\n            SliverAppBar(\r\n              surfaceTintColor: Colors.blue,\r\n              backgroundColor: Colors.red,\r\n              title: AppBar(\r\n                title: const Text('title'),\r\n              ), \/\/ your app bar here, any non-0 app bar will reproduce issue\r\n              centerTitle: true,\r\n              floating: true, \/\/IMPORTANT\r\n              snap: true, \/\/IMPORTANT\r\n              automaticallyImplyLeading: false,\r\n              forceElevated: innerBoxIsScrolled,\r\n              elevation: 0,\r\n            ),\r\n          ];\r\n        },\r\n        body: SafeArea(\r\n          child: SingleChildScrollView(\r\n            child: Container(\r\n              height: 1500,\r\n              width: 200,\r\n              color: Colors.amber,\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\nAlso, I'm the latest Flutter stable channel 3.19.3. You can also try upgrading your Flutter SDK and retry.","If you put a text widget aligned to the very top of you container, scroll down and then back up, what happens? Is it covered?\r\nhere is a capture of the issue:\r\n![licecap](https:\/\/github.com\/flutter\/flutter\/assets\/5386694\/f8b397d6-16d1-432a-990f-56054242f47d)\r\n","After adding a Text to the head of body, I can see the issue. It also occurs on Android as well. On web, it's easier to reproduce, though.\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\n| Android | Web |\r\n| --------------- | --------------- |\r\n<video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/2928bc89-5226-498f-9054-b0c96a717684\"\/> | <video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/de76119a-91be-4247-a0ce-db68433ad218\"\/>\r\n<\/details>\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: NewWidget(),\r\n    ),\r\n  );\r\n}\r\n\r\nclass NewWidget extends StatelessWidget {\r\n  const NewWidget({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: null,\r\n      body: NestedScrollView(\r\n        physics: const NeverScrollableScrollPhysics(),\r\n        headerSliverBuilder: (context, innerBoxIsScrolled) {\r\n          return [\r\n            SliverAppBar(\r\n              surfaceTintColor: Colors.blue,\r\n              backgroundColor: Colors.red,\r\n              title: AppBar(\r\n                title: const Text('title'),\r\n              ), \/\/ your app bar here, any non-0 app bar will reproduce issue\r\n              centerTitle: true,\r\n              floating: true, \/\/IMPORTANT\r\n              snap: true, \/\/IMPORTANT\r\n              automaticallyImplyLeading: false,\r\n              forceElevated: innerBoxIsScrolled,\r\n              elevation: 0,\r\n            ),\r\n          ];\r\n        },\r\n        body: SafeArea(\r\n          child: SingleChildScrollView(\r\n            child: Container(\r\n              height: 1500,\r\n              width: 200,\r\n              color: Colors.amber,\r\n              child: const Text('data'),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\n"],"labels":["framework","f: scrolling","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"`std::reinterpret_pointer_cast` Not Supported in C++20 on Android NDK 35.2","body":"### Steps to reproduce\n\n(this is a little obscure but I'll do the best I can)\r\n1. Cross compile for Android using Android NDK 35.2. I'm using the impeller-cmake project to do this for our Rust wrapper.\r\n2. Compilation will fail on `typeographer_context_stb.cc` for lines like the following:\r\n\r\n```\r\n  std::shared_ptr<TypefaceSTB> typeface_stb =\r\n      std::reinterpret_pointer_cast<TypefaceSTB>(typeface);\r\n```\n\n### Expected results\n\nShould properly compile.\n\n### Actual results\n\nCompilation failure.\r\n\r\nSee the `logs` section below for full `clang` invocation and error.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n\/home\/johnoneil\/Android\/Sdk\/ndk\/25.2.9519653\/toolchains\/llvm\/prebuilt\/linux-x86_64\/bin\/clang++ --target=x86_64-none-linux-android33 --sysroot=\/home\/johnoneil\/Android\/Sdk\/ndk\/25.2.9519653\/toolchains\/llvm\/prebuilt\/linux-x86_64\/sysroot -DIMPELLER_ENABLE_3D=1 -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/src -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flutter -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/abseil-cpp -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/angle\/include -I\/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flatbuffers\/include -I\/home\/johnoneil\/code\/display-safety\/target\/x86_64-linux-android\/release\/build\/impeller-rs-e627c2495537e7af\/out\/impeller\/generated -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security   -O3 -DNDEBUG  -std=gnu++20 -fPIC -MD -MT CMakeFiles\/impeller_typographer.dir\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc.o -MF CMakeFiles\/impeller_typographer.dir\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc.o.d -o CMakeFiles\/impeller_typographer.dir\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc.o -c \/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc\r\n  \/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc:223:12: error: no member named 'reinterpret_pointer_cast' in namespace 'std'\r\n        std::reinterpret_pointer_cast<TypefaceSTB>(typeface);\r\n        ~~~~~^\r\n  \/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typographer_context_stb.cc:223:37: error: 'TypefaceSTB' does not refer to a value\r\n        std::reinterpret_pointer_cast<TypefaceSTB>(typeface);\r\n                                      ^\r\n  \/home\/johnoneil\/code\/display-safety\/crates\/impeller-rs\/impeller-cmake\/third_party\/flutter\/impeller\/typographer\/backends\/stb\/typeface_stb.h:15:7: note: declared here\r\n  class TypefaceSTB final : public Typeface,\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report @johnoneil \r\nCan you elaborate on your use case as what are you trying to achieve \/ run and on the setup ?\r\nA code sample will be helpful to properly address the issue.\r\n","Thanks for looking at this @darshankawar . I'm not used to filing bugs on flutter, so I forgot a couple of things.\r\n\r\nFirst, I'm going to CC @bdero and @chinmaygarde about this. I should do this for all the bugs I file.\r\n\r\nSecond, I'll say that the relevant module `typographer_context_stb.cc` is something I provided some months back which supports our running Impeller (not specifically flutter) on Android and some other operating systems. So this issue is basically my own fault. I provided those particular `reinterpret_pointer_cast` calls before we had an Android port, and those casts are proving difficult on the Android platform.\r\n\r\nI'm going to suggest we move those to the more typically used C++ `reinterpret_cast` used throughout Impeller C++ code. I may try to provide a related fix for this tomorrow or in coming days.\r\n\r\nIn closing let me mention how we run this. We've got a pretty heavyweight binding between the Impeller `Aiks` API and Rust, and we bring it in Impeller C++ code for that binding via the[ Impeller CMake project.](https:\/\/github.com\/bdero\/impeller-cmake). We then try to cross-compile it for several targets, one of which is Android. It's in compiling that module for Android that I encounter the related issue.\r\n\r\n","Thanks for the update."],"labels":["engine","team-engine"]},{"title":"Device lab Flight School move (try pool)","body":"### Type of Request\n\ninfra task\n\n### Infrastructure Environment\n\ndevicelab\n\n### What is happening?\n\nMove `try` pool bots to new Flight School lab:\r\n\r\nPhase 1:\r\n\r\n- [ ] flutter-devicelab-linux-26\r\n- [ ] flutter-devicelab-linux-53\r\n- [ ] flutter-devicelab-mac-1\r\n- [ ] flutter-devicelab-mac-12\r\n- [ ] flutter-devicelab-mac-14\r\n\r\nFor each above machines:\r\n\r\nConnect to network `switch-1`\r\nVerify swarming bot is up and running\r\nVerify that builds have run successfully after move\r\nCreate ticket to update hostadmin entry to point to new VLAN config (flightschool_1) (Similar to ticket t\/225374063)\r\nVerify DNS is correct and host is ssh'able\r\nVerify salt states can be applied correctly\r\n\r\nPhase 2:\r\n\r\nOnce phase 1 is completed successfully, move the remaining following machines:\r\n\r\n- [ ] flutter-devicelab-mac-17\r\n- [ ] flutter-devicelab-mac-19\r\n- [ ] flutter-devicelab-mac-38\r\n- [ ] flutter-devicelab-mac-45\r\n- [ ] flutter-devicelab-mac-46\r\n\r\nFor each above machines:\r\n\r\nConnect to network `switch-1`\r\nVerify swarming bot is up and running\r\nVerify that builds have run successfully after move\r\nCreate ticket to update hostadmin entry to point to new VLAN config (flightschool_1) (Similar to ticket t\/225374063)\r\nVerify DNS is correct and host is ssh'able\r\nVerify salt states can be applied correctly\n\n### Steps to reproduce\n\nStep 1:\r\nStep 2:\r\n..\r\nStep n:\r\n\n\n### Expected results\n\nI expect to see X when Y is finished.","comments":["ticket for VLAN config for Phase 1 has been opened: t\/225588176 ","Waiting for AC in the new lab going online and DNS entries update then will move Phase 1 Bots to new lab.","@kentnguyen99 DNS entry flutter-devicelab-linux-53.mtv.corp.google.com should be complete.\r\n\r\nNote: it is expected the remote ssh to these machines will not work till they are physically moved to flight school.\r\n\r\nPlease perform the following tasks on flutter-devicelab-linux-53.mtv.corp.google.com to see the effect of the change before they are physically moved:\r\n\r\n- [x] reboot the machine\r\n- [x] perform salt state apply\r\n- [x] verify that the swarming server is still up and running","As expected, remote ssh to flutter-devicelab-linux-53.mtv.corp.google.com  is now down due to the DNS change.","All check and ready to go.","> @kentnguyen99 DNS entry flutter-devicelab-linux-53.mtv.corp.google.com should be complete.\r\n> \r\n> Note: it is expected the remote ssh to these machines will not work till they are physically moved to flight school.\r\n> \r\n> Please perform the following tasks on flutter-devicelab-linux-53.mtv.corp.google.com to see the effect of the change before they are physically moved:\r\n> \r\n> * [x]  reboot the machine\r\n> * [x]  perform salt state apply\r\n> * [x]  verify that the swarming server is still up and running\r\n\r\nBased on these task results, we can proceed to check behavior of flutter-devicelab-linux-53.mtv.corp.google.com after the machine has been physically moved.\r\n\r\n- [ ] Move to flight school and plug into switch\r\n- [ ] Verify that IP address is in expected IP range\r\n- [ ] Verify remote ssh is possible via DNS name\r\n- [ ] Apply salt state successfully\r\n- [ ] Verify builds run successfully","linux-53 has been moved to Flight School lab. Machine is up and running, I can login remotely from my end; However, it failed command \"salt-call state.apply\" due could not resolved DNS lookup.\r\nflutter@flutter-devicelab-linux-53:~$ sudo salt-call state.apply\r\n[sudo] password for flutter: \r\n[ERROR   ] DNS lookup or connection check of 'salt-flutter.endpoints.fuchsia-infra.cloud.goog' failed.\r\n[ERROR   ] Master hostname: 'salt-flutter.endpoints.fuchsia-infra.cloud.goog' not found or not responsive. Retrying in 30 seconds","This issue is missing a priority label. Please set a priority label when adding the `triaged-infra` label."],"labels":["team-infra","infra: device lab"]},{"title":"engine: misleading exception message in font_subset test script","body":"https:\/\/github.com\/flutter\/engine\/pull\/51492\r\n\r\nfont_subset tests previously were hardcoded to look for the binary in specific build variants, and got later changed (in https:\/\/github.com\/flutter\/engine\/pull\/50327) to require an explicit variant as an argument\r\n\r\nlittle nitpick: the exception message still hardcodes variants instead of naming the one being actually checked\r\n","comments":[],"labels":["engine","team-engine"]},{"title":"[google_maps_flutter] Harmonize heatmap radius behavior across platforms","body":"There are inconsistencies in the heatmap radius parameter's behavior across iOS, Android, and web platforms within the google_maps_flutter plugin. The core challenge is the platform-specific interpretation of \"radius,\" affecting its functionality and integration.\r\n\r\nSee https:\/\/github.com\/flutter\/packages\/pull\/3257#discussion_r1128552963 for existing discussion\r\n\r\nChatGPT summary of that thread:\r\nThe conversation centers on addressing the inconsistencies of the heatmap radius parameter in a Flutter plugin for Google Maps across various platforms and versions. Contributors discussed the differences in how the radius is interpreted on different platforms, such as Android, iOS, and web, and explored potential solutions to harmonize its behavior. The discussion culminated in a proposal by Stuart Morgan to introduce a HeatmapRadius object with a platform-specific constructor to manage these differences more effectively. This approach aims to provide a temporary workaround while leaving room for future improvements that could offer a more standardized handling of the heatmap radius across platforms without necessitating breaking changes.","comments":[],"labels":["platform-android","platform-ios","p: maps","platform-web","package","team-ecosystem","P2","triaged-ecosystem"]},{"title":"Flutter Web: \u201cJSNoSuchMethodError\u201d when wifi disabled - Cannot read properties of undefined (reading \u2018maps\u2019)","body":"### Steps to reproduce\n\n1. start the app\r\n2. turn off wifi\r\n3. open the dialog\/popup with GoogleMap widget\n\n### Expected results\n\nnot crash just because a network request fails\n\n### Actual results\n\nIt's throwing an exception \r\nThe following JSNoSuchMethodError was thrown building GoogleMap(dirty, dependencies: [Directionality], state: _GoogleMapState#1f2e8):\r\nTypeError: Cannot read properties of undefined (reading 'maps')\r\n\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nclass LocationMap extends StatefulWidget {\r\n  final LatLng? selectedLocation;\r\n\r\n  const LocationMap({\r\n    Key? key,\r\n    this.selectedLocation,\r\n  }) : super(key: key);\r\n\r\n  @override\r\n  State<LocationMap> createState() => _LocationMapState();\r\n}\r\n\r\nclass _LocationMapState extends State<LocationMap> {\r\n  GoogleMapController? mapController;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    LatLng initialCameraPosition = widget.selectedLocation;\r\n\r\n\r\n     if (mapController != null && widget.selectedLocation != null) {\r\n       mapController!.animateCamera(CameraUpdate.newCameraPosition(\r\n         CameraPosition(\r\n           target: widget.selectedLocation!,\r\n           zoom: 11.0,\r\n         ),\r\n       ));\r\n     }\r\n\r\n    return Card(\r\n       child: GoogleMap(\r\n         onMapCreated: (controller) {\r\n           mapController = controller;\r\n         },\r\n         initialCameraPosition: CameraPosition(\r\n           target: initialCameraPosition,\r\n           zoom: 11.0,\r\n         ),\r\n         markers: widget.selectedLocation != null\r\n             ? {\r\n           Marker(\r\n             markerId: MarkerId('selectedLocation'),\r\n             position: widget.selectedLocation!,\r\n           ),\r\n         }\r\n             : {},\r\n       ),\r\n     );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n<img width=\"529\" alt=\"Screenshot 2024-03-12 at 6 22 44\u202fPM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/131498294\/2309ec7c-9e64-4ed9-8c51-a66669d3679f\">\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n======== Exception caught by widgets library =======================================================\r\nThe following JSNoSuchMethodError was thrown building GoogleMap(dirty, dependencies: [Directionality], state: _GoogleMapState#1f2e8):\r\nTypeError: Cannot read properties of undefined (reading 'maps')\r\n\r\nThe relevant error-causing widget was: \r\n  GoogleMap GoogleMap:file:\/\/\/Users\/anastasia_wartell\/rwsecure-flutter\/lib\/screens\/components\/location_input\/location_map.dart:41:15\r\nWhen the exception was thrown, this was the stack: \r\npackages\/google_maps_flutter_web\/src\/convert.dart 100:30                          _gmapTypeIDForPluginType\r\npackages\/google_maps_flutter_web\/src\/convert.dart 43:25                           _configurationAndStyleToGmapsOptions\r\npackages\/google_maps_flutter_web\/src\/google_maps_controller.dart 173:32           init\r\npackages\/google_maps_flutter_web\/src\/google_maps_flutter_web.dart 311:8           <fn>\r\npackages\/google_maps_flutter_web\/src\/google_maps_flutter_web.dart 311:8           buildViewWithConfiguration\r\npackages\/google_maps_flutter\/src\/google_map.dart 321:47                           build\r\npackages\/flutter\/src\/widgets\/framework.dart 5409:27                               build\r\npackages\/flutter\/src\/widgets\/framework.dart 5297:15                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6569:36                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6581:32                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6569:36                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6581:32                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6569:36                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 6581:32                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5462:11                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5453:11                               [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 6434:14                               mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/framework.dart 5322:16                               performRebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5016:7                                rebuild\r\npackages\/flutter\/src\/widgets\/framework.dart 5279:5                                [_firstBuild]\r\npackages\/flutter\/src\/widgets\/framework.dart 5273:5                                mount\r\npackages\/flutter\/src\/widgets\/framework.dart 4182:15                               inflateWidget\r\npackages\/flutter\/src\/widgets\/framework.dart 3707:18                               updateChild\r\npackages\/flutter\/src\/widgets\/layout_builder.dart 135:18                           layoutCallback\r\npackages\/flutter\/src\/widgets\/framework.dart 2719:19                               buildScope\r\npackages\/flutter\/src\/widgets\/layout_builder.dart 153:5                            [_layout]\r\npackages\/flutter\/src\/rendering\/object.dart 2604:59                                <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 1059:15                                [_enableMutationsToDirtySubtrees]\r\npackages\/flutter\/src\/rendering\/object.dart 2604:7                                 invokeLayoutCallback\r\npackages\/flutter\/src\/widgets\/layout_builder.dart 228:7                            rebuildIfNecessary\r\npackages\/flutter\/src\/widgets\/layout_builder.dart 313:5                            performLayout\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/shifted_box.dart 1291:7                            performLayout\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/shifted_box.dart 238:5                             performLayout\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 3732:13                             performLayout\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/rendering\/proxy_box.dart 104:21                              <fn>\r\npackages\/flutter\/src\/rendering\/object.dart 2493:7                                 layout\r\npackages\/flutter\/src\/rendering\/box.dart 2382:11                                   layout\r\npackages\/flutter\/src\/widgets\/overlay.dart 838:14                                  performLayout\r\npackages\/flutter\/src\/rendering\/object.dart 2332:7                                 [_layoutWithoutResize]\r\npackages\/flutter\/src\/rendering\/object.dart 1013:17                                flushLayout\r\npackages\/flutter\/src\/rendering\/binding.dart 494:19                                drawFrame\r\npackages\/flutter\/src\/widgets\/binding.dart 918:13                                  drawFrame\r\npackages\/flutter\/src\/rendering\/binding.dart 360:5                                 [_handlePersistentFrameCallback]\r\npackages\/flutter\/src\/scheduler\/binding.dart 1297:15                               [_invokeFrameCallback]\r\npackages\/flutter\/src\/scheduler\/binding.dart 1227:9                                handleDrawFrame\r\npackages\/flutter\/src\/scheduler\/binding.dart 1085:5                                [_handleDrawFrame]\r\ndart-sdk\/lib\/async\/zone.dart 1399:13                                              _rootRun\r\ndart-sdk\/lib\/async\/zone.dart 1301:19                                              run\r\ndart-sdk\/lib\/async\/zone.dart 1209:7                                               runGuarded\r\nlib\/_engine\/engine\/platform_dispatcher.dart 1306:9                                invoke\r\nlib\/_engine\/engine\/platform_dispatcher.dart 278:5                                 invokeOnDrawFrame\r\nlib\/_engine\/engine\/initialization.dart 185:45                                     <fn>\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 574:37  _checkAndCall\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 579:39  dcall\r\n====================================================================================================\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.13.7, on macOS 14.3 23D56 darwin-arm64, locale en-US)\r\n    \u2022 Flutter version 3.13.7 on channel stable at \/...\/...\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 2f708eb839 (5 months ago), 2023-10-09 09:58:08 -0500\r\n    \u2022 Engine revision a794cf2681\r\n    \u2022 Dart version 3.1.3\r\n    \u2022 DevTools version 2.25.0\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/...\/...\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.13.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 76.3.4\r\n    \u2022 Dart plugin version 232.9559.10\r\n\r\n[\u2713] VS Code (version 1.84.2)\r\n    \u2022 VS Code at \/...\/...\/...\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.3 23D56 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @wartelski \r\nI check the issue using [package's example](https:\/\/github.com\/flutter\/packages\/blob\/main\/packages\/google_maps_flutter\/google_maps_flutter\/example\/lib\/main.dart) but the error is different, with `net::ERR_CONNECTION_CLOSED` instead.\r\n\r\nWhat is your current maps package version? (the latest version is `google_maps_flutter: ^2.6.0`)\r\n\r\nCould you also try this on the latest Flutter stable `3.19.3`?"],"labels":["waiting for customer response","in triage"]},{"title":"Using ShellRoute with RoutingConfig causes an unnecessary transition when updating the routes","body":"### What package does this bug report belong to?\n\ngo_router\n\n### What target platforms are you seeing this bug on?\n\nWeb\n\n### Have you already upgraded your packages?\n\nYes\n\n### Dependency versions\n\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```lock\r\n# Generated by pub\r\n# See https:\/\/dart.dev\/tools\/pub\/glossary#lockfile\r\npackages:\r\n  adaptive_breakpoints:\r\n    dependency: transitive\r\n    description:\r\n      name: adaptive_breakpoints\r\n      sha256: \"56dd5f1016f4d5732b80628d1b63a29d8c9cabe4d66a8a5fe63fdbec7b3af5cd\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.1.7\"\r\n  adaptive_navigation:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: adaptive_navigation\r\n      sha256: \"87c08c5c8b954f2266518c1efb98a1d0ae09cd8cbef69c4d4fd7ea28d4b9fd51\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.0.10\"\r\n  async:\r\n    dependency: transitive\r\n    description:\r\n      name: async\r\n      sha256: \"947bfcf187f74dbc5e146c9eb9c0f10c9f8b30743e341481c1e2ed3ecc18c20c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.11.0\"\r\n  boolean_selector:\r\n    dependency: transitive\r\n    description:\r\n      name: boolean_selector\r\n      sha256: \"6cfb5af12253eaf2b368f07bacc5a80d1301a071c73360d746b7f2e32d762c66\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.1\"\r\n  characters:\r\n    dependency: transitive\r\n    description:\r\n      name: characters\r\n      sha256: \"04a925763edad70e8443c99234dc3328f442e811f1d8fd1a72f1c8ad0f69a605\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.0\"\r\n  clock:\r\n    dependency: transitive\r\n    description:\r\n      name: clock\r\n      sha256: cb6d7f03e1de671e34607e909a7213e31d7752be4fb66a86d29fe1eb14bfb5cf\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.1.1\"\r\n  collection:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: collection\r\n      sha256: ee67cb0715911d28db6bf4af1026078bd6f0128b07a5f66fb2ed94ec6783c09a\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.18.0\"\r\n  cupertino_icons:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: cupertino_icons\r\n      sha256: d57953e10f9f8327ce64a508a355f0b1ec902193f66288e8cb5070e7c47eeb2d\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.6\"\r\n  fake_async:\r\n    dependency: transitive\r\n    description:\r\n      name: fake_async\r\n      sha256: \"511392330127add0b769b75a987850d136345d9227c6b94c96a04cf4a391bf78\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.1\"\r\n  ffi:\r\n    dependency: transitive\r\n    description:\r\n      name: ffi\r\n      sha256: \"7bf0adc28a23d395f19f3f1eb21dd7cfd1dd9f8e1c50051c069122e6853bc878\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.0\"\r\n  file:\r\n    dependency: transitive\r\n    description:\r\n      name: file\r\n      sha256: \"5fc22d7c25582e38ad9a8515372cd9a93834027aacf1801cf01164dac0ffa08c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"7.0.0\"\r\n  flutter:\r\n    dependency: \"direct main\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_test:\r\n    dependency: \"direct dev\"\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  flutter_web_plugins:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.0\"\r\n  go_router:\r\n    dependency: \"direct main\"\r\n    description:\r\n      path: \"..\"\r\n      relative: true\r\n    source: path\r\n    version: \"13.2.1\"\r\n  logging:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: logging\r\n      sha256: \"623a88c9594aa774443aa3eb2d41807a48486b5613e67599fb4c41c0ad47c340\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  matcher:\r\n    dependency: transitive\r\n    description:\r\n      name: matcher\r\n      sha256: \"1803e76e6653768d64ed8ff2e1e67bea3ad4b923eb5c56a295c3e634bad5960e\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.12.16\"\r\n  material_color_utilities:\r\n    dependency: transitive\r\n    description:\r\n      name: material_color_utilities\r\n      sha256: \"9528f2f296073ff54cb9fee677df673ace1218163c3bc7628093e7eed5203d41\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.5.0\"\r\n  meta:\r\n    dependency: transitive\r\n    description:\r\n      name: meta\r\n      sha256: a6e590c838b18133bb482a2745ad77c5bb7715fb0451209e1a7567d416678b8e\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.10.0\"\r\n  nested:\r\n    dependency: transitive\r\n    description:\r\n      name: nested\r\n      sha256: \"03bac4c528c64c95c722ec99280375a6f2fc708eec17c7b3f07253b626cd2a20\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.0\"\r\n  path:\r\n    dependency: transitive\r\n    description:\r\n      name: path\r\n      sha256: \"8829d8a55c13fc0e37127c29fedf290c102f4e40ae94ada574091fe0ff96c917\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.8.3\"\r\n  path_provider_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_linux\r\n      sha256: f7a1fe3a634fe7734c8d3f2766ad746ae2a2884abe22e241a8b301bf5cac3279\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.1\"\r\n  path_provider_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_platform_interface\r\n      sha256: \"88f5779f72ba699763fa3a3b06aa4bf6de76c8e5de842cf6f29e2e06476c2334\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  path_provider_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: path_provider_windows\r\n      sha256: \"8bc9f22eee8690981c22aa7fc602f5c85b497a6fb2ceb35ee5a5e5ed85ad8170\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.1\"\r\n  platform:\r\n    dependency: transitive\r\n    description:\r\n      name: platform\r\n      sha256: \"12220bb4b65720483f8fa9450b4332347737cf8213dd2840d8b2c823e47243ec\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.4\"\r\n  plugin_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: plugin_platform_interface\r\n      sha256: \"4820fbfdb9478b1ebae27888254d445073732dae3d6ea81f0b7e06d5dedc3f02\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.8\"\r\n  provider:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: provider\r\n      sha256: cdbe7530b12ecd9eb455bdaa2fcb8d4dad22e80b8afb4798b41479d5ce26847f\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.0.5\"\r\n  shared_preferences:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: shared_preferences\r\n      sha256: \"81429e4481e1ccfb51ede496e916348668fd0921627779233bd24cc3ff6abd02\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.2\"\r\n  shared_preferences_android:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_android\r\n      sha256: \"8568a389334b6e83415b6aae55378e158fbc2314e074983362d20c562780fb06\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.1\"\r\n  shared_preferences_foundation:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_foundation\r\n      sha256: \"7708d83064f38060c7b39db12aefe449cb8cdc031d6062280087bc4cdb988f5c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.5\"\r\n  shared_preferences_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_linux\r\n      sha256: \"9f2cbcf46d4270ea8be39fa156d86379077c8a5228d9dfdb1164ae0bb93f1faa\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  shared_preferences_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_platform_interface\r\n      sha256: \"22e2ecac9419b4246d7c22bfbbda589e3acf5c0351137d87dd2939d984d37c3b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  shared_preferences_web:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_web\r\n      sha256: \"7b15ffb9387ea3e237bb7a66b8a23d2147663d391cafc5c8f37b2e7b4bde5d21\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.2\"\r\n  shared_preferences_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: shared_preferences_windows\r\n      sha256: \"841ad54f3c8381c480d0c9b508b89a34036f512482c407e6df7a9c4aa2ef8f59\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  sky_engine:\r\n    dependency: transitive\r\n    description: flutter\r\n    source: sdk\r\n    version: \"0.0.99\"\r\n  source_span:\r\n    dependency: transitive\r\n    description:\r\n      name: source_span\r\n      sha256: \"53e943d4206a5e30df338fd4c6e7a077e02254531b138a15aec3bd143c1a8b3c\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.10.0\"\r\n  stack_trace:\r\n    dependency: transitive\r\n    description:\r\n      name: stack_trace\r\n      sha256: \"73713990125a6d93122541237550ee3352a2d84baad52d375a4cad2eb9b7ce0b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.11.1\"\r\n  stream_channel:\r\n    dependency: transitive\r\n    description:\r\n      name: stream_channel\r\n      sha256: ba2aa5d8cc609d96bbb2899c28934f9e1af5cddbd60a827822ea467161eb54e7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.2\"\r\n  string_scanner:\r\n    dependency: transitive\r\n    description:\r\n      name: string_scanner\r\n      sha256: \"556692adab6cfa87322a115640c11f13cb77b3f076ddcc5d6ae3c20242bedcde\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.0\"\r\n  term_glyph:\r\n    dependency: transitive\r\n    description:\r\n      name: term_glyph\r\n      sha256: a29248a84fbb7c79282b40b8c72a1209db169a2e0542bce341da992fe1bc7e84\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.2.1\"\r\n  test_api:\r\n    dependency: transitive\r\n    description:\r\n      name: test_api\r\n      sha256: \"5c2f730018264d276c20e4f1503fd1308dfbbae39ec8ee63c5236311ac06954b\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.6.1\"\r\n  url_launcher:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: url_launcher\r\n      sha256: \"0ecc004c62fd3ed36a2ffcbe0dd9700aee63bd7532d0b642a488b1ec310f492e\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.2.5\"\r\n  url_launcher_android:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_android\r\n      sha256: d4ed0711849dd8e33eb2dd69c25db0d0d3fdc37e0a62e629fe32f57a22db2745\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.3.0\"\r\n  url_launcher_ios:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_ios\r\n      sha256: \"75bb6fe3f60070407704282a2d295630cab232991eb52542b18347a8a941df03\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"6.2.4\"\r\n  url_launcher_linux:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_linux\r\n      sha256: ab360eb661f8879369acac07b6bb3ff09d9471155357da8443fd5d3cf7363811\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.1\"\r\n  url_launcher_macos:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_macos\r\n      sha256: b7244901ea3cf489c5335bdacda07264a6e960b1c1b1a9f91e4bc371d9e68234\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.0\"\r\n  url_launcher_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_platform_interface\r\n      sha256: \"552f8a1e663569be95a8190206a38187b531910283c3e982193e4f2733f01029\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.3.2\"\r\n  url_launcher_web:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_web\r\n      sha256: fff0932192afeedf63cdd50ecbb1bc825d31aed259f02bb8dba0f3b729a5e88b\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.2.3\"\r\n  url_launcher_windows:\r\n    dependency: transitive\r\n    description:\r\n      name: url_launcher_windows\r\n      sha256: ecf9725510600aa2bb6d7ddabe16357691b6d2805f66216a97d1b881e21beff7\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.1\"\r\n  vector_math:\r\n    dependency: transitive\r\n    description:\r\n      name: vector_math\r\n      sha256: \"80b3257d1492ce4d091729e3a67a60407d227c27241d6927be0130c98e741803\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"2.1.4\"\r\n  web:\r\n    dependency: transitive\r\n    description:\r\n      name: web\r\n      sha256: afe077240a270dcfd2aafe77602b4113645af95d0ad31128cc02bce5ac5d5152\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.0\"\r\n  win32:\r\n    dependency: transitive\r\n    description:\r\n      name: win32\r\n      sha256: \"464f5674532865248444b4c3daca12bd9bf2d7c47f759ce2617986e7229494a8\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"5.2.0\"\r\n  xdg_directories:\r\n    dependency: transitive\r\n    description:\r\n      name: xdg_directories\r\n      sha256: faea9dee56b520b55a566385b84f2e8de55e7496104adada9962e0bd11bcff1d\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.0.4\"\r\nsdks:\r\n  dart: \">=3.2.0 <4.0.0\"\r\n  flutter: \">=3.16.0\"\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Steps to reproduce\n\n1. From the example apps, run the app in routing_config.dart\r\n2. Click on \"Add a new route\"\r\n3. Notice that the routes are updated without a transition effect as expected\r\n4. Go to the code, in the function `_generateRoutingConfig()`, wrap the `<RouteBase>[...]` array with a ShellRoute - see the full function example below.\r\n5. Save, re-run the app and click on \"Add a new route\"\n\n### Expected results\n\nSame as in step 3\n\n### Actual results\n\nThere's a transition effect when the routes are updated, as if the entire ShellRoute is pushed again. This prevents the use of ShellRoute with RoutingConfig\n\n### Code sample\n\n<details open><summary>Code of `_generateRoutingConfig()` after the change in step 4<\/summary>\r\n\r\n```dart\r\nreturn RoutingConfig(\r\n  routes: <RouteBase>[\r\n    ShellRoute(\r\n      builder: (context, state, child) => child,\r\n      routes: <RouteBase>[\r\n        GoRoute(\r\n          path: '\/',\r\n          builder: (_, __) {\r\n            return Scaffold(\r\n              appBar: AppBar(title: const Text('Home')),\r\n              body: Center(\r\n                child: Column(\r\n                  mainAxisAlignment: MainAxisAlignment.center,\r\n                  children: <Widget>[\r\n                    ElevatedButton(\r\n                      onPressed: isNewRouteAdded\r\n                          ? null\r\n                          : () {\r\n                              setState(() {\r\n                                isNewRouteAdded = true;\r\n                                \/\/ Modify the routing config.\r\n                                myConfig.value = _generateRoutingConfig();\r\n                              });\r\n                            },\r\n                      child: isNewRouteAdded\r\n                          ? const Text('A route has been added')\r\n                          : const Text('Add a new route'),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        router.go('\/new-route');\r\n                      },\r\n                      child: const Text('Try going to \/new-route'),\r\n                    )\r\n                  ],\r\n                ),\r\n              ),\r\n            );\r\n          },\r\n        ),\r\n        if (isNewRouteAdded)\r\n          GoRoute(\r\n            path: '\/new-route',\r\n            builder: (_, __) {\r\n              return Scaffold(\r\n                appBar: AppBar(title: const Text('A new Route')),\r\n                body: Center(\r\n                    child: Column(\r\n                  mainAxisAlignment: MainAxisAlignment.center,\r\n                  children: <Widget>[\r\n                    ElevatedButton(\r\n                        onPressed: () => router.go('\/'),\r\n                        child: const Text('Go to home')),\r\n                  ],\r\n                )),\r\n              );\r\n            },\r\n          ),\r\n      ],\r\n    ),\r\n  ],\r\n);\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Videos\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/42715466\/fdb034c9-bf4f-47d4-a74a-8aeafa19141c\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.16.2, on macOS 14.1.1 23B81 darwin-arm64, locale en-IL)\r\n    \u2022 Flutter version 3.16.2 on channel stable at \/Users\/liran\/code\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9e1c857886 (4 months ago), 2023-11-30 11:51:18 -0600\r\n    \u2022 Engine revision cf7a9d0800\r\n    \u2022 Dart version 3.2.2\r\n    \u2022 DevTools version 2.28.3\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 32.1.0-rc1)\r\n    \u2022 Android SDK at \/Users\/liran\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 32.1.0-rc1\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM X210 (mobile)            \u2022 R9TWB058YFT                          \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554                        \u2022 android-arm64  \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 iPhone 15 Pro (mobile)      \u2022 A51B4508-8803-453F-B395-00C8675A16D2 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-0\r\n      (simulator)\r\n    \u2022 macOS (desktop)             \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.1.1 23B81 darwin-arm64\r\n    \u2022 Chrome (web)                \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    ! Error: Browsing on the local area network for Liran's iPhone. Ensure the device is unlocked and attached with a cable or associated\r\n      with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. This doesn't seem to be specific to web, as on mobile using below code sample, see the same behavior.\r\n\r\n<details>\r\n<summary> runnable code sample <\/summary>\r\n\r\n```\r\n\r\n\/\/ Copyright 2013 The Flutter Authors. All rights reserved.\r\n\/\/ Use of this source code is governed by a BSD-style license that can be\r\n\/\/ found in the LICENSE file.\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\n\/\/\/ This app shows how to dynamically add more route into routing config\r\nvoid main() => runApp(const MyApp());\r\n\r\n\/\/\/ The main app.\r\nclass MyApp extends StatefulWidget {\r\n  \/\/\/ Constructs a [MyApp]\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  State<MyApp> createState() => _MyAppState();\r\n}\r\n\r\nclass _MyAppState extends State<MyApp> {\r\n  bool isNewRouteAdded = false;\r\n\r\n  late final ValueNotifier<RoutingConfig> myConfig =\r\n  ValueNotifier<RoutingConfig>(_generateRoutingConfig());\r\n\r\n  late final GoRouter router = GoRouter.routingConfig(\r\n      routingConfig: myConfig,\r\n      errorBuilder: (_, GoRouterState state) => Scaffold(\r\n        appBar: AppBar(title: const Text('Page not found')),\r\n        body: Center(\r\n            child: Column(\r\n              mainAxisAlignment: MainAxisAlignment.center,\r\n              children: <Widget>[\r\n                Text('${state.uri} does not exist'),\r\n                ElevatedButton(\r\n                    onPressed: () => router.go('\/'),\r\n                    child: const Text('Go to home')),\r\n              ],\r\n            )),\r\n      ));\r\n\r\n  RoutingConfig _generateRoutingConfig() {\r\n    return RoutingConfig(\r\n      routes: <RouteBase>[\r\n        ShellRoute(\r\n          builder: (context, state, child) => child,\r\n          routes: <RouteBase>[\r\n            GoRoute(\r\n              path: '\/',\r\n              builder: (_, __) {\r\n                return Scaffold(\r\n                  appBar: AppBar(title: const Text('Home')),\r\n                  body: Center(\r\n                    child: Column(\r\n                      mainAxisAlignment: MainAxisAlignment.center,\r\n                      children: <Widget>[\r\n                        ElevatedButton(\r\n                          onPressed: isNewRouteAdded\r\n                              ? null\r\n                              : () {\r\n                            setState(() {\r\n                              isNewRouteAdded = true;\r\n                              \/\/ Modify the routing config.\r\n                              myConfig.value = _generateRoutingConfig();\r\n                            });\r\n                          },\r\n                          child: isNewRouteAdded\r\n                              ? const Text('A route has been added')\r\n                              : const Text('Add a new route'),\r\n                        ),\r\n                        ElevatedButton(\r\n                          onPressed: () {\r\n                            router.go('\/new-route');\r\n                          },\r\n                          child: const Text('Try going to \/new-route'),\r\n                        )\r\n                      ],\r\n                    ),\r\n                  ),\r\n                );\r\n              },\r\n            ),\r\n            if (isNewRouteAdded)\r\n              GoRoute(\r\n                path: '\/new-route',\r\n                builder: (_, __) {\r\n                  return Scaffold(\r\n                    appBar: AppBar(title: const Text('A new Route')),\r\n                    body: Center(\r\n                        child: Column(\r\n                          mainAxisAlignment: MainAxisAlignment.center,\r\n                          children: <Widget>[\r\n                            ElevatedButton(\r\n                                onPressed: () => router.go('\/'),\r\n                                child: const Text('Go to home')),\r\n                          ],\r\n                        )),\r\n                  );\r\n                },\r\n              ),\r\n          ],\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp.router(\r\n      routerConfig: router,\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/e7bf00b2-c017-4829-8814-b1d8d46c0a32\r\n\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>"],"labels":["package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"[go_router] Something is wrong with Go_Router 13.0.0 migration guide","body":"### Steps to reproduce\n\nOpen\r\nhttps:\/\/docs.google.com\/document\/d\/1FRdW_p29zH0I3KEMQKW_QMMN7owiQ5Wx-PUhhZpehSg\/edit\r\n\r\n\n\n### Expected results\n\nConsistent document\n\n### Actual results\n\n<img width=\"1233\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/6721286\/605875d6-21e4-4abc-9018-7b0dce82a584\">\r\n\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["The previous version's migration guides (12.0, 11.0) seems to be fine, but the latest one seems to be showing as mentioned above. \r\n"],"labels":["package","p: go_router","team-go_router"]},{"title":"[go_router]: Cannot pop back after calling `goBranch` on a pushed ShellRoute","body":"### Steps to reproduce\n\n1. Push onto a `StatefulShellBranch`\r\n2. Navigate inside another `StatefulShellBranch` using `goBranch`\r\n3. Try to call `context.pop()` to back to the original location\n\n### Expected results\n\nBeing able to exit a pushed `StatefulShellRoute` that has been navigated with `goBranch`.\r\n\r\n\n\n### Actual results\n\nIf the user navigates to a different branch than the original, they will not be able to pop the current screen.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  runApp(const MainApp());\r\n}\r\n\r\nabstract class Routes {\r\n  static const tab1 = \"\/tab-1\";\r\n  static const tab2 = \"\/tab-2\";\r\n  static const tab3 = \"\/tab-3\";\r\n  static const tab4 = \"\/tab-4\";\r\n  static const tab5 = \"\/tab-5\";\r\n\r\n  static const test = \"\/test\";\r\n\r\n  static const menuTab1 = \"\/menu\/tab-1\";\r\n  static const menuTab2 = \"\/menu\/tab-2\";\r\n  static const menuTab3 = \"\/menu\/tab-3\";\r\n}\r\n\r\nabstract class AppRouter {\r\n  static final parentNavigatorKey = GlobalKey<NavigatorState>();\r\n  static final tab1NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final tab2NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final tab3NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final tab4NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final tab5NavigatorKey = GlobalKey<NavigatorState>();\r\n\r\n  static final menuTab1NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final menuTab2NavigatorKey = GlobalKey<NavigatorState>();\r\n  static final menuTab3NavigatorKey = GlobalKey<NavigatorState>();\r\n\r\n  static Page getPage({\r\n    required Widget child,\r\n    required GoRouterState state,\r\n  }) {\r\n    return MaterialPage(\r\n      key: state.pageKey,\r\n      child: child,\r\n    );\r\n  }\r\n\r\n  static GoRouter router = GoRouter(\r\n    navigatorKey: parentNavigatorKey,\r\n    initialLocation: Routes.tab1,\r\n    routes: [\r\n      StatefulShellRoute.indexedStack(\r\n        parentNavigatorKey: parentNavigatorKey,\r\n        pageBuilder: (\r\n          BuildContext context,\r\n          GoRouterState state,\r\n          StatefulNavigationShell navigationShell,\r\n        ) {\r\n          return getPage(\r\n            child: RootNavigation(\r\n              navigationShell: navigationShell,\r\n            ),\r\n            state: state,\r\n          );\r\n        },\r\n        branches: [\r\n          StatefulShellBranch(\r\n            navigatorKey: tab1NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.tab1,\r\n                pageBuilder: (context, GoRouterState state) {\r\n                  return getPage(\r\n                    child: const Center(\r\n                      child: Text(\"Tab 1 content\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: tab2NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.tab2,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: const Center(\r\n                      child: Text(\"Tab 2 content\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: tab3NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.tab3,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: const Center(\r\n                      child: Text(\"Tab 3 content\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: tab4NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.tab4,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: const Center(\r\n                      child: Text(\"Tab 4 content\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: tab5NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.tab5,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: const Center(\r\n                      child: Text(\"Tab 5 content\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n        ],\r\n      ),\r\n      StatefulShellRoute.indexedStack(\r\n        parentNavigatorKey: parentNavigatorKey,\r\n        pageBuilder: (\r\n          BuildContext context,\r\n          GoRouterState state,\r\n          StatefulNavigationShell navigationShell,\r\n        ) {\r\n          return getPage(\r\n            child: Menu(\r\n              shell: navigationShell,\r\n            ),\r\n            state: state,\r\n          );\r\n        },\r\n        branches: [\r\n          StatefulShellBranch(\r\n            navigatorKey: menuTab1NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.menuTab1,\r\n                pageBuilder: (context, GoRouterState state) {\r\n                  return getPage(\r\n                    child: Center(\r\n                      child: const Text(\"Menu tab 1\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: menuTab2NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.menuTab2,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: Center(\r\n                      child: const Text(\"Menu tab 2\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n          StatefulShellBranch(\r\n            navigatorKey: menuTab3NavigatorKey,\r\n            routes: [\r\n              GoRoute(\r\n                path: Routes.menuTab3,\r\n                pageBuilder: (context, state) {\r\n                  return getPage(\r\n                    child: Center(\r\n                      child: const Text(\"Menu tab 3\"),\r\n                    ),\r\n                    state: state,\r\n                  );\r\n                },\r\n              ),\r\n            ],\r\n          ),\r\n        ],\r\n      ),\r\n      GoRoute(\r\n        parentNavigatorKey: parentNavigatorKey,\r\n        path: Routes.test,\r\n        builder: (context, state) {\r\n          return Test();\r\n        },\r\n      ),\r\n    ],\r\n  );\r\n}\r\n\r\nclass Test extends StatelessWidget {\r\n  const Test({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text(\"Hello\"),\r\n      ),\r\n      body: Center(\r\n        child: Text(\"TEST!\"),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp.router(\r\n      routerConfig: AppRouter.router,\r\n      debugShowCheckedModeBanner: false,\r\n    );\r\n  }\r\n}\r\n\r\nclass RootNavigation extends StatelessWidget {\r\n  const RootNavigation({\r\n    required this.navigationShell,\r\n  });\r\n\r\n  final StatefulNavigationShell navigationShell;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: SingleChildScrollView(\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            children: [\r\n              navigationShell,\r\n              Container(\r\n                \/\/ color: Colors.lightGreen,\r\n                child: Column(\r\n                  children: [\r\n                    Text(\r\n                      \"URL Based Navigation\",\r\n                      style: Theme.of(context).textTheme.headlineLarge,\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.go(Routes.tab1);\r\n                      },\r\n                      child: Text(\"Navigate to: Tab 1\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.go(Routes.tab2);\r\n                      },\r\n                      child: Text(\"Navigate to: Tab 2\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.go(Routes.tab3);\r\n                      },\r\n                      child: Text(\"Navigate to: Tab 3\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.go(Routes.tab4);\r\n                      },\r\n                      child: Text(\"Navigate to: Tab 4\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.go(Routes.tab5);\r\n                      },\r\n                      child: Text(\"Navigate to: Tab 5\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.push(Routes.menuTab1);\r\n                      },\r\n                      child: Text(\"Navigate to: Menu 1\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.push(Routes.menuTab2);\r\n                      },\r\n                      child: Text(\"Navigate to: Menu 2\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.push(Routes.menuTab3);\r\n                      },\r\n                      child: Text(\"Navigate to: Menu 3\"),\r\n                    ),\r\n                    ElevatedButton(\r\n                      onPressed: () {\r\n                        context.push(Routes.test);\r\n                      },\r\n                      child: Text(\"Navigate to: Test\"),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n      bottomNavigationBar: AppNavigationBar(\r\n        child: navigationShell,\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass AppNavigationBar extends StatefulWidget {\r\n  const AppNavigationBar({\r\n    super.key,\r\n    required this.child,\r\n  });\r\n\r\n  final StatefulNavigationShell child;\r\n\r\n  @override\r\n  State<AppNavigationBar> createState() => _AppNavigationBarState();\r\n}\r\n\r\nclass _AppNavigationBarState extends State<AppNavigationBar> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return NavigationBar(\r\n      selectedIndex: widget.child.currentIndex,\r\n      onDestinationSelected: (index) {\r\n        widget.child.goBranch(\r\n          index,\r\n          initialLocation: index == widget.child.currentIndex,\r\n        );\r\n        setState(() {});\r\n      },\r\n      destinations: const <Widget>[\r\n        NavigationDestination(\r\n          icon: Icon(Icons.hub_outlined),\r\n          selectedIcon: Icon(Icons.hub),\r\n          label: \"Tab 1\",\r\n        ),\r\n        NavigationDestination(\r\n          icon: Icon(Icons.view_carousel_outlined),\r\n          selectedIcon: Icon(Icons.view_carousel),\r\n          label: \"Tab 2\",\r\n        ),\r\n        NavigationDestination(\r\n          icon: Icon(Icons.view_carousel_outlined),\r\n          selectedIcon: Icon(Icons.view_carousel),\r\n          label: \"Tab 3\",\r\n        ),\r\n        NavigationDestination(\r\n          icon: Icon(Icons.view_carousel_outlined),\r\n          selectedIcon: Icon(Icons.view_carousel),\r\n          label: \"Tab 4\",\r\n        ),\r\n        NavigationDestination(\r\n          icon: Icon(Icons.view_carousel_outlined),\r\n          selectedIcon: Icon(Icons.view_carousel),\r\n          label: \"Tab 5\",\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}\r\n\r\nenum MenuSegment { MENU1, MENU2, MENU3 }\r\n\r\nclass Menu extends StatefulWidget {\r\n  Menu({\r\n    required this.shell,\r\n  });\r\n\r\n  final StatefulNavigationShell shell;\r\n\r\n  @override\r\n  State<Menu> createState() => _MenuState();\r\n}\r\n\r\nclass _MenuState extends State<Menu> {\r\n  void initState() {\r\n    currentlySelectedMenuSegment =\r\n        MenuSegment.values[widget.shell.currentIndex];\r\n\r\n    super.initState();\r\n  }\r\n\r\n  late MenuSegment currentlySelectedMenuSegment;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        leading: IconButton(\r\n          onPressed: () {\r\n            context.pop();\r\n          },\r\n          icon: Icon(Icons.arrow_back),\r\n        ),\r\n        actions: [\r\n          IconButton(\r\n            onPressed: () {\r\n              context.pop();\r\n            },\r\n            icon: Icon(Icons.close),\r\n          ),\r\n        ],\r\n        backgroundColor: Theme.of(context).colorScheme.background,\r\n        elevation: 0,\r\n      ),\r\n      body: SafeArea(\r\n        bottom: false,\r\n        child: SingleChildScrollView(\r\n          child: Column(\r\n            children: [\r\n              Column(\r\n                children: [\r\n                  const SizedBox(height: 16),\r\n                  const Text(\r\n                    \"MENU WELCOME\",\r\n                  ),\r\n                  const SizedBox(height: 16),\r\n                  SegmentedButton<MenuSegment>(\r\n                    style: const ButtonStyle(\r\n                      tapTargetSize: MaterialTapTargetSize.shrinkWrap,\r\n                      visualDensity: VisualDensity(\r\n                        horizontal: -1,\r\n                        vertical: -1,\r\n                      ),\r\n                    ),\r\n                    onSelectionChanged: (e) {\r\n                      \/\/ onMenuSegmentSelected(e.first);\r\n                      int index = MenuSegment.values.indexOf(e.first);\r\n                      widget.shell.goBranch(\r\n                        index,\r\n                        initialLocation: index == widget.shell.currentIndex,\r\n                      );\r\n                      setState(() {\r\n                        currentlySelectedMenuSegment = e.first;\r\n                      });\r\n                    },\r\n                    segments: const [\r\n                      ButtonSegment<MenuSegment>(\r\n                        value: MenuSegment.MENU1,\r\n                        label: Text(\"Menu 1\"),\r\n                        icon: Icon(Icons.account_circle_outlined),\r\n                      ),\r\n                      ButtonSegment<MenuSegment>(\r\n                        value: MenuSegment.MENU2,\r\n                        label: Text(\"Menu 2\"),\r\n                        icon: Icon(Icons.settings_outlined),\r\n                      ),\r\n                      ButtonSegment<MenuSegment>(\r\n                        value: MenuSegment.MENU3,\r\n                        label: Text(\"Menu 3\"),\r\n                        icon: Icon(Icons.credit_card_outlined),\r\n                      ),\r\n                    ],\r\n                    selected: {currentlySelectedMenuSegment},\r\n                    showSelectedIcon: false,\r\n                  ),\r\n                ],\r\n              ),\r\n              widget.shell,\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/70296188\/99cbea8e-1bf0-4a12-9ea8-e82fbe9716b4\r\n\r\n<\/details>\r\n\r\n\r\n\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I was able to replicate this using provided details.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>"],"labels":["package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"camera_web still asking for microphone permission","body":"### Steps to reproduce\r\n\r\nuse camera ^0.10.0\r\n=> installs camera_web 0.3.2+4\r\n\r\nCall `    final cameras = await availableCameras();`\r\n\r\n### Expected results\r\n\r\nThe web browser should ask for camera permission but not for microphone\r\n\r\n### Actual results\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/260983\/bb428196-6ea6-4b50-8512-5b0a6a26346f)\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/260983\/1f3497f6-6b82-4ea7-be5e-7ef920f240ed)\r\n\r\n","comments":["@AdrienLemaire \r\nThis seems to be working properly with `camera_web: ^0.3.2+4` and `camera: ^0.10.5+9`.\r\n\r\n<img width=\"430\" alt=\"Screenshot 2024-03-20 at 12 05 36 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/ddd7e873-7864-4be4-bf56-48a665fbb08e\">\r\n\r\nIt was fixed as part of https:\/\/github.com\/flutter\/packages\/pull\/4263\r\n\r\n\r\n\r\n> use camera 0.10.0\r\n\r\nThis is not the latest version and seems specific version you are using. Try above the one I mentioned.","@darshankawar I should have been more precise. Our pubspec.lock lists camera 0.10.5+9.\r\nAssuming that you've verified and cannot reproduce the issue, very strange. We lack time to build a reproducable demo for the time being, and maybe it's a local-env only issue, so we'll come back later if this proves to be a real issue in production with users refusing the use the application with this unwanted permission request.\r\n\r\nThanks for the quick reply :pray: "],"labels":["waiting for customer response","in triage"]},{"title":"[image_picker]  Crash on Backgrounding During Multi-Image Selection","body":"### Steps to reproduce\r\n\r\n\r\nThis issue occurs when the app is sent to the background after selecting a large number of images with `image_picker` before the `pickMultiImage` future completes. \r\n\r\n- Ensure you have the `image_picker` plugin installed in your Flutter project.\r\n- Implement a functionality to select multiple images using `image_picker.pickMultiImage()`.\r\n- Select a high number of images from the picker (e.g. 50 or more) to trigger the issue.\r\n- After selecting images but before the `pickMultiImage` future resolves, send the app to the background.\r\n- Return to the app \r\n\r\nThis is similar to #90779. While #90779 addresses performance slowdowns during pickMultiImage with large files, this new issue addresses a bug that occurs specifically when the app is sent to the background before pickMultiImage finishes processing a large number of images, independent of image size . This renders the app unusable, which differs from the performance delays mentioned in the existing issue. Therefore this new issue is to document this bug and investigate potential solutions.\r\n\r\nTested with \r\n- image_picker 1.0.7 and 1.0.4\r\n- on iOS simulators iPhone 12 (iOS 16.4), iPhone 15 (iOS 17.4) \r\n- on real device on iPhone 12 iOS 16.61\r\n\r\n### Expected results\r\n\r\n- The app should be able to go into the background while pickMultiImage is processing images without any problems (i.e., gracefully handle it). It shouldn't crash or freeze.\r\n- If the the selection is interrupted, the image_picker package should throw an error. This way, devs can be informed and take appropriate actions (like notifying the user or retrying the selection).\r\n\r\n### Actual results\r\n\r\nThe app is and remains unresponsive when bringing the app back to the foreground\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:io';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:image_picker\/image_picker.dart';\r\n\r\nvoid main() => runApp(const MainApp());\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) => const MaterialApp(home: App());\r\n}\r\n\r\nclass App extends StatefulWidget {\r\n  const App({super.key});\r\n\r\n  @override\r\n  State<App> createState() => _AppState();\r\n}\r\n\r\nclass _AppState extends State<App> {\r\n  List<File> imageFiles = [];\r\n  bool isLoading = false;\r\n\r\n  _openGallery() async {\r\n    setState(() => isLoading = true);\r\n\r\n    try {\r\n      var pictures = await ImagePicker().pickMultiImage();\r\n\r\n      if (pictures.isEmpty) {\r\n        debugPrint('Picker returned without any image selected');\r\n      } else {\r\n        imageFiles = pictures.map((picture) => File(picture.path)).toList();\r\n      }\r\n    } catch (e) {\r\n      debugPrint('Error picking images: $e');\r\n    } finally {\r\n      setState(() => isLoading = false);\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('View Image'),\r\n      ),\r\n      body: Center(\r\n        child: isLoading\r\n            ? const CircularProgressIndicator()\r\n            : Column(\r\n                mainAxisAlignment: MainAxisAlignment.spaceAround,\r\n                children: [\r\n                  imageFiles.isEmpty\r\n                      ? const Text('No Image Selected')\r\n                      : Flexible(\r\n                          child: Column(\r\n                            mainAxisSize: MainAxisSize.min,\r\n                            children: [\r\n                              const Text('Selected Images'),\r\n                              const SizedBox(height: 10.0),\r\n                              SizedBox(\r\n                                height: 200.0,\r\n                                child: ListView.builder(\r\n                                  shrinkWrap: true,\r\n                                  scrollDirection: Axis.horizontal,\r\n                                  itemCount: imageFiles.length,\r\n                                  itemBuilder: (context, index) {\r\n                                    return Padding(\r\n                                      padding: const EdgeInsets.all(8.0),\r\n                                      child: Image.file(\r\n                                        imageFiles[index],\r\n                                        width: 200.0,\r\n                                        height: 200.0,\r\n                                      ),\r\n                                    );\r\n                                  },\r\n                                ),\r\n                              ),\r\n                            ],\r\n                          ),\r\n                        ),\r\n                  ElevatedButton(\r\n                    style: ElevatedButton.styleFrom(\r\n                      backgroundColor: Colors.amber,\r\n                    ),\r\n                    child: const Text(\r\n                      'Select Image',\r\n                      style: TextStyle(\r\n                        color: Colors.white,\r\n                        fontSize: 16.0,\r\n                      ),\r\n                    ),\r\n                    onPressed: () => _openGallery(),\r\n                  ),\r\n                ],\r\n              ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/34327253\/8c277313-324b-4b95-abfa-cd2c4ec5c91a\r\n \r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\nNo log output\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.16.9, on macOS 14.4 23E214 darwin-arm64, locale en-CA)\r\n    \u2022 Flutter version 3.16.9 on channel stable at \/Users\/lenzpaul\/dev\/opt\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 41456452f2 (8 weeks ago), 2024-01-25 10:06:23 -0800\r\n    \u2022 Engine revision f40e976bed\r\n    \u2022 Dart version 3.2.6\r\n    \u2022 DevTools version 2.28.5\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n    \u2022 Android SDK at \/Users\/lenzpaul\/Library\/Android\/sdk\r\n    \u2022 Platform android-33, build-tools 33.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n     \u2022 iPhone 15 (mobile)        \u2022 3C7C7551-A280-425F-A465-FCC6AA3F84A2 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4\r\n      (simulator)\r\n    \u2022 iPhone 12 (mobile)        \u2022 C84069BC-654F-4021-9401-63B7803AA945 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-16-4\r\n      (simulator)\r\n    \u2022 macOS (desktop)           \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)              \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report @lenzpaul \r\nI do see the reported behavior, ie, app getting stuck after coming to foreground, but after some time, it does seem to render the UI and images selected, as shown in below video:\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/3a3989e0-5c7b-4046-8577-b38e93862098\r\n\r\nIndicating, the app takes a bit time to process the images and then show in the UI which led me to these open issues that you can check and confirm if they resemble your case or not:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/90779\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/85955\r\n\r\n\r\n> when the app is sent to the background before pickMultiImage finishes processing a large number of images, independent of image size\r\n\r\nI observed that if we select 10 images, we get same behavior, ie, app gets stuck for some time.\r\n\r\nIn your case, do you see the images being loaded at all or you just see the loading gets stuck and app becomes unresponsive ?\r\n\r\nI verified on iOS 15.3.1 (iphone 6s).\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"signal 11 (SIGSEGV) Cause: null pointer dereference","body":"@flutter-symbolizer-bot this\r\n\r\n```\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Build fingerprint: 'realme\/RMX3461\/RE54BFL1:13\/TP1A.220905.001\/R.15e7d74_1-2764f:user\/release-keys'\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Revision: '0'\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : ABI: 'arm64'\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Timestamp: 2024-03-19 16:46:41.049524833+0530\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Process uptime: 75s\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Cmdline: com.bigbasket.mobileapp.debug\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : pid: 23282, tid: 23387, name: 1.ui  >>> com.bigbasket.mobileapp.debug <<<\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : uid: 10542\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0000000000000000\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : Cause: null pointer dereference\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x0  0000000000000000  x1  b4000077d99adcb0  x2  0000000000000000  x3  0000000061766f4e\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x4  0000007748c07970  x5  0000000061766f4e  x6  b40000775627ae58  x7  0000000000000008\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x8  0000000000000100  x9  b4000077e00a7008  x10 0000000000000000  x11 0000000000000000\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x12 00000078058445f8  x13 000000794090d038  x14 000000000000000d  x15 0000000000000000\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x16 0000007817030648  x17 0000007940889ec0  x18 00000077fc8ca000  x19 b4000077de9cf0a0\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x20 b40000773bc10300  x21 b4000077de9cf0a0  x22 b4000077d9865500  x23 0000007816ba4a78\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x24 b400007756284250  x25 0000007805619000  x26 b4000077f2f6bc00  x27 000000761a42d1a0\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     x28 0000000800000076  x29 00000078057f5ae0\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :     lr  0000007816ae625c  sp  00000078057f57c0  pc  0000007816ae625c  pst 0000000080001000\r\n03-19 16:46:41.745 24236 24236 F DEBUG   : backtrace:\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :       #00 pc 00000000020a625c  \/data\/app\/~~XP5-hlfyN0E8xDCrf6g7Qw==\/com.bigbasket.mobileapp.debug-LeANIESWmdo7n1cmDZJb1A==\/lib\/arm64\/libflutter.so (BuildId: 883b4b008c0a3b943ac32e303b4b7c2af57acca4)\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :       #01 pc 00000000020a5bf8  \/data\/app\/~~XP5-hlfyN0E8xDCrf6g7Qw==\/com.bigbasket.mobileapp.debug-LeANIESWmdo7n1cmDZJb1A==\/lib\/arm64\/libflutter.so (BuildId: 883b4b008c0a3b943ac32e303b4b7c2af57acca4)\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :       #02 pc 00000000020a5a44  \/data\/app\/~~XP5-hlfyN0E8xDCrf6g7Qw==\/com.bigbasket.mobileapp.debug-LeANIESWmdo7n1cmDZJb1A==\/lib\/arm64\/libflutter.so (BuildId: 883b4b008c0a3b943ac32e303b4b7c2af57acca4)\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :       #03 pc 00000000020a6c74  \/data\/app\/~~XP5-hlfyN0E8xDCrf6g7Qw==\/com.bigbasket.mobileapp.debug-LeANIESWmdo7n1cmDZJb1A==\/lib\/arm64\/libflutter.so (BuildId: 883b4b008c0a3b943ac32e303b4b7c2af57acca4)\r\n03-19 16:46:41.745 24236 24236 F DEBUG   :       #04 pc 0000000000012238  [anon:dart-code]\r\n```","comments":["@flutter-symbolizer-bot  \r\n\r\n```\r\n[!] Flutter (Channel master, 3.21.0-10.0.pre.51, on macOS 14.2.1 23C71 darwin-arm64, locale en-IN)\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.0.5\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/ronitvinocha\/development\/flutter. Consider\r\n      adding \/Users\/ronitvinocha\/development\/flutter\/bin to the front of your path.\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2717] Xcode - develop for iOS and macOS\r\n    \u2717 Xcode installation is incomplete; a full installation is necessary for iOS and macOS development.\r\n      Download at: https:\/\/developer.apple.com\/xcode\/\r\n      Or install Xcode via the App Store.\r\n      Once installed, run:\r\n        sudo xcode-select --switch \/Applications\/Xcode.app\/Contents\/Developer\r\n        sudo xcodebuild -runFirstLaunch\r\n    \u2717 CocoaPods not installed.\r\n        CocoaPods is used to retrieve the iOS and macOS platform side's plugin code that responds to your plugin usage on the Dart side.\r\n        Without CocoaPods, plugins will not work on iOS or macOS.\r\n        For more info, see https:\/\/flutter.dev\/platform-plugins\r\n      To install see https:\/\/guides.cocoapods.org\/using\/getting-started.html#installation for instructions.\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2023.1)\r\n[\u2713] Connected device (2 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n```","Hi @ronitvinocha,\r\nWhen opening an issue, please try to provide all information indicated in the template so that we can address the issue properly (See bug issue template [here](https:\/\/github.com\/flutter\/flutter\/issues\/new?assignees=&labels=&projects=&template=2_bug.yml))\r\n\r\nThis looks like a crash in production, so please provide the following information:\r\n- The list of affected device info (OS, model) and the percentage occurrence of the crash\r\n- The entire crash stack trace\r\n\r\nMaybe related\/similar to https:\/\/github.com\/flutter\/flutter\/issues\/66921."],"labels":["waiting for customer response","in triage"]},{"title":"Add the createDependency parameter to ModalRoute.of","body":"Added `createDependency` parameter to `ModalRoute.of`, which allows developer to freely choose to use `dependOnInheritedWidgetOfExactType` or `getElementForInheritedWidgetOfExactType` to obtain `ModalRoute`.\r\n\r\nReleated issue:\r\n- https:\/\/github.com\/flutter\/flutter\/issues\/145387\r\n- https:\/\/github.com\/flutter\/flutter\/issues\/145136\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: routes"]},{"title":"Some user report webview  page keep flicker\uff0cbut I can't reproduction\uff01","body":"### Steps to reproduce\n\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/17975501\/9a4b5089-8bd8-4abd-aca0-3de1fe33006a\r\n\r\n\n\n### Expected results\n\nnot flicker\n\n### Actual results\n\nflicker\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n showModalBottomSheet<int>(\r\n      routeSettings: const RouteSettings(name: \"\/gamePlayPage\"),\r\n      backgroundColor: Colors.transparent,\r\n      isScrollControlled: true,\r\n      useRootNavigator: true,\r\n      enableDrag: false,\r\n      context: Get.context!,\r\n      barrierColor: Color(0xff0C0F0A).withOpacity(0.6),\r\n      builder: (BuildContext context) {\r\n        return SizedBox(\r\n          width: HITAScreenSize.screenWidth,\r\n          height: HITAScreenSize.screenWidth \/ radio,\r\n          child: GamePlayPage(gameUrl: finalUrl),\r\n        );\r\n      });\r\nclass GamePlayPage extends StatefulWidget {\r\n  final String gameUrl;\r\n\r\n  const GamePlayPage({super.key, required this.gameUrl});\r\n\r\n  @override\r\n  State<GamePlayPage> createState() => _GamePlayState();\r\n}\r\n\r\nclass _GamePlayState extends State<GamePlayPage> {\r\n  bool isWebviewCreated = false;\r\n  bool webviewLoadError = false;\r\n  String? _launchingUrl;\r\n  bool? _isLaunched;\r\n  late WebViewWidget _webViewWidget;\r\n  int pageStartCostTime = 0;\r\n  int pageEndCostTime = 0;\r\n  Map qualityMap = {};\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    _initWebVc();\r\n    initTime = DateTime.now().millisecondsSinceEpoch;\r\n    qualityMap['user_click_time'] = clickGameTime;\r\n    qualityMap['webview_page_init_time'] = initTime;\r\n    if (WebViewPlatform.instance is AndroidWebViewPlatform) {\r\n      _webViewWidget = WebViewWidget.fromPlatformCreationParams(\r\n        params: AndroidWebViewWidgetCreationParams(\r\n          controller: _webViewController!.platform,\r\n          displayWithHybridComposition: false,\r\n        ),\r\n      );\r\n    } else {\r\n      _webViewWidget = WebViewWidget.fromPlatformCreationParams(\r\n        params: WebKitWebViewWidgetCreationParams(\r\n          controller: _webViewController!.platform,\r\n        ),\r\n      );\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Stack(\r\n      children: [\r\n        _webViewWidget,\r\n        if (webviewLoadError)\r\n          const Center(\r\n            child: Text('retry!'),\r\n          ),\r\n      ],\r\n    );\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _webViewController?.loadHtmlString(\"<!DOCTYPE html><html><head><\/head><body><\/body><\/html>\");\r\n    super.dispose();\r\n  }\r\n  void _initWebVc() {\r\n    if (_webViewController != null) {\r\n      _webViewController!.loadRequest(Uri.parse(\"${widget.gameUrl}&_t=${DateTime.now()}\"));\r\n      return;\r\n    }\r\n\r\n    if (Platform.isAndroid) {\r\n      _webViewController = WebViewController();\r\n    } else {\r\n      _webViewController =\r\n          WebViewController.fromPlatform(WebKitWebViewController(const PlatformWebViewControllerCreationParams())..setInspectable(Deploy.mode == Mode.debug));\r\n    }\r\n    _webViewController!\r\n      ..setJavaScriptMode(JavaScriptMode.unrestricted)\r\n      ..setBackgroundColor(Colors.transparent)\r\n      ..setNavigationDelegate(NavigationDelegate(\r\n        onProgress: (int progress) async {\r\n          \/\/ update loading bar\r\n        },\r\n        onPageStarted: (String url) {\r\n          qualityMap['webview_page_started_time'] = DateTime.now().millisecondsSinceEpoch ;\r\n        },\r\n        onPageFinished: (String url) async {\r\n          pageEndCostTime = DateTime.now().millisecondsSinceEpoch - initTime;\r\n          qualityMap['webview_page_finished_time'] = DateTime.now().millisecondsSinceEpoch;\r\n          _sendGameLoadTime(qualityMap);\r\n        },\r\n        onWebResourceError: (WebResourceError error) {},\r\n        onNavigationRequest: (NavigationRequest request) async {\r\n          if (!request.url.contains(HITARegs.strictHttp)) {\r\n            if (_launchingUrl == request.url && _isLaunched != true) {\r\n            } else {\r\n              _launchingUrl = request.url;\r\n              var uri = Uri.tryParse(_launchingUrl!);\r\n              await launchUrl(uri!);\r\n            }\r\n            return NavigationDecision.prevent;\r\n          }\r\n          return NavigationDecision.navigate;\r\n        },\r\n      ))\r\n      ..loadRequest(Uri.parse(widget.gameUrl));\r\n  }\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\nyhb@yhdeMacBook-Pro athh % flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.7.12, on macOS 14.1 23B74 darwin-arm64, locale zh-Hans-CN)\r\n    \u2022 Flutter version 3.7.12 on channel stable at \/Users\/yhb\/dev\/flutter3.7.12\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 4d9e56e694 (11 \u4e2a\u6708\u524d), 2023-04-17 21:47:46 -0400\r\n    \u2022 Engine revision 1a65d409c7\r\n    \u2022 Dart version 2.19.6\r\n    \u2022 DevTools version 2.20.1\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n    \u2022 Android SDK at \/Users\/yhb\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.1\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.12.1\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n\r\n[\u2713] VS Code (version 1.86.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 MGA AL40 (mobile)    \u2022 YYUBB23318215658          \u2022 android-arm64  \u2022 Android 10 (API 29)\r\n    \u2022 Camor Phone (mobile) \u2022 00008101-00010D343C22001E \u2022 ios            \u2022 iOS 17.1 21B74\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.1 23B74 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n                                                                                                                                                                                                                                                                                                                                                                   H\r\nTTP Host availability check is taking a long time...\u287f                                                                                                                                                                                                                                                                                                              [!] HTTP Host Availability\r\n    \u2717 HTTP host \"https:\/\/storage.flutter-io.cn\" is not reachable. Reason: An error occurred while checking the HTTP host: Connection terminated during handshake\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n<\/details>\r\n","comments":["Hi @byh000 \r\nIf you encounter behavior that you believe could be a [webview_flutter](https:\/\/pub.dev\/packages\/webview_flutter) package bug, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that represents the problem. \r\n\r\nYou should narrow down the issue by removing the usage of 3rd party plugins\/packages one by one, unrelated\/unaffected pages, and isolating the affected page into a minimal sample code that can produce the issue. And please share it here when you have such an example. \r\n\r\nAlso, I see you are using an old Flutter version. You may try upgrading to the latest Flutter version and re-check this as well."],"labels":["waiting for customer response","in triage"]},{"title":"Infinite Loops and Hangs on CanvasKit Web ","body":"### Steps to reproduce\n\nOccasionally when running into out of memory problems you will get stuck in an infinite loop in the WASM code. \r\n\r\nThe problem is that CanvasKit is being compiled with aborting malloc enabled. However, CanvasKit uses Mutexes like this:\r\n\r\nhttps:\/\/github.com\/google\/skia\/blob\/main\/modules\/skparagraph\/src\/ParagraphCache.cpp\r\n\r\nThis mutex will lock until its destructor is called. The problem is that if abort() is called, stack unwinding won't happen and the mutex won't call its destructor and CanvasKit will be left in an invalid state where the next call will lock the process. Normally, abort() would terminate the process, but it doesn't in WASM. \r\n\r\nThe solution is to turn off aborting malloc, and turn on wasm exceptions, so that destructors are properly called, exceptions can be caught, and stack unwinding can happen. \r\n\r\nCanvasKit needs to be compiled with -fwasm-exceptions AND -sABORTING_MALLOC=0 in flutter web engine to fix these problems.\r\n\r\n\r\n\r\n\n\n### Expected results\n\nDon't go into infinite loops and leave mutexes locked.\n\n### Actual results\n\nApp will hang if entering code locked by a mutex in canvaskit and then an exception occurs (OOM is easiest way to simulate).\n\n### Code sample\n\nSee: https:\/\/github.com\/flutter\/flutter\/issues\/145134\r\n\r\nIt can be hard to repro because of other issues that cause flutter to stop working when unhandled exceptions happen in places that aren't guarded, but in a local build I've fixed a lot of those problems, and this hang be reproduced 100% of the time.\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["> However, CanvasKit uses Mutexes like this:\r\n\r\nDid you want to link to a specific line here @jezell?\r\n\r\n\/cc @yjbanov @eyebrowsoffire ","@mraleph the flags are defined here for canvaskit in the flutter build, and you can see it disables exception catching:\r\n\r\nhttps:\/\/github.com\/flutter\/engine\/blob\/main\/skia\/modules\/canvaskit\/BUILD.gn#L162\r\n\r\nThough I think the -fwasm-exceptions flag needs to be turned on for all dependencies at both compile and link time to work properly. A specific example in paragraphcache.cpp is:\r\n\r\nhttps:\/\/github.com\/google\/skia\/blob\/af65631d3afc06d59ddf7dac158b28da322c97d0\/modules\/skparagraph\/src\/ParagraphCache.cpp#L288\r\n\r\n```cpp\r\nvoid ParagraphCache::reset() {\r\n    SkAutoMutexExclusive lock(fParagraphMutex);\r\n#ifdef PARAGRAPH_CACHE_STATS\r\n    fTotalRequests = 0;\r\n    fCacheMisses = 0;\r\n    fHashMisses = 0;\r\n#endif\r\n    fLRUCacheMap.reset();\r\n    fLastCachedValue = nullptr;\r\n}\r\n```\r\n\r\nA little sample I put together to confirm this behavior between different flags:\r\n\r\n```cpp\r\n#include <malloc.h>\r\n#include <emscripten.h>\r\n\r\nint times = 0;\r\n\r\nclass Test { \r\n    int a[10000];\r\n\r\n    public:\r\n      Test() {\r\n       }    \r\n       ~Test() {\r\n       } \r\n};\r\n\r\n\r\nclass Mutex { \r\n    public:\r\n      Mutex() {\r\n      }     \r\n      ~Mutex() {\r\n        times++;\r\n      }\r\n};\r\nextern \"C\" EMSCRIPTEN_KEEPALIVE size_t catchtest() {\r\n     \r\n  Mutex m = Mutex();\r\n  try { \r\n      \r\n       for(int i = 0; i < 1*1024*1024*1024;i++) {\r\n         Test* t=  new Test();\r\n       }\r\n    } catch(...) {\r\n    }\r\n      return times;\r\n}\r\n\r\n\r\nextern \"C\" EMSCRIPTEN_KEEPALIVE size_t failtest() {\r\n   \r\nMutex m = Mutex();\r\n      for(int i = 0; i < 1*1024*1024*1024;i++) {\r\n        Test *t = new Test();\r\n      }\r\n     return times;\r\n}\r\n\r\nextern \"C\" EMSCRIPTEN_KEEPALIVE size_t count() {\r\n    return times;\r\n}\r\n\r\n\r\n```\r\n\r\nThis will cause an OOM exception inside catchtest and failtest. The counter will increment in the destructor, so if you call Module._catchtest() and Module._failtest() in the browser console you can see the difference between the two:\r\n\r\n```em++ test.cpp -fwasm-exceptions -gsource-map -sWASM -sABORTING_MALLOC=0```\r\n\r\n```em++ test.cpp -fwasm-exceptions -gsource-map -sWASM -sABORTING_MALLOC=1```\r\n\r\nWith aborting malloc turned on, the code doesn't increment the counter or catch the exception, and you can't catch it outside either ```try { Module._failtest(); } catch { }``` will not stop the behavior. When you turn off aborting malloc, the sample will behave correctly.\r\n"],"labels":["engine","platform-web","e: web_canvaskit","e: wasm","e: web_skwasm","team-web"]},{"title":"Skia Gold can take a screenshot before the application is launched.","body":"Or after it has crashed. This happened [in this instance](https:\/\/flutter-engine-gold.skia.org\/search?issue=51496&crs=github&patchsets=2&corpus=flutter-engine) on [this patch](https:\/\/github.com\/flutter\/engine\/pull\/51496#issuecomment-2005164546).\r\n\r\nThe guidance in sheriffs chat was that it should not be triaged either negative or positive.\r\n\r\n\r\n<img width=\"886\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/44085\/7c0b0ce1-32b1-4061-93f0-c7577eb88911\">\r\n","comments":[],"labels":["platform-android","engine","team-android"]},{"title":"Make sure focus works with platform views","body":"> [!NOTE]  \r\n> This issue is a **continuation of**:\r\n> * https:\/\/github.com\/flutter\/flutter\/issues\/137443\r\n> * https:\/\/github.com\/flutter\/flutter\/issues\/144235\r\n\r\nEnsure that the new focus system works well with platform views. Users should be able to tab in and out of platform views\/web content as if they were using a normal web app.\r\n\r\n(Some especial attention may be needed to handling mouse in\/out if the platform view contains an `<iframe>`, because it's likely that we would never receive a `focusin` event coming from the iframe element itself.)","comments":["\/cc @tugorez (in case you want to add more details!)"],"labels":["c: new feature","engine","a: platform-views","platform-web","f: focus","P2","team-web","triaged-web"]},{"title":"Make sure focus works with text fields","body":"> [!NOTE]  \r\n> This issue is a **continuation of**:\r\n> * https:\/\/github.com\/flutter\/flutter\/issues\/137443\r\n> * https:\/\/github.com\/flutter\/flutter\/issues\/144235\r\n\r\nEnsure that the new focus system works well with text fields. Users should be able to tab in and out of text fields as if they were using a normal web app.\r\n","comments":["\/cc @tugorez (in case you want to add more details!)"],"labels":["a: text input","c: new feature","engine","platform-web","f: focus","P2","team-web","triaged-web"]},{"title":"[web] explicit platform view compositing modes","body":"Today platform views are composited based on two pieces of information available to the engine:\r\n\r\n- The platform view's place in the layer tree.\r\n- The value of `isVisible` in the [RegisterViewFactory](https:\/\/api.flutter.dev\/flutter\/widgets\/RegisterViewFactory.html) callback signature.\r\n\r\nThe engine then makes the rest of the decisions. These decisions can be always predictable, have unpredictable performance features, or lack correctness.\r\n\r\n### Always predictable decisions \ud83d\udc4d \r\n\r\nThe `isVisible` is a clear unambiguous flag that allows the engine perform _guaranteed_ optimizations with predictable visual outcomes. For example, if the developer set the flag to `false` and their platform view does not indeed render anything visible (e.g. `PointerInterceptor` and `Link` widgets), the behavior is always correct and the platform view incurs minimal performance overhead.\r\n\r\n### Unpredictable performance \ud83d\udc4e \r\n\r\nThe [minimum overlay optimization](https:\/\/github.com\/flutter\/engine\/pull\/47317) makes correct visual choices, but its performance is not predictable because the overlay count is sensitive to overlaps between pictures and platform views. Just 1px of overlap can cause a new overlay created. If the overlap exists for every platform view (e.g. they are added in an loop and share the same structure), overlays multiply. Overlaps can come and go during animations, which can create subtle performance cliffs in the middle of transitions.\r\n\r\n### Lack of correctness \ud83d\udc4e \r\n\r\nFlutter Web limits the number of overlays to avoid running out of memory. At some point it stops creating new overlays, and instead attempts to make the [least wrong compositing decision](https:\/\/github.com\/flutter\/engine\/pull\/51397).\r\n\r\n## Proposal\r\n\r\nBoth the minimum overlay optimization and overlay limit are effective at keeping performance reasonable, and these kinds of heuristics are the only option without any developer hints. However, if the developer can provide more information, the engine can do a better job.\r\n\r\nProvide a set of compositing modes that would provide both predictable performance and correctness guarantees. Based on the observation of a few real-world apps, the following modes are good candidates:\r\n\r\n- Proposed by @jezell in https:\/\/github.com\/flutter\/engine\/pull\/51397#issuecomment-1998099092: an \"always on top\" mode that would always put the platform view on top of all Flutter canvases. It guarantees to never incur an overlay, and it guarantees a specific compositing effect. It may or may not be the right choice for a particular use-case, but there's nothing to guess w.r.t. what it does.\r\n- \"always behind\": mutually exclusive with \"always on top\"; places the platform view behind all Flutter canvases. Performance and correctness guarantees are also guaranteed.\r\n- \"mask\": a `(shape, color filter)` tuple (perhaps based on `Path` and `MaskFilter`) applied to layers composited behind the platform view. The key use-case is to \"burn a hole\" of a given shape through the canvas revealing the platform view that's composited behind it. The mask would be used in conjunction with the \"always behind\" mode so the engine places the platform view behind the \"hole\".\r\n\r\n(NOTE: on the web, the implementation of `alwaysBehind` is likely to be the same as `isInvisible`, but each engine implementation is free to deviate as the two modes are semantically different)\r\n","comments":["@yjbanov, few months ago we landed this in the engine: https:\/\/github.com\/flutter\/engine\/pull\/43301 It reduces the number overlays drastically. In fact unless there is some weird sandwiched overlapping,  the embedder can usually get away with just two layers regardless of the number of platform views. \r\n\r\nThe algorithm is described here: https:\/\/docs.google.com\/document\/d\/1YHwVz7-F03psEzHxByGka_lIFaDV5K90BJMbNxQeK4k\/edit?resourcekey=0-n4_VcUnMU-99sjJ6C1_Ycw\r\n\r\nIt does rely on a [DlRegion](https:\/\/github.com\/flutter\/engine\/blob\/main\/display_list\/geometry\/dl_region.cc) which we introduced a while back, but that could be reimplemented in javascript.\r\n\r\nThis might be something to consider. ","Also, Skia has SkRegion that could be used for that, but I don't think that's exposed through canvaskit?","@knopp the problem is that we don't need overlays reduced, we need them eliminated. This proposal allows them to be eliminated, which I think is a massive win. In our case we are building design tools, so we need predictable behavior for the end users, not crashing when you happen to drop in too many things that cause overlays to be created and the algorithm didn't save you.","With the PR I mentioned if there is no Flutter content on top of platform view, there is no overlay. The overlay only happens when there is actual Flutter content painted on top of platform view, and even then the minimal amount of overlay surfaces is used. For example you can have 20 platform views, but unless there is Flutter content deliberatly sandwiched between them in a way where it is below one platform view and above other platform view, you will be able to represent this with just one overlay surface (regardless of number of platform views). And if nothing paints over platform view, there is no overlay at all.\r\n\r\n","@knopp yeah, that works great if you have the ability to control the stacking order and position but in our case we don't. the user controls the placement of objects in their canvas, and the position in the stack of the items. If a user drops a video, then a shape, there is now a shape on top of the video. If they drop another video and another shape and so on, you rather quickly run out of platform layers. There's no way for us to guarantee predictable behavior unless we can eliminate the overlays.","Nevermind, I just noticed that https:\/\/github.com\/flutter\/engine\/pull\/47317 has landed already.","@knopp yeah, we still have the problem after that was merged, it's definitely improved in some of the more basic cases where just displaying a grid of participants with names in a video conference would blow up before.","I see where the difference is. https:\/\/github.com\/flutter\/engine\/pull\/47317 works based on picture cull rect. That's *way too pessimistic*, I can imagine there are many situation where the cull rect overlaps platform view even though there's no actual content painted over it. In desktop embedder this is done based on picture RTree, which covers the actual area where picture is drawn. But I don't think this the RTree is exposed by canvaskit in any way right now :-\/. If there was a way to obtain the Rtree from the recorded picture that'd likely improve things significantly."],"labels":["platform-web","e: web_canvaskit","P2","e: web_skwasm","team-web","triaged-web"]},{"title":"Global Surface Pool for macOS","body":"### Document Link\r\n\r\n[http:\/\/flutter.dev\/go\/global-surface-pool-for-macos](\r\nhttps:\/\/docs.google.com\/document\/d\/1YUDyCQ1ocdFICOdWeZuuoOm_8bmmxWr0CnC-Y-qXuNI\/edit#heading=h.pub7jnop54q0)\r\n\r\n### What problem are you solving?\r\n\r\nWhile implementing the embedder API for multi-view, an obstacle arises that macOS requires backing stores to be created with a view ID, due to the fact that the FlutterSurfaceManager is owned by FlutterView. This requires an additional field for the embedder API, and macOS platform seems to be the only platform that needs it. Moreover, it is cleaner if backing stores can be created without being tied to a view, since they will be presented to a view later.","comments":[],"labels":["design doc",":scroll:"]},{"title":"Update tokens to v2.3.5","body":"* Updated the Material Design tokens to v2.3.5\r\n* Linear and circular progress indicator token sets are deprecated in v0.207. The `md.com.progress-indicator` token set was created and should be used instead.\r\n* tokens is now using [semantic versioning](https:\/\/semver.org\/) \uff08Thanks @guidezpl for reminding:) )\r\n* ~Fixes #128877. The default text style is updated to `bodyLarge` now:)~ Added TODOs for the label text style of `PopupMenuButton`. Will create a separate PR because this change breaks Google testing.\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n","comments":[],"labels":["a: text input","framework","f: material design"]},{"title":"Flutter Web: Embind reports leak of Typeface with CanvasKit","body":"### Steps to reproduce\r\n\r\nTurn on -sSAFE_HEAP and -sASSERTIONS on the Canvaskit wasm build and do something that loads a font and renders text (I used google fonts package) with the wasm build selected as the local engine.\r\n\r\n\r\n### Expected results\r\n\r\nTypeface doesn't leak\r\n\r\n### Actual results\r\n\r\nTypeface leaks:\r\n\r\n```dart\r\n\r\ncanvaskit.js:129 Embind found a leaked C++ instance Typeface <0x00227930>.\r\nWe'll free it automatically in this case, but this functionality is not reliable across various environments.\r\nMake sure to invoke .delete() manually once you're done with the instance instead.\r\nOriginally allocated\r\n    at Function._MakeTypefaceFromData (http:\/\/localhost:10803\/canvaskit\/chromium\/canvaskit.js:141:227)\r\n    at a.Typeface.MakeTypefaceFromData (http:\/\/localhost:10803\/canvaskit\/chromium\/canvaskit.js:82:299)\r\n    at g.TypefaceFontProvider.registerFont (http:\/\/localhost:10803\/canvaskit\/chromium\/canvaskit.js:71:455)\r\n    at Object.TypefaceFontProviderExtension$124registerFont [as TypefaceFontProviderExtension|registerFont] (http:\/\/localhost:10803\/dart_sdk.js:202827:18)\r\n    at [_registerWithFontProvider] (http:\/\/localhost:10803\/dart_sdk.js:151213:64)\r\n    at _engine.SkiaFontCollection.new.registerDownloadedFonts (http:\/\/localhost:10803\/dart_sdk.js:151328:38)\r\n    at _engine.SkiaFontCollection.new.loadAssetFonts (http:\/\/localhost:10803\/dart_sdk.js:151304:14)\r\n    at loadAssetFonts.next (<anonymous>)\r\n    at http:\/\/localhost:10803\/dart_sdk.js:48832:33\r\n    at _RootZone.runUnary (http:\/\/localhost:10803\/dart_sdk.js:48689:59)\r\n    at _FutureListener.thenAwait.handleValue (http:\/\/localhost:10803\/dart_sdk.js:44085:29)\r\n    at handleValueCallback (http:\/\/localhost:10803\/dart_sdk.js:44689:49)\r\n    at _Future._propagateToListeners (http:\/\/localhost:10803\/dart_sdk.js:44727:17)\r\n    at [_completeWithValue] (http:\/\/localhost:10803\/dart_sdk.js:44568:23)\r\n    at async._AsyncCallbackEntry.new.callback (http:\/\/localhost:10803\/dart_sdk.js:44602:35)\r\n    at Object._microtaskLoop (http:\/\/localhost:10803\/dart_sdk.js:49145:13)\r\n    at _startMicrotaskLoop (http:\/\/localhost:10803\/dart_sdk.js:49151:13)\r\n    at http:\/\/localhost:10803\/dart_sdk.js:44951:9\r\n    \r\n```\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["> -sSAFE_HEAP and -sASSERTIONS on the Canvaskit wasm build\r\n\r\nCould you please elaborate on this? \r\n\r\nI assume that this error can be reproduced with a simple text using the google fonts package as shown below. If not, please share a minimal sample code. Thanks!\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:google_fonts\/google_fonts.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: Text(\r\n            'This is Google Fonts',\r\n            style: GoogleFonts.lato(),\r\n          ),\r\n        ),\r\n      ),\r\n    ),\r\n  );\r\n}\r\n\r\n```","@huycozy this is a compiler option that can be used when compiling the engine which prints out when memory leaks happen. It can be turned on here in a custom canvaskit build:\r\n\r\nhttps:\/\/github.com\/flutter\/engine\/blob\/main\/skia\/modules\/canvaskit\/BUILD.gn#L162\r\n\r\nI enabled this setting to help track down some memory leaks and bugs we were seeing in our apps, and it is reporting a memory leak is happening. I believe that code sample should be sufficient, but to get the debug build you need to turn on those options in the .gn file and then use felt to rebuild the engine and run your sample against the local engine.","Thanks for the update. Unfortunately, I have my issue with Python 12 when building local engine (it was working before), so I can't replicate this right now, but I will give it a try later. \r\n\r\nIn the meantime, I will label the issue for other's thoughts. Could you please also share the `engine hash` you are building at, along with the output of `flutter doctor -v` that may help others looking at this issue can have more information to investigate further?\r\n"],"labels":["waiting for customer response","engine","platform-web","e: web_canvaskit","e: local-engine-development","e: wasm","e: web_skwasm","team-web"]},{"title":"Make upgrading Simulator version (when upgrading Xcode) easier","body":"When we upgrade Xcode version, we also manually upgrade the Simulator version to the latest. This requires manually changing a hard coded value in various places in flutter\/packages and flutter\/engine. In addition, in flutter\/engine, we have to generate and replace iOS Scenarios golden files.\r\n\r\nThese processes could be improved by doing the following:\r\n- [ ] Update test steps so we use the current Xcode's preferred simulator runtime rather than a hardcoded value\r\n- [ ] Create a script\/tool to automate updating of iOS engine golden files and Scenarios project.pbxproj file (perhaps could be part of https:\/\/github.com\/flutter\/engine\/tree\/main\/tools\/engine_tool?)\r\n\r\n## flutter\/packages\r\nPlaces we use a hardcoded Simulator version:\r\n* https:\/\/github.com\/flutter\/packages\/blob\/60a1ffc2f77fade3e375a98177729b2f3e90e06e\/.ci\/scripts\/create_simulator.sh#L12\r\n* https:\/\/github.com\/flutter\/packages\/blob\/60a1ffc2f77fade3e375a98177729b2f3e90e06e\/.ci\/targets\/ios_platform_tests.yaml#L25\r\n* https:\/\/github.com\/flutter\/packages\/blob\/60a1ffc2f77fade3e375a98177729b2f3e90e06e\/packages\/pigeon\/tool\/shared\/test_suites.dart#L299-L300\r\n\r\n## flutter\/engine\r\nPlaces we use a hardcoded Simulator version:\r\n* https:\/\/github.com\/flutter\/engine\/blob\/ea848c3b2443d822dcdb7830b35c215559ec047a\/testing\/scenario_app\/run_ios_tests.sh#L63-L64\r\n\r\nExample of upgrading iOS Scenarios golden files\r\n* https:\/\/github.com\/flutter\/engine\/pull\/49833\r\n\r\n## flutter\/flutter\r\nWe already do this for flutter\/flutter: https:\/\/github.com\/flutter\/flutter\/blob\/56cc7923ceb86286368914c3847b20e6debe47d4\/dev\/devicelab\/lib\/framework\/ios.dart#L69-L125","comments":["Could go hand in hand with https:\/\/github.com\/flutter\/flutter\/issues\/143953","Is there a potential for this to make updating Xcode harder, because we wouldn't be able to separate issues caused by updating Xcode from issues caused by upgrading the simulator OS version?","> Is there a potential for this to make updating Xcode harder, because we wouldn't be able to separate issues caused by updating Xcode from issues caused by upgrading the simulator OS version?\r\n\r\nI think we could make it easy to add a hard coded version if needed.\r\n\r\nAnother reason to do this that I just remembered is that we're now clearing the cache of old versions of Xcode\/simulators periodically. So if we upgrade Xcode (which will change the default simulator downloaded) but don't change the hard coded simulator version and it isn't defined in the ci.yaml, it may get removed from the bot eventually which would cause the tests to fail unexpectedly.","> I think we could make it easy to add a hard coded version if needed.\r\n\r\nSG. In generally I'd be happy to see packages not using a hard-coded version when we don't have to be; it's been a pain point in the past."],"labels":["platform-ios","engine","P2","team-ios","triaged-ios"]},{"title":"\" Unable to determine Android Studio version\"","body":"### Use case\r\n\r\n```console\r\nkali@DESKTOP-1CNI336:\/mnt\/c\/Users\/ninja\/Desktop\/instabot\/app$ flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Ubuntu 22.04.4 LTS 5.15.146.1-microsoft-standard-WSL2, locale C.UTF-8)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/home\/kali\/Applications\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (11 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0-rc1)\r\n    \u2022 Android SDK at \/home\/kali\/Applications\r\n    \u2022 Platform android-34-ext10, build-tools 34.0.0-rc1\r\n    \u2022 ANDROID_SDK_ROOT = \/home\/kali\/Applications\/android-studio\r\n    \u2022 Java binary at: \/snap\/android-studio\/current\/jbr\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at google-chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 Ubuntu clang version 14.0.0-1ubuntu1.1\r\n    \u2022 cmake version 3.28.3\r\n    \u2022 ninja version 1.10.1\r\n    \u2022 pkg-config version 0.29.2\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/snap\/android-studio\/150\r\n    \u2022 Flutter plugin version 78.2.2\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[!] Android Studio (version unknown)\r\n    \u2022 Android Studio at \/snap\/android-studio\/current\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2717 Unable to determine Android Studio version.\r\n    \u2022 android-studio-dir = \/snap\/android-studio\/current\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] Connected device (1 available)\r\n    \u2022 Linux (desktop) \u2022 linux \u2022 linux-x64 \u2022 Ubuntu 22.04.4 LTS 5.15.146.1-microsoft-standard-WSL2\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n\r\nhow to fix that\r\n\r\n### Proposal\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/126773543\/46ecb762-d063-4edc-9fb9-958080c655f8)\r\n","comments":["Could you share which Android Studio version on `\/snap\/android-studio\/current`? Maybe some pre-released versions haven't been detected by Flutter tool."],"labels":["waiting for customer response","in triage"]},{"title":"Flutter Package google_sign_in shows the screen \"Couldn't sign in\" but no exception is thrown and there is no way to get out of the screen without quitting the app.","body":"### Steps to reproduce\r\n\r\n1. Install google_sign_in ^6.2.1\r\n2. Enter this code:\r\n\r\n\r\n```dart\r\nFuture<void> _googleLogin() async {\r\n    const webClientId = 'webclientId' \/\/ Enter the real web client id from cloud console\r\n\r\n    final GoogleSignIn googleSignIn = GoogleSignIn(\r\n      serverClientId: webClientId,\r\n      scopes: [\r\n        'email',\r\n      ],\r\n    );\r\n    try {\r\n      final googleUser = await googleSignIn.signIn();\r\n      if (googleUser == null) {\r\n        throw 'Google Sign In failed';\r\n      }\r\n      final googleAuth = await googleUser.authentication;\r\n      final accessToken = googleAuth.accessToken;\r\n      final idToken = googleAuth.idToken;\r\n\r\n      if (accessToken == null) {\r\n        throw 'No Access Token found.';\r\n      }\r\n      if (idToken == null) {\r\n        throw 'No ID Token found.';\r\n      }\r\n  }\r\n```\r\n\r\n### Expected results\r\n\r\nThe googleSignIn.signIn(); method should either succeed or throw an error. Instead, the code is stuck on this method execution and the screen says \"couldn't sign in\" with no way to go back or debug.\r\n\r\n### Actual results\r\n\r\n<img width=\"469\" alt=\"Screenshot 2024-03-18 at 12 56 37\u202fPM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/7901383\/3e6baa46-abd9-44b1-9ced-8cbe827015fc\">\r\n\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n    final GoogleSignIn googleSignIn = GoogleSignIn(\r\n      serverClientId: webClientId,\r\n      scopes: [\r\n        'email',\r\n      ],\r\n    );\r\n    try {\r\n      final googleUser = await googleSignIn.signIn();\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/7901383\/3b9261ab-0db6-4e06-a552-8287733a182a\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en-US)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2023.2)\r\n[\u2713] VS Code (version 1.87.2)\r\n[\u2713] VS Code (version 1.88.0-insider)\r\n[\u2713] Connected device (4 available)\r\n[\u2713] Network resources","comments":["Hi @arc4randall, what platform(s) are you seeing this issue on? \r\n\r\nHave you completed the required setup for the platform? \r\n\r\nDoes the serverClientId that you set actually belong to your backend server? Otherwise you should be setting the clientId instead. ","Hi @arc4randall, what platform(s) are you seeing this issue on? \r\n\r\nHave you completed the required setup for the platform? \r\n\r\nDoes the serverClientId that you set actually belong to your backend server? Otherwise you should be setting the clientId instead. ","I am running this on Android Emulator Pixel 8 running VanillaIceCream. I set the client ID from Google Cloud Console.","Does the emulator you're using have google play support?"],"labels":["waiting for customer response","in triage"]},{"title":"Add a function to get the current mouse position in CustomPainter","body":"### Use case\n\nAdding a way to retrieve the current mouse position may at first sound like something unneeded. After all, you can already use ``MouseRegion`` to get the exact same functionality. But there is a problem here. \r\nWhat if you want to use a ``CustomPainter`` that runs at a consistent frame rate using a ``Timer``. Then it's impossible for you to accurately get the mouse position from the ``MouseRegion`` widget because it will be desynchronized with the  current frame. This is a problem because as soon as you want something to follow the mouse or even replace the mouse cursor with a custom one, the object following the mouse is gonna flicker constantly.\r\nFor this reason, it would be really useful to have a custom method that enables the user to just retrieve the current mouse position in the window. It's gonna enable people to build more interactive experiences using the CustomPainter that aren't restricted to the default frame rate. For example, in my app, I have a tabletop simulation that runs in multiplayer. Currently, when you drag an object on the table, it doesn't follow the mouse properly.  Through the implementation of the method I suggested, I would then be able to make it follow the mouse better.\n\n### Proposal\n\nAs said above, I would like a method to retrieve the current mouse position unrelated to the current frame. You should be able to call something like ``getMousePosition()`` inside of a ``CustomPainter`` widget and just get back the current position of the mouse, no extra widget required. I'm not all to familiar with the Flutter engine which is why I don't know where exactly such a method would fit. In my eyes, it should just be a global function from some class. It would be cool, if someone reading this would suggest a better place for such a function.","comments":["Hi @Unbreathable \r\n\r\n>Then it's impossible for you to accurately get the mouse position from the MouseRegion widget because it will be desynchronized with the current frame.\r\n\r\nCould you share an example of this issue? Have you tried [Listener](https:\/\/api.flutter.dev\/flutter\/widgets\/Listener-class.html)?\r\n\r\nAlso, this looks somewhat similar to https:\/\/github.com\/flutter\/flutter\/issues\/134652. Please check it to see if it's also your case.","Alright, sorry for the late response, I had some things going on in my life that prevented me from responding sooner. Anyways, I've checked out #134652 and it seems like this is unrelated. I don't want to capture the mouse pointer in a certain area, I just want to be able to get an accurate mouse position for every frame in the CustomPainter.\r\nEdit: Also just to point it our real quick, while this was run on Linux. This is the same thing for Windows as well since I've tested it there, too. The only desktop OS I've not tested it on is macOS as I can't get my hands on it at this point, but will be able to in the a few weeks.\r\n\r\nHere is an example app:\r\n```dart\r\nclass CustomMouseCursor extends StatefulWidget {\r\n  const CustomMouseCursor({super.key});\r\n\r\n  @override\r\n  State<CustomMouseCursor> createState() => _CustomMouseCursorState();\r\n}\r\n\r\nclass _CustomMouseCursorState extends State<CustomMouseCursor> {\r\n  int method = 0;\r\n  Offset mousePosition = const Offset(0, 0);\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n  }\r\n\r\n  void recalibrate() {\r\n    setState(() {\r\n      mousePosition = const Offset(0, 0);\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        backgroundColor: Colors.black,\r\n        body: SizedBox(\r\n          width: double.infinity,\r\n          height: double.infinity,\r\n          child: Builder(builder: (context) {\r\n            if (method == 0) {\r\n              return MouseRegion(\r\n                onHover: (event) => setState(() {\r\n                  mousePosition = event.localPosition;\r\n                }),\r\n                child: CustomPaint(\r\n                  painter: MousePainter(mousePosition),\r\n                ),\r\n              );\r\n            }\r\n\r\n            return Listener(\r\n              onPointerHover: (event) => setState(() {\r\n                mousePosition = event.localPosition;\r\n              }),\r\n              child: CustomPaint(\r\n                painter: MousePainter(mousePosition),\r\n              ),\r\n            );\r\n          }),\r\n        ),\r\n        floatingActionButton: FloatingActionButton(\r\n          child: const Icon(Icons.add),\r\n          onPressed: () => setState(() {\r\n            method = (method + 1) % 2;\r\n          }),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass MousePainter extends CustomPainter {\r\n  final Offset mousePos;\r\n\r\n  MousePainter(this.mousePos);\r\n\r\n  @override\r\n  void paint(Canvas canvas, Size size) {\r\n    canvas.drawCircle(mousePos, 10, Paint()..color = Colors.red);\r\n  }\r\n\r\n  @override\r\n  bool shouldRepaint(covariant CustomPainter oldDelegate) {\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nThe problem may not be obvious at first glance, but when looking at the red circle while moving the mouse, one notices that it's always one frame behind. Like in this video:\r\nhttps:\/\/www.youtube.com\/watch?v=GQmlhStfhEk (my mkv recording wasn't accepted by GitHub, so I uploaded it to YouTube instead)\r\nBoth Listener and MouseRegion have this problem, in the sample app I made, you can switch between the two using the FloatingActionButton.\r\n\r\nThe only way to fix this in my opinion is to include the mouse position with the ``Canvas`` API natively somehow. This isn't even a bug right now, because when receiving the new mouse position from the ``Listener`` or ``MouseRegion``, you call ``setState`` to update the mouse position. Problem here is though, that this requests a new frame and calls all kinds of other stuff to run which causes this delay between the mouse moving and the red circle actually showing up at the right position. So again, to overcome this limitation of the framework, you would need to retrieve the mouse position before rendering the actual frame (in the ``paint`` method itself) with the ``CustomPainter`` and then the delay will most likely no longer be there.","Thanks for the update with detailed information. Labeling the issue for other's thoughts."],"labels":["framework","engine","c: proposal","a: mouse","team-framework"]},{"title":"`gclient sync -D` spews logs about finding the iOS and macOS SDKs from the gclient hook","body":"On https:\/\/github.com\/flutter\/engine\/commit\/90c4d64d410fa8f3cd640d59b01ceb583d0ad13c\r\n```\r\n$ gclient sync -D\r\n...\r\nRunning hooks:  88% (16\/18) Find the iOS device SDKs\r\n________ running 'python3 src\/build\/config\/ios\/ios_sdk.py --as-gclient-hook' in '\/Users\/m\/Projects\/engine'\r\n2024-03-18 10:20:28.708 xcodebuild[70174:12050158] Requested but did not find extension point with identifier Xcode.DVTDeviceFoundation.Aspect for extension Xcode.IDEiOSSupportCore.Aspect.NBDD of plug-in com.apple.dt.IDE.IDEiOSSupportCore\r\n2024-03-18 10:20:28.711 xcodebuild[70174:12050158] Requested but did not find extension point with identifier DVTProducts.ReleaseChannelNamer for extension DVTProducts.ReleaseChannelNamer.PV of plug-in com.apple.dt.IDEDistributionSupport\r\n\/Users\/m\/Projects\/engine\/src\/flutter\/prebuilts\/SDKs\/iPhoneOS17.4.sdk\r\n2024-03-18 10:20:29.216 xcodebuild[70177:12050186] Requested but did not find extension point with identifier Xcode.DVTDeviceFoundation.Aspect for extension Xcode.IDEiOSSupportCore.Aspect.NBDD of plug-in com.apple.dt.IDE.IDEiOSSupportCore\r\n2024-03-18 10:20:29.217 xcodebuild[70177:12050186] Requested but did not find extension point with identifier DVTProducts.ReleaseChannelNamer for extension DVTProducts.ReleaseChannelNamer.PV of plug-in com.apple.dt.IDEDistributionSupport\r\n\/Users\/m\/Projects\/engine\/src\/flutter\/prebuilts\/SDKs\/iPhoneSimulator17.4.sdk\r\nRunning hooks:  94% (17\/18) Find the macOS SDK\r\n________ running 'python3 src\/build\/mac\/find_sdk.py --as-gclient-hook 10.14' in '\/Users\/m\/Projects\/engine'\r\n2024-03-18 10:20:29.723 xcodebuild[70188:12050264] Requested but did not find extension point with identifier Xcode.DVTDeviceFoundation.Aspect for extension Xcode.IDEiOSSupportCore.Aspect.NBDD of plug-in com.apple.dt.IDE.IDEiOSSupportCore\r\n2024-03-18 10:20:29.724 xcodebuild[70188:12050264] Requested but did not find extension point with identifier DVTProducts.ReleaseChannelNamer for extension DVTProducts.ReleaseChannelNamer.PV of plug-in com.apple.dt.IDEDistributionSupport\r\n\/Users\/m\/Projects\/engine\/src\/flutter\/prebuilts\/SDKs\/MacOSX14.4.sdk\r\n14.4\r\nRunning hooks: 100% (18\/18), done.\r\n```\r\n\r\ncc @zanderso https:\/\/github.com\/flutter\/engine\/pull\/50957","comments":["I'm not sure how to suppress the output from Xcode, but the prints in ios_sdk.py and find_sdk.py we can definitely suppress when they are passed the `--as-gclient-hook` flag."],"labels":["P2","team-engine","triaged-engine"]},{"title":"`BouncingScrollPhysics` Capturing all input until settled","body":"### Steps to reproduce\r\n\r\n1. Overscroll\r\n2. Try to click on the button while the scroll physics is settling\r\n\r\n### Expected results\r\n\r\nI can tap on the button\r\n\r\n### Actual results\r\n\r\nI cannot tap on the button\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        body: SafeArea(\r\n          child: ListView(\r\n            physics: const BouncingScrollPhysics(),\r\n            children: [\r\n              for (var i = 0; i < 100; i++)\r\n                ElevatedButton(onPressed: () {}, child: Text('ElevatedButton$i')),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\nI have two videos:\r\nA Native iOS Settings app:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/12874766\/e1ae61f8-d59c-40ae-a4c4-ad919f0dc6bf\r\n\r\nAnd a Flutter app:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/12874766\/08c986f0-a758-4b09-895c-fff73788eb8d\r\n\r\nOverscrolling a native app and then attempting to tap on an active element makes the element receive input.\r\nFlutter on the other hand consumes all the input and directs it to the scrollable that is settling. Making it impossible to tap on active widgets.\r\n\r\nOne bad way to avoid it, is by adding `ClampedScrollPhysics` to the scrollable. But that breaks immersion on iOS and I do not consider it a valid solution.\r\n\r\n(I am showing it on Android due to the tap indicators)\r\n\r\nThe issue is also present in other Animated widgets e.g. `TabBarView` with any kind of scrolling. Slivers and others possibly too.\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.3 23D56 darwin-arm64, locale\r\n    en-CZ)\r\n    \u2022 Flutter version 3.19.2 on channel stable at\r\n      \/Users\/michalhazdra\/Flutter\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (3 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/michalhazdra\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android\r\n      Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at\r\n    \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.3)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["Looking at the arena:\r\n\r\n```\r\nI\/ViewRootImpl(29385): ViewRoot's Touch Event : ACTION_DOWN\r\nI\/flutter (29385): Gesture arena 60   \u2759 \u2605 Opening new gesture arena.\r\nI\/flutter (29385): Gesture arena 60   \u2759 Adding: VerticalDragGestureRecognizer#54aa1(start behavior: start)\r\nI\/flutter (29385): Gesture arena 60   \u2759 Closing with 1 member.\r\nI\/flutter (29385): Gesture arena 60   \u2759 Default winner: VerticalDragGestureRecognizer#54aa1(start behavior: start)\r\nI\/ViewRootImpl(29385): ViewRoot's Touch Event : ACTION_UP\r\n```\r\n\r\nThe buttons are not added at all.","Thanks for the detailed report. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-10.0.pre.44, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-10.0.pre.44 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision c6b0240a85 (67 minutes ago), 2024-03-18 21:59:16 -0400\r\n    \u2022 Engine revision 3d909f1411\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-244.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Pixel 7 (mobile) \u2022 2B171FDH20084L \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 macOS (desktop)  \u2022 macos          \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome         \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","I dug deeper into the scrollable.dart and in the `build` function we have:\r\n<img width=\"596\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12874766\/572bbdea-1608-457c-8ad2-e79dfc72d535\">\r\n\r\nThe `behavior` is set to `HitTestBehavior.opaque` So it makes sense that all gestures below the scrollable are not passing though. Setting it to `HitTestBehavior.deferToChild` prevents the scrollable from working as expected. However setting it to `HitTestBehavior.translucent` does not pass the event through. Which, just from the description, it should do?","I also simplified the widget tree a bit:\r\n\r\n```dart\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Directionality(\r\n      textDirection: TextDirection.ltr,\r\n      child: ListView(\r\n        physics: const BouncingScrollPhysics(),\r\n        children: [\r\n          for (var i = 0; i < 100; i++)\r\n            GestureDetector(\r\n              onTap: () {\r\n              },\r\n              child: Container(\r\n                height: 56,\r\n                color: getColorForIndex(i),\r\n              ),\r\n            ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n\r\n  Color getColorForIndex(int index) {\r\n    return index.isEven ? Colors.grey[300]! : Colors.white;\r\n  }\r\n}\r\n```","Alright, `_shouldIgnorePointer` is `true` in the image above, investigating why.","So in scroll_position_with_single_context.dart inside `goBallistic(double)`\r\n<img width=\"699\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12874766\/41a7a1f4-f686-458b-9fbf-24eaf5ac99f4\">\r\n\r\nSince in the basic use case we are transitioning from `DraggingScrollActivity` and it's `shouldIgnorePointer` is `true` it always evaluates to `true` and the touches are ignored in the children. Setting it to `false` does work as expected in the simple \"drag release tap\" scenario.","Looking at the history the `shouldIgnorePointer` was added here #106890.\r\nI tested the setup there and it seems that `shouldIgnorePointer` was irrelevant to the change or it became irrelevant in the future as in this example, the pointer correctly changes to indicate active element, the drag can be resumed and tap while settle is in progress works.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/12874766\/b977c587-2805-47e9-8eca-2d898f1b85e4\r\n\r\nI believe that at least for iOS the correct value for `BallisticScrollActivity`'s `shouldIgnorePointer` should be `false`.\r\n\r\n<details closed><summary>Code for the sample above<\/summary>\r\n\r\n```dart\r\n\r\nimport 'package:flutter\/gestures.dart';\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  debugPrintGestureArenaDiagnostics = true;\r\n\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Directionality(\r\n      textDirection: TextDirection.ltr,\r\n      child: ListView(\r\n        physics: const BouncingScrollPhysics(),\r\n        children: [\r\n          for (var i = 0; i < 100; i++)\r\n            GestureDetector(\r\n              onTap: () {\r\n                debugPrint('Tapped on item $i');\r\n              },\r\n              child: Container(\r\n                margin: const EdgeInsets.only(bottom: 24),\r\n                child: ElevatedButton(\r\n                  style: ButtonStyle(\r\n                    backgroundColor: MaterialStatePropertyAll(Colors.blueGrey),\r\n                    splashFactory: InkRipple.splashFactory,\r\n                    overlayColor: MaterialStatePropertyAll(Colors.amber),\r\n                    surfaceTintColor: MaterialStatePropertyAll(Colors.white),\r\n                  ),\r\n                  onPressed: () {\r\n                    debugPrint('Pressed on item $i');\r\n                  },\r\n                  child: Text('Item $i'),\r\n                ),\r\n              ),\r\n            ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n\r\n  Color getColorForIndex(int index) {\r\n    return index.isEven ? Colors.grey[600]! : Colors.white;\r\n  }\r\n}\r\n```\r\n\r\n<\/details>","Upon further investigation this comment exists: https:\/\/github.com\/flutter\/flutter\/issues\/105308#issuecomment-1216549565 It was a regression then; and the referenced PR that I linked above was supposed to resolve it for trackpad only? I am not so sure now. But I guess this issue is also a regression then if it behaved correctly at some point.","It also fixes the `TabBarView` lockup\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/12874766\/05dd98ca-2b36-4bcb-8c76-59bb1f6ee47c\r\n\r\n<details closed><summary>Code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/gestures.dart';\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  debugPrintGestureArenaDiagnostics = true;\r\n\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatefulWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  State<MyApp> createState() => _MyAppState();\r\n}\r\n\r\nclass _MyAppState extends State<MyApp> with SingleTickerProviderStateMixin {\r\n  late final TabController _tabController = TabController(length: 2, vsync: this);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Directionality(\r\n      textDirection: TextDirection.ltr,\r\n      child: TabBarView(\r\n        controller: _tabController,\r\n        children: [\r\n          ListView(\r\n            physics: const BouncingScrollPhysics(),\r\n            children: [\r\n              for (var i = 0; i < 100; i++)\r\n                GestureDetector(\r\n                  onTap: () {\r\n                    debugPrint('Tapped on item $i');\r\n                  },\r\n                  child: Container(\r\n                    margin: const EdgeInsets.only(bottom: 24),\r\n                    child: ElevatedButton(\r\n                      style: ButtonStyle(\r\n                        backgroundColor: MaterialStatePropertyAll(Colors.blueGrey),\r\n                        splashFactory: InkRipple.splashFactory,\r\n                        overlayColor: MaterialStatePropertyAll(Colors.amber),\r\n                        surfaceTintColor: MaterialStatePropertyAll(Colors.white),\r\n                      ),\r\n                      onPressed: () {\r\n                        debugPrint('Pressed on item $i');\r\n                      },\r\n                      child: Text('Item $i'),\r\n                    ),\r\n                  ),\r\n                ),\r\n            ],\r\n          ),\r\n          ListView(\r\n            physics: const BouncingScrollPhysics(),\r\n            children: [\r\n              for (var i = 0; i < 100; i++)\r\n                GestureDetector(\r\n                  onTap: () {\r\n                    debugPrint('Tapped on item $i');\r\n                  },\r\n                  child: Container(\r\n                    margin: const EdgeInsets.only(bottom: 24),\r\n                    child: ElevatedButton(\r\n                      style: ButtonStyle(\r\n                        backgroundColor: MaterialStatePropertyAll(Colors.blueGrey),\r\n                        splashFactory: InkRipple.splashFactory,\r\n                        overlayColor: MaterialStatePropertyAll(Colors.amber),\r\n                        surfaceTintColor: MaterialStatePropertyAll(Colors.white),\r\n                      ),\r\n                      onPressed: () {\r\n                        debugPrint('Pressed on item $i');\r\n                      },\r\n                      child: Text('Item $i'),\r\n                    ),\r\n                  ),\r\n                ),\r\n            ],\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n\r\n  Color getColorForIndex(int index) {\r\n    return index.isEven ? Colors.grey[600]! : Colors.white;\r\n  }\r\n}\r\n```\r\n\r\n<\/details>"],"labels":["framework","f: scrolling","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] refactor `Snapshot` to account for larger geometries","body":"https:\/\/github.com\/flutter\/engine\/pull\/51393 introduced a new clause that was required for rendering TiledTextureContents because `Snapshot` was unable to capture the proper semantics to render it correctly.  Specifically in that case the geometry has been expanded.  The way TileTextureContents works when rendering without the `Snapshot` optimization is that expanding the geometry should be counteracted by the texcoords, as per the effect transform math.  There is no way to represent this with the `Snapshot`.  This means we need to have some concept of the \"source rect\" or another matrix to capture the difference between vertices and texcoords.\r\n\r\nI'm not sure if there are other places in the code where this would be beneficial but not having it forces us to have a render pass when we don't need one.\r\n\r\ncc @jonahwilliams ","comments":[],"labels":["P2","e: impeller","team-engine","triaged-engine"]},{"title":"PopupMenuButton click area is wrong when placed in an InputDecoration","body":"### Steps to reproduce\r\n\r\nPlace a PopupMenuButton as label of an InputDecoration object\r\n\r\n### Expected results\r\n\r\nWhen hovering over the PopupMenuButton it should be possible to click on it.\r\n\r\n### Actual results\r\n\r\nThe click area of the PopupMenuButton is not correct. Instead of clicking on the button, the mouse must be moved further down to activate it.\r\n\r\n### Code sample\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: Scaffold(\r\n        body: EconomicConditionsView(),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass EconomicConditionsView extends StatelessWidget {\r\n  const EconomicConditionsView({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Column(\r\n      mainAxisAlignment: MainAxisAlignment.center,\r\n      children: List.generate(1, (index) => getPayerWidget(index)),\r\n    );\r\n  }\r\n\r\n  Widget getPayerWidget(int index) {\r\n    return InputDecorator(\r\n      decoration: InputDecoration(\r\n        enabledBorder: OutlineInputBorder(\r\n          borderSide: const BorderSide(color: Colors.black),\r\n          borderRadius: BorderRadius.circular(25),\r\n        ),\r\n        label: Row(\r\n          mainAxisSize: MainAxisSize.min,\r\n          children: [\r\n            const Text('Hola'),\r\n            PopupMenuButton<String>(\r\n              itemBuilder: (context) {\r\n                return List.generate(\r\n                    5,\r\n                    (i) => PopupMenuItem(\r\n                        value: i.toString(), child: Text('Item $i')));\r\n              },\r\n            )\r\n          ],\r\n        ),\r\n      ),\r\n      child: Column(children: [\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n        Text('Adios'),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.10.5, on Microsoft Windows [Versi\u00a2n 10.0.19045.4170], locale es-ES)\r\n    \u2022 Flutter version 3.10.5 on channel stable at C:\\Users\\fdemiguel.STT\\fvm\\versions\\3.10.5      \r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 796c8ef792 (9 months ago), 2023-06-13 15:51:02 -0700\r\n    \u2022 Engine revision 45f6e00911\r\n    \u2022 Dart version 3.0.5\r\n    \u2022 DevTools version 2.23.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 32.1.0-rc1)\r\n    \u2022 Android SDK at C:\\Users\\fdemiguel.STT\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-33, build-tools 32.1.0-rc1\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+7-b1504.28-7817840)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[!] Visual Studio - develop for Windows (Visual Studio Build Tools 2019 16.11.31)\r\n    \u2022 Visual Studio at C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\r\n    \u2022 Visual Studio Build Tools 2019 version 16.11.34114.132\r\n    \u2022 Windows 10 SDK version 10.0.17763.0\r\n    X The current Visual Studio installation is incomplete. Please reinstall Visual Studio.\r\n\r\n[\u221a] Android Studio (version 2021.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+7-b1504.28-7817840)\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\fdemiguel.STT\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Versi\u00a2n 10.0.19045.4170]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["It seems that the problem is not related to the PopupMenuButton as it also happens with the TextButton. Maybe the problem is more related to the InputDecoration","Hi @fdemiguel, what are you trying to achieve by placing the `PopupMenuButton` as the label of the `InputDecoration`? \r\n\r\nAlso, your flutter doctor shows you're using an older version of flutter. Kindly upgrade to the latest version of flutter to see if you still experience this issue. If you do, please provide the updated output of `flutter doctor -v`. \r\n\r\nThank you","Hi @danagbemava-nc \r\n\r\nYesterday I tested it on dartpad (3.19.3) and the same thing happened.\r\n\r\nThe reason why I want to place a PopupMenuButton as the label of an InputDecoration is that I want to give the user the option to do certain things on a group of elements, in this case, the child of the InputDecoration. Those things would be the items of the PopupMenuButton.\r\n\r\nThank you very much","Hi @fdemiguel, if I understand what you're trying to achieve, I don't think it will be a good user experience for your users. It might be best for you to have a separate field that controls the option you want to apply to the group. \r\n\r\nIt would help if you could provide a screenshot of what exactly it is that you want to achieve. \r\n\r\nThank you ","![gb_economic_conditions](https:\/\/github.com\/flutter\/flutter\/assets\/126063378\/070c5612-2138-426a-8614-3da518091f9f)\r\n\r\nHi @danagbemava-nc\r\n\r\nPopupMenuButton items are economic entities used in the past by the person. When you select one of them, the data on the screen is updated.","IMO, the \"temporary solution\" will provide a better experience for your users as most users do not expect the label of an input area to perform an action. You just might want to indicate to them that they would want to click on that area. \r\n\r\nHowever, it does seem like there's a bug in the popup ink area calculation when it is used in this scenario (and perhaps other similar scenarios). Labeling for further insight from the team.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/88313112\/79d7f1dd-d8a1-4aae-9d63-992afd4f387d\r\n\r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Pixel 7 (mobile)     \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-11.0.pre.64, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.64 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 0e268b5024 (2 hours ago), 2024-03-21 00:34:15 -0400\r\n    \u2022 Engine revision a73e01364d\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-253.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Pixel 7 (mobile)                \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n\r\n```\r\n<\/details>"],"labels":["framework","f: material design","has reproducible steps","team-design","found in release: 3.19","found in release: 3.21"]},{"title":"[webview_flutter] Getting error Didn't find class \"android.webkit.PacProcessor\" on Android 9 (API28)","body":"\r\n[web_view_issue.zip](https:\/\/github.com\/flutter\/flutter\/files\/14647528\/web_view_issue.zip)\r\n### Steps to reproduce\r\n\r\n1. Create a new Flutter project or use an existing one.\r\n2. Add the `webview_flutter` package to your project's `pubspec.yaml` file and run `flutter pub get`.\r\n3. Replace the existing `main.dart` file with the sample widget provided above or download the attached `web_view_issue.zip` and extract the contents to your project directory.\r\n4. Run the project on an Android 9 device or emulator.\r\n5. Observe the console\/logcat output and the behavior of the web view.\r\n\r\n### Expected results\r\n\r\n1. The console\/logcat should not display any errors related to the web view.\r\n2. The content of the webpage should load completely without any partial loading or failure to load.\"\r\n\r\n### Actual results\r\n\r\n1. The console\/logcat displays errors related to the web view.\r\n2. The content of the webpage either loads partially or fails to load completely.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:webview_flutter\/webview_flutter.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: Scaffold(\r\n        appBar: AppBar(\r\n          backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n          title: const Text('Flutter Demo Home Page'),\r\n        ),\r\n        body: const Center(\r\n          child: WebView(),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass WebView extends StatefulWidget {\r\n  const WebView({super.key});\r\n\r\n  @override\r\n  State<WebView> createState() => _WebViewState();\r\n}\r\n\r\nclass _WebViewState extends State<WebView> with WidgetsBindingObserver {\r\n  late final WebViewController _controller;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n\r\n    _controller = WebViewController.fromPlatformCreationParams(\r\n      const PlatformWebViewControllerCreationParams(),\r\n    )\r\n      ..setJavaScriptMode(JavaScriptMode.unrestricted)\r\n      ..loadRequest(Uri.parse('https:\/\/flutter.dev'));\r\n\r\n    _controller.setJavaScriptMode(JavaScriptMode.unrestricted);\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _controller.clearCache();\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    _controller.setBackgroundColor(Theme.of(context).colorScheme.background);\r\n\r\n    return Builder(builder: (context) {\r\n      return WebViewWidget(\r\n        controller: _controller,\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n[+1298 ms] I\/WebViewFactory(21638): Loading com.google.android.webview version 122.0.6261.105 (code 626110501)\r\n[   +3 ms] W\/linker  (21638): Warning: \"\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/base.apk!\/lib\/arm64-v8a\/libwebviewchromium.so\" unused DT entry: unknown processor-specific (type 0x70000001 arg 0x0)\r\n(ignoring)\r\n[  +37 ms] I\/.web_view_issu(21638): Rejecting re-init on previously-failed class java.lang.Class<WV.aH>: java.lang.NoClassDefFoundError: Failed resolution of: Landroid\/webkit\/PacProcessor;\r\n[   +1 ms] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.classForName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:453)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getWebViewProviderClass(java.lang.ClassLoader) (WebViewFactory.java:176)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getProviderClass() (WebViewFactory.java:459)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebViewFactoryProvider android.webkit.WebViewFactory.getProvider() (WebViewFactory.java:251)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage android.webkit.WebStorage.getInstance() (WebStorage.java:194)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage io.flutter.plugins.webviewflutter.WebStorageHostApiImpl$WebStorageCreator.createWebStorage() (WebStorageHostApiImpl.java:30)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.WebStorageHostApiImpl.create(java.lang.Long) (WebStorageHostApiImpl.java:48)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$-CC.lambda$setup$0(io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi,\r\njava.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) (GeneratedAndroidWebView.java:3232)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$$ExternalSyntheticLambda0.onMessage(java.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) \r\n(D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugin.common.BasicMessageChannel$IncomingMessageHandler.onMessage(java.nio.ByteBuffer, io.flutter.plugin.common.BinaryMessenger$BinaryReply)\r\n(BasicMessageChannel.java:261)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(io.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, int) (DartMessenger.java:292)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(java.lang.String, int,\r\nio.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, long) (DartMessenger.java:319)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run() (D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.handleCallback(android.os.Message) (Handler.java:873)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:99)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Looper.loop() (Looper.java:193)\r\n[        ] I\/.web_view_issu(21638):   at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6680)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Object java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) (Method.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run() (RuntimeInit.java:495)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:858)\r\n[        ] I\/.web_view_issu(21638): Caused by: java.lang.ClassNotFoundException: Didn't find class \"android.webkit.PacProcessor\" on path: DexPathList[[zip file\r\n\"\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/base.apk\"],nativeLibraryDirectories=[\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/lib\/arm64,\r\n\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/base.apk!\/lib\/arm64-v8a, \/system\/lib64, \/odm\/lib64, \/vendor\/lib64, \/product\/lib64]]\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class dalvik.system.BaseDexClassLoader.findClass(java.lang.String) (BaseDexClassLoader.java:134)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String, boolean) (ClassLoader.java:379)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String) (ClassLoader.java:312)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.classForName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:453)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getWebViewProviderClass(java.lang.ClassLoader) (WebViewFactory.java:176)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getProviderClass() (WebViewFactory.java:459)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebViewFactoryProvider android.webkit.WebViewFactory.getProvider() (WebViewFactory.java:251)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage android.webkit.WebStorage.getInstance() (WebStorage.java:194)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage io.flutter.plugins.webviewflutter.WebStorageHostApiImpl$WebStorageCreator.createWebStorage() (WebStorageHostApiImpl.java:30)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.WebStorageHostApiImpl.create(java.lang.Long) (WebStorageHostApiImpl.java:48)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$-CC.lambda$setup$0(io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi,\r\njava.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) (GeneratedAndroidWebView.java:3232)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$$ExternalSyntheticLambda0.onMessage(java.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) \r\n(D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugin.common.BasicMessageChannel$IncomingMessageHandler.onMessage(java.nio.ByteBuffer, io.flutter.plugin.common.BinaryMessenger$BinaryReply)\r\n(BasicMessageChannel.java:261)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(io.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, int) (DartMessenger.java:292)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(java.lang.String, int,\r\nio.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, long) (DartMessenger.java:319)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run() (D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.handleCallback(android.os.Message) (Handler.java:873)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:99)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Looper.loop() (Looper.java:193)\r\n[        ] I\/.web_view_issu(21638):   at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6680)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Object java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) (Method.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run() (RuntimeInit.java:495)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:858)\r\n[        ] I\/.web_view_issu(21638): \r\n[        ] I\/.web_view_issu(21638): Rejecting re-init on previously-failed class java.lang.Class<WV.aH>: java.lang.NoClassDefFoundError: Failed resolution of: Landroid\/webkit\/PacProcessor;\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.classForName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:453)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getWebViewProviderClass(java.lang.ClassLoader) (WebViewFactory.java:176)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getProviderClass() (WebViewFactory.java:459)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebViewFactoryProvider android.webkit.WebViewFactory.getProvider() (WebViewFactory.java:251)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage android.webkit.WebStorage.getInstance() (WebStorage.java:194)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage io.flutter.plugins.webviewflutter.WebStorageHostApiImpl$WebStorageCreator.createWebStorage() (WebStorageHostApiImpl.java:30)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.WebStorageHostApiImpl.create(java.lang.Long) (WebStorageHostApiImpl.java:48)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$-CC.lambda$setup$0(io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi,\r\njava.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) (GeneratedAndroidWebView.java:3232)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$$ExternalSyntheticLambda0.onMessage(java.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) \r\n(D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugin.common.BasicMessageChannel$IncomingMessageHandler.onMessage(java.nio.ByteBuffer, io.flutter.plugin.common.BinaryMessenger$BinaryReply)\r\n(BasicMessageChannel.java:261)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(io.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, int) (DartMessenger.java:292)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(java.lang.String, int,\r\nio.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, long) (DartMessenger.java:319)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run() (D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.handleCallback(android.os.Message) (Handler.java:873)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:99)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Looper.loop() (Looper.java:193)\r\n[        ] I\/.web_view_issu(21638):   at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6680)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Object java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) (Method.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run() (RuntimeInit.java:495)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:858)\r\n[        ] I\/.web_view_issu(21638): Caused by: java.lang.ClassNotFoundException: Didn't find class \"android.webkit.PacProcessor\" on path: DexPathList[[zip file\r\n\"\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/base.apk\"],nativeLibraryDirectories=[\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/lib\/arm64,\r\n\/data\/app\/com.google.android.webview-XkxCacm-u79tjIcV4OsC9g==\/base.apk!\/lib\/arm64-v8a, \/system\/lib64, \/odm\/lib64, \/vendor\/lib64, \/product\/lib64]]\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class dalvik.system.BaseDexClassLoader.findClass(java.lang.String) (BaseDexClassLoader.java:134)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String, boolean) (ClassLoader.java:379)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String) (ClassLoader.java:312)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.classForName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (Class.java:453)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getWebViewProviderClass(java.lang.ClassLoader) (WebViewFactory.java:176)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Class android.webkit.WebViewFactory.getProviderClass() (WebViewFactory.java:459)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebViewFactoryProvider android.webkit.WebViewFactory.getProvider() (WebViewFactory.java:251)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage android.webkit.WebStorage.getInstance() (WebStorage.java:194)\r\n[        ] I\/.web_view_issu(21638):   at android.webkit.WebStorage io.flutter.plugins.webviewflutter.WebStorageHostApiImpl$WebStorageCreator.createWebStorage() (WebStorageHostApiImpl.java:30)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.WebStorageHostApiImpl.create(java.lang.Long) (WebStorageHostApiImpl.java:48)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$-CC.lambda$setup$0(io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi,\r\njava.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) (GeneratedAndroidWebView.java:3232)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugins.webviewflutter.GeneratedAndroidWebView$WebStorageHostApi$$ExternalSyntheticLambda0.onMessage(java.lang.Object, io.flutter.plugin.common.BasicMessageChannel$Reply) \r\n(D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.plugin.common.BasicMessageChannel$IncomingMessageHandler.onMessage(java.nio.ByteBuffer, io.flutter.plugin.common.BinaryMessenger$BinaryReply)\r\n(BasicMessageChannel.java:261)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(io.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, int) (DartMessenger.java:292)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(java.lang.String, int,\r\nio.flutter.embedding.engine.dart.DartMessenger$HandlerInfo, java.nio.ByteBuffer, long) (DartMessenger.java:319)\r\n[        ] I\/.web_view_issu(21638):   at void io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run() (D8$$SyntheticClass:-1)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.handleCallback(android.os.Message) (Handler.java:873)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:99)\r\n[        ] I\/.web_view_issu(21638):   at void android.os.Looper.loop() (Looper.java:193)\r\n[        ] I\/.web_view_issu(21638):   at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6680)\r\n[        ] I\/.web_view_issu(21638):   at java.lang.Object java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) (Method.java:-2)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run() (RuntimeInit.java:495)\r\n[        ] I\/.web_view_issu(21638):   at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:858)\r\n\r\n[verbose_run.txt](https:\/\/github.com\/flutter\/flutter\/files\/14637546\/verbose_run.txt)\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.19.0, on Microsoft Windows [Version 10.0.19045.4046], locale ru-RU)\r\n    \u2022 Flutter version 3.19.0 on channel stable at C:\\Users\\nefidov\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision bae5e49bc2 (5 weeks ago), 2024-02-13 17:46:18 -0800\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)  \r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Program Files (x86)\\Android\\android-sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = C:\\Program Files (x86)\\Android\\android-sdk\r\n    \u2022 ANDROID_SDK_ROOT = C:\\Program Files (x86)\\Android\\android-sdk\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java       \r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[!] Visual Studio - develop Windows apps (Visual Studio Build Tools 2022 17.8.0)\r\n    \u2022 Visual Studio at C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\r\n    \u2022 Visual Studio Build Tools 2022 version 17.8.34309.116\r\n    ! Unable to locate a Windows 10 SDK. If building fails, install the Windows 10 SDK in Visual Studio.\r\n\r\n[\u221a] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u221a] VS Code, 64-bit edition (version 1.72.2)\r\n    \u2022 VS Code at C:\\Program Files\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.60.0\r\n\r\n[\u221a] Connected device (4 available)\r\n    \u2022 LLD L31 (mobile)  \u2022 FPMNW18807007023 \u2022 android-arm64  \u2022 Android 9 (API 28)\r\n    \u2022 Windows (desktop) \u2022 windows          \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 119.0.6045.200\r\n    \u2022 Edge (web)        \u2022 edge             \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.66\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @aezakmi8, is this limited to android 9 or are other versions of android affected as well? \r\n\r\nWhat version of webview_flutter & webview_flutter_android are you using? ","> What version of webview_flutter & webview_flutter_android are you using?\r\n\r\n- Versions:\r\nwebview_flutter_android: ^3.15.0\r\nwebview_flutter: ^4.5.0\r\n\r\nAlso I've tested on webview_flutter: ^4.7.0, same error\r\n\r\n> this limited to android 9 or are other versions of android affected as well?\r\n\r\n- SDKs:\r\nI tested it on Android 13 (APK 33), 14 (API 34)\r\nthere was no error\r\n\r\nAs far as I know, the reason is the error that the android.webkit.PacProcessor class is used, which is only available in Android 12 and above\r\n","Hello there am having the exact same issue on Android 8 but 12 is very ok. Actually on Android 8 the app is Crashing.","Hi @aezakmi8, do you also get the crash on android 9?\r\n\r\n@drexhacker, does it crash for you every time or occasionally?","> Hi @aezakmi8, do you also get the crash on android 9?\r\n> \r\n> @drexhacker, does it crash for you every time or occasionally?\r\n\r\nNo, on Android 9 crash is not happening\r\n\r\n\u0410n error appears in the console and the content of the webpage either  loads partially or fails to load completely\r\n\r\n","Hi @aezakmi8, do you see the `android.webkit.PacProcessor` error every time? I am testing on android emulator running android 9 but I don't see those error messages from logcat. The warnings, I see are related to the `OnBackInvokedCallback` and some sidecar related messages. ","> error every time?\r\n\r\nThe error appears every time we navigate to the screen with WebView\r\n\r\nI am testing on Physical device HONOR 9 Lite (LLD-L31) and reading logs from logcat","Hi @aezakmi8, I tested this on a Nokia 6 running android 9 and while I do see the error, the website content is fully loaded with no issues. I also saw the logs from flutter itself. \r\n\r\n> \u0410n error appears in the console and the content of the webpage either loads partially or fails to load completely\r\n\r\nRegarding this, does it ever load the site fully for you?","> and while I do see the error, the website content is fully loaded\r\n\r\nWeb Content loads with a delay (5-30 sec) sometimes it does not fully loads\r\n\r\nThis is critical because in my application this screen is responsible for paying on an external web site for order payment.","> Hi @aezakmi8, do you also get the crash on android 9?\r\n> \r\n> @drexhacker, does it crash for you every time or occasionally?\r\n\r\nSorry the crush was not made by `webview_flutter`."],"labels":["in triage"]},{"title":"StrictMode DiskReadViolation related to Typeface","body":"### Steps to reproduce\n\n- Enable StrictMode in Android by adding this below onCreate():\r\n```\r\n       StrictMode.setThreadPolicy(\r\n            StrictMode.ThreadPolicy.Builder()\r\n                .detectDiskReads()\r\n                .detectDiskWrites()\r\n                .penaltyLog()\r\n                .build()\r\n        )\r\n        StrictMode.setVmPolicy(\r\n            StrictMode.VmPolicy.Builder()\r\n                .detectLeakedSqlLiteObjects()\r\n                .detectLeakedClosableObjects()\r\n                .penaltyLog() \/\/.penaltyDeath()\r\n                .penaltyDeath()\r\n                .build()\r\n        )\r\n```\r\n-   Run Flutter application on Android device\r\n-   In terminal type: `adb logcat '*:S StrictMode:V flutter:V'`\r\n-  Observe logs during app startup and you should see `android.os.strictmode.DiskReadViolation` violating MainThread mostly between 1000ms to 4500ms\r\n\n\n### Expected results\n\nIt shouldn't be that the MainThread is violated by Typeface.\n\n### Actual results\n\nThere are several DiskReadViolation violation in the logs\n\n### Code sample\n\nThere is no code associated with this issue \n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nStrictMode policy violation; ~duration=2116 ms: android.os.strictmode.DiskReadViolation\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.os.StrictMode$AndroidBlockGuardPolicy.onReadFromDisk(StrictMode.java:1504)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:241)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat java.io.File.isDirectory(File.java:845)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.graphics.Typeface.getFullFlipFont(Typeface.java:1498)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.graphics.Typeface.getFontPathFlipFont(Typeface.java:1481)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.graphics.Typeface.SetFlipFonts(Typeface.java:1571)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.graphics.Typeface.SetAppTypeFace(Typeface.java:1742)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.Activity.onCreate(Activity.java:1072)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat io.flutter.embedding.android.FlutterActivity.onCreate(FlutterActivity.java:631)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat com.gopuff.godrive2.staging.MainActivity.onCreate(MainActivity.kt:56)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7327)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7318)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3096)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3259)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.os.Looper.loop(Looper.java:214)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat android.app.ActivityThread.main(ActivityThread.java:7073)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat java.lang.reflect.Method.invoke(Native Method)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:494)\r\n03-13 13:23:05.427  9537  9537 D StrictMode: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:964)\r\n\r\n\r\n\r\n03-15 13:54:46.675 29151 29580 I flutter : The Dart VM service is listening on http:\/\/127.0.0.1:43352\/zBStX3ZSbLw=\/\r\n03-15 13:54:48.587 29151 29151 D StrictMode: StrictMode policy violation; ~duration=4191 ms: android.os.strictmode.DiskReadViolation\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.os.StrictMode$AndroidBlockGuardPolicy.onReadFromDisk(StrictMode.java:1504)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:241)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat java.io.File.isDirectory(File.java:845)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.graphics.Typeface.getFullFlipFont(Typeface.java:1498)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.graphics.Typeface.getFontPathFlipFont(Typeface.java:1481)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.graphics.Typeface.SetFlipFonts(Typeface.java:1571)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.graphics.Typeface.SetAppTypeFace(Typeface.java:1742)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.Activity.onCreate(Activity.java:1072)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat io.flutter.embedding.android.FlutterActivity.onCreate(FlutterActivity.java:631)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat com.gopuff.godrive2.staging.MainActivity.onCreate(MainActivity.kt:56)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7327)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7318)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3096)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3259)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.os.Looper.loop(Looper.java:214)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat android.app.ActivityThread.main(ActivityThread.java:7073)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat java.lang.reflect.Method.invoke(Native Method)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:494)\r\n03-15 13:54:48.587 29151 29151 D StrictMode: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:964)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: StrictMode policy violation; ~duration=4191 ms: android.os.strictmode.DiskReadViolation\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.os.StrictMode$AndroidBlockGuardPolicy.onReadFromDisk(StrictMode.java:1504)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat java.io.UnixFileSystem.list(UnixFileSystem.java:302)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat java.io.File.list(File.java:1131)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.graphics.Typeface.getFullFlipFont(Typeface.java:1498)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.graphics.Typeface.getFontPathFlipFont(Typeface.java:1481)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.graphics.Typeface.SetFlipFonts(Typeface.java:1571)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.graphics.Typeface.SetAppTypeFace(Typeface.java:1742)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.Activity.onCreate(Activity.java:1072)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat io.flutter.embedding.android.FlutterActivity.onCreate(FlutterActivity.java:631)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat com.gopuff.godrive2.staging.MainActivity.onCreate(MainActivity.kt:56)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7327)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.Activity.performCreate(Activity.java:7318)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3096)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3259)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.os.Looper.loop(Looper.java:214)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat android.app.ActivityThread.main(ActivityThread.java:7073)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat java.lang.reflect.Method.invoke(Native Method)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:494)\r\n03-15 13:54:48.588 29151 29151 D StrictMode: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:964)\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel [user-branch], 3.16.9, on macOS 14.0 23A344 darwin-arm64, locale en-RS)\r\n    ! Flutter version 3.16.9 on channel [user-branch] at \/Users\/radivojeostojic\/Documents\/development\/flutter\r\n      Currently on an unknown channel. Run `flutter channel` to switch to an official channel.\r\n      If that doesn't fix the issue, reinstall Flutter by following instructions at https:\/\/flutter.dev\/docs\/get-started\/install.\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/2.17.6\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at\r\n      \/Users\/radivojeostojic\/Documents\/development\/flutter. Consider adding \/Users\/radivojeostojic\/Documents\/development\/flutter\/bin to the front of your path.\r\n    ! Upstream repository unknown source is not a standard remote.\r\n      Set environment variable \"FLUTTER_GIT_URL\" to unknown source to dismiss this error.\r\n    \u2022 Framework revision 41456452f2 (8 weeks ago), 2024-01-25 10:06:23 -0800\r\n    \u2022 Engine revision f40e976bed\r\n    \u2022 Dart version 3.2.6\r\n    \u2022 DevTools version 2.28.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n    \u2022 Android SDK at \/Users\/radivojeostojic\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.1\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.12.1\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n\r\n[\u2713] VS Code (version 1.68.1)\r\n    \u2022 VS Code at \/Users\/radivojeostojic\/Downloads\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.60.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 SM G955U1 (mobile)         \u2022 988bdc37395638324a                   \u2022 android-arm64  \u2022 Android 9 (API 28)\r\n    \u2022 iPhone 15 Pro Max (mobile) \u2022 9D762A9B-159B-4456-B8E3-99ECD5B453D0 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.0 23A344 darwin-arm64\r\n    \u2022 Chrome (web)               \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    ! Error: Browsing on the local area network for Radivoje\u2019s iPhone. Ensure the device is unlocked and attached with a cable or associated with the same local area\r\n      network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I tried this on Samsung S10 device with which I observed similar log as reported. I tried on sample app. This seems to be different than but could be related to https:\/\/github.com\/flutter\/flutter\/issues\/113279 which uses shared_preference package.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-10.0.pre.46, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-10.0.pre.46 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision da8aaf274b (83 minutes ago), 2024-03-18 23:54:23 -0400\r\n    \u2022 Engine revision 4a86b5b17c\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-244.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n"],"labels":["platform-android","has reproducible steps","team-android","found in release: 3.19","found in release: 3.21"]},{"title":"macOS runner doesn't handle being orphaned at all well","body":"### Steps to reproduce\r\n\r\n1. Run a Flutter app in an iTerm2\r\n2. Force kill said iTerm\r\n3. Watch as app spends it's time trying to find a missing isolate\r\n\r\n### Expected results\r\n\r\nThe app should probably terminate itself?\r\n\r\n### Actual results\r\n\r\nI suspect a random thread received the `SIGKILL` and the rest of the threads were confused.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n$ flutter doctor -v\r\n[\u2713] Flutter (Channel beta, 3.21.0-1.0.pre.2, on macOS 14.4 23E214 darwin-arm64, locale en)\r\n    \u2022 Flutter version 3.21.0-1.0.pre.2 on channel beta at \/Users\/brettmorgan\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter\r\n    \u2022 Framework revision c398442c35 (5 days ago), 2024-03-12 22:26:24 -0700\r\n    \u2022 Engine revision 0d4f78c952\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-190.1.beta)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/brettmorgan\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA CE.app\r\n    \u2022 Flutter plugin version 77.0.1\r\n    \u2022 Dart plugin version 233.13135.65\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 macOS (desktop)                 \u2022 macos                 \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad \u2022 darwin         \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["MacOS 14.4 introduced bugs on Java https:\/\/blogs.oracle.com\/java\/post\/java-on-macos-14-4","> MacOS 14.4 introduced bugs on Java https:\/\/blogs.oracle.com\/java\/post\/java-on-macos-14-4\n\nFor clarity, I am running on macOS 14.4 so this could be related. There isn't any Java involved in running Flutter on macOS but changing how SIGKILL works will break a lot of Unix developers expectations. "],"labels":["platform-mac"]},{"title":"Resizing the macOS runner by changing the screen resolution while the app is maximised leads to freaked out app","body":"### Steps to reproduce\n\n1. Maximise a Flutter app\r\n2. Change the resolution of the monitor the app is on (for me, this happens due to the OS changing the monitor configuration when it thinks a monitor has gone away)\r\n3. Watch Flutter app beachball itself\n\n### Expected results\n\nAdapting to updated reality would be nice\n\n### Actual results\n\nLike I said. Beach ball\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n$ flutter doctor -v\r\n[\u2713] Flutter (Channel beta, 3.21.0-1.0.pre.2, on macOS 14.4 23E214 darwin-arm64, locale en)\r\n    \u2022 Flutter version 3.21.0-1.0.pre.2 on channel beta at \/Users\/brettmorgan\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter\r\n    \u2022 Framework revision c398442c35 (5 days ago), 2024-03-12 22:26:24 -0700\r\n    \u2022 Engine revision 0d4f78c952\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-190.1.beta)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/brettmorgan\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA CE.app\r\n    \u2022 Flutter plugin version 77.0.1\r\n    \u2022 Dart plugin version 233.13135.65\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 macOS (desktop)                 \u2022 macos                 \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad \u2022 darwin         \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":[],"labels":["platform-mac"]},{"title":"[split_config.arm64_v8a.apk!libflutter.so] JNI_OnLoad","body":"I get this crash error in my play store\r\nThe app is working fine on 278 devices and this issues accure only on one device  \"Athesi_professional AP5702\"\r\n\r\n\r\n```\r\n[split_config.arm64_v8a.apk!libflutter.so] JNI_OnLoad\r\n*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r\npid: 0, tid: 12740 >>> com.cdb.ma.a <<<\r\n\r\nbacktrace:\r\n  #00  pc 0x00000000000c9dd8  \/vendor\/lib64\/egl\/libGLESv2_mtk.so\r\n  #01  pc 0x000000000012fcc0  \/vendor\/lib64\/egl\/libGLESv2_mtk.so\r\n  #02  pc 0x000000000013a6fc  \/vendor\/lib64\/egl\/libGLESv2_mtk.so\r\n  #03  pc 0x000000000013aa18  \/vendor\/lib64\/egl\/libGLESv2_mtk.so (glTexStorage2D+104)\r\n  #04  pc 0x0000000000092a28  \/vendor\/lib64\/egl\/libGLES_meow.so (MEOW::meow_call_ddk_gl_2_glTexStorage2D(unsigned int, int, unsigned int, int, int)+32)\r\n  #05  pc 0x000000000055d01c  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #06  pc 0x0000000000557908  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #07  pc 0x00000000004eb998  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #08  pc 0x00000000004f4344  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #09  pc 0x00000000004efa40  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #10  pc 0x00000000004f6804  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #11  pc 0x00000000004f964c  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #12  pc 0x00000000004f9798  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #13  pc 0x000000000051de88  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #14  pc 0x00000000006dc29c  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #15  pc 0x000000000038eb50  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #16  pc 0x00000000006dbe9c  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #17  pc 0x000000000038d8a8  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #18  pc 0x0000000000390f30  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #19  pc 0x000000000001a064  \/system\/lib64\/libutils.so (android::Looper::pollInner(int)+916)\r\n  #20  pc 0x0000000000019c68  \/system\/lib64\/libutils.so (android::Looper::pollOnce(int, int*, int*, void**)+112)\r\n  #21  pc 0x0000000000012d3c  \/system\/lib64\/libandroid.so (ALooper_pollOnce+100)\r\n  #22  pc 0x000000000039103c  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #23  pc 0x000000000038f4f8  \/data\/app\/~~dpG5ebPzPobBej3GODkWqQ==\/com.cdbg4s.v2.public-rAowVwJAM0Z1M6cGAJQJ6g==\/split_config.arm64_v8a.apk!libflutter.so (JNI_OnLoad+7905280) (BuildId: ee72ba453ac1f88753c40758d302dcca1c487a8d)\r\n  #24  pc 0x00000000000b0bd8  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (__pthread_start(void*)+64)\r\n  #25  pc 0x00000000000505d0  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (__start_thread+64)\r\n```","comments":["@HamzaAitMezouar \r\nIs there a way for you to provide replication steps or pattern \/ code sample that triggers this log ?\r\nWhat flutter version the app is on that triggers this log ?\r\n\r\n\r\n> working fine on 278 devices and this issues accure only on one device \"Athesi_professional AP5702\"\r\n\r\nThis probably indicates device specific issue. What is this device ? can you provide make and model ?\r\n","@darshankawar  I can't replicate this issue since it happened only once and I don't have logs for it. The app is working fine on more than 300 devices till now except this one . \r\nDevice :  Athesi_professional AP5702\r\nRAM : 3GB\r\nSystem chip :Mediatek MT6761\r\nAndroid : 11 (SDK 30). \r\nThis is all the data I got from Playstore and Crashlytics.\r\n ","> since it happened only once and I don't have logs for it. The app is working fine on more than 300 devices till now except this one .\r\n\r\nThis is doesn't seem to be frequent \/ consistent and looks intermittent with only 1 device affected out of 300, so the sample size of the crash is not much.\r\n\r\nWithout replication steps or code, it'll be tough to make the issue actionable, although it seems to be crashing in `glTexStorage2D`.\r\n","@darshankawar You are right. I will try to request the device and debug with it hoping I can replicate the issue. I did some research and I found people saying that this issue occurs for devices with certain CPU. but as you said without replicating the error it will be hard to guess where it comes from. Thank you very much. "],"labels":["waiting for customer response","in triage"]},{"title":"How to use flutter_service_worker.js in hostElement while the flutter app and the host's domains are different?","body":"### Steps to reproduce\n\n1. Host flutter web app to domain\r\n2. Use that hosted flutter app as elementHost in another non-flutter html page in a different domain\r\n\n\n### Expected results\n\nflutter_service_worker.js loads without error\n\n### Actual results\n\nException while loading service worker: DOMException: Failed to register a ServiceWorker: The origin of the provided scriptURL ('[HOSTED_FLUTTER_APP_URL]') does not match the current origin ('[ANOTHER_HOSTED_HTML_PAGE]').\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```JS\r\nfunction launchFlutter() {\r\n        _flutter.loader.loadEntrypoint({\r\n          serviceWorker: {\r\n            serviceWorkerUrl: \"{{ flutter_url }}flutter_service_worker.js?v=\",\r\n            serviceWorkerVersion: serviceWorkerVersion,\r\n          },\r\n          entrypointUrl: \"{{ flutter_url }}main.dart.js\",\r\n          onEntrypointLoaded: async (engineInitializer) => {\r\n            const appRunner = await engineInitializer.initializeEngine({\r\n              hostElement: document.querySelector(\"#flutter_target\"),\r\n              assetBase: \"{{ flutter_url }}\",\r\n            });\r\n            await appRunner.runApp();\r\n            document.querySelector('.shimmer-container').style.display = 'none';\r\n          },\r\n        });\r\n      }\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[!] Flutter (Channel [user-branch], 3.16.9, on macOS 14.2.1 23C71 darwin-arm64,\r\n    locale en-BD)\r\n    ! Flutter version 3.16.9 on channel [user-branch] at\r\n      \/Users\/saifulislam\/Development\/flutter_sdk\/flutter\r\n      Currently on an unknown channel. Run `flutter channel` to switch to an\r\n      official channel.\r\n      If that doesn't fix the issue, reinstall Flutter by following instructions\r\n      at https:\/\/flutter.dev\/docs\/get-started\/install.\r\n    ! Upstream repository unknown source is not a standard remote.\r\n      Set environment variable \"FLUTTER_GIT_URL\" to unknown source to dismiss\r\n      this error.\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2023.2)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (4 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @adar2378 \r\nFor us to further investigate this issue, could you please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code? \r\nIt would appreciated if you could add it to a GitHub repository so that we can easily pull and run the sample projects (please also add license the code in the repository under some open-source license (e.g. MIT, Apache, BSD, GPL) so that we may look into it). Thank you!","@huycozy Sure I will do that. \r\n\r\nBut I think it is not about code sample, it is about providing documentation on embedding element of flutter on how to use flutter_service_worker.js if the flutter app has a different domain and the host has a different domain. Because looks like due to browser restriction, flutter_service_worker.js must be in the same domain as the host. \r\n\r\nAlso I could not find any example app for embedding element of Flutter web app in another web app\/site. ","Thanks. Please share a sample code so that we can verify this properly.\r\n\r\nInstead, if you think there should be an example in such case (different domains), please file a new issue (proposal template).\r\n\r\n>Also I could not find any example app for embedding element of Flutter web app in another web app\/site.\r\n\r\nPlease check this sample code to see if it's your need: https:\/\/github.com\/flutter\/samples\/tree\/main\/web_embedding"],"labels":["waiting for customer response","in triage"]},{"title":"Error: Could not find or load main class org.gradle.wrapper.GradleWrapperMain - Help me pls!!!!!!!","body":"\r\n![431106248_722707883378359_5456783610584291566_n](https:\/\/github.com\/flutter\/flutter\/assets\/142495975\/08a1c5d8-bef6-4a0d-a21b-a5eee34cac08)\r\n\r\n\r\nI'm a foreigner, I'm not very communicative, but please help me. I built this project for my graduation project, but I can't solve this problem for two days, trying to find help in github, and yet I can't solve it, so please give me a detailed solution and thank you in advance.\r\n","comments":["Hi @Chakkitnbu \r\nWhen opening an issue, please try to provide all information indicated in the template so that we can address the issue properly (See bug issue template [here](https:\/\/github.com\/flutter\/flutter\/issues\/new?assignees=&labels=&projects=&template=2_bug.yml))\r\n\r\nSome potential reasons can cause the issue:\r\n- Your project path contains a white space or non-English text \r\n- `gradle-wrapper.jar` is corrupted or missing for some reason.  \r\n\r\nYou can check links from this https:\/\/github.com\/flutter\/flutter\/issues\/122088#issuecomment-1457955100 to see if it helps. If the issue persists, please share the output of `flutter run -v` and `flutter doctor -v`.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Icons: add method fromName(iconName)","body":"### Use case\n\nIcon names are retrieved from server.\r\nSo a method for getting IconData from icon name is needed.\r\n\r\nIcons.fromName(iconName)\r\n\r\niconName is the same as the constant name in Icons class.\r\n\r\npub.dev package material_icon_design_flutter does not contain many of the IconData constants defined in Icons, so it is not designed to provide name mappings for the Icons class.\r\n\n\n### Proposal\n\nAdd a new method for mapping names to IconData constants:\r\n\r\nIconData Icons.fromName(iconName)","comments":["What about tree shaking though?","Can you elaborate how the icon would be identified by name? Currently, icons work with a custom font and you can use `IconData` to specify an Icon by code point and font family."],"labels":["c: new feature","waiting for customer response","framework","team-framework"]},{"title":"[tool_crash] FileSystemException: Cannot open file, OS Error: No such file or directory, errno = 2","body":"## Command\r\n```\r\nflutter update-packages --force-upgrade\r\n```\r\n\r\n## Steps to Reproduce\r\n1. ...\r\n2. ...\r\n3. ...\r\n\r\n## Logs\r\nFileSystemException: Cannot open file, OS Error: No such file or directory, errno = 2\r\n```\r\n\r\n```\r\n```\r\n\u001b[32m[\u2713]\u001b[39m Flutter (Channel stable, 3.16.0, on Linux Mint 21.2 5.15.0-87-generic, locale es_US.UTF-8)\r\n    \u001b[32m\u2022\u001b[39m Flutter version 3.16.0 on channel stable at \/home\/spyroth\/snap\/flutter\/common\/flutter\r\n    \u001b[32m\u2022\u001b[39m Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u001b[32m\u2022\u001b[39m Framework revision db7ef5bf9f (4 months ago), 2023-11-15 11:25:44 -0800\r\n    \u001b[32m\u2022\u001b[39m Engine revision 74d16627b9\r\n    \u001b[32m\u2022\u001b[39m Dart version 3.2.0\r\n    \u001b[32m\u2022\u001b[39m DevTools version 2.28.2\r\n\r\n\u001b[33m[!]\u001b[39m Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u001b[32m\u2022\u001b[39m Android SDK at \/home\/spyroth\/Android\/Sdk\r\n    \u001b[32m\u2022\u001b[39m Platform android-34, build-tools 34.0.0\r\n    \u001b[32m\u2022\u001b[39m Java binary at: \/home\/spyroth\/Descargas\/android-studio\/jre\/bin\/java\r\n    \u001b[31m\u2717\u001b[39m Could not determine java version\r\n    \u001b[31m\u2717\u001b[39m Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/linux#android-setup for more details.\r\n\r\n\u001b[31m[\u2717]\u001b[39m Chrome - develop for the web (Cannot find Chrome executable at google-chrome)\r\n    \u001b[33m!\u001b[39m Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n\u001b[32m[\u2713]\u001b[39m Linux toolchain - develop for Linux desktop\r\n    \u001b[32m\u2022\u001b[39m clang version 10.0.0-4ubuntu1\r\n    \u001b[32m\u2022\u001b[39m cmake version 3.16.3\r\n    \u001b[32m\u2022\u001b[39m ninja version 1.10.0\r\n    \u001b[32m\u2022\u001b[39m pkg-config version 0.29.1\r\n\r\n\u001b[32m[\u2713]\u001b[39m Android Studio (version 3.4)\r\n    \u001b[32m\u2022\u001b[39m Android Studio at \/home\/spyroth\/Descargas\/android-studio\/\r\n    \u001b[32m\u2022\u001b[39m Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u001b[32m\u2022\u001b[39m Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u001b[32m\u2022\u001b[39m android-studio-dir = \/home\/spyroth\/Descargas\/android-studio\/\r\n    \u001b[32m\u2022\u001b[39m Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1343-b16-5323222)\r\n\r\n\u001b[32m[\u2713]\u001b[39m VS Code (version unknown)\r\n    \u001b[32m\u2022\u001b[39m VS Code at \/snap\/code\/current\r\n    \u001b[32m\u2022\u001b[39m Flutter extension version 3.84.0\r\n    \u001b[31m\u2717\u001b[39m Unable to determine VS Code version.\r\n\r\n\u001b[32m[\u2713]\u001b[39m Connected device (1 available)\r\n    \u001b[32m\u2022\u001b[39m Linux (desktop) \u2022 linux \u2022 linux-x64 \u2022 Linux Mint 21.2 5.15.0-87-generic\r\n\r\n\u001b[32m[\u2713]\u001b[39m Network resources\r\n    \u001b[32m\u2022\u001b[39m All expected network resources are available.\r\n\r\n\u001b[33m!\u001b[39m Doctor found issues in 2 categories.\r\n\r\n```\r\n\r\n## Flutter Application Metadata\r\n**Type**: app\r\n**Version**: 1.0.0+1\r\n**Material**: true\r\n**Android X**: false\r\n**Module**: false\r\n**Plugin**: false\r\n**Android package**: null\r\n**iOS bundle identifier**: null\r\n**Creation channel**: stable\r\n**Creation framework version**: 4d9e56e694b656610ab87fcf2efbcd226e0ed8cf\r\n\r\n","comments":["@CubanseSpyroth \r\nDoes it show any error log that you can share it here ?\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Predictive back can close app when navigation stack is not empty","body":"### Steps to reproduce\r\n\r\n1. add `android:enableOnBackInvokedCallback=\"true\"` to main\/AndroidManifest.xml\r\n2. run the code below\r\n3. go to \/home\/second by tapping IconButton\r\n4. open modalBottomSheet by tapping IconButton\r\n5. swipe to go back -> modalBottomSheet closes\r\n6. swipe to go back -> app exits\r\n\r\n### Expected results\r\n\r\nafter step 6 we should be at \/home page\r\n(and if there is no `android:enableOnBackInvokedCallback=\"true\"` - bug doesn't appear)\r\n\r\n### Actual results\r\n\r\nafter step 6 we go to desktop\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final dispatcher = BackDispatcher();\r\n    return MaterialApp.router(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      \/\/ routerConfig: router,\r\n      routerDelegate: router.routerDelegate,\r\n      routeInformationProvider: router.routeInformationProvider,\r\n      routeInformationParser: router.routeInformationParser,\r\n      backButtonDispatcher: dispatcher,\r\n    );\r\n  }\r\n}\r\n\r\nclass BackDispatcher extends RootBackButtonDispatcher {\r\n  @override\r\n  Future<bool> didPopRoute() async {\r\n    if (modalStack.isNotEmpty) {\r\n      debugPrint('popping modal');\r\n      Navigator.of(navKey.currentContext!).pop();\r\n      return true;\r\n    }\r\n\r\n    return super.didPopRoute();\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatelessWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: const Text('home page'),\r\n      ),\r\n      body: Center(\r\n        child: IconButton(\r\n          onPressed: () => context.go('\/home\/second'),\r\n          icon: const Icon(Icons.link),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass SecondPage extends StatelessWidget {\r\n  const SecondPage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: const Text('second page'),\r\n      ),\r\n      body: Center(\r\n        child: IconButton(\r\n          onPressed: () {\r\n            showModalBottomSheet(\r\n              context: context,\r\n              useRootNavigator: true,\r\n              builder: (context) {\r\n                return Container(\r\n                  width: 100,\r\n                  height: 100,\r\n                  color: Colors.red,\r\n                );\r\n              },\r\n            );\r\n          },\r\n          icon: const Icon(Icons.slideshow),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass Layout extends StatelessWidget {\r\n  const Layout(\r\n    this.shell, {\r\n    super.key,\r\n  });\r\n\r\n  final StatefulNavigationShell shell;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Column(\r\n      children: [\r\n        Expanded(child: shell),\r\n        Container(\r\n          height: 10,\r\n          color: Colors.blueGrey,\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}\r\n\r\nfinal modalStack = <Route>[];\r\n\r\nclass MyObserver extends RouteObserver {\r\n  @override\r\n  void didPush(Route route, Route? previousRoute) {\r\n    if (previousRoute == null) return;\r\n    debugPrint('!!! didPush ${route.runtimeType}');\r\n    modalStack.add(route);\r\n    super.didPush(route, previousRoute);\r\n  }\r\n\r\n  @override\r\n  void didPop(Route route, Route? previousRoute) {\r\n    debugPrint('!!! didPop ${route.runtimeType}');\r\n    modalStack.removeLast();\r\n    super.didPop(route, previousRoute);\r\n  }\r\n}\r\n\r\nfinal navKey = GlobalKey<NavigatorState>();\r\nGoRouter router = GoRouter(\r\n  debugLogDiagnostics: true,\r\n  observers: [MyObserver()],\r\n  initialLocation: '\/home',\r\n  navigatorKey: navKey,\r\n  routes: [\r\n    GoRoute(\r\n      path: '\/',\r\n      redirect: (_, state) {\r\n        return state.fullPath == '\/' ? '\/home' : null;\r\n      },\r\n      routes: [\r\n        StatefulShellRoute.indexedStack(\r\n          builder: (context, state, shell) => Layout(shell),\r\n          branches: [\r\n            StatefulShellBranch(\r\n              routes: [\r\n                GoRoute(\r\n                  path: 'home',\r\n                  builder: (context, _) => const MyHomePage(),\r\n                  routes: [\r\n                    GoRoute(\r\n                      path: 'second',\r\n                      builder: (context, _) => const SecondPage(),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ],\r\n            ),\r\n          ],\r\n        ),\r\n      ],\r\n    ),\r\n  ],\r\n);\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-RU)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/opt\/homebrew\/Caskroom\/flutter\/3.10.4\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (10 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/geara0\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/geara0\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.1.1)\r\n    \u2022 IntelliJ at \/Users\/geara0\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 M2101K6G (mobile)           \u2022 79a46fc6      \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554 \u2022 android-arm64  \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 macOS (desktop)             \u2022 macos         \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    ! Error: Browsing on the local area network for iPhone HOME. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["@Geara0 \r\nCan you take a look at https:\/\/docs.flutter.dev\/release\/breaking-changes\/android-predictive-back and see if it helps in your case or not ?\r\n","@darshankawar \r\nNo, migration guide can't help me in this case, because key functions in this example is \r\n`showModalBottomSheet(context, useRootNavigator: true)`\r\n`Navigator.of(navKey.currentContext!).pop();`\r\nand\r\n`didPopRoute from RootBackButtonDispatcher`\r\nwhich are functions that came from the default flutter package\r\n\r\n1. on app launch we have stack (at root): [NestedRoute]\r\n2. after going to second page: [NestedRoute]\r\n3. after opening modal via rootnavigator: [NestedRoute, Modal]\r\n4. after pop from rootcontext: [NestedRoute]\r\n\r\nthen, GoRouter should handle pop in NestedRoute, but app closes even before GoRouter registers any event\r\n\r\n#### Why I think it's not GoRouter issue?\r\n1. I operate only with android back button, which is handled by RootBackButtonDispatcher's, which calls the same methods independent of any flag in androidManifest\r\n2. Behaviour is based only on  enableOnBackInvokedCallback flag\r\n3. GoRouter backButtonDispatcher is just RootBackButtonDispatcher \r\nhttps:\/\/github.com\/flutter\/packages\/blob\/a757073ac4eaf05b7516d3d0488e5c98b221043f\/packages\/go_router\/lib\/src\/router.dart#L186\r\n5.\r\nI put debugPoints everywhere across flutter and go_router source files and saw that flutter calls function (_can't find it rn, maybe will come back to that later_) that does following\r\n```\r\ncase ios:\r\ncase macos:\r\ncase web:\r\ncase windows:\r\ncase fuchsia:\r\n    return some_bool\r\ncase android:\r\n   return call_to_method_channel\r\n```\r\n\r\n#### Why even use GoRouter then?\r\nIdk how to create nested routes with flutter only, but I'm sure that issue will occur even if I rebuild app with flutter default navigation (if possible)\r\n","Thanks for the update. Check below issues and see if they resemble your case or not:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/140869\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/139398","@darshankawar \r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/140869 is not related bc `android:enableOnBackInvokedCallback` doesn't affect this issue\r\n(same result when true\/false)\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/139398 is not realted bc my issue isn't go_router issue \r\n(And go router works fine in my case.) \r\n\r\nAs I said earlier\r\n> app closes even before GoRouter registers any event\r\n\r\n___\r\n\r\nMy issue is about `android:enableOnBackInvokedCallback` value affecting how nested routing works\r\nif false - all works fine\r\nif true - nested navigation doesn't receive pop callback, instead app closes\r\nand this close app behaviour is handled by flutter itself","Thanks for the update. I was able to replicate the reported behavior using details provided.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-11.0.pre.43, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-11.0.pre.43 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 056f25c220 (59 minutes ago), 2024-03-20 00:31:11 -0400\r\n    \u2022 Engine revision 24b84203f6\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-250.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>"],"labels":["platform-android","framework","f: routes","has reproducible steps","team-android","found in release: 3.19","found in release: 3.21"]},{"title":"Zip file corrupted.","body":"### Steps to reproduce\n\n1. Download window flutter zip file\r\n2. Extract in your PC\r\n3. Set environment variable\r\n4. Open CMD \r\n5. Run flutter doctor\n\n### Actual results\n\n- Flutter doctor is not running. \n\n### Logs\n\n<details open>\r\n<summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n<!-- Paste your logs here -->\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open>\r\n<summary>Doctor output<\/summary>\r\n\r\n```console\r\n\r\n<!-- Paste your output here -->\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["@Rshn123 \r\n\r\n\r\n> * Flutter doctor is not running.\r\n\r\nCan you provide the log \/ exception ?"],"labels":["waiting for customer response","in triage"]},{"title":"Use JPEG XL instead of PNG for golden tests to save repo space","body":"### Use case\n\nWe have a lot of golden tests in our projects, and they keep changing. As they are commited to source control, I feel like we can use a better format to save repo space. Currently, flutter uses PNG.\n\n### Proposal\n\nSimply use lossless JPEG XL instead of PNG. It offers around 40%~50% savings per file. [ref](https:\/\/docs.google.com\/spreadsheets\/d\/1ju4q1WkaXT7WoxZINmQpf4ElgMD2VMlqeDN2DuZ6yJ8\/edit#gid=1919028011)","comments":[],"labels":["c: new feature","framework","c: proposal","P3","team-framework","triaged-framework"]},{"title":"Remove state shared across tests","body":"This is part 6 of a broken down version of the #140101 refactor.\r\n\r\nThis change tries to be as minimal as possible to make review as easy as possible. We can further simplify this file in future PRs. This change allows us to re-enable test order randomization for these tests.\r\n","comments":[],"labels":["a: tests","framework"]},{"title":"Add flutter_goldens README","body":"This is part 5 of a broken down version of the #140101 refactor.\r\n\r\nThis PR adds a README to flutter_goldens with breadcrumbs to other sources of documentation.","comments":["It looks like this pull request may not have tests. Please make sure to add tests before merging. If you need [an exemption](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests) to this rule, contact \"@test-exemption-reviewer\" in the #hackers channel in [Chat](https:\/\/github.com\/flutter\/flutter\/wiki\/Chat) (don't just cc them here, they won't see it! Use Discord!).\n\nIf you are not sure if you need tests, consider this rule of thumb: the purpose of a test is to make sure someone doesn't accidentally revert the fix. Ask yourself, **is there anything in your PR that you feel it is important we not accidentally revert back to how it was before your fix?**\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing.","test-exempt: documentation"],"labels":["a: tests","framework"]},{"title":"AutomaticKeepAliveClientMixin isn't behaving as expected in nested Stateful Widgets","body":"### Steps to reproduce\r\n\r\n1. Write a nested widget with AutomaticKeepAliveClientMixin to preserve the state.\r\n2. The state is reset when a valuenotifier is inside the state\r\n\r\n\r\n\r\n\r\n### Expected results\r\n\r\n1. The state should be preserved\r\n\r\n### Actual results\r\n\r\n1. The state is not preserved\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return  MaterialApp(\r\n      debugShowCheckedModeBanner: false,\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: CommentConstructor(\r\n     \r\n            index: 4,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass CommentConstructor extends StatefulWidget {\r\n  final int index;\r\n  const CommentConstructor({super.key, required this.index});\r\n\r\n  @override\r\n  State<CommentConstructor> createState() => _CommentConstructorState();\r\n}\r\n\r\nclass _CommentConstructorState extends State<CommentConstructor>\r\n    with AutomaticKeepAliveClientMixin {\r\n  ValueNotifier<bool> isCollapsed = ValueNotifier(false);\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    super.build(context);\r\n    return Container(\r\n      margin: const EdgeInsets.fromLTRB(2, 3, 1, 2),\r\n      child: Column(\r\n        children: [\r\n          IconButton(\r\n            onPressed: () {\r\n              isCollapsed.value = !isCollapsed.value;\r\n            },\r\n            icon: const Icon(Icons.emoji_emotions),\r\n          ),\r\n          ValueListenableBuilder(\r\n            valueListenable: isCollapsed,\r\n            builder: (context, value, child) {\r\n              return value\r\n                  ? const Icon(Icons.propane)\r\n                  : widget.index > 0\r\n                      ? CommentConstructor(\r\n                          index: (widget.index - 1),\r\n                        )\r\n                      : SizedBox.shrink();\r\n            },\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n\r\n  @override\r\n  bool get wantKeepAlive => true;\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/83347865\/9b23ec51-f65a-4ca8-897d-b1e9ec79f6e6\r\n\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\ntested on dartpad.dev\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\ntested on dartpad.dev\r\n```\r\n\r\n<\/details>\r\n","comments":["Maybe i am just overestimating AutomaticKeepAliveClientMixin.",">The state should be preserved\r\n\r\nCould you share the expected result from the example? ","So in the video, i close the 3rd smiling emoji (which is nested), and then the 1st ('parent'). Then, i open the 1st and see that the 3rd one is open once again. I was expecting that the state \"closed \"due to the valuenotifier \"isCollapsed\" in the 3rd one being 'true' would be saved, but the widget rebuilds its child when opening the 1st one again. Something like\r\n- Initial all; isCollpased -> false\r\n- cliked 3rd nested; isCollapsed -> true\r\n- click 1st 'parent' emoji; isCollpased -> true\r\n- reclick 1st 'parent' emoji; isCollapsed -> false\r\n- 3rd nested isCollpased which should be true is instead false.\r\n\r\nBut this could be caused all by my misunderstanding of how automatickeepalive works.\r\nOne solution could be to use a hierarchical inheritedwidget\/notifier that saves them with an index before the nested widget, but is automatickeepalive behaviour correct?","In this case, you are recursively creating new instances of `CommentConstructor` widget that implemented `AutomaticKeepAliveClientMixin`. This could be problematic as new instances won't retain the state. I'm unsure if there is a workaround for this. Labeling the issue to have other's insights.\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-10.0.pre.44, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-10.0.pre.44 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision c6b0240a85 (67 minutes ago), 2024-03-18 21:59:16 -0400\r\n    \u2022 Engine revision 3d909f1411\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-244.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Pixel 7 (mobile) \u2022 2B171FDH20084L \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 macOS (desktop)  \u2022 macos          \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome         \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["framework","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] Changes to use depth based clipping have regressed GPU frame times.","body":"Canonical benchmark is probably complex layout: https:\/\/flutter-flutter-perf.skia.org\/e\/?queries=device_type%3DPixel_7_Pro%26sub_result%3D90th_percentile_gpu_frame_time%26sub_result%3D99th_percentile_gpu_frame_time%26sub_result%3Daverage_gpu_frame_time%26test%3Dcomplex_layout_scroll_perf_impeller__timeline_summary&selected=commit%3D39677%26name%3D%252Carch%253Dintel%252Cbranch%253Dmaster%252Cconfig%253Ddefault%252Cdevice_type%253DPixel_7_Pro%252Cdevice_version%253Dnone%252Chost_type%253Dlinux%252Csub_result%253Daverage_gpu_frame_time%252Ctest%253Dcomplex_layout_scroll_perf_impeller__timeline_summary%252C\r\n\r\nAFAIK this application has few or no non-convex shapes. average GPU frame time regressed about 1.5ms\r\n\r\nThe new gallery is a similar story, the main page which used to have GPU times around ~2-3ms is now taking ~7-8ms. This is pushing us closer to frame budget on the Pixel 7s.\r\n\r\n### Before\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/8975114\/e1175057-14c0-4740-88e8-1d5fdc362e4a)\r\n\r\n### After\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/8975114\/ae4ef8b0-6f34-44e8-a8c7-75d7c17950de)\r\n\r\nI don't think this is actually related to the StC portion of the change as there are few if any non-convex shapes. Instead, a change in depth testing from the assigned depth values\/enabling of the depth test must be responsible\r\n","comments":["The problem is the depth write portion of the intersect clip. For something like flutter gallery that has 3-4 intersect clips, we end up doing as many fullscreen depth writes. This is apparently super expensive, and constitutes roughly 6ms of the 7ms GPU frame time.","I investigated iOS performance. On the flutter gallery example app, there does not seem to be any performance regression - and the clips themselves comprise a trivial amount of GPU time. While that is only one example, its possible that this is only an Arm\/QC vs apple GPU performance difference."],"labels":["P1","e: impeller","team-engine","triaged-engine"]},{"title":"App does not build","body":"### Steps to reproduce\n\nI just wish the app could run and also connect to the watch\n\n### Actual results\n\nI keep getting this error:I keep getting:\r\n Launching lib\/main.dart on Watch SE in debug mode...\r\nUpgrading AppFrameworkInfo.plist\r\nUpdating project for Xcode compatibility.\r\nUpgrading project.pbxproj\r\nUpgrading Runner.xcscheme\r\nAdding input path to Thin Binary build phase.\r\nWatch companion app found.\r\nXcode build done.                                            3.7s\r\nFailed to build iOS app\r\nUncategorized (Xcode): Failed to build workspace Runner with scheme Runner.\r\n\r\nCould not build the application for the simulator.\r\nError launching application on Watch SE.\r\n\r\nExited\u00a0(1).\r\n\r\nhttps:\/\/github.com\/Sahcode01\/Flutter_watch_connection\n\n### Logs\n\nI keep getting this error:I keep getting:\r\n Launching lib\/main.dart on Watch SE in debug mode...\r\nUpgrading AppFrameworkInfo.plist\r\nUpdating project for Xcode compatibility.\r\nUpgrading project.pbxproj\r\nUpgrading Runner.xcscheme\r\nAdding input path to Thin Binary build phase.\r\nWatch companion app found.\r\nXcode build done.                                            3.7s\r\nFailed to build iOS app\r\nUncategorized (Xcode): Failed to build workspace Runner with scheme Runner.\r\n\r\nCould not build the application for the simulator.\r\nError launching application on Watch SE.\r\n\r\nExited\u00a0(1).\r\n\r\nhttps:\/\/github.com\/Sahcode01\/Flutter_watch_connection\n\n### Flutter Doctor output\n\nNo issue at all","comments":["@Sahcode01 \r\nCan you provide `flutter doctor -v` ? And also run `flutter run -v` and provide the entire verbose log ?\r\nThe log will be huge so you can put that in a textfile and share it here.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"`ExpansionTile` Unable to remove right padding from title","body":"This PR makes it possible to remove the hard-coded 32.0 unit padding coming from ListTile when trailing is not null. Which it always it as `ExpansionTile` always provides a widget there. Currently there is no way to remove it and people have to hack around it: e.g. \r\nhttps:\/\/stackoverflow.com\/questions\/54714836\/how-to-remove-default-padding-from-expansiontiles-header\r\n\r\nThe issue is quite old and I came across it today and decided to put together a quick fix.\r\n\r\nFixes #145268\r\n\r\nThe change should be non-breaking as the default stays the same. But I have no issue with changing something if requested. (naming-wise, functionality-wise etc...)\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.","comments":["Why this issue ?"],"labels":["framework","f: material design"]},{"title":"Flutter iOS documentation to address \"ITMS-91053: Missing API declaration\"","body":"### Use case\r\n\r\nWe recently submitted our Flutter app (iOS) to the AppStore and received the following email:\r\n\r\n> Hello,\r\n> \r\n> We noticed one or more issues with a recent submission for App Store review for the following app:\r\n> \r\n> \r\n> APPNAME\r\n> Version 0.2.3\r\n> Build 26\r\n> Although submission for App Store review was successful, you may want to correct the following issues in your next submission for App Store review. Once you've corrected the issues, upload a new binary to App Store Connect.\r\n> \r\n> ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryFileTimestamp. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n> \r\n> ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryUserDefaults. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n> \r\n> ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategorySystemBootTime. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n> \r\n> Apple Developer Relations\r\n\r\n### Proposal\r\n\r\nI was hoping that Flutter documentation could guide us developers further on how to address this before May 1st, 2024. I know that Apple documentation is there but it would be very helpful for the Flutter community to show how they addressed these requirements as well as the Flutter documentation highlighting how to do it successfully.","comments":["Same happened to our project","any solution ?","Seems like [this solution works](https:\/\/github.com\/FlutterFlow\/flutterflow-issues\/issues\/2527#issuecomment-1998885560)","Same here, it seems like the solution is not working. i even removed the new packages that i added to see if that's the problem (sign_in_with_apple) unfortunately it wasn't the case. I'm using normal flutter not flutterFlow. ","I believe this is being tracked in https:\/\/github.com\/flutter\/flutter\/issues\/143232 in which you can follow-up for further updates.\r\nClosing this in favor of it.\r\n","I was getting similar warnings after my upload. Seems there is still quite some time to resolve it (before May 1, 2024). I added the following keys to my Info.plist, based on [[https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api](https:\/\/github.com\/flutter\/flutter\/issues\/url)](url)\r\n\r\n     <key>NSPrivacyAccessedAPITypes<\/key>\r\n      <array>\r\n          <dict>\r\n              <key>NSPrivacyAccessedAPIType<\/key>\r\n              <string>NSPrivacyAccessedAPICategoryFileTimestamp<\/string>\r\n              <key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n              <array>\r\n                  <string>C617.1<\/string>\r\n               <\/array>\r\n          <\/dict>\r\n          <dict>\r\n              <key>NSPrivacyAccessedAPIType<\/key>\r\n              <string>NSPrivacyAccessedAPICategoryUserDefaults<\/string>\r\n              <key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n              <array>\r\n                   <string>CA92.1<\/string>\r\n                  <string>1C8F.1<\/string>\r\n              <\/array>\r\n          <\/dict>\r\n      <\/array>","https:\/\/github.com\/flutter\/flutter\/issues\/131940 would probably be a better issue to follow specifically for discussion of documentation around this issue.","> I was getting similar warnings after my upload. Seems there is still quite some time to resolve it (before May 1, 2024). I added the following keys to my Info.plist, based on [[https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api](https:\/\/github.com\/flutter\/flutter\/issues\/url)](url)\r\n> \r\n> ```\r\n>  <key>NSPrivacyAccessedAPITypes<\/key>\r\n>   <array>\r\n>       <dict>\r\n>           <key>NSPrivacyAccessedAPIType<\/key>\r\n>           <string>NSPrivacyAccessedAPICategoryFileTimestamp<\/string>\r\n>           <key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n>           <array>\r\n>               <string>C617.1<\/string>\r\n>            <\/array>\r\n>       <\/dict>\r\n>       <dict>\r\n>           <key>NSPrivacyAccessedAPIType<\/key>\r\n>           <string>NSPrivacyAccessedAPICategoryUserDefaults<\/string>\r\n>           <key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n>           <array>\r\n>                <string>CA92.1<\/string>\r\n>               <string>1C8F.1<\/string>\r\n>           <\/array>\r\n>       <\/dict>\r\n>   <\/array>\r\n> ```\r\n\r\nthis is also not working for me i have also followed [this](https:\/\/github.com\/FlutterFlow\/flutterflow-issues\/issues\/2527#issuecomment-1998885560). but this is also not helpful for me still getting app rejection with Missing API declaration","I would encourage anyone following this issue to read https:\/\/github.com\/flutter\/flutter\/issues\/131940#issuecomment-2006965339, particularly the warning there.\r\n\r\nI will be hiding any comments I encounter in the Flutter issue tracker that tell people to add arbitrary contents to a privacy manifest.","Reopening this to gather more information.  @taufiq-husain @rajeshbdabhi  @Mounix99 @salim97, can you attach the following info:\r\n1. `pubspec.lock`\r\n2. `ios\/Podfile`\r\nThanks!","My Podfile: \r\n[Podfile.txt](https:\/\/github.com\/flutter\/flutter\/files\/14654036\/Podfile.txt)\r\n\r\nMy pubspec.lock file:\r\n[pubspec-lock.txt](https:\/\/github.com\/flutter\/flutter\/files\/14654038\/pubspec-lock.txt)\r\n\r\nI should add a note that most people will likely search for this issue by searching for \"ITMS-91053\" + \"Flutter\/iOS\" so it's a good idea to keep this thread updated. I actually wanted the Flutter team to add some documentation officially (if possible) so people would know how to do it the right way for their Flutter iOS Projects.","That Podfile does have `use_frameworks!` so something in there is being built statically or it wouldn't say `Your app\u2019s code in the \u201cRunner\u201d file` (unless Apple's warning isn't splitting out into framework names as we hoped).  I want to dig into whether that static lib has a privacy manifest resource.\r\n\r\n@taufiq-husain can you also attach your pubspec.yaml dependencies list?  I don't want to recreate it from that large lock file.  \ud83d\ude42 ","@taufiq-husain Also, could you confirm whether or not you have added *any* native code directly to your Runner? (E.g., modified the Swift or Objective-C code in the `ios\/` directory yourself.)","\r\nAnyone solved it?\r\n","@stuartmorgan, @darshankawar  i have solved this issue and my app now approved by app store. below are steps to fix this issue\r\n\r\n1. open ios directory into xcode\r\n![Screenshot 2024-03-20 at 7 45 20\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/27726640\/234bd872-2700-490e-9be0-495e5bc7ab7a)\r\n2. select runner -> right click-> new file -> search \"AppPrivacy\"\r\n![Screenshot 2024-03-20 at 7 41 46\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/27726640\/2f4cf5dd-c3f7-4132-be1a-6e49dd815d38)\r\n3. select AppPrivacy and click -> Next\r\n![Screenshot 2024-03-20 at 7 42 14\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/27726640\/de6fcf00-a893-4290-89de-e196d67ab6dc)\r\n4. select all available targets then click -> create\r\n5. [Edit by Flutter team: see [the warning in this comment](https:\/\/github.com\/flutter\/flutter\/issues\/131940#issuecomment-2006965339)] ~now open this file into any text editor and past below code into this file~\r\n\r\n<details>\r\n\r\n```<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">\r\n<!--\r\n   PrivacyInfo.xcprivacy\r\n   Runner\r\n\r\n   Created by Rajesh Dabhi on 20\/03\/24.\r\n   Copyright (c) 2024 . All rights reserved.\r\n-->\r\n<plist version=\"1.0\">\r\n<dict>\r\n\t<key>NSPrivacyTracking<\/key>\r\n\t<false\/>\r\n\t<key>NSPrivacyAccessedAPITypes<\/key>\r\n\t<array>\r\n\t\t<dict>\r\n\t\t\t<key>NSPrivacyAccessedAPIType<\/key>\r\n\t\t\t<string>NSPrivacyAccessedAPICategoryDiskSpace<\/string>\r\n\t\t\t<key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n\t\t\t<array>\r\n\t\t\t\t<string>E174.1<\/string>\r\n\t\t\t<\/array>\r\n\t\t<\/dict>\r\n\t\t<dict>\r\n\t\t\t<key>NSPrivacyAccessedAPIType<\/key>\r\n\t\t\t<string>NSPrivacyAccessedAPICategoryUserDefaults<\/string>\r\n\t\t\t<key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n\t\t\t<array>\r\n\t\t\t\t<string>1C8F.1<\/string>\r\n\t\t\t<\/array>\r\n\t\t<\/dict>\r\n\t\t<dict>\r\n\t\t\t<key>NSPrivacyAccessedAPIType<\/key>\r\n\t\t\t<string>NSPrivacyAccessedAPICategoryFileTimestamp<\/string>\r\n\t\t\t<key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n\t\t\t<array>\r\n\t\t\t\t<string>C617.1<\/string>\r\n\t\t\t\t<string>0A2A.1<\/string>\r\n\t\t\t<\/array>\r\n\t\t<\/dict>\r\n\t\t<dict>\r\n\t\t\t<key>NSPrivacyAccessedAPIType<\/key>\r\n\t\t\t<string>NSPrivacyAccessedAPICategorySystemBootTime<\/string>\r\n\t\t\t<key>NSPrivacyAccessedAPITypeReasons<\/key>\r\n\t\t\t<array>\r\n\t\t\t\t<string>8FFB.1<\/string>\r\n\t\t\t<\/array>\r\n\t\t<\/dict>\r\n\t<\/array>\r\n<\/dict>\r\n<\/plist>\r\n```\r\n\r\n<\/details>","@jmagman these are my dependencies:\r\n\r\n```\r\ndependencies:\r\n  animated_emoji: ^3.1.0\r\n  animated_text_kit: ^4.2.2\r\n  audio_session: ^0.1.18\r\n  auto_size_text: ^3.0.0\r\n  cached_network_image: ^3.3.1\r\n  cloud_firestore: ^4.15.8\r\n  cloud_functions: ^4.6.8\r\n  crypto: ^3.0.3\r\n  facebook_app_events: ^0.19.0\r\n  firebase_analytics: ^10.8.9\r\n  firebase_auth: ^4.17.8\r\n  firebase_core: ^2.27.0\r\n  firebase_crashlytics: ^3.4.18\r\n  firebase_storage: ^11.6.9\r\n  flutter_native_splash: ^2.3.10\r\n  flutter:\r\n    sdk: flutter\r\n  flutter_branch_sdk: ^7.1.0\r\n  flutter_easyloading: ^3.0.5\r\n  flutter_local_notifications: ^17.0.0\r\n  get: ^4.6.6\r\n  google_fonts: ^6.2.1\r\n  google_sign_in: ^6.2.1\r\n  http: ^1.2.0\r\n  image_cropper: ^5.0.1\r\n  image_picker: ^1.0.7\r\n  in_app_review: ^2.0.8\r\n  intl: ^0.19.0\r\n  just_audio: ^0.9.36\r\n  mutex: ^3.1.0\r\n  path_provider: ^2.1.2\r\n  permission_handler: ^11.3.0\r\n  purchases_flutter: ^6.23.0\r\n  record: ^5.0.4\r\n  share_plus: ^7.2.2\r\n  shared_preferences: ^2.2.2\r\n  simple_ripple_animation: ^0.0.9\r\n  timezone: ^0.9.2\r\n  toastification: ^1.2.1\r\n  url_launcher: ^6.2.5\r\n  video_player: ^2.8.3\r\n  wakelock_plus: ^1.1.4\r\n\r\ndev_dependencies:\r\n  flutter_lints: ^3.0.0\r\n#  flutter_native_splash: ^2.3.13\r\n#  dependency_validator: ^3.0.0\r\n#  flutter_app_name: ^0.1.0\r\n#  flutter_launcher_icons: ^0.13.1\r\n#  flutter_test:\r\n#    sdk: flutter\r\n```\r\n\r\n@stuartmorgan \r\n\r\nI have only made changes in the **Info.plist** file to accommodate Branch.io quick-links (referral system), Facebook Analytics (to check when users sign up from Facebook Ads), Google Sign-in configurations, and various other iOS-specific configurations (not external API related).\r\n\r\nI have also made very basic changes in the AppDelegate.swift file:\r\n\r\n```\r\nimport UIKit\r\nimport Flutter\r\nimport FirebaseCore\r\nimport flutter_local_notifications\r\n\r\n@UIApplicationMain\r\n@objc class AppDelegate: FlutterAppDelegate {\r\n  override func application(\r\n    _ application: UIApplication,\r\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\r\n  ) -> Bool {\r\n    \/\/ This is required to make any communication available in the action isolate.\r\n    FlutterLocalNotificationsPlugin.setPluginRegistrantCallback { (registry) in\r\n      GeneratedPluginRegistrant.register(with: registry)\r\n    }\r\n\r\n    if #available(iOS 10.0, *) {\r\n        UNUserNotificationCenter.current().delegate = self as UNUserNotificationCenterDelegate\r\n    }\r\n      \r\n    FirebaseApp.configure()\r\n    GeneratedPluginRegistrant.register(with: self)\r\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\r\n  }\r\n}\r\n\r\n```","@rajeshbdabhi Please read [this comment](https:\/\/github.com\/flutter\/flutter\/issues\/145269#issuecomment-2007016285).","Thanks @taufiq-husain, we're digging into that particular pile of plugins now.\r\n\r\nCopied from https:\/\/github.com\/flutter\/flutter\/issues\/131940#issuecomment-2010097142 in case folks are following this issue and not that one:\r\n\r\nFlutter itself has a compliant privacy manifest (as far as we are aware).  If you're seeing `ITMS-91053:  Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file` it could mean:\r\n\r\n1. You are using a static plugin (podspec contains `s.static_framework = true`) that has declared a privacy manifest, but you're on an older version of that package and you should update.\r\n2. You are using a static plugin that has not declared a privacy manifest, or has an incomplete privacy manifest.  We'd really like to know exactly which plugin that is, and reach out (or you as their customer reach out) and get them to add one.  \r\n3. Much more concerning, the static plugin _is_ declaring a privacy manifest, but there's something we're missing about how Apple is enforcing this requirement.  \r\n\r\nIf you're seeing this, before you add any workarounds you read only, we'd really like help tracking this down for everyone so no one (except plugin authors in case 2 above) need to do anything manually.\r\n\r\nPlease attach:\r\n1. `pubspec.yaml` and `pubspec.lock`\r\n2. `ios\/Podfile`\r\n3. Confirm whether or not you have added *any* native code directly to your Runner? (E.g., modified the Swift or Objective-C code in the `ios\/` directory yourself.)\r\n4. If you're willing, your actual built `.ipa` or `.xcarchive` file so we can look at the file structure of your plugins.\r\n\r\nThank you so much!","Below are the results so far from my investigation of what @taufiq-husain provided (specifically, I `flutter create`d a project and added everything from the `pubspec` list [here](https:\/\/github.com\/flutter\/flutter\/issues\/145269#issuecomment-2009816174); that's not going to be identical to the real project, but it appears to reproduce build output that matches the Apple warnings):\r\n\r\n> ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryFileTimestamp.\r\n\r\nI haven't figured out what is tripping this yet. A few dependencies use APIs in this category, but none that I have found so far that are built statically and thus would be part of Runner. `nm` does show a `NSFileModificationDate` reference in `Runner`, so I'll continue to investigate.\r\n\r\n> Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryUserDefaults.\r\n\r\n`permission_handler_apple` has code using `NSUserDefaults`, and sets `static_framework = true`, so causes NSUserDefaults code to be in `Runner`. The plugin is [currently not declaring that](https:\/\/github.com\/Baseflow\/flutter-permission-handler\/issues\/1292), so this could be either case 2 or case 3 at this point.\r\n\r\n> ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategorySystemBootTime.\r\n\r\nI see no uses of `systemUptime`, and only two calls to `mach_absolute_time`, in the project. Both `mach_absolute_time` calls are in things bundled as frameworks. However, `nm` does show a `mach_absolute_time` reference in `Runner`, so I'll continue to investigate.\r\n\r\n(I've verified that a simple `flutter create` `flutter build ios` does not result in a `Runner` with those same symbol references in the binary, so it's not inherent to Flutter.)","So this issue is arising specifically from third-party packages on Flutter? Is there a way to encourage ALL package developers to address them ASAP? May 1st is Apple's deadline.","Just to clarify:\r\nWe don't have to add the privacy manifest in the Flutter app. It has to be done by third party SDK, right?\r\n\r\nIt is confusing because almost all places saying to add the privacy manifest. For e.g see this SO https:\/\/stackoverflow.com\/questions\/78163859\/itms-91053-missing-api-declaration-privacy\r\n\r\nWe have the following code in the AppDelegate.swift\r\n```\r\nimport UIKit\r\nimport Flutter\r\n\r\n@UIApplicationMain\r\n@objc class AppDelegate: FlutterAppDelegate {\r\n  override func application(\r\n    _ application: UIApplication,\r\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\r\n  ) -> Bool {\r\n    GeneratedPluginRegistrant.register(with: self)\r\n    \r\n    if #available(iOS 10.0, *) {\r\n      UNUserNotificationCenter.current().delegate = self as? UNUserNotificationCenterDelegate\r\n    }\r\n    \r\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\r\n  }\r\n}\r\n\r\n```","> Just to clarify:\r\n> We don't have to add the privacy manifest in the Flutter app. It has to be done by third party SDK, right?\r\n\r\n1. For SDKs which are bundled as frameworks in the final application, that is our current understanding based on the docs.\r\n2. For SDKs which are built statically into applications, we are still gathering information about how the enforcement is currently working in order to attempt to clarify that with Apple.\r\n\r\nI currently believe that the initial reporter's warning messages fall under case 2, based on the wording and my investigation so far. That is not going to be the case for every application. Each case is potentially different.","Here are the dependencies used in our project:\r\n\r\n```\r\ndependencies:\r\n  flutter:\r\n    sdk: flutter\r\n  flutter_localizations:\r\n    sdk: flutter\r\n  intl:\r\n  flutter_keyboard_visibility: 5.4.1\r\n  provider: 6.1.1\r\n  url_launcher: 6.2.4\r\n  bot_toast: 4.1.3\r\n  visibility_detector: 0.4.0+2\r\n  flutter_svg: 2.0.9\r\n  firebase_core: 2.27.0\r\n  firebase_auth: 4.17.8\r\n  firebase_analytics: 10.8.9\r\n  firebase_crashlytics: 3.4.18 #web support pending\r\n  firebase_database: 10.4.9\r\n  firebase_storage: 11.6.9\r\n  firebase_dynamic_links: 5.4.17 #web support pending\r\n  firebase_messaging: 14.7.19\r\n  firebase_in_app_messaging: 0.7.4+17 #web support pending\r\n  firebase_remote_config: 4.3.17\r\n  cloud_firestore: 4.15.8\r\n  cloud_functions: 4.6.8\r\n  flutter_switch: 0.3.2\r\n  shared_preferences: 2.2.2\r\n  json_annotation: 4.8.1\r\n  collection: 1.18.0\r\n  image_picker: 1.0.7\r\n  image_cropper: 5.0.0\r\n  cached_network_image: 3.3.1\r\n  flutter_cache_manager: 3.3.1\r\n  diacritic: 0.1.5\r\n  flutter_sticky_header: 0.6.3\r\n  intercom_flutter: 8.1.1\r\n  device_info_plus: 9.1.2\r\n  crypto: 3.0.3\r\n  encrypt: 5.0.1\r\n  numberpicker: 2.1.2\r\n  pdf: 3.10.4\r\n  printing: 5.11.0\r\n  image: 4.1.6\r\n  flutter_signature_pad: 3.0.1\r\n  share_plus: 7.2.2\r\n  async: 2.11.0\r\n  connectivity_plus: 5.0.2\r\n  auto_size_text: 3.0.0\r\n  charts_flutter: 0.12.0\r\n  styled_text: 7.0.0\r\n  flutter_udid: 2.0.1 #no web support, used fingerprintjs for web\r\n  fingerprintjs: 2.0.0 #only for web\r\n  flutter_local_notifications: 16.3.2 #web support pending\r\n  search_cep: 4.0.2\r\n  permission_handler: 11.2.0 #no web functionality\r\n  flutter_contact: 0.9.1+8 #no web functionality\r\n  hive: 2.2.3\r\n  hive_flutter: 1.1.0\r\n  sliver_tools: 0.2.12\r\n  in_app_purchase: 3.1.13\r\n  scroll_to_index: 3.0.1\r\n  xml: 6.5.0\r\n  youtube_player_iframe: 4.0.4\r\n  url_strategy: 0.2.0\r\n  flutter_multi_formatter: 2.11.1\r\n  credit_card_validator: 2.1.0\r\n  package_info_plus: 5.0.1\r\n  http: 1.0.0\r\n  smooth_page_indicator: 1.1.0\r\n  mobile_scanner: 3.0.0-beta.1\r\n  file_picker: 6.1.1\r\n  in_app_review: 2.0.8\r\n  rxdart: 0.27.7\r\n  sqflite: 2.3.2\r\n  path_provider: 2.1.2\r\n  flutter_spinkit: 5.2.0\r\n  flutter_rating_bar: 4.0.1\r\n  ripple_navigation:\r\n    git:\r\n      url: https:\/\/github.com\/agendaboa\/ripple_navigation\r\n      ref: agendaboa_adjustments\r\n  open_mail_app: 0.4.5 #no web functionality\r\n  webview_flutter: 4.4.4\r\n  web: '>=0.3.0 <0.6.0'\r\n  facebook_app_events:\r\n    git:\r\n      url: https:\/\/github.com\/oddbit\/flutter_facebook_app_events\r\n      ref: e09af327fd36d21e423ebb54f17944fb10065416\r\n\r\n  # The following adds the Cupertino Icons font to your application.\r\n  # Use with the CupertinoIcons class for iOS style icons.\r\n  cupertino_icons: ^1.0.0\r\n```","> > ITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cRunner\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryFileTimestamp.\r\n> \r\n> I haven't figured out what is tripping this yet. A few dependencies use APIs in this category, but none that I have found so far that are built statically and thus would be part of Runner. `nm` does show a `NSFileModificationDate` reference in `Runner`, so I'll continue to investigate.\r\n\r\nI'm pretty sure I found the source of this one: `facebook_app_events` is a `static_framework` which includes a dependency on the `FBAudienceNetwork` Pod, which in turn has `\"vendored_frameworks\": \"Static\/FBAudienceNetwork.xcframework\"`. That precompiled framework has a reference to `NSFileModificationDate`.","In fact, `FBAudienceNetwork` is enough to cause all three of these warnings just by itself. They have published an updated version of that static framework (6.15) with a privacy manifest, and it includes `NSPrivacyAccessedAPICategoryUserDefaults`, `NSPrivacyAccessedAPICategorySystemBootTime`, and `NSPrivacyAccessedAPICategoryFileTimestamp`.\r\n\r\nHopefully once https:\/\/github.com\/oddbit\/flutter_facebook_app_events\/issues\/342 is fixed, that static framework's privacy manifest will be incorporated automatically into the build, but we don't currently know how that is handled by Xcode.","> Is there a way to encourage ALL package developers to address them ASAP?\r\n\r\nI would encourage anyone affected by a package's lack of privacy manifest support to reach out individually to the author of that package. We've done outreach where we are aware of it, but we don't have a way to find every potentially affected plugin. Apple has also done some outreach, but static frameworks prevent them from finding the source in an automated fashion.","@deepak-agendaboa What are the specific `ITMS-91053` messages for your project?","```\r\nITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cAgenda BOA\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategorySystemBootTime. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n\r\nITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cAgenda BOA\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryFileTimestamp. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n\r\nITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cAgenda BOA\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryDiskSpace. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n\r\nITMS-91053: Missing API declaration - Your app\u2019s code in the \u201cAgenda BOA\u201d file references one or more APIs that require reasons, including the following API categories: NSPrivacyAccessedAPICategoryUserDefaults. While no action is required at this time, starting May 1, 2024, when you upload a new app or app update, you must include a NSPrivacyAccessedAPITypes array in your app\u2019s privacy manifest to provide approved reasons for these APIs used by your app\u2019s code. For more details about this policy, including a list of required reason APIs and approved reasons for usage, visit: https:\/\/developer.apple.com\/documentation\/bundleresources\/privacy_manifest_files\/describing_use_of_required_reason_api.\r\n```","@stuartmorgan you're right! Great investigative work. It's definitely that package because we weren't using it before and never got the privacy manifest email before either.\n\nAs an aside note, does anyone else know of any other frequently updated Flutter package to track Facebook App Events? This package hasn't been updated in a while it seems so I doubt they'll do it. I don't know how else to track Facebook ads conversions on Flutter... \ud83d\ude2d","@deepak-agendaboa The pubspec you provided has a number of version conflicts, and is not resolvable. We can't investigate further without a reproducible case\u2014although we already know that `facebook_app_events` is at least one source of three of your four warnings. (I would encourage you to look into pubspec.lock, rather than pinning everything exactly in your pubspec.yaml.)"],"labels":["platform-ios","P1","team-ios"]},{"title":"`ExpansionTile` Unable to remove right padding from title","body":"### Steps to reproduce\r\n\r\nRun the provided code\r\n\r\n### Expected results\r\n\r\nThe `ExpansionTile`'s `title` spans the available width.\r\n\r\n### Actual results\r\n\r\n<img width=\"483\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12874766\/258ca713-6b95-4624-8f05-ddb9c947b6ab\">\r\n\r\nThe tile is cut short by 32.0 units.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        body: SafeArea(\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            children: [\r\n              ListTileTheme(\r\n                contentPadding: EdgeInsets.zero,\r\n                horizontalTitleGap: 0,\r\n                minVerticalPadding: 0,\r\n                dense: true,\r\n                child: ExpansionTile(\r\n                  tilePadding: EdgeInsets.zero,\r\n                  title: Container(\r\n                    color: Colors.red,\r\n                    alignment: Alignment.centerLeft,\r\n                    child: Text('Expansion Tile'),\r\n                    height: 50,\r\n                  ),\r\n                  trailing: const SizedBox.shrink(),\r\n                  children: const [\r\n                    ListTile(title: Text('Item 1')),\r\n                    ListTile(title: Text('Item 2')),\r\n                    ListTile(title: Text('Item 3')),\r\n                  ],\r\n                ),\r\n              ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n~~I traced it down to `list_tile.dart`'s `performLayout` where it says:~~\r\n\r\n~~Removing the 32.0 from the `adjustedTrailingWidth` computation and putting in 0.0 instead makes the title span the full width as expected.~~\r\n\r\n~~I ran tests with the changed value:~~\r\n```\r\n~\/Flutter\/flutter\/packages\/flutter > flutter test .\/test\/material\/list_tile_test.dart \r\nResolving dependencies... \r\n  leak_tracker 10.0.0 (10.0.4 available)\r\n  leak_tracker_flutter_testing 2.0.1 (3.0.3 available)\r\n  leak_tracker_testing 2.0.1 (3.0.1 available)\r\n  material_color_utilities 0.8.0 (0.11.1 available)\r\n  meta 1.11.0 (1.12.0 available)\r\n  test_api 0.6.1 (0.7.0 available)\r\n  vm_service 13.0.0 (14.1.0 available)\r\n  web 0.4.0 (0.5.1 available)\r\nGot dependencies!\r\n8 packages have newer versions incompatible with dependency constraints.\r\nTry `flutter pub outdated` for more information.\r\n00:08 +68: All tests passed!  \r\n```\r\n\r\n~~So either there are more and just testing list_tile is not enough or it is not tested. I assume goldens would break.~~\r\n\r\nSee below comment for better analysis.\r\n\r\nWhat is the reason why the value is 32.0?\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.3 23D56 darwin-arm64, locale en-CZ)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/michalhazdra\/Flutter\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (3 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/michalhazdra\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.3)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Upon further inspection it seems that the issue is `final bool hasTrailing = trailing != null;` Because if `hasTrailing == false` then the value is correctly set to 0.0. But `ExpansionTile` works by `trailing: widget.trailing ?? _buildTrailingIcon(context),` So if you do not provide a trailing widget, the ExpansionTile will add one itself, so you must provide `SizedBox.shrink()` or equivalent to get rid of the default one. But by doing so you force `hasContent == true` in the underlying `ListTile`.\r\n\r\nSo a better fix would be `trailing: widget.trailing ?? (widget.showTrailingIcon ? _buildTrailingIcon(context) : null)`, or something along those lines.\r\n\r\nWhere `showTrailingIcon` would default to `true` to keep original behavior.","@Michal-MK \r\nThanks for the report. I think `trailing: const SizedBox.shrink()` is the correct to way to get rid of this trailing padding. \r\n\r\nInstead of introducing a new bool parameter, we could the `trailing` widget has zero size and skip rendering `_buildIcon`.","I think the issue is valid. The example above applied `SizedBox.shrink()` to `trailing` but the issue persists. Looking at `expansion_tile.dart` source code, `_buildTrailingIcon` will fall back to `_buildIcon` which always renders a `Icon(Icons.expand_more)` but not quite sure why this check doesn't work:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/c6f2b53efdf404d3500c6fb3520f61b3526bf7bd\/packages\/flutter\/lib\/src\/material\/expansion_tile.dart#L712\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/c6f2b53efdf404d3500c6fb3520f61b3526bf7bd\/packages\/flutter\/lib\/src\/material\/expansion_tile.dart#L638-L643\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-9.0.pre.33, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-9.0.pre.33 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision dd865ce476 (2 hours ago), 2024-03-17 20:24:27 -0400\r\n    \u2022 Engine revision 89c7759639\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-242.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","> @Michal-MK Thanks for the report. I think `trailing: const SizedBox.shrink()` is the correct to way to get rid of this trailing padding.\r\n> \r\n> Instead of introducing a new bool parameter, we could the `trailing` widget has zero size and skip rendering `_buildIcon`.\r\n\r\nTrailing is just a `Widget?`, how would we check it's size? Would that mean modifying `ListTile` stuff? \r\n\r\n> not quite sure why this check doesn't work:\r\n> `trailing: widget.trailing ?? _buildTrailingIcon(context), `\r\n\r\nWhich check? If a widget is provided then we build it; instead of the default icon. The check works.\r\n\r\nThe issue is that there is no way to put `null` into `trailing` which is what then messes up the `ListTile`'s layout. The code below is taken from `performLayout` of `ListTile`. No idea how to link code like you did ;)\r\n\r\n```dart\r\n    final double adjustedTrailingWidth = hasTrailing\r\n        ? math.max(trailingSize.width + _effectiveHorizontalTitleGap, 32.0)\r\n        : 0.0;\r\n```\r\n\r\nBecause `hasTrailing` is true no matter what, a 32.0 gap is inserted by the `ListTile`.\r\n@huycozy ",">Which check? If a widget is provided then we build it; instead of the default icon. The check works.\r\n\r\nI was mistaken about the trailing falls to `_buildTrailingIcon`. Yes, the check works.\r\n\r\n>Because hasTrailing is true no matter what, a 32.0 gap is inserted by the ListTile.\r\n\r\nI think this is correct. When modifying this gap value to 0, the right padding is also removed.\r\n\r\n<details>\r\n<summary>Demo (zero gap)<\/summary>\r\n\r\n![Screenshot 2024-03-19 at 10 32 16](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/9d478f27-5207-4c80-bc72-f040e1e0fbc6)\r\n\r\n<\/details>","But I am not sure why the 32.0 is in the `ListTile`, but I would rather not touch it, because it probably has a reason :) That is why I currently have the extra property in `ExpansionTile` to resolve it as high up as possible. And allow `null` to enter the `ListTile`","I think we should move the conversation to the assosiated PR."],"labels":["framework","f: material design","has reproducible steps","team-design","found in release: 3.19","found in release: 3.21"]},{"title":"in_app_purchase - Listening to purchase updates does not emit subscription purchases while the app was closed on Android","body":"### Steps to reproduce\n\n1. Purchase a subscription on Android device within your app\r\n2. Close your app\r\n3. Go to Google Play and cancel the subscription\r\n4. Wait for the subscription to expire and then reactivate it\r\n5. Open your app on Android device\n\n### Expected results\n\nOnce the app starts, I immediately register to the purchase stream to receive updates in the `main()` as described in the docs:\r\n`InAppPurchase.instance.purchaseStream.listen()...`\r\n\r\nGiven the `Steps to reproduce` above, I would expect that the Android app receives the new subscription purchase on the purchaseStream - this is however not the case.\r\n\r\n(Following the same steps on iOS, the purchase stream correctly receives the new subscription purchase)\r\n\n\n### Actual results\n\nOnce the app starts, it receives the subscription purchase update the same way as on iOS.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n_inAppPurchaseSubscription =\r\n    InAppPurchase.instance.purchaseStream.listen((purchaseDetails) {\r\n  _subscriptionBloc.add(SubscriptionPurchaseUpdated(purchaseDetails));\r\n}, onDone: () {\r\n  _inAppPurchaseSubscription.cancel();\r\n}, onError: (error) {\r\n  print(error);\r\n});\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.16.0, on macOS 14.3 23D56 darwin-arm64, locale en-DK)\r\n    \u2022 Flutter version 3.16.0 on channel stable at \/Users\/vongrad\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision db7ef5bf9f (4 months ago), 2023-11-15 11:25:44 -0800\r\n    \u2022 Engine revision 74d16627b9\r\n    \u2022 Dart version 3.2.0\r\n    \u2022 DevTools version 2.28.2\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/vongrad\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/vongrad\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.14.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @vongrad \r\n\r\n>Wait for the subscription to expire and then reactivate it\r\n\r\nI wonder how we re-activate the subscription that has been canceled? When I click on `Resubscribe` button from https:\/\/play.google.com\/store\/account\/subscriptions, it says: \"Can't resubscribe\"","How long did you wait before re-subscribing? I am able to click on the re-subscribe few minutes after the subscription expires in Google Play and it goes through without any issues. \r\n\r\nThe reason why this is important for me is that if user subscribes from Google Play after the subscription expires, my backend receives Google RTDN notification with type \"purchase\", but it does not contain \"obfuscatedAccountId\" that I specified when initially creating the subscription to pair it with a user - I guess its because its considered as a completely new purchase even the Google Play button says re-subscribe. \r\n\r\nAt this point, my backend has no idea who purchased the subscription because of the empty \"obfuscatedAccountId\", so in order to pair it, I need my app to be able to get notified about subscription purchases on startup, grab the purchaseToken along with currently logged in user and send it to my backend to pair the subscription with user.",">How long did you wait before re-subscribing? \r\n\r\n5 minutes for my test subscription period of 1 week (https:\/\/developer.android.com\/google\/play\/billing\/test#testing-subscriptions)\r\n\r\nAlso, could you share how you `Close your app`? Do you just bring app to the background or kill app instance from `Recent app` menu? \r\n","That is strange, I test it exactly the same way. I kill the app from the `Recent app` menu, so its not running at all.","Could you check this with [package's example](https:\/\/github.com\/flutter\/packages\/tree\/main\/packages\/in_app_purchase\/in_app_purchase\/example)? \r\n\r\n>Android app receives the new subscription purchase on the purchaseStream\r\n\r\nWhen you re-open app, how do you debug this? (or just set a debug point inside the stream listener?)"],"labels":["waiting for customer response","in triage"]},{"title":"Prepare `et` for local RBE workflows","body":"Goma will be turned down Real Soon Now, and local dev workflows for RBE require the compiler proxy to be started and stopped around each `ninja` invocation. `et` knows how to do that in the context of executing engine_v2 build configs, and can provide a smooth migration pathway from Goma to RBE. A difficulty is that the engine_v2 build configs were not designed with local dev workflows in mind, and so do not neatly fill the need being served by direct invocation of `tools\/gn` + `ninja`.\r\n\r\nSome local dev builds have been described in `ci\/builders\/local_engine.json`, but these are not yet running in CI, and the names of the builds in that file duplicate some of the pre-existing CI build names.\r\n\r\nWhile not fulling solving https:\/\/github.com\/flutter\/flutter\/issues\/145185, I am going to alleviate the difficulties above with the main goal being to mitigate the disruption due to Goma's turn down. My plan is the following:\r\n\r\n1. Change the name of builds outside of `local_engine.json` by prefixing them with `ci\/`, and add a test to ensure that remains consistent.\r\n1. With the goal of running each of the `local_engine.json` builds in CI on each platform, I will make by-hand internal copies of each config. The name of each config will be prefixed by the name of the platform it will run on, e.g. `macos\/host_debug` to avoid name conflicts with the `ci\/` builds. I'll add a test for this to ensure it remains consistent. (Eventually `local_engine.json` should be machine generated, but that's not a requirement for the Goma -> RBE transition, so we should put that off until later.)\r\n1. With the goal that `et build -c host_debug` etc. will continue to work on all dev platforms. I will teach `et` that a config name passed to `et build` and `et run` that does *not* have a `ci\/` prefix should have the os name prefixed to it so that it can be found in `local_engine.json`.\r\n1. I will add human-readable descriptions to all builds, and teach `et` about those fields to report them in help messages, etc.\r\n\r\nThat last one is optional, but I think I'll need it for my own sanity.","comments":["Solid idea IMo","\/cc @whesse"],"labels":["P1","team-engine","triaged-engine","e: engine-tool"]},{"title":"Keyboard close automatically and go back automatically when TextFormField is tapped in android","body":"### Steps to reproduce\r\n\r\n1. Clone this application from github (https:\/\/github.com\/dculussoftwares\/vilvam.v2) and run it on android emulator.\r\n2. Go to first search icon and try to hit the text editor on emulator.\r\n3. Then this will automatically redirect to past page and close the keypad.\r\n4. Try this on any text editor in the application\r\n\r\nIt is only happening on android platform only. IOS\/Mac works smoothly\r\n\r\n### Expected results\r\n\r\n1. Should open the keyboard and accept the input text.\r\n\r\n### Actual results\r\n\r\n1. Keyboard close automatically and go back automatically \r\n\r\n### Code sample\r\n\r\nClone entire repo from github https:\/\/github.com\/dculussoftwares\/vilvam.v2 and it is public\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/75526665\/c2fafb8e-82f4-4919-9eb5-dd35c463164a\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nPerforming hot restart...\r\nSyncing files to device sdk gphone64 arm64...\r\nRestarted application in 1,177ms.\r\nI\/flutter ( 6610): {}\r\nD\/EGL_emulation( 6610): app_time_stats: avg=33546.05ms min=26.07ms max=267892.16ms count=8\r\nD\/EGL_emulation( 6610): app_time_stats: avg=1805.39ms min=336.50ms max=3274.28ms count=2\r\nI\/ImeTracker( 6610): com.example.material_3_demo:e235bbea: onRequestShow at ORIGIN_CLIENT_SHOW_SOFT_INPUT reason SHOW_SOFT_INPUT\r\nD\/InputMethodManager( 6610): showSoftInput() view=io.flutter.embedding.android.FlutterView{22cfa1a VFE...... .F...... 0,0-1080,2154 #1 aid=1073741824} flags=0 reason=SHOW_SOFT_INPUT\r\nD\/InsetsController( 6610): show(ime(), fromIme=true)\r\nD\/EGL_emulation( 6610): app_time_stats: avg=6860.13ms min=0.88ms max=273995.12ms count=40\r\nI\/ImeTracker( 6610): com.example.material_3_demo:e235bbea: onShown\r\nD\/EGL_emulation( 6610): app_time_stats: avg=467.31ms min=4.97ms max=2677.98ms count=6\r\nI\/ImeTracker( 6610): com.example.material_3_demo:6b87e3aa: onRequestHide at ORIGIN_CLIENT_HIDE_SOFT_INPUT reason HIDE_SOFT_INPUT\r\nW\/WindowOnBackDispatcher( 6610): sendCancelIfRunning: isInProgress=falsecallback=ImeCallback=ImeOnBackInvokedCallback@232161486 Callback=android.window.IOnBackInvokedCallback$Stub$Proxy@486d382\r\nI\/ImeTracker( 6610): com.example.material_3_demo:b56eef5d: onRequestHide at ORIGIN_CLIENT_HIDE_SOFT_INPUT reason HIDE_SOFT_INPUT_BY_INSETS_API\r\nI\/ImeTracker( 6610): com.example.material_3_demo:6b87e3aa: onHidden\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en-IN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/myname\/development\/flutter\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.3.1\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at\r\n      \/Users\/myname\/development\/flutter. Consider adding \/Users\/myname\/development\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (9 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/myname\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/myname\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/myname\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554 \u2022 android-arm64  \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 macOS (desktop)             \u2022 macos         \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)                \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["> github https:\/\/github.com\/dculussoftwares\/vilvam.v2\r\n\r\n@bannarisoftwares This seems to be a full fledged app containing custom code and third party package implementations. In order to properly address the issue, we would need a trimmed version of the code sample (minimal but complete reproducible code ), ex: main.dart that'll be enough to replicate the behavior you are reporting, so please provide us the same.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Make BackgroundIsolateBinaryMessenger API consistent on web","body":"### Use case\n\nThe `BackgroundIsolateBinaryMessenger` API requires an `ensureInitialized()` method call before its `instance` field can be used. Unfortunately the web implementation of the `BackgroundIsolateBinaryMessenger` does not have the `ensureInitialized()` method, to the compilation targeted for the web is failing at compile time with `Member not found: 'BackgroundIsolateBinaryMessenger.ensureInitialized'` error.\r\n\r\nCurrently we have to make own wrapper with platform-specific import to make this compile on web.\n\n### Proposal\n\nIt would be really handy if `BackgroundIsolateBinaryMessenger` has consistent API between io and web implementations. It will be sufficient to have it `throw UnsupportedError('Isolates not supported on web.')`","comments":["@ekuleshov \r\nPlease check [this](https:\/\/github.com\/flutter\/flutter\/issues\/136886#issuecomment-1781620302) and see if it helps in your case or not.\r\n","> @ekuleshov Please check [this](https:\/\/github.com\/flutter\/flutter\/issues\/136886#issuecomment-1781620302) and see if it helps in your case or not.\r\n\r\nEssentially that is the same issue looked from a different angle. But the solution I'm suggesting\/requesting here is much simpler and does not require changes in the Dart compiler.\r\n\r\nThere is already conditional import in the Flutter's `package:flutter\/services.dart` which imports one of:\r\n\r\n* `_background_isolate_binary_messenger_io.dart`\r\n* `_background_isolate_binary_messenger_web.dart`\r\n\r\nHowever, due to the asymmetry of the web API (i.e. absence of the `ensureInitialized()` in the web-specific implementation), in order to use the web version adding `if(kIsWeb) ...` is not enough as noted in #136886\r\n\r\nWe have to make own wrapper with our own conditional import and implement own wrappers for `ensureInitialized()` for io and web.\r\n\r\nIf the Flutter's `_background_isolate_binary_messenger_web.dart` implementation simply had an `ensureInitialized()` method matching the io's API, all of that won't be necessary and we could simply use `if(kIsWeb) ...` instead of all those custom wrappers.","Thanks for the feedback.\r\n","I'll work on adding this method next, it'll `throw` _Unimplemented_ (or Unsupported, as requested by OP!)"],"labels":["c: new feature","platform-web","c: proposal","P1","team-web","triaged-web"]},{"title":"refactor: Rework getting plugin implementation candidates and plugin resolution","body":"Part of #137040 and #80374\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["tool"]},{"title":"Arabic OTP sms not detected in iOS","body":"### Steps to reproduce\n\n(Only for iOS)\r\n1) Open My Etisalat Application (Change language to Arabic)\r\n2)Goto EASE section\r\n3)Login in with your number\r\n4)OTP will be received in SMS but the Autosuggestion for OTP is not shown\r\n\r\nPlease note the My Etisalat is written in Native iOS and EASE is a Flutter SDK integrated into it.\r\nIt you change language of MyEtisalat app to english and try the same the it will work as iOS is detecting english sms otp\r\n\n\n### Expected results\n\nI must see the autoFill or AutoSuggestion box which will allow me to tap and paste otp directly \n\n### Actual results\n\nNo autofill or Autosuggestion shown when sms received in ARABIC.\n\n### Code sample\n\ncan't share code\n\n### Screenshots or Video\n\n1) FOr Arabic Language (Not Working) sms received in Arabic\r\n![image_123650291 (1)](https:\/\/github.com\/flutter\/flutter\/assets\/54415609\/16ae92f4-f885-4b40-bc3d-9c1479497368)\r\n\r\n2)For English Language (Working) sms received in english\r\n![image_123650291](https:\/\/github.com\/flutter\/flutter\/assets\/54415609\/1221f13e-8e72-465d-9a3f-8b0178a01620)\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n[!] Flutter (Channel stable, 3.13.4, on macOS 13.3 22E252 darwin-arm64\r\n    (Rosetta), locale en-IN)\r\n    \u2022 Flutter version 3.13.4 on channel stable at \/Users\/tejassu\/flutter\r\n    ! Warning: `dart` on your path resolves to\r\n      \/opt\/homebrew\/Cellar\/dart\/3.1.2\/libexec\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/tejassu\/flutter. Consider adding\r\n      \/Users\/tejassu\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 367f9ea16b (6 months ago), 2023-09-12 23:27:53 -0500\r\n    \u2022 Engine revision 9064459a8b\r\n    \u2022 Dart version 3.1.2\r\n    \u2022 DevTools version 2.25.0\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/tejassu\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 14.3.1)\r\n    \u2022 Xcode at \/Users\/tejassu\/Downloads\/Xcode 2.app\/Contents\/Developer\r\n    \u2022 Build 14E300c\r\n    \u2022 CocoaPods version 1.12.1\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.6+0-17.0.6b802.4-9586694)\r\n\r\n[\u2713] VS Code (version 1.85.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\nUnknown architecture undefined_arch, defaulting to arm64\r\nUnknown architecture undefined_arch, defaulting to arm64\r\n[\u2713] Connected device (4 available)            \r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554                        \u2022\r\n      android-arm64  \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 iPhone 14 Pro (mobile)      \u2022 CFEE4CC6-C0E7-4354-889E-74954AA534C3 \u2022 ios\r\n      \u2022 com.apple.CoreSimulator.SimRuntime.iOS-16-4 (simulator)\r\n    \u2022 macOS (desktop)             \u2022 macos                                \u2022\r\n      darwin-arm64   \u2022 macOS 13.3 22E252 darwin-arm64 (Rosetta)\r\n    \u2022 Chrome (web)                \u2022 chrome                               \u2022\r\n      web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    ! Error: Browsing for Saurabh\u2019s iPhone (CoreDevice)  on the local area\r\n      network. Ensure that the device is booted, unlocked, and discoverable via\r\n      Bluetooth and WiFi, or attached with a cable. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.","comments":["This is not a Flutter issue. All Flutter does is tell iOS the current text field is \"oneTimeCode\" type. It's up to iOS to do the rest. But I can offer these links after some searching, you may need to adjust the content of your SMS in Arabic to get iOS to recognize it\r\n\r\n- https:\/\/stackoverflow.com\/questions\/39631168\/automatic-otp-verification-in-ios\r\n- https:\/\/stackoverflow.com\/questions\/58499469\/ios-otp-auto-suggestion-is-not-working-in-arabic","@tejasurve Please check the comment above to see if you can solve the issue that way. Otherwise, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code so that we can verify the issue properly. "],"labels":["waiting for customer response","in triage"]},{"title":"[bug] textField contentPadding causes incorrect alignment and hides text","body":"### Steps to reproduce\n\n1. Run the app from sample code\n\n### Expected results\n\nLong texts should be visible as nomal.\n\n### Actual results\n\n1. Notice that the text gets hidden when height is constrained (constraints are common in most production apps)\r\n2. When padding is removed, the text is visible again, but it's alignments changes and text goes under the container.\n\n### Code sample\n\n<details><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatefulWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  State<MyApp> createState() => _MyAppState();\r\n}\r\n\r\nclass _MyAppState extends State<MyApp> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: Container(\r\n            width: 200,\r\n            height: 20,\r\n            color: Colors.tealAccent,\r\n            child: const TextField(\r\n              decoration: InputDecoration(\r\n                contentPadding: EdgeInsets.all(0),\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/84124091\/abab3c3b-64ce-41aa-b0c4-0334e856ae29\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nNA\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.19045.4046], locale en-IN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\src\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/opxdelwin\/flutter\r\n    \u2022 FLUTTER_GIT_URL = https:\/\/github.com\/opxdelwin\/flutter.git\r\n    \u2022 Framework revision ba39319843 (8 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\delu8\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.3)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34330.188\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u221a] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\delu8\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I was able to replicate the reported behavior as below:\r\n\r\n1. With commenting `height`, it inputs properly with alignment.\r\n2. Without commenting `height`, it misaligns the input in textfield as shown below:\r\n\r\n<img width=\"269\" alt=\"Screenshot 2024-03-18 at 1 30 36 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/4a96bcaa-5d97-4c55-8c78-f80bd3cd1d56\">\r\n\r\n3. With commenting `contentPadding`, it shows input which disappears after inputing some data as below:\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/bafd41aa-1d0a-4789-966a-3f676244146f\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-9.0.pre.33, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-9.0.pre.33 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision dd865ce476 (5 hours ago), 2024-03-17 20:24:27 -0400\r\n    \u2022 Engine revision 89c7759639\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-242.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>","CC @LongCatIsLooong who was saying this may be a duplicate.","I wonder if a duplicate exists. The bug is really annoying and the project kinda is lagging behind due to this.\n\nAlso, can we get the P2 label?"],"labels":["a: text input","framework","f: material design","has reproducible steps","P3","found in release: 3.19","team-text-input","triaged-text-input","found in release: 3.21"]},{"title":"Alert user of invalid application name due to a conflicting default package name","body":"### Use case\n\nI attempted to create an app called `matcher`, but since the `flutter_test` package has a dependency called matcher, I receive this error: \r\n\r\n`Because matcher depends on flutter_test from sdk which depends on matcher 0.12.16+1, matcher 0.12.16+1 is required.\r\nSo, because matcher is 1.0.0+1, version solving failed.`\r\n\r\nI think it'd be a good to let the user know explicitly if the name they gave for their application has a conflict. While it only took me a few minutes to figure out, I would expect it to be much more confusing to a less experienced\/beginner Flutter developer.\n\n### Proposal\n\nI wasn't sure how the Flutter team would want to proceed with this - if the better fix is trying to make apps work when named any valid Flutter package name or if it'd be better to just explicitly restrict package names. I decided on the latter so I opened this feature request.\r\n\r\nI think the best solution would be to include a list of conflicting app names and inform the user that a name is conflicting with a default package name. For example:\r\n\r\n```\r\n> flutter create matcher --template app\r\n\"matcher\" is a default dependency in this template. If you proceed, you will need to manually configure the pubspec.yaml files in order to successfully compile your app. Proceed (Y\/N)?\r\n```","comments":["Thanks for the report. I do see a merit in providing an error message that'll show that it is caused due to duplicate package name, but I am not sure if the tool would know before hand.\r\nKeeping the issue open for team's input \/ tracking.\r\n"],"labels":["c: new feature","tool","c: proposal","team-tool"]},{"title":"Update progress_indicator.dart to indicate the adaptive option is for both macOS and iOS","body":"Since we are using The `CupertinoScrollBar` for both macOS and iOS, it's a good idea to update the description of the `adaptive` function to indicate it will be used for macOS and iOS\r\n\r\n*Update progress_indicator.dart to indicate the adaptive option is for both macOS and iOS.*\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/73608287\/51c21a43-ce64-4253-aff7-1854a7366eea)\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","f: material design"]},{"title":"[pointer_interceptor_web] Semantics integration tests are failing to find the semantics label in the DOM","body":"The integration tests in `pointer_interceptor_web` are attempting to retrieve the semantics label with `element.getAttribute('aria-label')`, but the value has started to return null.\r\n\r\nRelated: https:\/\/github.com\/flutter\/packages\/pull\/1675\r\n\r\n```\r\nRunning command: \"flutter drive -d web-server --web-port=7357 --browser-name=chrome --web-renderer=html --chrome-binary=\/b\/s\/w\/ir\/cache\/chrome\/chrome\/chrome --driver test_driver\/integration_test.dart --target integration_test\/widget_test.dart\" in \/b\/s\/w\/ir\/x\/w\/packages\/packages\/pointer_interceptor\/pointer_interceptor_web\/example\r\nResolving dependencies...\r\n  material_color_utilities 0.8.0 (0.11.1 available)\r\nGot dependencies!\r\n1 package has newer versions incompatible with dependency constraints.\r\nTry `flutter pub outdated` for more information.\r\nLaunching integration_test\/widget_test.dart on Web Server in debug mode...\r\nWaiting for connection from debug service on Web Server...      \r\nWarning: In index.html:45: \"FlutterLoader.loadEntrypoint\" is deprecated. Use \"FlutterLoader.load\" instead.\r\nWaiting for connection from debug service on Web Server...         25.6s\r\nintegration_test\/widget_test.dart is being served at http:\/\/localhost:7357\r\nThe web-server device requires the Dart Debug Chrome extension for debugging. Consider using the Chrome or Edge devices for an improved development workflow.\r\nFailure Details:\r\nFailure in method: finds semantics of wrapped widgets\r\n\u2550\u2550\u2561 EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK \u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following TestFailure was thrown running a test:\r\nExpected: 'Works As Expected'\r\n  Actual: <null>\r\n   Which: not an <Instance of 'String'>\r\n\r\nWhen the exception was thrown, this was the stack:\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 296:3  throw_\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 453:22                    fail\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 450:12                    _expect\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 385:12                    expect$\r\npackages\/flutter_test\/src\/test_text_input_key_handler.dart.js 10414:12       expect$\r\nwidget_test.dart.js 119:23                                                   <fn>\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 45:50           <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1407:47                                         _rootRunUnary\r\ndart-sdk\/lib\/async\/zone.dart 1308:19                                         runUnary\r\ndart-sdk\/lib\/async\/future_impl.dart 163:18                                   handleValue\r\ndart-sdk\/lib\/async\/future_impl.dart 847:44                                   handleValueCallback\r\ndart-sdk\/lib\/async\/future_impl.dart 876:13                                   _propagateToListeners\r\ndart-sdk\/lib\/async\/future_impl.dart 652:5                                    [_completeWithValue]\r\ndart-sdk\/lib\/async\/future_impl.dart 722:7                                    <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1399:13                                         _rootRun\r\ndart-sdk\/lib\/async\/zone.dart 1301:19                                         run\r\ndart-sdk\/lib\/async\/zone.dart 1209:7                                          runGuarded\r\ndart-sdk\/lib\/async\/zone.dart 1249:23                                         callback\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 40:11                             _microtaskLoop\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 49:5                              _startMicrotaskLoop\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 181:7           <fn>\r\n\r\nThe test description was:\r\n  finds semantics of wrapped widgets\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\nend of failure 1\r\n\r\n\r\nFailure in method: finds semantics of wrapped widgets with intercepting set to false\r\n\u2550\u2550\u2561 EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK \u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following TestFailure was thrown running a test:\r\nExpected: 'Never calls onPressed transparent'\r\n  Actual: <null>\r\n   Which: not an <Instance of 'String'>\r\n\r\nWhen the exception was thrown, this was the stack:\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 296:3  throw_\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 453:22                    fail\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 450:12                    _expect\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 385:12                    expect$\r\npackages\/flutter_test\/src\/test_text_input_key_handler.dart.js 10414:12       expect$\r\nwidget_test.dart.js 125:23                                                   <fn>\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 45:50           <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1407:47                                         _rootRunUnary\r\ndart-sdk\/lib\/async\/zone.dart 1308:19                                         runUnary\r\ndart-sdk\/lib\/async\/future_impl.dart 163:18                                   handleValue\r\ndart-sdk\/lib\/async\/future_impl.dart 847:44                                   handleValueCallback\r\ndart-sdk\/lib\/async\/future_impl.dart 876:13                                   _propagateToListeners\r\ndart-sdk\/lib\/async\/future_impl.dart 652:5                                    [_completeWithValue]\r\ndart-sdk\/lib\/async\/future_impl.dart 722:7                                    <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1399:13                                         _rootRun\r\ndart-sdk\/lib\/async\/zone.dart 1301:19                                         run\r\ndart-sdk\/lib\/async\/zone.dart 1209:7                                          runGuarded\r\ndart-sdk\/lib\/async\/zone.dart 1249:23                                         callback\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 40:11                             _microtaskLoop\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 49:5                              _startMicrotaskLoop\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 181:7           <fn>\r\n\r\nThe test description was:\r\n  finds semantics of wrapped widgets with intercepting set to\r\n  false\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\nend of failure 2\r\n\r\n\r\nFailure in method: finds semantics of unwrapped elements\r\n\u2550\u2550\u2561 EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK \u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following TestFailure was thrown running a test:\r\nExpected: 'Never calls onPressed'\r\n  Actual: <null>\r\n   Which: not an <Instance of 'String'>\r\n\r\nWhen the exception was thrown, this was the stack:\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 296:3  throw_\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 453:22                    fail\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 450:12                    _expect\r\npackages\/matcher\/src\/expect\/prints_matcher.dart.js 385:12                    expect$\r\npackages\/flutter_test\/src\/test_text_input_key_handler.dart.js 10414:12       expect$\r\nwidget_test.dart.js 131:23                                                   <fn>\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 45:50           <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1407:47                                         _rootRunUnary\r\ndart-sdk\/lib\/async\/zone.dart 1308:19                                         runUnary\r\ndart-sdk\/lib\/async\/future_impl.dart 163:18                                   handleValue\r\ndart-sdk\/lib\/async\/future_impl.dart 847:44                                   handleValueCallback\r\ndart-sdk\/lib\/async\/future_impl.dart 876:13                                   _propagateToListeners\r\ndart-sdk\/lib\/async\/future_impl.dart 652:5                                    [_completeWithValue]\r\ndart-sdk\/lib\/async\/future_impl.dart 722:7                                    <fn>\r\ndart-sdk\/lib\/async\/zone.dart 1399:13                                         _rootRun\r\ndart-sdk\/lib\/async\/zone.dart 1301:19                                         run\r\ndart-sdk\/lib\/async\/zone.dart 1209:7                                          runGuarded\r\ndart-sdk\/lib\/async\/zone.dart 1249:23                                         callback\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 40:11                             _microtaskLoop\r\ndart-sdk\/lib\/async\/schedule_microtask.dart 49:5                              _startMicrotaskLoop\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 181:7           <fn>\r\n\r\nThe test description was:\r\n  finds semantics of unwrapped elements\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\nend of failure 3\r\n```","comments":["@bparrishMines I do recall that https:\/\/github.com\/flutter\/engine\/pull\/50794 made changes to this recently (the `aria-label` was moved due to a bug with JAWS) Maybe this is related?","Yea it looks like that might be the cause. The tests only started failing ~3\/14 and https:\/\/github.com\/flutter\/engine\/pull\/50794 rolled into `flutter\/flutter` around 3\/13.","cc @yjbanov @ditman FYI"],"labels":["platform-web","package","p: pointer_interceptor","team-web"]},{"title":"Adding functionality to iOS for no-op functions in Feedback","body":"### Use case\r\n\r\nIt appears that the Feedback class may not have received attention for some time. Upon reviewing the documentation, I noticed that the functions for taps in the Feedback class are described as not providing feedback on iOS: \"Calling any of these methods is a no-op on iOS as actions on that platform typically don't provide haptic or acoustic feedback.\" However, this statement does not accurately reflect the full range of feedback options available on iOS.\r\n\r\nFor instance, while it is true that certain actions on iOS may not inherently provide haptic or acoustic feedback, it's important to note that the iOS keyboard does offer haptic feedback and audio cues upon tapping. Additionally, there are several other UI elements within the iOS ecosystem where developers may opt to include feedback for user interactions.\r\n\r\nIn my application, I find it crucial to provide users with haptic and audio feedback for certain buttons to enhance the user experience. This feedback reassures users that their actions have been registered by the application, especially in asynchronous scenarios where immediate visual feedback may not be feasible.\r\n\r\nTherefore, I propose enhancing the Feedback class to include options for haptic and audio feedback on iOS. This would empower developers to provide a more cohesive and responsive user experience across platforms, aligning with the evolving standards of user interaction on iOS devices.\r\n\r\nThank you for considering this suggestion. I believe it would greatly contribute to improving the Flutter framework's usability and user satisfaction.\r\n\r\n\r\n\r\n### Proposal\r\n\r\nReview latest iOS feedback and adapt the Feedbak class to it, possibly adding parameters to the function call like forTap(BuildContext context, {bool forceAudio = false, bool forceHaptic = false})","comments":[],"labels":["c: new feature","platform-ios","framework","f: material design","c: proposal","team-design"]},{"title":"[Fix]: Searchbar doesn't lose focus when tapped outside","body":"Added a Fix to search bar that allows it be unfocused when tapped anywhere outside the search bar.\r\n\r\nI have attached below the app flow after implementing the fix.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/54017876\/70915c47-9b77-4a43-a128-8706107f921f\r\n\r\n\r\nIssue that gets resolved by this fix: #145096\r\n\r\n*If you had to change anything in the [flutter\/tests] repo, include a link to the migration guide as per the [breaking change policy].*\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["@HansMuller can you please assign a reviewer to this PR","> ![32384589-a60f0e74-c078-11e7-9bc1-e5b5287aea9d](https:\/\/user-images.githubusercontent.com\/8867023\/37737237-66e9c9dc-2d10-11e8-8797-13a405eace49.png)\r\n> \r\n> (once the conflict markers are removed)\r\n\r\nFixed the conflict. ","@gspencergoog, @HansMuller I have fixed the minor problems that lead to test failures. Now all tests have passed. Will this be auto merged ?\r\n"],"labels":["framework","f: material design"]},{"title":"[do not merge] Unfilter ADB logs to debug integration test","body":"For testing :)\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["It looks like this pull request may not have tests. Please make sure to add tests before merging. If you need [an exemption](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests) to this rule, contact \"@test-exemption-reviewer\" in the #hackers channel in [Chat](https:\/\/github.com\/flutter\/flutter\/wiki\/Chat) (don't just cc them here, they won't see it! Use Discord!).\n\nIf you are not sure if you need tests, consider this rule of thumb: the purpose of a test is to make sure someone doesn't accidentally revert the fix. Ask yourself, **is there anything in your PR that you feel it is important we not accidentally revert back to how it was before your fix?**\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing."],"labels":["tool"]},{"title":"CanvasKit renderer will permanently crash if an error is encountered while rendering a frame","body":"### Steps to reproduce\n\nCause the renderer to experience issues rendering a frame.\r\n\r\nWhile investigating #145134, I tried to stress the GC and a bit by intentionally forcing temporary low memory conditions and see if forcing the use of the FinalizationRegistry would surface the table index out of bounds error that we occasionally see.\r\n\r\nThe sample code here will force low memory conditions temporarily, which the FinalizationRegistry will eventually clean up. When these temporary low memory conditions cause a single frame to have an error, the rendering for the app will permanently stop.\r\n\r\nThe next frame should always be scheduled in the renderer, even if the current frame fails to render.\r\n\r\n\r\n\r\n\n\n### Expected results\n\nRendering should not crash permanently\n\n### Actual results\n\nRendering will stop and never resume\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n\/\/ Copyright 2019 the Dart project authors. All rights reserved.\r\n\/\/ Use of this source code is governed by a BSD-style license\r\n\/\/ that can be found in the LICENSE file.\r\n\r\nimport 'dart:math';\r\nimport 'dart:ui';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/src\/painting\/binding.dart';\r\nimport 'package:google_fonts\/google_fonts.dart';\r\n\r\nvoid main() {\r\n  Future.delayed(Duration(seconds: 5), () {\r\n    paint();\r\n    updateFonts();\r\n  });\r\n  runApp(const MyApp());\r\n}\r\n\r\nfinal lines = <TextPainter>[];\r\nfinal random = Random();\r\n\r\nvoid paint() {\r\n  try {\r\n    final pr = PictureRecorder();\r\n    final c = Canvas(pr);\r\n    for (var i = 0; i < 10000; i++) {\r\n      final tp = TextPainter(\r\n          text: TextSpan(text: ' ', style: GoogleFonts.heebo()),\r\n          textDirection: TextDirection.ltr,\r\n          strutStyle: StrutStyle.fromTextStyle(GoogleFonts.heebo(),\r\n              forceStrutHeight: true));\r\n\r\n      tp.text = const TextSpan(text: \"test2\");\r\n\r\n      tp.preferredLineHeight;\r\n\r\n      tp.layout();\r\n\r\n      tp.paint(c, Offset.zero);\r\n      lines.add(tp);\r\n    }\r\n    pr.endRecording();\r\n  } catch (err) {\r\n    lines.clear();\r\n\r\n    print(err);\r\n  }\r\n\r\n  Future.delayed(Duration(milliseconds: random.nextInt(1000)), paint);\r\n\r\n  \/\/updateFonts();\r\n}\r\n\r\nvoid updateFonts() {\r\n  try {\r\n    PaintingBinding.instance.handleSystemMessage({\"type\": \"fontsChange\"});\r\n  } catch (err) {\r\n    lines.clear();\r\n\r\n    print(err);\r\n  }\r\n  Future.delayed(Duration(milliseconds: random.nextInt(10000)), updateFonts);\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      debugShowCheckedModeBanner: false,\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  final String title;\r\n\r\n  const MyHomePage({\r\n    super.key,\r\n    required this.title,\r\n  });\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Container(),\r\n      ),\r\n      body: Stack(children: [\r\n        for (var i = 0; i < 10; i++)\r\n          Positioned(\r\n              top: i * 30,\r\n              width: 100,\r\n              height: 30,\r\n              left: 0,\r\n              child: Container(\r\n                  decoration: const BoxDecoration(color: Colors.white),\r\n                  \/\/clipBehavior: Clip.none,\r\n                  child: OutlinedButton(\r\n                      onPressed: () {}, child: const Text(\"test\")))),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Should only take a couple minutes to run into the problem with this code. ","Thanks for the report. I was able to replicate this using latest stable and master versions and it gives below log in console:\r\n\r\n```\r\nA Dart VM Service on Chrome is available at: http:\/\/127.0.0.1:53371\/PHKoG3q8hVM=\r\nThe Flutter DevTools debugger and profiler on Chrome is available at: http:\/\/127.0.0.1:9100?uri=http:\/\/127.0.0.1:53371\/PHKoG3q8hVM=\r\nAborted()\r\nRuntimeError: Aborted(). Build with -sASSERTIONS for more info.\r\nAborted()\r\nRuntimeError: Aborted(). Build with -sASSERTIONS for more info.\r\nAborted()\r\nRuntimeError: Aborted(). Build with -sASSERTIONS for more info.\r\nAborted()\r\n```\r\n\r\n```\r\nData$1\t@\tclient.js:13149\r\nadd$1\t@\tclient.js:13028\r\nadd$1\t@\tclient.js:25366\r\n_innerListen$1\t@\tclient.js:25698\r\n(anonymous)\t@\tclient.js:1741\r\ncall$1\t@\tclient.js:25644\r\n_rootRunUnary\t@\tclient.js:4435\r\nrunUnary$2$2\t@\tclient.js:13817\r\nrunUnaryGuarded$1$2\t@\tclient.js:13764\r\ncall$1\t@\tclient.js:13954\r\nPrimitives_applyFunction\t@\tclient.js:1304\r\nFunction_apply\t@\tclient.js:5963\r\n_callDartFunctionFast\t@\tclient.js:8360\r\n(anonymous)\r\n```\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-9.0.pre.33, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-9.0.pre.33 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision dd865ce476 (5 hours ago), 2024-03-17 20:24:27 -0400\r\n    \u2022 Engine revision 89c7759639\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-242.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>"],"labels":["engine","platform-web","e: web_canvaskit","has reproducible steps","P2","team-web","triaged-web","found in release: 3.19","found in release: 3.21"]},{"title":"It's hard to debug why a Skia Gold diff wasn't surfaced in pre-submit","body":"There are a few possibilities to why `flutter\/engine` post-submit is still broken by changes that should have come up in pre:\r\n\r\n1. This is garden-variety flakiness, and is being misattributed to pull requests\r\n\r\n   **UNLIKELY**: In the failure in question, there was a both a clear, and intentional change in digest output.\r\n\r\n    <details>\r\n        <summary>Click to expand details<\/summary>\r\n\r\n    ![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/24ec693d-098e-4463-b5f2-eec4c332ffd9)\r\n\r\n    ![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/2ce04c93-b488-48b1-9f75-515d77060866)\r\n\r\n    ... to:\r\n    \r\n    ![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/0c449c69-39c2-4fb5-9af8-1fb5f65d6130)\r\n\r\n    <\/details>\r\n\r\n    TODO: _Nothing_. I can't see any work to be done here.\r\n\r\n2. The test runner (in this case `scenario_app`) is not uploading the images properly or timely to Skia Gold\r\n\r\n    **POSSIBLE, LEANING UNLIKELY**: There is fairly [extensive logging](https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux%20Engine%20Drone\/2125019\/overview) proving the output of the runner.\r\n\r\n    It _is_ possible that despite generating the image, the actual _upload_ is either failing, or not completing in time.\r\n\r\n    TODO:\r\n    - [x] Add more logging to `scenario_app` verifying that `addImg` calls are succeeding and uploading the image (done: https:\/\/github.com\/flutter\/engine\/pull\/51454).\r\n    - [x] Modify `<SkiaGoldClient>.addImg` to report if \"Untriaged image\" is coming up in pre-submit (log only, no failure) (done: https:\/\/github.com\/flutter\/engine\/pull\/51455).\r\n\r\n3. The client wrapper that uploads\/tests codes in pre-submit unintentionally has diverged from post-submit or flutter\/flutter\r\n\r\n    **POSSIBLE**: I need to better understand the command-line arguments to `gold_ctl`.\r\n\r\n    `flutter\/engine` has a [fork of `SkiaGoldClient`](https:\/\/github.com\/flutter\/engine\/blob\/76f33eb0ecedee4182215923e5e3942a5dfbfcc2\/testing\/skia_gold_client\/lib\/skia_gold_client.dart#L247-L261), and our implementation is different than the [one in `flutter\/flutter`](https:\/\/github.com\/flutter\/flutter\/blob\/master\/packages\/flutter_goldens\/lib\/skia_client.dart).\r\n\r\n    It's possible that either support improved (but was not improved in our forked copy), mistakes were made etc.\r\n\r\n    TODO:\r\n    - [ ] Review and document the command-line arguments to `gold_ctl`\r\n    - [ ] Review the implementation details of the `flutter\/flutter` copy and `flutter\/engine` fork and look for discrepancies\r\n\r\n4. `\u2705  Flutter Gold` (the GitHub check) is either misbehaving (has a bug), or the server API result is stale\/not fresh enough\r\n\r\n    **POSSIBLE**: I know very little about this API or the integration.\r\n\r\n    TODO:\r\n    - [ ] Add logging for the \"Flutter Gold\" check that sticks around in the commit history\/is more easily audit-able.\r\n\r\n## Background\r\n\r\nIn the [latest example](https:\/\/flutter-engine-gold.skia.org\/detail?grouping=name%3DExternalTextureTests_testCroppedRotatedMediaSurface_bottomLeft_90%26source_type%3Dflutter-engine&digest=1454761e1d7238019d9207192121ff2c), the `flutter\/engine` tree turned \ud83d\udd34 due to an untriaged golden file:\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/912fe284-3891-4d39-a32a-3ff9351936e5)\r\n\r\nThe particular rendering issue (see below) is due to [YUV textures mis-rendering on Android emulators](https:\/\/github.com\/flutter\/flutter\/issues\/144838):\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/c58fa908-f67a-4e4b-a213-194c131c3fe8)\r\n\r\nIn the [originating pull request](https:\/\/github.com\/flutter\/engine\/pull\/51433), all tests (including the \"Flutter Gold\") check were \ud83d\udfe2 . In fact, if you pull up the [execution logs](https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux%20Engine%20Drone\/2125019\/overview), you'll see that the particular test (`testCroppedRotatedMediaSurface_bottomLeft` on Impeller\/Vulkan) produced the image above, and should have triggered an untriaged digest:\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/89ca6682-aa20-445c-a7f5-295d17c4c35f)\r\n\r\n<details>\r\n\r\n<summary>Full Image<\/summary>\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/a9330224-a595-4685-98a9-de7644732cc0)\r\n\r\n<\/details>\r\n\r\n\/cc @dnfield @jonahwilliams ","comments":["Some notes from meeting with @mdebbar and @jonahwilliams:\r\n\r\n- The fact there is `PS1 PS1 PS2 PS2` is not expected. You might see this pattern with rebase\/force-push, but should not:\r\n\r\n    ![Screenshot 2024-03-15 at 11 29 29\u202fAM](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/d826abd4-f2a5-4102-901c-3dbac58d9f86)\r\n\r\n    We looked at a [random other PR in `flutter\/engine`](https:\/\/flutter-engine-gold.skia.org\/search?issue=51334&crs=github&patchsets=11) and see similar duplicate uploading. I also see _some_ of these [in `flutter\/flutter`](https:\/\/flutter-gold.skia.org\/search?issue=141373&crs=github&patchsets=11) but a little less.\r\n\r\n    AI: Might ask Kevin why a second patch-set was created, we didn't force-push\/rebase.\r\n    AI: Check other PRs that do similar things and see how many patch-sets are created (i.e. revert the PR).\r\n\r\n- Not sure when the last time we updated `gold_ctl.py`; maybe we're using an old client?\r\n- Some [documentation of flags](https:\/\/github.com\/google\/skia-buildbot\/blob\/main\/gold-client\/cmd\/goldctl\/cmd_imgtest.go#L142) are here.\r\n- Final idea: try renaming the test images to re-baseline everything.","Existing logs for the flutter-gold check can be seen at this (internal only) [link](https:\/\/pantheon.corp.google.com\/logs\/query;query=SEARCH%2528%22%60push-gold%60%22%2529;cursorTimestamp=2024-03-18T19:57:18.007Z?project=flutter-dashboard).\r\n\r\nThey come from flutter\/cocoon, so we can easily add more infos to the logs if needed."],"labels":["engine","P1","c: tech-debt","team-engine","triaged-engine","e: scenario-app"]},{"title":"[tool_crash] FileSystemException: Cannot create link, OS Error: File exists, errno = 17","body":"## Command\r\n```\r\nflutter run --machine --start-paused -d ZY227WV2KT --devtools-server-address http:\/\/127.0.0.1:9100\/ --target \/Users\/christianngamba\/Dev\/mobile-app\/lib\/main.dart\r\n```\r\n\r\n## Steps to Reproduce\r\n1. ... Get all packages\r\n2. ... Start building the app\r\n3. ... Getting error\r\n\r\n## Logs\r\nFileSystemException: Cannot create link, OS Error: File exists, errno = 17\r\n```\r\n#0      _Link.throwIfError (dart:io\/link.dart:254:7)\r\n#1      _Link.createSync (dart:io\/link.dart:182:5)\r\n#2      ForwardingLink.createSync (package:file\/src\/forwarding\/forwarding_link.dart:20:16)\r\n#3      ForwardingLink.createSync (package:file\/src\/forwarding\/forwarding_link.dart:20:16)\r\n#4      _createPlatformPluginSymlinks (package:flutter_tools\/src\/flutter_plugins.dart:1069:12)\r\n#5      createPluginSymlinks (package:flutter_tools\/src\/flutter_plugins.dart:991:5)\r\n#6      refreshPluginsList (package:flutter_tools\/src\/flutter_plugins.dart:1101:5)\r\n<asynchronous suspension>\r\n#7      FlutterProject.ensureReadyForPlatformSpecificTooling (package:flutter_tools\/src\/project.dart:359:5)\r\n<asynchronous suspension>\r\n#8      FlutterCommand.verifyThenRunCommand (package:flutter_tools\/src\/runner\/flutter_command.dart:1648:7)\r\n<asynchronous suspension>\r\n#9      FlutterCommand.run.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command.dart:1350:27)\r\n<asynchronous suspension>\r\n#10     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:150:19)\r\n<asynchronous suspension>\r\n#11     CommandRunner.runCommand (package:args\/command_runner.dart:212:13)\r\n<asynchronous suspension>\r\n#12     FlutterCommandRunner.runCommand.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:348:9)\r\n<asynchronous suspension>\r\n#13     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:150:19)\r\n<asynchronous suspension>\r\n#14     FlutterCommandRunner.runCommand (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:294:5)\r\n<asynchronous suspension>\r\n#15     run.<anonymous closure>.<anonymous closure> (package:flutter_tools\/runner.dart:112:9)\r\n```\r\n```\r\n[\u2713] Flutter (Channel stable, 3.16.0, on macOS 12.7.4 21H1123 darwin-x64, locale fr)\r\n    \u2022 Flutter version 3.16.0 on channel stable at \/Users\/christianngamba\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision db7ef5bf9f (4 months ago), 2023-11-15 11:25:44 -0800\r\n    \u2022 Engine revision 74d16627b9\r\n    \u2022 Dart version 3.2.0\r\n    \u2022 DevTools version 2.28.2\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/christianngamba\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 14.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 14C18\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome)\r\n    ! Cannot find Chrome. Try","comments":["Hi @maeltoukap \r\nDoes the issue persist from the 2nd time running the app onwards?"],"labels":["waiting for customer response","in triage"]},{"title":"A memory leak occurred while I was using a Canvas receipt image and converting it to ui.Image","body":"### Steps to reproduce\r\n\r\n```dart\r\nvoid setPixelcolor(List<Offset> points, double brushsize, Color color)(_recorder ??= ui.PictureRecorder()\uff1b\r\n_canvas ??= ui.Canvas(_recorder!)\uff1b\r\n_canvas?.dravImage(layers[currentEditLayout].uiImage!, Offset.zero, Paint())\uff1b\r\ncanvas!.drawPoints(\r\nui.PointMode.points, \r\npoints, \r\nPaint()\r\n..color = color\r\n..strokeWidth = 1);\r\n_picture = _recorder!.endRecording();\r\nlayers[currentEditLayout].uiImage = _picture!.toImageSync(canvassize.width.toInt(),canvassize.height.toInt())\uff1bpicture!.dispose()\uff1b\r\n_picture = null;\r\n```\r\n\r\nThis is the function executed\r\n\r\n### Expected results\r\n\r\nMemory is stable\r\n\r\n### Actual results\r\n\r\nI execute 5000 times, and the memory goes up badly\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @linb1111111 \r\nWhich platform are you seeing the issue? And which tool are you using to observe memory? \r\n\r\nFor us to further investigate this issue, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. Also, please provide the output of `flutter doctor -v` as well. Thank you!","```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'dart:ui' as ui;\r\n\r\nvoid main() async {\r\n  runApp(MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  \/\/ This widget is the root of your application.\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  int _counter = 0;\r\n\r\n  ui.Image? layerImg;\r\n\r\n  void setPixelColor(List<Offset> points, double brushSize, Color color) async {\r\n    ui.PictureRecorder? recorder = ui.PictureRecorder();\r\n    ui.Canvas? canvas = ui.Canvas(recorder);\r\n\r\n    canvas.drawPoints(\r\n        ui.PointMode.points,\r\n        points,\r\n        Paint()\r\n          ..color = color\r\n          ..strokeWidth = 1);\r\n\r\n    ui.Picture? picture = recorder.endRecording();\r\n\r\n    if (null != layerImg) {\r\n      layerImg!.dispose();\r\n      layerImg = null;\r\n    }\r\n\r\n    layerImg = await picture.toImage(1000, 1000);\r\n    picture.dispose();\r\n    recorder = null;\r\n    canvas = null;\r\n    picture = null;\r\n  }\r\n\r\n  void _incrementCounter() {\r\n    for (int i = 0; i < 1000; i++) {\r\n      setPixelColor([Offset(1, 1)], 2, Colors.black);\r\n      print(i);\r\n    }\r\n    print('exec sucess!!!');\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: TextButton(\r\n          onPressed: _incrementCounter,\r\n          child: const Text('test'),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\nThe above is the smallest instance that can be run\r\n\r\n\r\n","![\u5c4f\u5e55\u622a\u56fe 2024-03-19 101537](https:\/\/github.com\/flutter\/flutter\/assets\/163548107\/d983eb04-bc2a-4b99-8960-d2a523ff9286)\r\n","@huycozy thanks for your help","This code does not cause memory explosion in ios but it does cause memory explosion in Android. I tried using toImage but it did not solve my problem @huycozy ","flutter doctor -v\r\n\r\nFlutter assets will be downloaded from https:\/\/storage.flutter-io.cn. Make sure you trust this source!\r\n[\u221a] Flutter (Channel stable, 3.16.5, on Microsoft Windows [\u7248\u672c 10.0.22631.3155], locale zh-CN)\r\n    \u2022 Flutter version 3.16.5 on channel stable at D:\\flutter_windows_3.16.5-stable\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 78666c8dc5 (3 months ago), 2023-12-19 16:14:14 -0800\r\n    \u2022 Engine revision 3f3e560236\r\n    \u2022 Dart version 3.2.3\r\n    \u2022 DevTools version 2.28.4\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at D:\\Android\\SDK\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[X] Chrome - develop for the web (Cannot find Chrome executable at .\\Google\\Chrome\\Application\\chrome.exe)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[X] Visual Studio - develop Windows apps\r\n    X Visual Studio not installed; this is necessary to develop Windows apps.\r\n      Download at https:\/\/visualstudio.microsoft.com\/downloads\/.\r\n      Please install the \"Desktop development with C++\" workload, including all of its default components\r\n\r\n[\u221a] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\111\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (2 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22631.3155]\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n@huycozy ","Thanks for the update. I checked this on Android (`Realme 6, Android 11`), ran the example in profile mode but the issue didn't seem to appear:\r\n\r\n```console\r\n...\r\nI\/flutter (26541): 998\r\nI\/flutter (26541): 999\r\nI\/flutter (26541): exec sucess!!!\r\n```\r\n\r\n>the memory goes up badly\r\n\r\nHow do you observe this?\r\n\r\nAlso, I'm on the latest Flutter stable channel 3.19.3. Could you try upgrading your Flutter SDK to this version and re-check?","I switched to the stable version and ran flutter channel stable, which is the latest version 3.16.5\uff0cI then switched to the beta version and the problem persisted","I'm not sure if there's a problem with my usage, I don't understand it","@huycozy ","I ran flutter --version\r\nFlutter 3.19.3 \u2022 channel stable \u2022 https:\/\/github.com\/flutter\/flutter.git\r\nFramework \u2022 revision ba39319843 (13 days ago) \u2022 2024-03-07 15:22:21 -0600\r\nEngine \u2022 revision 2e4ba9c6fb\r\nTools \u2022 Dart 3.3.1 \u2022 DevTools 2.31.1\r\n\r\nI've updated the flutter version to be the same as yours, but the issue persists","@huycozy ","I went to mac this morning to use ios emulator test, using devtool to check the memory status, found very stable, it seems that the problem exists in the android side @huycozy ","This problem also occurred when I was debugging the real thing on my ipad","I call toImageSync very frequently, much more than 100 times, and I reduced the number of calls in the minimal implementation I gave you @huycozy ","So, you can observe this issue on both Android and iOS, right? \r\n\r\nI also check this by running Android app target in profile mode, and observe memory in Devtools but don't see memory leaks or sudden changes:\r\n\r\n<details>\r\n<summary>Devtools memory observation<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/d029500f-68b5-4d12-b204-5f60146a87f6\r\n\r\n\r\n<\/details>\r\n\r\nCan you share the indicators that you think memory is leaking? Or demo the video you see on Devtools > Memory page\r\n\r\n(Please write the update in fewer comments that will help the issue easier to read. Thank you!)","Yes, you can currently see this issue on real devices on android and ios","> So, you can observe this issue on both Android and iOS, right?\r\n> \r\n> I also check this by running Android app target in profile mode, and observe memory in Devtools but don't see memory leaks or sudden changes:\r\n> \r\n> Devtools memory observation\r\n> Can you share the indicators that you think memory is leaking? Or demo the video you see on Devtools > Memory page\r\n> \r\n> (Please write the update in fewer comments that will help the issue easier to read. Thank you!)\r\n\r\nI took a look at your memory status. Isn't this the realization of a memory leak? Memory grew rapidly. Eventually leading to a crash","I am not sure if this situation is normal, from my understanding I think this situation is not normal, I think the increase memory should be reduced to the size before the increase in a short time. If this were normal I would probably have to rewrite my app in another language or framework, which I would be extremely reluctant to do @huycozy ","If memory increases suddenly or it is not freed, then it is a valid bug and we need to escalate the issue to the appropriate teams for investigation. However, I need to be able to reproduce this issue first because it needs more clarity.\r\n\r\n>I took a look at your memory status. Isn't this the realization of a memory leak? Memory grew rapidly. Eventually leading to a crash\r\n\r\nCould you please point out (take a screenshot) from my demo when you see the memory leak? I am trying to understand the problem by giving factual demo and observable aspects. It would be better if you could also show a demo from your side (video\/screenshot) that would move the issue along faster. Thank you!\r\n","I think we may need to adjust our perspective on this problem. My current words are that if memory goes up and there is no gc to release, I think it is a memory leak. Because I can't understand why memory keeps rising without being freed after calling this function, it is a very important problem for me. Is there something wrong with my writing? If there is nothing wrong with my writing, then why didn't the intrinsic value fall after rising? I've considered some issues, such as the execution gap is too small, it doesn't have time to do gc, if this were the case, i think it would do a gc operation after a period of idle time, which means that its memory usage would drop, but i did not see the results i expected @huycozy ","More importantly, I don't quite understand why calling toImageSync would cause this to happen, I can understand that there is a certain memory increase when calling this function, or there is a significant increase in memory when this function is called continuously, but I don't understand why memory is not freed up within a certain period of time after calling these functions","And very importantly, I need to determine whether this is a bug or not. This is related to whether I need to rewrite this APP in other languages, thank you very much",">if memory goes up and there is no gc to release, I think it is a memory leak.\r\n>i think it would do a gc operation after a period of idle time, which means that its memory usage would drop\r\n\r\nThanks, I got your point. It seems the memory has not been freed even though you disposed of objects each time creating image from picture. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.4, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.4 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 68bfaea224 (29 hours ago), 2024-03-20 15:36:31 -0700\r\n    \u2022 Engine revision a5c24f538d\r\n    \u2022 Dart version 3.3.2\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-12.0.pre.40, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-12.0.pre.40 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d755bc222b (28 minutes ago), 2024-03-21 19:44:55 -0700\r\n    \u2022 Engine revision e2f324beac\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-257.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.5\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 123.0.6312.58\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","> > if memory goes up and there is no gc to release, I think it is a memory leak.\r\n> > i think it would do a gc operation after a period of idle time, which means that its memory usage would drop\r\n> \r\n> Thanks, I got your point. It seems the memory has not been freed even though you disposed of objects each time creating image from picture.\r\n> \r\n> flutter doctor -v (stable and master)\r\n\r\nYes, I don't understand it. And I need to know if it's a bug, and if so, roughly how long it will take to fix. This is related to my follow-up tools, currently there are some users waiting for my app. @huycozy ","At present, I need to determine whether this is a bug or not, and whether there is a problem in my operation, which relates to my subsequent work. Please reply as soon as possible. Thank you very much @huycozy "],"labels":["engine","c: performance","perf: memory","has reproducible steps","team-engine","found in release: 3.19","found in release: 3.21"]},{"title":"Direct Navigation to Add Home Widget Screen on iOS","body":"### Use case\n\nHello,\r\n\r\nI'm currently working on a Flutter app for iOS, and I was wondering if there's an existing function similar to openAppSettings(), which redirects users directly to the iPhone's settings screen. Specifically, I'm interested in a Flutter function that could directly navigate users to the screen for adding home screen widgets on iOS.\r\n\r\nThe openAppSettings() function is incredibly useful for guiding users to enable or adjust necessary permissions for the app directly within the iPhone's settings. Similarly, it would be beneficial to have a straightforward way to lead users to the \"Add Widget\" screen, enhancing user experience by simplifying the process of adding widgets related to our app.\r\n\r\nIs there currently any function or workaround available in Flutter that supports this feature? If not, could this be considered for future development? This functionality would significantly help in promoting user engagement with app widgets by making them more accessible and easier to add.\r\n\r\nThank you for considering this feature request.\n\n### Proposal\n\nThe openAppSettings() function is incredibly useful for guiding users to enable or adjust necessary permissions for the app directly within the iPhone's settings. Similarly, it would be beneficial to have a straightforward way to lead users to the \"Add Widget\" screen, enhancing user experience by simplifying the process of adding widgets related to our app.\r\n\r\n\r\nThank you for considering this feature request.","comments":["This package seems to do the work: https:\/\/pub.dev\/packages\/app_settings\r\n\r\nNot sure if it works for your case.","Hi @ssorrychoi \r\nI see there are two different proposals: `openAppSettings` and `Add Home Widget`. For further proposals\/issues, please file separate issues for better tracking.\r\n\r\nFor `openAppSettings`, please check `app_settings` as @PauloAlves311 shared above. For `Add Home Widget`, please check [home_widget](https:\/\/pub.dev\/packages\/home_widget) package.\r\n\r\nSince not every functionality\/feature can be a part of the framework itself, hence there are community packages that help to bridge the gap. If you still believe these functionalities should be a part of Flutter framework, please file separate issues for each one. One each issue, please try to clarify all things requested in the [proposal template](https:\/\/github.com\/flutter\/flutter\/issues\/new?assignees=&labels=&projects=&template=3_feature_request.yml). Thanks!"],"labels":["waiting for customer response","in triage"]},{"title":"iframe navigation on Android gets handled by main frame with `NavigationDecision.navigate`","body":"### What package does this bug report belong to?\r\n\r\nwebview_flutter\r\n\r\n### What target platforms are you seeing this bug on?\r\n\r\nAndroid\r\n\r\n### Have you already upgraded your packages?\r\n\r\nYes\r\n\r\n### Dependency versions\r\n\r\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```lock\r\n  webview_flutter_android:\r\n    dependency: transitive\r\n    description:\r\n      name: webview_flutter_android\r\n      sha256: \"3e5f4e9d818086b0d01a66fb1ff9cc72ab0cc58c71980e3d3661c5685ea0efb0\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.15.0\"\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Add `NavigationDeletage.onNavigationRequest` to the `Webview`\r\n2. Go to a site which has an iframe that executes `data:text\/html,<script>onresize=function(){parent.postMessage(0,'*')}<\\\/script>`\r\n\r\n### Expected results\r\n\r\nIframe is allowed to load that content\r\n\r\n### Actual results\r\n\r\nThe main frame loads this content, causing a white page.\r\n\r\n\r\n","comments":[],"labels":["platform-android","p: webview","package","team-ecosystem","P2","triaged-ecosystem"]},{"title":"The image for the indicator of the TabBar does not auto-adapt to different resolutions","body":"### Steps to reproduce\n\nAccording to the documentation for resolution-aware assets (https:\/\/flutter.cn\/docs\/ui\/assets\/assets-and-images#resolution-aware), my project's asset directory structure is as follows:\r\n\r\nassets\/images\/icon\/indicator.png\r\nassets\/images\/icon\/2.0x\/indicator.png\r\nassets\/images\/icon\/3.0x\/indicator.png\r\n\r\nWhen specifying the indicator of the TabBar to use an image, the image does not auto-adapt to different resolutions.\r\n\r\nAfter tracing the source code of the TabBar, it was found that this is due to the fact that the ImageConfiguration constructed during the execution of _IndicatorPainter does not specify the devicePixelRatio.\n\n### Expected results\n\nThe expected behavior is for the image to auto-adapt to different resolutions.\n\n### Actual results\n\nThe image does not auto-adapt to different resolutions.\n\n### Code sample\n\n\r\n    TabBar(\r\n                            indicator: BoxDecoration(image: DecorationImage(image: AssetImage(\"assets\/images\/icon\/indicator.png\"),alignment :Alignment.bottomCenter)),\r\n                            tabs: <Widget>[\r\n                              Tab(\r\n                                text: \"tab1\",\r\n                              ),\r\n                              Tab(\r\n                                text: \"tab2\",\r\n                              ),\r\n                              Tab(\r\n                                text: \"tab3\",\r\n                              ),\r\n                            ],\r\n                          ),\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\nFlutter assets will be downloaded from https:\/\/storage.flutter-io.cn. Make sure you trust this source!\r\n[\u221a] Flutter (Channel stable, 3.16.1, on Microsoft Windows [\u7248\u672c 10.0.19045.4170], locale zh-CN)\r\n    \u2022 Flutter version 3.16.1 on channel stable at F:\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7f20e5d18c (4 months ago), 2023-11-27 09:47:30 -0800\r\n    \u2022 Engine revision 22b600f240\r\n    \u2022 Dart version 3.2.1\r\n    \u2022 DevTools version 2.28.3\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at F:\\Android\\Sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: F:\\Android\\AndroidStudio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.7.2)\r\n    \u2022 Visual Studio at F:\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.7.34018.315\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u221a] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at F:\\Android\\AndroidStudio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n\r\n[\u221a] Connected device (4 available)\r\n    \u2022 M2007J3SC (mobile) \u2022 192.168.152.37:40853 \u2022 android-arm64  \u2022 Android 12 (API 31)\r\n    \u2022 Windows (desktop)  \u2022 windows              \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.19045.4170]\r\n    \u2022 Chrome (web)       \u2022 chrome               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.113\r\n    \u2022 Edge (web)         \u2022 edge                 \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!","comments":["Thanks for the report.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/985576dbfdff5e9321941d9f66cb33baed337346\/packages\/flutter\/lib\/src\/material\/tabs.dart#L562-L565\r\n\r\nChecked on some devices, results look the same:\r\n- Realme 6: 6.5 inches, 1080 x 2400 pixels, 20:9 ratio (~405 ppi density)\r\n- Pixel 7: 6.3 inches, 1080 x 2400 pixels, 20:9 ratio (~416 ppi density)\r\n- Galaxy Tab A7 Lite: 8.7 inches, 800 x 1340 pixels, 5:3 ratio (~179 ppi density)\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\n- Realme 6:\r\n![Screenshot 2024-03-15 at 19 08 55](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/c27a122b-d61e-42a2-a5a9-c72fa46d51f7)\r\n- Pixel 7:\r\n![Screenshot 2024-03-15 at 19 11 48](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/19f6fb4d-ca53-4ff6-8ae7-7b123ee3d608)\r\n- Galaxy Tab A7 Lite:\r\n![Screenshot 2024-03-15 at 19 15 16](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/71a54bc3-29a8-4ba7-a959-d018c0feef81)\r\n\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9b276be7fe (2 hours ago), 2024-03-14 21:46:36 -0400\r\n    \u2022 Engine revision 995d8903e0\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-234.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\nSample code: [reproduce_issue_image_assets](https:\/\/github.com\/huycozy\/reproduce_issue_image_assets\/blob\/main\/lib\/tabbar_res_145204.dart)\r\n"],"labels":["framework","f: material design","a: assets","a: images","has reproducible steps","team-design","found in release: 3.19","found in release: 3.21"]},{"title":"[Flutter_web] Improve error message when Deferred loading fails to load a part.js file ","body":"### Use case\n\nThis week we ran into an issue with one of our Flutter web apps that could have been solved faster by improving flutter error logging in some scenario. I'll try to describe this scenario as clearly as possible.\r\n\r\nThe symptoms of my issue:\r\n\r\n- We deployed a first version (let's call it version A) in the morning. Everything was working fine\r\n- Around 2 pm we deployed a newer version of the same application, with very few changes. Once this application was deployed, we started to notice that very few features were still working, while most of the screens simply presented a blank white screen.\r\n- There was no console error message, and no failed webservice call\r\n- Clearing the browser cache, or the flutter cache manually, had no effect.\r\n- Re-deploying version A of the app, did not resolve the issue.\r\n\r\nOur application use deferred loading extensively. Basically every screen below our home shell is deferred loaded, so every time we navigate to a new screen we are used to seeing `main.dart.js_XX.part.js` files being downloaded.\r\n\r\nIn that case, what was weird is that even though we can see the files being downloaded in the console, even after the file was received (HTTP code 200), the runtime was still doing retry calls on the same files:\r\n\r\n<img width=\"1624\" alt=\"Screenshot 2024-03-14 at 17 26 43\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/475526\/2eb1baff-e758-4937-8a31-41fc5b0e9e73\">\r\n\r\nIn the sceenshot above, we can see that the file `main.dart.js_11.part.js` is successfully fetched (code 200), yet below there is a `main.dart.js_11.part.js?dart2jsRetry=1`, and then (not visible in the screenshot)  `main.dart.js_11.part.js?dart2jsRetry=2` and  `main.dart.js_11.part.js?dart2jsRetry=3`.\r\n\r\nAfter investigation with our SRE, we found out that the issue was a DNS cache returning the wrong file.\r\nSo after our first deployment, we had this:\r\n\r\n```mermaid\r\nsequenceDiagram\r\n    Flutter App A->>+DNS: main.dart.js_11.part.js\r\n    DNS->>+Docker image A: main.dart.js_11.part.js\r\n    Docker image A->>+DNS: main.dart.js_11.part.js\r\n    DNS->>+Flutter App A: main.dart.js_11.part.js\r\n```\r\nMeaning that after this point, most of the javascript files were in cache at the DNS level.\r\nWhich let to this flow after our second deployment:\r\n\r\n```mermaid\r\nsequenceDiagram\r\n    Flutter App B->>+DNS: main.dart.js_11.part.js\r\n    participant Docker image B\r\n    DNS->>+Flutter App B: main.dart.js_11.part.js (version A)\r\n```\r\n\r\nBecause we already had a file named `main.dart.js_11.part.js` in cache at DNS level, the request never actually got to the server to retrieve the proper file.\r\nInstead it got an \"outdated\" `main.dart.js_11.part.js` resulting in a loading error by Flutter.\r\n\r\nSince the file was not the one expected, flutter could not load it, therefore retrying the query multiple times.\r\n\r\nObviously it is not the responsibility of Flutter to handle this kind of scenario, however it should at least log an explicit error message in the developer console when that happens.\r\n\n\n### Proposal\n\nWhen retrying to load a `part.js` file, log an explicit message inside the developer console, explaining what led to the retry attempt.\r\nIn my case, it would have been extremely helpful to get an error message like `File mismatch. The file received could not be properly loaded`, or something equivalent. ","comments":["Thanks @Miiite for the very detailed and clear bug report. Since the entirety of this mechanism is handled by dart2js, I filed an issue in the Dart SDK repo: https:\/\/github.com\/dart-lang\/sdk\/issues\/55277 to track this there (unfortunately I couldn't move the issue between the projects because they are in different github organizations)."],"labels":["c: new feature","platform-web","c: proposal","team-web"]},{"title":"[gen_l10n] Add an option to use custom number format for generated l10n files","body":"### Use case\n\nUse a specific format for a specific message\n\n### Proposal\n\nLike isCustomDateFormat actual solution:\r\n\r\n```json\r\n{\r\n  \"helloWorld\": \"{max}\",\r\n  \"@helloWorld\": {\r\n    \"placeholders\": {\r\n      \"max\": {\r\n        \"type\": \"num\",\r\n        \"format\": \"# ###\",\r\n        \"isCustomNumberFormat\": \"true\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```","comments":["@lsaudon \r\nCan you elaborate what exactly is your use case and proposal ?\r\nAlso, can you check https:\/\/github.com\/flutter\/flutter\/issues\/116716 to see if it resembles your case or not ?","I want to use the space as a group separator for a message in all languages.\n\nNo, it's not related to this ticket.","Hey @lsaudon, could you add a little more details? Right now it is not clear to me what you're asking for. Maybe give an example of what you'd like to achieve? ","For one message, I want a space separator for number.\r\n```\r\nThe text must not exceed 1 000 characters.\r\nLe texte ne doit pas d\u00e9passer 1 000 caract\u00e8res.\r\nEl texto no debe superar los 1 000 caracteres.\r\n```"],"labels":["c: new feature","tool","framework","a: internationalization","c: proposal","team-framework"]},{"title":"GoRouter not popping on Android 14 with android back button","body":"### What package does this bug report belong to?\r\n\r\ngo_router\r\n\r\n### What target platforms are you seeing this bug on?\r\n\r\nAndroid\r\n\r\n### Have you already upgraded your packages?\r\n\r\nYes\r\n\r\n### Dependency versions\r\n\r\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```lock\r\n  go_router:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: go_router\r\n      sha256: \"170c46e237d6eb0e6e9f0e8b3f56101e14fb64f787016e42edd74c39cf8b176a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"13.2.0\"\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. add go_router to project,even earlier versions since v10\r\n2. Make sure the device is running Android 14 (Tested versions of Android using Emulators and Physical devices)\r\n3. create a routing system using go_Router\r\n4. set the RouterConfig as the router that you created\r\n5. try to press the back button on the Android and it will close or minimize the app instead of poping\r\n6. try the same thing on Android 13 or earlier, Works perfectly\r\n\r\n### Expected results\r\n\r\nPop To previous page and pressing of Back Button as on other android versions\r\n\r\n### Actual results\r\n\r\nCloses app or minimizes it\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nGoRouter router = GoRouter(\r\n  initialLocation: LoginScreen.routeName,\r\n  debugLogDiagnostics: true,\r\n  routes: <RouteBase>[\r\n    GoRoute(\r\n      path: LoginScreen.routeName,\r\n      name: LoginScreen.title,\r\n      pageBuilder: (context, state) => MaterialPage<void>(\r\n        key: state.pageKey,\r\n        child: const LoginScreen(),\r\n      ),\r\n    ),\r\n    GoRoute(\r\n      path: PinScreen.routeName,\r\n      name: PinScreen.title,\r\n      pageBuilder: (context, state) => MaterialPage<void>(\r\n        key: state.pageKey,\r\n        child: const PinScreen(),\r\n      ),\r\n    ),\r\n```\r\n\r\n```\r\n return MaterialApp.router(\r\n      scaffoldMessengerKey: scaffoldMessengerKey,\r\n      title: 'My APP',\r\n      localizationsDelegates: const [\r\n        AppLocalizationsDelegate(),\r\n        GlobalMaterialLocalizations.delegate,\r\n        GlobalWidgetsLocalizations.delegate,\r\n        GlobalCupertinoLocalizations.delegate,\r\n      ],\r\n      locale: AppLocalizations.getStoredLocale(),\r\n      supportedLocales: const [\r\n        Locale('en'),\r\n        Locale('af'),\r\n      ],\r\n      theme: ThemeData(brightness: Brightness.light, useMaterial3: false),\r\n      darkTheme: ThemeData(brightness: Brightness.dark, useMaterial3: false),\r\n      routerConfig: router,\r\n    );\r\n\r\n```\r\n    \r\nId like to add that I'm using PopScope but the router doesn't use the PopScope at all it seems\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Videos\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\nUsually the logs would be something like\r\n\r\n```console\r\n[GoRouter] popping to \/home\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.16.4, on macOS 14.0 23A344 darwin-arm64, locale en-ZA)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.3)\r\n[\u2713] VS Code (version 1.87.1)\r\n[\u2713] Connected device (2 available)\r\n[\u2713] Network resources\r\n```\r\n\r\n<\/details>\r\n","comments":["I'm Thinking the GoRouter's backButtonDispatcher is not working well with Android 14","Hi @theREMASTERED1, I think you encountered https:\/\/github.com\/flutter\/flutter\/issues\/138737. You can check the 1st comment to see if your case also is the same one of them. If your case is not the same, please provide a complete sample code that implemented PopScope. Thanks!","Hi @huycozy I checked out the issue and updated the router's version to 12.1.3 . When I tested, I noticed something: the PopScope works fine, but the onPopInvoked only kicks in when canPop is false, especially on older Android versions.\r\n\r\nThen I tried it on an Android 14 device with canPop set to false, but it didn't work as expected. Instead of not popping at all, like it should with the PopScope, the app just closed. It seemed like it was ignoring the PopScope altogether.\r\n\r\nSo it it seems my issue is kind of related but also not at all...android 14 is not playing nice\r\n\r\nhere's an example of my PopScope (I can't unfortunately provide too much code)\r\n```\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return PopScope(\r\n      canPop: true,\r\n      onPopInvoked: (didPop) {\r\n        print('didPop: $didPop');\r\n      },\r\n      ```\r\n","Thanks for the update. I see `canPop` set to `true` in your example but you said `canPop` set to `false`. If `canPop` is true, it's indeed a case reported at https:\/\/github.com\/flutter\/flutter\/issues\/138737#issue-2002700595 (the reporter also tests on Android 14). Could you please confirm this again?\r\n\r\nThis may also related to https:\/\/github.com\/flutter\/flutter\/issues\/140869.","Hi @huycozy.Yes I am experiencing **almost** the same issue, i turned canPop on and off to test it. the thing is what I'm saying is that Android 14 is ignoring the PopScope entirely regardless if its set to false or true, Its like Android 14 ignores popping on goRouter entirely\r\n\r\nI'm having the issue you previously mentioned on the previous Android versions but it is okay as don't use PopInvoked really\r\nEven changing the Gorouter version is not really making a difference for me\r\n\r\nso short version is that GoRouter hardware pop functionality seems to be ignored entirely on Android 14 regardless of the package version or if canPop is true or false\r\nits just closes\/mimimizes the app\r\n(it does pop when i press in-app backbuttons)","I'm more inclined to centralize on https:\/\/github.com\/flutter\/flutter\/issues\/138737 because it seems to encapsulate this as well. If you also agree, feel free to close this and follow that issue.\r\n\r\nOtherwise, please make this more clear by specific test cases:\r\nI did a test on my `Pixel 7 Android 14` device, `onPopInvoked` is always invoked regardless `canPop` is true or false. This does not match a test case at https:\/\/github.com\/flutter\/flutter\/issues\/138737#issue-2002700595 (when canPop is true). Could you also try with the [given example there](https:\/\/github.com\/btrautmann\/pop_scope_repro) and share the result in the table here? \r\n\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Android 14 Error","body":"### Steps to reproduce\r\n\r\nFlutter release code should be work well on every version of android \r\n\r\n### Expected results\r\n\r\nI want to install my app for every version of android because it is working on android 13 and older well , now , it can't do that on android 14\r\n\r\n### Actual results\r\n\r\nI am facing with your app isn't compatible with device for android 14, I have done latest dependencies and latest sdk , especially on some device i can't even installed.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n\r\n![bug](https:\/\/github.com\/flutter\/flutter\/assets\/56672040\/582c3c60-423d-4756-a836-75cbaca3c416)\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-TH)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.3)\r\n[\u2713] VS Code (version 1.87.2)\r\n[\u2713] Connected device (3 available)\r\n    ! Error: Browsing on the local area network for HHA1157. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n[\u2713] Network resources\r\n\r\n\u2022 No issues found!\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @BrillianceOsprey \r\nIs the APK file installed normally on other Android OS versions? (Android 12\/13..) \r\n\r\nWhat is your `minSdkVersion` and `targetSdkVersion` in `\/android\/app\/build.gradle` file? Please also check this: https:\/\/developer.android.com\/about\/versions\/14\/behavior-changes-all#minimum-target-api-level","Yes apk installed normally on other version \r\n\r\nHere is my build.gradle file\r\n\r\n```groovy\r\nplugins {\r\n    id \"com.android.application\"\r\n    id \"kotlin-android\"\r\n    id \"dev.flutter.flutter-gradle-plugin\"\r\n    id \"com.google.gms.google-services\"\r\n}\r\n\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file('local.properties')\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader('UTF-8') { reader ->\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = '1'\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = '1.0'\r\n}\r\n\r\ndef keystoreProperties = new Properties()\r\ndef keystorePropertiesFile = rootProject.file('key.properties')\r\nif (keystorePropertiesFile.exists()) {\r\n    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))\r\n}\r\n\r\n\r\nandroid {\r\n    namespace \"com.north.user\"\r\n    compileSdkVersion 34\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = '1.8'\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += 'src\/main\/kotlin'\r\n    }\r\n\r\n    defaultConfig {\r\n        \/\/ TODO: Specify your own unique Application ID (https:\/\/developer.android.com\/studio\/build\/application-id.html).\r\n        applicationId \"com.s4.user\"\r\n        \/\/ You can update the following values to match your application needs.\r\n        \/\/ For more information, see: https:\/\/docs.flutter.dev\/deployment\/android#reviewing-the-gradle-build-configuration.\r\n        \/\/ 29\r\n        minSdkVersion 29\r\n        targetSdkVersion 34\r\n        versionCode 1\r\n        versionName \"1.0.0\"\r\n        multiDexEnabled true\r\n    }\r\n\r\n    signingConfigs {\r\n        \r\n        release {\r\n            keyAlias keystoreProperties['keyAlias']\r\n            keyPassword keystoreProperties['keyPassword']\r\n            storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null\r\n            storePassword keystoreProperties['storePassword']\r\n        }\r\n        \r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            debuggable false\r\n            signingConfig signingConfigs.release\r\n            \/\/ Enables code shrinking, obfuscation, and optimization for only\r\n            \/\/ your project's release build type. Make sure to use a build\r\n            \/\/ variant with `debuggable false`.\r\n            minifyEnabled true\r\n            \/\/ Enables resource shrinking, which is performed by the\r\n            \/\/ Android Gradle plugin.\r\n            shrinkResources true\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source '..\/..'\r\n}\r\n\r\ndependencies {}\r\n```\r\n","Thanks for the update. Could you share your device info (OS, model)? Also, please share the output of `flutter doctor -v`. It seems they are not connected properly.\r\n\r\nTo make this more clearly, could you please share:\r\n- Does this issue only occur when installing `apk` file on your device? Does it work if you plug the device into your PC\/laptop and run the app from project (in both debug and release modes)?\r\n- Does this issue occur on a newly created Flutter project that doesn't have any 3rd plugins\/packages?","Vivo Android version 14\r\nAlso on Samsunge s34 ultra Android version 14\r\n\r\n'''\r\n\u279c  ~ flutter doctor -v                                      \r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale\r\n    en-TH)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/admin\/SDK\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (11 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/admin\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android\r\n      Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 M2101K9AG (mobile)         \u2022 8dedb6bb                             \u2022\r\n      android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 iPhone 15 Pro Max (mobile) \u2022 8ACE47C6-3413-4D6F-BFA5-FC498F3DC5C2 \u2022 ios\r\n      \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                \u2022\r\n      darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)               \u2022 chrome                               \u2022\r\n      web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for HHA1157. Ensure the device\r\n      is unlocked and attached with a cable or associated with the same local\r\n      area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code\r\n      -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n\r\n'''\r\n\r\nSometime it works on debugging with cable , in debugging case(it taking too long and noting happen)\r\nActually happening (in both debug and release modes)\r\nDoes this issue occur on a newly created Flutter project that doesn't have any 3rd plugins\/packages (Yes, but it is working with in first run i got isn't compatible massage)",">Sometime it works on debugging with cable , in debugging case\r\n\r\nIt also means the issue still occurs when you debug the app with plugged devices, right? We need to catch the error from the output console if any. I would suggest you observe it and notice if there is any pattern.\r\n\r\n>Yes, but it is working with in first run i got isn't compatible massage\r\n\r\nI don't see the issue on my end with a newly created Flutter project on Android 14 device (Pixel 7). \r\n\r\n>! Error: Browsing on the local area network for HHA1157. Ensure the device\r\nis unlocked and attached with a cable or associated with the same local\r\narea network as this Mac.\r\n\r\nLooking at this error from your flutter doctor output, I think there is something wrong with device connection. Could you share the output of `flutter devices`?","But, I didn't use that device HAA1157\r\n'''\r\nflutter devices\r\nFound 3 connected devices:\r\n  iPhone 15 Pro Max (mobile) \u2022 8ACE47C6-3413-4D6F-BFA5-FC498F3DC5C2 \u2022 ios\r\n  \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2 (simulator)\r\n  macOS (desktop)            \u2022 macos                                \u2022\r\n  darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n  Chrome (web)               \u2022 chrome                               \u2022\r\n  web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\nNo wireless devices were found.\r\n\r\nError: Browsing on the local area network for HHA1157. Ensure the device is\r\nunlocked and attached with a cable or associated with the same local area\r\nnetwork as this Mac.\r\nThe device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\nRun \"flutter emulators\" to list and start any available device emulators.\r\n\r\nIf you expected another device to be detected, please run \"flutter doctor\" to\r\ndiagnose potential issues. You may also try increasing the time to wait for\r\nconnected devices with the \"--device-timeout\" flag. Visit\r\nhttps:\/\/flutter.dev\/setup\/ for troubleshooting tips.\r\n'''","Maybe there are some additional configurations on your AndroidManifest.xml file as well. Since you said the issue also occurs on a newly created Flutter project, could you share the project on your end so that I can try running it?"],"labels":["waiting for customer response","in triage"]},{"title":"Expose listenable text layout from `RenderEditable` \/ `RenderParagraph` ","body":"Expose the text layout as a `ValueListenable` from `RenderParagraph` and `RenderEditable`.  The text layout is typically only supposed to be read during and after paint. \r\n\r\nAdding a listener to the `RenderParagraph` version of the listenable also makes the `TextAlign` setter request relayout instead of repaint, to make sure the text layout is ready before the paint phase, so RenderObjects that paint before the `RenderParagraph` can also use the text layout.\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["a: text input","framework"]},{"title":"j'ai fais toutes les mises a jours mais cette erreur persiste meme quand je change de version","body":"Resolving dependencies...\r\nThe current Dart SDK version is 3.3.1.\r\n\r\nBecause biodiv requires SDK version >=3.21.0 <4.0.0, version solving failed.\r\nProcess finished with exit code 1","comments":["Hi @93cory, \r\nWhen opening an issue, please try to provide all information indicated in the template so that we can address the issue properly (See bug issue template [here](https:\/\/github.com\/flutter\/flutter\/issues\/new?assignees=&labels=&projects=&template=2_bug.yml))\r\n\r\nMore specifically:\r\n- Please provide the output of `flutter doctor -v`\r\n- Could you share your `pubspec.yaml` file content?"],"labels":["waiting for customer response","in triage"]},{"title":"Make it easier to debug a `flutter\/engine` C++ test ","body":"This is a follow up to https:\/\/github.com\/flutter\/flutter\/issues\/145186\r\n\r\n### Status quo\r\nCurrently the best way to debug a Flutter engine C++ googletest is using a custom VS Code `launch.json` file:\r\n\r\n```json\r\n{\r\n  \"version\": \"0.2.0\",\r\n  \"configurations\": [\r\n     {\r\n      \"name\": \"embedder_unittests\",\r\n      \"type\": \"cppvsdbg\",\r\n      \"request\": \"launch\",\r\n      \"preLaunchTask\": \"Build host_debug_unopt\",\r\n      \"program\": \"..\/out\/host_debug_unopt\/embedder_unittests.exe\",\r\n      \"cwd\": \"${workspaceRoot}\",\r\n      \"args\": [\r\n        \"--gtest_filter=EmbedderTest.TestIWantToDebugHere\"\r\n      ],\r\n      \"logging\": {\r\n        \"moduleLoad\": false,\r\n        \"trace\": true\r\n      }\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\nI need a separate configuration for each gtest executable (`embedder_unittests.exe`, `flutter_windows_unittests.exe`).\r\n\r\nTo switch which test I debug, I need to:\r\n\r\n1. Switch the active VS Code launch configuration:\r\n\r\n   ![image](https:\/\/github.com\/flutter\/flutter\/assets\/737941\/fd9d7d18-fdf2-447b-bad4-1e8e2f87e7e3)\r\n\r\n2. Edit the `launch.json` file to edit the `--gtest_filter`.\r\n\r\n### Potential solution\r\n\r\nIdeally we would have a better VS Code integration. Each `GTEST` macro would:\r\n\r\n1. Have a codelens action to `Run` or `Debug` the test:\r\n\r\n   ![image](https:\/\/github.com\/flutter\/flutter\/assets\/737941\/eba3b995-593e-45fb-9b0f-d45b4763568b)\r\n\r\n2. Show up in the VS Code's testing panel:\r\n \r\n   ![image](https:\/\/github.com\/flutter\/flutter\/assets\/737941\/e8af8b49-ac64-4141-ba4c-7a7e82448dca)\r\n","comments":[],"labels":["P2","team-engine","triaged-engine","e: engine-tool"]},{"title":"I want an amazing experience for using IDEs when editing `flutter\/engine`","body":"Today my workflow is best described by [this Simpsons scene](https:\/\/www.youtube.com\/watch?v=NPwyyjtxlzU):\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/73c9de6b-864b-4ef1-b1c9-fe34281b9fc9)\r\n\r\nI have a file, not version controlled, at `~\/Developer\/engine.code-workspace`. It approximately looks like this:\r\n\r\n```jsonc\r\n{\r\n  \"folders\": [\r\n    { \"path\": \".\/engine\/src\/flutter\", \"name\": \"engine\" },\r\n    { \"path\": \".\/flutter\", \"name\": \"framework\" }\r\n  ],\r\n  \"settings\": {\r\n    \"clangd.path\": \"${workspaceFolder}\/..\/buildtools\/mac-arm64\/clang\/bin\/clangd\",\r\n    \"clangd.arguments\": [\r\n      \"--compile-commands-dir=${workspaceFolder}\/..\/out\/android_debug_unopt_arm64\"\r\n    ],\r\n    \"clang-format.executable\": \"${workspaceRoot}\/..\/buildtools\/mac-arm64\/clang\/bin\/clang-format\",\r\n  },\r\n}\r\n```\r\n\r\nI would be OK with losing the \"folders\"-aspect of this workspace, but I'd really like to not have to manually edit and keep this file up to date as I change builds I'm working with. From a chat we had, here were a smattering of ideas that could help this problem:\r\n\r\n> I think we should pick a canonical location for that file in the engine repo and et should write to it. That being said, we have an issue of which our dir we point our IDE at\r\n>\r\n> so we would generate one file per build config?\r\n> I think the principal is the same\r\n> and then if you want to work on host or Android, you load that specific workspace\r\n>\r\n> I think separate workspaces per out directory is the only way things are consistent\r\n>\r\n> ...\r\n>\r\n> I did write myself a tool to open VS though \ud83d\ude05, we might want a et open --profile or et vscode open --profile something","comments":[],"labels":["P2","team-engine","triaged-engine","e: engine-tool"]},{"title":"Determine the future of build\/test configuration files in `flutter\/engine`.","body":"# Background\r\n\r\nToday we \"encode\" how to build and test the engine in at _least_ three different places:\r\n\r\n## [`ci\/builders\/*.json`](https:\/\/github.com\/flutter\/engine\/blob\/1da1597ec60d21534512e1fc6c58009768ac8261\/ci\/builders)\r\n\r\nEncodes:\r\n\r\n- What platform is needed to run a \"build\"\r\n- What `gn` flags to use (i.e. `--runtime-mode`, and so on) _for a build_\r\n- What target(s) to build (i.e. delegates to `ninja`) _for a build_\r\n- What target(s) to run as tests (i.e. a non-zero exit code is a failure) _for a build_\r\n\r\nFor example:\r\n\r\n```jsonc\r\n\/\/ Not a 1:1 reproduction.\r\n{\r\n  \"builds\": [\r\n    {\r\n      \"drone_dimensions\": [ \/* what platform is needed, i.e. Linux, etc *\/ ],\r\n      \"gn\": [ \/* flags *\/ ],\r\n      \"name\": \"platform_debug\",\r\n      \"tests\": [ \/* executables to run *\/ ],\r\n    },\r\n  ],\r\n}\r\n```\r\n\r\nNote that many, but not all of the `\"tests\": [ ... ]` invocations are to `testing\/run_tests.py`.\r\n\r\n## [`testing\/run_tests.py`](https:\/\/github.com\/flutter\/engine\/blob\/67e632882c8b3a5956044352735e082942079e14\/testing\/run_tests.py)\r\n\r\nEncodes:\r\n\r\n- A number of directories or utilities that are used multiple times (i.e. `FONTS_DIR`, or `BUILDROOT_DIR`)\r\n- Environment variables that are conditionally added or modified\r\n- Minor file operations (moving, copying, sym-linking, deleting) to prepare a test (or cleanup after)\r\n- A combination of both C++ and non-C++ targets to execute tests with\r\n\r\nFor example:\r\n\r\n```py\r\n# Not a 1:1 reproduction.\r\n\r\n# Example of top-level variables.\r\nBUILDROOT_DIR = os.path.abspath(os.path.join(os.path.realpath(__file__), '..', '..', '..'))\r\nOUT_DIR = os.path.join(BUILDROOT_DIR, 'out')\r\nGOLDEN_DIR = os.path.join(BUILDROOT_DIR, 'flutter', 'testing', 'resources')\r\nFONTS_DIR = os.path.join(BUILDROOT_DIR, 'flutter', 'third_party', 'txt', 'third_party', 'fonts')\r\n\r\n# Example of platform checks.\r\ndef is_asan(build_dir):\r\n  with open(os.path.join(build_dir, 'args.gn')) as args:\r\n    if 'is_asan = true' in args.read():\r\n      return True\r\n  return False\r\n\r\n# Example of conditional environment variables.\r\ndef metal_validation_env():\r\n  extra_env = {\r\n      'MTL_SHADER_VALIDATION': '1',  # Enables all shader validation tests.\r\n      'MTL_SHADER_VALIDATION_GLOBAL_MEMORY': '1',  # Validates accesses to device and constant memory.\r\n      'MTL_SHADER_VALIDATION_THREADGROUP_MEMORY': '1',  # Validates accesses to threadgroup memory.\r\n      'MTL_SHADER_VALIDATION_TEXTURE_USAGE': '1',  # Validates that texture references are not nil.\r\n  }\r\n  if is_aarm64():\r\n    extra_env.update({\r\n        'METAL_DEBUG_ERROR_MODE': '0',  # Enables metal validation.\r\n        'METAL_DEVICE_WRAPPER_TYPE': '1',  # Enables metal validation.\r\n    })\r\n  return extra_env\r\n\r\n# Example of declaring paths to run tests on (there are other specific executable cases).\r\ndef build_dart_host_test_list(build_dir):\r\n  dart_host_tests = [\r\n      (os.path.join('flutter', 'testing', 'litetest'), []),\r\n      (os.path.join('flutter', 'testing', 'skia_gold_client'), []),\r\n      (os.path.join('flutter', 'testing', 'scenario_app'), []),\r\n  ]\r\n\r\n# Based on the flags, runs variants of tests.\r\ndef main():\r\n  if 'dart-host' in types:\r\n    dart_filter = args.dart_host_filter.split(',') if args.dart_host_filter else None\r\n    dart_host_packages = build_dart_host_test_list(build_dir)\r\n    tasks = []\r\n    for dart_host_package, extra_opts in dart_host_packages:\r\n      if dart_filter is None or dart_host_package in dart_filter:\r\n        tasks += list(\r\n            gather_dart_package_tests(\r\n                build_dir,\r\n                os.path.join(BUILDROOT_DIR, dart_host_package),\r\n                extra_opts,\r\n            )\r\n        )\r\n    success = success and run_engine_tasks_in_parallel(tasks)\r\n```\r\n\r\n## [`.ci.yaml`](https:\/\/github.com\/flutter\/engine\/blob\/20037e385bda1c68668f86706f8e6568352cecf7\/.ci.yaml)\r\n\r\nEncodes:\r\n\r\n- How to run pre\/post-submit checks\r\n- Which _builder_ (i.e. `platform_debug`) to build and run tests for\r\n- Optional other arguments around timeouts, conditional runs, and conditional branches\r\n\r\nFor example:\r\n\r\n```yaml\r\n# Not a 1:1 reproduction.\r\ntargets:\r\n  - name: Linux linux_android_emulator_tests\r\n    enabled_branches:\r\n      - main\r\n    recipe: engine_v2\/engine_v2\r\n    properties:\r\n      config_name: linux_android_emulator\r\n      dependencies: >-\r\n        [\r\n          {\"dependency\": \"goldctl\", \"version\": \"git_revision:720a542f6fe4f92922c3b8f0fdcc4d2ac6bb83cd\"}\r\n        ]\r\n    timeout: 90\r\n    runIf:\r\n      - .ci.yaml\r\n      - ci\/builders\/linux_android_emulator.json\r\n      - DEPS\r\n      - lib\/ui\/**\r\n      - shell\/platform\/android\/**\r\n      - testing\/scenario_app\/**\r\n      - testing\/skia_gold_client\/**\r\n```\r\n\r\n# Proposal\r\n\r\nThere can be more than one proposal.\r\n\r\nOn end-state I _think_ we all agree that:\r\n\r\n- This (^) is not sustainable, we already run the risk of under-testing or over-testing;\r\n- We need to stop leaking implementation details about how builds and tests work across the entire repository;\r\n- We can \"know\", for a given platform, all possible build and test targets;\r\n- Our CI and local development process, as much as possible, uses the same workflows.\r\n\r\nAs a straw-man, you can imagine writing GN rules for every single build and test target (including non-C++), and just using GN throughout the system (behind the `et` tool). There might be other approaches worth considering (like our own metadata format), but we should keep the end state in mind.\r\n\r\nGoals:\r\n\r\n- Avoid divergence between CI and local development, that is, our `et` tool should be used in production;\r\n- Deliver incremental milestones that add value to the repo (instead of just more code), in other words, make users happy;\r\n- Have a kick-ass engine development workflow.","comments":[],"labels":["engine","c: proposal","P2","c: tech-debt","fyi-android","team-engine","triaged-engine","fyi-web","e: engine-tool"]},{"title":"Make visual debugger for partial repaint","body":"We have gotten bugs with the partial repaint like https:\/\/github.com\/flutter\/flutter\/issues\/144985.  It's hard to debug because the only visual feedback we get from the system is flickering.  Many systems will provide visual debuggers which will show which parts of the screen are getting repainted.  It would be nice to have that for flutter as well.","comments":[],"labels":["P3","team-engine","triaged-engine"]},{"title":"[CP] Run tests on iOS 17 exclusively ","body":"### Issue Link\n\nhttps:\/\/github.com\/flutter\/flutter\/issues\/144020\n\n### Target\n\nstable\n\n### PR Link\n\nhttps:\/\/github.com\/flutter\/flutter\/pull\/145181\n\n### Changelog Description\n\nRuns devicelab tests in Flutter CI on iOS 17 exclusively.\n\n### Impacted Users\n\nFlutter Release Team\n\n### Impact Description\n\nA majority of our devicelab devices are now on iOS 17. Before we can upgrade the remaining devices, stable must use iOS 17 devices. This should also improve times for the release branch since more devices will be available.\n\n### Workaround\n\nN\/A\n\n### Risk\n\nlow\n\n### Test Coverage\n\nyes\n\n### Validation Steps\n\n_No response_","comments":["Would @jmagman be the correct TL to evaluate this cherry pick request? Thank you!","This mostly impacts the release team, and @vashworth already checked with them. I approve!","Thank you! The PR itself https:\/\/github.com\/flutter\/flutter\/pull\/145181 might also need an approval too"],"labels":["cp: review","cp: approved"]},{"title":"[Impeller] determine correct behavior of entity pass bounds fractional values.","body":"See also: https:\/\/github.com\/flutter\/flutter\/issues\/144213\r\n\r\nWe added a roundOut to the bounds of entity passes, that resulted in odd behavior for blurs. This was better on master with the new blurs, but in theory it shouldn't happen.\r\n\r\nThis is a tracking issue to figure out what the right solution is that doesn't cause flickering of blurs.\r\n\r\nFYI @flar ","comments":["Possibly related to this:\r\n\r\nAfter https:\/\/github.com\/flutter\/engine\/commit\/622b37282f20e094cf43ff9f7485305199840121 I'm now seeing a one pixel line between the two halves of the square when running this app on a Pixel 6a or Pixel 7a:\r\n\r\n```\r\nimport 'package:flutter\/material.dart';\r\nimport 'dart:ui' as ui;\r\n\r\nvoid main() {\r\n  runApp(CustomPaint(\r\n      size: const Size(300, 300),\r\n      painter: TestPainter(),\r\n      child: Container(),\r\n  ));\r\n}\r\n\r\nclass TestPainter extends CustomPainter {\r\n  void paint(Canvas canvas, Size size) {\r\n    canvas.drawRect(Rect.fromLTRB(0, 0, 300, 300), Paint()..color = Color.fromARGB(255, 255, 0, 255));\r\n    canvas.saveLayer(Rect.fromLTRB(0, 0, 300, 300), Paint()..blendMode = BlendMode.srcOver);\r\n    canvas.drawRect(Rect.fromLTRB(0, 0, 150, 300), Paint()..color = Color.fromARGB(150, 0, 0, 255));\r\n    canvas.restore();\r\n    canvas.drawRect(Rect.fromLTRB(150, 0, 300, 300), Paint()..color = Color.fromARGB(150, 0, 0, 255));\r\n  }\r\n\r\n  bool shouldRepaint(covariant CustomPainter oldDelegate) => true;\r\n}\r\n```\r\n\r\nThe square renders with a consistent color if I add the round out of `subpass_coverage` back to `EntityPass::GetEntityForElement`."],"labels":["P2","e: impeller","team-engine","triaged-engine"]},{"title":"[pigeon] Generated swift code throws compile time error on recursive types","body":"Given an input of \r\n```class SKPaymentTransactionMessage {\r\n  SKPaymentTransactionMessage({\r\n    required this.payment,\r\n    required this.transactionState,\r\n    this.originalTransaction,\r\n    this.transactionTimeStamp,\r\n    this.transactionIdentifier,\r\n    this.error,\r\n  });\r\n\r\n  final SKPaymentMessage payment;\r\n  final SKPaymentTransactionStateMessage transactionState;\r\n  final SKPaymentTransactionMessage? originalTransaction;\r\n  final double? transactionTimeStamp;\r\n  final String? transactionIdentifier;\r\n  final SKErrorMessage? error;\r\n}\r\n```\r\n\r\n\r\nPigeon generates \r\n\r\n```\r\nstruct SKPaymentTransactionMessage {\r\n  var payment: SKPaymentMessage\r\n  var transactionState: SKPaymentTransactionStateMessage\r\n  var originalTransaction: SKPaymentTransactionMessage? = nil\r\n  var transactionTimeStamp: Double? = nil\r\n  var transactionIdentifier: String? = nil\r\n  var error: SKErrorMessage? = nil\r\n  \\\\ ...\r\n```\r\n\r\nHowever, the swift compiler will complain that \r\n`Value type 'SKPaymentTransactionMessage' cannot have a stored property that recursively contains it`\r\n\r\nI ran into this issue while I was trying to migrate in_app_purchase_storekit from obj-c to swift, and didn't have issues with recursive types when generating obj-c.\r\n\r\ncc @stuartmorgan ","comments":["From what I found in initial investigation, it looks this this is a fundamental limitation with `struct` in Swift (since it apparently uses inline storage of fields, so can't support recursion), and the standard approach seems to be to use classes instead when recursion is needed.\r\n\r\nWe can look at either switching to classes entirely, or if the ergonomics are similar enough between the two, only using classes when we detect this condition.\r\n\r\n\/cc @hellohuanlin for any input on idiomatic Swift (e.g., if mixing structs and classes would be an issue from a consistency standpoint).","This is a limitation of `struct` that it doesn't support \"indirect\" heap storage. Interestingly `indirect` has been supported by `enum`s for a long time, but not `struct`s. \r\n\r\nAn easy workaround is to use a class wrapper for the indirection: \r\n```\r\nstruct SKPaymentTransactionMessage {\r\n  var originalTransaction: MyWrapper?\r\n}\r\nclass MyWrapper { \/\/ <- ref type\r\n  let wrappee: SKPaymentTransactionMessage\r\n}\r\n```\r\n\r\nAlternatively, we can also use `enum` as a wrapper, something like: \r\n\r\n```\r\nstruct SKPaymentTransactionMessage {\r\n  var originalTransaction: MyWrapper?\r\n}\r\n\r\nindirect enum MyWrapper { \/\/ <- indirect keyword\r\n  case wrappee(wrappee: SKPaymentTransactionMessage)\r\n}\r\n```\r\n\r\nIf we use Swift 5.1+ (do we?), we can also use \"property wrapper\" to make the above more concise. ","What downsides would there be to just making the type itself a class instead of a struct when this happens, instead of adding a layer of indirection that clients need to deal with?","> What downsides would there be to just making the type itself a class instead of a struct when this happens, instead of adding a layer of indirection that clients need to deal with?\r\n\r\nI was thinking about the workaround without changing pigeon. Otherwise I agree it's better to just use a class so clients don't have to deal with this. \r\n\r\nThe downside is that we lose the value semantics and some nice features (e.g. immutability & copy-on-write, auto synthesized methods); \r\n\r\nThe upside is that classes are less costly. Structs\/enums had major performance overhead at early version of swift. It has improved a lot since then but still come with extra overhead. ","@tarrinneal FYI. Marking as P1 since I don't see a good project-level workaround. We can try using class only when necessary and see how inconsistent it is, and decide from there whether to just change everything.","To piggy back on to this issue, making the structs classes would also allow for objc interop, since the @objc attribute can only be added to classes that inherit from NSObject. ","> We can try using class only when necessary and see how inconsistent it is\r\n\r\nNote that the same type could be nested at a deeper level, so this probably requires some sort of traversal (feels like an interesting leetcode problem).\r\n```\r\n      A\r\n    \/ | \\\r\n   B  C  D\r\n  \/ \\\r\n  E A (here)\r\n```\r\nIf this is turns out hard to do, I think it's fine to just use class for everything. \r\n\r\n"],"labels":["package","team-ecosystem","p: pigeon","P1","triaged-ecosystem"]},{"title":"[shared_preferences] Update mockito to the new version available -> 5.2.0","body":"### Steps to reproduce\n\n`gradle(task: \"build\", flags: \"--stacktrace -x test\")`\n\n### Expected results\n\nBuild success\n\n### Actual results\n\n```\r\n Error: A newer version of org.mockito:mockito-inline than 5.0.0 is available: 5.2.0 [NewerVersionAvailable]\r\n        testImplementation 'org.mockito:mockito-inline:5.0.0'\r\n```\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.16.9, on macOS 14.2.1 23C71 darwin-arm64, locale en-US)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2023.2)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (4 available)\r\n    ! Error: Browsing on the local area network for Ivan\u2019s iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n[\u2713] Network resources\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":[],"labels":["platform-android","p: shared_preferences","package","team-android"]},{"title":"Document engine graphics testing matrix","body":"Document the various approaches how the engine's graphics output will be tested, at AIKS level, at dart:ui level, at the embedding level, at the framework level. What backends and software\/hardware renderers will be tested. Which repo each of the options should live in which options are available to the users for writing their own tests vs options are meant for engine developers. ","comments":[],"labels":["engine","d: api docs","d: wiki","P2","team-engine","triaged-engine"]},{"title":"Getting Abnormal crashes in iOS in Latest Version in real device","body":"### Steps to reproduce\r\n\r\nNA\r\n\r\n### Expected results\r\n\r\nIt should not crash\r\n\r\n### Actual results\r\n\r\nIt  should not crash\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\nLog when launch\r\n```console\r\n(lldb) 2024-03-14 22:21:03.607294+0530 Runner[695:97652] [ERROR:flutter\/shell\/platform\/darwin\/graphics\/FlutterDarwinContextMetalImpeller.mm(42)] Using the Impeller rendering backend.\r\n```\r\n\r\nLog 1: \r\n```console\r\n* thread #18, name = 'io.worker.5', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\r\n    frame #0: 0x000000010b42e718 Flutter`flutter::ImpellerAllocator::allocPixelRef(SkBitmap*) + 164\r\nFlutter`flutter::ImpellerAllocator::allocPixelRef:\r\n->  0x10b42e718 <+164>: ldr    x8, [x0]\r\n    0x10b42e71c <+168>: ldr    x8, [x8, #0x30]\r\n    0x10b42e720 <+172>: blr    x8\r\n    0x10b42e724 <+176>: adrp   x8, 7340\r\nTarget 0: (Runner) stopped.\r\n\r\n```\r\n\r\nLog 2: \r\n```console\r\n..\/..\/third_party\/dart\/runtime\/vm\/zone.cc: 96: error: Out of memory.\r\nversion=3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on \"ios_arm64\"\r\npid=602, thread=40707, isolate_group=main(0x10906b400), isolate=(nil)(0x0)\r\nos=ios, arch=arm64, comp=no, sim=no\r\nisolate_instructions=10ae7f5e0, vm_instructions=10ae7f5e0\r\n pc 0x000000010b8a0f64 fp 0x000000016c88fff0 Dart_DumpNativeStackTrace+0x18\r\n  pc 0x000000010b44b430 fp 0x000000016c890010 dart::Assert::Fail(char const*, ...) const+0x30\r\n  pc 0x000000010b63ae90 fp 0x000000016c890060 dart::Zone::Segment::New(long, dart::Zone::Segment*)+0x104\r\n  pc 0x000000010b7147ec fp 0x000000016c8900b0 dart::BaseGrowableArray<dart::Definition*, dart::ZoneAllocated, dart::Zone>::BaseGrowableArray(long, dart::Zone*)+0xec\r\n  pc 0x000000010b754c80 fp 0x000000016c8905c0 dart::LoadOptimizer::Optimize()+0x1870\r\n  pc 0x000000010b750878 fp 0x000000016c8907a0 dart::LoadOptimizer::OptimizeGraph(dart::FlowGraph*)+0x848\r\n  pc 0x000000010b77abac fp 0x000000016c890800 dart::CompilerPass_CSE::DoBody(dart::CompilerPassState*) const+0x38\r\n pc 0x000000010b780b8c fp 0x000000016c8908f0 dart::CompilerPass::Run(dart::CompilerPassState*) const+0x134\r\n  pc 0x000000010b640918 fp 0x000000016c8914a0 dart::CompileParsedFunctionHelper::Compile(dart::CompilationPipeline*)+0xccc\r\n  pc 0x000000010b642a00 fp 0x000000016c891c00 dart::CompileFunctionHelper(dart::CompilationPipeline*, dart::Function const&, bool, long)+0x6f0\r\n pc 0x000000010b643368 fp 0x000000016c891ca0 dart::Compiler::CompileOptimizedFunction(dart::Thread*, dart::Function const&, long)+0x234\r\n  pc 0x000000010b6443b8 fp 0x000000016c892640 dart::BackgroundCompilerTask::Run()+0x1a0\r\npc 0x000000010b627fe0 fp 0x000000016c892b40 dart::ThreadPool::Worker::Main(unsigned long)+0x18c\r\npc 0x000000010b5963b0 fp 0x000000016c892fc0 dart::ThreadStart(void*)+0x138\r\n  pc 0x00000001fcf4b0ec fp 0x000000016c892fe0 _pthread_start+0x74\r\n-- End of DumpStackTrace\r\n=== Crash occurred when compiling dart:core_RegExp_^([+-]?\\d{4,6})-?(\\d\\d)-?(\\d\\d)(?_[ T](\\d\\d)(?__?(\\d\\d)(?__?(\\d\\d)(?_[.,](\\d+))?)?)?( ?[zZ]| ?([-+])(\\d\\d)(?__?(\\d\\d))?)?)?$ in optimizing JIT mode in CSE pass\r\n..\/..\/third_party\/dart\/runtime\/vm\/zone.cc: 96: error: Out of memory.\r\nAborting reentrant request for stack trace.\r\n* thread #25, name = 'DartWorker', stop reason = signal SIGABRT\r\n    frame #0: 0x00000001ed9ca198 libsystem_kernel.dylib`__pthread_kill + 8\r\nlibsystem_kernel.dylib`:\r\n->  0x1ed9ca198 <+8>:  b.lo   0x1ed9ca1b4               ; <+36>\r\n    0x1ed9ca19c <+12>: stp    x29, x30, [sp, #-0x10]!\r\n    0x1ed9ca1a0 <+16>: mov    x29, sp\r\n    0x1ed9ca1a4 <+20>: bl     0x1ed9c5b70               ; cerror_nocancel\r\nTarget 0: (Runner) stopped.\r\n```\r\nLog 3\r\n```console\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not wrap resolve texture.\r\n* thread #10, name = 'io.flutter.1.raster', stop reason = EXC_BAD_ACCESS (code=1, address=0xb8)\r\n    frame #0: 0x0000000107d06928 Flutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>, std::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&, flutter::DlCanvas*)>::operator()(flutter::SurfaceFrame&, flutter::DlCanvas*&&) + 688\r\nFlutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>, std::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&, flutter::DlCanvas*)>::operator():\r\n->  0x107d06928 <+688>: ldr    x0, [x19, #0xb8]\r\n    0x107d0692c <+692>: ldr    x8, [x0]\r\n    0x107d06930 <+696>: ldr    x8, [x8, #0x20]\r\n    0x107d06934 <+700>: blr    x8\r\nTarget 0: (Runner) stopped.\r\n\r\n```\r\nLog 4\r\n```console\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\n[GoRouter] popping \/myProfile\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[CAMetalLayer nextDrawable] returning nil because allocation failed.\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not acquire current drawable.\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\nIOSurface creation failed: e00002bd parentID: 00000000 properties: {\r\n    IOSurfaceAllocSize = 22462464;\r\n    IOSurfaceBytesPerElement = 8;\r\n    IOSurfaceBytesPerRow = 9216;\r\n    IOSurfaceCacheMode = 1024;\r\n    IOSurfaceHeight = 2436;\r\n    IOSurfaceMapCacheAttribute = 0;\r\n    IOSurfaceName = QuartzCore;\r\n    IOSurfacePixelFormat = 1380411457;\r\n    IOSurfacePixelSizeCastingAllowed = 0;\r\n    IOSurfaceWidth = 1125;\r\n}\r\n[Utilities] CAIOSurfaceCreate: failed to allocate IOSurface (size: 1125 x 2436, format: RGhA)\r\n[ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not wrap resolve texture.\r\n* thread #10, name = 'io.flutter.1.raster', stop reason = EXC_BAD_ACCESS (code=1, address=0xb8)\r\n    frame #0: 0x000000010b9da928 Flutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>, std::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&, flutter::DlCanvas*)>::operator()(flutter::SurfaceFrame&, flutter::DlCanvas*&&) + 688\r\nFlutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>, std::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&, flutter::DlCanvas*)>::operator():\r\n->  0x10b9da928 <+688>: ldr    x0, [x19, #0xb8]\r\n    0x10b9da92c <+692>: ldr    x8, [x0]\r\n    0x10b9da930 <+696>: ldr    x8, [x8, #0x20]\r\n    0x10b9da934 <+700>: blr    x8\r\nTarget 0: (Runner) stopped.\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en-IN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/codezeros\/Documents\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (7 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/codezeros\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.84.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 iPhone X (mobile)      \u2022 ff0a66650d504e523dd91a16142191ba15b5f56d \u2022 ios            \u2022 iOS 16.7.6 20H320\r\n    \u2022 iPhone 15 Pro (mobile) \u2022 52EF47D4-AC3F-4FF6-821F-23BE1B81EF82     \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4 (simulator)\r\n    \u2022 macOS (desktop)        \u2022 macos                                    \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)           \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.128\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["@jonahwilliams \r\nPlease provide solution ASAP as we are near to production release of our application.\r\nthis issue suddenly started in last 2 days","<img width=\"1723\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/24727823\/5a32a290-18c9-4eb4-b764-9ade0082508c\">\r\n","@chinmaygarde ","We're happy to look at bug reports but we do not provide technical support with any SLA.  Can you please clarify which error you are filling this bug for?","For example: two of these are heap exhaustion errors. We cannot do anything about that.","one seems to be a missing null check, we can definitely fix that","> We're happy to look at bug reports but we do not provide technical support with any SLA. Can you please clarify which error you are filling this bug for?\r\n\r\nI am not able to track as this is only happening in iOS real device and not in android and not in iOS simulator\r\nAlso same code was working before upgrading 3.19.3","@kishangohel Does the crash occur when you run app in release mode? Please share the output of `flutter run -v` (If the log is too large to be uploaded to GitHub, you may upload it as a txt file or use online tools like https:\/\/pastebin.com\/ to share it)\r\n\r\n","> @kishangohel Does the crash occur when you run app in release mode? Please share the output of `flutter run -v` (If the log is too large to be uploaded to GitHub, you may upload it as a txt file or use online tools like https:\/\/pastebin.com\/ to share it)\r\n\r\nSure will provides detail logs as per your request by EOD","> @kishangohel Does the crash occur when you run app in release mode? Please share the output of `flutter run -v` (If the log is too large to be uploaded to GitHub, you may upload it as a txt file or use online tools like https:\/\/pastebin.com\/ to share it)\r\n\r\n@huycozy please check below logs\r\n\r\n```console\r\n[ +960 ms] [ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: Could not wrap resolve texture.\r\n[  +84 ms] Process 1058 stopped\r\n[   +2 ms] * thread #10, name = 'io.flutter.1.raster', stop reason = EXC_BAD_ACCESS (code=1, address=0xb8)\r\n[        ]     frame #0: 0x0000000109ca6928 Flutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>,\r\nstd::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&,\r\nflutter::DlCanvas*)>::operator()(flutter::SurfaceFrame&, flutter::DlCanvas*&&) + 688\r\n[        ] Flutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>,\r\nstd::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&, flutter::DlCanvas*)>::operator():\r\n[        ] ->  0x109ca6928 <+688>: ldr    x0, [x19, #0xb8]\r\n[        ]     0x109ca692c <+692>: ldr    x8, [x0]\r\n[        ]     0x109ca6930 <+696>: ldr    x8, [x8, #0x20]\r\n[        ]     0x109ca6934 <+700>: blr    x8\r\n[        ] Target 0: (Runner) stopped.\r\n[        ] thread backtrace all\r\n[        ] process detach\r\n[ +787 ms]   thread #1, queue = 'com.apple.main-thread'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[        ]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x000000020ebb9998 GraphicsServices`GSEventRunModal + 160\r\n[        ]     frame #8: 0x00000001d8d80448 UIKitCore`-[UIApplication _run] + 868\r\n[        ]     frame #9: 0x00000001d8d800c0 UIKitCore`UIApplicationMain + 312\r\n[        ]     frame #10: 0x0000000102dece68 Runner`main at AppDelegate.swift:5:13\r\n[        ]     frame #11: 0x00000001f42a8344 dyld`start + 1860\r\n[        ]   thread #6, name = 'com.apple.uikit.eventfetch-thread'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[        ]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x00000001d0e3c0e8 Foundation`-[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 208\r\n[        ]     frame #8: 0x00000001d0e3bfe4 Foundation`-[NSRunLoop(NSRunLoop) runUntilDate:] + 60\r\n[        ]     frame #9: 0x00000001d8ea2914 UIKitCore`-[UIEventFetcher threadMain] + 404\r\n[        ]     frame #10: 0x00000001d0e53c4c Foundation`__NSThread__start__ + 704\r\n[        ]     frame #11: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #7\r\n[        ]     frame #0: 0x00000002122954f0 libsystem_kernel.dylib`__workq_kernreturn + 8\r\n[        ]   thread #9, name = 'io.flutter.1.ui'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[        ]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x00000001099bb1d0 Flutter`fml::MessageLoopDarwin::Run() + 88\r\n[        ]     frame #8: 0x00000001099b9ca4 Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::Thread::Thread(std::_fl::function<void (fml::Thread::ThreadConfig const&)> const&, fml::Thread::ThreadConfig const&)::$_0>>(void*) + 208\r\n[        ]     frame #9: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ] * thread #10, name = 'io.flutter.1.raster', stop reason = EXC_BAD_ACCESS (code=1, address=0xb8)\r\n[        ]   * frame #0: 0x0000000109ca6928 Flutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>,\r\nstd::_fl::allocator<fml::internal::CopyableLambda<flutter::GPUSurfaceMetalImpeller::AcquireFrameFromCAMetalLayer(SkISize const&)::$_0>>, bool (flutter::SurfaceFrame&,\r\nflutter::DlCanvas*)>::operator()(flutter::SurfaceFrame&, flutter::DlCanvas*&&) + 688\r\n[        ]     frame #1: 0x0000000109b8a4d8 Flutter`flutter::SurfaceFrame::Submit() + 92\r\n[        ]     frame #2: 0x0000000109ac42a8 Flutter`flutter::Rasterizer::DrawToSurfacesUnsafe(flutter::FrameTimingsRecorder&, std::_fl::vector<std::_fl::unique_ptr<flutter::LayerTreeTask,\r\nstd::_fl::default_delete<flutter::LayerTreeTask>>, std::_fl::allocator<std::_fl::unique_ptr<flutter::LayerTreeTask, std::_fl::default_delete<flutter::LayerTreeTask>>>>) + 1832\r\n[   +1 ms]     frame #3: 0x0000000109ac5040 Flutter`std::_fl::__function::__func<flutter::Rasterizer::DrawToSurfaces(flutter::FrameTimingsRecorder&,\r\nstd::_fl::vector<std::_fl::unique_ptr<flutter::LayerTreeTask, std::_fl::default_delete<flutter::LayerTreeTask>>, std::_fl::allocator<std::_fl::unique_ptr<flutter::LayerTreeTask,\r\nstd::_fl::default_delete<flutter::LayerTreeTask>>>>)::$_1, std::_fl::allocator<flutter::Rasterizer::DrawToSurfaces(flutter::FrameTimingsRecorder&,\r\nstd::_fl::vector<std::_fl::unique_ptr<flutter::LayerTreeTask, std::_fl::default_delete<flutter::LayerTreeTask>>, std::_fl::allocator<std::_fl::unique_ptr<flutter::LayerTreeTask,\r\nstd::_fl::default_delete<flutter::LayerTreeTask>>>>)::$_1>, void ()>::operator()() + 64\r\n[        ]     frame #4: 0x00000001099b8720 Flutter`fml::SyncSwitch::Execute(fml::SyncSwitch::Handlers const&) const + 72\r\n[        ]     frame #5: 0x0000000109ac39c0 Flutter`flutter::Rasterizer::DrawToSurfaces(flutter::FrameTimingsRecorder&, std::_fl::vector<std::_fl::unique_ptr<flutter::LayerTreeTask,\r\nstd::_fl::default_delete<flutter::LayerTreeTask>>, std::_fl::allocator<std::_fl::unique_ptr<flutter::LayerTreeTask, std::_fl::default_delete<flutter::LayerTreeTask>>>>) + 364\r\n[        ]     frame #6: 0x0000000109ac5ed8 Flutter`std::_fl::__function::__func<flutter::Rasterizer::Draw(std::_fl::shared_ptr<flutter::Pipeline<flutter::FrameItem>> const&)::$_0,\r\nstd::_fl::allocator<flutter::Rasterizer::Draw(std::_fl::shared_ptr<flutter::Pipeline<flutter::FrameItem>> const&)::$_0>, void (std::_fl::unique_ptr<flutter::FrameItem,\r\nstd::_fl::default_delete<flutter::FrameItem>>)>::operator()(std::_fl::unique_ptr<flutter::FrameItem, std::_fl::default_delete<flutter::FrameItem>>&&) + 208\r\n[        ]     frame #7: 0x0000000109ac56f0 Flutter`flutter::Rasterizer::Draw(std::_fl::shared_ptr<flutter::Pipeline<flutter::FrameItem>> const&) + 452\r\n[  +25 ms]     frame #8: 0x0000000109ade770\r\nFlutter`std::_fl::__function::__func<fml::internal::CopyableLambda<flutter::Shell::OnAnimatorDraw(std::_fl::shared_ptr<flutter::Pipeline<flutter::FrameItem>>)::$_0>,\r\nstd::_fl::allocator<fml::internal::CopyableLambda<flutter::Shell::OnAnimatorDraw(std::_fl::shared_ptr<flutter::Pipeline<flutter::FrameItem>>)::$_0>>, void ()>::operator()() + 168\r\n[        ]     frame #9: 0x00000001099b6d8c Flutter`fml::MessageLoopImpl::FlushTasks(fml::FlushType) + 568\r\n[        ]     frame #10: 0x00000001099bb0e4 Flutter`fml::MessageLoopDarwin::OnTimerFire(__CFRunLoopTimer*, fml::MessageLoopDarwin*) + 32\r\n[        ]     frame #11: 0x00000001d6b35bb0 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 28\r\n[        ]     frame #12: 0x00000001d6af6de4 CoreFoundation`__CFRunLoopDoTimer + 884\r\n[        ]     frame #13: 0x00000001d6aa00fc CoreFoundation`__CFRunLoopDoTimers + 284\r\n[        ]     frame #14: 0x00000001d6ae95bc CoreFoundation`__CFRunLoopRun + 1940\r\n[        ]     frame #15: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #16: 0x00000001099bb1d0 Flutter`fml::MessageLoopDarwin::Run() + 88\r\n[        ]     frame #17: 0x00000001099b9ca4 Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::Thread::Thread(std::_fl::function<void (fml::Thread::ThreadConfig const&)> const&, fml::Thread::ThreadConfig const&)::$_0>>(void*) + 208\r\n[        ]     frame #18: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #11, name = 'io.flutter.1.io'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[        ]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x00000001099bb1d0 Flutter`fml::MessageLoopDarwin::Run() + 88\r\n[        ]     frame #8: 0x00000001099b9ca4 Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::Thread::Thread(std::_fl::function<void (fml::Thread::ThreadConfig const&)> const&, fml::Thread::ThreadConfig const&)::$_0>>(void*) + 208\r\n[        ]     frame #9: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #12, name = 'io.flutter.1.profiler'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[  +26 ms]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x00000001099bb1d0 Flutter`fml::MessageLoopDarwin::Run() + 88\r\n[        ]     frame #8: 0x00000001099b9ca4 Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::Thread::Thread(std::_fl::function<void (fml::Thread::ThreadConfig const&)> const&, fml::Thread::ThreadConfig const&)::$_0>>(void*) + 208\r\n[        ]     frame #9: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #13, name = 'io.worker.1'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #14, name = 'io.worker.2'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #15, name = 'io.worker.3'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #16, name = 'io.worker.4'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[  +16 ms]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #17, name = 'io.worker.5'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #18, name = 'io.worker.6'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #19, name = 'dart:io EventHandler'\r\n[        ]     frame #0: 0x0000000212296800 libsystem_kernel.dylib`kevent + 8\r\n[        ]     frame #1: 0x0000000109c53c04 Flutter`dart::bin::EventHandlerImplementation::EventHandlerEntry(unsigned long) + 408\r\n[        ]     frame #2: 0x0000000109c81ac0 Flutter`dart::bin::ThreadStart(void*) + 88\r\n[        ]     frame #3: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #20, name = 'Dart Profiler ThreadInterrupter'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e83190 Flutter`dart::ThreadInterrupter::ThreadMain(unsigned long) + 420\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #21, name = 'Dart Profiler SampleBlockProcessor'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df5760 Flutter`dart::SampleBlockProcessor::ThreadMain(unsigned long) + 228\r\n[        ]     frame #3: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #22, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #23, name = 'io.worker.1'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[  +14 ms]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #24, name = 'io.worker.2'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #25, name = 'io.worker.3'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #26, name = 'io.worker.4'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f60c libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1220\r\n[        ]     frame #2: 0x0000000109726714 Flutter`std::_fl::condition_variable::wait(std::_fl::unique_lock<std::_fl::mutex>&) + 20\r\n[        ]     frame #3: 0x00000001099b3f4c Flutter`void* std::_fl::__thread_proxy[abi:v15000]<std::_fl::tuple<std::_fl::unique_ptr<std::_fl::__thread_struct,\r\nstd::_fl::default_delete<std::_fl::__thread_struct>>, fml::ConcurrentMessageLoop::ConcurrentMessageLoop(unsigned long)::$_0>>(void*) + 332\r\n[        ]     frame #4: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #27, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #28, name = 'DartWorker'\r\n[  +13 ms]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #30, name = 'com.apple.CFSocket.private'\r\n[        ]     frame #0: 0x0000000212295af8 libsystem_kernel.dylib`__select + 8\r\n[        ]     frame #1: 0x00000001d6b330bc CoreFoundation`__CFSocketManager + 624\r\n[        ]     frame #2: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #31, name = 'com.apple.NSURLConnectionLoader'\r\n[        ]     frame #0: 0x0000000212295030 libsystem_kernel.dylib`mach_msg2_trap + 8\r\n[        ]     frame #1: 0x00000002122a6b18 libsystem_kernel.dylib`mach_msg2_internal + 76\r\n[        ]     frame #2: 0x00000002122a6db8 libsystem_kernel.dylib`mach_msg_overwrite + 484\r\n[        ]     frame #3: 0x0000000212295524 libsystem_kernel.dylib`mach_msg + 20\r\n[        ]     frame #4: 0x00000001d6ae8148 CoreFoundation`__CFRunLoopServiceMachPort + 156\r\n[        ]     frame #5: 0x00000001d6ae92e0 CoreFoundation`__CFRunLoopRun + 1208\r\n[        ]     frame #6: 0x00000001d6aedd20 CoreFoundation`CFRunLoopRunSpecific + 584\r\n[        ]     frame #7: 0x00000001d7c6d510 CFNetwork`___lldb_unnamed_symbol14150 + 344\r\n[        ]     frame #8: 0x00000001d0e53c4c Foundation`__NSThread__start__ + 704\r\n[        ]     frame #9: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #32, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #33, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #34, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #35, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[  +10 ms]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #36, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #37, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #38, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #39, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212295f3c libsystem_kernel.dylib`__psynch_mutexwait + 8\r\n[        ]     frame #1: 0x0000000221829620 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 80\r\n[        ]     frame #2: 0x0000000221820304 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow$VARIANT$armv81 + 244\r\n[        ]     frame #3: 0x0000000103e26970 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 232\r\n[        ]     frame #4: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #5: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #6: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #8: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #40, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212295f3c libsystem_kernel.dylib`__psynch_mutexwait + 8\r\n[        ]     frame #1: 0x0000000221829620 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 80\r\n[        ]     frame #2: 0x0000000221820304 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow$VARIANT$armv81 + 244\r\n[        ]     frame #3: 0x0000000103e26970 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 232\r\n[        ]     frame #4: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #5: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #6: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #8: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #41, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212295f3c libsystem_kernel.dylib`__psynch_mutexwait + 8\r\n[        ]     frame #1: 0x0000000221829620 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 80\r\n[        ]     frame #2: 0x0000000221820304 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow$VARIANT$armv81 + 244\r\n[        ]     frame #3: 0x0000000103e26970 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 232\r\n[        ]     frame #4: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #5: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #6: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #8: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #42, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212295f3c libsystem_kernel.dylib`__psynch_mutexwait + 8\r\n[        ]     frame #1: 0x0000000221829620 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 80\r\n[        ]     frame #2: 0x0000000221820304 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow$VARIANT$armv81 + 244\r\n[        ]     frame #3: 0x0000000103e26970 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 232\r\n[        ]     frame #4: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #5: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #6: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #8: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #43, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212295f3c libsystem_kernel.dylib`__psynch_mutexwait + 8\r\n[        ]     frame #1: 0x0000000221829620 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 80\r\n[        ]     frame #2: 0x0000000221820304 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow$VARIANT$armv81 + 244\r\n[        ]     frame #3: 0x0000000103e26970 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 232\r\n[        ]     frame #4: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #5: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #6: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #8: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #44, name = 'isarworker'\r\n[        ]     frame #0: 0x0000000212294fac libsystem_kernel.dylib`semaphore_wait_trap + 8\r\n[        ]     frame #1: 0x00000001dd7f2d24 libdispatch.dylib`_dispatch_sema4_wait$VARIANT$armv81 + 24\r\n[        ]     frame #2: 0x00000001dd7f3360 libdispatch.dylib`_dispatch_semaphore_wait_slow + 128\r\n[        ]     frame #3: 0x0000000103e2823c isar_flutter_libs`std::sync::mpmc::context::Context::with::_$u7b$$u7b$closure$u7d$$u7d$::hb62d9b976498f04a + 524\r\n[        ]     frame #4: 0x0000000103e26b30 isar_flutter_libs`std::sys_common::backtrace::__rust_begin_short_backtrace::hebc00478cea1f75c + 680\r\n[        ]     frame #5: 0x0000000103e266c4 isar_flutter_libs`core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hbecbc630c0dfe64e + 236\r\n[        ]     frame #6: 0x0000000103e26210 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h70f01d9925905c85 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #7: 0x0000000103e26204 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b [inlined]\r\n_$LT$alloc..boxed..Box$LT$F$C$A$GT$$u20$as$u20$core..ops..function..FnOnce$LT$Args$GT$$GT$::call_once::h5a23620d2f168ea0 at boxed.rs:1988:9 [opt]\r\n[        ]     frame #8: 0x0000000103e26200 isar_flutter_libs`std::sys::unix::thread::Thread::new::thread_start::hffff04f13987e13b at thread.rs:108:17 [opt]\r\n[        ]     frame #9: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #45\r\n[        ]     frame #0: 0x00000002122954f0 libsystem_kernel.dylib`__workq_kernreturn + 8\r\n[        ]   thread #46, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109d1b59c Flutter`dart::MutatorThreadPool::OnEnterIdleLocked(dart::MonitorLocker*) + 472\r\n[        ]     frame #4: 0x0000000109e84124 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 720\r\n[        ]     frame #5: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #6: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #47, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #48, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #49, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #50, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #51, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #52\r\n[        ]     frame #0: 0x00000002122954f0 libsystem_kernel.dylib`__workq_kernreturn + 8\r\n[        ]   thread #53, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #54, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109d1b59c Flutter`dart::MutatorThreadPool::OnEnterIdleLocked(dart::MonitorLocker*) + 472\r\n[        ]     frame #4: 0x0000000109e84124 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 720\r\n[        ]     frame #5: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #6: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ]   thread #55, name = 'DartWorker'\r\n[        ]     frame #0: 0x000000021229587c libsystem_kernel.dylib`__psynch_cvwait + 8\r\n[        ]     frame #1: 0x000000022181f638 libsystem_pthread.dylib`_pthread_cond_wait$VARIANT$armv81 + 1264\r\n[        ]     frame #2: 0x0000000109df29f4 Flutter`dart::Monitor::WaitMicros(long long) + 128\r\n[        ]     frame #3: 0x0000000109e840f0 Flutter`dart::ThreadPool::Worker::Main(unsigned long) + 668\r\n[        ]     frame #4: 0x0000000109df23b0 Flutter`dart::ThreadStart(void*) + 312\r\n[        ]     frame #5: 0x00000002218200ec libsystem_pthread.dylib`_pthread_start + 116\r\n[        ] (lldb) Process 1058 detached\r\n[   +2 ms] (lldb) \r\n[        ] ios-deploy exited with code 0\r\n[   +3 ms] Service protocol connection closed.\r\n[        ] Lost connection to device.\r\n[        ] DevFS: Deleting filesystem on the device (file:\/\/\/private\/var\/mobile\/Containers\/Data\/Application\/FF250A6A-6335-45B6-A9B1-C357A0BC6B45\/tmp\/zizleqMuD0D\/zizle\/)\r\n[ +253 ms] Ignored error while cleaning up DevFS: TimeoutException after 0:00:00.250000: Future not completed\r\n\r\n[   +3 ms] \"flutter run\" took 2,65,811ms.\r\n[ +184 ms] ensureAnalyticsSent: 181ms\r\n[        ] Running 1 shutdown hook\r\n[  +28 ms] Shutdown hooks complete\r\n[        ] exiting with code 0\r\n\r\n```","@huycozy @jonahwilliams \r\nFYI\r\nCrashing happens only on Older Devices \r\nTested Devices: iPhone X, iPhone 7 Plus, iPhone 11","Thanks for the update. Your stack trace is somewhat similar to https:\/\/github.com\/flutter\/flutter\/issues\/140189. Labeling the issue for the team's input. ","So far all we've seen here that is fixable is the missing null check. However, we do not have enough information to determine why your application is running out of memory. That could be an app specific problem that we can't really help with.","That is, we'd need some kind of repro","> So far all we've seen here that is fixable is the missing null check. However, we do not have enough information to determine why your application is running out of memory. That could be an app specific problem that we can't really help with.\r\n\r\nNo issue with same code on iPhone 13,14,15 plus\/pro\/pro max"],"labels":["c: crash","platform-ios","engine","P1","team-engine","triaged-engine"]},{"title":"Android system back button with nested Navigator inside GoRouter unexpected navigator is used","body":"### Steps to reproduce\n\n1. Run the code\r\n2. Copy the actions on the video\n\n### Expected results\n\nWhen clicking android system button it should take the nearest navigator on the tree from the current screen as it is done on the iOS platform\n\n### Actual results\n\nBut when we using android system back button we face the problem, that GoRoute's navigator is used to pop, instead of deeper one, which was created by us\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter_hooks\/flutter_hooks.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends HookWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final goRouter = useMemoized(\r\n      () => GoRouter(\r\n        initialLocation: '\/1',\r\n        routes: [\r\n          GoRoute(\r\n            path: '\/1',\r\n            builder: (context, state) => Navigator(\r\n              onPopPage: (route, result) => route.didPop(result),\r\n              pages: const [\r\n                MaterialPage(\r\n                    child: Screen(\r\n                  text: '1',\r\n                )),\r\n              ],\r\n            ),\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n    return MaterialApp.router(\r\n      routerConfig: goRouter,\r\n    );\r\n  }\r\n}\r\n\r\nclass Screen extends StatelessWidget {\r\n  const Screen({super.key, required this.text});\r\n\r\n  final String text;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            Text(\r\n              text,\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).push(\r\n                  MaterialPageRoute(\r\n                    builder: (context) => Screen(text: '$text nested'),\r\n                  ),\r\n                );\r\n              },\r\n              child: const Text('go to the nested page'),\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pop();\r\n              },\r\n              child: const Text('go back'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/52509435\/1b74d166-a728-4719-9648-5b299de199a3\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/52509435\/111612dc-685a-43ca-a259-29caa2497fd8\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nnot applicable\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.4 23E214 darwin-arm64, locale en-PL)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.3)\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.2.5)\r\n[\u2713] VS Code (version 1.87.1)\r\n[\u2713] Connected device (4 available)\r\n[\u2713] Network resources\r\n\r\n\u2022 No issues found!```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I can also reproduce this issue on Android. May be related: https:\/\/github.com\/flutter\/flutter\/issues\/139398.\r\n\r\n<details>\r\n<summary>Sample code (without using 3rd package)<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final goRouter = GoRouter(\r\n      initialLocation: '\/1',\r\n      routes: [\r\n        GoRoute(\r\n          path: '\/1',\r\n          builder: (context, state) => Navigator(\r\n            onPopPage: (route, result) => route.didPop(result),\r\n            pages: const [\r\n              MaterialPage(\r\n                  child: Screen(\r\n                text: '1',\r\n              )),\r\n            ],\r\n          ),\r\n        ),\r\n      ],\r\n    );\r\n    return MaterialApp.router(\r\n      routerConfig: goRouter,\r\n    );\r\n  }\r\n}\r\n\r\nclass Screen extends StatelessWidget {\r\n  const Screen({super.key, required this.text});\r\n\r\n  final String text;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            Text(\r\n              text,\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).push(\r\n                  MaterialPageRoute(\r\n                    builder: (context) => Screen(text: '$text nested'),\r\n                  ),\r\n                );\r\n              },\r\n              child: const Text('go to the nested page'),\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pop();\r\n              },\r\n              child: const Text('go back'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9b276be7fe (2 hours ago), 2024-03-14 21:46:36 -0400\r\n    \u2022 Engine revision 995d8903e0\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-234.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","@huycozy \r\nI've tried it with Navigator instead of GoRouter, and problem still the same, so I guess problem is not in the GoRouter, but with system Android Back button\/right swipe flutter event handling. \r\n\r\nIt seems if any nested Navigator is added, it is ignored by these system \"go back\" events on android and only MaterialApp navigator is used to handle this action\r\n\r\n```dart\r\nimport 'package:flutter\/foundation.dart';\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp.router(\r\n      routerDelegate: MyRouterDelegate(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyRouterDelegate extends RouterDelegate<Object>\r\n    with ChangeNotifier, PopNavigatorRouterDelegateMixin<Object> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Navigator(\r\n      key: navigatorKey,\r\n      pages: const [\r\n        MaterialPage(\r\n          child: Screen(\r\n            text: '1',\r\n          ),\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n\r\n  @override\r\n  GlobalKey<NavigatorState>? get navigatorKey => GlobalKey();\r\n\r\n  @override\r\n  Future<void> setNewRoutePath(void configuration) => SynchronousFuture(null);\r\n}\r\n\r\nclass Screen extends StatelessWidget {\r\n  const Screen({super.key, required this.text});\r\n\r\n  final String text;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            Text(\r\n              text,\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).push(\r\n                  MaterialPageRoute(\r\n                    builder: (context) => Screen(text: '$text nested'),\r\n                  ),\r\n                );\r\n              },\r\n              child: const Text('go to the nested page'),\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pop();\r\n              },\r\n              child: const Text('go back'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n``` ","Thanks for checking that. Forwarding this to android team.","> @huycozy I've tried it with Navigator instead of GoRouter, and problem still the same, so I guess problem is not in the GoRouter, but with system Android Back button\/right swipe flutter event handling.\r\n> \r\n> It seems if any nested Navigator is added, it is ignored by these system \"go back\" events on android and only MaterialApp navigator is used to handle this action\r\n> \r\n> ```dart\r\n> import 'package:flutter\/foundation.dart';\r\n> import 'package:flutter\/material.dart';\r\n> \r\n> void main() {\r\n>   runApp(const MyApp());\r\n> }\r\n> \r\n> class MyApp extends StatelessWidget {\r\n>   const MyApp({super.key});\r\n> \r\n>   @override\r\n>   Widget build(BuildContext context) {\r\n>     return MaterialApp.router(\r\n>       routerDelegate: MyRouterDelegate(),\r\n>     );\r\n>   }\r\n> }\r\n> \r\n> class MyRouterDelegate extends RouterDelegate<Object>\r\n>     with ChangeNotifier, PopNavigatorRouterDelegateMixin<Object> {\r\n>   @override\r\n>   Widget build(BuildContext context) {\r\n>     return Navigator(\r\n>       key: navigatorKey,\r\n>       pages: const [\r\n>         MaterialPage(\r\n>           child: Screen(\r\n>             text: '1',\r\n>           ),\r\n>         ),\r\n>       ],\r\n>     );\r\n>   }\r\n> \r\n>   @override\r\n>   GlobalKey<NavigatorState>? get navigatorKey => GlobalKey();\r\n> \r\n>   @override\r\n>   Future<void> setNewRoutePath(void configuration) => SynchronousFuture(null);\r\n> }\r\n> \r\n> class Screen extends StatelessWidget {\r\n>   const Screen({super.key, required this.text});\r\n> \r\n>   final String text;\r\n> \r\n>   @override\r\n>   Widget build(BuildContext context) {\r\n>     return Scaffold(\r\n>       body: Center(\r\n>         child: Column(\r\n>           mainAxisAlignment: MainAxisAlignment.center,\r\n>           children: [\r\n>             Text(\r\n>               text,\r\n>             ),\r\n>             ElevatedButton(\r\n>               onPressed: () {\r\n>                 Navigator.of(context).push(\r\n>                   MaterialPageRoute(\r\n>                     builder: (context) => Screen(text: '$text nested'),\r\n>                   ),\r\n>                 );\r\n>               },\r\n>               child: const Text('go to the nested page'),\r\n>             ),\r\n>             ElevatedButton(\r\n>               onPressed: () {\r\n>                 Navigator.of(context).pop();\r\n>               },\r\n>               child: const Text('go back'),\r\n>             ),\r\n>           ],\r\n>         ),\r\n>       ),\r\n>     );\r\n>   }\r\n> }\r\n> ```\r\n\r\nWhen you are using the `Router` with `MaterialApp.router` [won't create its own `Navigator`](https:\/\/github.com\/flutter\/flutter\/blob\/ba393198430278b6595976de84fe170f553cc728\/packages\/flutter\/lib\/src\/widgets\/app.dart#L1671). You also need to provide [`Navigator.onPopPage`](https:\/\/api.flutter.dev\/flutter\/widgets\/Navigator\/onPopPage.html) to maintain the current pages so your example code is invalid. You can always specify which `Navigator` should pop by overriding [`RouterDelegate.popRoute`](https:\/\/api.flutter.dev\/flutter\/widgets\/RouterDelegate\/popRoute.html). This works well if you are using `MaterialApp.router` with `Router`. However, the standard `MaterialApp` and a nested `Navigator` lack the ability to determine which `Navigator` should be used when popping.","I've done workaround in my project, I didn't want to put this code in the app, because I see that iOS doing it without any additional work. But it's really brutal bug when it comes to the android users, app just popping from any place in the app, because root navigator have only plain structure\r\n\r\nWrapper is put right after Material App before first navigator is added, where OnWillPop is overlapping the system event(in my case it's in shell route of the first main go_router navigator):\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter_hooks\/flutter_hooks.dart';\r\nimport 'package:provider\/provider.dart';\r\n\r\nclass NavigatorWrapper extends HookWidget {\r\n  NavigatorWrapper({\r\n    super.key,\r\n    required this.child,\r\n  });\r\n\r\n  final Widget child;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final navigatorService = useMemoized(NavigatorService.new);\r\n\r\n    return Provider.value(\r\n      value: navigatorService,\r\n      child: WillPopScope(\r\n        onWillPop: navigatorService.onWillPop,\r\n        child: child,\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass NavigatorService {\r\n  final Set<GlobalKey<NavigatorState>> navigatorKeys = {};\r\n\r\n  void addNavigatorKey(GlobalKey<NavigatorState> navigatorKey) {\r\n    if (navigatorKeys.add(navigatorKey)) {\r\n      navigatorKeys.remove(navigatorKey);\r\n      navigatorKeys.add(navigatorKey);\r\n    }\r\n  }\r\n\r\n  void removeNavigatorKey(GlobalKey<NavigatorState> navigatorKey) {\r\n    navigatorKeys.remove(navigatorKey);\r\n  }\r\n\r\n  Future<bool> onWillPop() async {\r\n    final navigatorKeysList = navigatorKeys.toList();\r\n\r\n    for (var i = navigatorKeysList.length - 1; i >= 0; i--) {\r\n      final context = navigatorKeysList[i].currentContext;\r\n\r\n      if (context != null) {\r\n        final maybePopResult = await Navigator.of(context).maybePop();\r\n        if (maybePopResult) {\r\n          return !maybePopResult;\r\n        }\r\n\r\n        continue;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n```\r\n\r\nand also wrapper on the navigator which forced to use instead of all navigators:\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter_bloc\/flutter_bloc.dart';\r\nimport 'package:***\/src\/navigator\/navigator_wrapper.dart';\r\n\r\nexport 'navigator_wrapper.dart';\r\n\r\nclass Navigator extends StatefulWidget {\r\n  Navigator({\r\n    super.key,\r\n    this.navigatorKey,\r\n    this.pages = const [],\r\n    this.onPopPage,\r\n  });\r\n\r\n  final GlobalKey<NavigatorState>? navigatorKey;\r\n\r\n  final List<Page<dynamic>> pages;\r\n  final PopPageCallback? onPopPage;\r\n\r\n  @override\r\n  State<Navigator> createState() => _NavigatorState();\r\n}\r\n\r\nclass _NavigatorState extends State<Navigator> {\r\n  late GlobalKey<NavigatorState> navigatorKey;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    navigatorKey = widget.navigatorKey ?? GlobalKey<NavigatorState>();\r\n    WidgetsBinding.instance.addPostFrameCallback((_) {\r\n      final navigatorService = context.read<NavigatorService>();\r\n      navigatorService.addNavigatorKey(navigatorKey);\r\n    });\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    final navigatorService = context.read<NavigatorService>();\r\n    navigatorService.removeNavigatorKey(navigatorKey);\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Navigator(\r\n      key: navigatorKey,\r\n      pages: widget.pages,\r\n      onPopPage: widget.onPopPage,\r\n    );\r\n  }\r\n}\r\n\r\n```","@maRci002, I absolutely agree it's not possible to deside which navigator should be popped(and decision sounds like something custom), but I've been looking for solution how it is done on iOS, that he understand what should popped instead of closing app\r\n\r\nBecause being in the context of near to material app with router delegate is nothing from context can be get, so some global keys starts appearing or complex solutions for the decision what should be popped, maybe you have an idea how to override system back button to the same functionality as it's done on iOS?"],"labels":["platform-android","framework","f: routes","has reproducible steps","team-android","found in release: 3.19","found in release: 3.21"]},{"title":"Navigator.Pop cause most recent focus node to regain focus even if not focused when new page was opened ","body":"### Steps to reproduce\r\n\r\n1. TextField with focus, keyboard showing\r\n2. Clear focus from TextField\r\n3. Open new page or dialog\r\n4. Return to previous page with Navigator.pop\r\n\r\nIssue started with upgrade to Flutter 3.19.0 and can't be reproduced with 3.16.9\r\n\r\n### Expected results\r\n\r\nNo focus on TextField when returning to page\r\nSince TextField did not have focus when new page was opened, expecting it not to gain focus from routing changes\r\n\r\n### Actual results\r\n\r\nTextField gains focus and keyboard showing\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatelessWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: const Text(\"Main page\"),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            const Padding(\r\n              padding: EdgeInsets.all(24),\r\n              child: TextField(\r\n                autofocus: false,\r\n              ),\r\n            ),\r\n            Text(\r\n              FocusScope.of(context).hasFocus\r\n                  ? 'Has focus'\r\n                  : 'Does not have focus',\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () => FocusScope.of(context).unfocus(),\r\n              child: const Text(\"Clear focus\"),\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                Navigator.push(\r\n                  context,\r\n                  MaterialPageRoute(builder: (context) => const SecondPage()),\r\n                );\r\n              },\r\n              child: const Text(\"Open page\"),\r\n            ),\r\n            ElevatedButton(\r\n              child: const Text(\"Open dialog\"),\r\n              onPressed: () {\r\n                showDialog(\r\n                  context: context,\r\n                  builder: (context) {\r\n                    return AlertDialog(\r\n                      title: const Text(\"Dialog\"),\r\n                      content: const Text(\"This is a dialog\"),\r\n                      actions: [\r\n                        TextButton(\r\n                          onPressed: () {\r\n                            Navigator.pop(context);\r\n                          },\r\n                          child: const Text(\"Close\"),\r\n                        ),\r\n                      ],\r\n                    );\r\n                  },\r\n                );\r\n              },\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass SecondPage extends StatelessWidget {\r\n  const SecondPage({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n          title: const Text(\"Second page\"),\r\n          leading: IconButton(\r\n            onPressed: () {\r\n              Navigator.pop(context);\r\n            },\r\n            icon: const Icon(Icons.arrow_back),\r\n          )),\r\n      body: const Center(\r\n        child: Text(\"This is the second page!\"),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Video demonstration<\/summary>\r\n\r\n\r\n![Simulator Screen Recording - iPhone 14 Pro - 2024-03-14 at 16 40 46](https:\/\/github.com\/flutter\/flutter\/assets\/6470474\/469fa9e5-1ad3-4332-90ed-744673ac0631)\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.4 23E214 darwin-arm64, locale en-SE)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 32.1.0-rc1)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2021.2)\r\n[\u2713] VS Code (version 1.87.1)\r\n[\u2713] Connected device (3 available)\r\n[\u2713] Network resources\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I was able to replicate this on latest stable and master versions but not on stable 3.16.0 wherein it shows proper behavior as below:\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/67046386\/d9aa55e0-c058-431d-8654-ac3de1b820df\r\n\r\n\r\nMaybe related to https:\/\/github.com\/flutter\/flutter\/issues\/124778 \r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.25, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.25 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision fa2f64ad1a (4 hours ago), 2024-03-13 22:10:38 -0400\r\n    \u2022 Engine revision 599dbd7382\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-229.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n","CC @gspencergoog ","I've tried to bisect this on Linux but I can't reproduce it on main or on 3.19.3.\r\n\r\nI'll try macOS next.\r\n\r\n","Unable to reproduce on macOS either, but I can reproduce it on Android, so I'll bisect there.","Okay, I bisected this to #134554 as the source of the regression.\r\n\r\ncc @chunhtai Could you take a look at this?"],"labels":["c: regression","platform-android","platform-ios","framework","f: routes","f: focus","has reproducible steps","P2","team-framework","triaged-framework","found in release: 3.19","found in release: 3.21"]},{"title":"Provide call to close\/abort native picker file explorer","body":"### Use case\n\nWhen Using ImagePicker in Web on a MacOS or Windows, it will launch the Gallery in the form of a file explorer\r\nNormally one would select the intended image and clicks the 'Open' button.\r\nAlternatively one could drag the image onto the ImagePicker widget to drag\/drop the image. \r\nWhen this is done, the file explorer remains active. Not a problem, but would be nice to programmatically close the File Explorer window. Or to programmatically abort the ImagePicker action.\n\n### Proposal\n\nAdd a call to complete\/cancel or abort the action, so the File Explorer that is shown natively is closed.","comments":["> Alternatively one could drag the image onto the ImagePicker widget to drag\/drop the image.\r\n\r\nWhat widget are you referring to here?\r\n\r\n> Add a call to complete\/cancel or abort the action, so the File Explorer that is shown natively is closed.\r\n\r\nI'm not clear from the description above of the use case what the goal here is. You want to be able to close the UI out from under the user while they are still interacting with it? What's the use case where this would be desirable?","Code triggered onTap of widget, widget is child of DropzoneView widget:\r\n\r\n                        final ImagePicker picker = ImagePicker();\r\n                        final XFile? xFileImage = await picker.pickImage(source: ImageSource.gallery);\r\n\r\nSee attached video of use in Safari browser on MacOs\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/9477833\/2f2dca23-2303-4578-87c1-64caf150bb38\r\n\r\n","@jakusb I think this is out of the plugin's scope as the native picker belongs to the OS side. Please refer to this [SO's answer](https:\/\/stackoverflow.com\/a\/53125934\/5921933). If you see an official API on web that supports this, please share it here. Thanks!"],"labels":["waiting for customer response","in triage"]},{"title":"Fix flutter\/packages tests that throw an error after test completion","body":"https:\/\/github.com\/flutter\/flutter\/commit\/77651bc4969404dfa456b88ea08e052c47c5744f made errors thrown after a test to cause the test as failed. \r\n\r\nA few of the tests in [flutter\/packages](https:\/\/github.com\/flutter\/packages) started failing after this. See https:\/\/logs.chromium.org\/logs\/flutter\/buildbucket\/cr-buildbucket\/8753561699724872161\/+\/u\/Run_package_tests\/drive_examples\/stdout?format=raw for original tests failures.","comments":[],"labels":["p: maps","package","team-ecosystem","P2","c: tech-debt"]},{"title":"Crash: MTLTextureDescriptor has invalid pixelFormat","body":"### Steps to reproduce\r\n\r\nDevice: iPadAir with iOs 12.5.7 (Same Error reported for iPhone 5s on sentry)\r\nFlutter Version: 3.13.8\r\n\r\nOpen new page with Widgets containing an AssetImage\r\nApp crashes\r\n\r\n### Expected results\r\n\r\nPage should open\r\n\r\n### Actual results\r\n\r\nApp crashes\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nException Type: EXC_CRASH (SIGABRT)\r\nCrashed Thread: 4\r\n\r\nApplication Specific Information:\r\n-[MTLTextureDescriptorInternal validateWithDevice:] > -[MTLTextureDescriptorInternal validateWithDevice:]:1094: failed assertion `MTLTextureDescriptor has invalid pixelFormat (554).'\r\n > : failed assertion `%s'\r\n > DRHT > error > MTLTextureDescriptor has invalid pixelFormat (554).\r\n\r\nThread 4 Crashed:\r\n0   libsystem_kernel.dylib          0x3ac39d0dc         __pthread_kill\r\n1   libsystem_pthread.dylib         0x3ac4b0094         <redacted>\r\n2   libsystem_c.dylib               0x3ac216ea8         abort\r\n3   libsystem_c.dylib               0x3ac1e4afc         __assert_rtn\r\n4   Metal                           0x3b0ea0134         MTLReportFailure\r\n5   Metal                           0x3b0e6f1e0         <redacted>\r\n6   AGXMetalA7                      0x3ed9a71e4         <redacted>\r\n7   Flutter                         0x1050a31c8         <redacted>\r\n8   Flutter                         0x1050ee738         <redacted>\r\n9   Flutter                         0x104e3bf1c         <redacted>\r\n10  Flutter                         0x1050eccd8         <redacted>\r\n11  Flutter                         0x104e3a6fc         <redacted>\r\n12  Flutter                         0x104e3dcec         <redacted>\r\n13  CoreFoundation                  0x3acb01554         <redacted>\r\n14  CoreFoundation                  0x3acb01284         <redacted>\r\n15  CoreFoundation                  0x3acb00ab8         <redacted>\r\n16  CoreFoundation                  0x3acafba08         <redacted>\r\n17  CoreFoundation                  0x3acafafb4         CFRunLoopRunSpecific\r\n18  Flutter                         0x104e3ddd8         <redacted>\r\n19  Flutter                         0x104e3d44c         <redacted>\r\n20  libsystem_pthread.dylib         0x3ac4b92c0         <redacted>\r\n21  libsystem_pthread.dylib         0x3ac4b9220         _pthread_start\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[!] Flutter (Channel stable, 3.13.8, on macOS 14.0 23A344 darwin-x64, locale en-AT)\r\n    ! Warning: `dart` on your path resolves to \/usr\/local\/Cellar\/dart\/2.17.0\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/jhe\/fvm\/versions\/3.13.8. Consider adding \/Users\/jhe\/fvm\/versions\/3.13.8\/bin to the front of your path.\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for more details.\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.3)\r\n[\u2713] Android Studio (version 2023.1)\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.4)\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.3)\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.4)\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.1.5)\r\n[\u2713] Connected device (2 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["This looks similar to https:\/\/github.com\/flutter\/flutter\/issues\/133015","@bytepoets-jhe \r\nSince you seem to be on 3.13.8 which doesn't seem to have the fix made for https:\/\/github.com\/flutter\/flutter\/issues\/133015, which is actually available in 3.16 version onwards. So you will need to upgrade your stable version and run your scenario again to see the fix working.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Unable to complete any iOS UI tests that lasts longer than ~6 minutes","body":"### Steps to reproduce\n\nAdd the following to `pubspec.yaml`:\r\n```\r\n  integration_test:\r\n    sdk: flutter\r\n```\r\n\r\nSetup project for UI testing:\r\nhttps:\/\/github.com\/flutter\/flutter\/tree\/main\/packages\/integration_test#ios-device-testing\r\n\r\nAdd a UI test that takes longer than 6 minutes to run. I provided a code sample for this.\r\n\r\n**TEST CASE:**\r\nUse **Xcode** to run the UI tests on a **physical** device.\r\n\r\nThe test will run for a while but exit after a certain time before completion. In my test cases it always happened around 5 minutes and 43 seconds.\r\n\r\nMy tests consist of a simple loop of pressing a button and increasing the count with `await Future.delayed(const Duration(seconds: 1));` within the loop. \r\nBut our production tests show the same result. Unrelated to what tests run and in what order it always interrupts around that time mark.\r\n\r\n**Notes:**\r\n- It works on older Xcode versions (14.2 for example)\r\n- It works when running through Flutter with debug or run from vscode\r\n- It works on a simulator from Xcode or Flutter in vscode\r\n- It works on Xcode 15 (or later) while using Swift for a simple UI test with a similar setup. \r\n- It **does not** work on Xcode 15 (or later) from a Flutter project on a physical device\r\nThat's why I think it's Flutter related.\n\n### Expected results\n\nTest completes after 600 prints.\n\n### Actual results\n\nTest fails after ~330 prints (somewhere before 6 minutes)\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n`main.dart` (default generated file, comments removed)\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  int _counter = 0;\r\n\r\n  void _incrementCounter() {\r\n    setState(() {\r\n      _counter++;\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            const Text(\r\n              'You have pushed the button this many times:',\r\n            ),\r\n            Text(\r\n              '$_counter',\r\n              style: Theme.of(context).textTheme.headlineMedium,\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n      floatingActionButton: FloatingActionButton(\r\n        onPressed: _incrementCounter,\r\n        tooltip: 'Increment',\r\n        child: const Icon(Icons.add),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\nAdd custom UI test file `widget_test.dart` in \/integration_test with the following content:\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter_test\/flutter_test.dart';\r\n\r\nimport 'package:bug\/main.dart';\r\n\r\nvoid main() {\r\n  testWidgets('Counter increments smoke test', (WidgetTester tester) async {\r\n    \/\/ Build our app and trigger a frame.\r\n    await tester.pumpWidget(const MyApp());\r\n\r\n    \/\/ Verify that our counter starts at 0.\r\n    expect(find.text('0'), findsOneWidget);\r\n    expect(find.text('1'), findsNothing);\r\n\r\n    \/\/ Verify that our counter has incremented.\r\n    for (var i = 0; i < 600; i++) {\r\n      await tester.tap(find.byIcon(Icons.add));\r\n      await tester.pump();\r\n      debugPrint(\"${i + 1}\");\r\n\r\n      await Future.delayed(const Duration(seconds: 1));\r\n\r\n      expect(find.text((i + 1).toString()), findsOneWidget);\r\n    }\r\n  });\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\nThis is the output in text from `.xcresult`\r\n\r\n```console\r\nRunner (3702) encountered an error\r\nTest runner never began executing tests after launching\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.2.1 23C71 darwin-arm64, locale en-NL)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/myname\/Developer\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (7 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at \/Users\/myname\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.2\r\n    \u2022 ANDROID_HOME = \/Users\/myname\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 MartiniPhone Pro (mobile) \u2022 _hidden_            \u2022 ios            \u2022 iOS 17.4 21E219\r\n    \u2022 iPhone 15 Pro (mobile)    \u2022 97C25645-A5DD-4BAC-8646-2AFED3D23A94 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4 (simulator)\r\n    \u2022 macOS (desktop)           \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.2.1 23C71 darwin-arm64\r\n    \u2022 Chrome (web)              \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["I can also reproduce this issue. The test runs on my physical device `iPhone 7, iOS 15.8`, but it unexpectedly quits when the counter (from sample code) is around 300.\r\n\r\nAlso, there is an output file named: `Hang (Spindump).txt` from XCode; its content is only a text `No samples`:\r\n![Screenshot 2024-03-15 at 14 34 51](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/6a3f9aea-01dc-4c44-83b3-76ec8f0b7241)\r\n\r\n\r\n[Hang (Spindump).txt](https:\/\/github.com\/flutter\/flutter\/files\/14612296\/Hang.Spindump.txt)\r\n\r\nThe complete sample project:  [reproduce_ios_integration_test.zip](https:\/\/github.com\/flutter\/flutter\/files\/14612289\/reproduce_ios_integration_test.zip)\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9b276be7fe (2 hours ago), 2024-03-14 21:46:36 -0400\r\n    \u2022 Engine revision 995d8903e0\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-234.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","I'm running into the exact same problem with my app.\r\nIt crashes around the 6 minute mark.\r\n\r\n<details><summary>flutter doctor<\/summary>\r\n\r\n```\r\n\u276f flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale ja-JP)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.1)\r\n[\u2713] VS Code (version 1.85.2)\r\n```\r\n\r\n<\/details>\r\n\r\n","I encountered the same issue with Xcode 15.2.\r\nIt consistently crashes within 4 to 8 minutes.\r\nIs there any solution available?\r\n\r\n<details><summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale ja-JP)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/xxxxx\/.asdf\/installs\/flutter\/3.19.3-stable\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (2 weeks ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/xxxxx\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone 15 Pro Max (mobile) \u2022 FFB3B1C0-F0C1-4FB5-AB84-5BF7E22A9DF1 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2\r\n      (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)               \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n    ! Error: Browsing on the local area network for This is a pen. Ensure the device is unlocked and attached with a cable or associated with the\r\n      same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n    ! Error: Browsing on the local area network for Y ios se3. Ensure the device is unlocked and attached with a cable or associated with the\r\n      same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>","this reproduces also in my environment.\r\nMaybe any updates in xctest for xcode 15 cause the issue?"],"labels":["platform-ios","framework","f: integration_test","has reproducible steps","P2","team-ios","triaged-ios","found in release: 3.19","found in release: 3.21"]},{"title":"Flutter Web squeezed Text, worspacing not working, on some in app browsers (instagram, facebook)","body":"In Flutter Web apps, words get scrambled, with negative spaces between them, when running from an in-app browser, such as facebook and instagram browsers, from some android devices.\r\n\r\nI`ve been living with this issue for over a year, and a good portion of my users complain about this. However, this problem is not easy to reproduce, as it only happens if all conditions below are met:\r\n\r\n### Steps to reproduce\r\n\r\n1) The web app has to be on HTLM renderer\r\n2) Happens on many Android devices, but I can`t precise which ones - usually when the font size of the phone is at medium or higher\r\n3) The link to the flutter web has to be opened in an in app browser (such as facebook, instagram or even in a webview of a flutter app itself)\r\n\r\nI tested adding a high number for \"wordspacing\" in text widget, and it only adds spaces for normal browsers. For in-app browsers, wordspacing doesn`t seem to work at all.\r\n\r\n### Expected results\r\n\r\nExpeted result - the way it looks on a normal browser (Safari, Chrome)\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/62712660\/4b74f2b4-02c1-4a59-a0ad-bfc18bda752e)\r\n\r\n\r\n### Actual results\r\n\r\nActual result, when accessing the link on an in-app browser\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/62712660\/d32d48ed-9557-4f60-a67e-028f40025657)","comments":["@guihackmann \r\nCan you provide `flutter doctor -v` and runnable reproducible code sample that shows the reported behavior ?\r\nAlso, device details that would be helpful.","I'm seeing the same problem reported by users.  As already reported: Flutter HTML renderer, only when viewed within the in-app browser on the Android Facebook app.\r\n\r\nFrom the screenshots they've sent it looks like the browser is increasing the font size beyond that specified in the Flutter code, but each \"chunk\" of text (mostly each word it seems) is placed on the screen where it should be if the text was the correct size.  So it looks like the browser is overriding the font size but not the spacing.\r\n\r\nTwo examples from different users (grey boxes to hide my client's branding):\r\n\r\n![1](https:\/\/github.com\/flutter\/flutter\/assets\/4620670\/dbabd4cb-3458-49f3-8b59-97c8317a91e0)\r\n\r\n![2](https:\/\/github.com\/flutter\/flutter\/assets\/4620670\/f660160d-3e41-48de-a740-2be95fa8ff13)\r\n\r\nMy Flutter doctor output:\r\n\r\n```\r\nflutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.2.1 23C71 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/Richard\/Projects\/Third Party\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (3 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/Richard\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.2.1 23C71 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 123.0.6312.59\r\n    ! Error: Browsing on the local area network for Richard iPhone 14 Pro. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n    ! Error: Browsing on the local area network for Richard iPad Pro. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\nI can't yet provide a runnable reproducible code sample as I don't currently have access to an Android device to test on.  If I manage to get hold of one I'll see what I can do.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"[go_router] Add GoRouterState instance to ShellNavigationContainerBuilder","body":"### Use case\n\nI need to know some path parameters when I navigate to `StatefulShellBranch` inside `StatefulShellRoute` and I have a `Bloc` directly in my `StatefulShellRoute` and requires some ids. I can get ids only from `GoRouterState` so I forced to use `StatefulShellRoute.builder` however my builder is not a Scaffold with `BottomNavigationBar` but it is a Scaffold with `TabBar` and I can pass `StatefulNavigationShell`  from `StatefulShellRoute.builder` to show a child only and navigate by taping on tabs. But it should also be possible to navigate by swipes\/gestures and it is impossible with `StatefulShellRoute.builder` cause there is only a single child, I can use `StatefulShellRoute.navigatorContainerBuilder` which contains `List<Widget> children` and it will allow me to swipe my tabs but `StatefulShellRoute.navigatorContainerBuilder` doesn't contain `GoRouterState` and restricts me to know required ids for my `Bloc`\n\n### Proposal\n\nMy proposal is to add `GoRouterState` to `StatefulShellRoute.navigatorContainerBuilder` ","comments":[],"labels":["c: new feature","package","p: go_router","team-go_router"]},{"title":"Flutter Web CanvasKit Crash: `RuntimeError: table index is out of bounds`","body":"### Steps to reproduce\r\n\r\nNot sure on exact repro steps besides just using our app for long enough, but it's happening almost daily for us on flutter 3.19.3 \r\n\r\n### Expected results\r\n\r\nNot to crash\r\n\r\n### Actual results\r\n\r\nCanvasKit Crashes with:\r\n\r\n```console\r\n\u2550\u2550\u2561 EXCEPTION CAUGHT BY SCHEDULER LIBRARY \u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following NativeError object was thrown during a scheduler callback:\r\n  RuntimeError: table index is out of bounds\r\n\r\nWhen the exception was thrown, this was the stack:\r\n..\/canvaskit\/chromium\/canvaskit.js 102:79                                            Cb\r\n..\/canvaskit\/chromium\/canvaskit.js 145:437                                           delete\r\n..\/lib\/_engine\/engine\/canvaskit\/native_memory.dart 88:13                             dispose\r\n..\/lib\/_engine\/engine\/canvaskit\/text.dart 862:5                                      dispose\r\n..\/packages\/flutter\/src\/painting\/text_painter.dart 666:29                            markNeedsLayout\r\n..\/packages\/flutter\/src\/rendering\/paragraph.dart 775:5                               systemFontsDidChange\r\n..\/packages\/flutter\/src\/rendering\/object.dart 4463:9                                 <fn>\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7                                [_invokeFrameCallback]\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 1233:11                               <fn>\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/linked_hash_map.dart 21:7           forEach\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 1231:16                               handleBeginFrame\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 1148:5                                [_handleBeginFrame]\r\n..\/lib\/_engine\/engine\/platform_dispatcher.dart 1361:5                                invoke1\r\n..\/lib\/_engine\/engine\/platform_dispatcher.dart 237:5                                 invokeOnBeginFrame\r\n..\/lib\/_engine\/engine\/initialization.dart 176:36                                     <fn>\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37  _checkAndCall\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39  dcall\r\n2\r\n\r\nThis exception was thrown in the context of a scheduler callback. When the scheduler callback was _registered_ (as opposed to when the exception was thrown), this was the stack:\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/core_patch.dart 945:28  get current\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 121:33                  <fn>\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 123:14                  new\r\n..\/packages\/flutter\/src\/scheduler\/binding.dart 605:49                  scheduleFrameCallback\r\n..\/packages\/flutter\/src\/rendering\/object.dart 4455:22                  [_scheduleSystemFontsUpdate]\r\n..\/packages\/flutter\/src\/painting\/binding.dart 187:7                    notifyListeners\r\n..\/packages\/flutter\/src\/painting\/binding.dart 176:9                    handleSystemMessage$\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 45:50  <fn>\r\n..\/dart-sdk\/lib\/async\/zone.dart 1661:54                                runUnary\r\n..\/dart-sdk\/lib\/async\/future_impl.dart 162:18                          handleValue\r\n..\/dart-sdk\/lib\/async\/future_impl.dart 838:44                          handleValueCallback\r\n..\/dart-sdk\/lib\/async\/future_impl.dart 867:13                          _propagateToListeners\r\n..\/dart-sdk\/lib\/async\/future_impl.dart 643:5                           [_completeWithValue]\r\n..\/dart-sdk\/lib\/async\/future_impl.dart 713:7                           callback\r\n..\/dart-sdk\/lib\/async\/schedule_microtask.dart 40:11                    _microtaskLoop\r\n..\/dart-sdk\/lib\/async\/schedule_microtask.dart 49:5                     _startMicrotaskLoop\r\n..\/dart-sdk\/lib\/_internal\/js_dev_runtime\/patch\/async_patch.dart 181:7  <fn>\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n```\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Still working on trying to figure out a way to repro in a small code sample, but a little challenging since it seems to be maybe some kind of GC issue inside canvaskit or the engine itself. I can manually induce a similar error on the same line by double deleting the nativeObject.\r\n\r\n<img width=\"900\" alt=\"Screenshot 2024-03-14 at 12 39 33\u202fPM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/22264\/0471bb40-ed20-45e5-8bcc-33bf1ad05336\">\r\n","This was probably fixed by https:\/\/github.com\/flutter\/flutter\/pull\/145124. Can you please try again on the master channel?","@yjbanov I think it's unlikely because the emscripten objects are protected by a delete handler that itself only deletes if the object isn't deleted. I tried to cause the error to happen with a double dispose and even a double delete against the SK object, but couldn't repro it that way. Currently, I've only been able to consistently repro in OOM cases, which are surprisingly easy to hit due to the CanvasKit limiting the flutter memory to 2GB at the moment (in theory it could go up to 4GB, but my understanding is that causes issues in WebGL because WebGL doesn't use unsigned ints internally).\r\n\r\nI'm working on a pull request that cleans up a lot of places where things aren't properly disposed in non happy path cases and provides more predictable behavior under temporary OOM situations, currently blocked on finding some time to update the build for #145380 to wrap it up. Pretty easy to add the flag to the main .gn file with the other settings, but looks like it needs to be added to all the dependencies as well to avoid linker errors."],"labels":["c: crash","engine","platform-web","e: web_canvaskit","a: production","needs repro info","team-web"]},{"title":"Investigate using a devicelab bot with an Android device attached for an Engine CI test","body":"In the engine repo, the scenario app test runs on an Android emulator. Unfortunately, Android emulators unexpectedly crash when running the Vulkan backend: https:\/\/b.corp.google.com\/issues\/327501571.\r\n\r\nWe'd like to run the scenario app on a real device in the devicelab. This test will not have any dependency on the framework. Rather, it will run essentially the build and [test in this configuration](https:\/\/github.com\/flutter\/engine\/blob\/main\/ci\/builders\/linux_android_emulator.json#L69) file, but instead of running the test on an emulator, it would run it on the device attached to the devicelab bot.\r\n\r\nI'm wondering if this is something self-service or if it requires any implementation work in infrastructure. It seems like this might be self-service if there's something I can write in the flutter\/engine `.ci.yaml` that will run an engine_v2 build config on a devicelab machine. Is that possible?\r\n\r\ncc @keyonghan ","comments":["Is the source checkout step necessary (based on https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Linux%20linux_android_debug_engine\/27797\/overview)? This increases the execution time to close 20mins (when retry happens). This will potentially cause issues with capacity.","Devicelab bots are with a different LAN, which caused slower downloading compared to the vm: \r\n![Screenshot 2024-03-14 at 11 59 51\u202fAM](https:\/\/github.com\/flutter\/flutter\/assets\/54558023\/6cdf0e3f-98ec-44bc-aadc-ef724590c31d)\r\n","The engine source checkout is probably necessary because the scripts, fixtures, etc. to drive the tests will be in the source tree. Why does the checkout always fail on the first attempt?","Reruns pass on both bots:\r\n[flutter-devicelab-linux-53](https:\/\/ci.chromium.org\/raw\/build\/logs.chromium.org\/flutter\/led\/keyonghan_google.com\/561f198422838a98dd6c0a74179dbfaa46b28607b24bb2cf3bce677a02d5bfdb\/+\/build.proto?server=chromium-swarm.appspot.com)\r\n[flutter-devicelab-linux-26](https:\/\/luci-milo.appspot.com\/raw\/build\/logs.chromium.org\/flutter\/led\/keyonghan_google.com\/fc7f291824b936144a869a3d40eb18354ce8edc3068986384d255a8fc5944fb3\/+\/build.proto)\r\n\r\nI am wondering if this is a one-time cache refresh on the bot or it repros on every single push. To double confirm, could you try pushing a new commit? "],"labels":["team-infra","P2","triaged-infra"]},{"title":"[Impeller] GLES shader functions are just raw strings.","body":"This makes it so that pipelines that share shader stages have to recompile the shader over and over. We should ideally only pay the price of a link in such cases.","comments":[],"labels":["P2","e: impeller","team-engine","triaged-engine"]},{"title":"[Impeller] GLES pipeline libraries must ignore all descriptor fields except the shader stages.","body":"Today, if we ask PipelineLibraryGLES for a pipeline variant with anything other than the descriptors shader stages being different, an entirely new program object is linked. However, all the other descriptor fields can be set dynamically. So, it the pipeline library contains an existing program with identical staged, it can be reused immediately. This should make variant construction essentially free in OpenGL ES.","comments":[],"labels":["P2","e: impeller","team-engine","triaged-engine"]},{"title":"Add support to macOS text replacements","body":"### Use case\n\nMacOS supports configuring system-wide text replacements on the settings:\r\n\r\n![CleanShot 2023-08-17 at 13 02 51@2x](https:\/\/github.com\/superlistapp\/super_editor\/assets\/31278849\/bc09f8b3-8468-4924-89cb-4e1809735050)\r\n\r\nAfter typing a configured replacement, the text is highlighted and a popover is displayed, so the user can accept the replacement:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/7597082\/6ab8ffa8-163d-43c1-b5d3-00dfb9bf5dfc\r\n\r\nFlutter `TextField` doesn't seem to support that:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/7597082\/2e9a9299-5c22-42eb-83dc-8db4b5e56d0c\r\n\r\n\r\n\n\n### Proposal\n\nImplement support for that feature.","comments":[],"labels":["a: text input","c: new feature","platform-mac","c: proposal","a: desktop","P3","team-text-input","triaged-text-input"]},{"title":"Error on \"flutter gen-l10n\"","body":"Since version 3.19.0 i'm getting an error on command: \"flutter gen-l10n\".\r\nI've been waiting for months for the fix to be released on stable.\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/87030675\/a4478e15-bfc3-41fd-b721-c7fce22550d9)\r\n\r\n## command\r\n\r\nflutter gen-l10n\r\n\r\n## exception\r\n\r\nPathNotFoundException: PathNotFoundException: Cannot open file, path = 'pubspec.yaml' (OS Error: Impossibile trovare il file specificato.\r\n, errno = 2)\r\n\r\n```\r\n#0      _File.throwIfError (dart:io\/file_impl.dart:675:7)\r\n#1      _File.openSync (dart:io\/file_impl.dart:490:5)\r\n#2      _File.readAsBytesSync (dart:io\/file_impl.dart:574:18)\r\n#3      _File.readAsStringSync (dart:io\/file_impl.dart:624:18)\r\n#4      ForwardingFile.readAsStringSync (package:file\/src\/forwarding\/forwarding_file.dart:99:16)\r\n#5      ErrorHandlingFile.readAsStringSync.<anonymous closure> (package:flutter_tools\/src\/base\/error_handling_io.dart:217:22)\r\n#6      _runSync (package:flutter_tools\/src\/base\/error_handling_io.dart:587:14)\r\n#7      ErrorHandlingFile.readAsStringSync (package:flutter_tools\/src\/base\/error_handling_io.dart:216:12)\r\n#8      generateLocalizations (package:flutter_tools\/src\/localizations\/gen_l10n.dart:51:56)\r\n#9      GenerateLocalizationsCommand.runCommand (package:flutter_tools\/src\/commands\/generate_localizations.dart:264:11)\r\n#10     FlutterCommand.verifyThenRunCommand (package:flutter_tools\/src\/runner\/flutter_command.dart:1765:12)\r\n<asynchronous suspension>\r\n#11     FlutterCommand.run.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command.dart:1389:27)\r\n<asynchronous suspension>\r\n#12     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n<asynchronous suspension>\r\n#13     CommandRunner.runCommand (package:args\/command_runner.dart:212:13)\r\n<asynchronous suspension>\r\n#14     FlutterCommandRunner.runCommand.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:355:9)\r\n<asynchronous suspension>\r\n#15     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n<asynchronous suspension>\r\n#16     FlutterCommandRunner.runCommand (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:295:5)\r\n<asynchronous suspension>\r\n#17     run.<anonymous closure>.<anonymous closure> (package:flutter_tools\/runner.dart:119:9)\r\n<asynchronous suspension>\r\n#18     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n<asynchronous suspension>\r\n#19     main (package:flutter_tools\/executable.dart:90:3)\r\n<asynchronous suspension>\r\n```\r\n\r\n### Expected results\r\n\r\ngeneration of localization files\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Versione 10.0.22631.3155], locale it-IT)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\src\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n    \u2022 Android SDK at C:\\Users\\STB010\\AppData\\Local\\Android\\sdk\r\n    X cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    X Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for more details.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Professional 2022 17.8.5)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\r\n    \u2022 Visual Studio Professional 2022 version 17.8.34511.84\r\n    \u2022 Windows 10 SDK version 10.0.19041.0\r\n\r\n[\u221a] Android Studio (version 2021.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio1\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\STB010\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Versione 10.0.22631.3155]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.","comments":["Looking at the stack trace, the error seems to come from:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/ba393198430278b6595976de84fe170f553cc728\/packages\/flutter_tools\/lib\/src\/localizations\/gen_l10n.dart#L51\r\n\r\nThis has been changed since https:\/\/github.com\/flutter\/flutter\/pull\/141233 landed. Could you switch to beta\/master channel to see if it fixed on your end?\r\n\r\n```\r\nflutter channel master\r\nflutter upgrade\r\n```"],"labels":["waiting for customer response","in triage"]},{"title":"Consider including `flutter.js.map` in the build output folder","body":"Since we include `flutter.js` in the output build directory, it might be worthwhile to also include `flutter.js.map` by default.","comments":[],"labels":["tool","platform-web","c: proposal","a: build","P2","team-web","triaged-web"]},{"title":"Remove conditionality in our Gradle templates","body":"We have conditionality on the AGP version in our gradle templates, which can be removed when https:\/\/github.com\/flutter\/flutter\/issues\/142653 lands","comments":[],"labels":["tool","t: gradle","team-android"]},{"title":"Use singular static const for minimum iOS\/macOS version where possible","body":"The minimum iOS\/macOS deployment version is hardcoded in a bunch of different places within the tool. It would be nice if we had a single const we can use everywhere.\r\n\r\nWould also be nice if we could make it a variable in the templates so we don't have to change each template manually.\r\n\r\nHere's some examples of places it's used:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/pull\/140823\/files","comments":["+1 for doing this in the tool and templates.  The `dev` and `example` changes are annoying and add lots of files, but I usually use them as proof that the version migrator is doing what I expect."],"labels":["platform-ios","tool","P2","c: tech-debt","team-ios","triaged-ios","fyi-tool"]},{"title":"[web] Autofill forms aren't updated properly","body":"In the web engine, when we receive a `TextInput.updateConfig` message from the framework, we don't properly update the autofill form and its fields.\r\n\r\nDetails:\r\n- When the new config is [received](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L2145-L2147), we create a [new `EngineAutofillForm`](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L978-L981).\r\n- That new `EngineAutofillForm` [creates its own `<form>`](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L206) element and all the fields.\r\n- The new `<form>` element isn't appended to the DOM because we only append during initialization (e.g. [here](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L1591) and [here](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L1749)).\r\n- The previous `<form>` element (that was appended during initialization before the updated config arrived) remains in the DOM with no updates applied to it.\r\n\r\ncc @htoor3 @LongCatIsLooong ","comments":["Great catch! A new form also gets created + appended [here](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L1079), but `placeElement()` gets overridden for Android, iOS, Firefox strategies.  So we probably have to make an explicit call to `placeForm()`.  \r\n\r\nMaybe the best place to do that is [here](https:\/\/github.com\/flutter\/engine\/blob\/351470ce31cb4852b826d3ed361369191768f1f8\/lib\/web_ui\/lib\/src\/engine\/text_editing\/text_editing.dart#L1271) since this gets called whenever we receive `updateConfig` messages. "],"labels":["a: text input","engine","platform-web","P1","team-web","triaged-web"]},{"title":"Skia Gold Client(s) should consider \"negative images\" a pre-submit (try-job) failure","body":"Our logic in `Future<void> _tryjobAdd(...)` (read: pre-submit) is as follows:\r\n\r\n```dart\r\nfinal String resultStdout = result.stdout.toString();\r\nif (result.exitCode != 0 &&\r\n    !(resultStdout.contains('Untriaged') || resultStdout.contains('negative image'))) {\r\n  \/* throws exception *\/\r\n```\r\n\r\nCompare this with `Future<void> _imgtestAdd(...)` (read: post-submit):\r\n\r\n```dart\r\nif (result.exitCode != 0) {\r\n  \/* throws exception *\/\r\n}\r\n```\r\n\r\nIn other words, that means on pre-submit, errors due to untriaged images or negative images are _not_ exceptions, but they are on post-submit. You can read https:\/\/github.com\/flutter\/flutter\/issues\/145046 for the context (and a suggestion to change this more broadly), but a smaller and I believe less controversial change is to remove the second half (`resultStdout.contains('negative image')`).\r\n\r\nWe don't consider negative images to _ever_ be valid in our workflow, but AFAICT there is no reason to treat them specifically - if a user accidentally triages as negative, it will break post-submit. Isn't it better to just break pre-submit? We could even have the error be more specific and link to the Wiki - i.e. \"do not mark things as negative\".","comments":[],"labels":["P1","c: tech-debt","fyi-android","fyi-framework","fyi-infra","fyi-web"]},{"title":"Expose onTapOutside from SearchBar's TextField","body":"### Use case\n\nAll the `TextField`s in my app are set to lose focus closing the keyboard when they're tapped outside. I can't do the same on `SearchBar` as the `onTapOutside` property of `TextField` class is not exposed.\n\n### Proposal\n\nIntroduce `onTextOutside` parameter for `SearchBar` and `SearchAnchor` constructors.","comments":["> ### Use case\r\n> All the `TextField`s in my app are set to lose focus closing the keyboard when they're tapped outside. I can't do the same on `SearchBar` as the `onTapOutside` property of `TextField` class is not exposed.\r\n> \r\n> ### Proposal\r\n> Introduce `onTextOutside` parameter for `SearchBar` and `SearchAnchor` constructors.\r\n\r\nDo you have any other use cases (other than losing the focus) for which you want the `onTapOutside` parameter to be exposed by the Searchbar constructor? \r\nIf you only want to unfocus it on being tapped outside, this can be implemented internally in the search bar class, and then there would be no need to expose the parameter. ","https:\/\/github.com\/flutter\/flutter\/assets\/54017876\/63dd2c88-260b-4a1d-b77c-6cd0142464d3\r\n\r\nHere's a fix I have implemented @danagbemava-nc @darshankawar, Let me know if this looks good to go. \r\nAnd here's what I have done: I utilize the focusNode property of searchbar class and then I use it in onTapOutside property of underlying textfield.\r\n\r\n```\r\nonTapOutside: _focusNode.unfocus();\r\n```\r\n\r\nthe change has been made [here](https:\/\/github.com\/flutter\/flutter\/blob\/985576dbfdff5e9321941d9f66cb33baed337346\/packages\/flutter\/lib\/src\/material\/search_anchor.dart#L1400) - just added a parameter: onTapOutside","> > ### Use case\r\n> > All the `TextField`s in my app are set to lose focus closing the keyboard when they're tapped outside. I can't do the same on `SearchBar` as the `onTapOutside` property of `TextField` class is not exposed.\r\n> > ### Proposal\r\n> > Introduce `onTextOutside` parameter for `SearchBar` and `SearchAnchor` constructors.\r\n> \r\n> Do you have any other use cases (other than losing the focus) for which you want the `onTapOutside` parameter to be exposed by the Searchbar constructor? If you only want to unfocus it on being tapped outside, this can be implemented internally in the search bar class, and then there would be no need to expose the parameter.\r\n\r\nI have no other use case at the moment, but I think it could be more useful to expose it rather than wrap it. But it's your choice!","> > ### Use case\r\n> > All the `TextField`s in my app are set to lose focus closing the keyboard when they're tapped outside. I can't do the same on `SearchBar` as the `onTapOutside` property of `TextField` class is not exposed.\r\n> > ### Proposal\r\n> > Introduce `onTextOutside` parameter for `SearchBar` and `SearchAnchor` constructors.\r\n> \r\n> Do you have any other use cases (other than losing the focus) for which you want the `onTapOutside` parameter to be exposed by the Searchbar constructor? If you only want to unfocus it on being tapped outside, this can be implemented internally in the search bar class, and then there would be no need to expose the parameter.\r\n\r\nIt can be usefull if you want to clear the SearchController value if you tap outside, and keep the text only on submit","Thanks @aleripe @CicciLeo for sharing this usecase, I will make the relevant changes in the PR based on your responses."],"labels":["c: new feature","framework","f: material design","c: proposal","team-design"]},{"title":"[camera]Recording video results in a black screen at the end of the video.","body":"### Steps to reproduce\r\n\r\n1.initialize everything\r\n2.start recording\r\n3.stop recording\r\n4.initialize video_player controller\r\n5.seekTo the end of the video\r\n6.now you can see a black frame.\r\n\r\nUsing the example code, you can long press the \"camera\" button to film something.\r\nlift up your finger, you will see a player widget with 5 buttons:\r\nplay: start to play this video\r\npause: pause\r\na right arrow: jump to the beginning of this video (Duration.zero)\r\na E: jump to the end of this video (videoController.value.duration)\r\nexit: resume the preview.\r\n\r\nSo, if you press the \"E\" one, you can get a black screen.\r\n\r\nI tested on my iPhone, not sure if this happens on Android devices.\r\n\r\nIt seems that the iOS gallery has applied some optimization for this issue. When viewing the video in the album, there is no black screen anymore. However, when playing the same video using QuickTime, the black screen can be seen again.\r\n\r\n\r\n### Expected results\r\n\r\nit should be the real last frame, instead of a black one.\r\n\r\n### Actual results\r\n\r\na black frame\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:io';\r\n\r\nimport 'package:camera\/camera.dart';\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:video_player\/video_player.dart';\r\n\r\nlate List<CameraDescription> _cameras;\r\n\r\nvoid main() async {\r\n  WidgetsFlutterBinding.ensureInitialized();\r\n  _cameras = await availableCameras();\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatefulWidget {\r\n  const MainApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  State<MainApp> createState() => _MainAppState();\r\n}\r\n\r\nclass _MainAppState extends State<MainApp> {\r\n  late CameraController cameraController;\r\n  late VideoPlayerController videoPlayerController;\r\n\r\n  @override\r\n  void initState() {\r\n    cameraController = CameraController(\r\n      _cameras[0],\r\n      ResolutionPreset.medium,\r\n    );\r\n\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    cameraController.dispose();\r\n    videoPlayerController.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  bool isPlaying = false;\r\n  String filePath = \"\";\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: Stack(\r\n            children: [\r\n              if (!isPlaying)\r\n                FutureBuilder(\r\n                    future: cameraController.initialize(),\r\n                    builder: (context, snapshot) {\r\n                      if (snapshot.connectionState == ConnectionState.done) {\r\n                        return CameraPreview(cameraController);\r\n                      } else {\r\n                        return const CircularProgressIndicator();\r\n                      }\r\n                    }),\r\n              if (isPlaying)\r\n                VideoFrame(\r\n                  videoPlayerController: videoPlayerController,\r\n                  backCallback: () {\r\n                    videoPlayerController.pause();\r\n                    videoPlayerController.dispose();\r\n                    File(filePath).delete();\r\n                    isPlaying = false;\r\n                    setState(() {});\r\n                  },\r\n                ),\r\n              if (!isPlaying)\r\n                Positioned(\r\n                  bottom: 20,\r\n                  right: 20,\r\n                  child: GestureDetector(\r\n                    onLongPressStart: (LongPressStartDetails details) async {\r\n                      await cameraController.startVideoRecording();\r\n                    },\r\n                    onLongPressEnd: (LongPressEndDetails details) async {\r\n                      var file = await cameraController.stopVideoRecording();\r\n                      filePath = file.path;\r\n\r\n                      videoPlayerController =\r\n                          VideoPlayerController.file(File(filePath))\r\n                            ..initialize().then((_) {\r\n                              setState(() {});\r\n                            });\r\n                      isPlaying = true;\r\n                      setState(() {});\r\n                      videoPlayerController.play();\r\n                    },\r\n                    child: Container(\r\n                        height: 90,\r\n                        width: 90,\r\n                        decoration: const BoxDecoration(\r\n                          shape: BoxShape.circle,\r\n                          color: Colors.amber,\r\n                        ),\r\n                        child: const Icon(Icons.camera)),\r\n                  ),\r\n                ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass VideoFrame extends StatelessWidget {\r\n  const VideoFrame(\r\n      {super.key,\r\n      required this.videoPlayerController,\r\n      required this.backCallback});\r\n\r\n  final VideoPlayerController videoPlayerController;\r\n  final Function() backCallback;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Stack(\r\n      children: [\r\n        AspectRatio(\r\n            aspectRatio: videoPlayerController.value.aspectRatio,\r\n            child: VideoPlayer(videoPlayerController)),\r\n        Positioned(\r\n          bottom: 0,\r\n          child: Row(\r\n            children: [\r\n              GestureDetector(\r\n                onTap: () {\r\n                  videoPlayerController.play();\r\n                },\r\n                child: Container(\r\n                    height: 60,\r\n                    width: 60,\r\n                    decoration: const BoxDecoration(\r\n                      shape: BoxShape.circle,\r\n                      color: Colors.amber,\r\n                    ),\r\n                    child: const Icon(Icons.play_arrow)),\r\n              ),\r\n              GestureDetector(\r\n                onTap: () {\r\n                  videoPlayerController.pause();\r\n                },\r\n                child: Container(\r\n                    height: 60,\r\n                    width: 60,\r\n                    decoration: const BoxDecoration(\r\n                      shape: BoxShape.circle,\r\n                      color: Colors.amber,\r\n                    ),\r\n                    child: const Icon(Icons.pause)),\r\n              ),\r\n              GestureDetector(\r\n                onTap: () {\r\n                  videoPlayerController.seekTo(Duration.zero);\r\n                },\r\n                child: Container(\r\n                    height: 60,\r\n                    width: 60,\r\n                    decoration: const BoxDecoration(\r\n                      shape: BoxShape.circle,\r\n                      color: Colors.amber,\r\n                    ),\r\n                    child: const Icon(Icons.start)),\r\n              ),\r\n              GestureDetector(\r\n                onTap: () {\r\n                  videoPlayerController\r\n                      .seekTo(videoPlayerController.value.duration);\r\n                },\r\n                child: Container(\r\n                    height: 60,\r\n                    width: 60,\r\n                    decoration: const BoxDecoration(\r\n                      shape: BoxShape.circle,\r\n                      color: Colors.amber,\r\n                    ),\r\n                    child: const Icon(Icons.e_mobiledata)),\r\n              ),\r\n              GestureDetector(\r\n                onTap: () {\r\n                  backCallback();\r\n                },\r\n                child: Container(\r\n                    height: 60,\r\n                    width: 60,\r\n                    decoration: const BoxDecoration(\r\n                      shape: BoxShape.circle,\r\n                      color: Colors.amber,\r\n                    ),\r\n                    child: const Icon(Icons.exit_to_app_rounded)),\r\n              )\r\n            ],\r\n          ),\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.16.9, on macOS 14.2.1 23C71 darwin-arm64, locale zh-Hans-US)\r\n    \u2022 Flutter version 3.16.9 on channel stable at \/Users\/Documents\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 41456452f2 (7 weeks ago), 2024-01-25 10:06:23 -0800\r\n    \u2022 Engine revision f40e976bed\r\n    \u2022 Dart version 3.2.6\r\n    \u2022 DevTools version 2.28.5\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n    \u2022 Android SDK at \/Users\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.11.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 00008030-000E31623C81802E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.2.1 23C71 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.128\r\n   \r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["I also can reproduce this issue on iOS device `iPhone 7, iOS 15.8` using the latest package `camera: ^0.10.5+9`, `camera_avfoundation: ^0.9.14+1`. Sometimes this doesn't occur (occurrence\/non-occurrence rate is about 50% on my end). And this is not reproduced on Android.\r\n\r\n<details>\r\n<summary>Demo (on iOS)<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/6ea98f00-622f-423c-8337-86406961bffb\r\n\r\n\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.25, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.25 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision fa2f64ad1a (66 minutes ago), 2024-03-13 22:10:38 -0400\r\n    \u2022 Engine revision 599dbd7382\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-229.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.128\r\n    ! Error: iPhone has recently restarted. Xcode will continue when iPhone is unlocked. (code -14)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["platform-ios","p: camera","package","has reproducible steps","P2","team-ios","triaged-ios","found in release: 3.19","found in release: 3.21"]},{"title":"How can we prevent the soft keyboard from popping up","body":"### Steps to reproduce\n\nOn a large-screen Android device, when an external device is enabled and a USB keyboard is connected, opening an app and pressing keys on the keyboard will not trigger the appearance of the soft keyboard. However, once an input box is selected and gains focus, causing the soft keyboard to pop up, if the soft keyboard is subsequently closed and the focus of the input box is cleared, pressing any key on the keyboard in subsequent operations will still trigger the appearance of the soft keyboard, regardless of whether there is focus on any input box at that moment.\r\n<img width=\"458\" alt=\"1710338964102\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/49868852\/522fedc4-75a2-4d64-9ee2-1e0326654d87\">\r\n\n\n### Expected results\n\nWhen an Android device is connected to an external keyboard, regardless of whether the soft keyboard has popped up initially or not, pressing keys on the keyboard after the input box has lost focus will not trigger the appearance of the soft keyboard.\n\n### Actual results\n\nIf an Android device is connected to an external keyboard, and if the soft keyboard has never popped up before, pressing the keys on the external keyboard will not trigger the appearance of the soft keyboard. However, if the soft keyboard has popped up before, even if there is no input box on the screen and the user presses keys on the keyboard to input, the soft keyboard will still appear.\r\nHow can we prevent the soft keyboard from popping up?\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatefulWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  State<MyApp> createState() => _MyAppState();\r\n}\r\n\r\nclass _MyAppState extends State<MyApp> {\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        appBar: AppBar(\r\n          title: const Text('example app'),\r\n        ),\r\n        body: Column(\r\n          children: [\r\n            TextField(),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<img width=\"458\" alt=\"1710338964102\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/49868852\/ca43d954-9829-4e1f-b523-3dfd68c14f4e\">\r\n\r\n[keyborad.webm](https:\/\/github.com\/flutter\/flutter\/assets\/49868852\/07d79325-218e-4959-a765-9081a9d012fb)\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nflutter doctor -v\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [\u7248\u672c 10.0.22631.3155], locale zh-CN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\Users\\cc\\onSDKS\\flutterDir\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\cc\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Platform android-UpsideDownCakePrivacySandbox, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = C:\\Users\\cc\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Java binary at: C:\\Users\\cc\\.jdks\\corretto-17.0.9\\bin\\java.exe\r\n    \u2022 Java version OpenJDK Runtime Environment Corretto-17.0.9.8.1 (build 17.0.9+8-LTS)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[X] Chrome - develop for the web (Cannot find Chrome executable at C:\\Program Files (x86)\\Chromebrowser\\Chrome.exe)\r\n    ! C:\\Program Files (x86)\\Chromebrowser\\Chrome.exe is not executable.\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.7)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34601.278\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[!] Android Studio (not installed)\r\n    \u2022 Android Studio not found; download from https:\/\/developer.android.com\/studio\/index.html\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.2)\r\n    \u2022 IntelliJ at C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2023.2.3\r\n    \u2022 Flutter plugin version 77.1.3\r\n    \u2022 Dart plugin version 232.10248\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\cc\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 sdk gpc x86 64 (mobile) \u2022 emulator-5554 \u2022 android-x64    \u2022 Android 13 (API 33) (emulator)\r\n    \u2022 Windows (desktop)       \u2022 windows       \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22631.3155]\r\n    \u2022 Edge (web)              \u2022 edge          \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["I hope that after the soft keyboard pops up for the first time, subsequent pressing of keys on the external keyboard will not trigger the appearance of the soft keyboard even if the input box has lost focus.","I can reproduce this issue on the latest stable channel with this setup: casting Android device to host machine (macOS) using [scrcpy](https:\/\/github.com\/Genymobile\/scrcpy) and use the connected physical keyboard to reproduce this. Even when I `unfocus` the TextField when tapping outside it with `FocusScope.of(context).unfocus()`, the issue still occurs.\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Home(),\r\n    ),\r\n  );\r\n}\r\n\r\nclass Home extends StatelessWidget {\r\n  const Home({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return GestureDetector(\r\n      onTap: () => FocusScope.of(context).unfocus(),\r\n      child: const Scaffold(\r\n        body: Center(\r\n          child: TextField(),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\nHowever, when I switch to master channel, it seems to be fixed. Could you switch to master channel and re-check this with your setup?\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.25, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.25 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision fa2f64ad1a (66 minutes ago), 2024-03-13 22:10:38 -0400\r\n    \u2022 Engine revision 599dbd7382\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-229.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.128\r\n    ! Error: iPhone has recently restarted. Xcode will continue when iPhone is unlocked. (code -14)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n","Yes, when I switch to the main channel, I found that using peripheral devices did not call up the soft keyboard display. I have restricted the soft keyboard popping up when pressing the peripheral devices in the stable version.\r\n\r\nI would like to ask if in the future motherboard, the soft keyboard input display and the issue of the soft keyboard popping up again after clicking the peripheral keyboard after losing focus in the stable version have been updated and fixed.\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n\r\nflutter doctor -v\r\nFlutter assets will be downloaded from https:\/\/storage.flutter-io.cn. Make sure you trust this source!\r\n[\u221a] Flutter (Channel master, 3.21.0-13.0.pre.20, on Microsoft Windows [\u7248\u672c 10.0.22631.3296], locale zh-CN)\r\n    \u2022 Flutter version 3.21.0-13.0.pre.20 on channel master at C:\\Users\\cc\\onSDKS\\flutterDir\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 085dbd85f9 (5 hours ago), 2024-03-22 21:43:20 -0400\r\n    \u2022 Engine revision 8a51e124fb\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-262.0.dev)\r\n    \u2022 DevTools version 2.34.0-dev.12\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\cc\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Platform android-UpsideDownCakePrivacySandbox, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = C:\\Users\\cc\\AppData\\Local\\Android\\Sdk\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[X] Chrome - develop for the web (Cannot find Chrome executable at C:\\Program Files (x86)\\Chromebrowser\\Chrome.exe)\r\n    ! C:\\Program Files (x86)\\Chromebrowser\\Chrome.exe is not executable.\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.7)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34601.278\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u221a] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.2)\r\n    \u2022 IntelliJ at C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2023.2.3\r\n    \u2022 Flutter plugin version 77.1.3\r\n    \u2022 Dart plugin version 232.10248\r\n\r\n[\u221a] VS Code (version 1.87.2)\r\n    \u2022 VS Code at C:\\Users\\cc\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 D3 503 (mobile)   \u2022 192.168.0.104:5555 \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 Windows (desktop) \u2022 windows            \u2022 windows-x64    \u2022 Microsoft Windows [\u7248\u672c 10.0.22631.3296]\r\n    \u2022 Edge (web)        \u2022 edge               \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n"],"labels":["in triage"]},{"title":"Flutter Web - Enable option to give semantics role combobox","body":"### Use case\n\nTried all the semantic properties but can't set a role combobox. Give a proper way to filled a dropdown button with the right accessibility role. So the `flt-semantics` to have `role: combobox`.\n\n### Proposal\n\nIt looks like `expanded` property is not changing anything on Flutter web. So as a suggestion when it is set to `expanded: false` it could change the role of flt-semantics to combobox.\r\n\r\nExample:\r\n```\r\n<flt-semantics id=\"flt-semantic-node-68\" role=\"combobox\" tabindex=\"0\" aria-label=\"Time\r\nNow\" flt-tappable=\"\" style=\"position: absolute; width: 392px; height: 74px; transform-origin: 0px 0px 0px; transform: matrix(1, 0, 0, 1, 16, 62); pointer-events: all; z-index: 3;\"><\/flt-semantics>\r\n```","comments":["This will need work on the framework too."],"labels":["c: new feature","framework","engine","a: accessibility","platform-web","c: proposal","P2","team-web","triaged-web"]},{"title":"java.lang.NullPointerException: Attempt to invoke virtual method 'boolean android.content.Context.isUiContext()' on a null object reference","body":"### Steps to reproduce\r\n\r\nI am using Flutter to design an application for a POS terminal. I have initially created an application using same SDK with Kotlin on android and the application works perfectly. I've now decided to use MethodChannel to extend my Kotlin code to the Flutter application in order to be able to give it an interface and I have not being able to get it to work as expected.\r\n\r\nNOTE: I have used `applicationContext` and `this@MainActivity` in place of my context when initialising but both still didn't work. I've also tried to do my initialising under `onCreate` method but still not working\r\n\r\n### Expected results\r\n\r\nThe POS terminal is supposed to print through its printer\r\n\r\n### Actual results\r\n\r\n```\r\nI\/PrintTemplate( 9049): view == null\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): Failed to handle method call\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): java.lang.NullPointerException: Attempt to invoke virtual method 'boolean android.content.Context.isUiContext()' on a null object reference\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.view.ViewConfiguration.get(ViewConfiguration.java:502)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.view.View.<init>(View.java:5320)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.view.View.<init>(View.java:5470)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.widget.TextView.<init>(TextView.java:996)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.widget.TextView.<init>(TextView.java:990)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.widget.TextView.<init>(TextView.java:986)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.widget.TextView.<init>(TextView.java:982)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.topwise.cloudpos.aidl.printer.PrnTextView.<init>(PrnTextView.java:12)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.topwise.cloudpos.aidl.printer.PrintTemplate.getPrnTextView(PrintTemplate.java:259)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.topwise.cloudpos.aidl.printer.PrintTemplate.add(PrintTemplate.java:81)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.uniswitch.octopus.MainActivity.useThePrinter(MainActivity.kt:123)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.uniswitch.octopus.MainActivity.configureFlutterEngine$lambda-0(MainActivity.kt:83)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.uniswitch.octopus.MainActivity.$r8$lambda$WTepWXtvJEBEx0VakVxbQpPmg08(Unknown Source:0)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.uniswitch.octopus.MainActivity$$ExternalSyntheticLambda0.onMethodCall(Unknown Source:2)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:267)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(DartMessenger.java:292)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(DartMessenger.java:319)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run(Unknown Source:12)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.os.Handler.handleCallback(Handler.java:938)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.os.Looper.loop(Looper.java:223)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat android.app.ActivityThread.main(ActivityThread.java:7723)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat java.lang.reflect.Method.invoke(Native Method)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:618)\r\nE\/MethodChannel#samples.flutter.dev\/battery( 9049): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:997)\r\nE\/flutter ( 9049): [ERROR:flutter\/runtime\/dart_vm_initializer.cc(41)] Unhandled Exception: PlatformException(error, Attempt to invoke virtual method 'boolean android.content.Context.isUiContext()' on a null object reference, null, java.lang.NullPointerException: Attempt to invoke virtual method 'boolean android.content.Context.isUiContext()' on a null object reference\r\nE\/flutter ( 9049): \tat android.view.ViewConfiguration.get(ViewConfiguration.java:502)\r\nE\/flutter ( 9049): \tat android.view.View.<init>(View.java:5320)\r\nE\/flutter ( 9049): \tat android.view.View.<init>(View.java:5470)\r\nE\/flutter ( 9049): \tat android.widget.TextView.<init>(TextView.java:996)\r\nE\/flutter ( 9049): \tat android.widget.TextView.<init>(TextView.java:990)\r\nE\/flutter ( 9049): \tat android.widget.TextView.<init>(TextView.java:986)\r\nE\/flutter ( 9049): \tat android.widget.TextView.<init>(TextView.java:982)\r\nE\/flutter ( 9049): \tat com.topwise.cloudpos.aidl.printer.PrnTextView.<init>(PrnTextView.java:12)\r\nE\/flutter ( 9049): \tat com.topwise.cloudpos.aidl.printer.PrintTemplate.getPrnTextView(PrintTemplate.java:259)\r\nE\/flutter ( 9049): \tat com.topwise.cloudpos.aidl.printer.PrintTemplate.add(PrintTemplate.java:81)\r\nE\/flutter ( 9049): \tat com.uniswitch.octopus.MainActivity.useThePrinter(MainActivity.kt:123)\r\nE\/flutter ( 9049): \tat com.uniswitch.octopus.MainActivity.configureFlutterEngine$lambda-0(MainActivity.kt:83)\r\nE\/flutter ( 9049): \tat com.uniswitch.octopus.MainActivity.$r8$lambda$WTepWXtvJEBEx0VakVxbQpPmg08(Unknown Source:0)\r\nE\/flutter ( 9049): \tat com.uniswitch.octopus.MainActivity$$ExternalSyntheticLambda0.onMethodCall(Unknown Source:2)\r\nE\/flutter ( 9049): \tat io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:267)\r\nE\/flutter ( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger.invokeHandler(DartMessenger.java:292)\r\nE\/flutter ( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger.lambda$dispatchMessageToQueue$0$io-flutter-embedding-engine-dart-DartMessenger(DartMessenger.java:319)\r\nE\/flutter ( 9049): \tat io.flutter.embedding.engine.dart.DartMessenger$$ExternalSyntheticLambda0.run(Unknown Source:12)\r\nE\/flutter ( 9049): \tat android.os.Handler.handleCallback(Handler.java:938)\r\nE\/flutter ( 9049): \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\nE\/flutter ( 9049): \tat android.os.Looper.loop(Looper.java:223)\r\nE\/flutter ( 9049): \tat android.app.ActivityThread.main(ActivityThread.java:7723)\r\nE\/flutter ( 9049): \tat java.lang.reflect.Method.invoke(Native Method)\r\nE\/flutter ( 9049): \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:618)\r\nE\/flutter ( 9049): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:997)\r\nE\/flutter ( 9049): )\r\nE\/flutter ( 9049): #0      StandardMethodCodec.decodeEnvelope (package:flutter\/src\/services\/message_codecs.dart:651:7)\r\nE\/flutter ( 9049): #1      MethodChannel._invokeMethod (package:flutter\/src\/services\/platform_channel.dart:334:18)\r\nE\/flutter ( 9049): <asynchronous suspension>\r\nE\/flutter ( 9049): #2      _MyHomePageState.usePrinter (package:octopus\/main.dart:83:20)\r\nE\/flutter ( 9049): <asynchronous suspension>\r\nE\/flutter ( 9049): \r\nD\/ViewRootImpl( 9049): setSurfaceViewCreated, created:false\r\nV\/PhoneWindow( 9049): DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@9507767, this = DecorView@c4e6914[MainActivity]\r\n```\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:developer';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/services.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  \/\/ This widget is the root of your application.\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  static const platform = MethodChannel('samples.flutter.dev\/battery');\r\n  int _counter = 0;\r\n  String _batteryLevel = 'Unknown battery level.';\r\n\r\n  Future<void> _getBatteryLevel() async {\r\n    String batteryLevel;\r\n    try {\r\n      final result = await platform.invokeMethod<int>('getBatteryLevel');\r\n      batteryLevel = 'Battery level at $result% .';\r\n\r\n      setState(() {\r\n        _batteryLevel = batteryLevel;\r\n      });\r\n    } on PlatformException catch (e) {\r\n      log('There is an error ${e.message}');\r\n      batteryLevel = \"Failed to get battery level: '${e.message}'.\";\r\n    } catch (e) {\r\n      log('unknown error ${e.toString()}');\r\n    }\r\n  }\r\n\r\n  Future<void> usePrinter() async {\r\n    final result = await platform.invokeMethod(\r\n      'usePrinter',\r\n      {\r\n        'firstname': 'Abdul',\r\n        'lastname': 'Olatunde',\r\n      },\r\n    );\r\n  }\r\n\r\n  void _incrementCounter() {\r\n    setState(() {\r\n      _counter++;\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            ElevatedButton(\r\n              onPressed: _getBatteryLevel,\r\n              child: const Text('Get battery Level'),\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: usePrinter,\r\n              child: const Text('Print'),\r\n            ),\r\n            Text(_batteryLevel),\r\n            const Text(\r\n              'You have pushed the button this many times:',\r\n            ),\r\n            Text(\r\n              '$_counter',\r\n              style: Theme.of(context).textTheme.headlineMedium,\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n      floatingActionButton: FloatingActionButton(\r\n        onPressed: _incrementCounter,\r\n        tooltip: 'Increment',\r\n        child: const Icon(Icons.add),\r\n      ), \/\/ This trailing comma makes auto-formatting nicer for build methods.\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nMy Kotlin code\r\n\r\n```kotlin\r\npackage com.example.test\r\n\r\nimport android.content.ContextWrapper\r\nimport android.content.Intent\r\nimport android.content.IntentFilter\r\nimport android.os.BatteryManager\r\nimport android.os.Build\r\nimport android.os.Build.VERSION\r\nimport android.os.Build.VERSION_CODES\r\nimport android.os.Bundle\r\nimport android.os.RemoteException\r\nimport android.util.Log\r\nimport com.topwise.cloudpos.aidl.printer.AidlPrinter\r\nimport com.topwise.cloudpos.aidl.printer.AidlPrinterListener\r\nimport com.topwise.cloudpos.aidl.printer.PrintTemplate\r\nimport com.topwise.cloudpos.aidl.printer.TextUnit\r\nimport com.topwise.cloudpos.service.DeviceServiceManager\r\nimport io.flutter.embedding.android.FlutterActivity\r\nimport io.flutter.embedding.engine.FlutterEngine\r\nimport io.flutter.plugin.common.MethodChannel\r\nimport java.text.SimpleDateFormat\r\nimport java.util.Date\r\n\r\n\r\nprivate var printRunning = false\r\n\r\nclass MainActivity : FlutterActivity() {\r\n    private val CHANNEL = \"samples.flutter.dev\/battery\"\r\n    private var printerDev: AidlPrinter? = null\r\n    private lateinit var mListen: AidlPrinterListener\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n    }\r\n\r\n\r\n    override fun configureFlutterEngine(flutterEngine: FlutterEngine) {\r\n        super.configureFlutterEngine(flutterEngine)\r\n        DeviceServiceManager.getInstance().init(this@MainActivity)\r\n        printerDev = DeviceServiceManager.getInstance().printManager\r\n        mListen = object : AidlPrinterListener.Stub() {\r\n            @Throws(RemoteException::class)\r\n            override fun onError(i: Int) {\r\n                printRunning = false\r\n            }\r\n\r\n            @Throws(RemoteException::class)\r\n            override fun onPrintFinish() {\r\n                val endTime = getCurTime()\r\n                printRunning = false\r\n            }\r\n        }\r\n\r\n        MethodChannel(\r\n            flutterEngine.dartExecutor.binaryMessenger,\r\n            CHANNEL\r\n        ).setMethodCallHandler { call, result ->\r\n            if (call.method == \"getBatteryLevel\") {\r\n                val batteryLevel = getBatteryLevel()\r\n\r\n                if (batteryLevel != -1) {\r\n                    result.success(batteryLevel)\r\n                } else {\r\n                    result.error(\"UNAVAILABLE\", \"Battery level not available.\", null)\r\n                }\r\n            } else {\r\n                if (call.method == \"usePrinter\") {\r\n                    val arguments: Map<String, String>? = call.arguments()\r\n                    useThePrinter(arguments)\r\n\r\n                } else {\r\n                    result.notImplemented()\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    private fun getBatteryLevel(): Int {\r\n        val batteryLevel: Int = if (VERSION.SDK_INT >= VERSION_CODES.LOLLIPOP) {\r\n            val batteryManager = getSystemService(BATTERY_SERVICE) as BatteryManager\r\n            batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY)\r\n        } else {\r\n            val intent = ContextWrapper(applicationContext).registerReceiver(\r\n                null,\r\n                IntentFilter(Intent.ACTION_BATTERY_CHANGED)\r\n            )\r\n            intent!!.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) * 100 \/ intent.getIntExtra(\r\n                BatteryManager.EXTRA_SCALE,\r\n                -1\r\n            )\r\n        }\r\n\r\n        return batteryLevel\r\n    }\r\n\r\n    private fun printAddLineFree(template: PrintTemplate) {\r\n        if (Build.DISPLAY.contains(\"Z3909\")) {\r\n            template.add(TextUnit(\"\"))\r\n        }\r\n    }\r\n\r\n    private fun useThePrinter(names: Map<String, String>?) {\r\n\r\n        val template = PrintTemplate.getInstance()\r\n        template.clear()\r\n        template.add(TextUnit(\"Firstname: ${names?.get(\"firstname\")}\"))\r\n        template.add(TextUnit(\"Lastname: ${names?.get(\"lastname\")}\"))\r\n        printAddLineFree(template)\r\n        printerDev?.addRuiImage(template.printBitmap, 0)\r\n        printRunning = true\r\n        printerDev?.printRuiQueue(mListen)\r\n    }\r\n\r\n    private fun getCurTime(): String {\r\n        val date = Date(System.currentTimeMillis())\r\n        val format = SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss:SSS\")\r\n        return format.format(date)\r\n    }\r\n}\r\n\r\n```\r\n\r\nI added this permission to my xml file\r\n```xml\r\n<uses-permission android:name=\"android.permission.CLOUDPOS_PRINTER\"\/>\r\n```\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.19.2, on macOS 14.3.1 23D60 darwin-x64, locale en-NG)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/smilingfarood\/development\/flutter\r\n    ! Warning: `dart` on your path resolves to \/usr\/local\/Cellar\/dart\/2.15.1\/libexec\/bin\/dart, which is not\r\n      inside your current Flutter SDK checkout at \/Users\/smilingfarood\/development\/flutter. Consider adding\r\n      \/Users\/smilingfarood\/development\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (2 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\"\r\n      directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n    \u2022 Android SDK at \/Users\/smilingfarood\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.1\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.3)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2021.2.3)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA CE.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 T3 (mobile)     \u2022 HD9437C000142 \u2022 android-arm    \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop) \u2022 macos         \u2022 darwin-x64     \u2022 macOS 14.3.1 23D60 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @SmilingFarood, does the `getBatteryLevel` method call work for you?\r\n\r\nAre you using an SDK specifically for the printer? Can you provide that sdk as well? Does the sdk require the printer to be connected? \r\n\r\n","> Are you using an SDK specifically for the printer? Can you provide that sdk as well? Does the sdk require the printer to be connected?\r\n\r\nYes the `getBatteryLevel` method works perfectly. Yes I am using the SDK for the printer. It works for other things too but I need to first initialise it and when initialising, I need to provide the context. In a normal android project, the `applicationContext` works just fine but not same on a Flutter `MethodChannel` project","@SmilingFarood \r\nCan you provide us the repo that we can clone directly and run locally to verify this further ?\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"DropdownMenu TrailingIcon can't be styled through providing an IconButtonTheme","body":"### Steps to reproduce\n\nThe issue is that I want to style the `trailingIcon` of a `DropdownMenu` to not have a hover effect or splash factory. The `Icon` is internally represented by an `IconButton`. Therefore I want to wrap my DropdownMenu with an `IconButtonTheme` and provide the style this way. \r\n \r\n1. Create a `DropdownMenu` and wrap it with a `IconButtonTheme`\r\n2. Observe that the properties set in the `IconButtonTheme` are not used to style the `trailingIcon`\r\n\r\n\r\n\r\n\n\n### Expected results\n\nI expect that the `IconButton` within the `DropdownMenu` finds the Theme in the widget tree and uses the provided values.\r\nThe same behavior which is displayed when just wrapping an `IconButton` in an `IconButtonTheme`. (as seen in the Example)\n\n### Actual results\n\nThe `IconButton` which is wrapping the trailingIcon of the `DropdownMenu` is ignoring the properties provided by the `IconButtonTheme`.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n            IconButtonTheme(\r\n              data: IconButtonThemeData(\r\n                style: ButtonStyle(\r\n                  splashFactory: NoSplash.splashFactory,\r\n                  overlayColor: MaterialStateProperty.all(Colors.transparent),\r\n                ),\r\n              ),\r\n              child: IconButton(\r\n                onPressed: () {\r\n                  print('');\r\n                },\r\n                icon: const Icon(Icons.ac_unit),\r\n              ),\r\n            ),\r\n            IconButtonTheme(\r\n              data: IconButtonThemeData(\r\n                style: ButtonStyle(\r\n                  splashFactory: NoSplash.splashFactory,\r\n                  overlayColor: MaterialStateProperty.all(Colors.transparent),\r\n                ),\r\n              ),\r\n              child: DropdownMenu(\r\n                dropdownMenuEntries: [\r\n                  const DropdownMenuEntry(label: 'Item 1', value: 'Item 1'),\r\n\r\n                ],\r\n                trailingIcon: const Icon(Icons.arrow_drop_down),\r\n              ),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/11629987\/ca5f7b02-1fda-4e04-872a-1c7aa4dae91c\r\n\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale\r\n    en-US)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/felix\/development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/felix\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2717] Xcode - develop for iOS and macOS\r\n    \u2717 Xcode installation is incomplete; a full installation is necessary for iOS\r\n      and macOS development.\r\n      Download at: https:\/\/developer.apple.com\/xcode\/\r\n      Or install Xcode via the App Store.\r\n      Once installed, run:\r\n        sudo xcode-select --switch \/Applications\/Xcode.app\/Contents\/Developer\r\n        sudo xcodebuild -runFirstLaunch\r\n    \u2717 CocoaPods not installed.\r\n        CocoaPods is used to retrieve the iOS and macOS platform side's plugin\r\n        code that responds to your plugin usage on the Dart side.\r\n        Without CocoaPods, plugins will not work on iOS or macOS.\r\n        For more info, see https:\/\/flutter.dev\/platform-plugins\r\n      To install see\r\n      https:\/\/guides.cocoapods.org\/using\/getting-started.html#installation for\r\n      instructions.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build\r\n      17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.3.4)\r\n    \u2022 IntelliJ at \/Users\/felix\/Applications\/IntelliJ IDEA Community Edition.app\r\n    \u2022 Flutter plugin version 78.3.1\r\n    \u2022 Dart plugin version 233.13763.5\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.82.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report @felixwoestmann \r\nCan you try https:\/\/api.flutter.dev\/flutter\/material\/DropdownMenuThemeData-class.html and check if using it, you get the desired result ?\r\n","Thank you for your response, but the `DropdownMenuTheme` does not provide the option as far as I can see.","Thanks for the feedback. I do see the same behavior as reported.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.25, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.25 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision fa2f64ad1a (4 hours ago), 2024-03-13 22:10:38 -0400\r\n    \u2022 Engine revision 599dbd7382\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-229.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>"],"labels":["framework","f: material design","has reproducible steps","team-design","found in release: 3.19","found in release: 3.21"]},{"title":"[go_router] onExit doesn't inform of navigation type","body":"### Use case\n\nHi,\r\nWhen using the onExit feature it would be useful to know what type of navigation is taking place (forwards\/backwards, go\/push\/pop, etc).\r\n\r\nWe're looking at a use case whereby we want to intercept the back functionality of the browser but any forward or push\/go functionality is ignored.\n\n### Proposal\n\nSome way of accessing this information.  Either through another parameter to onExit or something attached to the context that is passed to onExit currently.","comments":[],"labels":["c: new feature","package","c: proposal","p: go_router","team-go_router"]},{"title":"[SingleChildScrollView] Jitter when updating text during overscroll","body":"### Steps to reproduce\n\nIn my prodution app I have a visible stopwatch on a `SingleChildScrollView`. I've included sample code which has the same issue. I think it's related to https:\/\/github.com\/flutter\/flutter\/pull\/136239, but that one is already closed.\r\n\r\n1. run the example app\r\n2. try to scroll up\n\n### Expected results\n\nThe scroll position stays the same and there's no visible jitter.\n\n### Actual results\n\nThe scroll position is reset everytime the text gets updated.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:async';\r\nimport 'dart:math';\r\n\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatelessWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(),\r\n      body: SingleChildScrollView(\r\n        child: Column(\r\n          children: [\r\n            const _Counter(),\r\n            for (var i = 0; i < 15; i++)\r\n              Container(\r\n                height: 100,\r\n                color: Color.fromRGBO(Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1),\r\n              ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass _Counter extends StatefulWidget {\r\n  const _Counter();\r\n\r\n  @override\r\n  State<_Counter> createState() => __CounterState();\r\n}\r\n\r\nclass __CounterState extends State<_Counter> {\r\n  int _count = 0;\r\n\r\n  @override\r\n  void initState() {\r\n    Timer.periodic(const Duration(milliseconds: 500), (timer) {\r\n      setState(() {\r\n        _count++;\r\n      });\r\n    });\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Text('$_count');\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n**Expected behaviour**\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/27430651\/a74ba7bb-9598-45f4-88bc-34be11faa897\r\n\r\n**Actual behaviour**\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/27430651\/350a7881-96d3-4eb3-b035-6e0ff84982a6\r\n\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n_No response_\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nflutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale nl-NL)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n[\u2713] Android Studio (version 2023.2)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (2 available)\r\n    ! Error: Browsing on the local area network for iPhone van Govert. Ensure the device is unlocked and attached with a cable or associated with the same\r\n      local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the code sample provided above. \r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (6 available)\r\n    \u2022 Pixel 7 (mobile)     \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Pixel 7 (mobile)     \u2022 192.168.8.151:39133       \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-5.0.pre.23, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-5.0.pre.23 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (13 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (7 available)\r\n    \u2022 Pixel 7 (mobile)                \u2022 28291FDH2001SA            \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Pixel 7 (mobile)                \u2022 192.168.8.151:39133       \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>","It happens in iOS Impeller"],"labels":["framework","f: scrolling","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"[go_router] Duplicate GlobalKey detected in widget tree exception thrown in Flutter Web when click web browser backward button","body":"### Steps to reproduce\n\nIn debug mode, click `Go To PageTwo` button to navigate to PageTwo, then click the back button of the browser to return to PageOne.\n\n### Expected results\n\nPageOne should be displayed.\n\n### Actual results\n\nThe view doesn't change, the debug portal throws `Duplicate GlobalKey detected in widget tree` exception.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nGlobalKey<NavigatorState> rootNavigatorKey = GlobalKey<NavigatorState>();\r\n\r\nfinal router = GoRouter(\r\n    debugLogDiagnostics: true,\r\n    navigatorKey: rootNavigatorKey,\r\n    initialLocation: \"\/\",\r\n    routes: [\r\n      GoRoute(path: '\/', builder: (context, state) => const PageOne()),\r\n      GoRoute(path: '\/2', builder: (context, state) => const PageTwo()),\r\n    ]);\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  \/\/ This widget is the root of your application.\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n        title: 'Flutter Demo',\r\n        theme: ThemeData(\r\n          colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n          useMaterial3: true,\r\n        ),\r\n        home: MaterialApp.router(\r\n          routerConfig: router,\r\n        ));\r\n  }\r\n}\r\n\r\nclass PageOne extends StatelessWidget {\r\n  const PageOne({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            const Text('PageOne'),\r\n            const SizedBox(\r\n              height: 30,\r\n            ),\r\n            ElevatedButton(\r\n                onPressed: () {\r\n                  context.go('\/2');\r\n                },\r\n                child: const Text('Go To PageTwo'))\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass PageTwo extends StatelessWidget {\r\n  const PageTwo({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            const Text('Page Two'),\r\n            const SizedBox(\r\n              height: 30,\r\n            ),\r\n            ElevatedButton(\r\n                onPressed: () {\r\n                  context.go('\/');\r\n                },\r\n                child: const Text('Back to PageOne'))\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n![1](https:\/\/github.com\/flutter\/flutter\/assets\/52510584\/83a60b3a-e4e4-4919-ab66-883d05cbaf23)\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale zh-Hans-CN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/billchen\/Flutter\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0-rc3)\r\n    \u2022 Android SDK at \/Users\/billchen\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0-rc3\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.2.4)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA 2.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I also can reproduce this issue.\r\n\r\n<details>\r\n<summary>Output exception<\/summary>\r\n\r\n```console\r\n\u2550\u2550\u2561 EXCEPTION CAUGHT BY WIDGETS LIBRARY \u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\nThe following assertion was thrown while finalizing the widget tree:\r\nDuplicate GlobalKey detected in widget tree.\r\nThe following GlobalKey was specified multiple times in the widget tree. This will lead to parts of\r\nthe widget tree being truncated unexpectedly, because the second time a key is seen, the previous\r\ninstance is moved to the new location. The key was:\r\n- [LabeledGlobalKey<NavigatorState>#37443]\r\nThis was determined by noticing that after the widget with the above global key was moved out of its\r\nprevious parent, that previous parent never updated during this frame, meaning that it either did\r\nnot update at all or updated before the widget was moved, in either case implying that it still\r\nthinks that it should have a child with that global key.\r\nThe specific parent that did not update after having one or more children forcibly removed due to\r\nGlobalKey reparenting is:\r\n- HeroControllerScope\r\nA GlobalKey can only be specified on one widget at a time in the widget tree.\r\n\r\nWhen the exception was thrown, this was the stack:\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 296:3       throw_\r\npackages\/flutter\/src\/widgets\/framework.dart 3235:15                               <fn>\r\npackages\/flutter\/src\/widgets\/framework.dart 3259:16                               finalizeTree\r\npackages\/flutter\/src\/widgets\/binding.dart 1028:7                                  drawFrame\r\npackages\/flutter\/src\/rendering\/binding.dart 443:5                                 [_handlePersistentFrameCallback]\r\npackages\/flutter\/src\/scheduler\/binding.dart 1392:7                                [_invokeFrameCallback]\r\npackages\/flutter\/src\/scheduler\/binding.dart 1313:9                                handleDrawFrame\r\npackages\/flutter\/src\/scheduler\/binding.dart 1171:5                                [_handleDrawFrame]\r\nlib\/_engine\/engine\/platform_dispatcher.dart 1404:5                                invoke\r\nlib\/_engine\/engine\/platform_dispatcher.dart 307:5                                 invokeOnDrawFrame\r\nlib\/_engine\/engine\/initialization.dart 187:36                                     <fn>\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 426:37  _checkAndCall\r\ndart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 431:39  dcall\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.37, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.37 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (3 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","I encountered the same since upgrading to **Flutter 3.19.3** and the latest **GoRouter 13.2.0** for my **Flutter Web** project. The issue does not only create duplicate GlobalKey, it creates duplicate of branches of widgets under MaterialApp.router during rebuild of pages navigation. In my case, whenever the page is refresh or the signs out. Please have a look at the Widget Inspector below. 4 scaffolds were rebuild when I click on page refresh.\r\n\r\n![Screenshot 2024-03-14 at 3 00 39\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/46311851\/3a05bb09-ef9f-493a-a7f4-1baf1a668494)\r\n\r\nBecause of the rebuild, other than GlobalKey, it also duplicates the ScrollController.\r\n\r\nWhen the widget tree becomes unstable, the following exception comes out:\r\n\r\n\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by scheduler library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n\r\nThe following assertion was thrown during a scheduler callback:\r\n\r\n\r\nAssertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/window.dart:91:12\r\n!isDisposed\r\n\"Trying to render a disposed EngineFlutterView.\"\r\n\r\n\r\nWhen the exception was thrown, this was the stack:\r\nhttp:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 297:3       throw_\r\nhttp:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 38:3        assertFailed\r\nhttp:\/\/localhost:55987\/lib\/_engine\/engine\/window.dart 91:13                                              render\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/view.dart 256:7                                    compositeFrame\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 587:19                                drawFrame\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/widgets\/binding.dart 991:13                                  drawFrame\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 448:5                                 [_handlePersistentFrameCallback]\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7                                [_invokeFrameCallback]\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1311:9                                handleDrawFrame\r\nhttp:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1169:5                                [_handleDrawFrame]\r\nhttp:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 1346:5                                invoke\r\nhttp:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 260:5                                 invokeOnDrawFrame\r\nhttp:\/\/localhost:55987\/lib\/_engine\/engine\/initialization.dart 185:36                                     <fn>\r\nhttp:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37  _checkAndCall\r\nhttp:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39  dcall\r\n\r\n\r\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550","> I encountered the same since upgrading to **Flutter 3.19.3** and the latest **GoRouter 13.2.0** for my **Flutter Web** project. The issue does not only create duplicate GlobalKey, it creates duplicate of branches of widgets under MaterialApp.router during rebuild of pages navigation. In my case, whenever the page is refresh or the signs out. Please have a look at the Widget Inspector below. 4 scaffolds were rebuild when I click on page refresh.\r\n> \r\n> ![Screenshot 2024-03-14 at 3 00 39\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312732725-3a05bb09-ef9f-493a-a7f4-1baf1a668494.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDA3MzIsIm5iZiI6MTcxMDQwMDQzMiwicGF0aCI6Ii80NjMxMTg1MS8zMTI3MzI3MjUtM2EwNWJiMDktZWY5Zi00OTNhLWE3ZjQtMWJhZjFhNjY4NDk0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA3MTM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZkMDY3YzY1YWYwNGI4YjI5MDU1OGY0OGRlM2JhYjUxNjU2MTk4MjBjMTY0NDBlODVkZjJhZjE2YjhkMTU5OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.v0jjPs1mlCgSo-6YOt7CN7HGsuQR_JovSNRlkER07Tk)\r\n> \r\n> Because of the rebuild, other than GlobalKey, it also duplicates the ScrollController.\r\n> \r\n> When the widget tree becomes unstable, the following exception comes out:\r\n> \r\n> \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by scheduler library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> \r\n> The following assertion was thrown during a scheduler callback:\r\n> \r\n> Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/window.dart:91:12 !isDisposed \"Trying to render a disposed EngineFlutterView.\"\r\n> \r\n> When the exception was thrown, this was the stack: http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 297:3 throw_ http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 38:3 assertFailed http:\/\/localhost:55987\/lib\/_engine\/engine\/window.dart 91:13 render http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/view.dart 256:7 compositeFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 587:19 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/widgets\/binding.dart 991:13 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 448:5 [_handlePersistentFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7 [_invokeFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1311:9 handleDrawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1169:5 [_handleDrawFrame] http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 1346:5 invoke http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 260:5 invokeOnDrawFrame http:\/\/localhost:55987\/lib\/_engine\/engine\/initialization.dart 185:36 http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37 _checkAndCall http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39 dcall\r\n> \r\n> \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\nThe problem you're facing may have been solved on beta\/master channel, please take a look at this: [https:\/\/github.com\/flutter\/flutter\/issues\/141253](url)","> > I encountered the same since upgrading to **Flutter 3.19.3** and the latest **GoRouter 13.2.0** for my **Flutter Web** project. The issue does not only create duplicate GlobalKey, it creates duplicate of branches of widgets under MaterialApp.router during rebuild of pages navigation. In my case, whenever the page is refresh or the signs out. Please have a look at the Widget Inspector below. 4 scaffolds were rebuild when I click on page refresh.\r\n> > ![Screenshot 2024-03-14 at 3 00 39\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312732725-3a05bb09-ef9f-493a-a7f4-1baf1a668494.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDA3MzIsIm5iZiI6MTcxMDQwMDQzMiwicGF0aCI6Ii80NjMxMTg1MS8zMTI3MzI3MjUtM2EwNWJiMDktZWY5Zi00OTNhLWE3ZjQtMWJhZjFhNjY4NDk0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA3MTM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZkMDY3YzY1YWYwNGI4YjI5MDU1OGY0OGRlM2JhYjUxNjU2MTk4MjBjMTY0NDBlODVkZjJhZjE2YjhkMTU5OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.v0jjPs1mlCgSo-6YOt7CN7HGsuQR_JovSNRlkER07Tk)\r\n> > Because of the rebuild, other than GlobalKey, it also duplicates the ScrollController.\r\n> > When the widget tree becomes unstable, the following exception comes out:\r\n> > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by scheduler library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> > The following assertion was thrown during a scheduler callback:\r\n> > Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/window.dart:91:12 !isDisposed \"Trying to render a disposed EngineFlutterView.\"\r\n> > When the exception was thrown, this was the stack: http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 297:3 throw_ http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 38:3 assertFailed http:\/\/localhost:55987\/lib\/_engine\/engine\/window.dart 91:13 render http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/view.dart 256:7 compositeFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 587:19 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/widgets\/binding.dart 991:13 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 448:5 [_handlePersistentFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7 [_invokeFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1311:9 handleDrawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1169:5 [_handleDrawFrame] http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 1346:5 invoke http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 260:5 invokeOnDrawFrame http:\/\/localhost:55987\/lib\/_engine\/engine\/initialization.dart 185:36 http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37 _checkAndCall http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39 dcall\r\n> > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> \r\n> The problem you're facing may have been solved on beta\/master channel, please take a look at this: [https:\/\/github.com\/flutter\/flutter\/issues\/141253](url)\r\n\r\nThank you for letting me the solution on beta\/master. I've checked both. Unfortunately the issue of Duplicate GlobalKey is still there. The child under MaterialApp.router duplicates itself after rebuild from user signout. \r\n\r\n![Screenshot 2024-03-14 at 4 21 19\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/46311851\/c9a9cc9b-bb1a-4661-9d39-8d41a5046b5b)\r\n","> > > I encountered the same since upgrading to **Flutter 3.19.3** and the latest **GoRouter 13.2.0** for my **Flutter Web** project. The issue does not only create duplicate GlobalKey, it creates duplicate of branches of widgets under MaterialApp.router during rebuild of pages navigation. In my case, whenever the page is refresh or the signs out. Please have a look at the Widget Inspector below. 4 scaffolds were rebuild when I click on page refresh.\r\n> > > ![Screenshot 2024-03-14 at 3 00 39\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312732725-3a05bb09-ef9f-493a-a7f4-1baf1a668494.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDA3MzIsIm5iZiI6MTcxMDQwMDQzMiwicGF0aCI6Ii80NjMxMTg1MS8zMTI3MzI3MjUtM2EwNWJiMDktZWY5Zi00OTNhLWE3ZjQtMWJhZjFhNjY4NDk0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA3MTM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZkMDY3YzY1YWYwNGI4YjI5MDU1OGY0OGRlM2JhYjUxNjU2MTk4MjBjMTY0NDBlODVkZjJhZjE2YjhkMTU5OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.v0jjPs1mlCgSo-6YOt7CN7HGsuQR_JovSNRlkER07Tk)\r\n> > > Because of the rebuild, other than GlobalKey, it also duplicates the ScrollController.\r\n> > > When the widget tree becomes unstable, the following exception comes out:\r\n> > > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by scheduler library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> > > The following assertion was thrown during a scheduler callback:\r\n> > > Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/window.dart:91:12 !isDisposed \"Trying to render a disposed EngineFlutterView.\"\r\n> > > When the exception was thrown, this was the stack: http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 297:3 throw_ http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 38:3 assertFailed http:\/\/localhost:55987\/lib\/_engine\/engine\/window.dart 91:13 render http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/view.dart 256:7 compositeFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 587:19 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/widgets\/binding.dart 991:13 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 448:5 [_handlePersistentFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7 [_invokeFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1311:9 handleDrawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1169:5 [_handleDrawFrame] http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 1346:5 invoke http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 260:5 invokeOnDrawFrame http:\/\/localhost:55987\/lib\/_engine\/engine\/initialization.dart 185:36 http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37 _checkAndCall http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39 dcall\r\n> > > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> > \r\n> > \r\n> > The problem you're facing may have been solved on beta\/master channel, please take a look at this: [https:\/\/github.com\/flutter\/flutter\/issues\/141253](url)\r\n> \r\n> Thank you for letting me the solution on beta\/master. I've checked both. Unfortunately the issue of Duplicate GlobalKey is still there. The child under MaterialApp.router duplicates itself after rebuild from user signout.\r\n> \r\n> ![Screenshot 2024-03-14 at 4 21 19\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312760958-c9a9cc9b-bb1a-4661-9d39-8d41a5046b5b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDY3MTgsIm5iZiI6MTcxMDQwNjQxOCwicGF0aCI6Ii80NjMxMTg1MS8zMTI3NjA5NTgtYzlhOWNjOWItYmIxYS00NjYxLTlkMzktOGQ0MWE1MDQ2YjViLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA4NTMzOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTViZGYxYzI1ZTUxMjlmYWY1OTQ2NmVjODg2YTdiYThlYjY5MjQxMDQxYzc3ODdmNmQ5MmMwNDgxNDI1MmY5NzMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.Ag_h3U18OvH_ZZ_sAf25DmUOAmTVumE2MQEzGoGGv64)\r\n\r\nI found If we assign `UniqueKey` to the widget, then the Duplicate error would be gone. But I don't think that's the correct way to solve the issue.\r\n```dart\r\n@override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      key: UniqueKey(),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            const Text('PageOne'),\r\n            const SizedBox(\r\n              height: 30,\r\n            ),\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                context.go('\/2');\r\n              },\r\n              child: const Text('Go To PageTwo'),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n```","> > > > I encountered the same since upgrading to **Flutter 3.19.3** and the latest **GoRouter 13.2.0** for my **Flutter Web** project. The issue does not only create duplicate GlobalKey, it creates duplicate of branches of widgets under MaterialApp.router during rebuild of pages navigation. In my case, whenever the page is refresh or the signs out. Please have a look at the Widget Inspector below. 4 scaffolds were rebuild when I click on page refresh.\r\n> > > > ![Screenshot 2024-03-14 at 3 00 39\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312732725-3a05bb09-ef9f-493a-a7f4-1baf1a668494.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDA3MzIsIm5iZiI6MTcxMDQwMDQzMiwicGF0aCI6Ii80NjMxMTg1MS8zMTI3MzI3MjUtM2EwNWJiMDktZWY5Zi00OTNhLWE3ZjQtMWJhZjFhNjY4NDk0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA3MTM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZkMDY3YzY1YWYwNGI4YjI5MDU1OGY0OGRlM2JhYjUxNjU2MTk4MjBjMTY0NDBlODVkZjJhZjE2YjhkMTU5OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.v0jjPs1mlCgSo-6YOt7CN7HGsuQR_JovSNRlkER07Tk)\r\n> > > > Because of the rebuild, other than GlobalKey, it also duplicates the ScrollController.\r\n> > > > When the widget tree becomes unstable, the following exception comes out:\r\n> > > > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Exception caught by scheduler library \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> > > > The following assertion was thrown during a scheduler callback:\r\n> > > > Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/window.dart:91:12 !isDisposed \"Trying to render a disposed EngineFlutterView.\"\r\n> > > > When the exception was thrown, this was the stack: http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 297:3 throw_ http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/errors.dart 38:3 assertFailed http:\/\/localhost:55987\/lib\/_engine\/engine\/window.dart 91:13 render http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/view.dart 256:7 compositeFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 587:19 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/widgets\/binding.dart 991:13 drawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/rendering\/binding.dart 448:5 [_handlePersistentFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1386:7 [_invokeFrameCallback] http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1311:9 handleDrawFrame http:\/\/localhost:55987\/packages\/flutter\/src\/scheduler\/binding.dart 1169:5 [_handleDrawFrame] http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 1346:5 invoke http:\/\/localhost:55987\/lib\/_engine\/engine\/platform_dispatcher.dart 260:5 invokeOnDrawFrame http:\/\/localhost:55987\/lib\/_engine\/engine\/initialization.dart 185:36 http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 550:37 _checkAndCall http:\/\/localhost:55987\/dart-sdk\/lib\/_internal\/js_dev_runtime\/private\/ddc_runtime\/operations.dart 555:39 dcall\r\n> > > > \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n> > > \r\n> > > \r\n> > > The problem you're facing may have been solved on beta\/master channel, please take a look at this: [https:\/\/github.com\/flutter\/flutter\/issues\/141253](url)\r\n> > \r\n> > \r\n> > Thank you for letting me the solution on beta\/master. I've checked both. Unfortunately the issue of Duplicate GlobalKey is still there. The child under MaterialApp.router duplicates itself after rebuild from user signout.\r\n> > ![Screenshot 2024-03-14 at 4 21 19\u202fPM](https:\/\/private-user-images.githubusercontent.com\/46311851\/312760958-c9a9cc9b-bb1a-4661-9d39-8d41a5046b5b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA0MDY3MTgsIm5iZiI6MTcxMDQwNjQxOCwicGF0aCI6Ii80NjMxMTg1MS8zMTI3NjA5NTgtYzlhOWNjOWItYmIxYS00NjYxLTlkMzktOGQ0MWE1MDQ2YjViLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE0VDA4NTMzOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTViZGYxYzI1ZTUxMjlmYWY1OTQ2NmVjODg2YTdiYThlYjY5MjQxMDQxYzc3ODdmNmQ5MmMwNDgxNDI1MmY5NzMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.Ag_h3U18OvH_ZZ_sAf25DmUOAmTVumE2MQEzGoGGv64)\r\n> \r\n> I found If we assign `UniqueKey` to the widget, then the Duplicate error would be gone. But I don't think that's the correct way to solve the issue.\r\n> \r\n> ```dart\r\n> @override\r\n>   Widget build(BuildContext context) {\r\n>     return Scaffold(\r\n>       key: UniqueKey(),\r\n>       body: Center(\r\n>         child: Column(\r\n>           mainAxisAlignment: MainAxisAlignment.center,\r\n>           children: [\r\n>             const Text('PageOne'),\r\n>             const SizedBox(\r\n>               height: 30,\r\n>             ),\r\n>             ElevatedButton(\r\n>               onPressed: () {\r\n>                 context.go('\/2');\r\n>               },\r\n>               child: const Text('Go To PageTwo'),\r\n>             ),\r\n>           ],\r\n>         ),\r\n>       ),\r\n>     );\r\n>   }\r\n> ```\r\n\r\nI agree. I did try and use UniqueKey. It works until the widget tree destabilise. Too many duplicate Scaffold etc. So yes, I don't think it is the right solution. "],"labels":["platform-web","package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"Mac framework_tests_impeller is 2.04% flaky","body":"<!-- meta-tags: To be used by the automation script only, DO NOT MODIFY.\n{\n  \"name\": \"Mac framework_tests_impeller\"\n}\n-->\n\nThe post-submit test builder `Mac framework_tests_impeller` had a flaky ratio 2.04% for the past (up to) 100 commits, which is above our 2.00% threshold.\n\nOne recent flaky example for a same commit: https:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/268,%20267\nCommit: https:\/\/github.com\/flutter\/flutter\/commit\/394269f9ea2e6ada1ba69b798791d6c3bec51168\n\nFlaky builds:\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/269\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/268\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/267\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/266\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/prod\/Mac%20framework_tests_impeller\/265\n\nRecent test runs:\nhttps:\/\/flutter-dashboard.appspot.com\/#\/build?taskFilter=Mac%20framework_tests_impeller\n\nPlease follow https:\/\/github.com\/flutter\/flutter\/wiki\/Reducing-Test-Flakiness#fixing-flaky-tests to fix the flakiness and enable the test back after validating the fix (internal dashboard to validate: go\/flutter_test_flakiness).\n","comments":["Assigning to myself to look at","Thanks Jonah!"],"labels":["P0","c: flake","team-framework"]},{"title":"Flutter Dockerfile\/CICD job stuck at got dependencies ","body":"### Steps to reproduce\n\nI'm trying to build my docker image through CI\/CD with my DigitalOcean Droplet GitLab runner. \n\n### Actual results\n\nThe job gets to the Dockerfile part, until it hangs at the \"got dependencies\". This happens regardless of using run flutter doctor\/web\/etc \n\n### Logs\n\n<details open>\r\n<summary>Logs<\/summary>\r\n\r\n```console\r\n.\r\n#13 9.155 Unpacking patch (2.7.6-7) ...\r\n#13 9.223 Selecting previously unselected package publicsuffix.\r\n#13 9.226 Preparing to unpack ...\/46-publicsuffix_20230209.2326-1_all.deb ...\r\n#13 9.238 Unpacking publicsuffix (20230209.2326-1) ...\r\n#13 9.292 Selecting previously unselected package unzip.\r\n#13 9.296 Preparing to unpack ...\/47-unzip_6.0-28_amd64.deb ...\r\n#13 9.300 Unpacking unzip (6.0-28) ...\r\n#13 9.368 Selecting previously unselected package xauth.\r\n#13 9.371 Preparing to unpack ...\/48-xauth_1%3a1.1.2-1_amd64.deb ...\r\n#13 9.375 Unpacking xauth (1:1.1.2-1) ...\r\n#13 9.441 Setting up libexpat1:amd64 (2.5.0-1) ...\r\n#13 9.455 Setting up libxau6:amd64 (1:1.0.9-1) ...\r\n#13 9.468 Setting up libkeyutils1:amd64 (1.6.3-2) ...\r\n#13 9.481 Setting up libpsl5:amd64 (0.21.2-1) ...\r\n#13 9.494 Setting up unzip (6.0-28) ...\r\n#13 9.510 Setting up libcbor0.8:amd64 (0.8.0-2+b1) ...\r\n#13 9.524 Setting up libbrotli1:amd64 (1.0.9-2+b6) ...\r\n#13 9.535 Setting up libssl3:amd64 (3.0.11-1~deb12u2) ...\r\n#13 9.546 Setting up libnghttp2-14:amd64 (1.52.0-1+deb12u1) ...\r\n#13 9.558 Setting up less (590-2) ...\r\n#13 9.573 Setting up krb5-locales (1.20.1-2+deb12u1) ...\r\n#13 9.583 Setting up libldap-common (2.5.13+dfsg-5) ...\r\n#13 9.597 Setting up libkrb5support0:amd64 (1.20.1-2+deb12u1) ...\r\n#13 9.605 Setting up libsasl2-modules-db:amd64 (2.1.28+dfsg-10) ...\r\n#13 9.615 Setting up perl-modules-5.36 (5.36.0-7+deb12u1) ...\r\n#13 9.625 Setting up libx11-data (2:1.8.4-2+deb12u2) ...\r\n#13 9.635 Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...\r\n#13 9.645 Setting up patch (2.7.6-7) ...\r\n#13 9.652 Setting up libk5crypto3:amd64 (1.20.1-2+deb12u1) ...\r\n#13 9.665 Setting up libsasl2-2:amd64 (2.1.28+dfsg-10) ...\r\n#13 9.673 Setting up git-man (1:2.39.2-1.1) ...\r\n#13 9.682 Setting up libssh2-1:amd64 (1.10.0-3+b1) ...\r\n#13 9.690 Setting up netbase (6.4) ...\r\n#13 9.710 Setting up libkrb5-3:amd64 (1.20.1-2+deb12u1) ...\r\n#13 9.719 Setting up libfido2-1:amd64 (1.12.0-2+b1) ...\r\n#13 9.727 Setting up openssl (3.0.11-1~deb12u2) ...\r\n#13 9.743 Setting up libbsd0:amd64 (0.11.7-2) ...\r\n#13 9.751 Setting up publicsuffix (20230209.2326-1) ...\r\n#13 9.758 Setting up libgdbm6:amd64 (1.23-3) ...\r\n#13 9.768 Setting up libxdmcp6:amd64 (1:1.1.2-3) ...\r\n#13 9.777 Setting up libxcb1:amd64 (1.15-1) ...\r\n#13 9.783 Setting up libedit2:amd64 (3.1-20221030-2) ...\r\n#13 9.792 Setting up libsasl2-modules:amd64 (2.1.28+dfsg-10) ...\r\n#13 9.806 Setting up libldap-2.5-0:amd64 (2.5.13+dfsg-5) ...\r\n#13 9.818 Setting up ca-certificates (20230311) ...\r\n#13 9.957 debconf: unable to initialize frontend: Dialog\r\n#13 9.958 debconf: (TERM is not set, so the dialog frontend is not usable.)\r\n#13 9.959 debconf: falling back to frontend: Readline\r\n#13 9.972 debconf: unable to initialize frontend: Readline\r\n#13 9.974 debconf: (This frontend requires a controlling tty.)\r\n#13 9.975 debconf: falling back to frontend: Teletype\r\n#13 10.43 Updating certificates in \/etc\/ssl\/certs...\r\n#13 11.09 140 added, 0 removed; done.\r\n#13 11.13 Setting up libgssapi-krb5-2:amd64 (1.20.1-2+deb12u1) ...\r\n#13 11.14 Setting up libgdbm-compat4:amd64 (1.23-3) ...\r\n#13 11.15 Setting up libcurl4:amd64 (7.88.1-10+deb12u5) ...\r\n#13 11.16 Setting up libx11-6:amd64 (2:1.8.4-2+deb12u2) ...\r\n#13 11.18 Setting up curl (7.88.1-10+deb12u5) ...\r\n#13 11.19 Setting up libperl5.36:amd64 (5.36.0-7+deb12u1) ...\r\n#13 11.20 Setting up libxmuu1:amd64 (2:1.1.3-3) ...\r\n#13 11.21 Setting up openssh-client (1:9.2p1-2+deb12u2) ...\r\n#13 11.33 Setting up libxext6:amd64 (2:1.3.4-1+b1) ...\r\n#13 11.35 Setting up libcurl3-gnutls:amd64 (7.88.1-10+deb12u5) ...\r\n#13 11.36 Setting up perl (5.36.0-7+deb12u1) ...\r\n#13 11.38 Setting up xauth (1:1.1.2-1) ...\r\n#13 11.40 Setting up liberror-perl (0.17029-2) ...\r\n#13 11.42 Setting up git (1:2.39.2-1.1) ...\r\n#13 11.44 Processing triggers for libc-bin (2.36-9+deb12u4) ...\r\n#13 11.49 Processing triggers for ca-certificates (20230311) ...\r\n#13 11.50 Updating certificates in \/etc\/ssl\/certs...\r\n#13 12.03 0 added, 0 removed; done.\r\n#13 12.03 Running hooks in \/etc\/ca-certificates\/update.d...\r\n#13 12.03 done.\r\n#13 DONE 12.2s\r\n#12 [build-env  4\/11] RUN git clone https:\/\/github.com\/flutter\/flutter.git \/...\r\n#12 0.181 Cloning into '\/usr\/local\/flutter'...\r\nUpdating files: 100% (8220\/8220), done.\r\n#12 DONE 42.5s\r\n#11 [build-env  5\/11] RUN cd \/usr\/local\/flutter && git fetch && git checkout...\r\n#11 1.068 Your branch is up to date with 'origin\/master'.\r\n#11 DONE 1.1s\r\n#18 [build-env  6\/11] RUN mkdir \/app\/\r\n#18 DONE 0.2s\r\n#8 [build-env  7\/11] COPY . \/app\/\r\n#8 DONE 0.2s\r\n#7 [build-env  8\/11] WORKDIR \/app\/\r\n#7 DONE 0.0s\r\n#6 [build-env  9\/11] RUN flutter pub cache repair\r\n#6 0.162    Woah! You appear to be trying to run flutter as root.\r\n#6 0.162    We strongly recommend running the flutter tool without superuser privileges.\r\n#6 0.163   \/\r\n#6 0.163 \ud83d\udcce\r\n#6 0.189 Downloading Linux x64 Dart SDK from Flutter engine 6745955bb49e4e894a47cb48a19ffba504c69613...\r\n#6 0.208   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n#6 0.212                                  Dload  Upload   Total   Spent    Left  Speed\r\n100  218M  100  218M    0     0  36.7M      0  0:00:05  0:00:05 --:--:-- 42.9M\r\n#6 13.75 Building flutter tool...\r\n#6 14.11 Resolving dependencies...\r\n#6 26.78 Got dependencies.\r\n#6 1495. \/usr\/local\/flutter\/bin\/internal\/shared.sh: line 183:   223 Killed                  \"$DART\" --verbosity=error --disable-dart-dev $FLUTTER_TOOL_ARGS --snapshot=\"$SNAPSHOT_PATH\" --snapshot-kind=\"app-jit\" --packages=\"$FLUTTER_TOOLS_DIR\/.dart_tool\/package_config.json\" --no-enable-mirrors \"$SCRIPT_PATH\" > \/dev\/null\r\n#6 ERROR: process \"\/bin\/sh -c flutter pub cache repair\" did not complete successfully: exit code: 137\r\n------\r\n > [build-env  9\/11] RUN flutter pub cache repair:\r\n------\r\nprocess \"\/bin\/sh -c flutter pub cache repair\" did not complete successfully: exit code: 137\r\nCleaning up project directory and file based variables\r\n00:01\r\nERROR: Job failed: exit code 1\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open>\r\n<summary>Doctor output<\/summary>\r\n\r\n```console\r\n\r\nN\/A\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["@A1MWorld \r\nDoes the same occur if you try to run locally ?\r\nIf not, then you might need to reach out to CICD provider for further resolution.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"`SliverMainAxisGroup` does not work as expected when placed in a reverse scroll view","body":"### Steps to reproduce\r\n\r\n1. Run the example, see a green box rendered at the top\r\n2. Change `home: MainAxisGroupPage(),` to `home: RegularPage(),`\r\n3. Hot reload\r\n4. See the green box rendered (correctly), at the bottom.\r\n\r\n\r\n### Expected results\r\n\r\nI expect both of these examples to be equivalent i.e. that using a `SliverMainAxisGroup` or placing all slivers directly in the `CustomScrollView` would produce the same result. But this doesn't seem to be true.\r\n\r\n### Actual results\r\n\r\nSlivers are rendered on the wrong side of the viewport, when using `SliverMainAxisGroup` in a reverse scroll view.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: MainAxisGroupPage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MainAxisGroupPage extends StatelessWidget {\r\n  const MainAxisGroupPage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      body: CustomScrollView(reverse: true, slivers: [\r\n        SliverMainAxisGroup(slivers: [\r\n          SliverToBoxAdapter(\r\n            child: SizedBox(\r\n              height: 100,\r\n              child: ColoredBox(color: Colors.green),\r\n            ),\r\n          ),\r\n          SliverFillRemaining(\r\n            hasScrollBody: false,\r\n            child: ColoredBox(color: Colors.black54),\r\n          ),\r\n        ]),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n\r\nclass RegularPage extends StatelessWidget {\r\n  const RegularPage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const Scaffold(\r\n      body: CustomScrollView(reverse: true, slivers: [\r\n        SliverToBoxAdapter(\r\n          child: SizedBox(\r\n            height: 100,\r\n            child: ColoredBox(color: Colors.green),\r\n          ),\r\n        ),\r\n        SliverFillRemaining(\r\n          hasScrollBody: false,\r\n          child: ColoredBox(color: Colors.black54),\r\n        ),\r\n      ]),\r\n    );\r\n  }\r\n}\r\n```\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-SI)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/...\/Development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/...\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.88.0-insider)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code - Insiders.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the code sample provided above. \r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-5.0.pre.23, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-5.0.pre.23 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (10 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>"],"labels":["framework","waiting for PR to land (fixed)","f: scrolling","has reproducible steps","P2","team-framework","triaged-framework","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] blurs are culled too quickly when scrolled offscreen.","body":"Perhaps we're not expanding the bounds enough? Look at the bottom of the screen\r\n\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/8975114\/c5f0a7bf-62bd-4e43-842b-849f96ccaa55\r\n\r\n\r\n\r\n\r\nExample app:\r\n\r\n```dart\r\nimport 'dart:ui';\r\n\r\nimport 'package:flutter\/cupertino.dart';\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: MyHomePage(title: 'Scrolling ios blur 3.19.1'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatelessWidget {\r\n  const MyHomePage({\r\n    super.key,\r\n    required this.title,\r\n  });\r\n\r\n  final String title;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      extendBody: true,\r\n      extendBodyBehindAppBar: true,\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(title),\r\n      ),\r\n      body: ListView.separated(\r\n        itemCount: 20,\r\n        itemBuilder: (_, i) => ImageFiltered(\r\n            imageFilter: ImageFilter.blur(sigmaX: 25, sigmaY: 25),\r\n            child: Image.network(\r\n              'https:\/\/cdn.pixabay.com\/photo\/2018\/03\/31\/19\/29\/schnitzel-3279045_1280.jpg',\r\n              height: 200,\r\n              fit: BoxFit.cover,\r\n            ),\r\n        ),\r\n        separatorBuilder: (_, __) => const SizedBox(height: 80),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```","comments":["Could it be related to this? https:\/\/github.com\/flutter\/flutter\/issues\/144985 We had these problems ourselves when using ImageFilter.blur in different scenarios\r\n"],"labels":["P1","e: impeller","team-engine","triaged-engine"]},{"title":"[Web] Extra newline appears in textfield after clearing","body":"### Steps to reproduce\n\nTyping in the textfield then pressing enter.\n\n### Expected results\n\nThis should result in an empty textfield with focus\n\n### Actual results\n\nOn macos, this results in an empty text field\r\nOn web, this results in a text field with a newline in it.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  late final TextEditingController _textController;\r\n  late final FocusNode _textFocusNode;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n\r\n    _textController = TextEditingController();\r\n    _textFocusNode = FocusNode();\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _textController.dispose();\r\n    _textFocusNode.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Center(\r\n        child: TextField(\r\n          decoration: const InputDecoration(\r\n            enabledBorder: OutlineInputBorder(\r\n              borderSide: BorderSide(color: Colors.deepPurple),\r\n            ),\r\n            hintText: 'Type a message',\r\n            contentPadding: EdgeInsets.all(20),\r\n          ),\r\n          controller: _textController,\r\n          focusNode: _textFocusNode,\r\n          maxLines: null,\r\n          autofocus: true,\r\n          textInputAction: TextInputAction.send,\r\n          keyboardType: TextInputType.multiline,\r\n          onSubmitted: (value) {\r\n            _textController.clear();\r\n            _textFocusNode.requestFocus();\r\n          },\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n_No response_\n\n### Logs\n\n_No response_\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.2.1 23C71 darwin-arm64, locale en-AU)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/emile\/development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2717] Android toolchain - develop for Android devices\r\n    \u2717 Unable to locate Android SDK.\r\n      Install Android Studio from: https:\/\/developer.android.com\/studio\/index.html\r\n      On first launch it will assist you in installing the Android SDK components.\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for detailed instructions).\r\n      If the Android SDK has been installed to a custom location, please use\r\n      `flutter config --android-sdk` to update to that location.\r\n\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[!] Android Studio (not installed)\r\n    \u2022 Android Studio not found; download from https:\/\/developer.android.com\/studio\/index.html\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for detailed instructions).\r\n\r\n[\u2713] VS Code (version 1.85.1)\r\n    \u2022 VS Code at \/Users\/emile\/Downloads\/Visual Studio Code 2.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.2.1 23C71 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.128\r\n    ! Error: Browsing on the local area network for 3 Length White Fettucine Eating Python. Ensure the device is unlocked and attached with a cable or associated with the same local area network as\r\n      this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. I also see the issue on Web. It always creates a new line with other TextInputAction(s) as well: done, next, go. This looks similar to an old issue https:\/\/github.com\/flutter\/flutter\/issues\/113559.\r\n\r\n| Web \u2757 | macOS app \u2705 |\r\n| --------------- | --------------- |\r\n<video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/239bdf14-422e-4cc3-8918-3878217e70c6\"\/> | <video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/5e1c798b-e966-4d8b-985d-5e1f9b8e3bf2\"\/>\r\n\r\n\u2705: No Issue \u2757: Issue reproduced\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.37, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.37 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (3 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\n\r\n\r\n","I think the browser always treats the `return` key on multiline inputs as a \"new line\" action.  We have code to prevent default behavior on the `return` key for single line inputs - we should probably do something similar for multilines, but it prob makes sense to decide based on the provided `inputConfiguration.inputAction`"],"labels":["a: text input","platform-web","has reproducible steps","P1","found in release: 3.19","team-text-input","triaged-text-input","found in release: 3.21"]},{"title":"[two_dimensional_scrollables] change the width of columns without rebuilding the cells.","body":"### Use case\n\nCan you provide a controller that allows me to change the width of columns without rebuilding the cells, but triggers a manual refresh of the cell layout?\r\nI want to implement this feature\r\n![recording](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/dc81503a-0f49-4d93-9a71-c03ffff852a2)\r\n\n\n### Proposal\n\nI want to implement this feature\r\n![recording](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/dc81503a-0f49-4d93-9a71-c03ffff852a2)","comments":["This doesn't sound like a feature request, but it could be an implementation or package issue. Could you please share a minimal sample code for this?","```dart\r\n\/\/ Copyright 2013 The Flutter Authors. All rights reserved.\r\n\/\/ Use of this source code is governed by a BSD-style license that can be\r\n\/\/ found in the LICENSE file.\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:two_dimensional_scrollables\/two_dimensional_scrollables.dart';\r\n\r\nvoid main() {\r\n  runApp(const TableExampleApp());\r\n}\r\n\r\n\/\/\/ A sample application that utilizes the TableView API.\r\nclass TableExampleApp extends StatelessWidget {\r\n  \/\/\/ Creates an instance of the TableView example app.\r\n  const TableExampleApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Table Example',\r\n      theme: ThemeData(\r\n        useMaterial3: true,\r\n      ),\r\n      home: const TableExample(),\r\n    );\r\n  }\r\n}\r\n\r\n\/\/\/ The class containing the TableView for the sample application.\r\nclass TableExample extends StatefulWidget {\r\n  \/\/\/ Creates a screen that demonstrates the TableView widget.\r\n  const TableExample({super.key});\r\n\r\n  @override\r\n  State<TableExample> createState() => _TableExampleState();\r\n}\r\n\r\nclass _TableExampleState extends State<TableExample> {\r\n  late final ScrollController _verticalController = ScrollController();\r\n  int _rowCount = 20;\r\n\r\n  double threeColumnWidth = 50.0;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Table Example'),\r\n      ),\r\n      body: Padding(\r\n        padding: const EdgeInsets.symmetric(horizontal: 50),\r\n        child: TableView.builder(\r\n          verticalDetails: ScrollableDetails.vertical(controller: _verticalController),\r\n          cellBuilder: _buildCell,\r\n          columnCount: 20,\r\n          columnBuilder: _buildColumnSpan,\r\n          rowCount: _rowCount,\r\n          rowBuilder: _buildRowSpan,\r\n        ),\r\n      ),\r\n      persistentFooterButtons: <Widget>[\r\n        Slider(\r\n          value: threeColumnWidth,\r\n          max: 500,\r\n          onChanged: (newValue) {\r\n            \/\/ change three column width\r\n            \/\/ need a controller to change column width and don't rebuild cells\r\n            setState(() {\r\n              threeColumnWidth = newValue;\r\n            });\r\n          },\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n\r\n  TableViewCell _buildCell(BuildContext context, TableVicinity vicinity) {\r\n    return TableViewCell(\r\n      child: RepaintBoundary(\r\n        child: TableCell(vicinity: vicinity),\r\n      ),\r\n    );\r\n  }\r\n\r\n  TableSpan _buildColumnSpan(int index) {\r\n    const TableSpanDecoration decoration = TableSpanDecoration(\r\n      border: TableSpanBorder(\r\n        trailing: BorderSide(),\r\n      ),\r\n    );\r\n\r\n    if (index == 3) {\r\n      return TableSpan(\r\n        foregroundDecoration: decoration,\r\n        extent: FixedTableSpanExtent(threeColumnWidth),\r\n        onEnter: (_) => print('Entered column $index'),\r\n      );\r\n    }\r\n\r\n    return TableSpan(\r\n      foregroundDecoration: decoration,\r\n      extent: const FixedTableSpanExtent(100),\r\n      onEnter: (_) => print('Entered column $index'),\r\n    );\r\n  }\r\n\r\n  TableSpan _buildRowSpan(int index) {\r\n    final TableSpanDecoration decoration = TableSpanDecoration(\r\n      color: index.isEven ? Colors.purple[100] : null,\r\n      border: const TableSpanBorder(\r\n        trailing: BorderSide(\r\n          width: 3,\r\n        ),\r\n      ),\r\n    );\r\n\r\n    return TableSpan(\r\n      backgroundDecoration: decoration,\r\n      extent: const FixedTableSpanExtent(65),\r\n      cursor: SystemMouseCursors.click,\r\n    );\r\n  }\r\n}\r\n\r\nclass TableCell extends StatefulWidget {\r\n  const TableCell({super.key, required this.vicinity});\r\n\r\n  final TableVicinity vicinity;\r\n\r\n  @override\r\n  State<TableCell> createState() => _TableCellState();\r\n}\r\n\r\nclass _TableCellState extends State<TableCell> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    print(\"build ${widget.vicinity}\");\r\n    return Center(\r\n      child: Text('Tile c: ${widget.vicinity.column}, r: ${widget.vicinity.row}'),\r\n    );\r\n  }\r\n\r\n  @override\r\n  void didUpdateWidget(covariant TableCell oldWidget) {\r\n    \/\/ TODO: implement didUpdateWidget\r\n    super.didUpdateWidget(oldWidget);\r\n    return;\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    \/\/ TODO: implement dispose\r\n    super.dispose();\r\n  }\r\n}\r\n```\r\n![recording](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/7b74cf48-5c7c-4b17-90da-8cbdfce5b87d)\r\n","I want change column width and don't rebuild cells\r\n","I think this is working as intended since you refreshed whole `TableView` with `setState` call on Slider value changes; then cell widget will be refreshed as well. I'm not sure if there is a way to prevent cells from rebuilding. \r\n\r\nMore specifically, could you share what the use case this request needs? (to optimize performance or to implement something else?)","I need to to optimize performance, because when cell is other's widget like checkbox, image\uff0cwhen change column with real time, it gets really stuck.\r\n\r\nwhen the table like this.\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/4b71bb43-4686-48bb-a792-ecdbb1be5b65)\r\n\r\nI think when change the column width(or row height), don't rebuild cells.\r\n\r\nI dont know how to change column width(or row height) and not need refreshed `TableView`, please let me know if there is such a method. If there have a controller relayout cells, will improve performance. Also, can rewrite the  `layoutChildSequence` function, animation effects can be achieved.\r\n","Thanks for the update. Marking this as a feature request with the use case above.","Hi @leavky, I am not sure I understand the request to resize without rebuilding, wouldn't the cells need to be rebuilt to reflect the new dimensions?","@Piinks ,when change the target's column width, not need rebuild other column's cell. when change column with real time, it gets really stuck. when change the target's column width, other column's cell just relayout, not need to rebuild.","just like this, \r\n![recording](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/acdb283b-ba98-46e6-b7fa-53f03bb15394)\r\n","I have another question, i want eidt cell, but the cell's space is small, so i need a bigger cell to edit cell content. like this\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/0982d44b-e803-483d-8a04-153ed03ba986)\r\n\r\nBut i found the child's drawing order is fixed, is there have a method that let target cell paint later. thanks!\r\n\r\nI want `1-1`  on the top of `1-2`,\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/46547390\/283e37a2-0447-49c2-afa3-06c9dde6616d)\r\n\r\n","> just like this, ![recording](https:\/\/private-user-images.githubusercontent.com\/46547390\/316222416-acdb283b-ba98-46e6-b7fa-53f03bb15394.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTEyMjI3OTYsIm5iZiI6MTcxMTIyMjQ5NiwicGF0aCI6Ii80NjU0NzM5MC8zMTYyMjI0MTYtYWNkYjI4M2ItYmE5OC00NmU2LWI3ZmEtNTNmMDNiYjE1Mzk0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzIzVDE5MzQ1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWIwMTE3ZjgxNDgyMDZlNTUyOGZjMWFkM2M0MmFlZWEwZDcxZWEzZjFiNzJhOGM1NmVhYWE1ZTQ5YjY1NDU5MDcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ztfqINjk0Z6HdrYNFWQ99zNhEg6IqVZkBJkqjXVNPkw) [ ![recording](https:\/\/private-user-images.githubusercontent.com\/46547390\/316222416-acdb283b-ba98-46e6-b7fa-53f03bb15394.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTEyMjI3OTYsIm5iZiI6MTcxMTIyMjQ5NiwicGF0aCI6Ii80NjU0NzM5MC8zMTYyMjI0MTYtYWNkYjI4M2ItYmE5OC00NmU2LWI3ZmEtNTNmMDNiYjE1Mzk0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzIzVDE5MzQ1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWIwMTE3ZjgxNDgyMDZlNTUyOGZjMWFkM2M0MmFlZWEwZDcxZWEzZjFiNzJhOGM1NmVhYWE1ZTQ5YjY1NDU5MDcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ztfqINjk0Z6HdrYNFWQ99zNhEg6IqVZkBJkqjXVNPkw) ](https:\/\/private-user-images.githubusercontent.com\/46547390\/316222416-acdb283b-ba98-46e6-b7fa-53f03bb15394.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTEyMjI3OTYsIm5iZiI6MTcxMTIyMjQ5NiwicGF0aCI6Ii80NjU0NzM5MC8zMTYyMjI0MTYtYWNkYjI4M2ItYmE5OC00NmU2LWI3ZmEtNTNmMDNiYjE1Mzk0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzIzVDE5MzQ1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWIwMTE3ZjgxNDgyMDZlNTUyOGZjMWFkM2M0MmFlZWEwZDcxZWEzZjFiNzJhOGM1NmVhYWE1ZTQ5YjY1NDU5MDcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ztfqINjk0Z6HdrYNFWQ99zNhEg6IqVZkBJkqjXVNPkw) [ ](https:\/\/private-user-images.githubusercontent.com\/46547390\/316222416-acdb283b-ba98-46e6-b7fa-53f03bb15394.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTEyMjI3OTYsIm5iZiI6MTcxMTIyMjQ5NiwicGF0aCI6Ii80NjU0NzM5MC8zMTYyMjI0MTYtYWNkYjI4M2ItYmE5OC00NmU2LWI3ZmEtNTNmMDNiYjE1Mzk0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzIzVDE5MzQ1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWIwMTE3ZjgxNDgyMDZlNTUyOGZjMWFkM2M0MmFlZWEwZDcxZWEzZjFiNzJhOGM1NmVhYWE1ZTQ5YjY1NDU5MDcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ztfqINjk0Z6HdrYNFWQ99zNhEg6IqVZkBJkqjXVNPkw)\r\n\r\nIt seems that needs to be rebuilt too in the example you show because the text is getting shorter and needs to show an overflow effect. \r\n\r\nAs @Piinks says here:\r\n\r\n> Hi @leavky, I am not sure I understand the request to resize without rebuilding, wouldn't the cells need to be rebuilt to reflect the new dimensions?\r\n\r\nThe cells needs to be rebuilt due to this code:\r\n```dart\r\nfinal BoxConstraints cellConstraints = BoxConstraints.tightFor(\r\n    width: mergedColumnWidth ?? standardColumnWidth,\r\n    height: mergedRowHeight ?? standardRowHeight,\r\n );\r\ncell.layout(cellConstraints); \/\/ this line\r\n```\r\n\r\nYou can find this in the `table.dart` line 754 (at the moment of writing this). As you can see, the cell constraints are calculated keeping in mind the column width and then the cell is layout."],"labels":["c: new feature","framework","c: performance","f: scrolling","package","team-framework","p: two_dimensional_scrollables"]},{"title":"[tool_crash] FormatException","body":"## Command\r\n```\r\nflutter doctor\r\n```\r\n\r\n## Steps to Reproduce\r\n1. ...\r\n2. ...\r\n3. ...\r\n\r\n## Logs\r\nFormatException\r\n```\r\n#0      int._handleFormatError (dart:core-patch\/integers_patch.dart:126:5)\r\n#1      int._parseRadix (dart:core-patch\/integers_patch.dart:137:16)\r\n#2      int._parse (dart:core-patch\/integers_patch.dart:98:12)\r\n#3      int.parse (dart:core-patch\/integers_patch.dart:60:12)\r\n#4      OhosSdk.initSdkVersionMap (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:122:37)\r\n#5      OhosSdk.localOhosSdk.findOhosHomeDir (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:90:9)\r\n#6      OhosSdk.localOhosSdk (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:102:33)\r\n#7      HarmonySdk.locateHarmonySdk (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:46:38)\r\n#8      AppContext._generateIfNecessary.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:104:42)\r\n#9      _LinkedHashMapMixin.putIfAbsent (dart:collection-patch\/compact_hash.dart:535:23)\r\n#10     AppContext._generateIfNecessary (package:flutter_tools\/src\/base\/context.dart:92:20)\r\n#11     AppContext.get (package:flutter_tools\/src\/base\/context.dart:121:32)\r\n#12     AppContext.get (package:flutter_tools\/src\/base\/context.dart:119:24)\r\n#13     AppContext.get (package:flutter_tools\/src\/base\/context.dart:119:24)\r\n#14     harmonySdk (package:flutter_tools\/src\/globals.dart:68:39)\r\n#15     runInContext.<anonymous closure> (package:flutter_tools\/src\/context_runner.dart:159:26)\r\n#16     AppContext._generateIfNecessary.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:104:42)\r\n#17     _LinkedHashMapMixin.putIfAbsent (dart:collection-patch\/compact_hash.dart:535:23)\r\n#18     AppContext._generateIfNecessary (package:flutter_tools\/src\/base\/context.dart:92:20)\r\n#19     AppContext.get (package:flutter_tools\/src\/base\/context.dart:121:32)\r\n#20     AppContext.get (package:flutter_tools\/src\/base\/context.dart:119:24)\r\n#21     AppContext.get (package:flutter_tools\/src\/base\/context.dart:119:24)\r\n#22     ApplicationPackageFactory.instance (package:flutter_tools\/src\/application_package.dart:10:61)\r\n#23     FlutterCommand.setupApplicationPackages (package:flutter_tools\/src\/runner\/flutter_command.dart:1212:55)\r\n#24     FlutterCommand.verifyThenRunCommand (package:flutter_tools\/src\/runner\/flutter_command.dart:1418:5)\r\n```\r\n```\r\nencountered exception: FormatException: Invalid radix-10 number (at character 1)\r\nhms\r\n^\r\n\r\n\r\n#0      int._handleFormatError (dart:core-patch\/integers_patch.dart:126:5)\r\n#1      int._parseRadix (dart:core-patch\/integers_patch.dart:137:16)\r\n#2      int._parse (dart:core-patch\/integers_patch.dart:98:12)\r\n#3      int.parse (dart:core-patch\/integers_patch.dart:60:12)\r\n#4      OhosSdk.initSdkVersionMap (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:122:37)\r\n#5      OhosSdk.localOhosSdk.findOhosHomeDir (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:90:9)\r\n#6      OhosSdk.localOhosSdk (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:102:33)\r\n#7      HarmonySdk.locateHarmonySdk (package:flutter_tools\/src\/ohos\/ohos_sdk.dart:46:38)\r\n#8      AppContext._generateIfNecessary.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:104:42)\r\n#9      _LinkedHashMapMixin.putIfAbsent (dart:collection-patch\/compact_hash.dart:535:23)\r\n#10     AppContext._generateIfNecessary (package:flutter_tools\/src\/base\/context.dart:92:20)\r\n#11     AppContext.get (package:flutter_tools\/src\/base\/context.dart:121:32)\r\n#12     harmonySdk (package:flutter_tools\/src\/globals.dart:68:39)\r\n#13     runInContext.<anonymous closure> (package:flutter_tools\/src\/context_runner.dart:139:28)\r\n#14     AppContext._generateIfNecessary.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:104:42)\r\n#15     _LinkedHashMapMixin.putIfAbsent (dart:collection-patch\/compact_hash.dart:535:23)\r\n#16     AppContext._generateIfNecessary (package:flutter_tools\/src\/base\/context.dart:92:20)\r\n#17     AppContext.get (package:flutter_tools\/src\/base\/context.dart:121:32)\r\n#18     ohosValidator (package:flutter_tools\/src\/ohos\/ohos_doctor.dart:30:45)\r\n#19     _DefaultDoctorValidatorsProvider.validators (package:flutter_tools\/src\/doctor.dart:134:7)\r\n#20     Doctor.validators (package:flutter_tools\/src\/doctor.dart:231:47)\r\n#21     Doctor.startValidatorTasks (package:flutter_tools\/src\/doctor.dart:237:45)\r\n#22     DoctorText._validatorTasks (package:flutter_tools\/src\/doctor.dart:741:60)\r\n#23     DoctorText._validatorTasks (package:flutter_tools\/src\/doctor.dart)\r\n#24     DoctorText._runDiagnosis (package:flutter_tools\/src\/doctor.dart:745:53)\r\n#25     DoctorText.piiStrippedText (package:flutter_tools\/src\/doctor.dart:738:47)\r\n#26     DoctorText.piiStrippedText (package:flutter_tools\/src\/doctor.dart)\r\n#27     CrashReporter.informUser (package:flutter_tools\/src\/reporting\/crash_reporting.dart:92:32)\r\n#28     _handleToolError (package:flutter_tools\/runner.dart:169:36)\r\n<asynchronous suspension>\r\n#29     AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:150:19)\r\n<asynchronous suspension>\r\n#30     main (package:flutter_tools\/executable.dart:91:3)\r\n<asynchronous suspension>\r\n\r\n```\r\n\r\n## Flutter Application Metadata\r\nNo pubspec in working directory.\r\n","comments":["I'm not sure why `harmonySdk` appears in the stack trace. I guess the error started at:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/ba393198430278b6595976de84fe170f553cc728\/packages\/flutter_tools\/lib\/src\/doctor.dart#L134\r\n\r\nWhich Flutter version did you download\/pull? \r\n\r\nCould you share the output of `flutter doctor -vv` (double `v`). If the log is too large to be uploaded to GitHub, you may upload it as a txt file or use online tools like https:\/\/pastebin.com\/ to share it. Thanks!"],"labels":["waiting for customer response","in triage"]},{"title":"Re-evaluate workflow of marking tests as \"passed\" on untriaged or negative digests","body":"_Would solve https:\/\/github.com\/flutter\/flutter\/issues\/145043._\r\n\r\nMajor edits:\r\n- Made it clear the workflow\/gardening concern is specific to the `flutter\/engine` roller (and rolls into the engine)\r\n\r\n## How Flutter Gold Works\r\n\r\nCurrently, our Skia Gold Client implementations ([engine](https:\/\/github.com\/flutter\/engine\/blob\/2253387ca30ef4f22e16234264493ba3d5f781a9\/testing\/skia_gold_client\/lib\/skia_gold_client.dart#L418-L420), [framework](https:\/\/github.com\/flutter\/flutter\/blob\/2fde3ac38b6e162037e87d83e875ef08e3306917\/packages\/flutter_goldens\/lib\/skia_client.dart#L349-L351)) share the following logic:\r\n\r\n```dart\r\nfinal String resultStdout = result.stdout.toString();\r\nif (result.exitCode != 0 &&\r\n    !(resultStdout.contains('Untriaged') || resultStdout.contains('negative image'))) {\r\n  \/* ... *\/\r\n```\r\n\r\nIn short, that means that if a call to `gold_ctl.py` returns a non-zero exit code (typically a universal signal for a failure), we instead (silently, though I'll send PRs changing that) swallow the failure, and allow the caller to treat the test as passing.\r\n\r\nAs a practical example, imagine the following workflow:\r\n\r\n1. We decide that straight-edge buttons are so 2010s, and rounded-edge buttons are the new hotness.\r\n1. User `Octocat` makes a change to the `Button` widget, it now renders rounded-edge buttons.\r\n1. The `button_test.dart`, which uses `SkiaGoldClient` takes a screenshot and uploads it to Skia Gold.\r\n1. The test is treated as _passing_ (no expectations failed).\r\n1. Later, the [`Flutter Gold`](https:\/\/github.com\/flutter\/flutter\/wiki\/Writing-a-golden-file-test-for-package:flutter) check produces an alert, asking for 1+ images to be untriaged.\r\n\r\nIn other words, at any given moment, a test that would _fail_ (on post-submit), is (intentionally) marked as _passing_ on pre-submit.\r\n\r\n## Why Is It Running This Way?\r\n\r\n_See https:\/\/github.com\/flutter\/flutter\/issues\/48744 for the original context._\r\n\r\nThere are a number of auto-rollers (see https:\/\/bdero.me\/rollerdash\/) in use by the Flutter team:\r\n\r\n- `skia-flutter-autoroll` (external -> engine)\r\n- `clang-flutter-engine` (external -> engine)\r\n- `dart-sdk-flutter-engine` (external -> engine)\r\n- `flutter-engine-flutter-autoroll` (engine -> framework)\r\n- `flutter-plugins-flutter-autoroll` (framework -> packages)\r\n- ... and so on.\r\n\r\n> _These bots use the Skia Roller service, which, which has received minor customizations for Flutter's workflow in the past._\r\n\r\nIn the past, before we had the setup discussed above, it is possible, either intentionally (i.e. optimizations or intentional changes to rendering) or unintentionally (flakes) that an automated \"roll\" (incrementing the vended dependency into another repository) would stall and new PRs would be created over and over attempting to roll, because of untriaged digests.\r\n\r\nAs a result, **engine** gardeners had to spend more time watching the rollers (which AFAICT, was largely a manual, pull-based process), and it was frequently possible where 100s of commits would get backed up. The Skia Roller service is fairly limited, for example it does not have configuration to specify a \"roll a maximum of N commits at a time\", so when 100s of commits stacked up, the  **engine** gardeners had to resort to (time-consuming) manual rolls in order to incrementally land a long-stalled roll.\r\n\r\nThe changes above simplified things for the rollers - now only test _assertion_ failures (or crashes) cause the roller PRs to be continuously closed and re-opened, and due to the \"pending\" behavior of the Flutter Gold check, the roller PR \"stays open\" to signal that it's waiting for manual (human) triage.\r\n\r\n## What's Next\r\n\r\nIt is within scope to consider:\r\n\r\n- Improving the Skia Roller service overall (either by convincing the Skia team it is a priority, or contributing ourselves)\r\n- Improving the Skia Roller Flutter SDK conditional logic (likely contributing ourselves, assuming this is acceptable)\r\n- Changing our tree **engine** gardening workflow to work around perceived limitations\r\n- Migrating off the Skia Roller to another solution\r\n- Do nothing, and accept the status quo (but we should do this intentionally, not by default)\r\n\r\n---\r\n\r\nMy thoughts: We've optimized too far for the rollers, that is, this current workflow optimizes a bit too far for the automated changes to roll into the SDK easily, and limit the amount of manual intervention (human) **engine** gardeners need to spend reviewing failing roll PRs. I'm under the impression that _gardening is intended to be a full-time job (for that week)_, so if we're still certain that is the right policy, it seems reasonable to re-evaluate if optimizing for the rollers\/**engine** gardeners is the right trade-off for our teams.\r\n\r\nIf we can somehow improve the bots to reduce toil _and_ revert this workflow change, that is seems like the best outcome. What is unclear to me is what if we can't (or it's too expensive to) reduce the toil - is the workflow change still worth it? This is coming up specifically because `flutter\/engine` is in the process of shipping its own graphics renderer, and anything that makes gold-testing less reliable or harder to understand undermines our testing strategy.\r\n\r\n\/cc @johnmccutchan @zanderso @Piinks @jonahwilliams @christopherfujino @goderbauer @gaaclarke ","comments":["I believe (although I am not 100% certain on the historic context here) the way gold failures are currently handled during presubmit is to the benefit of the (engine) sherif monitoring the engine roll into flutter\/flutter, and not the (framework) gardener. ","> I believe (although I am not 100% certain on the historic context here) the way gold failures are currently handled during presubmit is to the benefit of the (engine) sherif monitoring the engine roll into flutter\/flutter, and not the (framework) gardener.\r\n\r\nThis is correct.","Thanks! I've edited the proposal to make that more clear","The `fyi-engine` label is redundant with the `team-engine` label.","I've been thinking on this a lot this week and wanted to clarify a few more things.\r\n\r\nI have heard a lot that \"Gold doesn't work for us\" or \"We're not using Gold correctly\", and this is really not true.\r\n\r\nWe designed a workflow around the Gold product based on the constraints of our infrastructure several years ago. It works exactly as we designed it to work based on the decisions we made at the time.\r\n\r\nGold can be used in a lot of different ways. Some Gold customers bulk upload images, instead we use the pass fail flag and upload images individually as our tests run in parallel. Some Gold customers (including the Gold team) ignore the exit code and have an image sheriff that triages images as they land and show up on the dashboard, never breaking the tree, we do not. Some Gold customers use the tristate of untriaged\/positive\/negative, we only use untriaged\/positive.\r\n\r\nThe fact that we do not have a fail state in presubmit is a design choice, not a bug.\r\n\r\nIMO, making arbitrary changes to the system to try to make it work the way some of us think it should work is what is not working well for our team. We should redesign how we want to use the Gold product, or even another product, and make a plan to reimplement it without breaking the rest of the team in the process. I am glad we have this issue and this discussion now, because I think this is what we really need.","We are not proposing arbitrary changes, we're attempting to make the system work better for everyone. Its not fair for you to categorize our work this way because you disagree with it.","I have never said I disagree with changing things. \ud83e\udd37 "],"labels":["will need additional triage","c: proposal","c: tech-debt","fyi-android","fyi-ecosystem","team-engine","fyi-framework","fyi-infra"]},{"title":"Marking digests as \"negative\" in Skia Gold has no impact on pre-submit, causing post-submit breakages","body":"When a test reports a digest (read: an image with some metadata) to Skia Gold, there is a tri-modal state of how it is considered:\r\n\r\nState | What it means\r\n----- | ---------------\r\n\u2705  Positive | An _existing_ digest was found that matches[^1] the image that was marked _positive_ previously[^2].\r\n\u2754Untriaged |  No _existing_ digest was found that matches the image.\r\n\ud83d\udeab Negative | An _existing_ digest was found that matches the image that was marked _negative_ previously[^3].\r\n\r\nThe way our (read: `flutter\/flutter` and `flutter\/engine`) trees work, is that when a test uses Skia Gold, and uploads a digest, the test passes _regardless_ of what match state occurred[^4], and later[^5], asynchronously,  our `Flutter Gold` custom check runs and verifies that _no untriaged digests exist at the current commit_.\r\n\r\nThat is, the following workflow causes a post-submit build breakage:\r\n\r\n1. User `Octocat` pushes a PR that, as a result, produces an update to `draw_square_test`.\r\n2. The test suite\/builder, a hypothetical `linux: framework_draw_shapes`, runs, and reports all tests _passing_.\r\n3. The `Flutter Gold` check holds a _pending_ state, and will report back pending untriage digests, similar to below:\r\n\r\n![Example](https:\/\/github.com\/flutter\/flutter\/assets\/168174\/ab46d036-c0ef-4f67-8932-2e88fbf2947d)\r\n\r\n4. The square test now draws a circle. Oops! It is marked \"negative\".\r\n5. Now, all tests are passing (as they were in step 2), and Flutter Gold is _also_ marked as passing.\r\n6. Either manually, or via `auto-submit`, the PR lands.\r\n7. ... eventually, it's run on post-submit, which cause a tree breakage, because a test matches a negative digest.\r\n\r\n[^1]: What that means is out of scope of this issue, but it's not necessarily a 1:1 pixel match, nor a _specific_ match.\r\n[^2]: I believe the heuristic also includes \"and was seen in the last 100 landed commits\".\r\n[^3]: I'm not sure about the retention of negative digests, I'd assume they are 'forever' \ud83e\udd1e\ud83c\udffc.\r\n[^4]: The context of this decision is in https:\/\/github.com\/flutter\/flutter\/issues\/48744.\r\n[^5]: I believe it is a cron-job that runs every 5 minutes and checks if all other status checks are passing.\r\n\r\n---\r\n\r\nPossible improvements (to discuss):\r\n\r\n- Update our [documentation on Skia Gold](https:\/\/github.com\/flutter\/flutter\/wiki\/Writing-a-golden-file-test-for-package:flutter#flutter-gold-check)\r\n- Update the GitHub bot to print a scary message that \"negative doesn't work like you think it does\"\r\n- Update the Flutter Gold check to consider matching negative digests as a failure (note that from talking to @kjlubick, this currently is not something available in the Skia Gold API - we'd either need to request the API, help implement it, or find another way to get this functionality)\r\n- Update the Skia Gold Client logic to fail pre-submit on matching negatives (we could keep the current untriaged behavior)\r\n\r\n\/cc @Piinks @jonahwilliams @gaaclarke @goderbauer ","comments":["Updated the docs and announced to the team.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/wiki\/Writing-a-golden-file-test-for-package:flutter#known-issues","The bot comments live here: https:\/\/github.com\/flutter\/cocoon\/blob\/de7266b918899311cf6b0e52d6aeef56483c1146\/app_dart\/lib\/src\/service\/config.dart#L265\r\n\r\nI can look at updating the message tomorrow.\r\n\r\nKevin confirmed Gold does not have anything we can query in presubmit regarding negative images.","I can send you a PR for the bot, that seems trivial.","Let's sync on it tomorrow. I have some ideas about helpful links over scary messages. We could probably knock out https:\/\/github.com\/flutter\/flutter\/issues\/144347 too while we're at it."],"labels":["P1","c: tech-debt","team-framework","triaged-framework"]},{"title":"[Impeller] failure to enable VVL on engine tests should be fatal.","body":"We had a misconfiguration that caused VVL to not be included in builds, as a result most\/all of our unit tests ran with no validation. We should configure our tests such that accidentally disabling VVL causes at least one test to fail.","comments":[],"labels":["P1","e: impeller","team-engine","triaged-engine"]},{"title":"MenuItemButton shows an incorrect shortcut for CharacterActivators with modifier keys.","body":"### Steps to reproduce\n\n1. Create a `MenuItemButton` whose `shortcut` is a `CharacterActivator` with at least one modifier set (`control`, `meta`, `alt`, etc).\r\n2. Render your `MenuItemButton`.\n\n### Expected results\n\nThe `MenuItemButton` shortcut should include the modifier keys needed to activate the shortcut.\n\n### Actual results\n\nthe `MenuItemButton`'s shortcut is rendered as the character you selected for your `CharacterActivator`, _without_ any of the modifiers you specified.  Typing that character alone will not activate the menu item (the `CharacterActivator` itself is correct), so the shortcut shown in the menu button is wrong.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/services.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final examples = [\r\n      (\r\n        SingleActivator(LogicalKeyboardKey.keyS, control: true),\r\n        Text('SingleActivator'),\r\n      ),\r\n      (\r\n        CharacterActivator('S', control: true),\r\n        Text('CharacterActivator'),\r\n      ),\r\n    ];\r\n\r\n    return MaterialApp(\r\n      debugShowCheckedModeBanner: false,\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: Column(\r\n            mainAxisSize: MainAxisSize.min,\r\n            children: [\r\n              for (final (shortcut, child) in examples)\r\n                SizedBox(\r\n                  width: 200,\r\n                  child: MenuItemButton(shortcut: shortcut, child: child),\r\n                ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the code sample provided. \r\n\r\n\r\n<img width=\"350\" alt=\"Screenshot 2024-03-13 at 07 44 01\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/88313112\/0686224c-43ae-4df7-bd1a-6c2f16be604c\">\r\n\r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-5.0.pre.23, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-5.0.pre.23 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (7 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>","CC @gspencergoog ","@Caffeinix you're working on a PR for this, right? If not, let me know.","I am not working on one at present, no"],"labels":["framework","f: material design","customer: google","has reproducible steps","P2","team-design","triaged-design","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] fix remaining Vulkan validation errors discovered in https:\/\/github.com\/flutter\/engine\/pull\/51341\/","body":"Mostly seems to be problems with the runtime effect tests, though the scene tests also have unconsumed output validations.","comments":["The tests are:\r\n\r\n  \"impeller_Play_SceneTest_FlutterLogo_Vulkan\",\r\n  \"impeller_Play_SceneTest_CuboidUnlit_Vulkan\",\r\n  \"impeller_Play_RuntimeStageTest_CanCreatePipelineFromRuntimeStage_Vulkan\",\r\n  \"impeller_Play_RuntimeEffectSetsRightSizeWhenUniformIsStruct_Vulkan\",\r\n  \"impeller_Play_RuntimeEffectCanSuccessfullyRender_Vulkan\",\r\n  \"impeller_Play_RuntimeEffect_Vulkan\",\r\n  \"impeller_Play_EntityTest_RuntimeStageTest_CanCreatePipelineFromRuntimeStage_Vulkan\",\r\n  \"impeller_Play_EntityTest_RuntimeEffectSetsRightSizeWhenUniformIsStruct_Vulkan\",\r\n  \"impeller_Play_EntityTest_RuntimeEffectCanSuccessfullyRender_Vulkan\",\r\n  \"impeller_Play_EntityTest_RuntimeEffect_Vulkan\","],"labels":["P1","e: impeller","team-engine","triaged-engine"]},{"title":"[Impeller] impeller_dart_unittests crash when Vulkan validations are enabled.","body":"Seen in https:\/\/github.com\/flutter\/engine\/pull\/51341\/\r\n\r\nFor now I've restricted this test set to Metal. Its unclear to me if these were running before.","comments":["Based on discussion with @bdero these aren't expected to work right now."],"labels":["P3","e: impeller","team-engine","triaged-engine"]},{"title":"Test in flutter tool test\/integration.shard\/test_test.dart is flaking","body":"I've seen instances of this a couple times today on engine -> framework rolls\r\n\r\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/try\/Mac%20tool_integration_tests_1_4\/33669\/overview\r\n\r\n```\r\n07:11 +58 ~4 -1: test\/integration.shard\/test_test.dart: integration test should report nice errors for exceptions thrown within testWidgets() [E]                                                      \r\n  Expected: ''\r\n    Actual: 'After running the command \/usr\/bin\/arch -arm64e xcrun devicectl list devices --timeout 5 --json-output \/Volumes\/Work\/s\/w\/ir\/x\/t\/flutter_tools.Qc0iEb\/core_devices.Ilz0J5\/core_device_list.json the file\\n'\r\n              '\/Volumes\/Work\/s\/w\/ir\/x\/t\/flutter_tools.Qc0iEb\/core_devices.Ilz0J5\/core_device_list.json was expected to exist, but it did not.\\n'\r\n              'The process exited with code 0 and\\n'\r\n              'Stdout:\\n'\r\n              '\\n'\r\n              'No devices found.\\n'\r\n              '\\n'\r\n              'Stderr:\\n'\r\n              '\\n'\r\n              '\\n'\r\n              ''\r\n     Which: is different. Both strings start the same, but the actual value also has the following trailing characters: After runn ...\r\n  \r\n  package:matcher                              expect\r\n  test\/integration.shard\/test_test.dart 535:5  _testFile\r\n  \r\n\r\nTo run this test again: \/Volumes\/Work\/s\/w\/ir\/x\/w\/flutter\/bin\/cache\/dart-sdk\/bin\/dart test test\/integration.shard\/test_test.dart -p vm --plain-name 'integration test should report nice errors for exceptions thrown within testWidgets()'\r\n```","comments":[],"labels":["team-tool"]},{"title":"Allow for disabling auto-update check from an environment variable","body":"### Use case\r\n\r\nI don't want to be notified by Flutter tool when new version of Flutter becomes available. Not only I always stay up to date on latest Flutter releases, but I often have to switch between versions using [`fvm`](https:\/\/github.com\/leoafarias\/fvm), and I get notified about \"new version\" way too often.\r\n\r\nI can do `alias flutter=\"flutter --no-version-check\"`, but I don't like it. I prefer to use environment variables for defining such options. Furthermore it's a usual approach followed by many CLI tools: you can configure the same setting in 3 places (config file -> env variable -> command-line flag).\r\n\r\nI see that Flutter tool uses the [`cli_config`](https:\/\/pub.dev\/packages\/cli_config) package, which provides some facilities to implement the behavior I want\r\n\r\n### Proposal\r\n\r\nTeach `flutter_tools` to handle `FLUTTER_VERSION_CHECK` env variable. If this variable will be set to `false`, behave as if `--no-version-check` was passed.\r\n\r\n---\r\n\r\nI am willing to implement this once I get a buy-in from some other team members :)","comments":[],"labels":["c: new feature","tool","c: proposal","team-tool"]},{"title":"[flutter_tools] PathAccessException deleting files under build\\app\\intermediates because file \"is being used by another process\"","body":"On `beta\/3.20.0-1.2.pre`\r\nCommand `flutter assemble ...`\r\n\r\n```\r\nPathAccessException: Cannot delete file, path = 'C:\\src\\my_flutter_app\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\kernel_blob.bin' (OS Error: The process cannot access the file because it is being used by another process.\r\n, errno = 32)\r\nat _File.throwIfError(file_impl.dart:675)\r\nat _File._deleteSync(file_impl.dart:329)\r\nat FileSystemEntity.deleteSync(file_system_entity.dart:407)\r\nat ForwardingFileSystemEntity.deleteSync(forwarding_file_system_entity.dart:70)\r\nat ForwardingFileSystemEntity.deleteSync(forwarding_file_system_entity.dart:70)\r\nat ErrorHandlingFileSystem.deleteIfExists(error_handling_io.dart:80)\r\nat FlutterBuildSystem.trackSharedBuildDirectory(build_system.dart:778)\r\nat FlutterBuildSystem.build(build_system.dart:666)\r\nat <asynchronous gap>(async)\r\nat AssembleCommand.runCommand(assemble.dart:322)\r\nat <asynchronous gap>(async)\r\nat FlutterCommand.run.<anonymous closure>(flutter_command.dart:1383)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat CommandRunner.runCommand(command_runner.dart:212)\r\nat <asynchronous gap>(async)\r\nat FlutterCommandRunner.runCommand.<anonymous closure>(flutter_command_runner.dart:360)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat FlutterCommandRunner.runCommand(flutter_command_runner.dart:300)\r\nat <asynchronous gap>(async)\r\nat run.<anonymous closure>.<anonymous closure>(runner.dart:119)\r\nat <asynchronous gap>(async)\r\nat AppContext.run.<anonymous closure>(context.dart:153)\r\nat <asynchronous gap>(async)\r\nat main(executable.dart:92)\r\nat <asynchronous gap>(async)\r\n```","comments":["This is currently the top crasher on beta 3.20.0-1.*"],"labels":["P2","team-tool","triaged-tool"]},{"title":"[Flutter GPU] Add support for cubemaps.","body":null,"comments":[],"labels":["engine","c: proposal","P2","team-engine","triaged-engine","flutter-gpu"]},{"title":"[Impeller] Document all the flatbuffer identifiers used by Impeller.","body":"We use IPLR for runtime stages in Flutter. But now there are shader bundles for Flutter GPU and probably some others. We should document the ones is use.","comments":[],"labels":["engine","P2","e: impeller","team-engine","triaged-engine"]},{"title":"[flutter_tools] Handle broken pipe from stdin","body":"*Replace this paragraph with a description of what this PR is changing or adding, and why. Consider including before\/after screenshots.*\r\n\r\n*List which issues are fixed by this PR. You must list at least one issue. An issue is not required if the PR fixes something trivial like a typo.*\r\n\r\n*If you had to change anything in the [flutter\/tests] repo, include a link to the migration guide as per the [breaking change policy].*\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["tool"]},{"title":"[flutter_tools] SocketException: The remote computer refused the network connection during debug-adapter","body":"On version `stable\/3.19.3`\r\nWith command `flutter debug_adapter`\r\n\r\n```\r\nSocketException: The remote computer refused the network connection.\r\n (OS Error: The remote computer refused the network connection.\r\n, errno = 1225), address = 127.0.0.1, port = 57309\r\nat _NativeSocket.startConnect(socket_patch.dart:721)\r\nat _RawSocket.startConnect(socket_patch.dart:1914)\r\nat RawSocket.startConnect(socket_patch.dart:27)\r\nat Socket._startConnect(socket_patch.dart:2138)\r\nat Socket.startConnect(socket.dart:805)\r\nat _ConnectionTarget.connect(http_impl.dart:2487)\r\nat _HttpClient._getConnection.connect(http_impl.dart:2926)\r\nat _HttpClient._getConnection(http_impl.dart:2931)\r\nat _HttpClient._openUrl(http_impl.dart:2786)\r\nat _HttpClient.openUrl(http_impl.dart:2623)\r\nat _WebSocketImpl.connect(websocket_impl.dart:1021)\r\nat WebSocket.connect(websocket.dart:320)\r\nat DartDebugAdapter._vmServiceConnectUri(dart.dart:2583)\r\nat DartDebugAdapter.connectDebugger(dart.dart:647)\r\nat FlutterDebugAdapter._connectDebugger(flutter_adapter.dart:381)\r\nat FlutterDebugAdapter._handleDebugPort(flutter_adapter.dart:462)\r\nat <asynchronous gap>(async)\r\n```","comments":[],"labels":["P2","team-tool","triaged-tool"]},{"title":"Update runner to accept white spaces in path.","body":"This is to fix issues when using checkouts with paths including whitespaces.\r\n\r\n## Pre-launch Checklist\r\n\r\n- [X] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [X] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [X] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [X] I signed the [CLA].\r\n- [X] I listed at least one issue that this PR fixes in the description above.\r\n- [X] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [X] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [X] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [X] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["It looks like this pull request may not have tests. Please make sure to add tests before merging. If you need [an exemption](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests) to this rule, contact \"@test-exemption-reviewer\" in the #hackers channel in [Chat](https:\/\/github.com\/flutter\/flutter\/wiki\/Chat) (don't just cc them here, they won't see it! Use Discord!).\n\nIf you are not sure if you need tests, consider this rule of thumb: the purpose of a test is to make sure someone doesn't accidentally revert the fix. Ask yourself, **is there anything in your PR that you feel it is important we not accidentally revert back to how it was before your fix?**\n\n__Reviewers__: Read the [Tree Hygiene page](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#how-to-review-code) and make sure this patch meets those guidelines before LGTMing."],"labels":["tool"]},{"title":"[Flutter GPU] Allow specifying the mip level\/slice for Texture attachments and Uploads.","body":"Depends on https:\/\/github.com\/flutter\/flutter\/issues\/145014.","comments":[],"labels":["engine","c: proposal","P2","team-engine","triaged-engine","flutter-gpu"]},{"title":"[Impeller] HAL: Allow attaching and uploading specific Texture mip levels & slices.","body":"Currently, we can only attach and upload the first mip level\/slice of a Texture.\r\n\r\nCubemaps are our only multi-slice primitive right now. Both cubemaps and mipmaps play important roles in bread-and-butter 3D rendering. Cubemaps allow sampling from environment maps without any projection work, and mip level uploading allows for efficiently sampling specular radiance maps.","comments":[],"labels":["engine","c: proposal","P2","e: impeller","team-engine","triaged-engine"]},{"title":"[Flutter GPU] Support configurable vertex layouts.","body":"Depends on https:\/\/github.com\/flutter\/flutter\/issues\/116168.","comments":[],"labels":["c: new feature","engine","c: proposal","P2","team-engine","triaged-engine","flutter-gpu"]},{"title":"[Flutter GPU] OpenGLES support.","body":"I think this should already be working, but tried this on Windows over the weekend and Impeller is borked in general.","comments":[],"labels":["engine","c: proposal","P2","team-engine","triaged-engine","flutter-gpu"]},{"title":"[Flutter GPU] Vulkan support.","body":"This likely requires adding descriptor set information to shaderbundles, similar to IPLR.\r\n","comments":[],"labels":["c: new feature","engine","c: proposal","P2","team-engine","triaged-engine","flutter-gpu"]},{"title":"Migrate Flutter org wikis to checked in files","body":"### Document Link\r\n\r\n[flutter.dev\/go\/migrate-flutter-wiki](https:\/\/docs.google.com\/document\/d\/1naONKJd-eqPj8zEVfHfjGa5TCZNyJErBY4ca1gjSCq4\/edit?usp=sharing)\r\n \r\n[flutter.dev\/go\/migrate-flutter-wiki-spreadsheet](https:\/\/docs.google.com\/spreadsheets\/d\/1x65189ZBdNiLRygpUYoU08pwvXD4M-Z157c6pm8deGI\/edit?usp=sharing) \r\n\r\n### What problem are you solving?\r\n\r\nIn the January 2024 openness meeting, the state of the Flutter org's wiki was discussed. \r\nAll of the discussion\/pain points\/proposals\/concerns have been compiled into the linked document for feedback.\r\n\r\nWe are currently planning to migrate these files to checked in markdown files in a docs\/-esque directory structure in the repo.\r\n\r\nPlease provide feedback on the docs!","comments":[],"labels":["team","design doc","fyi-android","fyi-codelabs","fyi-design","fyi-desktop","fyi-ecosystem","team-framework","fyi-google-testing","fyi-go_router","fyi-infra","fyi-ios","fyi-news","fyi-release","fyi-tool","fyi-web","fyi-games","fyi-text-input",":scroll:"]},{"title":"Android 14 - Flutter stuck at \"Waiting for VM Service port to be available...\"","body":"### Steps to reproduce\r\n\r\n1. Create new flutter app in VS Code.\r\n2. Attempt to debug on physical Android 14 device.\r\n\r\n### Expected results\r\n\r\nApp should start and be debuggable.\r\n\r\n### Actual results\r\n\r\nApp never gets past starting splash screen, log stuck at \"Waiting for VM Service port to be available...\"\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MainApp());\r\n}\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: Text('Hello World!'),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshot<\/summary>\r\n\r\n[Screenshot_20240312_110526](https:\/\/github.com\/flutter\/flutter\/assets\/7032588\/f0865abe-4d01-4ece-9e10-e654fe68f26f)\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n[Log File](https:\/\/pastes.io\/w86vxonhit)\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.2, on Microsoft Windows [Version 10.0.22631.3155], locale en-US)\r\n    \u2022 Flutter version 3.19.2 on channel stable at C:\\Tech\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (2 weeks ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\1099996508.adm\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34-2, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.2)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34322.80\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[\u2713] VS Code, 64-bit edition (version 1.87.0)\r\n    \u2022 VS Code at C:\\Program Files\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 NX769J (mobile)   \u2022 FY23328102EA \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Windows (desktop) \u2022 windows      \u2022 windows-x64    \u2022 Microsoft Windows [Version\r\n      10.0.22631.3155]\r\n    \u2022 Chrome (web)      \u2022 chrome       \u2022 web-javascript \u2022 Google Chrome 121.0.6167.86\r\n    \u2022 Edge (web)        \u2022 edge         \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["> ```\r\n> NX769J (mobile)   \u2022 FY23328102EA\r\n> ```\r\n\r\n@Anti049 What device is this ? Can you provide make and model ?\r\n\r\nAlso, could you confirm if this only happens when you use \"Debug\" (and not \"Run\"), or occurs with both options and also try capturing a log (please remove anything sensitive before sharing):\r\n\r\nRun the [Dart: Capture Debugging Logs command](https:\/\/dartcode.org\/docs\/logging\/#capture-debugging-logs)\r\nReproduce the issue\r\nClick Cancel on the logging notification to stop logging and open the log\r\nRemove anything sensitive from the log\r\nAttach the log here, in a [gist](https:\/\/gist.github.com\/),\r\n\r\n","The device is a Nubia REDMAGIC 9 Pro.\r\n\r\nIssue still occurs when running without the debugger, as seen [here](https:\/\/gist.github.com\/Anti049\/7992669af9010694d3dbabc596550db7).\r\n\r\n","I am unable to replicate this on Android 14 device which isn't similar to the one mentioned above.\r\nBased on the report, I'll keep the issue open for team's input \/ attention. \r\nThere's a similar issue open but it is for ios https:\/\/github.com\/flutter\/flutter\/issues\/129246\r\n\r\n\/cc @DanTup for thoughts.","> Issue still occurs when running without the debugger, as seen [here](https:\/\/gist.github.com\/Anti049\/7992669af9010694d3dbabc596550db7).\r\n\r\nSetting `\"dart.allowFlutterForcedDebugMode\": false` in your settings _might_ fix this for Run (not Debug), at least temporarily. In order to support some functionality, we now default to attaching a debugger even in Run mode (which means a failure to attach a debugger affects both modes). That flag opts-out of this behaviour.\r\n\r\nAs for the original issue, this feels like something that came up in the past when the `logcat` output wasn't being captured correctly (for example in one case [the VM Service URL was being censored by manufacturer tweaks](https:\/\/github.com\/flutter\/flutter\/issues\/82520) and in another [it only worked when called through a shell](https:\/\/github.com\/flutter\/flutter\/issues\/18889#issuecomment-422217761)).\r\n\r\nIt may be useful to run `adb logcat` and capturing the output when trying to launch the app to see whether there's any useful output there (I don't think the log captured above includes everything). I believe the app should print something like \"VM Service listening on <url>\" and Flutter would detect that.\r\n","Setting that setting to false in VS Code DOES allow me to run without debugging, but couldn't find anything like that in the logcat (found 3 lines relating to VM Service, but all just say either \"sarting\" or \"success\"). Please see the logcat output below.\r\n\r\n[Logcat Output](https:\/\/gist.github.com\/Anti049\/3ec24859ca62a4eccc8e80cde1d36de7)","@Anti049 was this log captured while you tried to launch in debug mode? Oddly, there is no mention of Dart or Flutter in the whole log. There are a few mentions of \"VM Service\" but it's not clear to me whether that's the Dart VM Service or an unrelated program (\"D trustedui@1.0-1-service-qti: TrustedUI-VM service starting.\" - I don't know what TrustedUI is).\r\n\r\nOut of interest, if you run from the terminal with `flutter run`, does it print a VM Service URL (\"A Dart VM Service on Windows is available at\") and can you hot reload with `r`?","I got this log by running `adb shell -x logcat` from the terminal and then running in debug mode from VS Code. Is there another way to capture the log you're looking for?\r\n\r\nRunning `flutter run` from the terminal directly launches the app on the device as it should, but the terminal is still stuck on \"Waiting for VM Service port to be available...\", and that's the only mention of VM Service in the whole output.","Thanks, I suspect that would be the case (and confirms it's not specific to how VS Code is starting the app).\r\n\r\nRunning that same command here (on a Pixel 4a) does work as expected, in the output I can see:\r\n\r\n```\r\n03-14 14:47:25.127  9725  9785 I flutter : The Dart VM service is listening on http:\/\/127.0.0.1:39177\/wQC1nUoLATg=\/\r\n```\r\n\r\nIt's possible that it not showing up in the logs is the cause of this problem - the `flutter` tool is scanning those logs to find the VM Service URL, but it's not finding it.\r\n\r\nUnfortunately I don't know a lot about logcat\/Android so this might need input from someone that knows more in this area. https:\/\/github.com\/flutter\/flutter\/issues\/82520 was caused by a manufacturer filtering out URLs in the logcat output - it's possible this is something similar (but maybe they're filtering the whole row instead of just replacing the URL with asterisks), but I had a quick search and wasn't able to find any other complaints of this nature.\r\n\r\nAlso - it's a long shot, but it may be worth looking through Debugging settings on the phone (presumably where you enabled USB Debugging) to see if there are any options that seem to be related to logs that might be filtering them.","No luck with the developer settings, unfortunately.","When using flutter3.16.7, the same problem occurs even with an empty flutter project on Nubia Z50Ultra on Android 14, but runs fine on Android 13."],"labels":["platform-android","tool","e: OS-version specific","team-tool"]},{"title":"Flutter Web Renderer : Canvaskit had issues on bigger screen sizes (5120x2880) in Chrome Web Browser","body":"### Steps to reproduce\r\n\r\n1. Use web renderer Canvaskit (default renderer)\r\n2. then try to open your flutter app on chrome\r\n3. if you are not on a big screen desktop\/laptop you can still generate it by going to inspect mode and set the screen size to 5120x2880 then the screen will to blank\r\n\r\n**NOTE : it only happens when the web renderer is set to Canvaskit**\r\n\r\n### Expected results\r\n\r\nThe page should get loaded properly on bigger screens.\r\n\r\n### Actual results\r\n\r\nPage gets cut when it is open in a bigger screen (in chrome)\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n\/\/ Flutter app scaffold body code segment\r\nContainer(\r\n     color: Colors.red,\r\n),\r\n```\r\n```\r\n\/\/ Code inside web\/index.html\r\n <script>\r\n    window.addEventListener('load', function(ev) {\r\n      \/\/ Download main.dart.js\r\n      _flutter.loader.loadEntrypoint({\r\n        serviceWorker: {\r\n          serviceWorkerVersion: serviceWorkerVersion,\r\n        },\r\n        onEntrypointLoaded: function(engineInitializer) {\r\n          engineInitializer.initializeEngine().then(function(appRunner) {\r\n            appRunner.runApp();\r\n          });\r\n        }\r\n      });\r\n    });\r\n  <\/script> \r\nor \r\n <script>\r\n    window.addEventListener('load', function(ev) {\r\n      \/\/ Download main.dart.js\r\n      _flutter.loader.loadEntrypoint({\r\n        serviceWorker: {\r\n          serviceWorkerVersion: serviceWorkerVersion,\r\n        },\r\n        onEntrypointLoaded: function(engineInitializer) {\r\n          engineInitializer.initializeEngine({renderer: 'canvaskit'}).then(function(appRunner) {\r\n            appRunner.runApp();\r\n          });\r\n        }\r\n      });\r\n    });\r\n  <\/script>\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/98372124\/7e513849-aa91-44d4-bae8-962923c1de83\r\n\r\n<\/details>\r\n\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nWarning when the issue occurrs\r\nfca @ js?key=AIzaSyAA2TYlKeuEMFfdEH8d2-qzT8rSRiASyvY:218\r\ngoogle.maps.Load @ js?key=AIzaSyAA2TYlKeuEMFfdEH8d2-qzT8rSRiASyvY:14\r\n(anonymous) @ js?key=AIzaSyAA2TYlKeuEMFfdEH8d2-qzT8rSRiASyvY:389\r\n(anonymous) @ js?key=AIzaSyAA2TYlKeuEMFfdEH8d2-qzT8rSRiASyvY:389\r\nflutter.js:3 Exception while loading service worker: Error: prepareServiceWorker took more than 4000ms to resolve. Moving on.\r\n    at flutter.js:1:336\r\n(anonymous) @ flutter.js:3\r\nPromise.catch (async)\r\nloadEntrypoint @ flutter.js:3\r\n(anonymous) @ doctors:54\r\nload (async)\r\n(anonymous) @ doctors:52\r\n22WebGL: this extension has very low support on mobile devices; do not rely on it for rendering effects: WEBGL_polygon_mode\r\ncanvaskit.js:129 WebGL: this extension has very low support on mobile devices; do not rely on it for rendering effects: WEBGL_polygon_mode\r\n(anonymous) @ canvaskit.js:129\r\nkd @ canvaskit.js:129\r\njd @ canvaskit.js:128\r\nfa @ canvaskit.js:127\r\na.GetWebGLContext @ canvaskit.js:14\r\nasy @ main.dart.js:69074\r\nbff @ main.dart.js:69003\r\n(anonymous) @ main.dart.js:68685\r\n(anonymous) @ main.dart.js:6940\r\n$2 @ main.dart.js:81583\r\nq @ main.dart.js:6926\r\nbnN @ main.dart.js:68700\r\nL5 @ main.dart.js:68678\r\n(anonymous) @ main.dart.js:68861\r\n(anonymous) @ main.dart.js:6940\r\n$2 @ main.dart.js:81583\r\nq @ main.dart.js:6926\r\nbw5 @ main.dart.js:68864\r\nBC @ main.dart.js:68853\r\n(anonymous) @ main.dart.js:74779\r\n(anonymous) @ main.dart.js:6940\r\n$2 @ main.dart.js:81583\r\n\r\n\/\/ Error in between\r\nShader compilation error\r\ncanvaskit.js:170------------------------\r\ncanvaskit.js:170 1 #version 300 es\r\ncanvaskit.js:170 2\r\ncanvaskit.js:170 3 precision mediump float;\r\ncanvaskit.js:170 4 precision mediump sampler2D;\r\ncanvaskit.js:170 5 out mediump vec4 sk_FragColor;\r\ncanvaskit.js:170 6 uniform sampler2D uTextureSampler_0_S0;\r\ncanvaskit.js:170 7 in highp vec2 vlocalCoord_S0;\r\ncanvaskit.js:170 8 void main() {\r\ncanvaskit.js:170 9 mediump vec4 outputColor_S0 = vec4(1.0);\r\ncanvaskit.js:170 10 highp vec2 texCoord = vlocalCoord_S0;\r\ncanvaskit.js:170 11 outputColor_S0 = texture(uTextureSampler_0_S0, texCoord, -0.475);\r\ncanvaskit.js:170 12 {\r\ncanvaskit.js:170 13 sk_FragColor = outputColor_S0;\r\ncanvaskit.js:170 14 }\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.22631.3235], locale en-IN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\rudra\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[X] Visual Studio - develop Windows apps\r\n    X Visual Studio not installed; this is necessary to develop Windows apps.\r\n      Download at https:\/\/visualstudio.microsoft.com\/downloads\/.\r\n      Please install the \"Desktop development with C++\" workload, including all of its default components\r\n\r\n[\u221a] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u221a] VS Code (version 1.87.1)\r\n    \u2022 VS Code at C:\\Users\\rudra\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.22631.3235]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 121.0.2277.112\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Using canvaskit:\r\n\r\n<img width=\"646\" alt=\"Screenshot 2024-03-13 at 12 52 10 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/8b67e218-f127-4f9c-b06c-b28c6bdcf8bf\">\r\n\r\n\r\nWith html:\r\n\r\n<img width=\"646\" alt=\"Screenshot 2024-03-13 at 12 51 31 PM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/67046386\/01fbc922-da5a-4ea9-81af-d880a1245694\">\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-5.0.pre.23, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-5.0.pre.23 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (4 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n","@darshankawar That was the first solution we had but it started affecting a user who is in windows 10. That issue was reproduced in both chrome & edge (may be it happens on all chromium based browsers)\r\n\r\nSame pages works on other devices. ","Any updates on this?"],"labels":["engine","platform-web","e: web_canvaskit","has reproducible steps","P2","team-web","triaged-web","found in release: 3.19","found in release: 3.21"]},{"title":"Add UserChoiceBilling information to in app purchase readme. ","body":"Update the readme to include that the package includes user choice billing features. ","comments":[],"labels":["p: in_app_purchase","P2"]},{"title":"Segmented button doesn't render correctly with SVG icon","body":"### Steps to reproduce\r\n\r\nSegmented button with:\r\n\r\n>       emptySelectionAllowed: true\r\n>       showSelectedIcon: false\r\n\r\ninitialize with a ButtonSegment that has an SVG **icon**. (used flutter_svg: ^2.0.10+1)\r\nwhen onSelectionChanged is called, change the icon color for the selection using a ColorFiltered.\r\n\r\n### Expected results\r\n\r\nIcon color will change according to selection and what's defined, and segmented button will render correctly.\r\n\r\n### Actual results\r\n\r\nIcon colors change, but the rightmost segment is not clipped correctly, resulting in a stadium border with a rectangular selected background.\r\n\r\n### Code sample\r\n\r\n<details open>\r\n<summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter_svg\/svg.dart';\r\n\r\n\/\/\/ Flutter code sample for [SegmentedButton].\r\n\r\nvoid main() {\r\n  runApp(const SegmentedButtonApp());\r\n}\r\n\r\nclass SegmentedButtonApp extends StatelessWidget {\r\n  const SegmentedButtonApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      theme: ThemeData(useMaterial3: true),\r\n      home: const Scaffold(\r\n        body: Center(\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            children: <Widget>[\r\n              Spacer(),\r\n              MultipleChoice(),\r\n              Spacer(),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nenum Sizes {\r\n  extraSmall,\r\n  small,\r\n}\r\n\r\nclass SvgPath {\r\n  static const String heat = \"assets\/svg\/circle-heat-svgrepo-com.svg\";\r\n  static const String cloudArrow =\r\n      \"assets\/svg\/cloud-arrow-down-svgrepo-com.svg\";\r\n}\r\n\r\nclass MultipleChoice extends StatefulWidget {\r\n  const MultipleChoice({super.key});\r\n\r\n  @override\r\n  State<MultipleChoice> createState() => _MultipleChoiceState();\r\n}\r\n\r\nclass _MultipleChoiceState extends State<MultipleChoice> {\r\n  Set<Sizes> selection = {};\r\n  var segments = <ButtonSegment<Sizes>>[\r\n    ButtonSegment<Sizes>(\r\n        value: Sizes.extraSmall, icon: getSvgFromPath(SvgPath.cloudArrow)),\r\n    ButtonSegment<Sizes>(\r\n        value: Sizes.small, icon: getSvgFromPath(SvgPath.heat)),\r\n  ];\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return SegmentedButton<Sizes>(\r\n      style: SegmentedButton.styleFrom(splashFactory: NoSplash.splashFactory),\r\n      segments: segments,\r\n      selected: selection,\r\n      emptySelectionAllowed: true,\r\n      showSelectedIcon: false,\r\n      onSelectionChanged: (Set<Sizes> newSelection) {\r\n        final selectedSegments = segments.map((e) {\r\n          if (newSelection.contains(e.value)) {\r\n            return ButtonSegment<Sizes>(\r\n              value: e.value,\r\n              icon: ColorFiltered(\r\n                colorFilter:\r\n                    const ColorFilter.mode(Colors.red, BlendMode.srcIn),\r\n                child: e.icon,\r\n              ),\r\n            );\r\n          } else {\r\n            return ButtonSegment<Sizes>(\r\n              value: e.value,\r\n              icon: ColorFiltered(\r\n                colorFilter:\r\n                    const ColorFilter.mode(Colors.black, BlendMode.srcIn),\r\n                child: e.icon,\r\n              ),\r\n            );\r\n          }\r\n        }).toList();\r\n        setState(() {\r\n          selection = newSelection;\r\n          segments = selectedSegments;\r\n        });\r\n      },\r\n      multiSelectionEnabled: true,\r\n    );\r\n  }\r\n}\r\n\r\nWidget getSvgFromPath(String path, [Color color = Colors.black]) {\r\n  return SvgPicture.asset(\r\n    path,\r\n    colorFilter: ColorFilter.mode(\r\n      color,\r\n      BlendMode.srcIn,\r\n    ),\r\n  );\r\n}\r\n```\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n### **Note the rightmost corner:**\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n![segmented_demo](https:\/\/github.com\/flutter\/flutter\/assets\/12214379\/9bece5b9-bf7f-4e4e-bebc-a4b45214dd94)\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3 23D56 darwin-arm64, locale en-IL)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/gamerd\/SDK\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 Pub download mirror https:\/\/artifactory.scrdairy.com\/artifactory\/api\/pub\/pub-virtual\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/gamerd\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.14.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone 15 (mobile) \u2022 438DBD07-A66E-489B-B2D4-99689DE8F9D5 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2 (simulator)\r\n    \u2022 macOS (desktop)    \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.3 23D56 darwin-arm64\r\n    \u2022 Chrome (web)       \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPhone 12. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.```\r\n\r\n<\/details>\r\n","comments":["**Icons used in the example:**\r\n\r\n\r\n![circle-heat-svgrepo-com](https:\/\/github.com\/flutter\/flutter\/assets\/12214379\/3ef422bb-38fd-4503-879d-ef6f9cd28143)\r\n![cloud-arrow-down-svgrepo-com](https:\/\/github.com\/flutter\/flutter\/assets\/12214379\/e4ceef2d-d66e-4c50-a895-c9ea15d896da)\r\n","Thanks for the report. I also see the issue, results below on some platforms:\r\n\r\nOn the web, it seems more major when the color is changed for the whole page (looks similar to https:\/\/github.com\/flutter\/flutter\/issues\/142620).\r\n\r\n| Web | macOS (same to Android) |\r\n| --------------- | --------------- |\r\n<video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/8f460dd8-4e74-45e9-b8ab-f32492266414\"\/> |  <video src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/d48ff203-63b0-49a8-be66-431a010d5d89\"\/>\r\n\r\nThe issue will not appear if removing `ColorFiltered` with `BlendMode.srcOut`.\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.37, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.37 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (3 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\n\r\n","@huycozy BTW, if you change to RTL this bug will reproduce on the leftmost side.","It looks like the SegmentedButton does not have a clip in it? if so this is expected though unforunate. \r\n\r\nSome other framework widgets allow specifying that they should clip their children for cases like this."],"labels":["framework","a: images","c: rendering","has reproducible steps","team-design","found in release: 3.19","found in release: 3.21"]},{"title":"[web][a11y] Screen reader doesn't voice information about the list and the number of items","body":"### Steps to reproduce\n\n1. Execute `flutter run -d chrome` on the code sample.\r\n2. On web, use a screen reader to read the elements.\n\n### Expected results\n\n1. Items are grouped into a list. \r\n2. The list is voiced with the number of items.\r\n3. When moving through the elements, its index is voiced.\n\n### Actual results\n\n1. Items are not included in the list.\r\n2. Each item as a separate empty group. \n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/semantics.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n  SemanticsBinding.instance.ensureSemantics();\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Material(\r\n        child: Scaffold(\r\n          appBar: AppBar(backgroundColor: Colors.blue),\r\n          body: ListView(\r\n            semanticChildCount: 3,\r\n            padding: const EdgeInsets.all(20.0),\r\n            children: const [\r\n              Text('Text 1'),\r\n              Text('Text 2'),\r\n              Text('Text 3'),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nHere is an example of how it looks:\r\n<img width=\"1228\" alt=\"Screenshot 2024-03-12 at 2 30 40\u202fPM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/61043519\/ce4f3373-43de-4b49-ad3c-1bcc2ecbb150\">\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/61043519\/04caeaf2-0d1c-4a09-a8b6-ff335ccbb55c\r\n\r\n\r\n\r\nHere is an example of what I need:\r\n<img width=\"1231\" alt=\"Screenshot 2024-03-12 at 2 31 19\u202fPM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/61043519\/ae018123-1581-40ba-bf7f-fdb7cbd7ef39\">\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/61043519\/6e58ce4e-ac7f-4ad1-b81d-709d53242161\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/oleh.lysenko\/development\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 31.0.0)\r\n    \u2022 Android SDK at \/Users\/oleh.lysenko\/Library\/Android\/sdk\r\n    \u2022 Platform android-33, build-tools 31.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7590822)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C65\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7590822)\r\n\r\n[\u2713] Android Studio (version 2020.3)\r\n    \u2022 Android Studio at \/Users\/oleh.lysenko\/Library\/Application Support\/JetBrains\/Toolbox\/apps\/AndroidStudio\/ch-0\/203.7784292\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.10+0-b96-7281165)\r\n\r\n[\u2713] VS Code (version 1.67.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.60.0\r\n\r\n[\u2713] Connected device (4 available)            \r\n    \u2022 iPad (mobile)      \u2022 00008103-001A6936112B401E            \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 iPhone 15 (mobile) \u2022 FEA1C1BB-BC7D-4C29-968A-FE7D45A7C3A8 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-2 (simulator)\r\n    \u2022 macOS (desktop)    \u2022 macos                                \u2022 darwin-x64     \u2022 macOS 14.3.1 23D60 darwin-x64\r\n    \u2022 Chrome (web)       \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["I took the example from there: https:\/\/react.semantic-ui.com\/maximize\/list-example-basic\/","Thanks for the report. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.37, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.37 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8270872f86 (3 hours ago), 2024-03-12 17:52:24 -0700\r\n    \u2022 Engine revision ea848c3b24\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-227.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","This seems to be a framework-wide issue. We don't have this information in the semantics API. Redirecting to the framework team for evaluation. If anything needs to change in the web engine, happy to help with that."],"labels":["framework","a: accessibility","f: scrolling","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"Pages API is just Widget API in disguise","body":"### Use case\r\n\r\nPages API has seen difficulties of adoption, expansion and in general it feels kinda underperformant as an API. Pages API is complex and hard to use. For example, it is not straightforward how to declare a new page and I don't think it is a matter of documentation. See issues (https:\/\/github.com\/flutter\/flutter\/issues\/87352)\r\n\r\nThe only place where `Pages` are used, is in the `Navigator` widget. Flutter has achieved great things by making a very simple yet powerful assumption. Everything is a widget. However, this assumption is broken when we enter the Navigator widget. Instead of being a widget which uses other widgets, it is a widget which uses Pages?!?\r\n\r\nOkay let's try to define a Page. What is a `Page`? A Page according to the [official documentation](https:\/\/api.flutter.dev\/flutter\/widgets\/Page-class.html) is the configuration of a route. What is then a `Route`? A route is a mental model class representing an entry managed by the Navigator.\r\n\r\nFrom my point of view, a page is a class which holds logic about routing, transitions to and from the physical screen and other stuff. So it is like a Widget with extra state about routing.\r\n\r\n\r\n### Proposal\r\n\r\nI would really like to see the Pages API being just that an animated widget that also updates the Routing information (which should be held elsewhere).\r\n\r\nJust like [View](https:\/\/api.flutter.dev\/flutter\/widgets\/View-class.html) is a widget. I would like for Navigator to accept a list of `Widget`s. `MaterialPage` would then just be a widget that has internal animations (aka an `ImplicitlyAnimatedWidget`), and `NoTransitionPage` would just be a simple widget without animations. Moreover, `PopupPage` where a barrier is used, could be a Stack with a filter widget on the background. This enables to define easily other types of \"Pages\" as well as implement complex Page capabilities.","comments":[],"labels":["framework","f: routes","c: proposal","P3","team-framework","triaged-framework"]},{"title":"[Impeller] ImageFiltered flickers when widget is rendered on top (Regression)","body":"### Steps to reproduce\r\n\r\nThis was already detected in previous versions https:\/\/github.com\/flutter\/flutter\/issues\/139294.\r\nIt has gotten worse. \r\n\r\n1. Add an ImageFiltered\r\n2. Add a widget on top of it (eg: in a stack) and move it around\r\n\r\n\r\n### Expected results\r\n\r\nThe ImageFiltered should render as normal and not be affected by the widget on top\r\nThis happens correctly on Android but not on iOS using Impeller\r\nThis issue has been detected in stable 3.19.3 and latest master 3.21.0-4.0.pre.14\r\n\r\n### Actual results\r\n\r\nWeird glitches when the widget on top moves. This happens only on iOS using Impeller\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:ui';\r\n\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(home: MyHomePage());\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  double y = 400;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Stack(\r\n        children: [\r\n          Center(\r\n            child: ImageFiltered(\r\n              imageFilter: ImageFilter.dilate(radiusX: 100, radiusY: 100),\r\n              child: Container(\r\n                height: 200,\r\n                color: Colors.green,\r\n                margin: const EdgeInsets.all(24),\r\n              ),\r\n            ),\r\n          ),\r\n          Positioned(\r\n            left: 0,\r\n            right: 0,\r\n            top: y,\r\n            height: 24,\r\n            child: GestureDetector(\r\n              onHorizontalDragUpdate: (details) {\r\n                setState(() {\r\n                  y = details.globalPosition.dy;\r\n                });\r\n              },\r\n              child: Container(\r\n                color: Colors.black,\r\n              ),\r\n            ),\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/19904063\/378d5c1f-c58c-4890-a381-203712f1114f\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 14.1.1 23B81 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at \/Users\/jb\/fvm\/versions\/master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/jb\/fvm\/versions\/3.16.9\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/jb\/fvm\/versions\/master. Consider adding \/Users\/jb\/fvm\/versions\/master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/2.19.6\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/jb\/fvm\/versions\/master. Consider adding \/Users\/jb\/fvm\/versions\/master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (9 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at \/Users\/jb\/Library\/Android\/sdk\r\n    \u2022 Platform android-33, build-tools 33.0.2\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A240d\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.15+0-b2043.56-8887301)\r\n\r\n[\u2713] VS Code (version 1.85.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 sdk gphone64 arm64 (mobile)     \u2022 emulator-5554                        \u2022 android-arm64  \u2022 Android 13 (API 33) (emulator)\r\n    \u2022 iPhone 15 Pro (mobile)          \u2022 92FA52F6-E6A5-4656-A33F-5C8F26A839F9 \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-0 (simulator)\r\n    \u2022 macOS (desktop)                 \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.1.1 23B81 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad                \u2022 darwin         \u2022 macOS 14.1.1 23B81 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPhone de Jaime. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\nexit code 0\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the code sample provided above.\r\n\r\nAs noted above, this only happens on iOS. It works just fine on android. \r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Dean\u2019s Apple\u00a0Watch needs to connect to determine its availability. Check the connection between the device and its companion iPhone, and the connection between the iPhone and Xcode. Both devices may also need to be restarted and unlocked. (code 1)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (10 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Dean\u2019s Apple\u00a0Watch needs to connect to determine its availability. Check the connection between the device and its companion iPhone, and the connection between the iPhone and Xcode. Both devices may also need to be restarted and unlocked. (code 1)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>","This looks a lot like https:\/\/github.com\/flutter\/flutter\/issues\/144213.  That one has been bisected.  It would be worth making sure that identified PR didn't also exacerbate this.","Playing around with this, this is related to partial repaint.  Adding `FLTDisablePartialRepaint` to the Info.plist removes the bug.","Yes, I suspect this isn't related to https:\/\/github.com\/flutter\/flutter\/issues\/144213. I opened a thread on Discord about this bug if you're interested in taking a look: https:\/\/discord.com\/channels\/608014603317936148\/1173336353187041380\/threads\/1217632694704406641","The last time this bug was reported was here: https:\/\/github.com\/flutter\/flutter\/issues\/139294\r\n\r\nIt was fixed with https:\/\/github.com\/flutter\/engine\/pull\/49076."],"labels":["c: regression","platform-ios","engine","c: rendering","has reproducible steps","P1","e: impeller","team-engine","triaged-engine","found in release: 3.19","found in release: 3.21"]},{"title":"TextField helper text top padding should be 4.0 on Material3","body":"### Steps to reproduce\n\n1. Run the code sample\r\n2. Observe that the gap between the text field container and the helper text is too large (it is 8.0 instead of 4.0).\n\n### Expected results\n\nFrom the M3 specification:\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/840911\/a6115b3b-be04-4d1e-8151-e22510c8bc79)\r\n\r\nSee https:\/\/m3.material.io\/components\/text-fields\/specs#0c5c8d6d-2169-4d42-960c-51f6ee42eb57\n\n### Actual results\n\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/840911\/6a8b0a11-2bdb-4de8-bb53-6eb042a190f3)\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: SafeArea(\r\n        child: Scaffold(\r\n          body: Padding(\r\n            padding: const EdgeInsets.all(16.0),\r\n            child: TextField(\r\n              controller: TextEditingController(text: ''),\r\n              decoration: InputDecoration(\r\n                labelText: 'label',\r\n                helperText: 'helper',\r\n                filled: true,\r\n                helperStyle: TextStyle(backgroundColor: Colors.amber[700]),\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\nNo error\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel master, 3.19.0-3.0.pre.1083, on Ubuntu 23.10 6.5.0-25-generic, locale fr_FR.UTF-8)\r\n    \u2022 Flutter version 3.19.0-3.0.pre.1083 on channel master at \/home\/bruno\/Nevercode\/flutter\r\n    \u2022 Upstream repository git@github.com:NevercodeHQ\/flutter.git\r\n    \u2022 FLUTTER_GIT_URL = git@github.com:NevercodeHQ\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (il y a 9 heures), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at \/media\/oldhome\/Android\/Sdk\r\n    \u2022 Platform android-34, build-tools 33.0.2\r\n    \u2022 ANDROID_HOME = \/media\/oldhome\/Android\/Sdk\r\n    \u2022 Java binary at: \/media\/oldhome\/Produits\/android-studio\/jre\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at google-chrome\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 Ubuntu clang version 16.0.6 (15)\r\n    \u2022 cmake version 3.27.4\r\n    \u2022 ninja version 1.11.1\r\n    \u2022 pkg-config version 1.8.1\r\n\r\n[\u2713] Android Studio (version 2021.3)\r\n    \u2022 Android Studio at \/media\/oldhome\/Produits\/android-studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/snap\/code\/current\/usr\/share\/code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 Linux (desktop) \u2022 linux  \u2022 linux-x64      \u2022 Ubuntu 23.10 6.5.0-25-generic\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.111\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["First PR was reverted, see https:\/\/github.com\/flutter\/flutter\/pull\/145168\r\nWaiting for information about the internal failure."],"labels":["a: text input","framework","f: material design","has reproducible steps","P2","found in release: 3.19","team-text-input","found in release: 3.21"]},{"title":"Character width differs when specifying fonts directly or from ancestors using `TextSpan`","body":"# Overview\r\n\r\nI wanted to specify a particular font with `ThemeData.light()` as the base `TextTheme`, so I replaced only the font and recreated the `TextTheme`. However, I noticed that if the font style is inherited from the ancestor `TextTheme`, the width becomes slightly narrower than when the font style is specified directly. \r\n\r\n**Screenshot**\r\n\r\n<img src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12263798\/4f317887-387d-40b6-9d90-ce4d4dca574b\" width=\"320\">\r\n\r\nThe images below are confirmation of the width of the Text widget in Flutter Inspector.\r\n\r\n| Specify font from ancestor | Specify font directly |\r\n----|---- \r\n| <img src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12263798\/f6ebcfec-95a5-48b2-922f-0b2ed3b9bf16\" width=\"320\"> | <img src=\"https:\/\/github.com\/flutter\/flutter\/assets\/12263798\/1809e630-fe07-453a-8e9a-dae2d2b3c3f3\" width=\"320\"> |\r\n\r\nCurrently, this only occurs with numeral fonts and has been confirmed to occur only when using TextSpan.\r\n\r\n\r\n<details>\r\n<summary>  Smaple code <\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:google_fonts\/google_fonts.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      home: MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatelessWidget {\r\n  MyHomePage({Key? key, required this.title}) : super(key: key);\r\n\r\n  final String title;\r\n\r\n  final baseFont = const TextStyle(\r\n    fontSize: 24,\r\n    color: Color(0xFFFC0D1C),\r\n    fontWeight: FontWeight.bold,\r\n    height: 1.1,\r\n  );\r\n\r\n  final text = '22,200';\r\n\r\n  static TextStyle textStyleWithFontStyleApplied({TextStyle? baseTextStyle}) {\r\n    assert(GoogleFonts.notoSansJp().fontFamily != null);\r\n    return GoogleFonts.roboto(textStyle: baseTextStyle).copyWith(\r\n      fontFamilyFallback: <String>[\r\n        GoogleFonts.notoSansJp().fontFamily!,\r\n      ],\r\n    );\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final TextTheme lightTextTheme = ThemeData.light().textTheme;\r\n    final textTheme = TextTheme(\r\n      displayLarge: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.displayLarge,\r\n      ),\r\n      displayMedium: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.displayMedium,\r\n      ),\r\n      displaySmall: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.displaySmall,\r\n      ),\r\n      headlineLarge: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.headlineLarge,\r\n      ),\r\n      headlineMedium: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.headlineMedium,\r\n      ),\r\n      headlineSmall: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.headlineSmall,\r\n      ),\r\n      titleLarge: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.titleLarge,\r\n      ),\r\n      titleMedium: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.titleMedium,\r\n      ),\r\n      titleSmall: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.titleSmall,\r\n      ),\r\n      bodyLarge: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.bodyLarge,\r\n      ),\r\n      bodyMedium: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.bodyMedium,\r\n      ),\r\n      bodySmall: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.bodySmall,\r\n      ),\r\n      labelLarge: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.labelLarge,\r\n      ),\r\n      labelMedium: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.labelMedium,\r\n      ),\r\n      labelSmall: textStyleWithFontStyleApplied(\r\n        baseTextStyle: lightTextTheme.labelSmall,\r\n      ),\r\n    );\r\n    final themeData = Theme.of(context).copyWith(\r\n      textTheme: textTheme,\r\n    );\r\n    return Theme(\r\n      data: themeData,\r\n      child: Scaffold(\r\n        appBar: AppBar(\r\n          title: Text(title),\r\n        ),\r\n        body: Center(\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            children: <Widget>[\r\n              const Text('Specify font from ancestor'),\r\n              Text.rich(\r\n                TextSpan(\r\n                  children: [\r\n                    TextSpan(\r\n                      text: text,\r\n                      style: baseFont,\r\n                    ),\r\n                  ],\r\n                ),\r\n              ),\r\n              const Text('Specify font directly'),\r\n              Text.rich(\r\n                TextSpan(\r\n                  children: [\r\n                    TextSpan(\r\n                      text: text,\r\n                      style: textStyleWithFontStyleApplied(\r\n                        baseTextStyle: baseFont,\r\n                      ),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n<\/details>\r\n\r\n<details>\r\n<summary>  pubspec.yaml <\/summary>\r\n\r\n```yaml\r\nname: try_roboto_font\r\ndescription: \"A new Flutter project.\"\r\npublish_to: 'none' # Remove this line if you wish to publish to pub.dev\r\nversion: 1.0.0+1\r\nenvironment:\r\n  sdk: '>=3.2.0 <4.0.0'\r\ndependencies:\r\n  flutter:\r\n    sdk: flutter\r\n  google_fonts: ^6.1.0\r\n  cupertino_icons: ^1.0.2\r\n\r\ndev_dependencies:\r\n  flutter_test:\r\n    sdk: flutter\r\n  flutter_lints: ^2.0.0\r\nflutter:\r\n  uses-material-design: true\r\n```\r\n\r\n\r\n<\/details>\r\n\r\n\r\n\r\n<details>\r\n<summary>  flutter doctor -v <\/summary>\r\n```\r\n\u279c  try_roboto_font git:(main) flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.16.0, on macOS 13.4 22F66 darwin-arm64, locale ja-JP)\r\n    \u2022 Flutter version 3.16.0 on channel stable at \/Users\/01036096\/fvm\/versions\/3.16.0\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision db7ef5bf9f (4 months ago), 2023-11-15 11:25:44 -0800\r\n    \u2022 Engine revision 74d16627b9\r\n    \u2022 Dart version 3.2.0\r\n    \u2022 DevTools version 2.28.2\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at \/Users\/01036096\/Library\/Android\/sdk\r\n    \u2022 Platform android-33, build-tools 33.0.2\r\n    \u2022 ANDROID_HOME = \/Users\/01036096\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 14.1)\r\n    \u2022 Xcode at \/Applications\/Xcode14.1.app\/Contents\/Developer\r\n    \u2022 Build 14B47b\r\n    \u2022 CocoaPods version 1.12.1\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b802.4-9586694)\r\n\r\n[\u2713] VS Code (version 1.86.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 sdk gphone64 arm64 (mobile) \u2022 emulator-5554 \u2022 android-arm64  \u2022 Android 12 (API 31) (emulator)\r\n    \u2022 macOS (desktop)             \u2022 macos         \u2022 darwin-arm64   \u2022 macOS 13.4 22F66 darwin-arm64\r\n    \u2022 Chrome (web)                \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>\r\n\r\n\r\n\r\n\r\n","comments":["@SShayashi \r\nCan you check if [this](https:\/\/github.com\/flutter\/flutter\/issues\/140958) issue resembles your case or not ?\r\n","@darshankawar \r\nI expect it is a separate issue.\r\n#140958 is that the weight you are specifying directly is not specified and the parent's Style is applied.\r\n#144983 (this issue) is that direct and ancestor styles specify the same style, but there is a slight difference between the two.","Thanks for the update. I was able to replicate this using the details provided above.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (5 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.25, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.25 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision fa2f64ad1a (4 hours ago), 2024-03-13 22:10:38 -0400\r\n    \u2022 Engine revision 599dbd7382\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-229.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>","I suspect this is a themeing related configuration and not an engine issue."],"labels":["a: typography","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"Problems encountered when using Flutter test -- coverage","body":"Unit tests can be executed successfully, but errors will be reported when executing unit test coverage\r\nThis is the specific error message content\r\n                                                                            \r\n```console\r\n  Shell subprocess crashed with segmentation fault.\r\n  package:flutter_tools\/src\/test\/flutter_tester_device.dart 240:73  FlutterTesterTestDevice.finished\r\n  ===== asynchronous gap ===========================\r\n  dart:async\/future.dart 611:5                                      Future.any.onValue\r\n```\r\n\r\nThis is my Flutter version\r\n```console\r\nFlutter 3.1.0 \u2022 channel unknown \u2022 unknown source\r\nFramework \u2022 revision bcea432bce (1 year, 10 months ago) \u2022 2022-05-26 09:05:34 -0700\r\nEngine \u2022 revision 44e5b38ee8\r\nTools \u2022 Dart 2.18.0 (build 2.18.0-44.1.beta) \u2022 DevTools 2.12.2\r\n```\r\n\r\nThis is the result of my execution of Flutter Doctor - v\r\n```console\r\n[\u2713] Flutter (Channel unknown, 3.1.0, on macOS 13.0.1 22A400 darwin-arm, locale zh-Hans-CN)\r\n    \u2022 Flutter version 3.1.0 at \/Users\/programmer\/flutter_mac\/flutter\r\n    \u2022 Upstream repository unknown\r\n    \u2022 Framework revision bcea432bce (1 year, 10 months ago), 2022-05-26 09:05:34 -0700\r\n    \u2022 Engine revision 44e5b38ee8\r\n    \u2022 Dart version 2.18.0 (build 2.18.0-44.1.beta)\r\n    \u2022 DevTools version 2.12.2\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n    \u2022 Android SDK at \/Users\/programmer\/Library\/Android\/sdk\r\n    \u2022 Platform android-33, build-tools 33.0.1\r\n    \u2022 ANDROID_HOME = \/Users\/programmer\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio 2021.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 14.0)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 CocoaPods version 1.12.1\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio 2021.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 M2011K2C (mobile) \u2022 b88df1f4 \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 macOS (desktop)   \u2022 macos    \u2022 darwin-arm64   \u2022 macOS 13.0.1 22A400 darwin-arm\r\n    \u2022 Chrome (web)      \u2022 chrome   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n```\r\nPlease help me check if I have encountered such problems before. I request your help. Thank you\r\n","comments":["Looking at the error message and the trace, this seems to be similar to https:\/\/github.com\/flutter\/flutter\/issues\/124145 but it's closed due to missing a reproduction case. And this could be similar to https:\/\/github.com\/flutter\/flutter\/issues\/106332 as well. Please check these issues to see if you are in the same context.\r\n\r\nIf your case is not the same, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. Thanks!","Okay, thank you very much for your reply. Here is the test code from my end. You can replicate it on your end\r\n\r\n```dart\r\nvoid main() async {\r\n  try {\r\n    var logic = SelectBrandBusinessLogic();\r\n    test('Obtain brand data', () async {\r\n      var jsonStr = await getBrandInfo();\r\n      List<dynamic> jsonList = json.decode(jsonStr);\r\n      List<SelectBrandEntity> list = jsonList.map((json) => SelectBrandEntity.fromJson(json)).toList();\r\n      expect(list.isNotEmpty, isTrue);\r\n      logic.getProductBrandList(list);\r\n      expect(logic.allBrandList.isNotEmpty, isTrue);\r\n      \/\/ logic.allBrandList = list;\r\n    });\r\n\r\n    test('Search brand', () async{\r\n      await logic.searchBrandOnChange('\u6d77');\r\n      for (var value in logic.searchBrandList) {\r\n        print('The search result is\uff1a${value.name}');\r\n      }\r\n      expect(logic.searchBrandList.isNotEmpty, isTrue);\r\n    });\r\n\r\n\r\n    test('Work order payment', () async {\r\n      var entity = OrderPayEntity.fromJson(json.decode(await getPayInfo()));\r\n      var logic = WaitUserPayBusinessLogic();\r\n      await logic.getListPayMode(entity);\r\n      expect(logic.showOtherPayMode, isTrue, reason: 'There are other payment methods available');\r\n    });\r\n\r\n  } catch (e) {\r\n    print('Abnormal single test: ${e}');\r\n  }\r\n}\r\n\r\nvar popularBrandCount = 8;\r\n\r\nFuture<String> getBrandInfo() async {\r\n  var path = 'test\/select_brand\/mock\/BrandInfo.json';\r\n  var jsonFile = File(path);\r\n  var json = await jsonFile.readAsString();\r\n  return json;\r\n}\r\n\r\n\r\nFuture<String> getPayInfo() async {\r\n  var path = 'test\/select_brand\/mock\/PayData.json';\r\n  var jsonFile = File(path);\r\n  var json = await jsonFile.readAsString();\r\n  return json;\r\n}\r\n\r\nThis is reading local JSON data\r\n[BrandInfo.json](https:\/\/github.com\/flutter\/flutter\/files\/14570840\/BrandInfo.json)\r\n[PayData.json](https:\/\/github.com\/flutter\/flutter\/files\/14570843\/PayData.json)\r\n\r\n\r\nclass SelectBrandBusinessLogic { \r\n  List<SelectBrandEntity> brandList = [];\r\n \r\n  List<SelectBrandEntity> popularBrand = [];\r\n \r\n  List<SelectBrandEntity> allBrandList = [];\r\n \r\n  List<SelectBrandEntity> searchBrandList = [];\r\n \r\n  int popularBrandCount = 8;\r\n\r\n  bool showClearButton = false;\r\n  bool showCancelButton = false;\r\n \r\n  Future<void> getProductBrandList(List<SelectBrandEntity> list) async {\r\n    if (list.length > popularBrandCount) {\r\n      popularBrand = list.sublist(0, popularBrandCount);\r\n      brandList = list.sublist(popularBrandCount, list.length);\r\n    } else {\r\n      brandList = list;\r\n    }\r\n    allBrandList = list;\r\n    _handleBrandList();\r\n  }\r\n \r\n  void _handleBrandList() {\r\n    List<SelectBrandEntity> productBrandList = brandList;\r\n    if (productBrandList.isEmpty) return;\r\n\r\n    for (int i = 0, length = productBrandList.length; i < length; i++) {\r\n      String tag = productBrandList[i].firstLetter ?? '';\r\n      if (RegExp('[A-Z]').hasMatch(tag)) {\r\n        productBrandList[i].tagIndex = tag;\r\n      } else {\r\n        productBrandList[i].tagIndex = '#';\r\n      }\r\n    }\r\n    \/\/ A-Z sort.\r\n    SuspensionUtil.sortListBySuspensionTag(productBrandList);\r\n\r\n    \/\/ show sus tag.\r\n    SuspensionUtil.setShowSuspensionStatus(productBrandList);\r\n\r\n    \/\/ add header.\r\n    if (popularBrand.isNotEmpty) {\r\n      productBrandList.insert(0, SelectBrandEntity(name: 'header', tagIndex: '')); \/\/index bar support local images.\r\n    }\r\n  }\r\n \r\n  Future<void> searchBrandOnChange(String input) async {\r\n    showClearButton = input.isNotEmpty;\r\n    if (input.isBlank == true) return; \r\n    var start = input.substring(0, input.length - (input.length - 1));\r\n    var end = '~';\r\n    if (input.length > 1) {\r\n      end = input.substring(input.length - 1, input.length);\r\n    }\r\n \r\n    List<SelectBrandEntity> list = [];\r\n    for (var element in allBrandList) {\r\n      if (element.name?.contains(start) == true && element.name?.contains(end) == true) {\r\n        list.insert(0, element);\r\n      } else {\r\n        if (element.name?.contains(start) == true || element.name?.contains(end) == true) {\r\n          list.add(element);\r\n        }\r\n      }\r\n    }\r\n    searchBrandList.clear();\r\n    searchBrandList.addAll(list);\r\n  }\r\n}\r\n\r\nclass SelectBrandEntity extends ISuspensionBean {\r\n  SelectBrandEntity({\r\n    this.brandId,\r\n    this.name,\r\n    this.enname,\r\n    this.firstLetter,\r\n    this.type,\r\n    this.sort,\r\n    this.icon,\r\n    this.status,\r\n    this.tagIndex,\r\n  });\r\n\r\n  SelectBrandEntity.fromJson(dynamic json) {\r\n    brandId = json['brandId'];\r\n    name = json['name'];\r\n    enname = json['enname'];\r\n    firstLetter = json['firstLetter'];\r\n    type = json['type'];\r\n    sort = json['sort'];\r\n    icon = json['icon'];\r\n    status = json['status'];\r\n  }\r\n\r\n  int? brandId; \r\n  String? name; \r\n  String? enname; \r\n  String? firstLetter; \r\n  int? type;\r\n  int? sort;\r\n  String? icon;  \r\n  int? status;\r\n  String? tagIndex; \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['brandId'] = brandId;\r\n    map['name'] = name;\r\n    map['enname'] = enname;\r\n    map['firstLetter'] = firstLetter;\r\n    map['type'] = type;\r\n    map['sort'] = sort;\r\n    map['icon'] = icon;\r\n    map['status'] = status;\r\n    return map;\r\n  }\r\n\r\n  @override\r\n  String getSuspensionTag() => tagIndex??'';\r\n}\r\n\r\nabstract class ISuspensionBean {\r\n  bool isShowSuspension = false;\r\n\r\n  String getSuspensionTag(); \/\/Suspension Tag\r\n}\r\n\r\nclass WaitUserPayBusinessLogic {\r\n  OrderPayEntity? payEntity;\r\n \r\n  bool showOtherPayMode = false;\r\n \r\n  ServWorkPayModeList? payModeEntity;\r\n \r\n  List<OrderPayChannelList> payChannelList = [];\r\n \r\n  PushMsgData pushMsgData = PushMsgData();\r\n \r\n  ScanCodeUrlData scanCodeData = ScanCodeUrlData();\r\n \r\n  List<PayProductList> payProductList = [];\r\n \r\n  int currentPayProductIndex = 0;\r\n \r\n  bool showQueryPayResultWidget = false;\r\n \r\n  String remark = '';\r\n \r\n  String payChannelName = '';\r\n \r\n  int payChannelId = 0;\r\n \r\n  Future<void> getListPayMode(OrderPayEntity value) async {\r\n    payEntity = value; \r\n    int userPaymentIndex = payEntity?.servWorkPayModeList?.indexWhere((element) => element.payMode == CommonConstants.userPayment) ?? -1;\r\n    if (userPaymentIndex == -1) return;\r\n    payModeEntity = payEntity?.servWorkPayModeList?[userPaymentIndex];\r\n \r\n    \/\/   payProductList =   payModeEntity?.payProductList ?? []; \r\n    var arr = payModeEntity?.payProductList ?? [];\r\n    payProductList = [\r\n      ...arr.where((e) => (e.payProduct != CommonConstants.h5Pay && e.payProduct != CommonConstants.miniProgramPay)).toList(),\r\n    ];\r\n \r\n    remark = payProductList.first.remark ?? ''; \r\n    payChannelName = payProductList.first.payChannelList?.first.payChannelName ?? '';\r\n    payChannelId = payProductList.first.payChannelList?.first.payChannelId ?? 0;\r\n \r\n    PayProductList? scanCodePayProduct = payModeEntity?.payProductList?.firstWhere((element) => element.payProduct == CommonConstants.scanCodePay, orElse: () => PayProductList());\r\n    payChannelList = scanCodePayProduct?.payChannelList ?? [];\r\n \r\n    int firstIndex = payEntity?.servWorkPayModeList?.indexWhere((element) => element.payMode == CommonConstants.userPayment) ?? -1;\r\n    showOtherPayMode = (firstIndex != -1) && (payEntity?.servWorkPayModeList?.length ?? 0) > 1;\r\n  }\r\n}\r\n\r\nclass WaitUserPayParameter {\r\n  WaitUserPayParameter({\r\n    required this.servOrderId,\r\n    required this.servWorkId,\r\n    required this.deliverModuleId,\r\n    required this.extendData,\r\n    required this.payAmount,\r\n    required this.amountType,\r\n  });\r\n\r\n  WaitUserPayParameter.fromJson(dynamic json) {\r\n    servOrderId = json['servOrderId'];\r\n    servWorkId = json['servWorkId'];\r\n    deliverModuleId = json['deliverModuleId'];\r\n    extendData = json['extendData'];\r\n    payAmount = int.tryParse(json['payAmount'] ?? '0') ?? 0;\r\n    amountType = int.tryParse(json['amountType'] ?? '0') ?? 0;\r\n  }\r\n\r\n  String servOrderId = ''; \r\n  String servWorkId = ''; \r\n  String deliverModuleId = '';  \r\n  String extendData = ''; \r\n  int payAmount = 0; \r\n  int amountType = 0; \r\n\r\n  Map<String, String> toJson() {\r\n    final map = <String, String>{};\r\n    map['servOrderId'] = servOrderId;\r\n    map['servWorkId'] = servWorkId;\r\n    map['deliverModuleId'] = deliverModuleId;\r\n    map['extendData'] = extendData;\r\n    map['payAmount'] = '$payAmount';\r\n    map['amountType'] = '$amountType';\r\n    return map;\r\n  }\r\n}\r\n \r\nclass ScanCodeUrlData {\r\n  ScanCodeUrlData({\r\n    this.qrCodeImgStatus,\r\n    this.qrCode,\r\n  });\r\n\r\n  int? qrCodeImgStatus; \r\n  String? qrCode = ''; \r\n\r\n  ScanCodeUrlData.fromJson(dynamic json) {\r\n    qrCodeImgStatus = json['qrCodeImgStatus'];\r\n    qrCode = json['qrCode'];\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['qrCodeImgStatus'] = qrCodeImgStatus;\r\n    map['qrCode'] = qrCode;\r\n    return map;\r\n  }\r\n}\r\n \r\nclass SendPayMessageBody {\r\n  SendPayMessageBody({\r\n    this.servOrderId,\r\n    this.servWorkId,\r\n    this.payPlat,\r\n    this.payEntry,\r\n    this.amountType,\r\n    this.payMode,\r\n    this.payProduct,\r\n    this.payChannelId,\r\n    this.payTargetChannelId,\r\n    this.amount,\r\n    this.extendData,\r\n  });\r\n\r\n  SendPayMessageBody.fromJson(dynamic json) {\r\n    servOrderId = json['servOrderId'];\r\n    servWorkId = json['servWorkId'];\r\n    payPlat = json['payPlat'];\r\n    payEntry = json['payEntry'];\r\n    amountType = json['amountType'];\r\n    payMode = json['payMode'];\r\n    payProduct = json['payProduct'];\r\n    payChannelId = json['payChannelId'];\r\n    payTargetChannelId = json['payTargetChannelId'];\r\n    amount = json['amount'];\r\n    extendData = json['extendData'];\r\n  }\r\n\r\n  String? servOrderId;\r\n  String? servWorkId;\r\n  int? payPlat;  \r\n  int? payEntry; \r\n  int? amountType;  \r\n  int? payMode;  \r\n  int? payProduct;  \r\n  int? payChannelId;  \r\n  int? payTargetChannelId;  \r\n  int? amount; \r\n  String? extendData; \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['servOrderId'] = servOrderId;\r\n    map['servWorkId'] = servWorkId;\r\n    map['payPlat'] = payPlat;\r\n    map['payEntry'] = payEntry;\r\n    map['amountType'] = amountType;\r\n    map['payMode'] = payMode;\r\n    map['payProduct'] = payProduct;\r\n    map['payChannelId'] = payChannelId;\r\n    map['payTargetChannelId'] = payTargetChannelId;\r\n    map['amount'] = amount;\r\n    map['extendData'] = extendData;\r\n    return map;\r\n  }\r\n}\r\n\r\n \r\nclass PushMsgData {\r\n  PushMsgData({\r\n    this.servOrderId,\r\n    this.servWorkId,\r\n    this.result,\r\n    this.qrCode,\r\n  });\r\n\r\n  PushMsgData.fromJson(dynamic json) {\r\n    servOrderId = json['servOrderId']?.toString() ?? '';\r\n    servWorkId = json['servWorkId']?.toString() ?? '';\r\n    result = json['result'];\r\n    qrCode = json['qrCode'];\r\n  }\r\n\r\n  String? servOrderId;\r\n  String? servWorkId;\r\n  int? result; \r\n  String? qrCode; \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['servOrderId'] = servOrderId;\r\n    map['servWorkId'] = servWorkId;\r\n    map['result'] = result;\r\n    map['qrCode'] = qrCode;\r\n    return map;\r\n  }\r\n}\r\n\r\n\r\nclass PayProductList {\r\n  PayProductList({\r\n    this.payProduct,\r\n    this.payProductName,\r\n    this.payChannelList,\r\n    this.articleId,\r\n    this.remark,\r\n  });\r\n\r\n  PayProductList.fromJson(dynamic json) {\r\n    payProduct = json['payProduct'];\r\n    payProductName = json['payProductName'];\r\n    articleId = json['articleId'];\r\n    remark = json['remark'];\r\n    if (json['payChannelList'] != null) {\r\n      payChannelList = [];\r\n      json['payChannelList'].forEach((v) {\r\n        payChannelList?.add(OrderPayChannelList.fromJson(v));\r\n      });\r\n    }\r\n  }\r\n\r\n  int? payProduct; \r\n  String? payProductName;  \r\n  List<OrderPayChannelList>? payChannelList; \r\n  int? articleId; \r\n  String? remark;  \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['payProduct'] = payProduct;\r\n    map['payProductName'] = payProductName;\r\n    map['articleId'] = articleId;\r\n    map['remark'] = remark;\r\n    if (payChannelList != null) {\r\n      map['payChannelList'] = payChannelList?.map((v) => v.toJson()).toList();\r\n    }\r\n    return map;\r\n  }\r\n}\r\n\r\nclass OrderPayChannelList {\r\n  OrderPayChannelList({\r\n    this.payChannelId,\r\n    this.payChannelName,\r\n    this.payTargetChannelId,\r\n    this.isSelected = false,\r\n  });\r\n\r\n  OrderPayChannelList.fromJson(dynamic json) {\r\n    payChannelId = json['payChannelId'];\r\n    payChannelName = json['payChannelName'];\r\n    payTargetChannelId = json['payTargetChannelId'];\r\n  }\r\n\r\n  int? payChannelId;  \r\n  String? payChannelName;  \r\n  int? payTargetChannelId; \r\n  bool isSelected = false;\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['payChannelId'] = payChannelId;\r\n    map['payChannelName'] = payChannelName;\r\n    map['payTargetChannelId'] = payTargetChannelId;\r\n    return map;\r\n  }\r\n}\r\n```\r\n\r\nThank you again for your help, and I hope to receive a response as soon as possible\r\n","Thanks for the update. But the sample code above still has some undefined classes: OrderPayEntity, SuspensionUtil, `isBlank` String extension?, ServWorkPayModeList, etc. Please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. Thanks!","Okay, thank you for your reply again. I will provide you with additional code content for these items\r\n\r\nOrderPayEntity:\r\n\r\n```dart\r\nclass OrderPayEntity {\r\n  OrderPayEntity({this.servOrderId, this.servWorkId, this.payPlat, this.payEntry, this.amountType, this.completeThirdApp, this.needVerifyCode, this.servWorkPayModeList});\r\n\r\n  OrderPayEntity.fromJson(dynamic json) {\r\n    servOrderId = json['servOrderId']?.toString() ?? '';\r\n    servWorkId = json['servWorkId']?.toString() ?? '';\r\n    payPlat = json['payPlat'];\r\n    payEntry = json['payEntry'];\r\n    amountType = json['amountType'];\r\n    completeThirdApp = json['completeThirdApp'];\r\n    needVerifyCode = json['needVerifyCode'];\r\n    if (json['servWorkPayModeList'] != null) {\r\n      servWorkPayModeList = [];\r\n      json['servWorkPayModeList'].forEach((v) {\r\n        servWorkPayModeList?.add(ServWorkPayModeList.fromJson(v));\r\n      });\r\n    }\r\n  }\r\n\r\n  String? servOrderId; \r\n  String? servWorkId;  \r\n  int? payPlat; \r\n  int? payEntry; \r\n  int? amountType;  \r\n  int? completeThirdApp;  \r\n  int? needVerifyCode;  \r\n  List<ServWorkPayModeList>? servWorkPayModeList; \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['servOrderId'] = servOrderId;\r\n    map['servWorkId'] = servWorkId;\r\n    map['payPlat'] = payPlat;\r\n    map['payEntry'] = payEntry;\r\n    map['amountType'] = amountType;\r\n    map['completeThirdApp'] = completeThirdApp;\r\n    map['needVerifyCode'] = needVerifyCode;\r\n    if (servWorkPayModeList != null) {\r\n      map['servWorkPayModeList'] = servWorkPayModeList?.map((v) => v.toJson()).toList();\r\n    }\r\n    return map;\r\n  } \r\n}\r\n\r\nclass ServWorkPayModeList {\r\n  ServWorkPayModeList({\r\n    this.payMode,\r\n    this.payModeName,\r\n    this.payProductList,\r\n  });\r\n\r\n  ServWorkPayModeList.fromJson(dynamic json) {\r\n    payMode = json['payMode'];\r\n    payModeName = json['payModeName'];\r\n    if (json['payProductList'] != null) {\r\n      payProductList = [];\r\n      json['payProductList'].forEach((v) {\r\n        payProductList?.add(PayProductList.fromJson(v));\r\n      });\r\n    }\r\n  }\r\n\r\n  int? payMode;  \r\n  String? payModeName;  \r\n  List<PayProductList>? payProductList;  \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['payMode'] = payMode;\r\n    map['payModeName'] = payModeName;\r\n    if (payProductList != null) {\r\n      map['payProductList'] = payProductList?.map((v) => v.toJson()).toList();\r\n    }\r\n    return map;\r\n  }\r\n}\r\n\r\nclass PayProductList {\r\n  PayProductList({\r\n    this.payProduct,\r\n    this.payProductName,\r\n    this.payChannelList,\r\n    this.articleId,\r\n    this.remark,\r\n  });\r\n\r\n  PayProductList.fromJson(dynamic json) {\r\n    payProduct = json['payProduct'];\r\n    payProductName = json['payProductName'];\r\n    articleId = json['articleId'];\r\n    remark = json['remark'];\r\n    if (json['payChannelList'] != null) {\r\n      payChannelList = [];\r\n      json['payChannelList'].forEach((v) {\r\n        payChannelList?.add(OrderPayChannelList.fromJson(v));\r\n      });\r\n    }\r\n  }\r\n\r\n  int? payProduct;  \r\n  String? payProductName;  \r\n  List<OrderPayChannelList>? payChannelList;  \r\n  int? articleId; \r\n  String? remark; \r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['payProduct'] = payProduct;\r\n    map['payProductName'] = payProductName;\r\n    map['articleId'] = articleId;\r\n    map['remark'] = remark;\r\n    if (payChannelList != null) {\r\n      map['payChannelList'] = payChannelList?.map((v) => v.toJson()).toList();\r\n    }\r\n    return map;\r\n  }\r\n}\r\n\r\nclass OrderPayChannelList {\r\n  OrderPayChannelList({\r\n    this.payChannelId,\r\n    this.payChannelName,\r\n    this.payTargetChannelId,\r\n    this.isSelected = false,\r\n  });\r\n\r\n  OrderPayChannelList.fromJson(dynamic json) {\r\n    payChannelId = json['payChannelId'];\r\n    payChannelName = json['payChannelName'];\r\n    payTargetChannelId = json['payTargetChannelId'];\r\n  }\r\n\r\n  int? payChannelId;  \r\n  String? payChannelName; \r\n  int? payTargetChannelId;  \r\n  bool isSelected = false;\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final map = <String, dynamic>{};\r\n    map['payChannelId'] = payChannelId;\r\n    map['payChannelName'] = payChannelName;\r\n    map['payTargetChannelId'] = payTargetChannelId;\r\n    return map;\r\n  }\r\n}\r\n```\r\nSuspension Util\r\n\r\n```dart\r\nclass SuspensionUtil {\r\n  \/\/\/ sort list by suspension tag.\r\n  static void sortListBySuspensionTag(List<ISuspensionBean>? list) {\r\n    if (list == null || list.isEmpty) return;\r\n    list.sort((a, b) {\r\n      if (a.getSuspensionTag() == '@' || b.getSuspensionTag() == '#') {\r\n        return -1;\r\n      } else if (a.getSuspensionTag() == '#' || b.getSuspensionTag() == '@') {\r\n        return 1;\r\n      } else {\r\n        return a.getSuspensionTag().compareTo(b.getSuspensionTag());\r\n      }\r\n    });\r\n  }\r\n\r\n  \/\/\/ get index data list by suspension tag.\r\n  static List<String> getTagIndexList(List<ISuspensionBean>? list) {\r\n    List<String> indexData = [];\r\n    if (list != null && list.isNotEmpty) {\r\n      String? tempTag;\r\n      for (int i = 0, length = list.length; i < length; i++) {\r\n        String tag = list[i].getSuspensionTag();\r\n        if (tempTag != tag) {\r\n          indexData.add(tag);\r\n          tempTag = tag;\r\n        }\r\n      }\r\n    }\r\n\r\n    return indexData;\r\n  }\r\n\r\n  \/\/\/ set show suspension status.\r\n  static void setShowSuspensionStatus(List<ISuspensionBean>? list) {\r\n    if (list == null || list.isEmpty) return;\r\n    String? tempTag;\r\n    for (int i = 0, length = list.length; i < length; i++) {\r\n      String tag = list[i].getSuspensionTag();\r\n      if (tempTag != tag) {\r\n        tempTag = tag;\r\n        list[i].isShowSuspension = true;\r\n      } else {\r\n        list[i].isShowSuspension = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe isBlank method is a null operation on strings, which can be replaced with isEmpty\r\n\r\nThank you for your reply. I hope what I have provided can be helpful to you. Please reply as soon as possible\r\n","Thanks but there is still missing `CommonConstants`. Could you please create an open-source project (GitHub) and push the sample code there? Please add license the code in the repository under some open-source license (e.g. MIT, Apache, BSD, GPL) so that we may look into it. This will be helpful for others may look into it easier for investigation further. Thank you!","\r\nclass CommonConstants{\r\n\r\n  static const userPayment = 10;\r\n\r\n  static const h5Pay = 3;\r\n\r\n\r\n  static const miniProgramPay = 6;\r\n\r\n\r\n  static const scanCodePay = 1;\r\n\r\n}\r\nSorry to trouble you again, this is the constant used in CommonConstants in the code\r\nThank you very much for your reply","Hello, I have put these unit test codes into a brand new project according to your requirements. It is possible to successfully execute unit test coverage, but in our daily development of large projects, errors always occur. The unit test code is the same. Why is this? I don't know why this is happening\r\n\r\nThis is the detailed error message when executing fltutor test -- coverage       \r\n                                                                     \r\n  Shell subprocess crashed with segmentation fault.\r\n  package:flutter_tools\/src\/test\/flutter_tester_device.dart 240:73  FlutterTesterTestDevice.finished\r\n  ===== asynchronous gap ===========================\r\n  dart:async\/future.dart 611:5                                      Future.any.onValue\r\n\r\nWhen executing the Flutter test separately, it can pass the execution\r\nI hope you can help me. Thank you again\r\n","Thanks for the update. When I run your tests, all of them are successful:\r\n\r\n```console\r\n\u279c  reproduce_issues_3 flutter test --coverage \r\n00:02 +1: Search brand                                                                                                                                                                                 \r\nThe search result is\uff1a\u6d77\u5c14\r\nThe search result is\uff1a\u6d77\u4fe1\r\nThe search result is\uff1a\u6d77\u745e\u5f17\r\nThe search result is\uff1a\u6d77\u666e\r\n00:03 +3: All tests passed!  \r\n```\r\n\r\nI think your case is similar to https:\/\/github.com\/flutter\/flutter\/issues\/124145 which is only reproducible with a large number of tests (500-600 tests) or a large project as you mentioned. \r\n\r\nYou should narrow down the issue by removing the usage of 3rd party plugins\/packages one by one, unrelated\/unaffected pages, and isolating the affected page into a minimal sample code that can produce the issue. And please share it here when you have such an example. Thank you!"],"labels":["waiting for customer response","in triage"]},{"title":"run in iOS\uff1areport [AVCapturePhotoOutput capturePhotoWithSettings:delegate:] No active and enabled video connection","body":"### Steps to reproduce\r\n\r\nI couldn't reproduce the problem manually and only caught it from the online log\r\n\r\n### Expected results\r\n\r\nLook at the log. There was an anomaly when the photo was taken\r\n\r\n### Actual results\r\n\r\ncrash \r\n\r\n### Code sample\r\n\r\n```\r\nFuture<void> _takePhoto() async {\r\n    if (null == controller ||\r\n        !controller!.value.isInitialized ||\r\n        _status != TakePhotoStatus.taking) {\r\n      return;\r\n    }\r\n    if (controller?.value.isTakingPicture ?? false) {\r\n      \/\/ A capture is already pending, do nothing.\r\n      return;\r\n    }\r\n    try {\r\n      final file = await controller?.takePicture();\r\n      setState(() {\r\n        _curFile = file;\r\n        _status = TakePhotoStatus.confirm;\r\n      });\r\n    } on CameraException catch (e) {\r\n      debugPrint(e.toString());\r\n    }\r\n  }\r\n```\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n```\r\ncamera_avfoundation\r\n-[FLTCam captureToFile:] + 468\r\n4\r\ncamera_avfoundation\r\n-[CameraPlugin handleMethodCallAsync:result:] + 2108\r\n5\r\ncamera_avfoundation\r\n__40-[CameraPlugin handleMethodCall:result:]_block_invoke + 68\r\n```\r\n\r\n### Flutter Doctor output\r\n\r\n```\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.10.3, on macOS 14.0 23A344 darwin-x64, locale zh-Hans-CN)\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for more details.\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.1)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.2)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (4 available)\r\n    ! Error: Browsing on the local area network for iPhone. Ensure the device is unlocked and attached with a cable or associated with the same\r\n      local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n    ! Error: Browsing on the local area network for null. Ensure the device is unlocked and attached with a cable or associated with the same local\r\n      area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n[\u2713] Network resources\r\n```\r\n","comments":["i am looking forward to your reply.","As soon as I open the page before the camera shows\r\nIt can be reproduced by calling the photo directly","another problem,enter the camera page repeatedly,  throw exception:\r\n```\r\nA CameraController was used after being disposed.\r\nOnce you have called dispose() on a CameraController, it can no longer be used.\r\n\r\nstack:\r\nChangeNotifier.debugAssertNotDisposed.<anonymous closure> (package:flutter\/src\/foundation\/change_notifier.dart:179:9)\r\n#1      ChangeNotifier.debugAssertNotDisposed (package:flutter\/src\/foundation\/change_notifier.dart:186:6)\r\n#2      ChangeNotifier.notifyListeners (package:flutter\/src\/foundation\/change_notifier.dart:382:27)\r\n#3      ValueNotifier.value= (package:flutter\/src\/foundation\/change_notifier.dart:530:5)\r\n#4      CameraController._initializeWithDescription (package:ddmc_native_mix\/src\r\n\r\n```","@programer001 \r\nYou are on old version of stable. What's the plugin version you are using ?\r\nI suggest to upgrade both (stable and plugin version) and run your scenario again to check if the reported behavior still occurs or not.\r\n\r\nAlso, the stacktrace you shared is not complete. Please provide complete stacktrace in properly formatted text so that we can properly analyze the issue.\r\n","The version of plugin I use is [0.10.5+9] . I can try to upgrade to the latest stable version and provide complete stacktrace to you.","now my flutter is stable  3.19.3, plugin version is 0.10.5+9. There is still this problem\r\ncomplete stacktrace:\r\n\r\n```\r\nA CameraController was used after being disposed.\r\nOnce you have called dispose() on a CameraController, it can no longer be used.\r\n\r\n#0      ChangeNotifier.debugAssertNotDisposed.<anonymous closure> (package:flutter\/src\/foundation\/change_notifier.dart:179:9)\r\n#1      ChangeNotifier.debugAssertNotDisposed (package:flutter\/src\/foundation\/change_notifier.dart:186:6)\r\n#2      ChangeNotifier.notifyListeners (package:flutter\/src\/foundation\/change_notifier.dart:382:27)\r\n#3      ValueNotifier.value= (package:flutter\/src\/foundation\/change_notifier.dart:530:5)\r\n#4      CameraController._initializeWithDescription (package:ddmc_native_mix\/src\/camera_src\/camera_controller.dart:334:7)\r\n<asynchronous suspension>\r\n#5      _FDCCustomCameraState._initCamera (package:flutter_module\/components\/fdc_custom_camera.dart:125:7)\r\n<asynchronous suspension>\r\n```\r\n\r\nSteps to reproduce:\r\nQuick entry and exit page\r\n\r\nshow my code:\r\n  ```\r\n@override\r\n  void initState() {\r\n    super.initState();\r\n    _requestCameraPermission();\r\n  }\r\n\r\n  Future<void> _initCamera() async {\r\n    try {\r\n      _cameras = await availableCameras();\r\n    } on CameraException catch (e) {\r\n      debugPrint(e.description);\r\n    }\r\n    if (_cameras.isEmpty) {\r\n      SchedulerBinding.instance.addPostFrameCallback((_) async {\r\n        showInSnackBar('no camera found.');\r\n      });\r\n      return;\r\n    }\r\n    var description = _cameras.first;\r\n    for (final camera in _cameras) {\r\n      if (camera.lensDirection == CameraLensDirection.front) {\r\n        description = camera;\r\n        break;\r\n      }\r\n    }\r\n    controller = CameraController(\r\n      description,\r\n      ResolutionPreset.medium,\r\n      enableAudio: false,\r\n    );\r\n    try {\r\n      await controller?.initialize();\r\n      controller?.addListener(() {\r\n        if (controller?.value.hasError ?? false) {\r\n          showInSnackBar('Camera error ${controller?.value.errorDescription}');\r\n        }\r\n      });\r\n      if (mounted && (controller?.value.isInitialized ?? false)) {\r\n        setState(() {\r\n          _status = TakePhotoStatus.taking;\r\n        });\r\n      }\r\n    } on CameraException catch (e) {\r\n      showInSnackBar(e.description ?? '');\r\n    }\r\n  }\r\n```","@programer001 \r\nThe stacktrace looks similar to https:\/\/github.com\/flutter\/flutter\/issues\/126823 which was fixed recently that you can check and see if it helps in your case or not.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"Problem when use Dragable inside gridview or listview","body":"### Steps to reproduce\n\nI have a shopping cart feature where every item in the grid can be dragged into the shopping cart,\n\n### Expected results\n\nAfter dragging the widget you should be able to scroll straight away\n\n### Actual results\n\nBut now after dragging the widget when I want to scroll the grid it doesn't take long to scroll, I have to click outside the grid first before I can scroll again\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n### this is item widget as dragable\r\n\r\n```dart\r\nclass ItemWidget extends StatelessWidget {\r\n  final ItemModel? item;\r\n  RxBool? isSelected;\r\n  final Function(CartItemModel?)? onAddToCart;\r\n  ItemWidget({\r\n    super.key,\r\n    required this.item,\r\n    this.onAddToCart,\r\n    this.isSelected,\r\n  });\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Draggable<CartItemModel>(\r\n      onDraggableCanceled: (velocity, offset) {\r\n\r\n      },\r\n      ignoringFeedbackPointer: true,\r\n      rootOverlay: true,\r\n      feedback: Material(\r\n       .............\r\n      ),\r\n      maxSimultaneousDrags: 2,\r\n      childWhenDragging: Container(\r\n          ......\r\n      ),\r\n      data: CartItemModel(\r\n     .......\r\n      ),\r\n   ........\r\n        \r\n```\r\n### this is list of item\r\n```dart\r\nGridView.builder(\r\n              controller: controller.scrollController,\r\n              padding: const EdgeInsets.all(10),\r\n              shrinkWrap: true,\r\n              itemCount: state.length,\r\n              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\r\n              .......\r\n              ),\r\n              itemBuilder: (context, index) {\r\n                final item = state[index];\r\n                return Obx(() {\r\n                  return ItemWidget(\r\n                .......\r\n                  )\r\n```\r\n### this is drag target\r\n``` dart\r\nclass CartItemsView extends GetView<CartItemController> {\r\n  const CartItemsView({Key? key}) : super(key: key);\r\n  @override\r\n  get controller => Get.put(CartItemController());\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return DragTarget<CartItemModel>(onAccept: (data) {\r\n      controller.cartController.addCart(cartItem: data);\r\n    }, builder: (context, candidateData, rejectedData) {\r\n      return Obx(() {\r\n        return SingleChildScrollView(\r\n          child: Column(\r\n            children: [\r\n              const CartItemsWidget(),\r\n              Visibility(\r\n                visible: !controller\r\n                        .cartController.cart.value.promoFreeItems!.isNotEmpty ||\r\n                    controller\r\n                        .cartController.cart.value.promoDiscounts!.isNotEmpty,\r\n                child: const CartItemsPromoWidget(),\r\n              ),\r\n            ],\r\n          ),\r\n        );\r\n      });\r\n    });\r\n```\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/72372613\/bed0693c-6a23-4cf4-a3d7-069584def184\r\n\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nPS D:\\projek\\Yubi-POS-2> flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u221a] Flutter (Channel stable, 3.16.8, on Microsoft Windows [Version 10.0.22631.3155], locale en-US)\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u221a] Chrome - develop for the web\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.7.6)\r\n[\u221a] Android Studio (version 2022.3)\r\n[\u221a] IntelliJ IDEA Ultimate Edition (version 2023.3)\r\n[\u221a] VS Code (version 1.87.0)\r\n[\u221a] Connected device (4 available)\r\n[\u221a] Network resources\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Perhaps there is a conflict between gestures here. For us to further investigate this issue, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. Thank you!","> Perhaps there is a conflict between gestures here. For us to further investigate this issue, please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. Thank you!\r\n@huycozy \r\n### Here is xample code representate this issue\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:gragable_widget\/models\/item_model.dart';\r\n\r\nclass ItemsView extends StatefulWidget {\r\n  const ItemsView({super.key});\r\n\r\n  @override\r\n  State<ItemsView> createState() => _ItemsViewState();\r\n}\r\n\r\nclass _ItemsViewState extends State<ItemsView> {\r\n  final List<ItemModel> items = [\r\n    ItemModel(id: 1, name: 'Item 1', price: '100'),\r\n    ItemModel(id: 2, name: 'Item 2', price: '200'),\r\n    ItemModel(id: 3, name: 'Item 3', price: '300'),\r\n    ItemModel(id: 4, name: 'Item 4', price: '400'),\r\n    ItemModel(id: 5, name: 'Item 5', price: '500'),\r\n    ItemModel(id: 6, name: 'Item 6', price: '600'),\r\n  ];\r\n  List<ItemModel> selectedItems = [];\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Items'),\r\n      ),\r\n      body: Column(\r\n        children: [\r\n          SizedBox(\r\n            height: MediaQuery.of(context).size.height * 0.5,\r\n            child: GridView.builder(\r\n              gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(\r\n                crossAxisCount: 2,\r\n              ),\r\n              itemCount: items.length,\r\n              itemBuilder: (context, index) {\r\n                return Draggable<ItemModel>(\r\n                  data: items[index],\r\n                  feedback: Card(\r\n                    child: Column(\r\n                      children: [\r\n                        Text(items[index].name!),\r\n                        Text(items[index].price!),\r\n                      ],\r\n                    ),\r\n                  ),\r\n                  child: Card(\r\n                    child: Column(\r\n                      children: [\r\n                        Text(items[index].name!),\r\n                        Text(items[index].price!),\r\n                      ],\r\n                    ),\r\n                  ),\r\n                );\r\n              },\r\n            ),\r\n          ),\r\n          const Divider(),\r\n          const Text('Selected Items'),\r\n          const Divider(),\r\n          SizedBox(\r\n            height: MediaQuery.of(context).size.height * 0.2,\r\n            child: DragTarget<ItemModel>(\r\n              onAccept: (ItemModel item) {\r\n                setState(() {\r\n                  selectedItems.add(item);\r\n                });\r\n              },\r\n              builder: (context, candidateData, rejectedData) {\r\n                return selectedItems.isEmpty\r\n                    ? const Center(\r\n                        child: Text('Drag items here'),\r\n                      )\r\n                    : ListView.builder(\r\n                        scrollDirection: Axis.horizontal,\r\n                        itemCount: selectedItems.length,\r\n                        itemBuilder: (context, index) {\r\n                          return Card(\r\n                            child: Column(\r\n                              children: [\r\n                                Text(selectedItems[index].name!),\r\n                                Text(selectedItems[index].price!),\r\n                              ],\r\n                            ),\r\n                          );\r\n                        },\r\n                      );\r\n              },\r\n            ),\r\n          )\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```","I tested the example and also watched your video again, it looks like you were using the mouse scroll instead of the swipe gesture (on a POS machine) at 0:16-0:18, right? Then, you used a swipe gesture on the draggable items, so you think there is a bug at 0:29-0:33. Here there is a difference between input actions.\r\n\r\nI think this works as intended. It will always work with mouse scrolling (at whatever point the cursor is pointing to), and on gaps between draggable items with swipe gestures. ","> I tested the example and also watched your video again, it looks like you were using the mouse scroll instead of the swipe gesture (on a POS machine) at 0:16-0:18, right? Then, you used a swipe gesture on the draggable items, so you think there is a bug at 0:29-0:33. Here there is a difference between input actions.\r\n> \r\n> I think this works as intended. It will always work with mouse scrolling (at whatever point the cursor is pointing to), and on gaps between draggable items with swipe gestures.\r\n\r\nindeed the video above uses an emulator, but I have tried it on a real device using a touch screen, after dragging an item then when I want to scroll the grid the item actually drags and the grid doesn't scroll, after tapping outside the grid it can be scrolled again\r\n@huycozy ","How do you scroll the list? (with swipe gesture or using mouse?). ","> How do you scroll the list? (with swipe gesture or using mouse?).\r\n\r\nwith gesture or mouse its same \r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/72372613\/8ccd2879-c8f8-48e2-9828-5bc61eaa4482\r\n\r\n","> > How do you scroll the list? (with swipe gesture or using mouse?).\r\n> \r\n> with gesture or mouse its same\r\n> \r\n>  IMG_6400.mov\r\n@huycozy \r\nin this case, when scrolling after dragging an item, when scrolling over the item it cannot be scrolled\r\n","Could you record a demo (video) of the first time when the scrolling works (haven't dragged any item yet)? The reason I ask this is because I have a little doubt that your pointer down \/ touch down position is different between tests. \r\n\r\nIf you notice my demo video below: If I scroll the list with pointer down on an item, the item is always dragged. Meanwhile, if I scroll the list with pointer down on a space between items, the list is scrollable. These are the expected behaviors.\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/12824b4d-3ce3-4834-8988-8cb3236e7e4a\r\n<\/details>\r\n\r\n","> Could you record a demo (video) of the first time when the scrolling works (haven't dragged any item yet)? The reason I ask this is because I have a little doubt that your pointer down \/ touch down position is different between tests.\r\n> \r\n> If you notice my demo video below: If I scroll the list with pointer down on an item, the item is always dragged. Meanwhile, if I scroll the list with pointer down on a space between items, the list is scrollable. These are the expected behaviors.\r\n> \r\n> Demo\r\n>  Screen.Recording.2024-03-14.at.10.59.43.mov\r\n\r\nSo, before dragging an item you can scroll normally even though the scroll position is above the item, after dragging the item the problem is that the scroll has to be between the item gaps. That will be a UX problem when users use it, is there a solution?",">So, before dragging an item you can scroll normally even though the scroll position is above the item, after dragging the item the problem is that the scroll has to be between the item gaps.\r\n\r\nIt seems you haven't watched my demo, please check it again and notice the mouse position when dragging. In short, the list can't be scrolled by dragging on the item (even at the beginning). But if you put your finger\/mouse down on the item gaps, the list is scrollable.\r\n\r\n>That will be a UX problem when users use it, is there a solution?\r\n\r\n(Just my suggestion for this case) you can implement your case with options below:\r\n- Add a smaller button in the item corner. Users can only drag the item when holding that button. Similar to [ReorderableListView](https:\/\/api.flutter.dev\/flutter\/material\/ReorderableListView-class.html)\r\n- Use an additional flag, eg: `bool isDragging = false`. It is only `true` when dragging item with long press gesture. Once the dragging ends, reset the flag\r\n\r\ncc @moffatman for any other ideas on this case"],"labels":["waiting for customer response","in triage"]},{"title":"`content is not allowed in prolog` log after creating new app following the documentation","body":"### Steps to reproduce\n\nAll I did is create a new project and build the project using the same steps mentioned in the documentation using the followin commands \r\n 1. flutter create app\r\n 2. cd app\r\n 3. flutter run\n\n### Actual results\n\n```\r\n\r\n[Fatal Error] kotlin-stdlib-jdk8-1.7.10.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-java8-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-runtime-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] window-java-1.0.0-beta04.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] fragment-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] tracing-1.0.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] core-1.6.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] annotation-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':app:checkDebugAarMetadata'.\r\n> Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\r\n   > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n     Required by:\r\n         project :app\r\n      > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n         > Could not parse POM https:\/\/repo.maven.apache.org\/maven2\/org\/jetbrains\/kotlin\/kotlin-stdlib-jdk8\/1.7.10\/kotlin-stdlib-jdk8-1.7.10.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-common:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-common:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-common\/2.2.0\/lifecycle-common-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-common-java8:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-common-java8:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-common-java8\/2.2.0\/lifecycle-common-java8-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-runtime:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-runtime:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-runtime\/2.2.0\/lifecycle-runtime-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.fragment:fragment:1.1.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.fragment:fragment:1.1.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/fragment\/fragment\/1.1.0\/fragment-1.1.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.annotation:annotation:1.1.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.annotation:annotation:1.1.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/annotation\/annotation\/1.1.0\/annotation-1.1.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.tracing:tracing:1.0.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.tracing:tracing:1.0.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/tracing\/tracing\/1.0.0\/tracing-1.0.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.core:core:1.6.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.core:core:1.6.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/core\/core\/1.6.0\/core-1.6.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.window:window-java:1.0.0-beta04.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.window:window-java:1.0.0-beta04.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/window\/window-java\/1.0.0-beta04\/window-java-1.0.0-beta04.pom\r\n            > Content is not allowed in prolog.\r\n\r\n* Try:\r\n> Run with --stacktrace option to get the stack trace.\r\n> Run with --info or --debug option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\n* Get more help at https:\/\/help.gradle.org\r\n\r\nBUILD FAILED in 41s\r\nRunning Gradle task 'assembleDebug'...                             42.5s\r\nError: Gradle task assembleDebug failed with exit code 1\r\n```\r\n\r\n\r\n\r\nI tried to build an application that used to work perfectly fine on my other linux machine and I get the following error \r\n\r\n```\r\n\r\n[Fatal Error] kotlin-stdlib-jdk8-1.7.10.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] kotlin-stdlib-1.7.10.pom:2:1: Content is not allowed in prolog.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring project ':sqflite'.\r\n> Could not resolve all files for configuration ':sqflite:classpath'.\r\n   > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n     Required by:\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:gradle-settings-api:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools:sdk-common:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools:repository:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:aaptcompiler:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.analytics-library:shared:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.lint:lint-model:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > androidx.databinding:databinding-compiler-common:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.utp:android-test-plugin-host-retention-proto:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:builder:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:builder-model:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:gradle-api:7.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools:sdk-common:30.4.2 > com.android.tools:common:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:builder:7.4.2 > com.android.tools.analytics-library:tracker:30.4.2\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build:builder:7.4.2 > com.android.tools.build:manifest-merger:30.4.2\r\n      > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n         > Could not parse POM https:\/\/repo.maven.apache.org\/maven2\/org\/jetbrains\/kotlin\/kotlin-stdlib-jdk8\/1.7.10\/kotlin-stdlib-jdk8-1.7.10.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve org.jetbrains.kotlin:kotlin-stdlib:1.7.10.\r\n     Required by:\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build.jetifier:jetifier-core:1.0.0-beta10\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools.build.jetifier:jetifier-processor:1.0.0-beta10\r\n      > Could not resolve org.jetbrains.kotlin:kotlin-stdlib:1.7.10.\r\n         > Could not parse POM https:\/\/repo.maven.apache.org\/maven2\/org\/jetbrains\/kotlin\/kotlin-stdlib\/1.7.10\/kotlin-stdlib-1.7.10.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve org.jetbrains.kotlin:kotlin-stdlib:1.7.10.\r\n     Required by:\r\n         project :sqflite > com.android.tools.build:gradle:7.4.2 > com.android.tools:sdk-common:30.4.2 > org.jetbrains.kotlin:kotlin-reflect:1.7.10\r\n      > Could not resolve org.jetbrains.kotlin:kotlin-stdlib:1.7.10.\r\n         > Could not parse POM https:\/\/repo.maven.apache.org\/maven2\/org\/jetbrains\/kotlin\/kotlin-stdlib\/1.7.10\/kotlin-stdlib-1.7.10.pom\r\n            > Content is not allowed in prolog.\r\n> Failed to notify project evaluation listener.\r\n   > Could not get unknown property 'android' for project ':sqflite' of type org.gradle.api.Project.\r\n   > Could not get unknown property 'android' for project ':sqflite' of type org.gradle.api.Project.\r\n\r\n* Try:\r\n> Run with --stacktrace option to get the stack trace.\r\n> Run with --info or --debug option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\n* Get more help at https:\/\/help.gradle.org\r\n\r\nBUILD FAILED in 14s\r\nRunning Gradle task 'assembleDebug'...                             16.6s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n```\n\n### Logs\n\n<details open>\r\n<summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n<!-- Paste your logs here -->\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open>\r\n<summary>Doctor output<\/summary>\r\n\r\n```console\r\n\r\n<!-- Paste your output here -->\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.22621.3155], locale en-US)\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Chrome - develop for the web\r\n[\u2717] Visual Studio - develop Windows apps\r\n    \u2717 Visual Studio not installed; this is necessary to develop Windows apps.\r\n      Download at https:\/\/visualstudio.microsoft.com\/downloads\/.\r\n      Please install the \"Desktop development with C++\" workload, including all of its default components\r\n[\u2713] Android Studio (version 2023.2)\r\n[\u2713] VS Code (version 1.87.1)\r\n[\u2713] Connected device (4 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["> mentioned in the documentation\r\n\r\n@nithinkodadhavadee Can you provide the documentation link you followed ?\r\n","This is the documentation I referred to for installation and setup of the projcet ([link to the documentation](https:\/\/docs.flutter.dev\/get-started\/install\/windows\/mobile?tab=vscode))\r\n\r\nThis is the project that is created with the command `flutter create app` if it helps\r\n[Link to the repo](https:\/\/github.com\/nithinkodadhavadee\/app)","@nithinkodadhavadee \r\nAlthough I am not on Windows, but I cloned the repo which ran properly on my mac machine. I compared the android configuration of your app with the one I created which are same.\r\nOne thing you can check if the `compileSdkVersion` that is used while creating the app at your end. See if adjusting it (33 or 34) makes any difference or not.\r\n","just to be sure what I am doing is correct, I changed the `compileSdkVersion` from `flutter.compileSdkVersion` to 33 or 34 in the file `build.gradle` located at the path `.\/android\/app`\r\n```\r\n\/\/ ...\r\n\/\/ lines of code \r\nandroid {\r\n    namespace \"com.example.one\"\r\n    compileSdk 34\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n\/\/ ...\r\n\/\/ rest of the code\r\n```\r\n\r\nsetting the `compileSdkVersion` to either of the versions pretty much gave me the same error. \r\n\r\nwhen `compileSdkVersion` is set to 33 I got\r\n```\r\n[Fatal Error] kotlin-stdlib-jdk8-1.7.10.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-java8-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-runtime-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] annotation-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] core-1.6.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] fragment-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] window-java-1.0.0-beta04.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] tracing-1.0.0.pom:2:1: Content is not allowed in prolog.\r\n\r\n```\r\n\r\nand for `compileSdkVersion` 34 I got \r\n```\r\n[Fatal Error] kotlin-stdlib-jdk8-1.7.10.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] fragment-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-java8-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] window-java-1.0.0-beta04.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] annotation-1.1.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] tracing-1.0.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-runtime-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] lifecycle-common-2.2.0.pom:2:1: Content is not allowed in prolog.\r\n[Fatal Error] core-1.6.0.pom:2:1: Content is not allowed in prolog.\r\n```\r\n\r\nThe rest ***what went wrong*** part for both versions is the same\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':app:checkDebugAarMetadata'.\r\n> Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\r\n   > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n     Required by:\r\n         project :app\r\n      > Could not resolve org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.10.\r\n         > Could not parse POM https:\/\/repo.maven.apache.org\/maven2\/org\/jetbrains\/kotlin\/kotlin-stdlib-jdk8\/1.7.10\/kotlin-stdlib-jdk8-1.7.10.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-common:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-common:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-common\/2.2.0\/lifecycle-common-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-common-java8:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-common-java8:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-common-java8\/2.2.0\/lifecycle-common-java8-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.lifecycle:lifecycle-runtime:2.2.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.lifecycle:lifecycle-runtime:2.2.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/lifecycle\/lifecycle-runtime\/2.2.0\/lifecycle-runtime-2.2.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.fragment:fragment:1.1.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.fragment:fragment:1.1.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/fragment\/fragment\/1.1.0\/fragment-1.1.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.annotation:annotation:1.1.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.annotation:annotation:1.1.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/annotation\/annotation\/1.1.0\/annotation-1.1.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.tracing:tracing:1.0.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.tracing:tracing:1.0.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/tracing\/tracing\/1.0.0\/tracing-1.0.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.core:core:1.6.0.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.core:core:1.6.0.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/core\/core\/1.6.0\/core-1.6.0.pom\r\n            > Content is not allowed in prolog.\r\n   > Could not resolve androidx.window:window-java:1.0.0-beta04.\r\n     Required by:\r\n         project :app > io.flutter:flutter_embedding_debug:1.0.0-2e4ba9c6fb499ccd4e81420543783cc7267ae406\r\n      > Could not resolve androidx.window:window-java:1.0.0-beta04.\r\n         > Could not parse POM https:\/\/dl.google.com\/dl\/android\/maven2\/androidx\/window\/window-java\/1.0.0-beta04\/window-java-1.0.0-beta04.pom\r\n            > Content is not allowed in prolog.\r\n\r\n* Try:\r\n> Run with --stacktrace option to get the stack trace.\r\n> Run with --info or --debug option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\n* Get more help at https:\/\/help.gradle.org\r\n\r\nBUILD FAILED in 2s\r\nError: Gradle task assembleDebug failed with exit code 1\r\n```","Thanks for the update. We are unable to replicate this after trying on Windows machine by creating new project and also cloning and running the provided one, but based on the report and log triggered, I'll keep the issue open and label for team's input \/ tracking.\r\n\r\n"],"labels":["platform-android","tool","platform-windows","d: api docs","t: gradle","team-tool"]},{"title":"[camerax] Differentiate between `OperationCanceledException` and other exceptions in `CameraControl.setZoomRatio` wrapper","body":"In the wrapper for the `CameraControl` CameraX class ([docs](https:\/\/developer.android.com\/reference\/androidx\/camera\/core\/CameraControl#setZoomRatio(float))), some methods return a null versus value versus consuming the exception if one is thrown in the case that the operation was canceled (see [example](https:\/\/github.com\/flutter\/packages\/blob\/1e46a6a2fb31ed8c45159d7a41fdd4ea6ea595c7\/packages\/camera\/camera_android_camerax\/lib\/src\/camera_control.dart#L176)).\r\n\r\nWe should consider adding similar error handling to `setZoomRatio` so that developers can more easily differentiate between the two sorts of exceptions, as non-`OperationCanceledException`s may be more severe.","comments":[],"labels":["platform-android","p: camera","package","P2","team-android","triaged-android"]},{"title":"Reland \"Expose build mode in environment of asset transformer processes\"","body":"Relands https:\/\/github.com\/flutter\/flutter\/pull\/144752, which had to be reverted because the branch was stale. The original branch branched off `master` before https:\/\/github.com\/flutter\/flutter\/pull\/144734 landed. That PR introduced a new `AssetTransformer` call site.\r\n\r\nThis PR branch is identical to the original but with a new commit that addresses the new call site, [update new call sites](https:\/\/github.com\/flutter\/flutter\/commit\/6bb5296a6102df6e9db274267895681974efdf3d).\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["Not a big deal but for the future, please bear in mind this part of the [Tree Hygiene](https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#avoid-revert-revert-revert-revert-fix-foo-commit-messages) doc:\r\n\r\n> Also avoid using \"Reland\" in the commit message. When you later revert the revert, just land the PR afresh with the original commit message, possibly updated with the information since collected, and include a link to the original PR and to the revert PR so that people can follow the breadcrumbs later.\r\n\r\nOtherwise when doing code archeology later (e.g. walking through git blame) it gets quite confusing because the commit that actually stuck doesn't have the actual information that's useful.","auto label is removed for flutter\/flutter\/144958, due to - The status or check suite [Google testing](http:\/\/frob\/#\/flutter\/presubmit?pr=144958) has failed. Please fix the issues identified (or deflake) before re-applying this label.\n"],"labels":["tool"]},{"title":"[go_router] Using .go() to push a sibling route with instant transition should pop other routes without delay","body":"### Steps to reproduce\r\n\r\n1. Run the example\r\n2. Press `Go to Screen A` then `Go to Screen B` and monitor the console.\r\n\r\n### Expected results\r\n\r\nI expect `ScreenA` to be immediately removed when pushing to a sibling route and the print statement not to be triggered.\r\nThe normal behavior can be achieved when we press the second button \"Go to Home\" that pushes to a previous route.\r\n\r\n### Actual results\r\n\r\n`ScreenA` is not immediately removed, which can lead to issues if ScreenA uses stale\/improper data.\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:go_router\/go_router.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MyApp(),\r\n  );\r\n}\r\n\r\nclass MyApp extends StatefulWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  State<MyApp> createState() => _MyAppState();\r\n}\r\n\r\nclass _MyAppState extends State<MyApp> {\r\n  late final GoRouter router;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n\r\n    router = GoRouter(\r\n      debugLogDiagnostics: true,\r\n      initialLocation: \"\/home\",\r\n      routes: [\r\n        GoRoute(\r\n            path: \"\/home\",\r\n            pageBuilder: (context, state) {\r\n              return NoTransitionPage(\r\n                key: state.pageKey,\r\n                child: const HomePage(),\r\n              );\r\n            },\r\n            routes: [\r\n              GoRoute(\r\n                path: \"a\",\r\n                pageBuilder: (context, state) {\r\n                  return NoTransitionPage(\r\n                    key: state.pageKey,\r\n                    child: const ScreenA(),\r\n                  );\r\n                },\r\n              ),\r\n              GoRoute(\r\n                path: \"b\",\r\n                pageBuilder: (context, state) {\r\n                  return NoTransitionPage(\r\n                    key: state.pageKey,\r\n                    child: const ScreenB(),\r\n                  );\r\n                },\r\n              ),\r\n            ]),\r\n      ],\r\n    );\r\n  }\r\n\r\n  final _counter = Counter();\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return CounterInheritedNotifier(\r\n      notifier: _counter,\r\n      child: MaterialApp.router(\r\n        title: 'Flutter Demo',\r\n        routerConfig: router,\r\n        theme: ThemeData(\r\n          primarySwatch: Colors.blue,\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass Counter with ChangeNotifier {\r\n  int _count = 0;\r\n\r\n  int get count => _count;\r\n\r\n  void increment() {\r\n    _count++;\r\n    notifyListeners();\r\n  }\r\n}\r\n\r\nclass CounterInheritedNotifier extends InheritedNotifier<Counter> {\r\n  const CounterInheritedNotifier({\r\n    super.key,\r\n    required Widget child,\r\n    required Counter notifier,\r\n  }) : super(child: child, notifier: notifier);\r\n\r\n  static CounterInheritedNotifier? of(BuildContext context) {\r\n    return context.dependOnInheritedWidgetOfExactType<CounterInheritedNotifier>();\r\n  }\r\n}\r\n\r\nclass HomePage extends StatelessWidget {\r\n  const HomePage({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text(\"Home\"),\r\n      ),\r\n      body: Center(\r\n        child: ElevatedButton(\r\n          onPressed: () {\r\n            context.go(\"\/home\/a\");\r\n          },\r\n          child: const Text(\"Go to Screen A\"),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass ScreenA extends StatelessWidget {\r\n  const ScreenA({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    print('count: ${CounterInheritedNotifier.of(context)?.notifier?.count}');\r\n    final counterNotifier = CounterInheritedNotifier.of(context)?.notifier;\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text(\"Screen-A\"),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                counterNotifier?.increment();\r\n                context.go(\"\/home\/b\");\r\n              },\r\n              child: const Text(\"Go to Screen B\"),\r\n            ),\r\n            \/\/ This works fine and will immediately pop the screen.\r\n            ElevatedButton(\r\n              onPressed: () {\r\n                counterNotifier?.increment();\r\n                context.go(\"\/home\");\r\n              },\r\n              child: const Text(\"Go to Home\"),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass ScreenB extends StatelessWidget {\r\n  const ScreenB({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text(\"Screen-B\"),\r\n      ),\r\n      body: Center(\r\n        child: ElevatedButton(\r\n          onPressed: () {\r\n            context.go(\"\/home\");\r\n          },\r\n          child: const Text(\"Go to Home\"),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel [user-branch], 3.19.0-9.0.pre.204, on macOS 14.4 23E214 darwin-arm64\r\n    ! Flutter version 3.19.0-9.0.pre.204 on channel [user-branch] at\r\n      \/Users\/bx777\/.puro\/envs\/master\/flutter\r\n      Currently on an unknown channel. Run `flutter channel` to switch to an official channel.\r\n      If that doesn't fix the issue, reinstall Flutter by following instructions at\r\n      https:\/\/flutter.dev\/docs\/get-started\/install.\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.3.0\/libexec\/bin\/dart, which\r\n      is not inside your current Flutter SDK checkout at \/Users\/bx777\/.puro\/envs\/master\/flutter.\r\n      Consider adding \/Users\/bx777\/.puro\/envs\/master\/flutter\/bin to the front of your path.\r\n    ! Upstream repository unknown source is not a standard remote.\r\n      Set environment variable \"FLUTTER_GIT_URL\" to unknown source to dismiss this error.\r\n    \u2022 Framework revision efb1346767 (6 weeks ago), 2024-01-27 14:07:24 -0500\r\n    \u2022 Engine revision f3d48be766\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-81.0.dev)\r\n    \u2022 DevTools version 2.31.0\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use\r\n      \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/bx777\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A240d\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone 15 Pro Max (mobile) \u2022 41E8B274-AC2A-4DC5-A020-6A8A6582EB83 \u2022 ios            \u2022\r\n      com.apple.CoreSimulator.SimRuntime.iOS-17-0 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.4\r\n      23E214 darwin-arm64\r\n    \u2022 Chrome (web)               \u2022 chrome                               \u2022 web-javascript \u2022 Google\r\n      Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["This might be related to https:\/\/github.com\/flutter\/flutter\/issues\/59990","Thanks for the report. I also can reproduce this issue. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (2 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["package","has reproducible steps","p: go_router","team-go_router","found in release: 3.19","found in release: 3.21"]},{"title":"[PlatformChannel] Support Dart-side handling of errors\/exceptions thrown during Dart-side method call handling","body":"### Use case\n\nConsider an unhandled `Exception` being thrown in a Flutter app's main Dart isolate. Typically, this `Exception` is expected to be handled by one or more of these three mechanisms:\r\n\r\n1. [binding.platformDispatcher.onError](https:\/\/api.flutter.dev\/flutter\/dart-ui\/PlatformDispatcher\/onError.html)\r\n2. [Isolate.current.addErrorListener](https:\/\/api.flutter.dev\/flutter\/dart-isolate\/Isolate\/addErrorListener.html)\r\n3. [runZoneGuarded's onError](https:\/\/api.flutter.dev\/flutter\/dart-async\/runZonedGuarded.html)\r\n\r\nThe following example app shows an exception that surprisingly isn't handled by any of the above mechanisms:\r\n\r\n```dart\r\nimport 'dart:async';\r\nimport 'dart:isolate';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:flutter\/services.dart';\r\n\r\nvoid main() async {\r\n  final binding = WidgetsFlutterBinding.ensureInitialized();\r\n  binding.platformDispatcher.onError = (error, stackTrace) {\r\n    \/\/ boom is not caught here.\r\n    print('blah platformDispatcher got error $error');\r\n    return true;\r\n  };\r\n  Isolate.current.addErrorListener(\r\n    RawReceivePort((dynamic pair) {\r\n      final errorAndStackTrace = (pair as List<Object>).cast<String>();\r\n      \/\/ boom is not caught here.\r\n      print('blah isolate $errorAndStackTrace');\r\n    }).sendPort,\r\n  );\r\n\r\n  await runZonedGuarded(() async {\r\n    runApp(Container(color: Colors.red));\r\n\r\n    \/\/ Create the two method channels used in this demo.\r\n    const ping = MethodChannel('ping');\r\n    const pong = MethodChannel('pong');\r\n    \r\n    \/\/ Throw an exception when the platform calls the `pong` channel.\r\n    pong.setMethodCallHandler((call) async {\r\n      throw Exception('boom');\r\n    });\r\n\r\n    \/\/ Kick-off the `pong` call by calling the `ping` channel\r\n    await ping.invokeMethod('');\r\n  }, (error, st) {\r\n    \/\/ boom is not caught here.\r\n    print('blah runZoneGuarded $error, $st');\r\n  });\r\n```\r\n\r\nInstead, the exception is forwarded to the platform for handling via the `MethodChannel`, example implementation for Android:\r\n\r\n```java\r\npackage com.google.android.flutter.samples.minimal;\r\n\r\nimport io.flutter.embedding.android.FlutterActivity;\r\nimport io.flutter.embedding.engine.FlutterEngine;\r\nimport io.flutter.plugin.common.MethodChannel;\r\nimport io.flutter.plugin.common.MethodChannel.Result;\r\n\r\npublic class MainActivity extends FlutterActivity {\r\n  @Override\r\n  public void configureFlutterEngine(FlutterEngine flutterEngine) {\r\n    PluginRegistrant.registerWith(flutterEngine);\r\n    var ping = new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), \"ping\");\r\n    var pong = new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), \"pong\");\r\n\r\n    ping.setMethodCallHandler(\r\n        (call, result) -> {\r\n          result.success(null);\r\n          pong.invokeMethod(\r\n              \/* method *\/ \"boom\",\r\n              \/* arguments *\/ null,\r\n              \/\/ Without this, the \"boom\" error in Dart will be silently dropped.\r\n              \/* callback *\/ new Result() {\r\n                @Override\r\n                public void success(Object result) {\r\n                  android.util.Log.w(\"MinimalActivity\", \"blah success\");\r\n                }\r\n\r\n                @Override\r\n                public void error(String errorCode, String errorMessage, Object errorDetails) {\r\n                  android.util.Log.w(\r\n                      \"MinimalActivity\",\r\n                      \"blah error errorCode=\"\r\n                          + errorCode\r\n                          + \" errorMessage=\"\r\n                          + errorMessage\r\n                          + \" errorDetails=\"\r\n                          + errorDetails);\r\n                }\r\n\r\n                @Override\r\n                public void notImplemented() {\r\n                  android.util.Log.w(\"MinimalActivity\", \"blah notimplemented\");\r\n                }\r\n              });\r\n        });\r\n  }\r\n}\r\n```\n\n### Proposal\n\nInstead of always forwarding exceptions thrown in Dart method call handlers back to the platform, provide an otpional mechanism for those exceptions to escape and be handled in Dart.","comments":["> Instead of always forwarding exceptions thrown in Dart method call handlers back to the platform, provide an otpional mechanism for those exceptions to escape and be handled in Dart.\r\n\r\nBased on our own experience in our plugins, having the exceptions stay on the Dart side is probably a better outcome for most of our use cases as well; this definitely seems like a reasonable proposal."],"labels":["engine","c: proposal","team-ecosystem","P2","a: plugins","triaged-ecosystem"]},{"title":"[Impeller] document entity stencil-then-cover clip depth methods","body":"Please document:\r\n- impeller::Entity::SetClipDepth\r\n- impeller::Entity::IncrementStencilDepth\r\n- impeller::Entity::GetClipDepth\r\n- impeller::Entity::SetNewClipDepth\r\n- impeller::Entity::GetNewClipDepth\r\n- impeller::Entity::GetShaderClipDepth\r\n\r\ncc @bdero ","comments":[],"labels":["P2","e: impeller","team-engine","triaged-engine"]},{"title":"SearchAnchor doesn't update trailing icons","body":"### Steps to reproduce\r\n\r\nI am in the process of integrating a search feature into my app and have stumbled upon a challenging issue. My implementation utilizes the SearchAnchor and SearchBar widgets, but I am facing difficulties in concealing the close icon within the search route view when there are no search queries. The goal is to ensure the close icon is only displayed when users have entered a query.\r\n\r\nWhy my initial approach failed while the latter one works?\r\n\r\n\r\n\r\n### Expected results\r\n\r\nI devised a workaround by developing a separate stateful widget that specifically handles the rebuilding of the trailing icons:\r\n\r\nhttps:\/\/dartpad.dev\/?id=0832ec3eee0b686b3f844092b0222217\r\n\r\n### Actual results\r\n\r\nTo provide a clear picture of the issue, I have shared a DartPad snippet illustrating the problem:\r\n\r\nhttps:\/\/dartpad.dev\/?id=f65ca59d3cd5afee774e4ef7fdc0ffc9\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MaterialApp(\r\n      home: Scaffold(\r\n        body: SafeArea(\r\n          child: Padding(\r\n            padding: EdgeInsets.all(16),\r\n            child: CustomSearchBar(),\r\n          ),\r\n        ),\r\n      ),\r\n    ),\r\n  );\r\n}\r\n\r\nclass CustomSearchBar extends StatefulWidget {\r\n  const CustomSearchBar({super.key});\r\n\r\n  @override\r\n  State<CustomSearchBar> createState() => _CustomSearchBarState();\r\n}\r\n\r\nclass _CustomSearchBarState extends State<CustomSearchBar> {\r\n  final SearchController _controller = SearchController();\r\n\r\n  @override\r\n  void dispose() {\r\n    _controller.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return ValueListenableBuilder<TextEditingValue>(\r\n      valueListenable: _controller,\r\n      builder: (context, value, _) {\r\n        return SearchAnchor(\r\n          searchController: _controller,\r\n          viewTrailing: _controller.value.text.isNotEmpty\r\n              ? [\r\n                  IconButton(\r\n                    icon: const Icon(Icons.clear),\r\n                    onPressed: () {\r\n                      _controller.clear();\r\n                    },\r\n                  )\r\n                ]\r\n              : [],\r\n          builder: (context, controller) {\r\n            return SearchBar(\r\n              controller: controller,\r\n              hintText: 'Search',\r\n              onTap: controller.openView,\r\n              leading: const Icon(Icons.search),\r\n            );\r\n          },\r\n          suggestionsBuilder: (context, controller) {\r\n            return [];\r\n          },\r\n        );\r\n      },\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.19.0, on Microsoft Windows [Version 10.0.22631.3235], locale en-US)\r\n    \u2022 Flutter version 3.19.0 on channel stable at C:\\tools\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision bae5e49bc2 (4 weeks ago), 2024-02-13 17:46:18 -0800\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\aarro\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n\r\n[\u221a] VS Code (version 1.87.1)\r\n    \u2022 VS Code at C:\\Users\\aarro\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (2 available)\r\n    \u2022 Chrome (web) \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)   \u2022 edge   \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.59\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["I can reproduce this issue as well. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (2 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","This issue seems to be resolved in #141755 ","I think the issue is why the widget does not rebuild when the _controller.value.text changes, if I want to use a different trailing icon, then the problem will persist."],"labels":["framework","f: material design","has reproducible steps","P2","team-design","triaged-design","found in release: 3.19","found in release: 3.21"]},{"title":"Add annotations to mark asset path and package name","body":"### Use case\n\nSee https:\/\/github.com\/dart-lang\/sdk\/issues\/46542 for details. In short it would be useful to have code completion inside the `Image.asset()` constructor invocation, for the `name` argument. Taking the optional `package` into account, if I understand the API right.\n\n### Proposal\n\nBut because `Image.asset()` might be not the only API that accept assets, at very least there might be user widgets that accept asset names, we need a way to give the Dart analysis server a hint that this `String` is actually an asset name.\r\n\r\nSo, I propose adding two annotations to `flutter\/lib\/src\/services\/asset_manifest.dart` (let me know if there is a better location).\r\n\r\n```dart\r\n\/\/\/ The marker that denotes that the annotated `String` typed formal parameter\r\n\/\/\/ is the name of an asset.\r\nconst Object assetName = Object();\r\n\r\n\/\/\/ The marker that denotes that the annotated `String` typed formal parameter\r\n\/\/\/ is the name of a package that contains the asset specified with [assetName].\r\nconst Object assetPackageName = Object();\r\n```\r\n\r\nAnd `Image.asset()` will be updated:\r\n```dart\r\n  Image.asset(\r\n    @assetName\r\n    String name, {\r\n    super.key,\r\n    AssetBundle? bundle,\r\n<cut>\r\n    @assetPackageName\r\n    String? package,\r\n    this.filterQuality = FilterQuality.low,\r\n    int? cacheWidth,\r\n    int? cacheHeight,\r\n  })\r\n```","comments":["If all we need to do is add some annotations, then this seems like a nice win? There is also https:\/\/api.flutter.dev\/flutter\/dart-ui\/FragmentProgram\/fromAsset.html , but that is a) used less and b) defined in dart:ui","How would this roughly work? Would the analyzer add special support to recognize this Flutter-defined annotation? Is there a way to make this a little more generic and useful for other packages to plug into it?\r\n\r\nThe overall goal to give you code completion for these kind of strings sounds great, though!","Yes, the analyzer will have special knowledge about these Flutter annotations.\r\nI have a few ideas that make me lean toward Flutter-specific implementation.\r\n1. We need to know also about `@assetPackageName String? package`, to look only in this package.\r\n2. We need to look, which assets are specified in `pubspec.yaml`, in `flutter: assets:`.\r\n3. I don't know other use cases, so it is hard to generalize.","Makes sense. Adding this seems like a win."],"labels":["c: new feature","framework","a: assets","c: proposal","P2","team-framework","triaged-framework"]},{"title":"In Desktop platforms, TextFormField ignores the HOME, END, and arrow keys on the Numpad.","body":"### Steps to reproduce\r\n\r\n1. Enter text in the TextFormField\r\n2. Try move with Numpad arrows, HOME and END keys.\r\n\r\n### Expected results\r\n\r\nThe cursor should move in accordance with the key pressed\r\n\r\n### Actual results\r\n\r\nThe cursor does not move\r\n\r\n### Code sample\r\n\r\n``` dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  \/\/ This widget is the root of your application.\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(title: 'Flutter Demo Home Page'),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key, required this.title});\r\n\r\n  final String title;\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: <Widget>[\r\n           \/\/ add a text form field\r\n            TextFormField(),                    \r\n          ],\r\n        ),\r\n      ),    \r\n    );\r\n  }\r\n}\r\n```\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nflutter doctor -v    \r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Versione 10.0.22631.3155], locale it-IT)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\Users\\User\\Flutter\\flutter_windows_3.16.0-stable\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (4 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\User\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.9.2)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.9.34622.214\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u221a] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Versione 10.0.22631.3155]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.80\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["Thanks for the report. This seems to have appeared before at https:\/\/github.com\/flutter\/flutter\/issues\/80662. \r\n\r\nI can reproduce this issue. On different platforms the results are also slightly different:\r\n\r\n- On Windows (Windows app): has issue (same result as above) \u2757\r\n- On Web (Windows host): no issue \u2705\r\n- On Linux: (Linux app): `HOME` and `END` keys work. But `arrow` keys don't work (the cursor doesn't move) \u2757\r\n- On macOS: (macOS, Web app and also other non-Flutter app): I tried the same keyboard but it only outputs numbers; Numlock also has no signal (can't turn on\/off). Perhaps it's a separate keyboard compatibility issue. \ud83e\udd14\r\n\r\n\u2705: No Issue \u2757: Issue reproduced \ud83e\udd14: N\/A\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable & master)<\/summary>\r\n\r\n```bash\r\n[\u221a] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.19045.4046], locale en-US)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\WIP\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (4 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\AndroidSDK\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio Hedgehog\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.4)\r\n    \u2022 Visual Studio at D:\\DOWNLOADWORK\\VS2022\r\n    \u2022 Visual Studio Community 2022 version 17.4.33213.308\r\n    \u2022 Windows 10 SDK version 10.0.19041.0\r\n\r\n[\u221a] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android StudioGiraffe\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n\r\n[\u221a] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio Hedgehog\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u221a] VS Code (version 1.86.2)\r\n    \u2022 VS Code at C:\\Users\\ADMIN\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 121.0.2277.83\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.14, on Microsoft Windows [Version 10.0.19045.4046], locale en-US)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at C:\\WIP\\flutter_master\r\n    ! Warning: `flutter` on your path resolves to C:\\WIP\\flutter\\bin\\flutter, which is not inside your current Flutter SDK checkout at C:\\WIP\\flutter_master.\r\n      Consider adding C:\\WIP\\flutter_master\\bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to C:\\WIP\\flutter\\bin\\dart, which is not inside your current Flutter SDK checkout at C:\\WIP\\flutter_master.\r\n      Consider adding C:\\WIP\\flutter_master\\bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (7 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\AndroidSDK\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio Hedgehog\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.4)\r\n    \u2022 Visual Studio at D:\\DOWNLOADWORK\\VS2022\r\n    \u2022 Visual Studio Community 2022 version 17.4.33213.308\r\n    \u2022 Windows 10 SDK version 10.0.19041.0\r\n\r\n[\u221a] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android StudioGiraffe\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\n\r\n[\u221a] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio Hedgehog\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u221a] VS Code (version 1.86.2)\r\n    \u2022 VS Code at C:\\Users\\ADMIN\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 121.0.2277.83\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","On Linux, numpad7 (Home) and numpad1 (End) are correctly handle because of the logic added at the engine level in https:\/\/github.com\/flutter\/engine\/pull\/24623.\r\n\r\nIt would probably make sense to handle numpad keys as shortcuts similarly to :\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/68138bc4e56b4280e7ce5a88df48aa4660ef3642\/packages\/flutter\/lib\/src\/widgets\/default_text_editing_shortcuts.dart#L258-L261\r\n\r\nAssigning myself and I will file a PR in the coming days.","cc @dkwingsmt who may have some suggestions."],"labels":["a: text input","a: desktop","has reproducible steps","fyi-desktop","found in release: 3.19","team-text-input","found in release: 3.21"]},{"title":"_cameras = await availableCameras(); makes NSInvalidArguement Exception with iOS 17. ","body":"### Steps to reproduce\n\nJust run the sample project with iOS 17.3.1.\r\nIt will not get available cameras.\n\n### Expected results\n\nAll available cameras of the iOS device\n\n### Actual results\n\nNSInvalidArgument Exception and App is terminating. \n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nWidgetsFlutterBinding.ensureInitialized();\r\n _cameras = await availableCameras();\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.13.4, on macOS 14.3.1 23D60 darwin-x64, locale en-US)\r\n    \u2022 Flutter version 3.13.4 on channel stable at \/Users\/fantasticdev\/Documents\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 367f9ea16b (6 months ago), 2023-09-12 23:27:53 -0500\r\n    \u2022 Engine revision 9064459a8b\r\n    \u2022 Dart version 3.1.2\r\n    \u2022 DevTools version 2.25.0\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/fantasticdev\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_SDK_ROOT = \/Users\/fantasticdev\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    ! Some Android licenses not accepted. To resolve this, run: flutter doctor --android-licenses\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.13.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension can be installed from:\r\n      \ud83d\udd28 https:\/\/marketplace.visualstudio.com\/items?itemName=Dart-Code.flutter\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 sdk gphone x86 (mobile) \u2022 emulator-5554 \u2022 android-x86    \u2022 Android 11 (API 30) (emulator)\r\n    \u2022 macOS (desktop)         \u2022 macos         \u2022 darwin-x64     \u2022 macOS 14.3.1 23D60 darwin-x64\r\n    \u2022 Chrome (web)            \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @fantasticDev2, do you have the necessary permissions in your `Info.plist` file? If so, can you share the full error that you get? I just tested the camera example on my device running iOS 17.3.1  and it worked as expected. "],"labels":["waiting for customer response","in triage"]},{"title":"Fixed so that editableText shows intermediate obscured characters when TextField reaches maxLength.","body":"This PR changes the condition of buildTextSpan to briefly show the password only when the TextField does not have a maxLength or the text is shorter than maxLength but does not show it in intermediate characters if the text has already reached the maxLength.\r\n\r\n*List which issues are fixed by this PR. You must list at least one issue. An issue is not required if the PR fixes something trivial like a typo.*\r\nFixes #141560\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["Thanks for your pull request! It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\nView this [failed invocation](https:\/\/github.com\/flutter\/flutter\/pull\/144929\/checks?check_run_id=22509072879) of the CLA check for more information.\n\nFor the most up to date status, view the checks section at the bottom of the pull request."],"labels":["a: text input","framework","f: material design","team-text-input"]},{"title":"Video player has some error on build apk","body":"### Steps to reproduce\n\nI use video_player: ^2.8.3 to play some video in my project and this week update flutter to 3.16 and other config is same below :\r\n```\r\n\r\ncompileSdkVersion 34\r\n...\r\next.kotlin_version = '1.9.23'\r\n...\r\ndistributionUrl=https\\:\/\/services.gradle.org\/distributions\/gradle-8.5-all.zip\r\n...\r\nclasspath 'com.android.tools.build:gradle:8.3.0'\r\n```\r\n\r\n\r\n\r\nafter clean and build I faced with  build failed error,  \r\nI create new project and only add this dependency in pubspec.yaml and again this error appears. \n\n### Expected results\n\n```\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':video_player_android:compileReleaseJavaWithJavac'.\r\n> Compilation failed; see the compiler error output for details.\r\n\r\n```\r\n\n\n### Actual results\n\nActually i think video_player package has some conflict with new version of flutter or dart sdk\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n_No response_\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n flutter build apk\r\n\r\nwarning: [options] source value 8 is obsolete and will be removed in a future release\r\nwarning: [options] target value 8 is obsolete and will be removed in a future release\r\nwarning: [options] To suppress warnings about obsolete options, use -Xlint:-options.\r\nerror: warnings found and -Werror specified\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':video_player_android:compileReleaseJavaWithJavac'.\r\n> Compilation failed; see the compiler error output for details.\r\n\r\n* Try:\r\n> Run with --info option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\nBUILD FAILED in 3s\r\nRunning Gradle task 'assembleRelease'...                            \u06f4\u066b\u06f4s\r\nGradle task assembleRelease failed with exit code 1\r\nThe Flutter CLI developer tool uses Google Analytics to report usage and diagnostic data\r\nalong with package dependencies, and crash reporting to send basic crash reports.\r\nThis data is used to help improve the Dart platform, Flutter framework, and related tools.\r\n\r\nTelemetry is not sent on the very first run.\r\nTo disable reporting of telemetry, run this terminal command:\r\n\r\nflutter --disable-telemetry.\r\nIf you opt out of telemetry, an opt-out event will be sent,\r\nand then no further information will be sent.\r\nThis data is collected in accordance with the\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.13.9, on Microsoft Windows [Version 10.0.19045.4046], locale fa-IR)\r\n    \u2022 Flutter version 3.13.9 on channel stable at D:\\software\\flutter\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision d211f42860 (5 months ago), 2023-10-25 13:42:25 -0700\r\n    \u2022 Engine revision 0545f8705d\r\n    \u2022 Dart version 3.1.5\r\n    \u2022 DevTools version 2.25.0\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\rayanet\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Common Files\\Oracle\\Java\\javapath\\java.exe\r\n    \u2022 Java version Java(TM) SE Runtime Environment (build 20.0.1+9-29)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[X] Visual Studio - develop Windows apps\r\n    X Visual Studio not installed; this is necessary to develop Windows apps.\r\n      Download at https:\/\/visualstudio.microsoft.com\/downloads\/.\r\n      Please install the \"Desktop development with C++\" workload, including all of its default components\r\n\r\n[\u221a] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0--11185874)\r\n\r\n[!] Android Studio (version unknown)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\\bin\r\n    \u2022 Flutter plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n       https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    X Unable to determine Android Studio version.\r\n    X android-studio-dir = C:\\Program Files\\Android\\Android Studio\\bin\r\n    X Unable to find bundled Java version.\r\n    \u2022 Try updating or re-installing Android Studio.\r\n    \u2022 Consider removing your android-studio-dir setting by running:\r\n      flutter config --android-studio-dir=\r\n\r\n[\u221a] Connected device (4 available)\r\n    \u2022 CHM U01 (mobile)  \u2022 4C3HMQ166F006063 \u2022 android-arm    \u2022 Android 4.4.2 (API 19)\r\n    \u2022 Windows (desktop) \u2022 windows          \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\nTelemetry is not sent on the very first run.\r\nTo disable reporting of telemetry, run this terminal command:\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["same issue any news?","> I create new project and only add this dependency in pubspec.yaml and again this error appears.\r\n\r\n@mrsalesi \r\nI tried as above and was able to build the apk without any issues. See below:\r\n\r\n```\r\ndhs@Dhss-MacBook-Pro vp_issue % flutter pub add video_player\r\nResolving dependencies... \r\n+ csslib 1.0.0\r\n+ flutter_web_plugins 0.0.0 from sdk flutter\r\n+ html 0.15.4\r\n  leak_tracker 10.0.0 (10.0.4 available)\r\n  leak_tracker_flutter_testing 2.0.1 (3.0.3 available)\r\n  leak_tracker_testing 2.0.1 (3.0.1 available)\r\n  material_color_utilities 0.8.0 (0.11.0 available)\r\n  meta 1.11.0 (1.12.0 available)\r\n+ plugin_platform_interface 2.1.8\r\n  test_api 0.6.1 (0.7.0 available)\r\n+ video_player 2.8.3\r\n+ video_player_android 2.4.12\r\n+ video_player_avfoundation 2.5.6\r\n+ video_player_platform_interface 6.2.2\r\n+ video_player_web 2.3.0\r\n  vm_service 13.0.0 (14.1.0 available)\r\n+ web 0.5.1\r\nChanged 10 dependencies!\r\n7 packages have newer versions incompatible with dependency constraints.\r\nTry `flutter pub outdated` for more information.\r\ndhs@Dhss-MacBook-Pro vp_issue % flutter build apk\r\n\r\nFont asset \"MaterialIcons-Regular.otf\" was tree-shaken, reducing it from 1645184 to 1384 bytes (99.9% reduction). Tree-shaking can be disabled by providing the --no-tree-shake-icons flag when building your app.\r\nRunning Gradle task 'assembleRelease'...                          118.6s\r\n\u2713  Built build\/app\/outputs\/flutter-apk\/app-release.apk (18.3MB).\r\ndhs@Dhss-MacBook-Pro vp_issue % \r\n```\r\n\r\nI have `distributionUrl=https\\:\/\/services.gradle.org\/distributions\/gradle-7.6.3-all.zip` and ` compileSdkVersion 34`"],"labels":["waiting for customer response","in triage"]},{"title":"After updating the Flutter. Flutter run Error reporting  Error (Xcode): Framework 'Flutter' not found","body":"### Steps to reproduce\r\n\r\nAfter updating the Flutter 3.19.2 \u2022 channel stable \u2022 https:\/\/github.com\/flutter\/flutter.git    flutter run\r\n\r\n### Actual results\r\n\r\nError (Xcode): Framework 'Flutter' not found\r\n\r\nError (Xcode): Linker command failed with exit code 1 (use -v to see invocation)\r\n\r\nCould not build the application for the simulator.\r\nError launching application on iPhone 14 Pro.\r\n\r\n### Logs\r\n\r\n<details open>\r\n<summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n<!-- Paste your logs here -->\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\nLaunching lib\/main.dart on iPhone 14 Pro in debug mode...\r\nRunning Xcode build...\r\nXcode build done.                                           31.3s\r\nFailed to build iOS app\r\nError (Xcode): Framework 'Flutter' not found\r\n\r\nError (Xcode): Linker command failed with exit code 1 (use -v to see invocation)\r\n\r\nCould not build the application for the simulator.\r\nError launching application on iPhone 14 Pro.\r\n\r\n","comments":["@maxiu1006 \r\nCan you run `flutter run -v` and provide the entire log here ? The log will be huge, so you can put that in a text file and share it here.\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"[go_router] Support pushAndRemoveUntil","body":"### Use case\n\nThere are currently four pages A, B, C, and D. How can I return directly from page D to page A with routing? Is there any way? I didn't find the implementation of pushAndRemoveUntil, which is very frustrating. Looking forward to your answer.\n\n### Proposal\n\nNavigator.of(context).pushNamedAndRemoveUntil('\/LoginScreen', (Route<dynamic> route) => false);","comments":["I can see this has been raised at https:\/\/github.com\/flutter\/flutter\/issues\/99112 but it's closed. Keeping this open as a new issue. ","@Jay-57blocks In your case, if you need to replace the entire configuration, using a `.go` should work no?\r\n\r\n```dart\r\nGoRouter.of(context).go('\/LoginScreen');\r\n```\r\n\r\n\r\n---\r\n\r\nAlso, if you want to preserve some routes, would a `popUntil()` works in your case?\r\nIf your history is something like `['\/a', '\/b', '\/c', '\/d']` and you want to pop until `'\/b'`, maybe something like below would work? \r\n\r\n```dart\r\nGoRouter.of(context).popUntil((route) => route.location == '\/b');\r\n```","\r\n\r\n    \r\n\r\n\r\n\r\n    font{\r\n        line-height: 1.6;\r\n    }\r\n    ul,ol{\r\n        padding-left: 20px;\r\n        list-style-position: inside;\r\n    }\r\n\r\n\r\n    \n    \n        \n            \n        \n    Thanks, I only found GoRouter.of(context).pop(), not the\u00a0popUntil\u00a0you mentioned\n    \n        \n            \n        \n    \n    \n      \n    \n        \n                    \n            \n                \n                    \n                            \n                                \n                            \n                            \n                                jay\n                            \n                    \n                        \n                            \n                                    ***@***.***\n                            \n                        \n                \n            \n        \n        \n    \n \n    \n\n  \n    ---- Replied Message ----\n  \n  \n    \n      \n        \n         From \n        \n        \n            Valentin ***@***.***>\n            \n        \n      \n      \n        \n         Date \n        \n        \n        03\/13\/2024 00:01\n        \n      \n      \n        \n         To \n        \n        \n         \n          \n            ***@***.***>\n            \n          \n        \n      \n      \n        \n         Cc \n        \n        \n          \n            ***@***.***>\n            ,\n          \n          \n            ***@***.***>\n            \n          \n        \n      \n      \n        \n         Subject \n        \n        \n              Re: [flutter\/flutter] [go_router] Support pushAndRemoveUntil (Issue #144924)\n        \n      \n    \n  \n  \n@Jay-57blocks In your case, if you need to replace the entire configuration, using a .go should work no?\nGoRouter.of(context).go('\/LoginScreen');\n\nAlso, if you want to preserve some routes, would a popUntil() works in your case?\nIf your history is something like ['\/a', '\/b', '\/c', '\/d'] and you want to pop until '\/b', maybe something like below would work?\nGoRouter.of(context).popUntil((route) => route.location == '\/b');\n\n\u2014Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you were mentioned.Message ID: ***@***.***>","> Thanks, I only found GoRouter.of(context).pop(), not the popUntil you mentioned\r\n\r\n`pop` and `go` are already implemented. `popUntil` is not implemented yet. I made a PR to propose a possible implementation\r\nhttps:\/\/github.com\/flutter\/packages\/pull\/6306","@ValentinVignal Per the last comment https:\/\/github.com\/flutter\/flutter\/issues\/99112#issuecomment-1658974503, `popUntil` is a separate issue at https:\/\/github.com\/flutter\/flutter\/issues\/131625. So you can link your PR to that one.\r\n\r\n@Jay-57blocks Will `popUntil` fit your case or is `pushNamedAndRemoveUntil` still in your needs?","@huycozy thank you, I'll link my PR to the other issue. I think we can keep this issue as `pushNamedAndRemoveUntil` will ultimately be needed ?","@ValentinVignal Thanks for the contribution. Yes, this is still open.","> @ValentinVignal Per the last comment [#99112 (comment)](https:\/\/github.com\/flutter\/flutter\/issues\/99112#issuecomment-1658974503), `popUntil` is a separate issue at #131625. So you can link your PR to that one.\r\n> \r\n> @Jay-57blocks Will `popUntil` fit your case or is `pushNamedAndRemoveUntil` still in your needs?\r\n\r\nYes, pushNamedAndRemoveUntil still needs."],"labels":["c: new feature","waiting for customer response","package","p: go_router","team-go_router"]},{"title":"Make WidgetTester.pageBack work with localised app","body":"Fixes https:\/\/github.com\/flutter\/flutter\/issues\/51121\r\n\r\nMake WidgetTester.pageBack work with localised app. Previously the tooltip \"Back\" was hardcoded in the `WidgetTester.pageBack` utility method.\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["@gspencergoog I added some tests in `finders_test.dart` and expanded the documentation comment a bit. PTAL","Oh, but looks like this is failing some existing tests. Can you take a look at those test failures?","Some integration tests are failing because one project (flutter_gallery) relies on the hardcoded 'Back' string\r\n\r\nExample code:\r\n```dart\r\nFloatingActionButton.extended(\r\n  tooltip: 'Back', \/\/ Tests depend on this label to exit the demo.\r\n  onPressed: () {\r\n    Navigator.of(context).pop();\r\n  },\r\n  label: const Text('Close demo'),\r\n  icon: const Icon(Icons.close),\r\n)\r\n```\r\n\r\nProbably some other projects are doing that too.\r\n\r\nI see several options:\r\n\r\n#### 1\/ Re-add the hardcoded tooltip search as a fallback\r\n\r\n```dart\r\nbackButton = find.byTooltip('Back');\r\n```\r\n\r\n#### 2\/ Add a tooltip search but using the localised text from material\r\n```dart\r\nbackButton = find.byElementPredicate((Element element) {\r\n  if (element.widget case final Tooltip tooltip) {\r\n    final MaterialLocalizations localizations = MaterialLocalizations.of(element);\r\n    return tooltip.message == localizations.backButtonTooltip;\r\n  }\r\n  return false;\r\n});\r\n```\r\n\r\n#### 3\/ Fix the tests in the flutter_gallery tests\r\n\r\nReplace the `tester.pageBack()` with `tester.tap(find.byTooltip('Back'))`.\r\n\r\nI'm worried that other projects might rely on this too and I would hate to break them. My experience is that it is really painful to have this kind of breakage.\r\n\r\n#### 4\/ Drop this PR altogether because it's too late.\r\nAt the end, any project can have their own utility `goBack` with any algorithm they prefer.\r\n\r\nWDYT?\r\n\r\n","I think I'd add the tooltip search as a fallback using the localizations."],"labels":["a: tests","framework"]},{"title":"Add ability to select a 24-hour format as a parameter of showTimePicker","body":"### Use case\n\nAs a Flutter developer, I often encounter scenarios where I need to provide users with the ability to select a 24-hour format based on their preferences. Currently, the showTimePicker function does not offer this capability, resulting in limitations for applications targeting diverse user bases. For instance, in international applications or those catering to specific user demographics.\n\n### Proposal\n\nTo address this limitation and enhance the flexibility of time selection in Flutter applications, I propose adding a new parameter to the showTimePicker function that allows developers to specify the desired time format (12-hour or 24-hour). This enhancement will empower developers to tailor their applications to meet the specific needs and preferences of their user base, ultimately improving user satisfaction and usability.","comments":["You can enable a 24-hour time picker but not a 12-hour one.\r\n\r\n```dart\r\n  Future<void> _pickDuration(BuildContext context) async {\r\n    \/\/ ...\r\n\r\n    final time = TimeOfDay(hour: hours, minute: remainderMinutes);\r\n    final newTime = await showTimePicker(\r\n      context: context,\r\n      initialTime: time,\r\n      initialEntryMode: TimePickerEntryMode.input,\r\n      builder: _hourFormatBuilder,\r\n    );\r\n\r\n    \/\/ ....\r\n  }\r\n  \r\n  Widget _hourFormatBuilder(BuildContext context, Widget? child) {\r\n    final mediaQueryData = MediaQuery.of(context);\r\n\r\n    return MediaQuery(\r\n      data: mediaQueryData.alwaysUse24HourFormat ? mediaQueryData : mediaQueryData.copyWith(alwaysUse24HourFormat: true),\r\n      child: child!,\r\n    );\r\n  }\r\n```","That works well, thank you @maRci002,\r\n\r\nAnyway, it would be great if that could be done with just an argument in showTimePicker, with the code you shared makes it simple to edit."],"labels":["framework","f: material design","f: date\/time picker","a: internationalization","c: proposal","P2","team-design","triaged-design"]},{"title":"Consider using `VULKAN_HPP_TYPESAFE_CONVERSION`","body":"Here's my understanding of `VULKAN_HPP_TYPESAFE_CONVERSION`:\r\n\r\n- When targeting 64-bit, implicit conversion of vulkan handles is typesafe. As a result, `VULKAN_HPP_TYPESAFE_CONVERSION` is enabled by default.\r\n    - `VULKAN_HPP_TYPESAFE_CONVERSION` is automatically enabled when `VK_USE_64_BIT_PTR_DEFINES` is set. The latter is only set when [defines like](https:\/\/chromium.googlesource.com\/external\/github.com\/KhronosGroup\/Vulkan-Headers\/+\/5a5c9a643484d888873e32c5d7d484fae8e71d3d\/include\/vulkan\/vulkan_core.h#30) `__x86_64__` are set by the compiler.\r\n- When targeting 32-bit, `VULKAN_HPP_TYPESAFE_CONVERSION` is not set.\r\n- When targeting 32-bit, turning on `VULKAN_HPP_TYPESAFE_CONVERSION` is not typesafe. But it can be turned on anyway.\r\n- `VULKAN_HPP_TYPESAFE_CONVERSION` triggers the generation of *some code*.\r\n    - When targeting 32-bit, this code causes a \"conditional expression is ambiguous\" when a vulkan handle and a `VK_NULL_HANDLE` is used in a ternary expression. Before https:\/\/github.com\/flutter\/engine\/pull\/51285, this can be reproduced by setting `VULKAN_HPP_TYPESAFE_CONVERSION` to the `:vulkan_headers_config` [here](https:\/\/chromium.googlesource.com\/external\/github.com\/KhronosGroup\/Vulkan-Headers\/+\/5a5c9a643484d888873e32c5d7d484fae8e71d3d\/BUILD.gn#10)\r\n    - https:\/\/github.com\/flutter\/engine\/pull\/51285 allows the GN build to compile successfully both with and without `VULKAN_HPP_TYPESAFE_CONVERSION`\r\n- Internally, `VULKAN_HPP_TYPESAFE_CONVERSION` is set unconditionally whether we're targeting 32-bit or 64-bit platforms (see details in b\/328355475).\r\n\r\nHere is what the [vulkan docs](https:\/\/github.com\/KhronosGroup\/Vulkan-Hpp\/blob\/main\/README.md#cc-interop-for-handles) say:\r\n\r\n> On 64-bit platforms Vulkan-Hpp supports implicit conversions between C++ Vulkan handles and C Vulkan handles. On 32-bit platforms all non-dispatchable handles are defined as `uint64_t`, thus preventing type-conversion checks at compile time which would catch assignments between incompatible handle types. Due to that Vulkan-Hpp does not enable implicit conversion for 32-bit platforms by default and it is recommended to use a `static_cast` for the conversion like this: `VkImage = static_cast<VkImage>(cppImage)` to prevent converting some arbitrary int to a handle or vice versa by accident. If you're developing your code on a 64-bit platform, but want compile your code for a 32-bit platform without adding the explicit casts you can define `VULKAN_HPP_TYPESAFE_CONVERSION` to 1 in your build system or before including `vulkan.hpp`. On 64-bit platforms this define is set to 1 by default and can be set to 0 to disable implicit conversions.\r\n\r\nThe goal for this issue would be to better align the internal build with the GN build here so that errors can be surfaced before they roll in. We could either:\r\n\r\n- Set `VULKAN_HPP_TYPESAFE_CONVERSION` for the GN build\r\n- Make the `VULKAN_HPP_TYPESAFE_CONVERSION` setting internally conditional on whether the build is targeting 32-bit or 64-bit\r\n\r\nAll this is quite new to me, but it seems like the latter would be better for better type safety. This might take more effort to push through depending on whether there are other vulkan clients that are depending on the current behavior though.\r\n\r\ncc @chinmaygarde ","comments":[],"labels":["engine","c: proposal","P3","team-engine","triaged-engine"]},{"title":"Flutter web application unusable only in firefox due to canvaskit errors","body":"Our application works perfectly fine in every browser but firefox:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/41200990\/9dd1bc00-35a6-452b-bee7-193df9b46949\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nUncaught : RuntimeError: index out of bounds\r\n    CanvasKitInit https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:115\r\n    eb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34704\r\n    lp https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34563\r\n    my https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34454\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34697\r\n    b98 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1162\r\n    axk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34685\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34999\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    arj https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35007\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34985\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35158\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axS https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35161\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35150\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36905\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axP https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36907\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36897\r\n    aps https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88120\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81570\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:93083\r\n    aeF https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81560\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    Se https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89022\r\n    Sd https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89026\r\n    YK https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89011\r\n    adB https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88987\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3433\r\n    p8 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1095\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36322\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n[main.dart.js:3298:19](https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22)\r\nLoading from existing service worker. [flutter.js:3:660](https:\/\/easywear.app:42070\/flutter.js?1.4.9b22)\r\nService worker already active. [flutter.js:3:907](https:\/\/easywear.app:42070\/flutter.js?1.4.9b22)\r\nInjecting <script> tag. Using callback. [flutter.js:3:1829](https:\/\/easywear.app:42070\/flutter.js?1.4.9b22)\r\nunreachable code after return statement\r\n[main.dart.js:12570:1](https:\/\/easywear.app:42070\/main.dart.js?1.4.9b22)\r\nunreachable code after return statement\r\n[main.dart.js:94232:1](https:\/\/easywear.app:42070\/main.dart.js?1.4.9b22)\r\nFlutter Web Bootstrap: Programmatic. [main.dart.js:7441:22](https:\/\/easywear.app:42070\/main.dart.js?1.4.9b22)\r\nget https:\/\/easywear.app:10000\/api\/app\/version took 314 ms [main.dart.js:32701:78](https:\/\/easywear.app:42070\/main.dart.js?1.4.9b22)\r\nSource-Map-Fehler: Error: NetworkError when attempting to fetch resource.\r\nRessourcen-Adresse: https:\/\/easywear.app:10000\/flutter.js?1.4.9b22\r\nSource-Map-Adresse: flutter.js.map\r\n\r\nSource-Map-Fehler: Error: request failed with status 404\r\nRessourcen-Adresse: https:\/\/easywear.app:42070\/flutter.js?1.4.9b22\r\nSource-Map-Adresse: flutter.js.map\r\n\r\nUncaught : RuntimeError: indirect call signature mismatch\r\n    CanvasKitInit https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:115\r\n    concat https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:44\r\n    X https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34720\r\n    lp https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34564\r\n    my https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34454\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34697\r\n    b98 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1162\r\n    axk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34685\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34999\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    arj https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35007\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34985\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35158\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axS https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35161\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35150\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36905\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axP https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36907\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36897\r\n    aps https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88120\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81570\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:93083\r\n    aeF https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81560\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    Se https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89022\r\n    Sd https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89026\r\n    YK https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89011\r\n    adB https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88987\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3433\r\n    p8 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1095\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36322\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n    P https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7441\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36307\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36896\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88967\r\n    Kk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88959\r\n    ad7 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:92863\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3433\r\n    Nf https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96172\r\n    cO https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96431\r\n    H https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96132\r\n    KI https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:75633\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:104706\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84074\r\n    a5 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41473\r\n    bgE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:22474\r\n    Ru https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84023\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84059\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84046\r\n    aze https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84038\r\n    RL https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65110\r\n    KO https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65101\r\n    GN https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65099\r\n    aeJ https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65087\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    rA https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1098\r\n    aw4 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37068\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3435\r\n    qm https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37114\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37342\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37318\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37117\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n[main.dart.js:3298:19](https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22)\r\nWEBGL_debug_renderer_info is deprecated in Firefox and will be removed. Please use RENDERER. [canvaskit.js:14:383](https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js)\r\nUncaught : RuntimeError: index out of bounds\r\n    CanvasKitInit https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:115\r\n    eb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34704\r\n    lp https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34563\r\n    my https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34454\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34697\r\n    b98 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1162\r\n    axk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34685\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34999\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    arj https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35007\r\n    wH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:34985\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35158\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axS https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35161\r\n    Ee https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:35150\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36905\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4660\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41933\r\n    q https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:4646\r\n    axP https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36907\r\n    Ec https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36897\r\n    aps https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88120\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81570\r\n    Kb https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:93083\r\n    aeF https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:81560\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    Se https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89022\r\n    Sd https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89026\r\n    YK https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89011\r\n    adB https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88987\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3433\r\n    p8 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1095\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36322\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n    P https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7441\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36307\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36896\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88967\r\n    us https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88942\r\n    amj https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89099\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    Se https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89022\r\n    $2 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:89060\r\n    a5 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:41473\r\n    hk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:205\r\n    YH https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88997\r\n    ad5 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88983\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    rA https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1098\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36319\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n    P https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7441\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36307\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:36896\r\n    lE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88967\r\n    Kk https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:88959\r\n    ad7 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:92863\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3433\r\n    Nf https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96172\r\n    cO https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96431\r\n    H https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:96132\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:56096\r\n    bgE https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:22502\r\n    Ru https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84023\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84059\r\n    $0 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84046\r\n    aze https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:84038\r\n    RL https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65110\r\n    KO https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65101\r\n    GN https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65099\r\n    aeJ https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:65087\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3434\r\n    rA https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:1098\r\n    aw4 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37068\r\n    bdt https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3435\r\n    qm https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37114\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37342\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37318\r\n    $1 https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:37117\r\n    bhl https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:3260\r\n    b2Z https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:5789\r\n    blC https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7433\r\n    s https:\/\/easywear.app:10000\/main.dart.js?1.4.9b22:7429\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nPS C:\\Users\\Felix\\Desktop\\EasyWear\\easywear> flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u221a] Flutter (Channel stable, 3.19.2, on Microsoft Windows [Version 10.0.22631.3155], locale en-DE)\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n[\u221a] Chrome - develop for the web\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.5.4)\r\n[\u221a] Android Studio (version 2022.1)\r\n[\u221a] IntelliJ IDEA Ultimate Edition (version 2023.1)\r\n[\u221a] Connected device (3 available)\r\n[\u221a] Network resources\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @leeflix, can you provide a complete minimal reproducible code sample so that we can investigate this issue? \r\n\r\nIf not, could you try running your app in profile\/debug mode to see if the issue occurs and try to get the unminified stack trace for us? \r\n\r\nAlso, did you start experiencing this issue recently? ","hi @danagbemava-nc i sadly cannot provide a complete minimal reproducible code sample because i don't even know where the error is coming from and the app is quite big.\r\n\r\ni haven't tried firefox in a long time. so i am not sure if thats the reason i experienced that recently\r\n\r\nunminified error:\r\n```\r\nUncaught (in promise) Error: Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/canvaskit\/embedded_views.dart:623:12\r\n!_overlays.containsKey(viewId)\r\nis not true\r\n    DartError dart_sdk.js:14011\r\n    throw_ errors.dart:297\r\n    assertFailed errors.dart:38\r\n    _initializeOverlay embedded_views.dart:623\r\n    dartx.forEach js_array.dart:220\r\n    _updateOverlays embedded_views.dart:558\r\n    submitFrame embedded_views.dart:356\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    submitFrame embedded_views.dart:351\r\n    draw rasterizer.dart:54\r\n    _async async_patch.dart:45\r\n    runUnary zone.dart:1661\r\n    handleValue future_impl.dart:162\r\n    handleValueCallback future_impl.dart:838\r\n    _propagateToListeners future_impl.dart:867\r\n    _completeWithValue future_impl.dart:643\r\n    load__dart_sdk\/async._Future$<\/<\/< future_impl.dart:713\r\n    _microtaskLoop schedule_microtask.dart:40\r\n    _startMicrotaskLoop schedule_microtask.dart:49\r\n    _scheduleImmediateWithPromise async_patch.dart:181\r\n    promise callback*_scheduleImmediateWithPromise async_patch.dart:179\r\n    _scheduleImmediate async_patch.dart:151\r\n    _scheduleAsyncCallback schedule_microtask.dart:69\r\n    _rootScheduleMicrotask zone.dart:1466\r\n    scheduleMicrotask zone.dart:1681\r\n    _asyncCompleteWithValue future_impl.dart:712\r\n    _asyncComplete future_impl.dart:672\r\n    complete future_impl.dart:44\r\n    success js_util_patch.dart:483\r\n    promise callback*promiseToFuture js_util_patch.dart:495\r\n    createImageBitmap dom.dart:217\r\n    rasterizeToCanvas surface.dart:113\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas surface.dart:99\r\n    rasterizeToCanvas rasterizer.dart:23\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas rasterizer.dart:21\r\n    draw rasterizer.dart:51\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    draw rasterizer.dart:32\r\n    renderScene renderer.dart:415\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    renderScene renderer.dart:400\r\n    render platform_dispatcher.dart:777\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    render platform_dispatcher.dart:758\r\n    render window.dart:93\r\n    compositeFrame view.dart:256\r\n    drawFrame\r\n```","Hi @leeflix, what version of firefox are you using and does this issue occur with the counter app? Do you use any platform-views in your app? ","I got the same issue \/ error in my application. I have an almost blank page with a scaffold \/w navbar and a video using video_player package + custom UI created in a stack widget.\r\n\r\nApplication is \"blink\" white + are not responsive to any input at all.\r\n\r\nHere are the errors from FF (they are repeating at a high rate, not always in the same order):\r\n\r\n> Uncaught : RuntimeError: index out of bounds\r\n    CanvasKitInit https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:115\r\n    cQ https:\/\/[url-removed]\/main.dart.js:38457\r\n    i7 https:\/\/[url-removed]\/main.dart.js:38283\r\n    mh https:\/\/[url-removed]\/main.dart.js:38174\r\n    $0 https:\/\/[url-removed]\/main.dart.js:38450\r\n    aZQ https:\/\/[url-removed]\/main.dart.js:2322\r\n    aNI https:\/\/[url-removed]\/main.dart.js:38438\r\n    Az https:\/\/[url-removed]\/main.dart.js:38823\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aH1 https:\/\/[url-removed]\/main.dart.js:38831\r\n    Az https:\/\/[url-removed]\/main.dart.js:38809\r\n    ue https:\/\/[url-removed]\/main.dart.js:38988\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aOk https:\/\/[url-removed]\/main.dart.js:38991\r\n    ue https:\/\/[url-removed]\/main.dart.js:38980\r\n    Iv https:\/\/[url-removed]\/main.dart.js:44846\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aOi https:\/\/[url-removed]\/main.dart.js:44848\r\n    Iv https:\/\/[url-removed]\/main.dart.js:44838\r\n    aEQ https:\/\/[url-removed]\/main.dart.js:87360\r\n    Qp https:\/\/[url-removed]\/main.dart.js:80635\r\n    Qp https:\/\/[url-removed]\/main.dart.js:92348\r\n    arX https:\/\/[url-removed]\/main.dart.js:80625\r\n    bns https:\/\/[url-removed]\/main.dart.js:5763\r\n    a_3 https:\/\/[url-removed]\/main.dart.js:88262\r\n    a_2 https:\/\/[url-removed]\/main.dart.js:88266\r\n    a7a https:\/\/[url-removed]\/main.dart.js:88251\r\n    ar_ https:\/\/[url-removed]\/main.dart.js:88227\r\n    bns https:\/\/[url-removed]\/main.dart.js:5762\r\n    qL https:\/\/[url-removed]\/main.dart.js:2255\r\n    $1 https:\/\/[url-removed]\/main.dart.js:44244\r\n    b95 https:\/\/[url-removed]\/main.dart.js:5589\r\n    b7a https:\/\/[url-removed]\/main.dart.js:8303\r\n    bxb https:\/\/[url-removed]\/main.dart.js:9772\r\n    s https:\/\/[url-removed]\/main.dart.js:9768\r\nmain.dart.js:5627:19\r\n\r\n> Uncaught : Bad state: PictureRecorder is not recording\r\n    d https:\/\/[url-removed]\/main.dart.js:5627\r\n    tA https:\/\/[url-removed]\/main.dart.js:38778\r\n    Ds https:\/\/[url-removed]\/main.dart.js:37660\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    af8 https:\/\/[url-removed]\/main.dart.js:37704\r\n    Ds https:\/\/[url-removed]\/main.dart.js:37647\r\n    Az https:\/\/[url-removed]\/main.dart.js:38829\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    $1 https:\/\/[url-removed]\/main.dart.js:51659\r\n    aOO https:\/\/[url-removed]\/main.dart.js:52720\r\n    Tb https:\/\/[url-removed]\/main.dart.js:52723\r\n    $0 https:\/\/[url-removed]\/main.dart.js:52094\r\n    F6 https:\/\/[url-removed]\/main.dart.js:7147\r\n    pw https:\/\/[url-removed]\/main.dart.js:52020\r\n    cJ https:\/\/[url-removed]\/main.dart.js:51654\r\n    E https:\/\/[url-removed]\/main.dart.js:6995\r\n    C5 https:\/\/[url-removed]\/main.dart.js:38807\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    $1 https:\/\/[url-removed]\/main.dart.js:51659\r\n    aOO https:\/\/[url-removed]\/main.dart.js:52720\r\n    Tb https:\/\/[url-removed]\/main.dart.js:52723\r\n    $0 https:\/\/[url-removed]\/main.dart.js:52094\r\n    F6 https:\/\/[url-removed]\/main.dart.js:7147\r\n    pw https:\/\/[url-removed]\/main.dart.js:52020\r\n    cJ https:\/\/[url-removed]\/main.dart.js:51654\r\n    E https:\/\/[url-removed]\/main.dart.js:6995\r\n    Iq https:\/\/[url-removed]\/main.dart.js:39121\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    $1 https:\/\/[url-removed]\/main.dart.js:51659\r\n    aOO https:\/\/[url-removed]\/main.dart.js:52720\r\n    Tb https:\/\/[url-removed]\/main.dart.js:52723\r\n    $0 https:\/\/[url-removed]\/main.dart.js:52094\r\n    F6 https:\/\/[url-removed]\/main.dart.js:7147\r\n    pw https:\/\/[url-removed]\/main.dart.js:52020\r\n    $0 https:\/\/[url-removed]\/main.dart.js:52065\r\n    byI https:\/\/[url-removed]\/main.dart.js:7179\r\n    bzb https:\/\/[url-removed]\/main.dart.js:7181\r\n    $1 https:\/\/[url-removed]\/main.dart.js:51609\r\nmain.dart.js:5627:19\r\n\r\n> Uncaught : RuntimeError: indirect call to null\r\n    CanvasKitInit https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:115\r\n    concat https:\/\/www.gstatic.com\/flutter-canvaskit\/04817c99c9fd4956f27505204f7e344335810aed\/canvaskit.js:44\r\n    a6 https:\/\/[url-removed]\/main.dart.js:38473\r\n    i7 https:\/\/[url-removed]\/main.dart.js:38284\r\n    mh https:\/\/[url-removed]\/main.dart.js:38174\r\n    $0 https:\/\/[url-removed]\/main.dart.js:38450\r\n    aZQ https:\/\/[url-removed]\/main.dart.js:2322\r\n    aNI https:\/\/[url-removed]\/main.dart.js:38438\r\n    Az https:\/\/[url-removed]\/main.dart.js:38823\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aH1 https:\/\/[url-removed]\/main.dart.js:38831\r\n    Az https:\/\/[url-removed]\/main.dart.js:38809\r\n    ue https:\/\/[url-removed]\/main.dart.js:38988\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aOk https:\/\/[url-removed]\/main.dart.js:38991\r\n    ue https:\/\/[url-removed]\/main.dart.js:38980\r\n    Iv https:\/\/[url-removed]\/main.dart.js:44846\r\n    s https:\/\/[url-removed]\/main.dart.js:7005\r\n    $2 https:\/\/[url-removed]\/main.dart.js:51665\r\n    F https:\/\/[url-removed]\/main.dart.js:6991\r\n    aOi https:\/\/[url-removed]\/main.dart.js:44848\r\n    Iv https:\/\/[url-removed]\/main.dart.js:44838\r\n    aEQ https:\/\/[url-removed]\/main.dart.js:87360\r\n    Qp https:\/\/[url-removed]\/main.dart.js:80635\r\n    Qp https:\/\/[url-removed]\/main.dart.js:92348\r\n    arX https:\/\/[url-removed]\/main.dart.js:80625\r\n    bns https:\/\/[url-removed]\/main.dart.js:5763\r\n    a_3 https:\/\/[url-removed]\/main.dart.js:88262\r\n    a_2 https:\/\/[url-removed]\/main.dart.js:88266\r\n    a7a https:\/\/[url-removed]\/main.dart.js:88251\r\n    ar_ https:\/\/[url-removed]\/main.dart.js:88227\r\n    bns https:\/\/[url-removed]\/main.dart.js:5762\r\n    qL https:\/\/[url-removed]\/main.dart.js:2255\r\n    $1 https:\/\/[url-removed]\/main.dart.js:44244\r\n    b95 https:\/\/[url-removed]\/main.dart.js:5589\r\n    b7a https:\/\/[url-removed]\/main.dart.js:8303\r\n    bxb https:\/\/[url-removed]\/main.dart.js:9772\r\n    s https:\/\/[url-removed]\/main.dart.js:9768\r\nmain.dart.js:5627:19\r\n\r\n\r\n","@danagbemava-nc\r\n\r\nI am using Firefox 123.0.1 (latest version)\r\n\r\nno it does not occur with the counter app\r\n\r\nwe are not using platform views as far as i am aware","Hi @bazeport-jhe, can you provide a minimal reproducible code sample so we can properly investigate this?","Hi @danagbemava-nc the following code reproduces the error locally, started application with `flutter run --release -d web-server` as just `flutter run` produces some other unrelated errors that I think is related to Firefox not being supported target for development\r\n\r\nAlso I discovered this issue https:\/\/github.com\/flutter\/flutter\/issues\/144731#issue-2172553922 after this one yesterday and they might be related.\r\n\r\n`video_player` was added with `flutter pub add video_player`\r\n\r\n```import 'dart:async';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:video_player\/video_player.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  \/\/ This widget is the root of your application.\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  bool showControls = false;\r\n  Timer? _hideControlsTimer;\r\n\r\n  late final VideoPlayerController _controller;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n\r\n    _controller = VideoPlayerController.networkUrl(\r\n      Uri.parse(\r\n          'http:\/\/commondatastorage.googleapis.com\/gtv-videos-bucket\/sample\/BigBuckBunny.mp4'),\r\n    )..initialize().then((_) {\r\n        setState(() {});\r\n      });\r\n  }\r\n\r\n  void _cancelAndRestartHideControlsTimer() {\r\n    _hideControlsTimer?.cancel();\r\n    _startHideControlsTimer();\r\n\r\n    setState(() {\r\n      showControls = true;\r\n    });\r\n  }\r\n\r\n  void _startHideControlsTimer() {\r\n    _hideControlsTimer = Timer(const Duration(seconds: 6), () {\r\n      setState(() {\r\n        showControls = false;\r\n      });\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\r\n        title: const Text(\"Blink\"),\r\n      ),\r\n      body: Center(\r\n        child: MouseRegion(\r\n          onHover: (_) {\r\n            _cancelAndRestartHideControlsTimer();\r\n          },\r\n          child: Container(\r\n            color: Colors.red,\r\n            width: 1280,\r\n            height: 720,\r\n            child: Stack(\r\n              children: [\r\n                VideoPlayer(_controller),\r\n                if (showControls)\r\n                  Positioned(\r\n                    left: 16,\r\n                    bottom: 16,\r\n                    child: ElevatedButton(\r\n                      onPressed: () {\r\n                        if (_controller.value.isPlaying) {\r\n                          _controller.pause();\r\n                        } else {\r\n                          _controller.play();\r\n                        }\r\n                      },\r\n                      child: const Text(\"Play\/pause\"),\r\n                    ),\r\n                  )\r\n              ],\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```","Upgraded from 3.16.0 to 3.19.3 and are now experiencing the same issue.\r\nI don't know exactly what version in between caused this, but definitely seems like a regression.\r\n\r\nUPDATE\r\n\r\nSo just tested these versions, and it starts happening in 3.19.0\r\nIn 3.16.9 which is the latest version before 3.19 there are no issues.\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/6707330\/1bc88c5d-3da1-4c57-b46d-95a7dc213a5a)\r\n","Also experiencing this issue for Firefox 123.0.1 (64-bit) on macOS Sonoma 14.3.1, and I've got reports that it happens on Firefox\/Windows too. It works fine on other browsers. I have the same experience that this issue start happening after the Flutter 3.19 upgrade.","I experience the issue on Firefox 123.0.1 + Windows 11. Firefox Mobile works fine for me, so seems to be just the desktop version.","Hi @bazeport-jhe, I tested your code sample on stable and I was able to reproduce it but it seems to work fine on the master channel. Can you confirm if this is the case for you as well?","@danagbemava-nc Yeah, master channel seems to be working fine for me too.","Seems to work okay on the beta channel as well.\r\nI still experience some glitching when I for example open a drawer and the blackout fades in, instead of fading nicely it blinks\/glitches a bit.","Problem with firefox exists. No problems with Chrome and Safari.\r\n\r\nAny usage of overlayed HtmlElement seems to be cause of errors (video, iframe, text field etc.).\r\n\r\n### Versions\r\n\r\nFirefox: 123.0.1\r\nFlutter 3.19.3 \u2022 channel stable \u2022 https:\/\/github.com\/flutter\/flutter.git\r\nFramework \u2022 revision ba39319843 (8 days ago) \u2022 2024-03-07 15:22:21 -0600\r\nEngine \u2022 revision 2e4ba9c6fb\r\nTools \u2022 Dart 3.3.1 \u2022 DevTools 2.31.1\r\n\r\n### Steps to reproduce\r\n\r\n- create new project\r\n- run code\r\n- resize firefox view\r\n\r\n### Code\r\n\r\n```dart\r\nimport 'dart:html';\r\nimport 'dart:ui_web';\r\n\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  platformViewRegistry.registerViewFactory(\r\n    'html-test',\r\n        (int viewId) => IFrameElement()\r\n      ..id = 'html-test'\r\n      ..src = 'https:\/\/flutter.dev'\r\n      ..style.width = '100%'\r\n      ..style.height = '100%'\r\n      ..style.border = 'none'\r\n      ..allowFullscreen = true\r\n      ..allow = 'autoplay; fullscreen',\r\n  );\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) => const MaterialApp(\r\n        title: 'Html Element Test',\r\n        home: MyHomePage(),\r\n      );\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key});\r\n\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  @override\r\n  Widget build(BuildContext context) => const Scaffold(\r\n        body: Column(\r\n          children: <Widget>[\r\n            HtmlElementWidget(),\r\n          ],\r\n        ),\r\n      );\r\n}\r\n\r\nclass HtmlElementWidget extends StatelessWidget {\r\n  const HtmlElementWidget({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) => const AspectRatio(\r\n        aspectRatio: 16 \/ 9,\r\n        child: HtmlElementView(viewType: 'html-test'),\r\n      );\r\n}\r\n```\r\n\r\n### Result\r\nflashes, freezes, no-redraw, firefox completely unresponsive\r\n\r\n### Errors\r\n```\r\nUncaught (in promise) Error: Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/canvaskit\/embedded_views.dart:574:12\r\n_overlays.length == viewsNeedingOverlays.length\r\nis not true\r\n    DartError dart_sdk.js:14011\r\n    throw_ errors.dart:297\r\n    assertFailed errors.dart:38\r\n    _updateOverlays embedded_views.dart:574\r\n    submitFrame embedded_views.dart:356\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    submitFrame embedded_views.dart:351\r\n    draw rasterizer.dart:54\r\n    _async async_patch.dart:45\r\n    runUnary zone.dart:1661\r\n    handleValue future_impl.dart:162\r\n    handleValueCallback future_impl.dart:838\r\n    _propagateToListeners future_impl.dart:867\r\n    _completeWithValue future_impl.dart:643\r\n    load__dart_sdk\/async._Future$<\/<\/< future_impl.dart:713\r\n    _microtaskLoop schedule_microtask.dart:40\r\n    _startMicrotaskLoop schedule_microtask.dart:49\r\n    _scheduleImmediateWithPromise async_patch.dart:181\r\n    promise callback*_scheduleImmediateWithPromise async_patch.dart:179\r\n    _scheduleImmediate async_patch.dart:151\r\n    _scheduleAsyncCallback schedule_microtask.dart:69\r\n    _rootScheduleMicrotask zone.dart:1466\r\n    scheduleMicrotask zone.dart:1681\r\n    _asyncCompleteWithValue future_impl.dart:712\r\n    _asyncComplete future_impl.dart:672\r\n    complete future_impl.dart:44\r\n    success js_util_patch.dart:483\r\n    promise callback*promiseToFuture js_util_patch.dart:495\r\n    createImageBitmap dom.dart:217\r\n    rasterizeToCanvas surface.dart:113\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas surface.dart:99\r\n    rasterizeToCanvas rasterizer.dart:23\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas rasterizer.dart:21\r\n    draw rasterizer.dart:51\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    draw rasterizer.dart:32\r\n    renderScene renderer.dart:415\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    renderScene renderer.dart:400\r\n    render platform_dispatcher.dart:777\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    render platform_dispatcher.dart:758\r\n    render window.dart:93\r\n    compositeFrame view.dart:256\r\n    drawFrame binding.dart:587\r\n```\r\n```\r\nUncaught (in promise) RuntimeError: indirect call signature mismatch\r\n    CanvasKitInit canvaskit.js:115\r\n    concat canvaskit.js:44\r\n    callMethod$ js_util_patch.dart:110\r\n    SkCanvasExtension$124concat canvaskit_api.dart:2588\r\n    transform canvas.dart:306\r\n    transform n_way_canvas.dart:65\r\n    paint layer.dart:366\r\n    paintChildren layer.dart:138\r\n    paint layer.dart:151\r\n    paint layer_tree.dart:49\r\n    raster layer_tree.dart:92\r\n    timeAction profiler.dart:41\r\n    raster layer_tree.dart:91\r\n    draw rasterizer.dart:48\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    draw rasterizer.dart:32\r\n    renderScene renderer.dart:415\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    renderScene renderer.dart:400\r\n    render platform_dispatcher.dart:777\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    render platform_dispatcher.dart:758\r\n    render window.dart:93\r\n    compositeFrame view.dart:256\r\n    drawFrame binding.dart:587\r\n    drawFrame binding.dart:991\r\n    _handlePersistentFrameCallback binding.dart:448\r\n    _invokeFrameCallback binding.dart:1386\r\n    handleDrawFrame binding.dart:1311\r\n    _handleDrawFrame binding.dart:1169\r\n    invoke platform_dispatcher.dart:1346\r\n    invokeOnDrawFrame platform_dispatcher.dart:260\r\n    scheduleFrameCallback initialization.dart:185\r\n    _checkAndCall operations.dart:550\r\n    dcall operations.dart:555\r\n    ret dart_sdk.js:71929\r\n    callMethod$ js_util_patch.dart:110\r\n    DomWindowExtension$124requestAnimationFrame dom.dart:141\r\n    scheduleFrameCallback initialization.dart:154\r\n    scheduleFrame platform_dispatcher.dart:730\r\n    scheduleFrame binding.dart:936\r\n    ensureVisualUpdate binding.dart:889\r\n    requestVisualUpdate binding.dart:769\r\n    requestVisualUpdate object.dart:964\r\n    markNeedsLayout object.dart:2308\r\n    set configuration view.dart:116\r\n    handleMetricsChanged binding.dart:367\r\n    handleMetricsChanged binding.dart:633\r\n    invoke platform_dispatcher.dart:1346\r\n    invokeOnMetricsChanged platform_dispatcher.dart:206\r\n    _didResize window.dart:202\r\n    runUnaryGuarded zone.dart:1594\r\n    _sendData stream_impl.dart:339\r\n    perform stream_impl.dart:515\r\n    handleNext stream_impl.dart:620\r\n    schedule stream_impl.dart:591\r\n    _microtaskLoop schedule_microtask.dart:40\r\n    _startMicrotaskLoop schedule_microtask.dart:49\r\n    _scheduleImmediateWithPromise async_patch.dart:181\r\n    promise callback*_scheduleImmediateWithPromise async_patch.dart:179\r\n    _scheduleImmediate async_patch.dart:151\r\n    _scheduleAsyncCallback schedule_microtask.dart:69\r\n    _rootScheduleMicrotask zone.dart:1466\r\n    scheduleMicrotask schedule_microtask.dart:134\r\n    schedule stream_impl.dart:587\r\n    _addPending stream_impl.dart:326\r\n    _sendData broadcast_stream_controller.dart:418\r\n    add broadcast_stream_controller.dart:244\r\n    _onVisualViewportResize full_page_dimensions_provider.dart:46\r\n    _checkAndCall operations.dart:550\r\n    dcall operations.dart:555\r\n    ret dart_sdk.js:71929\r\n    callMethod$ js_util_patch.dart:110\r\n    new dom.dart:3033\r\n    new full_page_dimensions_provider.dart:27\r\n    create dimensions_provider.dart:31\r\n    __ window.dart:42\r\n    __ window.dart:257\r\n    implicit window.dart:54\r\n    ensureImplicitViewInitialized window.dart:636\r\n    initializeEngineUi initialization.dart:225\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    initializeEngineUi initialization.dart:206\r\n    runApp initialization.dart:39\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    runApp initialization.dart:35\r\n    _checkAndCall operations.dart:550\r\n    callMethod operations.dart:620\r\n    dsend operations.dart:624\r\n    runApp app_bootstrap.dart:57\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    runApp app_bootstrap.dart:56\r\n    runApp js_loader.dart:74\r\n```\r\n```\r\nUncaught (in promise) Error: Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/canvaskit\/embedded_views.dart:623:12\r\n!_overlays.containsKey(viewId)\r\nis not true\r\n    DartError dart_sdk.js:14011\r\n    throw_ errors.dart:297\r\n    assertFailed errors.dart:38\r\n    _initializeOverlay embedded_views.dart:623\r\n    dartx.forEach js_array.dart:220\r\n    _updateOverlays embedded_views.dart:558\r\n    submitFrame embedded_views.dart:356\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    submitFrame embedded_views.dart:351\r\n    draw rasterizer.dart:54\r\n    _async async_patch.dart:45\r\n    runUnary zone.dart:1661\r\n    handleValue future_impl.dart:162\r\n    handleValueCallback future_impl.dart:838\r\n    _propagateToListeners future_impl.dart:867\r\n    _completeWithValue future_impl.dart:643\r\n    load__dart_sdk\/async._Future$<\/<\/< future_impl.dart:713\r\n    _microtaskLoop schedule_microtask.dart:40\r\n    _startMicrotaskLoop schedule_microtask.dart:49\r\n    _scheduleImmediateWithPromise async_patch.dart:181\r\n    promise callback*_scheduleImmediateWithPromise async_patch.dart:179\r\n    _scheduleImmediate async_patch.dart:151\r\n    _scheduleAsyncCallback schedule_microtask.dart:69\r\n    _rootScheduleMicrotask zone.dart:1466\r\n    scheduleMicrotask zone.dart:1681\r\n    _asyncCompleteWithValue future_impl.dart:712\r\n    _asyncComplete future_impl.dart:672\r\n    complete future_impl.dart:44\r\n    success js_util_patch.dart:483\r\n    promise callback*promiseToFuture js_util_patch.dart:495\r\n    createImageBitmap dom.dart:217\r\n    rasterizeToCanvas surface.dart:113\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas surface.dart:99\r\n    rasterizeToCanvas rasterizer.dart:23\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    rasterizeToCanvas rasterizer.dart:21\r\n    draw rasterizer.dart:51\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    draw rasterizer.dart:32\r\n    renderScene renderer.dart:415\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    renderScene renderer.dart:400\r\n    render platform_dispatcher.dart:777\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    render platform_dispatcher.dart:758\r\n    render window.dart:93\r\n    compositeFrame view.dart:256\r\n    drawFrame binding.dart:587\r\n```\r\n```\r\nUncaught (in promise) RuntimeError: indirect call to null\r\n    CanvasKitInit canvaskit.js:115\r\n    concat canvaskit.js:44\r\n    callMethod$ js_util_patch.dart:110\r\n    SkCanvasExtension$124concat canvaskit_api.dart:2588\r\n    transform canvas.dart:306\r\n    transform n_way_canvas.dart:65\r\n    paint layer.dart:366\r\n    paintChildren layer.dart:138\r\n    paint layer.dart:151\r\n    paint layer_tree.dart:49\r\n    raster layer_tree.dart:92\r\n    timeAction profiler.dart:41\r\n    raster layer_tree.dart:91\r\n    draw rasterizer.dart:48\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    draw rasterizer.dart:32\r\n    renderScene renderer.dart:415\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    renderScene renderer.dart:400\r\n    render platform_dispatcher.dart:777\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    render platform_dispatcher.dart:758\r\n    render window.dart:93\r\n    compositeFrame view.dart:256\r\n    drawFrame binding.dart:587\r\n    drawFrame binding.dart:991\r\n    _handlePersistentFrameCallback binding.dart:448\r\n    _invokeFrameCallback binding.dart:1386\r\n    handleDrawFrame binding.dart:1311\r\n    _handleDrawFrame binding.dart:1169\r\n    invoke platform_dispatcher.dart:1346\r\n    invokeOnDrawFrame platform_dispatcher.dart:260\r\n    scheduleFrameCallback initialization.dart:185\r\n    _checkAndCall operations.dart:550\r\n    dcall operations.dart:555\r\n    ret dart_sdk.js:71929\r\n    callMethod$ js_util_patch.dart:110\r\n    DomWindowExtension$124requestAnimationFrame dom.dart:141\r\n    scheduleFrameCallback initialization.dart:154\r\n    scheduleFrame platform_dispatcher.dart:730\r\n    scheduleFrame binding.dart:936\r\n    ensureVisualUpdate binding.dart:889\r\n    requestVisualUpdate binding.dart:769\r\n    requestVisualUpdate object.dart:964\r\n    markNeedsLayout object.dart:2308\r\n    set configuration view.dart:116\r\n    handleMetricsChanged binding.dart:367\r\n    handleMetricsChanged binding.dart:633\r\n    invoke platform_dispatcher.dart:1346\r\n    invokeOnMetricsChanged platform_dispatcher.dart:206\r\n    _didResize window.dart:202\r\n    runUnaryGuarded zone.dart:1594\r\n    _sendData stream_impl.dart:339\r\n    perform stream_impl.dart:515\r\n    handleNext stream_impl.dart:620\r\n    schedule stream_impl.dart:591\r\n    _microtaskLoop schedule_microtask.dart:40\r\n    _startMicrotaskLoop schedule_microtask.dart:49\r\n    _scheduleImmediateWithPromise async_patch.dart:181\r\n    promise callback*_scheduleImmediateWithPromise async_patch.dart:179\r\n    _scheduleImmediate async_patch.dart:151\r\n    _scheduleAsyncCallback schedule_microtask.dart:69\r\n    _rootScheduleMicrotask zone.dart:1466\r\n    scheduleMicrotask schedule_microtask.dart:134\r\n    schedule stream_impl.dart:587\r\n    _addPending stream_impl.dart:326\r\n    _sendData broadcast_stream_controller.dart:418\r\n    add broadcast_stream_controller.dart:244\r\n    _onVisualViewportResize full_page_dimensions_provider.dart:46\r\n    _checkAndCall operations.dart:550\r\n    dcall operations.dart:555\r\n    ret dart_sdk.js:71929\r\n    callMethod$ js_util_patch.dart:110\r\n    new dom.dart:3033\r\n    new full_page_dimensions_provider.dart:27\r\n    create dimensions_provider.dart:31\r\n    __ window.dart:42\r\n    __ window.dart:257\r\n    implicit window.dart:54\r\n    ensureImplicitViewInitialized window.dart:636\r\n    initializeEngineUi initialization.dart:225\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    initializeEngineUi initialization.dart:206\r\n    runApp initialization.dart:39\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    runApp initialization.dart:35\r\n    _checkAndCall operations.dart:550\r\n    callMethod operations.dart:620\r\n    dsend operations.dart:624\r\n    runApp app_bootstrap.dart:57\r\n    runBody async_patch.dart:84\r\n    _async async_patch.dart:127\r\n    runApp app_bootstrap.dart:56\r\n    runApp js_loader.dart:74\r\n```","Hi, any news of this issues, I'm also facing the same issue with video_flutter. It seems coming from canvaskit maximum overlay but I'm not sure, I still get this error on Firefox, with flutter 1.19 ","when can we expect this to be fixed?","Hi @leeflix, can you try the beta or master channel to see if you still experience this issue with that version of flutter? \r\n\r\nYou can switch to the beta or master channel by running \r\n\r\n```\r\nflutter channel <channel_name>\r\nflutter upgrade\r\n```","I experience this issue too\r\n\r\n<details> \r\n  <summary>Flutter doctor<\/summary>\r\n  \r\n```\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Microsoft Windows [Version 10.0.22631.3155], locale pl-PL)\r\n    \u2022 Flutter version 3.19.3 on channel stable at C:\\tools\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (13 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\Gieted\\AppData\\Local\\Android\\sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for more details.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 CHROME_EXECUTABLE = C:\\Program Files\\Chromium\\Application\\chrome.exe\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.3)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.4.33205.214\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[!] Android Studio (not installed)\r\n    \u2022 Android Studio not found; download from https:\/\/developer.android.com\/studio\/index.html\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3)\r\n    \u2022 IntelliJ at C:\\Users\\Gieted\\AppData\\Local\\Programs\\IntelliJ IDEA Ultimate\r\n    \u2022 Flutter plugin version 78.3.1\r\n    \u2022 Dart plugin version 233.14888\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.22631.3155]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 unknown\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.92\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n<\/details>\r\n\r\nIt for sure is a regression, this wasn't happening in Flutter 3.16.9","Hi @danagbemava-nc, can we expect the fix in the next stable release or will this be in beta for a while?","Hi @coder-with-a-bushido, it will most likely be in the next stable version, however, I can't speak to the next hotfix. If we knew the commit that fixed the issue, we could request a cherry-pick into the next stable hotfix","I am also seeing this same issue, in any Flutter project using the video_player plugin.  Indeed this example in the documentation exhibits the problem: https:\/\/docs.flutter.dev\/cookbook\/plugins\/play-video\r\n\r\nTrigger: CanvasKit renderer, video_player, Firefox, resize the window and strange things start happening (freezing or random resizing of elements).\r\n\r\nIn the Firefox console I'm seeing similar errors as above:\r\n\r\n```\r\ncanvaskit.wasm:251821:1\r\nUncaught (in promise) RuntimeError: indirect call signature mismatch\r\n    CanvasKitInit canvaskit.js:115\r\n\r\ncanvaskit.wasm:1085913:1\r\nUncaught (in promise) RuntimeError: index out of bounds\r\n    CanvasKitInit canvaskit.js:115\r\n\r\nclient.js:26092:34\r\nUncaught (in promise) RuntimeError: indirect call to null\r\n    CanvasKitInit canvaskit.js:115\r\n\r\ncanvaskit.wasm:1085913:1\r\nUncaught (in promise) Error: Assertion failed: org-dartlang-sdk:\/\/\/lib\/_engine\/engine\/canvaskit\/embedded_views.dart:574:12\r\n_overlays.length == viewsNeedingOverlays.length\r\nis not true\r\n```\r\n\r\nAll works well in Chrome, and no such errors in the console.  The HTML renderer also works ok for the video_player (but that renderer is currently unusable for us because of another open issue in the Facebook Android app browser).","(And I can confirm that switching from \"stable\" to \"master\" fixes the problems for me, both in that example app, and in the app I'm developing.)"],"labels":["waiting for customer response","in triage"]},{"title":"_DefaultTabControllerState should dispose TabContoller instances.","body":"Re-land the revert https:\/\/github.com\/flutter\/flutter\/pull\/144579\r\n\r\n- [x] Test cover functionality that was broken by dispose: https:\/\/github.com\/flutter\/flutter\/pull\/144627\r\n- [x] Instrument TabController: https:\/\/github.com\/flutter\/flutter\/pull\/144912\r\n- [ ] Re-land leak cleanup\r\n\r\n","comments":[],"labels":["framework","f: material design","P2","team-design","triaged-design","a: leak tracking"]},{"title":"hardware_keyboard bug","body":"### Steps to reproduce\n\nif i run the application sometimes when i use keyboard to type value it throws exception\n\n### Expected results\n\nsometime the same app runs smoothly\n\n### Actual results\n\nwhen i type something the exception is continously throwed in console\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\nC:\\Users\\muthu>flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u221a] Flutter (Channel stable, 3.16.8, on Microsoft Windows [Version 10.0.22631.3155], locale en-IN)\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n[\u221a] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u221a] Chrome - develop for the web\r\n[\u221a] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.9.0)\r\n[\u221a] Android Studio (version 2023.1)\r\n[\u221a] IntelliJ IDEA Community Edition (version 2023.3)\r\n[\u221a] VS Code (version 1.87.1)\r\n[\u221a] Connected device (3 available)\r\n[\u221a] Network resources\r\n\r\n\u2022 No issues found!","comments":["Please provide a complete minimal reproducible code sample along with steps to reproduce the issue so we can investigate this. \r\nPlease also provide a the error logs. \r\n\r\nAlso, try upgrading to the latest version of flutter to see if you still experience the issue. If you do, please provide the updated output of `flutter doctor -v` along with the minimal sample and error logs. \r\n\r\nThank you"],"labels":["waiting for customer response","in triage"]},{"title":"refactor `if` chains and `==` with enum values","body":"From the [Flutter repo style guide](https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#avoid-using-if-chains-or--or--with-enum-values):\r\n\r\n> ### Avoid using `if` chains or `?:` or `==` with enum values\r\n\r\n<br>\r\n\r\n#### Example (toggle_buttons.dart):\r\n\r\n```dart\r\n\/\/ using \"==\"\r\nbool _isFirstButton(int index, int length, TextDirection textDirection) {\r\n  return index == 0 && ((direction == Axis.horizontal && textDirection == TextDirection.ltr) ||\r\n    (direction == Axis.vertical && verticalDirection == VerticalDirection.down))\r\n    || index == length - 1 && ((direction == Axis.horizontal && textDirection == TextDirection.rtl) ||\r\n    (direction == Axis.vertical && verticalDirection == VerticalDirection.up));\r\n}\r\n\r\n\r\n\/\/ using a switch statement\r\nbool _isFirstButton(int index, int length, TextDirection textDirection) {\r\n  switch (direction) {\r\n    case Axis.horizontal:\r\n      return switch (textDirection) {\r\n        TextDirection.rtl => index == length - 1,\r\n        TextDirection.ltr => index == 0,\r\n      };\r\n    case Axis.vertical:\r\n      return switch (verticalDirection) {\r\n        VerticalDirection.up   => index == length - 1,\r\n        VerticalDirection.down => index == 0,\r\n      };\r\n  }\r\n}\r\n```\r\n\r\nPerforming this refactor would increase the total line length, but in my opinion the improved readability is worth it.","comments":[],"labels":["framework","c: proposal","P3","team-framework","triaged-framework"]},{"title":"Changing Flutter branches seems to make Dart-Code behave flakily","body":"I use VSCode when working on contributions to flutter\/flutter. In my typical daily workflow, I frequently switch what branch I'm working on. For example, I might test existing behavior on master. Then I switch back to my feature branch. Then I might switch to someone else's PR branch so that I can review their changes locally. Etc.\r\n\r\nI frequently find that this puts Dart-Code into a bad state. Either the Dart analyzer or the Flutter daemon may crash. Sometimes this happens quickly. Sometimes this doesn't happen until X minutes later when I try to navigate to a symbol definition. This nature of these issues make them difficult to pin down or repro.\r\n\r\nThis issue is tracking my on-going to effort to pin these down and get these filed appropriately. **If this issue goes stale without any activity, please close it.**\r\n\r\nMy acceptance criterion for this issue being resolved is this: I would like VSCode to gracefully handle any sort of `git switch` that I may do on my checkout of Flutter. At most, I should have to do reload my VSCode no more than once after switching commits\/branches.\r\n\r\n","comments":[],"labels":["P2","c: tech-debt","team-tool","triaged-tool"]},{"title":"[image_picker] XFile return null mimeType on macOS","body":"### Steps to reproduce\n\n1 run the code on macos\r\n2 pick a image\r\n3 check the console output\n\n### Expected results\n\nprint the image's mimeType\n\n### Actual results\n\nprint null\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:image_picker\/image_picker.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      title: 'Image Picker Demo',\r\n      home: MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  addPhoto() async {\r\n    final ImagePicker picker = ImagePicker();\r\n    final List<XFile> pickedFileList = await picker.pickMultiImage();\r\n    for (XFile element in pickedFileList) {\r\n      int length = await element.length();\r\n      debugPrint('${length}');\r\n      debugPrint('${element.mimeType}');\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: ElevatedButton(\r\n          onPressed: () {\r\n            addPhoto();\r\n          },\r\n          child: Text('pick')),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nflutter: 661970\r\nflutter: null\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.0, on macOS 14.3.1 23D60 darwin-arm64, locale zh-Hans-CN)\r\n    \u2022 Flutter version 3.19.0 on channel stable at \/Users\/cruvie\/Documents\/DevelopmentEnvironment\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision bae5e49bc2 (4 weeks ago), 2024-02-13 17:46:18 -0800\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 Pub download mirror https:\/\/pub.flutter-io.cn\r\n    \u2022 Flutter download mirror https:\/\/storage.flutter-io.cn\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/cruvie\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2717] Chrome - develop for the web (Cannot find Chrome executable at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n\r\n[!] Android Studio (not installed)\r\n    \u2022 Android Studio not found; download from https:\/\/developer.android.com\/studio\/index.html\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for detailed instructions).\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3.4)\r\n    \u2022 IntelliJ at \/Users\/cruvie\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 78.3.1\r\n    \u2022 Dart plugin version 233.13763.5\r\n\r\n[\u2713] VS Code (version 1.86.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (1 available)\r\n    \u2022 macOS (desktop) \u2022 macos \u2022 darwin-arm64 \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 3 categories.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["This is currently the intended behavior, as described in https:\/\/github.com\/flutter\/flutter\/issues\/93379\r\n\r\nWe could consider adding it here though, as we probably do have that information at the point where we receive the image, without having to specifically query it."],"labels":["platform-ios","platform-mac","p: image_picker","package","a: desktop","team-ecosystem","P3","triaged-ecosystem"]},{"title":"Feature: Add AnimatedList with separators","body":"This PR adds `AnimatedListSeparated`. A widget like an AnimatedList with animated separators. `animated_list_separated.0.dart` extends `animated_list.0.dart` to work with `AnimatedListSeparated`\r\n\r\nRelated issue: https:\/\/github.com\/flutter\/flutter\/issues\/48226\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [x] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":["I'm unsure about how to best handle `removeItem` und `removeAllItems`. If we want to reuse `_AnimatedScrollViewState`, we need to prevent users from using those, because they don't come with a parameter for building removed separators. Throwing an exception was the best I can could come up with. \r\n\r\nIs there a better way to do this? Would it be preferred to re-implement `_AnimatedScrollViewState` with separators?"],"labels":["framework","f: scrolling","d: api docs","d: examples"]},{"title":"Attempting to add a `git` dependency via `flutter pub add` fails","body":"### Steps to reproduce\r\n\r\n1. Attempt to add `syntax_highlight` as a dependency, but plot twist, a github hosted fork of the published version\r\n2. Read the documentation from `flutter pub add --help`\r\n3. Attempt to follow the path, and flail hard\r\n\r\n### Expected results\r\n\r\nAdded depency to `pubspec.yaml` that is corrected configured.\r\n\r\n### Actual results\r\n\r\nError messages. That I'm not understanding, given the context of my goals.\r\n\r\n### Code sample\r\n\r\nN\/A\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n```console\r\n$ flutter pub add 'syntax_highlight:{\"git\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight\",\"ref\":\"main\"}'\r\n  Using a naked argument for directory is deprecated and will stop working in a future Flutter release.\r\n\r\n  Use --directory instead.\r\nExpected to find project root in syntax_highlight:{\"git\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight\",\"ref\":\"main\"}.\r\n```\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n$ flutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.4 23E214 darwin-arm64, locale en)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/brettmorgan\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter\r\n    \u2022 Framework revision ba39319843 (3 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/brettmorgan\/Library\/Android\/sdk\r\n    \u2022 Platform android-34-ext8, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.0\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2022.3)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA CE.app\r\n    \u2022 Flutter plugin version 77.0.1\r\n    \u2022 Dart plugin version 233.13135.65\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 macOS (desktop) \u2022 macos  \u2022 darwin-arm64   \u2022 macOS 14.4 23E214 darwin-arm64\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Reproducible using the steps outlined above.\r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (4 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Pixel 7 (mobile)     \u2022 adb-28291FDH2001SA-5Lv71w._adb-tls-connect._tcp. \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E                        \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E                        \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                                            \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                                           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```\r\n[!] Flutter (Channel master, 3.21.0-2.0.pre.72, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-2.0.pre.72 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutters. Consider adding \/Users\/nexus\/dev\/sdks\/flutters\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutters. Consider adding \/Users\/nexus\/dev\/sdks\/flutters\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 087b15ae0d (8 hours ago), 2024-03-10 22:33:27 -0400\r\n    \u2022 Engine revision d13999c0ca\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (6 available)\r\n    \u2022 Pixel 7 (mobile)                \u2022 adb-28291FDH2001SA-5Lv71w._adb-tls-connect._tcp. \u2022 android-arm64  \u2022 Android 14 (API 34)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E                        \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E                        \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                                            \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad                            \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                                           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","@domesticmouse I'm not familiar with that syntax for a `pub add` invocation. Is that supported upstream in `dart pub add`? In other words, is the bug in pub, or in the flutter tool?","```console\r\n$ flutter pub add --help\r\nAdd dependencies to `pubspec.yaml`.\r\n\r\nInvoking `dart pub add foo bar` will add `foo` and `bar` to `pubspec.yaml`\r\nwith a default constraint derived from latest compatible version.\r\n\r\nAdd to dev_dependencies by prefixing with \"dev:\".\r\n\r\nMake dependency overrides by prefixing with \"override:\".\r\n\r\nAdd packages with specific constraints or other sources by giving a descriptor\r\nafter a colon.\r\n\r\nFor example:\r\n  * Add a hosted dependency at newest compatible stable version:\r\n    `flutter pub add foo`\r\n  * Add a hosted dev dependency at newest compatible stable version:\r\n    `flutter pub add dev:foo`\r\n  * Add a hosted dependency with the given constraint\r\n    `flutter pub add foo:^1.2.3`\r\n  * Add multiple dependencies:\r\n    `flutter pub add foo dev:bar`\r\n  * Add a path dependency:\r\n    `flutter pub add 'foo:{\"path\":\"..\/foo\"}'`\r\n  * Add a hosted dependency:\r\n    `flutter pub add 'foo:{\"hosted\":\"my-pub.dev\"}'`\r\n  * Add an sdk dependency:\r\n    `flutter pub add 'foo:{\"sdk\":\"flutter\"}'`\r\n  * Add a git dependency:\r\n    `flutter pub add 'foo:{\"git\":\"https:\/\/github.com\/foo\/foo\"}'`\r\n  * Add a dependency override:\r\n    `flutter pub add 'override:foo:1.0.0'`\r\n  * Add a git dependency with a path and ref specified:\r\n    `flutter pub add \\\r\n      'foo:{\"git\":{\"url\":\"..\/foo.git\",\"ref\":\"<branch>\",\"path\":\"<subdir>\"}}'`\r\n\r\nUsage: dart pub add [options] [<section>:]<package>[:descriptor]\r\n       [<section>:]<package2>[:descriptor] ...]\r\n-h, --help               Print this usage information.\r\n    --[no-]offline       Use cached packages instead of accessing the network.\r\n-n, --dry-run            Report what dependencies would change but don't change\r\n                         any.\r\n    --[no-]precompile    Build executables in immediate dependencies.\r\n-C, --directory=<dir>    Run this in the directory <dir>.\r\n\r\nRun \"dart help\" to see global options.\r\nSee https:\/\/dart.dev\/tools\/pub\/cmd\/pub-add for detailed documentation.\r\n```","Attempting to use `dart pub add` instead results in the following:\r\n\r\n```console\r\n$ dart pub add 'syntax_highlight:{\"git\":{\"url\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight.git\",\"ref\":\"main\"}}'\r\n\r\nBecause super_text_layout_testing depends on syntax_highlight from git which doesn't exist (Could not find git ref 'main' (fatal: cannot use bare repository\r\n  '\/Users\/brettmorgan\/.pub-cache\/git\/cache\/syntax_highlight-9234ce992999c9414c72b26608e4a256e7f9de16' (safe.bareRepository is 'explicit'))), version solving failed.\r\n```\r\n\r\nThe `flutter pub add` errors appear related.\r\n\r\n```console\r\n$ flutter pub add 'syntax_highlight:{\"git\":{\"url\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight.git\",\"ref\":\"main\"}}'\r\n\r\n  Using a naked argument for directory is deprecated and will stop working in a future Flutter release.\r\n\r\n  Use --directory instead.\r\nExpected to find project root in syntax_highlight:{\"git\":{\"url\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight.git\",\"ref\":\"main\"}}.\r\n```\r\n\r\nWhich I guess means that https:\/\/github.com\/domesticmouse\/syntax_highlight is not correctly formatted for `dart pub add`. I have no idea what I'm doing wrong. Should we bump this issue to the `dart-lang` crew?","> Which I guess means that https:\/\/github.com\/domesticmouse\/syntax_highlight is not correctly formatted for `dart pub add`. I have no idea what I'm doing wrong. Should we bump this issue to the `dart-lang` crew?\r\n\r\n@jonasfj could you help us out on whether there is a bug in package:syntax_highlight, flutter_tools, pub, or some combination?","I don't think there is any requirements on repository layout... other than there being a folder that contains the package (including its `pubspec.yaml`).\r\n\r\nThis seems like a bug in `pub`. Or a wrong input for `dart pub add`","Correction, I think there is two issues here:\r\n\r\n## (A) `dart pub add` doesn't appear to work for `git` in this case\r\n\r\n```\r\n$ cd \/tmp\r\n$ dart create tt\r\n$ dart pub add 'syntax_highlight:{\"git\":{\"url\":\"https:\/\/github.com\/domesticmouse\/syntax_highlight.git\"}}'\r\nBecause tt depends on syntax_highlight from git which doesn't exist (Could not find git ref 'HEAD' (fatal: cannot use bare repository\r\n  '\/jonasfj\/.pub-cache\/git\/cache\/syntax_highlight-9234ce992999c9414c72b26608e4a256e7f9de16' (safe.bareRepository is 'explicit'))), version solving failed.\r\n```\r\n\r\n## (B) flutter_tools legacy support for `<directory>` argument\r\n\r\n@sigurdm pointed out that: \r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/c53a18f4e49aa28726bb6e0ea0b525db0c37c750\/packages\/flutter_tools\/lib\/src\/commands\/packages.dart#L261\r\n\r\nBasically, it used to be possible to do:\r\n```\r\nflutter pub <cmd> <directory>\r\n```\r\nwhich was made it impossible to support the completely CLI interface offered by `dart pub`.\r\n\r\nAs a hack to migrate away from it, `flutter_tools` tests if the first argument contains `\/` if so it assumes it might be a directory.\r\n\r\nIt'd probably be better to migrate away from this.","I think this is a flutter issue. (try `FLUTTER_ROOT\/bin\/dart pub add 'syntax_highlight:{\"git\":{\"url\":\"https:\/\/g\r\nithub.com\/domesticmouse\/syntax_highlight\",\"ref\":\"main\"}}'`\r\n\r\nYou can do `flutter pub get <dir>` to operate in a directory. That is something flutter introduced on top of pub.\r\n\r\nWe wanted to move away from that, and inserted the warning \"sing a naked argument for directory is deprecated and will stop working in a future Flutter release.\" depending upon some heuristic conditions:\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/c53a18f4e49aa28726bb6e0ea0b525db0c37c750\/packages\/flutter_tools\/lib\/src\/commands\/packages.dart#L261\r\n\r\nI think it is about time to remove that check and feature.","Context regarding (B):\r\n\r\nI think `pub <cmd>` have always accepted arguments. At-least `pub upgrade <package>` have always been a thing.\r\nBut it wasn't very well known, so `flutter_tools` probably decided to make `flutter pub <cmd> <directory>` a thing (I don't know why this happened).\r\n\r\nThat ofcourse meant that features such as:\r\n * `pub upgrade <package>`\r\n * `pub upgrade --major-versions`\r\n * `pub upgrade --major-versions <package>`\r\n * `pub add ...`\r\n\r\nnever worked on `flutter pub`.\r\n\r\nSo we added a `-C\/--directory <directory>` flag in `pub`, and tried to detect in `flutter_tools` whether people were calling with `flutter pub <cmd> <directory>`, or if they where trying to pass flags and arguments.\r\n\r\nThis ofcourse won't work when arguments include `\/` or `\\`.\r\n\r\nIt's possible a better choice would be for `flutter_tools` to completely break support for `flutter pub <cmd> <directory>`.","A) (safe.bareRepository is 'explicit') has been fixed on HEAD: https:\/\/github.com\/dart-lang\/pub\/pull\/4142"],"labels":["tool","has reproducible steps","team-tool","found in release: 3.19","found in release: 3.21"]},{"title":"\"viewInsets.bottom\" changes when TextFormField \"isObscureText\" changes","body":"### Steps to reproduce\r\n\r\n1. Create screen with SafeArea -> Scaffold -> SingleChildScrollView -> Column\r\n2. In the Column add two TextFormFields.\r\n    - Set the first one with `isObscureText: false`\r\n    - Set the second one with `isObscureText: true`\r\n3. Add additional child to the column: \r\n    - Padding with padding value = MediaQuery.of(context).viewInsets.bottom\r\n    - I'm using it in order to push the widgets up when the keyboard is opened\r\n4. When moving between the TextFields, there is kind of 'flickering' of the screen due to the changes in the  `viewInsets.bottom` value.\r\n\r\nYou can see in the results below how the value changes.\r\n\r\nIt's more noticeable and annoying with iPhone since the keyboard returns to the same size, \r\ncompared to Pixel (Android) where the size just changes so it makes a bit of sense.\r\n\r\nHow can I avoid it?\r\nIs it a bug?\r\n\r\n---\r\n\r\n### Expected results\r\n\r\nWhen moving from `isObscureText: false` to `isObscureText: true`:\r\n\r\niPhone XR (iOS 17):\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 346.0\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 346.0\r\n\r\nPixel 4 (Android 13):\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 341.45454545454544\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 341.45454545454544\r\n\r\nSamsung S8 (Android 9): (OK on both cases)\r\nMediaQuery.of(context).viewInsets.bottom: 279.0\r\nMediaQuery.of(context).viewInsets.bottom: 279.0\r\n\r\n---\r\n\r\n### Actual results\r\n\r\nWhen moving from Username (`isObscureText: false`) to Password (`isObscureText: true`):\r\n\r\niPhone XR (iOS 17):\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 346.0\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 301.0000858306885\r\nflutter: MediaQuery.of(context).viewInsets.bottom: 346.0\r\n\r\nPixel 4 (Android 13):\r\nMediaQuery.of(context).viewInsets.bottom: 341.45454545454544\r\nMediaQuery.of(context).viewInsets.bottom: 297.45454545454544\r\n\r\nSamsung S8 (Android 9): (OK on both cases)\r\nMediaQuery.of(context).viewInsets.bottom: 279.0\r\nMediaQuery.of(context).viewInsets.bottom: 279.0\r\n\r\n<\/details>\r\n\r\n---\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\nKeyboard images:\r\n\r\n- Username field: `isObscureText: false`\r\n- Password field: `isObscureText: true`\r\n\r\niPhone XR (iOS 17):\r\n<a href=\"https:\/\/postimg.cc\/LgnQ1PVc\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/LgnQ1PVc\/temp-Imageli-Bf-WP.avif\" alt=\"temp-Imageli-Bf-WP\"\/><\/a> <a href=\"https:\/\/postimg.cc\/NKhCK52n\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/NKhCK52n\/temp-Image1-Yeb-Aj.avif\" alt=\"temp-Image1-Yeb-Aj\"\/><\/a><br\/><br\/>\r\n\r\nPixel 4 (Android 13):\r\n<a href=\"https:\/\/postimg.cc\/4m3Hp5V7\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/4m3Hp5V7\/temp-Imageub2-Vf0.avif\" alt=\"temp-Imageub2-Vf0\"\/><\/a> <a href=\"https:\/\/postimg.cc\/qt2NpZVY\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/qt2NpZVY\/temp-Image-GPVqs-U.avif\" alt=\"temp-Image-GPVqs-U\"\/><\/a><br\/><br\/>\r\n\r\nSamsung S8 (Android 9): (OK on both cases)\r\n<a href=\"https:\/\/postimg.cc\/KKG6YRd2\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/KKG6YRd2\/temp-Image-Eu-ZRmq.avif\" alt=\"temp-Image-Eu-ZRmq\"\/><\/a> <a href=\"https:\/\/postimg.cc\/qhYSQQgJ\" target=\"_blank\"><img src=\"https:\/\/i.postimg.cc\/qhYSQQgJ\/temp-Images9xb-B0.avif\" alt=\"temp-Images9xb-B0\"\/><\/a><br\/><br\/>\r\n\r\n<\/details>\r\n\r\n---\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.2.1 23C71 darwin-arm64, locale en-IL)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/admin\/Downloads\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (12 days ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/admin\/Library\/Android\/sdk\r\n    \u2022 Platform android-34-ext8, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.0.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15A507\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 SM G950F (mobile)     \u2022 ce031713eb0288210d        \u2022 android-arm64  \u2022 Android 9 (API 28)\r\n    \u2022 iPhone (mobile) \u2022 00008020-001059A91EE9002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)       \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.2.1 23C71 darwin-arm64\r\n    \u2022 Chrome (web)          \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for Dina's (2). Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["I checked this on both Android and iOS but couldn't reproduce the issue with below minimal sample code. Please also try this sample code on your end and confirm. \r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() async {\r\n  runApp(\r\n    const MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Home(),\r\n    ),\r\n  );\r\n}\r\n\r\nclass Home extends StatelessWidget {\r\n  const Home({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final padding = MediaQuery.of(context).viewInsets.bottom;\r\n    return Scaffold(\r\n      body: Center(\r\n        child: SingleChildScrollView(\r\n            child: Column(\r\n          children: [\r\n            TextFormField(obscureText: false),\r\n            TextFormField(obscureText: true),\r\n            Container(\r\n              padding: EdgeInsets.only(bottom: padding),\r\n              child: Text('padding: $padding', style: TextStyle(fontSize: 16)),\r\n            ),\r\n          ],\r\n        )),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>Demo (Pixel 7, Android 14 - issue is not reproduced)<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/104349824\/2652e49f-d593-428b-8fdf-ae23e571bd95\r\n\r\n<\/details>\r\n\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"OnTapping a positioned child widget inside a stack parent do not trigger the gesture action","body":"### Steps to reproduce\n\n```\r\nGestureDetector(\r\n                  onTap: () {\r\n                    print(\"next page for a product\");\r\n                  },\r\n                  child: Padding(\r\n                    padding: const EdgeInsets.symmetric(horizontal: 10),\r\n                    child: MProductCard(),\r\n                  ),\r\n                )\r\n```\r\n\r\nthe MProductCard() source:\r\n\r\n```\r\nPadding(\r\n      \/\/Margin\r\n      padding: const EdgeInsets.only(left: 10, top: 14, right: 10),\r\n      child: Container(\r\n        padding: const EdgeInsets.only(left: 20, right: 20),\r\n        \/\/ width: 157,\r\n        \/\/ height: 201,\r\n\r\n        decoration: BoxDecoration(\r\n          boxShadow: [\r\n            BoxShadow(\r\n                blurRadius: 4,\r\n                offset: Offset(0, 4),\r\n                spreadRadius: 0,\r\n                color: Colors.black.withOpacity(0.04))\r\n          ],\r\n          color: MColors.white,\r\n          borderRadius: BorderRadius.circular(16),\r\n        ),\r\n        child: Stack(\r\n            clipBehavior: Clip.none,\r\n            alignment: Alignment.center,\r\n            children: [\r\n              \/\/ print(\"adding item to card\");\r\n              \/\/ print(\"navigating to new product page\");\r\n\r\n              Column(\r\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n                crossAxisAlignment: CrossAxisAlignment.start,\r\n                children: [\r\n                  const SizedBox(\r\n                    width: 130,\r\n                    height: 97,\r\n                    child: Image(\r\n                      fit: BoxFit.contain,\r\n                      image: NetworkImage(\r\n                          \"http:\/\/imagecenter.titebond.com\/Woodworking\/TBOriginal\/TB%20Original%2032oz.jpg\"),\r\n                    ),\r\n                  ),\r\n                  Column(\r\n                    crossAxisAlignment: CrossAxisAlignment.start,\r\n                    children: [\r\n                      Text(\r\n                        \"Best Seller\",\r\n                        style: GoogleFonts.poppins(\r\n                            fontSize: 12,\r\n                            fontWeight: FontWeight.w500,\r\n                            color: const Color(0xff1372fd)),\r\n                      ),\r\n                      SizedBox(\r\n                        height: Constants.spaceBtwItems \/ 10,\r\n                      ),\r\n                      Text(\r\n                        \"Nike Jordan\",\r\n                        style: GoogleFonts.raleway(\r\n                          fontSize: 16,\r\n                          fontWeight: FontWeight.w600,\r\n                          color: MColors.iconDark_100,\r\n                        ),\r\n                      ),\r\n                      SizedBox(\r\n                        height: Constants.spaceBtwItems \/ 4,\r\n                      ),\r\n                      Text(\r\n                        \"\\$752.00\",\r\n                        style: GoogleFonts.poppins(\r\n                            fontSize: 14,\r\n                            color: MColors.iconDark,\r\n                            fontWeight: FontWeight.w500),\r\n                      ),\r\n                      SizedBox(\r\n                        height: 10,\r\n                      )\r\n                    ],\r\n                  )\r\n                ],\r\n              ),\r\n              Positioned(\r\n                right: -20,\r\n                bottom: 0,\r\n                child: GestureDetector(\r\n                  onTap: () {\r\n                    print(\"added to cart\");\r\n                  },\r\n                  child: Container(\r\n                    width: 24,\r\n                    height: 24,\r\n                    decoration: BoxDecoration(\r\n                      color: MColors.bluePrimay,\r\n                      borderRadius: const BorderRadius.only(\r\n                        topLeft: Radius.circular(8),\r\n                        bottomRight: Radius.circular(8),\r\n                      ),\r\n                    ),\r\n                    child: Center(\r\n                      child: Text(\r\n                        \"+\",\r\n                        style: TextStyle(\r\n                            color: MColors.white,\r\n                            fontSize: 22,\r\n                            fontWeight: FontWeight.w300),\r\n                      ),\r\n                    ),\r\n                  ),\r\n                ),\r\n              ),\r\n            ]),\r\n      ),\r\n    );\r\n```\r\nBasically the container has applied some horizontal padding and  when positioning the plus button at the bottom right corner using the positioned widget with a right property value of -20 units the gesture on tap does not trigger the action. However, when removing the padding from the container, it starts working as expected.\r\n\r\n\n\n### Expected results\n\nthe nested gesture tap action should trigger even though the padding is applied to the container.\n\n### Actual results\n\nOn tap action is not being triggered\n\n### Code sample\n\n```\r\nGestureDetector(\r\n                  onTap: () {\r\n                    print(\"next page for a product\");\r\n                  },\r\n                  child: Padding(\r\n                    padding: const EdgeInsets.symmetric(horizontal: 10),\r\n                    child: MProductCard(),\r\n                  ),\r\n                )\r\n```\r\n\r\nthe MProductCard() source:\r\n\r\n```\r\nPadding(\r\n      \/\/Margin\r\n      padding: const EdgeInsets.only(left: 10, top: 14, right: 10),\r\n      child: Container(\r\n        padding: const EdgeInsets.only(left: 20, right: 20),\r\n        \/\/ width: 157,\r\n        \/\/ height: 201,\r\n\r\n        decoration: BoxDecoration(\r\n          boxShadow: [\r\n            BoxShadow(\r\n                blurRadius: 4,\r\n                offset: Offset(0, 4),\r\n                spreadRadius: 0,\r\n                color: Colors.black.withOpacity(0.04))\r\n          ],\r\n          color: MColors.white,\r\n          borderRadius: BorderRadius.circular(16),\r\n        ),\r\n        child: Stack(\r\n            clipBehavior: Clip.none,\r\n            alignment: Alignment.center,\r\n            children: [\r\n              \/\/ print(\"adding item to card\");\r\n              \/\/ print(\"navigating to new product page\");\r\n\r\n              Column(\r\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n                crossAxisAlignment: CrossAxisAlignment.start,\r\n                children: [\r\n                  const SizedBox(\r\n                    width: 130,\r\n                    height: 97,\r\n                    child: Image(\r\n                      fit: BoxFit.contain,\r\n                      image: NetworkImage(\r\n                          \"http:\/\/imagecenter.titebond.com\/Woodworking\/TBOriginal\/TB%20Original%2032oz.jpg\"),\r\n                    ),\r\n                  ),\r\n                  Column(\r\n                    crossAxisAlignment: CrossAxisAlignment.start,\r\n                    children: [\r\n                      Text(\r\n                        \"Best Seller\",\r\n                        style: GoogleFonts.poppins(\r\n                            fontSize: 12,\r\n                            fontWeight: FontWeight.w500,\r\n                            color: const Color(0xff1372fd)),\r\n                      ),\r\n                      SizedBox(\r\n                        height: Constants.spaceBtwItems \/ 10,\r\n                      ),\r\n                      Text(\r\n                        \"Nike Jordan\",\r\n                        style: GoogleFonts.raleway(\r\n                          fontSize: 16,\r\n                          fontWeight: FontWeight.w600,\r\n                          color: MColors.iconDark_100,\r\n                        ),\r\n                      ),\r\n                      SizedBox(\r\n                        height: Constants.spaceBtwItems \/ 4,\r\n                      ),\r\n                      Text(\r\n                        \"\\$752.00\",\r\n                        style: GoogleFonts.poppins(\r\n                            fontSize: 14,\r\n                            color: MColors.iconDark,\r\n                            fontWeight: FontWeight.w500),\r\n                      ),\r\n                      SizedBox(\r\n                        height: 10,\r\n                      )\r\n                    ],\r\n                  )\r\n                ],\r\n              ),\r\n              Positioned(\r\n                right: -20,\r\n                bottom: 0,\r\n                child: GestureDetector(\r\n                  onTap: () {\r\n                    print(\"added to cart\");\r\n                  },\r\n                  child: Container(\r\n                    width: 24,\r\n                    height: 24,\r\n                    decoration: BoxDecoration(\r\n                      color: MColors.bluePrimay,\r\n                      borderRadius: const BorderRadius.only(\r\n                        topLeft: Radius.circular(8),\r\n                        bottomRight: Radius.circular(8),\r\n                      ),\r\n                    ),\r\n                    child: Center(\r\n                      child: Text(\r\n                        \"+\",\r\n                        style: TextStyle(\r\n                            color: MColors.white,\r\n                            fontSize: 22,\r\n                            fontWeight: FontWeight.w300),\r\n                      ),\r\n                    ),\r\n                  ),\r\n                ),\r\n              ),\r\n            ]),\r\n      ),\r\n    );\r\n```\n\n### Screenshots or Video\n\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/78984964\/a63ce978-2609-4bbf-9dc7-1b238906396c)\r\n\n\n### Logs\n\nno logs\n\n### Flutter Doctor output\n\n[\u2713] Flutter (Channel stable, 3.13.0, on Microsoft Windows [Version 10.0.22631.3155], locale en-US)\r\n    \u2022 Flutter version 3.13.0 on channel stable at C:\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision efbf63d9c6 (7 months ago), 2023-08-15 21:05:06 -0500\r\n    \u2022 Engine revision 1ac611c64e\r\n    \u2022 Dart version 3.1.0\r\n    \u2022 DevTools version 2.25.0\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\User\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[!] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.3)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34330.188\r\n    \u2717 Visual Studio is missing necessary components. Please re-run the Visual Studio installer for the \"Desktop\r\n      development with C++\" workload, and include these components:\r\n        MSVC v142 - VS 2019 C++ x64\/x86 build tools\r\n         - If there are multiple build tool versions available, install the latest\r\n        C++ CMake tools for Windows\r\n        Windows 10 SDK\r\n\r\n[\u2713] Android Studio (version 2022.2)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.6+0-b2043.56-9586694)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at C:\\Users\\User\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 sdk gphone64 x86 64 (mobile) \u2022 emulator-5554 \u2022 android-x64    \u2022 Android 14 (API 34) (emulator)\r\n    \u2022 Windows (desktop)            \u2022 windows       \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.22631.3155]\r\n    \u2022 Chrome (web)                 \u2022 chrome        \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    \u2022 Edge (web)                   \u2022 edge          \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.66\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.","comments":["Hi @MiguelG97 \r\nYour sample code contains undefined components. Please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. \r\n\r\nAnd please also help to update the `Steps to reproduce` corresponding to the example (e.g: click on widget A.). Thanks!"],"labels":["waiting for customer response","in triage"]},{"title":"[cross_file] Add `writeAsBytes` in XFile","body":"### Use case\n\nLike [`File.writeAsBytes`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/writeAsBytes.html), a `writeAsBytes` function is needed to writeAsBytes a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\n\n### Proposal\n\nn\/a","comments":["> ### Use case\r\n> Like [`File.writeAsBytes`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/writeAsBytes.html), a `writeAsBytes` function is needed to writeAsBytes a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\r\n\r\nThis is a proposal; what is the use case?","> > ### Use case\r\n> > Like [`File.writeAsBytes`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/writeAsBytes.html), a `writeAsBytes` function is needed to writeAsBytes a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\r\n> \r\n> This is a proposal; what is the use case?\r\n\r\nIn some cases, we need to `writeAsBytes` in file. This function is available in `File`, so I suggest adding it to `cross_file`.","> In some cases, we need to `writeAsBytes` in file.\r\n\r\n\"Some cases\" is not a use case. Please provide a specific use case.\r\n\r\nThe reason the proposal template starts with the \"Use case\" section is that concrete use cases are how we evaluate proposals. Per [our project documentation](https:\/\/github.com\/flutter\/flutter\/wiki\/Issue-hygiene#closing-issues), proposals that only provide proposed solutions without describing the use case(s) they are intended to solve will be closed."],"labels":["waiting for customer response","in triage"]},{"title":"[cross_file] Add `create` in XFile","body":"### Use case\r\n\r\nLike [`File.create`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/create.html), a `create` function is needed to create a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\r\n\r\n### Proposal\r\n\r\nn\/a","comments":["> ### Use case\r\n> Like [`File.create`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/create.html), a `create` function is needed to create a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\r\n\r\nThis is a proposal; what is the use case?","> > ### Use case\r\n> > Like [`File.create`](https:\/\/api.flutter.dev\/flutter\/dart-io\/File\/create.html), a `create` function is needed to create a file and return an [`XFile`](https:\/\/pub.dev\/documentation\/cross_file\/latest\/cross_file\/XFile-class.html).\r\n> \r\n> This is a proposal; what is the use case?\r\n\r\nIn some cases, we need to create a file. This function is available in `File`, so I suggest adding it to cross_file.","> In some cases, we need to create a file.\r\n\r\nPlease give a specific example of a use case for creating a new file via `XFile`, and what precisely you would expect it to do on each platform. Given that the purpose of `XFile` is to provide an abstraction around a variety of file-like operations for different backends, not all of which are things that would normally be thought of as files, it's not clear to me what the expected behavior of `create` would even be (or what its arguments would be).\r\n\r\n> This function is available in `File`, so I suggest adding it to cross_file.\r\n\r\n`XFile` and `File` are different things, with distinct semantics, which is why `XFile` exists in the first place; if it were conceptually identical to `File`, we would just use `File`."],"labels":["waiting for customer response","in triage"]},{"title":"3.21.0-0.0.pre encounters asserts on Linux when showing GTK widgets only after plugin registration","body":"### Steps to reproduce\r\n\r\n1. Create new Flutter project with a plugin that interfaces with native code\r\n2. Move code for showing GTK widgets after `fl_register_plugins`\r\n3. Try to interface with plugin\r\n4. Observe the application failing to do so\r\n\r\n### Expected results\r\n\r\nAbility to use the plugins\r\n\r\n### Actual results\r\n\r\nFlutter complains about missing platform channels and throws assertion warnings in the standard output\r\n\r\n### Code sample\r\n\r\nFrom https:\/\/pub.dev\/packages\/handy_window\r\n\r\n```diff \r\ndiff --git a\/linux\/my_application.cc b\/linux\/my_application.cc\r\nindex fa74baa..3133755 100644\r\n--- a\/linux\/my_application.cc\r\n+++ b\/linux\/my_application.cc\r\n@@ -48,17 +48,17 @@ static void my_application_activate(GApplication* application) {\r\n   }\r\n \r\n   gtk_window_set_default_size(window, 1280, 720);\r\n-  gtk_widget_show(GTK_WIDGET(window));\r\n \r\n   g_autoptr(FlDartProject) project = fl_dart_project_new();\r\n   fl_dart_project_set_dart_entrypoint_arguments(project, self->dart_entrypoint_arguments);\r\n \r\n   FlView* view = fl_view_new(project);\r\n-  gtk_widget_show(GTK_WIDGET(view));\r\n   gtk_container_add(GTK_CONTAINER(window), GTK_WIDGET(view));\r\n \r\n   fl_register_plugins(FL_PLUGIN_REGISTRY(view));\r\n \r\n+  gtk_widget_show(GTK_WIDGET(window));\r\n+  gtk_widget_show(GTK_WIDGET(view));\r\n   gtk_widget_grab_focus(GTK_WIDGET(view));\r\n }\r\n```\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:url_launcher\/url_launcher.dart';\r\n\r\nvoid main() => runApp(const MainApp());\r\n\r\nclass MainApp extends StatelessWidget {\r\n  const MainApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: FilledButton(\r\n            onPressed: () => launchUrl(Uri.https('flutter.dev')),\r\n            child: const Text('Open site'),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_engine_get_binary_messenger(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlTextureRegistrar *fl_engine_get_texture_registrar(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlPluginRegistrar *fl_plugin_registrar_new(FlView *, FlBinaryMessenger *, FlTextureRegistrar *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n(app:3205): GLib-GObject-CRITICAL **: 11:04:29.166: g_object_ref: assertion 'G_IS_OBJECT (object)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_plugin_registrar_get_messenger(FlPluginRegistrar *): assertion 'FL_IS_PLUGIN_REGISTRAR(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlMethodChannel *fl_method_channel_new(FlBinaryMessenger *, const gchar *, FlMethodCodec *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: void fl_method_channel_set_method_call_handler(FlMethodChannel *, FlMethodChannelMethodCallHandler, gpointer, GDestroyNotify): assertion 'FL_IS_METHOD_CHANNEL(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_engine_get_binary_messenger(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlTextureRegistrar *fl_engine_get_texture_registrar(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlPluginRegistrar *fl_plugin_registrar_new(FlView *, FlBinaryMessenger *, FlTextureRegistrar *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n(app:3205): GLib-GObject-CRITICAL **: 11:04:29.166: g_object_ref: assertion 'G_IS_OBJECT (object)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_plugin_registrar_get_messenger(FlPluginRegistrar *): assertion 'FL_IS_PLUGIN_REGISTRAR(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlMethodChannel *fl_method_channel_new(FlBinaryMessenger *, const gchar *, FlMethodCodec *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: void fl_method_channel_set_method_call_handler(FlMethodChannel *, FlMethodChannelMethodCallHandler, gpointer, GDestroyNotify): assertion 'FL_IS_METHOD_CHANNEL(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_engine_get_binary_messenger(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlTextureRegistrar *fl_engine_get_texture_registrar(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlPluginRegistrar *fl_plugin_registrar_new(FlView *, FlBinaryMessenger *, FlTextureRegistrar *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlView *fl_plugin_registrar_get_view(FlPluginRegistrar *): assertion 'FL_IS_PLUGIN_REGISTRAR(self)' failed\r\n\r\n(app:3205): Gtk-CRITICAL **: 11:04:29.166: gtk_widget_get_toplevel: assertion 'GTK_IS_WIDGET (widget)' failed\r\n\r\n(app:3205): Gtk-CRITICAL **: 11:04:29.166: gtk_window_get_screen: assertion 'GTK_IS_WINDOW (window)' failed\r\n\r\n(app:3205): Gdk-CRITICAL **: 11:04:29.166: gdk_screen_is_composited: assertion 'GDK_IS_SCREEN (screen)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_engine_get_binary_messenger(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlTextureRegistrar *fl_engine_get_texture_registrar(FlEngine *): assertion 'FL_IS_ENGINE(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlPluginRegistrar *fl_plugin_registrar_new(FlView *, FlBinaryMessenger *, FlTextureRegistrar *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n(app:3205): GLib-GObject-CRITICAL **: 11:04:29.166: g_object_ref: assertion 'G_IS_OBJECT (object)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlBinaryMessenger *fl_plugin_registrar_get_messenger(FlPluginRegistrar *): assertion 'FL_IS_PLUGIN_REGISTRAR(self)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: FlMethodChannel *fl_method_channel_new(FlBinaryMessenger *, const gchar *, FlMethodCodec *): assertion 'FL_IS_BINARY_MESSENGER(messenger)' failed\r\n\r\n** (app:3205): CRITICAL **: 11:04:29.166: void fl_method_channel_set_method_call_handler(FlMethodChannel *, FlMethodChannelMethodCallHandler, gpointer, GDestroyNotify): assertion 'FL_IS_METHOD_CHANNEL(self)' failed\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n<details open><summary>Exception<\/summary>\r\n\r\n```console\r\n\r\n[ERROR:flutter\/runtime\/dart_vm_initializer.cc(41)] Unhandled Exception: MissingPluginException(No implementation found for method launch on channel plugins.flutter.io\/url_launcher_linux)\r\n#0      MethodChannel._invokeMethod (package:flutter\/src\/services\/platform_channel.dart:332:7)\r\n<asynchronous suspension>\r\n#1      UrlLauncherLinux.launchUrl (package:url_launcher_linux\/url_launcher_linux.dart:47:13)\r\n<asynchronous suspension>\r\n\r\n```\r\n\r\n<\/details>\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u2713] Flutter (Channel master, 3.21.0-2.0.pre.63, on Artix Linux 6.7.4-artix1-1, locale en_US.UTF-8)\r\n    \u2022 Flutter version 3.21.0-2.0.pre.63 on channel master at \/home\/nyanya\/.local\/lib\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision f733e3a441 (3 hours ago), 2024-03-09 15:50:23 +0800\r\n    \u2022 Engine revision 196132ffe2\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-219.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/home\/nyanya\/.local\/lib\/android-sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/opt\/android-studio\/jbr\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 CHROME_EXECUTABLE = \/usr\/bin\/chromium\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 clang version 16.0.6\r\n    \u2022 cmake version 3.28.3\r\n    \u2022 ninja version 1.11.1\r\n    \u2022 pkg-config version 2.1.0\r\n\r\n[!] Android Studio (version unknown)\r\n    \u2022 Android Studio at \/opt\/android-studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2717 Unable to determine Android Studio version.\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.3)\r\n    \u2022 IntelliJ at \/home\/nyanya\/.local\/share\/JetBrains\/Toolbox\/apps\/intellij-idea-ultimate\r\n    \u2022 Flutter plugin version 78.1.1\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 Linux (desktop) \u2022 linux  \u2022 linux-x64      \u2022 Artix Linux 6.7.4-artix1-1\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Chromium 122.0.6261.39 Arch Linux\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n```\r\n\r\n<\/details>\r\n","comments":["The necessary code change is in the documentation of the https:\/\/pub.dev\/packages\/handy_window package.\r\n\r\nFeel free to close this issue if you think this is not something the Flutter team should be fixing, if that's the case, I will contact the `handy_window` developers instead.","Closing as a duplicate of https:\/\/github.com\/flutter\/flutter\/issues\/118269","> Closing as a duplicate of #118269\r\n\r\nIs fixing the breakage from 3.21.0 onward part of the linked issue? I'm just trying to make sure.","Re-opening since I may have misunderstood the issue here; looking again, your description (\"Flutter complains about missing platform channels\") and your log output don't match.\r\n\r\nCould you please update your Steps to Reproduce section to be clearer and more detailed? In particular:\r\n* > Create new Flutter project with a plugin that interfaces with native code\r\n \r\n  This is not enough information for someone to reproduce it. What one plugin are you adding to a new, default project to reproduce this?\r\n* > Try to interface with the plugin\r\n \r\n  Interface how?\r\n* It's not clear to me if your Code Sample section is part of the reproductions steps, or a suggested fix. I read this as the latter initially; if changing the native project is part of the repro steps, the repro steps should be clear about that.\r\n\r\n","> This is not enough information for someone to reproduce it. What one plugin are you adding to a new, default project to reproduce this?\r\n\r\nA simple one like url_launcher is enough. Any plugin that relies on method channels.\r\n\r\n> Interface how?\r\n\r\nIn the case of url_launcher, just `launchUrl`.\r\n\r\n> if changing the native project is part of the repro steps, the repro steps should be clear about that.\r\n\r\nChanging the native code is part of the repro.\r\n\r\nHere's a video that shows the bug and how to reproduce it:\r\n\r\n[Capture-2024-03-09_21.40.34.webm](https:\/\/github.com\/flutter\/flutter\/assets\/22963120\/10224abc-3e24-4d72-810e-4dcef231e7ae)\r\n","I have also edited the OP, in case it's still not clear.","I summarize the `steps to reproduce` as below:\r\n\r\n1. Create a new Flutter project. Then add a plugin, eg: `url_launcher`\r\n2. Update `main.dart` code as above. \r\n3. Update `\/linux\/my_application.cc` as above (move these 2 lines of `gtk_widget_show` after `fl_register_plugins`)\r\n\r\nBefore (default code when created project): \r\n\r\n```c\r\n  gtk_window_set_default_size(window, 1280, 720);\r\n  gtk_widget_show(GTK_WIDGET(window));\r\n\r\n  g_autoptr(FlDartProject) project = fl_dart_project_new();\r\n  fl_dart_project_set_dart_entrypoint_arguments(project, self->dart_entrypoint_arguments);\r\n\r\n  FlView* view = fl_view_new(project);\r\n  gtk_widget_show(GTK_WIDGET(view));\r\n  gtk_container_add(GTK_CONTAINER(window), GTK_WIDGET(view));\r\n\r\n  fl_register_plugins(FL_PLUGIN_REGISTRY(view));\r\n\r\n  gtk_widget_grab_focus(GTK_WIDGET(view));\r\n```\r\n\r\nAfter:\r\n\r\n```c\r\n  gtk_window_set_default_size(window, 1280, 720);\r\n\r\n  g_autoptr(FlDartProject) project = fl_dart_project_new();\r\n  fl_dart_project_set_dart_entrypoint_arguments(project, self->dart_entrypoint_arguments);\r\n\r\n  FlView* view = fl_view_new(project);\r\n  gtk_container_add(GTK_CONTAINER(window), GTK_WIDGET(view));\r\n\r\n  fl_register_plugins(FL_PLUGIN_REGISTRY(view));\r\n  gtk_widget_show(GTK_WIDGET(view));\r\n  gtk_widget_show(GTK_WIDGET(window));\r\n\r\n  gtk_widget_grab_focus(GTK_WIDGET(view));\r\n```\r\n4. Run Linux app target\r\n\r\nThe issue only occurs on master channel but not on stable `3.19.3`. \r\n\r\n<details>\r\n<summary>flutter doctor -v (stable & master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on Ubuntu 22.04.3 LTS 6.5.0-21-generic, locale en_US.UTF-8)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/home\/huynq\/Documents\/Working\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (4 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0-rc3)\r\n    \u2022 Android SDK at \/home\/huynq\/Android\/Sdk\/\r\n    \u2022 Platform android-33, build-tools 34.0.0-rc3\r\n    \u2022 Java binary at: \/snap\/android-studio\/current\/jbr\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at google-chrome\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 Ubuntu clang version 14.0.0-1ubuntu1.1\r\n    \u2022 cmake version 3.22.1\r\n    \u2022 ninja version 1.10.1\r\n    \u2022 pkg-config version 0.29.2\r\n\r\n[\u2713] Android Studio (version 2021.1)\r\n    \u2022 Android Studio at \/home\/huynq\/Documents\/android-studio\r\n    \u2022 Flutter plugin version 67.0.1\r\n    \u2022 Dart plugin version 211.7817\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7590822)\r\n\r\n[!] Android Studio (version unknown)\r\n    \u2022 Android Studio at \/snap\/android-studio\/current\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2717 Unable to determine Android Studio version.\r\n    \u2022 android-studio-dir = \/snap\/android-studio\/current\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.84.2)\r\n    \u2022 VS Code at \/usr\/share\/code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/snap\/code\/current\/usr\/share\/code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 Linux (desktop) \u2022 linux  \u2022 linux-x64      \u2022 Ubuntu 22.04.3 LTS 6.5.0-21-generic\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 120.0.6099.199\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-2.0.pre.73, on Ubuntu 22.04.3 LTS 6.5.0-21-generic, locale en_US.UTF-8)\r\n    \u2022 Flutter version 3.21.0-2.0.pre.73 on channel master at \/home\/huynq\/Documents\/Working\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/home\/huynq\/Documents\/Working\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/home\/huynq\/Documents\/Working\/flutter_master. Consider adding \/home\/huynq\/Documents\/Working\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/home\/huynq\/Documents\/Working\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/home\/huynq\/Documents\/Working\/flutter_master. Consider adding \/home\/huynq\/Documents\/Working\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 8e12e133aa (32 minutes ago), 2024-03-11 04:57:34 -0400\r\n    \u2022 Engine revision 210f84eb81\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0-rc3)\r\n    \u2022 Android SDK at \/home\/huynq\/Android\/Sdk\/\r\n    \u2022 Platform android-33, build-tools 34.0.0-rc3\r\n    \u2022 Java binary at: \/snap\/android-studio\/current\/jbr\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at google-chrome\r\n\r\n[\u2713] Linux toolchain - develop for Linux desktop\r\n    \u2022 Ubuntu clang version 14.0.0-1ubuntu1.1\r\n    \u2022 cmake version 3.22.1\r\n    \u2022 ninja version 1.10.1\r\n    \u2022 pkg-config version 0.29.2\r\n\r\n[\u2713] Android Studio (version 2021.1)\r\n    \u2022 Android Studio at \/home\/huynq\/Documents\/android-studio\r\n    \u2022 Flutter plugin version 67.0.1\r\n    \u2022 Dart plugin version 211.7817\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.11+0-b60-7590822)\r\n\r\n[!] Android Studio (version unknown)\r\n    \u2022 Android Studio at \/snap\/android-studio\/current\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2717 Unable to determine Android Studio version.\r\n    \u2022 android-studio-dir = \/snap\/android-studio\/current\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.84.2)\r\n    \u2022 VS Code at \/usr\/share\/code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/snap\/code\/current\/usr\/share\/code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (2 available)\r\n    \u2022 Linux (desktop) \u2022 linux  \u2022 linux-x64      \u2022 Ubuntu 22.04.3 LTS 6.5.0-21-generic\r\n    \u2022 Chrome (web)    \u2022 chrome \u2022 web-javascript \u2022 Google Chrome 120.0.6099.199\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n<\/details>","cc @robert-ancell ","Fixing this may also be needed for multi-view implementation."],"labels":["c: regression","engine","platform-linux","a: desktop","has reproducible steps","P2","team-desktop","triaged-desktop","found in release: 3.21"]},{"title":"[Android] focus_manager _TypeError Null check operator used on a null value","body":"### Steps to reproduce\r\n\r\nNot sure how to reproduce. It is potentially happening only on a Google Play review device?\r\n\r\nAndroid 12, Pixel 6 Pro, and I just got a pile of errors again after submitting an app for review. \r\n\r\nIs there any way for me to trap the error with more detail or it's at the Flutter framework level?\r\n\r\n\r\n\r\n### Expected results\r\n\r\nNo error\r\n\r\n### Actual results\r\n\r\n_TypeError Null check operator used on a null value\r\n\r\n### Code sample\r\n\r\n*\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nfocus_manager.dart in FocusNode.rect at line 842 within flutter\r\nfocus_traversal.dart in DirectionalFocusTraversalPolicyMixin._sortAndFindInitial.<fn> at line 732 within flutter\r\ncollections.dart in _insertionSort at line 228 within flutter\r\ncollections.dart in mergeSort at line 167 within flutter\r\nfocus_traversal.dart in DirectionalFocusTraversalPolicyMixin._sortAndFindInitial at line 727 within flutter\r\nfocus_traversal.dart in DirectionalFocusTraversalPolicyMixin.findFirstFocusInDirection at line 711 within flutter\r\nfocus_traversal.dart in DirectionalFocusTraversalPolicyMixin.inDirection at line 1000 within flutter\r\nfocus_manager.dart in FocusNode.focusInDirection at line 1198 within flutter\r\nfocus_traversal.dart in DirectionalFocusAction.invoke at line 2102 within flutter\r\nactions.dart in Action._invoke at line 338 within flutter\r\nactions.dart in ActionDispatcher.invokeActionIfEnabled at line 666 within flutter\r\nshortcuts.dart in ShortcutManager.handleKeypress at line 874 within flutter\r\nshortcuts.dart in _ShortcutsState._handleOnKeyEvent at line 1065 within flutter\r\nfocus_manager.dart in _HighlightModeManager.handleKeyMessage at line 2002 within flutter\r\nhardware_keyboard.dart in KeyEventManager._dispatchKeyMessage at line 1103 within flutter\r\nhardware_keyboard.dart in KeyEventManager.handleRawKeyMessage at line 1175 within flutter\r\nplatform_channel.dart in BasicMessageChannel.setMessageHandler.<fn> at line 235 within flutter\r\nbinding.dart in _DefaultBinaryMessenger.setMessageHandler.<fn> at line 603 within flutter\r\nhooks.dart in _invoke2 at line 344\r\nchannel_buffers.dart in _ChannelCallbackRecord.invoke at line 45\r\nchannel_buffers.dart in _Channel.push at line 135\r\nchannel_buffers.dart in ChannelBuffers.push at line 343\r\nplatform_dispatcher.dart in PlatformDispatcher._dispatchPlatformMessage at line 737\r\nhooks.dart in _dispatchPlatformMessage at line 257\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/users\/omega\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/omega\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/users\/omega\/flutter. Consider adding\r\n      \/users\/omega\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/omega\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/users\/omega\/flutter. Consider adding\r\n      \/users\/omega\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (2 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/omega\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPad Pro (11-inch) (4th generation) (mobile) \u2022 F970649B-BBDA-4185-96C3-7274D42ED07D \u2022 ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-17-4 (simulator)\r\n    \u2022 macOS (desktop)                              \u2022 macos                                \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                                 \u2022 chrome                               \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @zambetpentru \r\nDoes this issue only occur in production? Could you try reproducing it in `release` mode locally (`flutter run --release`)? If the issue is reproduced, please share the entire output of the run command with verbose (`flutter run --release -v`) so we can verify the issue properly.","Hi,  correct it is on Production and appears to happen only with Google Play Android devices. I'm not aware of how to reproduce it but happy to add any additional logging you recommend. ",">I'm not aware of how to reproduce it but happy to add any additional logging you recommend.\r\n\r\nIf the issue occurs in production only, a full stack trace (if any) would be helpful. I'm quite leaning toward issue occurring due to the implementation, though (the context could be null somewhere)","The original trace above is unfortunately all I get from Sentry during the sets of occurrences. It hasn't appeared for a real user,  only during several Google play reviews. ",">_TypeError Null check operator used on a null value\r\n\r\nWhere did you get this error message? Could you attach the complete log you received from Sentry? (it should contain above error message and you can remove any sensitive information in the log if any)","This is the full information I get on sentry.io with unfortunately no trace containing user code (which for most errors does show the user code).\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/81489824\/df6a0df1-9110-4472-bde3-c798636f0ca8)\r\n\r\n\r\n```json\r\n{\r\n   \"datetime\":\"2024-03-13T05:25:54+00:00\",\r\n      [\r\n         \"device\",\r\n         \"Pixel 6 Pro\"\r\n      ],\r\n      [\r\n         \"device.class\",\r\n         \"1\"\r\n      ],\r\n      [\r\n         \"device.family\",\r\n         \"Pixel\"\r\n      ],\r\n      [\r\n         \"environment\",\r\n         \"production\"\r\n      ],\r\n      [\r\n         \"event.environment\",\r\n         \"dart\"\r\n      ],\r\n      [\r\n         \"event.origin\",\r\n         \"flutter\"\r\n      ],\r\n      [\r\n         \"flutter.name\",\r\n         \"Flutter\"\r\n      ],\r\n      [\r\n         \"handled\",\r\n         \"yes\"\r\n      ],\r\n      [\r\n         \"isSideLoaded\",\r\n         \"true\"\r\n      ],\r\n      [\r\n         \"level\",\r\n         \"fatal\"\r\n      ],\r\n      [\r\n         \"mechanism\",\r\n         \"FlutterError\"\r\n      ],\r\n      [\r\n         \"os\",\r\n         \"Android 12\"\r\n      ],\r\n      [\r\n         \"os.name\",\r\n         \"Android\"\r\n      ],\r\n      [\r\n         \"os.rooted\",\r\n         \"no\"\r\n      ],\r\n      [\r\n         \"platform\",\r\n         \"Native Android\"\r\n      ],\r\n   ],\r\n   \"contexts\":{\r\n      \"accessibility\":{\r\n         \"accessible_navigation\":false,\r\n         \"bold_text\":false,\r\n         \"disable_animations\":false,\r\n         \"high_contrast\":false,\r\n         \"invert_colors\":false,\r\n         \"reduce_motion\":false,\r\n         \"type\":\"accessibility\"\r\n      },\r\n      \"app\":{\r\n         \"in_foreground\":true,\r\n         \"type\":\"app\"\r\n      },\r\n      \"culture\":{\r\n         \"is_24_hour_format\":false,\r\n         \"locale\":\"en-US\",\r\n         \"timezone\":\"UTC\",\r\n         \"type\":\"culture\"\r\n      },\r\n      \"dart\":{\r\n         \"name\":\"Dart\",\r\n         \"raw_description\":\"3.4.0-223.0.dev (dev) (Mon Mar 11 17:02:59 2024 -0700) on \\\"android_arm64\\\"\",\r\n         \"type\":\"runtime\"\r\n      },\r\n      \"dart_context\":{\r\n         \"compile_mode\":\"release\",\r\n         \"type\":\"dart_context\"\r\n      },\r\n      \"device\":{\r\n         \"name\":\"Pixel 6 Pro\",\r\n         \"family\":\"Pixel\",\r\n         \"model\":\"Pixel 6 Pro\",\r\n         \"model_id\":\"SP2A.220505.008\",\r\n         \"battery_level\":50.0,\r\n         \"orientation\":\"portrait\",\r\n         \"manufacturer\":\"Google\",\r\n         \"brand\":\"google\",\r\n         \"screen_width_pixels\":1440,\r\n         \"screen_height_pixels\":2816,\r\n         \"screen_density\":3.5,\r\n         \"screen_dpi\":560,\r\n         \"online\":true,\r\n         \"charging\":false,\r\n         \"simulator\":false,\r\n         \"memory_size\":3098857472,\r\n         \"storage_size\":2077073408,\r\n         \"free_storage\":1628168192,\r\n         \"boot_time\":\"2024-03-13T05:23:29.947Z\",\r\n         \"timezone\":\"Etc\/UTC\",\r\n         \"locale\":\"en_US\",\r\n         \"processor_count\":4,\r\n         \"processor_frequency\":0,\r\n         \"archs\":[\r\n            \"arm64-v8a\",\r\n            \"armeabi-v7a\",\r\n            \"armeabi\"\r\n         ],\r\n         \"battery_temperature\":25.0,\r\n         \"connection_type\":\"cellular\",\r\n         \"id\":\"6224161f-cfaf-4814-936c-40b65f589a50\",\r\n         \"language\":\"en\",\r\n         \"type\":\"device\"\r\n      },\r\n      \"flutter\":{\r\n         \"name\":\"Flutter\",\r\n         \"compiler\":\"Dart AOT\",\r\n         \"type\":\"runtime\"\r\n      },\r\n      \"flutter_context\":{\r\n         \"current_lifecycle_state\":\"resumed\",\r\n         \"default_route_name\":\"\/\",\r\n         \"has_render_view\":\"true\",\r\n         \"initial_lifecycle_state\":\"AppLifecycleState.detached\",\r\n         \"type\":\"flutter_context\"\r\n      },\r\n      \"flutter_error_details\":{\r\n         \"context\":\"thrown while processing the key message handler\",\r\n         \"library\":\"services library\",\r\n         \"type\":\"flutter_error_details\"\r\n      },\r\n      \"os\":{\r\n         \"name\":\"Android\",\r\n         \"version\":\"12\",\r\n         \"build\":\"sdk_phone_arm64-eng 12 SP2A.220505.008 eng.ubuntu.20231126.034832 test-keys\",\r\n         \"kernel_version\":\"5.10.168\",\r\n         \"rooted\":false,\r\n         \"type\":\"os\"\r\n      },\r\n      \"os_1\":{\r\n         \"theme\":\"light\",\r\n         \"type\":\"os_1\"\r\n      },\r\n      \"trace\":{\r\n         \"trace_id\":\"da257c4d3eea47e1b5a7f6fcf70ecf1d\",\r\n         \"span_id\":\"6084328cf6f24cbd\",\r\n         \"op\":\"default\",\r\n         \"status\":\"unknown\",\r\n         \"type\":\"trace\"\r\n      }\r\n   },\r\n   \"culprit\":\"focus_manager.dart in FocusNode.rect\",\r\n   \"environment\":\"production\",\r\n   \"exception\":{\r\n      \"values\":[\r\n         {\r\n            \"type\":\"_TypeError\",\r\n            \"value\":\"Null check operator used on a null value\",\r\n            \"stacktrace\":{\r\n               \"frames\":[\r\n                  {\r\n                     \"function\":\"_dispatchPlatformMessage\",\r\n                     \"filename\":\"hooks.dart\",\r\n                     \"abs_path\":\"dart:ui\/hooks.dart\",\r\n                     \"lineno\":257,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"PlatformDispatcher._dispatchPlatformMessage\",\r\n                     \"filename\":\"platform_dispatcher.dart\",\r\n                     \"abs_path\":\"dart:ui\/platform_dispatcher.dart\",\r\n                     \"lineno\":750,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"ChannelBuffers.push\",\r\n                     \"filename\":\"channel_buffers.dart\",\r\n                     \"abs_path\":\"dart:ui\/channel_buffers.dart\",\r\n                     \"lineno\":343,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_Channel.push\",\r\n                     \"filename\":\"channel_buffers.dart\",\r\n                     \"abs_path\":\"dart:ui\/channel_buffers.dart\",\r\n                     \"lineno\":135,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_ChannelCallbackRecord.invoke\",\r\n                     \"filename\":\"channel_buffers.dart\",\r\n                     \"abs_path\":\"dart:ui\/channel_buffers.dart\",\r\n                     \"lineno\":45,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_invoke2\",\r\n                     \"filename\":\"hooks.dart\",\r\n                     \"abs_path\":\"dart:ui\/hooks.dart\",\r\n                     \"lineno\":344,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_DefaultBinaryMessenger.setMessageHandler.<fn>\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"binding.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/services\/binding.dart\",\r\n                     \"lineno\":581,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"BasicMessageChannel.setMessageHandler.<fn>\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"platform_channel.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/services\/platform_channel.dart\",\r\n                     \"lineno\":235,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"KeyEventManager.handleRawKeyMessage\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"hardware_keyboard.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/services\/hardware_keyboard.dart\",\r\n                     \"lineno\":1172,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"KeyEventManager._dispatchKeyMessage\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"hardware_keyboard.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/services\/hardware_keyboard.dart\",\r\n                     \"lineno\":1100,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_HighlightModeManager.handleKeyMessage\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_manager.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_manager.dart\",\r\n                     \"lineno\":2229,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_ShortcutsState._handleOnKeyEvent\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"shortcuts.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/shortcuts.dart\",\r\n                     \"lineno\":1065,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"ShortcutManager.handleKeypress\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"shortcuts.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/shortcuts.dart\",\r\n                     \"lineno\":874,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"ActionDispatcher.invokeActionIfEnabled\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"actions.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/actions.dart\",\r\n                     \"lineno\":666,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"Action._invoke\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"actions.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/actions.dart\",\r\n                     \"lineno\":338,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"DirectionalFocusAction.invoke\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_traversal.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_traversal.dart\",\r\n                     \"lineno\":2100,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"FocusNode.focusInDirection\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_manager.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_manager.dart\",\r\n                     \"lineno\":1311,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"DirectionalFocusTraversalPolicyMixin.inDirection\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_traversal.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_traversal.dart\",\r\n                     \"lineno\":1000,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"DirectionalFocusTraversalPolicyMixin.findFirstFocusInDirection\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_traversal.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_traversal.dart\",\r\n                     \"lineno\":711,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"DirectionalFocusTraversalPolicyMixin._sortAndFindInitial\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_traversal.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_traversal.dart\",\r\n                     \"lineno\":727,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"mergeSort\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"collections.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/foundation\/collections.dart\",\r\n                     \"lineno\":167,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"_insertionSort\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"collections.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/foundation\/collections.dart\",\r\n                     \"lineno\":228,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"DirectionalFocusTraversalPolicyMixin._sortAndFindInitial.<fn>\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_traversal.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_traversal.dart\",\r\n                     \"lineno\":732,\r\n                     \"in_app\":false\r\n                  },\r\n                  {\r\n                     \"function\":\"FocusNode.rect\",\r\n                     \"package\":\"flutter\",\r\n                     \"filename\":\"focus_manager.dart\",\r\n                     \"abs_path\":\"package:flutter\/src\/widgets\/focus_manager.dart\",\r\n                     \"lineno\":935,\r\n                     \"in_app\":false\r\n                  }\r\n               ]\r\n            },\r\n            \"mechanism\":{\r\n               \"type\":\"FlutterError\",\r\n               \"handled\":true\r\n            }\r\n         }\r\n      ]\r\n   },\r\n   \"fingerprint\":[\r\n      \"{{ default }}\"\r\n   ],\r\n   \"grouping_config\":{\r\n      \"enhancements\":\"KLUv_SAYwQAAkwKRs25ld3N0eWxlOjIwMjMtMDEtMTGQ\",\r\n      \"id\":\"newstyle:2023-01-11\"\r\n   },\r\n   \"hashes\":[\r\n      \"3c0ec962cdcda63572d5bf419e76c1ff\"\r\n   ],\r\n   \"ingest_path\":[\r\n      {\r\n         \"version\":\"24.2.0\",\r\n         \"public_key\":\"XE7QiyuNlja9PZ7I9qJlwQotzecWrUIN91BAO7Q5R38\"\r\n      }\r\n   ],\r\n   \"key_id\":\"2030107\",\r\n   \"level\":\"fatal\",\r\n   \"location\":\"focus_manager.dart\",\r\n   \"logger\":\"\",\r\n   \"metadata\":{\r\n      \"display_title_with_tree_label\":false,\r\n      \"filename\":\"focus_manager.dart\",\r\n      \"function\":\"FocusNode.rect\",\r\n      \"in_app_frame_mix\":\"system-only\",\r\n      \"type\":\"_TypeError\",\r\n      \"value\":\"Null check operator used on a null value\"\r\n   },\r\n   \"modules\":{\r\n      \"_flutterfire_internals\":\"unknown\",\r\n      \"abseil-cpp\":\"unknown\",\r\n      \"accessibility\":\"unknown\",\r\n      \"angle\":\"unknown\",\r\n      \"another_flushbar\":\"unknown\",\r\n      \"another_transformer_page_view\":\"unknown\",\r\n      \"ansicolor\":\"unknown\",\r\n      \"archive\":\"unknown\",\r\n      \"args\":\"unknown\",\r\n      \"asn1lib\":\"unknown\",\r\n      \"async\":\"unknown\",\r\n      \"auto_size_text\":\"unknown\",\r\n      \"better_player\":\"unknown\",\r\n      \"boolean_selector\":\"unknown\",\r\n      \"boringssl\":\"unknown\",\r\n      \"camera\":\"unknown\",\r\n      \"camera_android\":\"unknown\",\r\n      \"camera_avfoundation\":\"unknown\",\r\n      \"camera_platform_interface\":\"unknown\",\r\n      \"camera_web\":\"unknown\",\r\n      \"ceval\":\"unknown\",\r\n      \"characters\":\"unknown\",\r\n      \"clock\":\"unknown\",\r\n      \"collection\":\"unknown\",\r\n      \"connectivity_plus\":\"unknown\",\r\n      \"connectivity_plus_platform_interface\":\"unknown\",\r\n      \"convert\":\"unknown\",\r\n      \"cross_file\":\"unknown\",\r\n      \"crypto\":\"unknown\",\r\n      \"csslib\":\"unknown\",\r\n      \"cupertino_icons\":\"unknown\",\r\n      \"darq\":\"unknown\",\r\n      \"dart\":\"unknown\",\r\n      \"dbus\":\"unknown\",\r\n      \"delayed_display\":\"unknown\",\r\n      \"device_info_plus\":\"unknown\",\r\n      \"device_info_plus_platform_interface\":\"unknown\",\r\n      \"dio\":\"unknown\",\r\n      \"dio_http2_adapter\":\"unknown\",\r\n      \"disk_space\":\"unknown\",\r\n      \"double-conversion\":\"unknown\",\r\n      \"dropdown_button2\":\"unknown\",\r\n      \"encrypt\":\"unknown\",\r\n      \"engine\":\"unknown\",\r\n      \"etc1\":\"unknown\",\r\n      \"etc_decoder\":\"unknown\",\r\n      \"executor\":\"unknown\",\r\n      \"expandable\":\"unknown\",\r\n      \"expat\":\"unknown\",\r\n      \"fake_async\":\"unknown\",\r\n      \"fallback_root_certificates\":\"unknown\",\r\n      \"feedback\":\"unknown\",\r\n      \"ffi\":\"unknown\",\r\n      \"ffx_spd\":\"unknown\",\r\n      \"fiat\":\"unknown\",\r\n      \"file\":\"unknown\",\r\n      \"file_picker\":\"unknown\",\r\n      \"firebase_core\":\"unknown\",\r\n      \"firebase_core_platform_interface\":\"unknown\",\r\n      \"firebase_core_web\":\"unknown\",\r\n      \"firebase_messaging\":\"unknown\",\r\n      \"firebase_messaging_platform_interface\":\"unknown\",\r\n      \"firebase_messaging_web\":\"unknown\",\r\n      \"fixnum\":\"unknown\",\r\n      \"flatbuffers\":\"unknown\",\r\n      \"flutter\":\"unknown\",\r\n      \"flutter_colorpicker\":\"unknown\",\r\n      \"flutter_file_dialog\":\"unknown\",\r\n      \"flutter_iconpicker\":\"unknown\",\r\n      \"flutter_keyboard_visibility\":\"unknown\",\r\n      \"flutter_keyboard_visibility_linux\":\"unknown\",\r\n      \"flutter_keyboard_visibility_macos\":\"unknown\",\r\n      \"flutter_keyboard_visibility_platform_interface\":\"unknown\",\r\n      \"flutter_keyboard_visibility_web\":\"unknown\",\r\n      \"flutter_keyboard_visibility_windows\":\"unknown\",\r\n      \"flutter_lints\":\"unknown\",\r\n      \"flutter_local_notifications\":\"unknown\",\r\n      \"flutter_local_notifications_linux\":\"unknown\",\r\n      \"flutter_local_notifications_platform_interface\":\"unknown\",\r\n      \"flutter_native_splash\":\"unknown\",\r\n      \"flutter_plugin_android_lifecycle\":\"unknown\",\r\n      \"flutter_spinbox\":\"unknown\",\r\n      \"flutter_svg\":\"unknown\",\r\n      \"flutter_text_styled\":\"unknown\",\r\n      \"flutter_treeview\":\"unknown\",\r\n      \"freetype2\":\"unknown\",\r\n      \"fuchsia_sdk\":\"unknown\",\r\n      \"geolocator\":\"unknown\",\r\n      \"geolocator_android\":\"unknown\",\r\n      \"geolocator_apple\":\"unknown\",\r\n      \"geolocator_platform_interface\":\"unknown\",\r\n      \"geolocator_web\":\"unknown\",\r\n      \"geolocator_windows\":\"unknown\",\r\n      \"get\":\"unknown\",\r\n      \"get_storage\":\"unknown\",\r\n      \"glfw\":\"unknown\",\r\n      \"glslang\":\"unknown\",\r\n      \"google_maps\":\"unknown\",\r\n      \"google_maps_flutter\":\"unknown\",\r\n      \"google_maps_flutter_android\":\"unknown\",\r\n      \"google_maps_flutter_ios\":\"unknown\",\r\n      \"google_maps_flutter_platform_interface\":\"unknown\",\r\n      \"google_maps_flutter_web\":\"unknown\",\r\n      \"google_mlkit_barcode_scanning\":\"unknown\",\r\n      \"google_mlkit_commons\":\"unknown\",\r\n      \"harfbuzz\":\"unknown\",\r\n      \"html\":\"unknown\",\r\n      \"http\":\"unknown\",\r\n      \"http2\":\"unknown\",\r\n      \"http_parser\":\"unknown\",\r\n      \"icu\":\"unknown\",\r\n      \"image\":\"unknown\",\r\n      \"include\":\"unknown\",\r\n      \"inja\":\"unknown\",\r\n      \"intl\":\"unknown\",\r\n      \"ionicons\":\"unknown\",\r\n      \"ios_utsname_ext\":\"unknown\",\r\n      \"js\":\"unknown\",\r\n      \"js_wrapping\":\"unknown\",\r\n      \"json\":\"unknown\",\r\n      \"khronos\":\"unknown\",\r\n      \"latlong2\":\"unknown\",\r\n      \"leak_tracker\":\"unknown\",\r\n      \"leak_tracker_flutter_testing\":\"unknown\",\r\n      \"leak_tracker_testing\":\"unknown\",\r\n      \"libXNVCtrl\":\"unknown\",\r\n      \"libcxx\":\"unknown\",\r\n      \"libcxxabi\":\"unknown\",\r\n      \"libjpeg-turbo\":\"unknown\",\r\n      \"libjxl\":\"unknown\",\r\n      \"libmicrohttpd\":\"unknown\",\r\n      \"libpng\":\"unknown\",\r\n      \"libtess2\":\"unknown\",\r\n      \"libwebp\":\"unknown\",\r\n      \"lints\":\"unknown\",\r\n      \"map_launcher\":\"unknown\",\r\n      \"matcher\":\"unknown\",\r\n      \"material_color_utilities\":\"unknown\",\r\n      \"meta\":\"unknown\",\r\n      \"mime\":\"unknown\",\r\n      \"nested\":\"unknown\",\r\n      \"nm\":\"unknown\",\r\n      \"omni_datetime_picker\":\"unknown\",\r\n      \"package_info_plus\":\"unknown\",\r\n      \"package_info_plus_platform_interface\":\"unknown\",\r\n      \"path\":\"unknown\",\r\n      \"path_parsing\":\"unknown\",\r\n      \"path_provider\":\"unknown\",\r\n      \"path_provider_android\":\"unknown\",\r\n      \"path_provider_foundation\":\"unknown\",\r\n      \"path_provider_linux\":\"unknown\",\r\n      \"path_provider_platform_interface\":\"unknown\",\r\n      \"path_provider_windows\":\"unknown\",\r\n      \"pdf_render\":\"unknown\",\r\n      \"perfetto\":\"unknown\",\r\n      \"permission_handler\":\"unknown\",\r\n      \"permission_handler_android\":\"unknown\",\r\n      \"permission_handler_apple\":\"unknown\",\r\n      \"permission_handler_html\":\"unknown\",\r\n      \"permission_handler_platform_interface\":\"unknown\",\r\n      \"permission_handler_windows\":\"unknown\",\r\n      \"petitparser\":\"unknown\",\r\n      \"platform\":\"unknown\",\r\n      \"platform_detect\":\"unknown\",\r\n      \"plugin_platform_interface\":\"unknown\",\r\n      \"pluto_grid\":\"unknown\",\r\n      \"pointycastle\":\"unknown\",\r\n      \"process\":\"unknown\",\r\n      \"provider\":\"unknown\",\r\n      \"qr\":\"unknown\",\r\n      \"qr_flutter\":\"unknown\",\r\n      \"quiver\":\"unknown\",\r\n      \"rapidjson\":\"unknown\",\r\n      \"reorderables\":\"unknown\",\r\n      \"rxdart\":\"unknown\",\r\n      \"sanitize_html\":\"unknown\",\r\n      \"scroll_to_index\":\"unknown\",\r\n      \"sentry\":\"unknown\",\r\n      \"sentry_flutter\":\"unknown\",\r\n      \"shaderc\":\"unknown\",\r\n      \"share_plus\":\"unknown\",\r\n      \"share_plus_platform_interface\":\"unknown\",\r\n      \"shimmer\":\"unknown\",\r\n      \"skia\":\"unknown\",\r\n      \"source_span\":\"unknown\",\r\n      \"spirv-cross\":\"unknown\",\r\n      \"spring_animation\":\"unknown\",\r\n      \"sprintf\":\"unknown\",\r\n      \"sqlite\":\"unknown\",\r\n      \"stack_trace\":\"unknown\",\r\n      \"stream_channel\":\"unknown\",\r\n      \"stream_transform\":\"unknown\",\r\n      \"string_scanner\":\"unknown\",\r\n      \"syncfusion_flutter_charts\":\"unknown\",\r\n      \"syncfusion_flutter_core\":\"unknown\",\r\n      \"syncfusion_flutter_datepicker\":\"unknown\",\r\n      \"term_glyph\":\"unknown\",\r\n      \"test_api\":\"unknown\",\r\n      \"timezone\":\"unknown\",\r\n      \"to_screen_location\":\"unknown\",\r\n      \"tonic\":\"unknown\",\r\n      \"txt\":\"unknown\",\r\n      \"typed_data\":\"unknown\",\r\n      \"uni_links\":\"unknown\",\r\n      \"uni_links_platform_interface\":\"unknown\",\r\n      \"uni_links_web\":\"unknown\",\r\n      \"universal_io\":\"unknown\",\r\n      \"url_launcher\":\"unknown\",\r\n      \"url_launcher_android\":\"unknown\",\r\n      \"url_launcher_ios\":\"unknown\",\r\n      \"url_launcher_linux\":\"unknown\",\r\n      \"url_launcher_macos\":\"unknown\",\r\n      \"url_launcher_platform_interface\":\"unknown\",\r\n      \"url_launcher_web\":\"unknown\",\r\n      \"url_launcher_windows\":\"unknown\",\r\n      \"uuid\":\"unknown\",\r\n      \"vector_graphics\":\"unknown\",\r\n      \"vector_graphics_codec\":\"unknown\",\r\n      \"vector_graphics_compiler\":\"unknown\",\r\n      \"vector_math\":\"unknown\",\r\n      \"visibility_detector\":\"unknown\",\r\n      \"vm_service\":\"unknown\",\r\n      \"vulkan\":\"unknown\",\r\n      \"vulkan-headers\":\"unknown\",\r\n      \"vulkan-utility-libraries\":\"unknown\",\r\n      \"vulkan-validation-layers\":\"unknown\",\r\n      \"vulkan_memory_allocator\":\"unknown\",\r\n      \"wakelock\":\"unknown\",\r\n      \"wakelock_macos\":\"unknown\",\r\n      \"wakelock_platform_interface\":\"unknown\",\r\n      \"wakelock_web\":\"unknown\",\r\n      \"wakelock_windows\":\"unknown\",\r\n      \"web\":\"unknown\",\r\n      \"web_locale_keymap\":\"unknown\",\r\n      \"web_test_fonts\":\"unknown\",\r\n      \"web_unicode\":\"unknown\",\r\n      \"win32\":\"unknown\",\r\n      \"win32_registry\":\"unknown\",\r\n      \"wuffs\":\"unknown\",\r\n      \"xdg_directories\":\"unknown\",\r\n      \"xml\":\"unknown\",\r\n      \"xxhash\":\"unknown\",\r\n      \"yaml\":\"unknown\",\r\n      \"zlib\":\"unknown\"\r\n   },\r\n   \"nodestore_insert\":1710307583.271607,\r\n   \"received\":1710307581.88577,\r\n   \"sdk\":{\r\n      \"name\":\"sentry.dart.flutter\",\r\n      \"version\":\"7.17.0\",\r\n      \"integrations\":[\r\n         \"isolateErrorIntegration\",\r\n         \"widgetsFlutterBindingIntegration\",\r\n         \"OnErrorIntegration\",\r\n         \"flutterErrorIntegration\",\r\n         \"widgetsBindingIntegration\",\r\n         \"nativeSdkIntegration\",\r\n         \"loadImageListIntegration\",\r\n         \"debugPrintIntegration\",\r\n         \"loadReleaseIntegration\",\r\n         \"nativeAppStartIntegration\"\r\n      ],\r\n      \"packages\":[\r\n         {\r\n            \"name\":\"pub:sentry\",\r\n            \"version\":\"7.17.0\"\r\n         },\r\n         {\r\n            \"name\":\"pub:sentry_flutter\",\r\n            \"version\":\"7.17.0\"\r\n         }\r\n      ]\r\n   },\r\n   \"timestamp\":1710307554.535,\r\n   \"title\":\"_TypeError: Null check operator used on a null value\",\r\n   \"type\":\"error\",\r\n   },\r\n   \"version\":\"7\"\r\n}\r\n```"],"labels":["c: crash","platform-android","framework","f: focus","a: release","team-android"]},{"title":"[Web] White line at screen bottom when resizing the window","body":"### Steps to reproduce\r\n\r\nOn an empty application.\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/101542646\/9d33d2a3-b4d1-4f8e-8536-ce43daca05b2)\r\n\r\n\r\n### Expected results\r\n\r\nDon't get that white line.\r\n\r\n### Actual results\r\n\r\nGetting a bothering white line x.x\r\n\r\n### Code sample\r\n\r\n```dart\r\nvoid main() {\r\n  usePathUrlStrategy();  \r\n  runApp(\r\n    const TWSAdministration(),\r\n  );\r\n}\r\n\r\nclass TWSAdministration extends StatelessWidget {\r\n  const TWSAdministration({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return ColoredBox(\r\n      color: Colors.red,\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration Expand to see the white line, in preview mode might not be visible<\/summary>\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/101542646\/96e92a45-9ef1-46d2-ba11-a3ca179bb573\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Doctor<\/summary>\r\n\r\n```console\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.1, on macOS 14.4 23E214 darwin-arm64, locale en-MX)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[!] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    ! CocoaPods 1.12.1 out of date (1.13.0 is recommended).\r\n        CocoaPods is used to retrieve the iOS and macOS platform side's plugin code that responds to your plugin usage on the Dart\r\n        side.\r\n        Without CocoaPods, plugins will not work on iOS or macOS.\r\n        For more info, see https:\/\/flutter.dev\/platform-plugins\r\n      To upgrade see https:\/\/guides.cocoapods.org\/using\/getting-started.html#updating-cocoapods for instructions.\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.2)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (2 available)\r\n[\u2713] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>","comments":["Reproduced this issue on the latest Flutter stable and master channel. \r\n\r\n- The issue occurs on Web but not on macOS app. It is not only on Canvaskit, but also on HTML renderer.\r\n- This also appears on the previous stable release 3.16.9. \r\n- I also see the issue without using `usePathUrlStrategy`.\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const TWSAdministration(),\r\n  );\r\n}\r\n\r\nclass TWSAdministration extends StatelessWidget {\r\n  const TWSAdministration({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Container(\r\n      color: Colors.red,\r\n    );\r\n  }\r\n}\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-2.0.pre.72, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-2.0.pre.72 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 087b15ae0d (39 minutes ago), 2024-03-10 22:33:27 -0400\r\n    \u2022 Engine revision d13999c0ca\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.1)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: Browsing on the local area network for iPad. Ensure the device is unlocked and attached with a cable or associated with the same local area network as this Mac.\r\n      The device must be opted into Developer Mode to connect wirelessly. (code -27)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>"],"labels":["engine","platform-web","c: rendering","e: web_canvaskit","has reproducible steps","P2","team-web","triaged-web","found in release: 3.19","found in release: 3.21"]},{"title":"Youtube video is playing in the background despite the user moving to the next section . ","body":"### Steps to reproduce\n\n1 . on the your first react app page . select the 1st step which is introduction . \r\n2 . under this section there is a youtube video \r\n3 . play the youtube video and move to the next step\r\n4. the video is still playing despite the user moving to the next section . in the background\n\n### Expected results\n\nthe video should be stopped if the user moves to the next section . and only play as long as its erlevant to the section the user is seeing.\n\n### Actual results\n\nthe video is played in the background\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[Paste your output here]\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @2707sukesh \r\nPlease try to provide all information indicated in the template so that we can address the issue properly. More specifically, please provide the following information:\r\n- A [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example)\r\n- The output of `flutter doctor -v`\r\n- Which environment did this issue happen in? (Android\/iOS\/Web\/MacOS\/Windows\/Linux)\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"[Flutter Web] Create proof of concept wrappers for focus management","body":"### Use case\n\nAs part of https:\/\/github.com\/flutter\/flutter\/issues\/137443 we're adding new capabilities to the web engine to report view focus changes. \n\n### Proposal\n\nUntil the framework is able to properly handle these signals we should create wrappers that will help us validate these changes. \r\n\r\nFor example https:\/\/github.com\/tugorez\/flutter_focus\/blob\/main\/lib\/focusable_app.dart works with full mode and embedded apps by wrapping them like https:\/\/github.com\/tugorez\/flutter_focus\/blob\/main\/lib\/main_with_focus_handlers.dart","comments":["I guess this is mainly implemented on the framework side so will also add framework labels.","Alternatively, maybe help this land?\r\n\r\n* https:\/\/github.com\/flutter\/flutter\/pull\/143259"],"labels":["c: new feature","framework","platform-web","c: proposal","f: focus","P2","team-web","triaged-web"]},{"title":"[in_app_purchase_android] Refactor listener to be created in implementation. ","body":"https:\/\/github.com\/flutter\/packages\/pull\/6162#discussion_r1518252316","comments":[],"labels":["p: in_app_purchase","package","team-android"]},{"title":"Need a reverse parse from .rfw to .rfwtxt tool","body":"### Use case\r\n\r\nI can parse .rfwtxt to .rfw file, below codes from example\/remote\/remote_widget_libraryies\/encoder.dart\r\n```\r\nimport 'dart:io';\r\n\r\nimport 'package:rfw\/formats.dart';\r\n\r\nvoid main(List<String> arguments) {\r\n  final String counterApp2 = File('counter_app2.rfwtxt').readAsStringSync();\r\n  File('counter_app2.rfw').writeAsBytesSync(encodeLibraryBlob(parseLibraryFile(counterApp2)));\r\n}\r\n```\r\nNow I want to reverse parse from .rfw to .rfwtxt:\r\n```\r\nimport 'dart:io';\r\nimport 'package:rfw\/formats.dart';\r\n\r\nvoid main() {\r\n  File txtFile = File('counter_app2.rfw');\r\n  File('counter_app2_reverse.rfwtxt').writeAsStringSync(\r\n      decodeLibraryBlob(txtFile.readAsBytesSync()).toString());\r\n}\r\n```\r\nThere are some problems in the reverse parsed file:\r\n1. There are extra braces from the `ConstructorCall.arguments`\r\n2. Some fields need to be String type, like the above example, event & type & tileMode (is an enum), lack of double quote or single quote\r\n3. The `output` fields `null` key from Switch need to convert to `default`\r\n\r\n\r\n### Proposal\r\n\r\nHope there is detailed documentation from the developer team, Are there any plans to develop rfwtxt formatter?","comments":["The `toString` is intended for debugging, not re-encoding. Should be relatively easy to implement an encoder though if anyone wants to do that. I expect the tricker parts will be figuring out unique ways to refer to builders and state and so on. Maintaining the semantics in the face of name clashes.","For prioritization purposes, can you talk about the motivation for this feature?","> The `toString` is intended for debugging, not re-encoding. Should be relatively easy to implement an encoder though if anyone wants to do that. I expect the tricker parts will be figuring out unique ways to refer to builders and state and so on. Maintaining the semantics in the face of name clashes.\r\n\r\nThanks for the advice.\r\nIt'll be developer-friendly to manipulate existing .rfw file with the convert and format tool, and it'll be more convenient to develop a code generator tool to convert dart files to .rfwrxt\/.rfw.","> The `toString` is intended for debugging\r\n\r\nIMO, for debugging purposes `toString`'s fidelity to RFW text isn't good enough yet. Currently you need to be familiar with RFW format's implementation for `toString`'s output to make sense.\r\n\r\nIdeally RFW would provide an `encodeLibraryFile`, similar to the binary format's [`encodeLibraryBlob`](https:\/\/pub.dev\/documentation\/rfw\/latest\/rfw\/encodeLibraryBlob.html).\r\n\r\n> Should be relatively easy to implement an encoder though if anyone wants to do that.\r\n\r\nHere's an encoder you can use: https:\/\/github.com\/loic-sharma\/flutter\/blob\/088cc1e582c8de8b840e5eaedf07ee2430dd36cb\/packages\/flutter\/lib\/src\/widgets\/binding.dart#L1446-L1552\r\n\r\nDisclaimer: I took hacky shortcuts. Ideally this would use RFW's real object model.\r\n\r\n> it'll be more convenient to develop a code generator tool to convert dart files to .rfwrxt\/.rfw.\r\n\r\nI prototyped this, here's a demo: https:\/\/www.youtube.com\/watch?v=iKiMp0T3kBw&ab_channel=LoicSharma\r\n\r\nSource code:\r\n\r\n1. https:\/\/github.com\/loic-sharma\/flutter\/tree\/dump_rfw\r\n2. https:\/\/github.com\/loic-sharma\/remote_hot_reload"],"labels":["c: new feature","team-ecosystem","P3","p: rfw","triaged-ecosystem"]},{"title":"[Impeller] YUV\/video\/camera broken on emulators","body":"E.g. the video player example renders the wrong colors when patched to use the `SurfaceProducer` API (as in https:\/\/gist.github.com\/jonahwilliams\/141a2a3a0dda577fcdbf86f115e09783)\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/8620741\/f3b3ef1e-1f0f-49e7-a4f1-8520ef9cd0f3)\r\n\r\nThis can also be seen in the golden test for scenario_app.\r\n\r\nThis does not reproduce on a number of physical devices I've tried (Pixel 7 Pro, Pixel 4, Samsung Galaxy Tab, a Techno Pova based phone) which each use different Adreno\/Mali GPUs. I have not tried on a MediaTek GPU.\r\n\r\nThis still occurs with https:\/\/github.com\/flutter\/engine\/pull\/51262 applied.","comments":["The screenshot above is from an API34 AVD on `emulator 34.1.18` on an Apple Silicon macbook.","I'm looking at this now"],"labels":["engine","c: rendering","P1","e: impeller","team-engine","triaged-engine","e: scenario-app"]},{"title":"Create an auto deploy workflow for discord tree-status-bot","body":"### Type of Request\n\ninfra task\n\n### Infrastructure Environment\n\nGCP, tree-status-bot\n\n### What is happening?\n\nThe current code for discord tree status bot is not auto deployed. We need to create a cloud job to auto deploy changes from the source location https:\/\/github.com\/flutter\/cocoon\/tree\/main\/dev\/tree-status-bot to the cloud function hosting the bot.\n\n### Steps to reproduce\n\nStep 1:\r\nStep 2:\r\n..\r\nStep n:\r\n\n\n### Expected results\n\nI expect to see X when Y is finished.","comments":[],"labels":["team-infra","P3"]},{"title":"Add golden test review process to release cycle","body":"Currently, when we create release builds of the engine, the golden image test results are not checked (automated or manually).  Some of them are not even executed, only certain invocations of \"run_tests.py\" are used.\r\n\r\nWe'd like to have confidence that our cherry-picks are not causing some failure, so ideally the golden tests would be executed and checked.\r\n\r\nThe golden image results can not be naively uploaded to skia gold because skia gold has a consistent timeline that checks against one branch.  Comparing a golden from a release branch to the main branch would confuse skia gold and lead to situations where there is no correct course forward.\r\n\r\nA potential solution would be to create new tests related to the release branch.  For example `aiks_foo_test.png` could become `aiks_foo_test.png.v12_34_5` for release `12.32.5`.  The tests would first be uploaded with zero cherry-picks and blanket approved.  Those images will then serve as the basis from which cherry-pick golden results will be compared.\r\n\r\ncc @zanderso @matanlurey ","comments":["From the Impeller Weekly: The next steps were to append the release name (branch?) to the test to create a new variant for each release."],"labels":["c: proposal","P1","team-engine","triaged-engine"]},{"title":"[video_player] Some subtitles in VTT file are skipped","body":"### Steps to reproduce\r\n\r\n1. Download any VTT file (I'm using the one from Avengers end game as a test)\r\n2. use setClosedCaptionFile on an already initialized video controller to set the file content\r\n3. add a listener to the controller that prints the `controller.value.caption.text` at each call (and, obviously, also if it is included on a widget)\r\n4. Notice that some lines are completely skipped even if present in the vtt\r\n\r\n### Expected results\r\n\r\nAll of the lines should be displayed and non should be skipped\r\n\r\n### Actual results\r\n```\r\nWEBVTT\r\n\r\n00:07.174 --> 00:09.842\r\nBARTON: Okay, hold on,                                     <-------- Skipped\r\ndon't shoot.\r\n\r\n00:10.928 --> 00:12.679\r\n- You see where you're going?,                             <-------- Skipped\r\n- Mm-hmm.,                                                 <-------- Skipped\r\n\r\n00:12.846 --> 00:13.846\r\nOkay.\r\n\r\n00:14.014 --> 00:15.932\r\nNow, let's worry,                                          <-------- Skipped\r\nabout how you get there.\r\n\r\n00:16.809 --> 00:18.184\r\nGotta move your foot here.,                                <-------- Skipped\r\n\r\n00:18.686 --> 00:20.103\r\nPoint your toe this way.\r\n\r\n00:20.479 --> 00:22.021\r\nYour hips here.\r\n```\r\nand so on\r\n\r\n### Code sample\r\n\r\ndoesn't apply as the setup to reach the bug is pretty complicated\r\n\r\n### Screenshots or Video\r\n\r\n_No response_\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### Flutter Doctor output\r\n\r\nflutter doctor -v\r\n[\u2713] Flutter (Channel stable, 3.16.9, on Microsoft Windows [Versione 10.0.19045.4046], locale it-IT)\r\n    \u2022 Flutter version 3.16.9 on channel stable at C:\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 41456452f2 (6 weeks ago), 2024-01-25 10:06:23 -0800\r\n    \u2022 Engine revision f40e976bed\r\n    \u2022 Dart version 3.2.6\r\n    \u2022 DevTools version 2.28.5\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 33.0.2)\r\n    \u2022 Android SDK at C:\\Users\\bonfr\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 33.0.2\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for more details.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.8.0)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.8.34309.116\r\n    \u2022 Windows 10 SDK version 10.0.22621.0\r\n\r\n[\u2713] Android Studio (version 2021.3)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Versione 10.0.19045.4046]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.94\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.66\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n# PS:\r\nI noticed a similar issue was also opened but I think it was erroneously closed so i opened this new one (#123796)","comments":["Hi @Bonfra04, what version of `video_player` are you using and what platform(s) are you seeing this issue on? \r\n\r\nDoes this happen with every subtitle file? \r\n\r\nWe will need some code and detailed steps to reproduce so that we can investigate this issue. \r\n\r\nThank you ","I'm using video_player: ^2.8.3 on Windows 10; since I need to play HLS content I also tried using fvp: ^0.13.1 or video_player_media_kit: ^1.0.5 as a backend. With any of the two libraries I'm getting the same error so since I'm anyway parsing the HLS file manually to insert the caption file, I'm gonna guess this is not important. I'm working with sensitive data so I cannot provide the exact source. I can try and describe to my best my current setup:\r\n\r\nI have a Stack widget with children the video player and the player controls. After the video has loaded, from the controls it is possible to change the subtitle track. Whenever a subtitle is selected from the menu, this function is called:\r\n```dart\r\nFuture<void> _setCaptions(Uri uri) async {\r\n        if(uri.toString().isEmpty) {\r\n            await this._controller!.setClosedCaptionFile(null);\r\n            return;\r\n        }\r\n\r\n        String captionsString = await http.get(uri.toString());\r\n        HlsPlaylist playlist = await HlsPlaylistParser.create().parseString(uri, captionsString);\r\n        String vttUri = (playlist as HlsMediaPlaylist).segments[0].url!;\r\n        String vttString = await http.get(vttUri);\r\n        await this._controller!.setClosedCaptionFile(Future.value(WebVTTCaptionFile(vttString)));\r\n    }\r\n```\r\nthis function returns correctly and the caption file is loaded.\r\nBefore anything can be selected by the user, a listener is registered on the controller using `this._controller.addListener(this._updateValue)` and, a simplified version of that updateValue function is this one:\r\n```dart\r\n void _updateValue() {\r\n        if(controller.value.caption.text.isNotEmpty)\r\n            print(\"CAP: up - ${this.controller.value.caption.text}\");\r\n        \/\/ ...\r\n    }\r\n```\r\nWith this method it's easy to verify that some lines in the caption file are completely skipped. A more UI friendly approach is to render in the controls a ClosedCaption widget like this:\r\n```dart\r\nif(this._controller?.value.caption.text.isNotEmpty ?? false)\r\n    ClosedCaption(text: this._controller?.value.caption.text ?? \"\")\r\n```\r\nboth these use cases make clear that some lines are skipped, like if the value in the controller is not updated. The listener is triggered so something is going on as the same line gets printed over and over without updating until something happens and a new one appears just to again stick around for too much.\r\n\r\nI'm not sure if posting here the testing caption I'm using of avengers End Game is 100% but Ii think you can find one by googling\r\n\r\n# EDIT\r\nThe same issue is also present on Android with the same setup. It's interesting to note that always the same lines are skipped and it's not random. The same lines are always skipped every time on both Windows and Android ","Hi @Bonfra04, the minimal sample doesn't need to be your actual project. We just need the smallest code sample that we can run with minimal setup that reproduces the video so that we can investigate the issue. \r\n\r\nThank you","ok, I tried to reduce the example to the minimum. The m3u8 file is not as important as this example aims to show the skipped subtitles. I've included a small piece of the vtt file I used for testing. Anyway, I added the code to include a remote one for testing. Let me know if anything else is needed and if you achieve to reproduce the issue.\r\n\r\n```dart\r\nimport 'dart:async';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:video_player\/video_player.dart';\r\nimport 'package:http\/http.dart' as http;\r\nimport 'package:video_player_media_kit\/video_player_media_kit.dart';\r\n\r\nvoid main() {\r\n    VideoPlayerMediaKit.ensureInitialized(\r\n        android: true,\r\n        windows: true,\r\n        linux: true,\r\n    );\r\n    runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n    const MyApp({super.key});\r\n\r\n    @override\r\n    Widget build(BuildContext context) {\r\n        return MaterialApp(\r\n            title: 'Flutter Demo',\r\n            theme: ThemeData(\r\n                colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n                useMaterial3: true,\r\n            ),\r\n            home: const MyHomePage(),\r\n        );\r\n    }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n    const MyHomePage({super.key});\r\n\r\n    @override\r\n    State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n    final String m3u8 = \"https:\/\/demo.unified-streaming.com\/k8s\/features\/stable\/video\/tears-of-steel\/tears-of-steel.ism\/.m3u8\";\r\n    final String vtt = \"http:\/\/foo.com\/file.vtt\";\r\n\r\n    late final VideoPlayerController _controller = VideoPlayerController.networkUrl(Uri.parse(m3u8));\r\n    bool _inited = false;\r\n\r\n    Future<void> _init() async {\r\n        if(_inited) {\r\n            return;\r\n        }\r\n\r\n        await _controller.initialize();\r\n        await _controller.play();\r\n\r\n        _controller.addListener(() { setState(() {\r\n            print(_controller.value.caption.text);\r\n        }); });\r\n        \/\/ String vttString = (await http.get(Uri.parse(vtt))).body; Uncomment this for a remote vtt file\r\n        String vttString = '''WEBVTT\r\n00:07.174 --> 00:09.842\r\nBARTON: Okay, hold on,\r\ndon't shoot.\r\n\r\n00:10.928 --> 00:12.679\r\n- You see where you're going?\r\n- Mm-hmm.\r\n\r\n00:12.846 --> 00:13.846\r\nOkay.\r\n\r\n00:14.014 --> 00:15.932\r\nNow, let's worry\r\nabout how you get there.\r\n\r\n00:16.809 --> 00:18.184\r\nGotta move your foot here.\r\n\r\n00:18.686 --> 00:20.103\r\nPoint your toe this way.\r\n\r\n00:20.479 --> 00:22.021\r\nYour hips here.\r\n\r\n00:22.231 --> 00:23.564\r\nOkay?\r\n\r\n00:24.358 --> 00:25.817\r\n- Can you see?\r\n- Yeah.\r\n\r\n00:25.901 --> 00:26.984\r\n- Are you sure?\r\n- Mm-hmm.''';\r\n        await _controller.setClosedCaptionFile(Future.value(WebVTTCaptionFile(vttString)));\r\n        _inited = true;\r\n    }\r\n\r\n    @override\r\n    void initState() {\r\n        super.initState();\r\n        _init();\r\n    }\r\n\r\n    @override\r\n    Widget build(BuildContext context) {\r\n        return Scaffold(\r\n            body: Stack(\r\n                children: [\r\n                    Center(\r\n                        child: AspectRatio(\r\n                            aspectRatio: _controller.value.aspectRatio,\r\n                            child: VideoPlayer(_controller),\r\n                        ),\r\n                    ),\r\n                    Align(\r\n                        alignment: Alignment.bottomCenter,\r\n                        child: ClosedCaption(text: _controller.value.caption.text),\r\n                    )\r\n                ],\r\n            ),\r\n        );\r\n    }\r\n}\r\n```\r\n\r\n```yaml\r\ndependencies:\r\n  video_player_media_kit: ^1.0.5\r\n  media_kit_libs_video: ^1.0.4\r\n  video_player: ^2.8.3\r\n  http: ^1.1.0\r\n```","Thanks for the code sample. I can reproduce the issue.  \r\n\r\nFrom my logs only the subtitles below are displayed. \r\n\r\nLabeling for further investigation.\r\n\r\n```\r\nflutter: Okay.\r\nflutter: \r\nflutter: Gotta move your foot here.\r\nflutter: \r\nflutter: Point your toe this way.\r\nflutter: \r\nflutter: Your hips here.\r\nflutter: Okay?\r\n```\r\n\r\n<details>\r\n<summary>updated sample<\/summary>\r\n\r\n```dart\r\nimport 'dart:async';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:video_player\/video_player.dart';\r\n\r\nvoid main() {\r\n  runApp(const MyApp());\r\n}\r\n\r\nclass MyApp extends StatelessWidget {\r\n  const MyApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Flutter Demo',\r\n      theme: ThemeData(\r\n        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),\r\n        useMaterial3: true,\r\n      ),\r\n      home: const MyHomePage(),\r\n    );\r\n  }\r\n}\r\n\r\nclass MyHomePage extends StatefulWidget {\r\n  const MyHomePage({super.key});\r\n\r\n  @override\r\n  State<MyHomePage> createState() => _MyHomePageState();\r\n}\r\n\r\nclass _MyHomePageState extends State<MyHomePage> {\r\n  final String m3u8 =\r\n      \"https:\/\/demo.unified-streaming.com\/k8s\/features\/stable\/video\/tears-of-steel\/tears-of-steel.ism\/.m3u8\";\r\n  final String vtt = \"http:\/\/foo.com\/file.vtt\";\r\n\r\n  late final VideoPlayerController _controller =\r\n      VideoPlayerController.networkUrl(Uri.parse(m3u8));\r\n  bool _inited = false;\r\n\r\n  Future<void> _init() async {\r\n    if (_inited) {\r\n      return;\r\n    }\r\n\r\n    await _controller.initialize();\r\n    await _controller.play();\r\n\r\n    _controller.addListener(() {\r\n      setState(() {\r\n        print(_controller.value.caption.text);\r\n      });\r\n    });\r\n    \/\/ String vttString = (await http.get(Uri.parse(vtt))).body; Uncomment this for a remote vtt file\r\n    String vttString = '''WEBVTT\r\n00:07.174 --> 00:09.842\r\nBARTON: Okay, hold on,\r\ndon't shoot.\r\n\r\n00:10.928 --> 00:12.679\r\n- You see where you're going?\r\n- Mm-hmm.\r\n\r\n00:12.846 --> 00:13.846\r\nOkay.\r\n\r\n00:14.014 --> 00:15.932\r\nNow, let's worry\r\nabout how you get there.\r\n\r\n00:16.809 --> 00:18.184\r\nGotta move your foot here.\r\n\r\n00:18.686 --> 00:20.103\r\nPoint your toe this way.\r\n\r\n00:20.479 --> 00:22.021\r\nYour hips here.\r\n\r\n00:22.231 --> 00:23.564\r\nOkay?\r\n\r\n00:24.358 --> 00:25.817\r\n- Can you see?\r\n- Yeah.\r\n\r\n00:25.901 --> 00:26.984\r\n- Are you sure?\r\n- Mm-hmm.''';\r\n    await _controller\r\n        .setClosedCaptionFile(Future.value(WebVTTCaptionFile(vttString)));\r\n    _inited = true;\r\n  }\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    _init();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Stack(\r\n        children: [\r\n          Center(\r\n            child: AspectRatio(\r\n              aspectRatio: _controller.value.aspectRatio,\r\n              child: VideoPlayer(_controller),\r\n            ),\r\n          ),\r\n          Align(\r\n            alignment: Alignment.bottomCenter,\r\n            child: ClosedCaption(text: _controller.value.caption.text),\r\n          )\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v<\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.3, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/nexus\/dev\/sdks\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/nexus\/dev\/sdks\/flutters\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nexus\/dev\/sdks\/flutter. Consider adding \/Users\/nexus\/dev\/sdks\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (4 days ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 Nexus (mobile)       \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile) \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)      \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)         \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n```\r\n[\u2713] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 14.3.1 23D60 darwin-arm64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at \/Users\/nexus\/dev\/sdks\/flutters\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (6 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/nexus\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: \/Users\/nexus\/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode-15.2.0.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.14.3\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at \/Users\/nexus\/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-17.0.7b1000.6-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n    \u2022 IntelliJ at \/Users\/nexus\/Applications\/IntelliJ IDEA Ultimate.app\r\n    \u2022 Flutter plugin version 77.2.2\r\n    \u2022 Dart plugin version 232.10286\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 Nexus (mobile)                  \u2022 00008020-001875E83A38002E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Dean\u2019s iPad (mobile)            \u2022 00008103-000825C811E3401E \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)                 \u2022 macos                     \u2022 darwin-arm64   \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Mac Designed for iPad (desktop) \u2022 mac-designed-for-ipad     \u2022 darwin         \u2022 macOS 14.3.1 23D60 darwin-arm64\r\n    \u2022 Chrome (web)                    \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n<\/details>"],"labels":["p: video_player","package","team-ecosystem","has reproducible steps","P2","triaged-ecosystem","found in release: 3.20","found in release: 3.21"]},{"title":"[in_app_purchase][Mac] channel sent a message from native to Flutter on a non-platform thread","body":"### What package does this bug report belong to?\n\nin_app_purchase\n\n### What target platforms are you seeing this bug on?\n\nmacOS\n\n### Have you already upgraded your packages?\n\nYes\n\n### Dependency versions\n\n<details><summary>pubspec.lock<\/summary>\r\n\r\n```lock\r\n  in_app_purchase:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: in_app_purchase\r\n      sha256: def70fbaa2a274f4d835677459f6f7afc5469de912438f86076e51cbd4cbd5b4\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"3.1.13\"\r\n  in_app_purchase_android:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: in_app_purchase_android\r\n      sha256: c94aebe986723b6f4e4d8551d160c6602e73d0b38bf86a59fb054dfeb44bc1e5\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.1\"\r\n  in_app_purchase_platform_interface:\r\n    dependency: transitive\r\n    description:\r\n      name: in_app_purchase_platform_interface\r\n      sha256: \"412efce2b9238c5ace4f057acad43f793ed06880e366d26ae322e796cadb051a\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"1.3.7\"\r\n  in_app_purchase_storekit:\r\n    dependency: \"direct main\"\r\n    description:\r\n      name: in_app_purchase_storekit\r\n      sha256: \"601ad13be730ca447a0a80badc0dcb60af0f28cd03a18aaf5314cedab87c06a0\"\r\n      url: \"https:\/\/pub.dev\"\r\n    source: hosted\r\n    version: \"0.3.12\"\r\n```\r\n\r\n<\/details>\r\n\n\n### Steps to reproduce\n\n1. I installed these 3 packages related to in_app_purchase:\r\n```\r\nin_app_purchase: ^3.1.13\r\nin_app_purchase_storekit: ^0.3.12\r\nin_app_purchase_android: ^0.3.1\r\n```\r\n2. I run the MacOS app\n\n### Expected results\n\nNo error happened for in_app_purchase.\n\n### Actual results\n\nThis error is shown in the log\r\n```\r\n[ERROR:flutter\/shell\/common\/shell.cc(1038)] The 'plugins.flutter.io\/in_app_purchase' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.\r\n```\r\nThe app is still running, no crash. But this problem should not happen.\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n  _listenToPurchaseUpdated() {\r\n    handlePurchase(List<PurchaseDetails> purchaseDetailsList) async {\r\n      print('listen: ${purchaseDetailsList.length}');\r\n      \/\/ complete all pending purchases\r\n      for (var purchaseDetails in purchaseDetailsList) {\r\n        if (purchaseDetails.pendingCompletePurchase) {\r\n          await _iap.completePurchase(purchaseDetails);\r\n        }\r\n      }\r\n\r\n      \/\/ process only if started\r\n      if (!_started) return;\r\n\r\n      bool isApplePurchasing = false;\r\n\r\n      \/\/ only care the last purchase\r\n      final purchaseDetails = purchaseDetailsList.lastOrNull;\r\n      if (purchaseDetails != null) {\r\n        if (purchaseDetails.status == PurchaseStatus.purchased ||\r\n            purchaseDetails.status == PurchaseStatus.restored) {\r\n          final bool valid = await _verifyPurchase(purchaseDetails);\r\n          if (valid) {\r\n            await _deliverProduct(purchaseDetails);\r\n          } else {\r\n            \/\/ TODO: handle invalid purchase\r\n          }\r\n        }\r\n\r\n        if (purchaseDetails.status == PurchaseStatus.pending &&\r\n            purchaseDetails is AppStorePurchaseDetails &&\r\n            purchaseDetails.skPaymentTransaction.transactionState ==\r\n                SKPaymentTransactionStateWrapper.purchasing) {\r\n          isApplePurchasing = true;\r\n        }\r\n      }\r\n\r\n      \/\/ Complete the purchase process\r\n      if (_purchaseCompleter != null) {\r\n        bool shouldCompletePurchaseProcess = true;\r\n\r\n        if (isApplePurchasing) {\r\n          shouldCompletePurchaseProcess = false;\r\n        }\r\n\r\n        if (shouldCompletePurchaseProcess) {\r\n          _updateUserPurchasedStatus();\r\n          _purchaseCompleter!.complete(isPurchased ?? false);\r\n          _purchaseCompleter = null;\r\n        }\r\n      }\r\n\r\n      \/\/ Complete the restore process\r\n      if (_restoreCompleter != null) {\r\n        _updateUserPurchasedStatus();\r\n        _restoreCompleter!.complete(isPurchased ?? false);\r\n        _restoreCompleter = null;\r\n      }\r\n    }\r\n\r\n    final purchaseUpdated = _iap.purchaseStream;\r\n    _purchasedSubscription = purchaseUpdated.listen(handlePurchase);\r\n  }\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Videos\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[ERROR:flutter\/shell\/common\/shell.cc(1038)] The 'plugins.flutter.io\/in_app_purchase' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.\r\nSee https:\/\/docs.flutter.dev\/platform-integration\/platform-channels#channels-and-platform-threading for more information.\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[\u2713] Flutter (Channel stable, 3.19.0, on macOS 14.1.2 23B92 darwin-arm64, locale\r\n    en-VN)\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2023.1)\r\n[\u2713] VS Code (version 1.87.0)\r\n[\u2713] Connected device (4 available)\r\n[\u2713] Network resources\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @vietstone-ng \r\nDoes the issue occur right after opening the app or making a purchase? I tried running the package [example](https:\/\/github.com\/flutter\/packages\/tree\/main\/packages\/in_app_purchase\/in_app_purchase\/example) but didn't see the issue. \r\n\r\nCould you also share the entire of stack trace if any?","[ERROR:flutter\/shell\/common\/shell.cc(1038)] The 'plugins.flutter.io\/in_app_purchase' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.\r\n\r\n![Screenshot 2024-03-22 at 05 20 46](https:\/\/github.com\/flutter\/flutter\/assets\/93797588\/564adb59-554d-43ab-a540-6f39af2a7176)\r\n\r\n"],"labels":["waiting for customer response","in triage"]},{"title":"createImageFromImageBitmap throws when passed valid types","body":"### Steps to reproduce\n\nUse createImageFromImageBitmap with a video element.\n\n### Expected results\n\nDon't throw exception when passed valid data.\r\n\r\nhttps:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/createImageBitmap\r\n\r\nThis function supports all sorts of sources, not just ImageBitmaps, but the dart code has an unneeded instanceof check inserted. This should just be deleted, or it should be corrected to properly check against the valid types\r\n\r\n```dart\r\n\r\n if (!domInstanceOfString(imageSource, 'ImageBitmap')) {\r\n    throw ArgumentError('Image source $imageSource is not an ImageBitmap.', 'imageSource');\r\n  }\r\n\r\n```\r\n\r\n[HTMLImageElement](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/HTMLImageElement)\r\n[SVGImageElement](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/SVGImageElement)\r\n[HTMLVideoElement](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/HTMLVideoElement)\r\n[HTMLCanvasElement](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/HTMLCanvasElement)\r\n[Blob](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Blob)\r\n[ImageData](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/ImageData)\r\n[ImageBitmap](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/ImageBitmap)\r\n[OffscreenCanvas](https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/OffscreenCanvas)\r\n\r\nThis will be blocking #144591 unless the video_player package manually calls the browser function and then passes the result forward:\r\n\r\n```dart\r\n\r\n    final JSAny tmp =\r\n        await promiseToFuture<JSAny>(web.window.createImageBitmap(widget.element));\r\n    final ui.Image img = await ui_web.createImageFromImageBitmap(tmp);\r\n    \r\n```\n\n### Actual results\n\nThrows exception\n\n### Code sample\n\n```html\r\n<video src='somesource' id='sample' \/>\r\n```\r\n\r\n```dart\r\n\r\nimport 'dart:web';\r\nimport 'dart:ui_web' as ui_web;\r\n\r\ncreateImageFromImageBitmap(document.getElementById('sample')); \/\/ throws\r\n\r\n```\r\n\r\n\n\n### Screenshots or Video\n\nhttps:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/createImageBitmap\r\n\r\n\n\n### Logs\n\n_No response_\n\n### Flutter Doctor output\n\nn\/a","comments":["Could you please share a complete sample code so that we can verify this?","@huycozy \r\n\r\nhttps:\/\/github.com\/flutter\/packages\/pull\/6286\r\n\r\nImplementing this pull request was the source of the bug. This code:\r\n\r\n```dart\r\n\r\n  final newSource =\r\n        await promiseToFuture(web.window.createImageBitmap(widget.element))\r\n            as web.ImageBitmap;\r\n    final ui.Image img = await ui_web.createImageFromImageBitmap(newSource!);\r\n\r\n  \r\n    \r\n```\r\n\r\nShould be simply:\r\n\r\n```dart\r\n\r\n final ui.Image = await ui_web.createImageFromImageBitmap(widget.element);\r\n \r\n ```\r\n \r\nIf you pull down the commit for the pull request, change your pubspec.yaml to reference the video player from pull request package instead of the pub.dev version, and make that change in video_player_web.dart:240 to remove the workaround, you'll see the crash with this sample:\r\n \r\n ```dart\r\n \r\n\r\n \r\nimport 'dart:async';\r\n\r\nimport 'package:flutter\/material.dart';\r\nimport 'package:video_player\/video_player.dart';\r\nimport 'package:video_player_web\/video_player_web.dart';\r\n\r\nvoid main() {\r\n   runApp(const VideoPlayerApp());\r\n}\r\n\r\nclass VideoPlayerApp extends StatelessWidget {\r\n  const VideoPlayerApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return const MaterialApp(\r\n      title: 'Video Player Demo',\r\n      home: VideoPlayerScreen(),\r\n    );\r\n  }\r\n}\r\n\r\nclass VideoPlayerScreen extends StatefulWidget {\r\n  const VideoPlayerScreen({super.key});\r\n\r\n  @override\r\n  State<VideoPlayerScreen> createState() => _VideoPlayerScreenState();\r\n}\r\n\r\nclass _VideoPlayerScreenState extends State<VideoPlayerScreen> {\r\n  late VideoPlayerController _controller;\r\n  late Future<void> _initializeVideoPlayerFuture;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n\r\n    \/\/ Create and store the VideoPlayerController. The VideoPlayerController\r\n    \/\/ offers several different constructors to play videos from assets, files,\r\n    \/\/ or the internet.\r\n    _controller = VideoPlayerController.networkUrl(\r\n      Uri.parse(\r\n        'https:\/\/flutter.github.io\/assets-for-api-docs\/assets\/videos\/butterfly.mp4',\r\n      ),\r\n    );\r\n\r\n    \/\/ Initialize the controller and store the Future for later use.\r\n    _initializeVideoPlayerFuture = _controller.initialize();\r\n\r\n    \/\/ Use the controller to loop the video.\r\n    _controller.setLooping(true);\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    \/\/ Ensure disposing of the VideoPlayerController to free up resources.\r\n    _controller.dispose();\r\n\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Butterfly Video'),\r\n      ),\r\n      \/\/ Use a FutureBuilder to display a loading spinner while waiting for the\r\n      \/\/ VideoPlayerController to finish initializing.\r\n      body: FutureBuilder(\r\n        future: _initializeVideoPlayerFuture,\r\n        builder: (context, snapshot) {\r\n          if (snapshot.connectionState == ConnectionState.done) {\r\n            \/\/ If the VideoPlayerController has finished initialization, use\r\n            \/\/ the data it provides to limit the aspect ratio of the video.\r\n            return AspectRatio(\r\n              aspectRatio: _controller.value.aspectRatio,\r\n              \/\/ Use the VideoPlayer widget to display the video.\r\n              child: VideoPlayer(_controller),\r\n            );\r\n          } else {\r\n            \/\/ If the VideoPlayerController is still initializing, show a\r\n            \/\/ loading spinner.\r\n            return const Center(\r\n              child: CircularProgressIndicator(),\r\n            );\r\n          }\r\n        },\r\n      ),\r\n      floatingActionButton: FloatingActionButton(\r\n        onPressed: () {\r\n          \/\/ Wrap the play or pause in a call to `setState`. This ensures the\r\n          \/\/ correct icon is shown.\r\n          setState(() {\r\n            \/\/ If the video is playing, pause it.\r\n            if (_controller.value.isPlaying) {\r\n              _controller.pause();\r\n            } else {\r\n              \/\/ If the video is paused, play it.\r\n              _controller.play();\r\n            }\r\n          });\r\n        },\r\n        \/\/ Display the correct icon depending on the state of the player.\r\n        child: Icon(\r\n          _controller.value.isPlaying ? Icons.pause : Icons.play_arrow,\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n ```\r\n \r\n \r\n ","FYI, the `ui_web` API is specifically called `createImagefromImageBitmap` because it only actually accepts `ImageBitmap` objects, not other image sources. This was my first pass at this API and I kept it intentionally constrained for a couple of reasons:\n\n* `ImageBitmap` objects are essentially immutable, as opposed to objects like `HTMLVideoElement`. With immutable objects like `ImageBitmap`, the rendering behavior won't change based on *when* we actually use the resource, but for mutable objects we may have subtle behavior changes if some of our rendering code defers use of the object, especially across an async boundary.\n\n* `ImageBitmap` objects are transferable, but not all image sources are. This is particularly important for the experimental skwasm renderer which does its rendering on a web worker.\n\n* `createImageFromImageBitmap` takes ownership of the image bitmap itself, and therefore will explicitly dispose of it when the engine is done with it. That is probably less likely to be the case for something like a `HTMLVideoElement` where the calling code probably retains ownership of the object after it has made the API call.\n\nThis was sort of a simplification decision for the first pass at this API. I could imagine ways that this contract could be more flexible, and the engine could do its own copying to an `ImageBitmap` object internally if it needed. But for the first pass, I decided to basically pass those concerns onto the calling code instead. Definitely open to revisiting this to make a richer API but since it involved some more nuanced design decisions I decided a smaller scoped change would be a good first step.","@eyebrowsoffire I think the issue is that no one needs to call this API with an ImageBitmap, so while it may make sense to constrain the API, people need to be able to get a VideoFrame, a VideoElement, a native SVG, etc. into flutter. Right now, that requires a double copy and calling the browser function on your own with js interop for every scenario that needs to use this API that I'm aware of (SVG, WebRTC, Video). Are there some other places where someone is attempting to use this API? Ok, it's doable, but it's wasteful and it results in extra code and dealing manually with disposal of a temporary ImageBitmap anyway.\r\n\r\nWhile unfortunately you can't transfer DOM elements, for cases like media streaming there are solutions which let you use transferable objects like VideoFrame\/WebCodecs where the API gives you a VideoFrame directly which can then be bound directly to a WebGL texture. VideoFrames are transferable resources and you really don't want to go to ImageBitmap, because the videos are often in a different color space like YUV and you want to get them to the GPU or over to the worker without a bunch of extra mutation and GC. Maybe #139271 could make this more efficient, but if you have to create image bitmaps for every frame just to get it into the texture, you're already potentially starting out in a bad spot from a GC perspective in a lot of browsers.\r\n\r\nRight now, there's no pathway for anything that's not an ImageBitmap, which prevents doing these types of things as efficiently as they could be done. Certainly one approach of using a VideoFrame is createImageBitmap from the VideoFrame, but that often requires YUV->RGB conversion and extra memory being used so it's probably not the ideal path if it can be avoided.\r\n\r\nIdeal end state would be a zero copy way to use the types of things I can get into a WebGL texture with zero copies into a flutter WebGL texture with zero copies. I get there are some constraints because of the decision to move the renderer into web workers, but it's a lot of extra hoops to jump through right now and extra bad in non chrome browsers that don't have as efficient pathways to move these resources around.","@jezell yep I agree with everything you're saying. The way the API is set up right now does end up causing extra unnecessary copies in some cases. Supporting VideoFrame itself should be straightforward and have the same semantics as ImageBitmap (immutable and transferable), so that might be a good place to start. But a separate API that doesn't transfer ownership might be needed for HTML elements.","@eyebrowsoffire wonder if exposing ```CanvasKit.MakeImageFromCanvasImageSource``` as an alternative would make it a little easier to avoid this and provide a more generic version? \r\n\r\nhttps:\/\/github.com\/google\/skia\/blob\/main\/modules\/canvaskit\/future_apis\/ImageDecoder.md\r\n\r\nIf you always have to create an ImageBitmap to use this specific API, maybe it should accept ImageBitmap instead of JSAny in the signature to get rid of the confusion rather than doing a runtime check? Would also make the docs a little nicer since they could link straight to the ImageBitmap + createImageBitmap in the web package.","@jezell Hmm, I'm following the given steps [above](https:\/\/github.com\/flutter\/flutter\/issues\/144815#issuecomment-1986103666), and running the example on Chrome but can't see the crash. I'm sure that I'm on `video_player_web: 2.4.0` which is from your PR above."],"labels":["waiting for customer response","in triage"]},{"title":"Update embedders to use new multi-view embedder APIs","body":"Part of https:\/\/github.com\/flutter\/flutter\/issues\/142845\r\n\r\nRequires https:\/\/github.com\/flutter\/flutter\/issues\/144806","comments":[],"labels":["engine","platform-mac","platform-windows","P2","a: multi window","team-desktop","triaged-desktop"]},{"title":"A test suite I expect to be running (as part of a `bringup` build) is missing","body":"### Type of Request\n\nbug\n\n### Infrastructure Environment\n\nLUCI\n\n### What is happening?\n\nA variant (different set of arguments) of a test does not appear on LUCI.\r\n\r\n1. [Configuration](https:\/\/github.com\/search?q=repo%3Aflutter%2Fengine+path%3Aci%2Fbuilders+%22--impeller-backend%3Dopengles%22+%22run_android_tests.dart%22+%22--force-surface-producer-surface-texture%22&type=code)\r\n2. It's partner set, without a flag set, is [here](https:\/\/github.com\/search?q=repo%3Aflutter%2Fengine+path%3Aci%2Fbuilders+%22--impeller-backend%3Dopengles%22+%22run_android_tests.dart%22&type=code).\r\n\r\nHowever, only the second set (without \"SurfaceTexture\") appears to be running on CI:\r\nhttps:\/\/ci.chromium.org\/ui\/p\/flutter\/builders\/staging\/Linux%20Staging%20Engine%20Drone\/92083\/overview.\r\n\r\nMaybe this is a \"feature\" of bringup where a failed test means all of the steps are skipped? I'm not sure. As a result of one of the sets not running, I can't approve the digests for Skia Gold.\n\n### Steps to reproduce\n\n_No response_\n\n### Expected results\n\nI expect to see both sets of tests run.","comments":["This is expected that we do not want to continue running remaining tests if any earlier failure happens to save resources.\r\n\r\nThese tests are running synchronously rather than in parallel. The whole build failed\/exited after the first test failure (even after retry).\r\n\r\nIs the request to continue running all other tests regardless of earlier failure? is this needed considering this is a failed build anyway?\r\n\r\n"],"labels":["team-infra","P2","triaged-infra"]},{"title":"about connected devices in flutter","body":"I have tried many times to find the location of the error, but still with the same information as below:\r\n```\r\n[\u2620] Connected device (the doctor check crashed)\r\n     X Due to an error, the doctor's check was not complete. If the error message below is not helpful, please let us know\r\n       about this issue at https:\/\/github.com\/flutter\/flutter\/issues.\r\n     X Error: Unable to run \"adb\", check your Android SDK installation and ANDROID_HOME environment variable:\r\n       C:\\Users\\acer\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe\r\n```\r\nI've fixed it many times but I still check in the command prompt and the results are the same\r\nplease provide a solution, thank you.","comments":["It was working fine the day before yesterday for me. I just tried to start my app today and couldn't connect to devices.  \r\nI'm getting same error as @Nada169701 when I run `flutter doctor`, Android studio also says no connected devices.\r\nWhat happened?","It seems flutter was unable to determine your android SDK path on your system. Did you try ``` flutter config --android-sdk \/path\/to\/android\/sdk ``` to add the path to your flutter configuration?","That's strange because it was working the day before yesterday. Now I was able to configure it using `flutter config --android-studio-dir=\"C:\\Program Files\\Android\\Android Studio1\"`\r\nAnd then restarting the my laptop. ","@Nada169701 \r\nCheck [this](https:\/\/github.com\/flutter\/flutter\/issues\/142996#issuecomment-1932542584) and see if it helps to resolve your case or not.\r\n","Hi! I also have this problem. In my case, the combination is:\r\n\r\n- Fedora 39\r\n- Flutter 3.19.4\r\n- Android SDK Build-Tools 35-rc2\r\n- Android SDK Platform-Tools 35.0.1\r\n- Pixel 6a with Android 14"],"labels":["waiting for customer response","in triage"]},{"title":"Add new multi-view embedder APIs","body":"Design doc: https:\/\/flutter.dev\/go\/multi-view-embedder-apis\r\n\r\nPart of https:\/\/github.com\/flutter\/flutter\/issues\/142845","comments":[],"labels":["engine","P2","a: multi window","team-desktop","triaged-desktop"]},{"title":"Enhance ColorScheme.fromSeed with a new `variant` parameter","body":"Fixes #144649\r\n\r\nThis PR is to add an enhancement for `ColorScheme.fromSeed()`.  When we input a brighter color with a high chroma and we want the resulting `ColorScheme` respects the source color, we can achieve this by setting\r\n\r\n```dart\r\nColorScheme.fromSeed(\r\n  seedColor: sourceColor,\r\n  variant: Variant.fidelity,\r\n  ...\r\n)\r\n```\r\n\r\nHere is a demo for `ColorScheme` constructed by all 9 variants:\r\n![Screenshot 2024-03-13 at 4 33 02\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/36861262\/2cdbe559-67ff-4f8b-bd48-ccff5131b949)\r\n![Screenshot 2024-03-13 at 4 33 07\u202fPM](https:\/\/github.com\/flutter\/flutter\/assets\/36861262\/e6af2362-c501-499b-8880-06a321de91e6)\r\n","comments":["We could. I mostly went with a method because:\r\n- it's more likely to lead to tree shaking (it's easier to tell that a method isn't used at all, than that a method's argument happens to always be a constant value; I don't know how clever Dart's tree shaker is here though, and I don't know how many bytes the two algorithms drag in, so I don't know if this really matters). \r\n- a boolean is harder to extend (what happens when we want to add a third algorithm)\r\n- the code looks slightly cleaner at the call site if it's a method than an optional boolean.\r\n\r\nThese aren't particularly strong reasons though so if you'd prefer the argument version I'm happy to go with that.","> We could. I mostly went with a method because:\r\n> \r\n> * it's more likely to lead to tree shaking (it's easier to tell that a method isn't used at all, than that a method's argument happens to always be a constant value; I don't know how clever Dart's tree shaker is here though, and I don't know how many bytes the two algorithms drag in, so I don't know if this really matters).\r\n> * a boolean is harder to extend (what happens when we want to add a third algorithm)\r\n> * the code looks slightly cleaner at the call site if it's a method than an optional boolean.\r\n> \r\n> These aren't particularly strong reasons though so if you'd prefer the argument version I'm happy to go with that.\r\n\r\nI see! Creating another method sounds good to me! Since there are a lot of code duplication (and also `.fromImageProvider`), I think maybe we can create a private method to convert the `DynamicScheme` to `ColorScheme`. Do you mind if I push a commit for the fix?","I'm not familiar enough with the underlying library to say what the impact on code size \/ tree shaking will be. I have no strong opinions on how this code should work so I'm happy to hand off the PR to you if you want to run with it. :-)","> I'm not familiar enough with the underlying library to say what the impact on code size \/ tree shaking will be. I have no strong opinions on how this code should work so I'm happy to hand off the PR to you if you want to run with it. :-)\r\n\r\nSounds good! Will finish this one soon. Thanks!","Hi! I'm a maintainer of [Material Color Utilities](https:\/\/github.com\/material-foundation\/material-color-utilities\/tree\/main), the library behind dynamic color schemes.\r\n\r\nMy personal suggestion is to add a method similar to\r\n```dart\r\nColorScheme.fromSeed({\r\n  required Color seedColor,\r\n  Brightness brightness = Brightness.light,\r\n  Variant variant = Variant.tonalSpot,\r\n})\r\n```\r\nwhere `Variant` is an enum defined in [variant.dart](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/variant.dart)\r\n\r\nThis would allow the user to create a color scheme from one of nine variants, each with some different behavior. `tonalSpot` is the baseline; `fidelity` adjusts tone of colors to reach chroma; `vibrant` is colorful; and so on.\r\n\r\nI'm unfamiliar with the details of tree shaking in Dart, but my intuition is \u2014 There shouldn't be a _huge_ difference whether we defined multiple methods (one for each variant) or a single method that takes a variant as a parameter. Most of the color solving happens in [`DynamicColor.getTone`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/dynamic_color.dart#L167) and [`MaterialDynamicColors`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/material_dynamic_colors.dart), which are required to generate colors for _any_ variant; each variant is also defined in a very short piece of code (such as [`SchemeVibrant`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/scheme\/scheme_vibrant.dart)).","> Hi! I'm a maintainer of [Material Color Utilities](https:\/\/github.com\/material-foundation\/material-color-utilities\/tree\/main), the library behind dynamic color schemes.\r\n> \r\n> My personal suggestion is to add a method similar to\r\n> \r\n> ```dart\r\n> ColorScheme.fromSeed({\r\n>   required Color seedColor,\r\n>   Brightness brightness = Brightness.light,\r\n>   Variant variant = Variant.tonalSpot,\r\n> })\r\n> ```\r\n> \r\n> where `Variant` is an enum defined in [variant.dart](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/variant.dart)\r\n> \r\n> This would allow the user to create a color scheme from one of nine variants, each with some different behavior. `tonalSpot` is the baseline; `fidelity` adjusts tone of colors to reach chroma; `vibrant` is colorful; and so on.\r\n> \r\n> I'm unfamiliar with the details of tree shaking in Dart, but my intuition is \u2014 There shouldn't be a _huge_ difference whether we defined multiple methods (one for each variant) or a single method that takes a variant as a parameter. Most of the color solving happens in [`DynamicColor.getTone`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/dynamic_color.dart#L167) and [`MaterialDynamicColors`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/dynamiccolor\/material_dynamic_colors.dart), which are required to generate colors for _any_ variant; each variant is also defined in a very short piece of code (such as [`SchemeVibrant`](https:\/\/github.com\/material-foundation\/material-color-utilities\/blob\/main\/dart\/lib\/scheme\/scheme_vibrant.dart)).\r\n\r\nHi @pennzht! Thanks so much for your suggestions! Yeah, adding an enum parameter for variants also sounds good to me:) I can update this PR then."],"labels":["framework","f: material design","d: api docs","d: examples"]},{"title":"Leak clean up.","body":"Fix some leaks and mark others.\r\n\r\n[Known leaks](https:\/\/github.com\/issues?q=is%3Aopen+is%3Aissue+label%3A%22a%3A+leak+tracking%22+-label%3A%22c%3A+new+feature%22+) ","comments":[],"labels":["a: text input","framework","a: animation","f: material design","f: scrolling","f: cupertino","f: routes","f: gestures","autosubmit"]},{"title":"Stop codesigning Flutter iOS and macOS frameworks when they are already codesigned","body":"The tool is codesigning the Flutter.framework with the app developer cert on every build.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/d2ab6d9ac78bece19e111b37ef36ad4376dc7c6e\/packages\/flutter_tools\/lib\/src\/build_system\/targets\/ios.dart#L299\r\n\r\nHowever, with Apple's new 3rd party SDK codesigning requirements it seems like the more correct thing to do it leave the Flutter org codesigning instead of overwriting it with the developer cert.  However, this may block App Store submission of Flutter apps when the cert renews (old cert is revoked).  In that scenario if we release a signed version of the SDK in March, but the cert is refreshed in April, then potentially apps even on current stable would not be submittable to the App Store?\r\n\r\nhttps:\/\/developer.apple.com\/documentation\/xcode\/verifying-the-origin-of-your-xcframeworks\r\nhttps:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10060\/\r\n\r\nSee https:\/\/github.com\/flutter\/flutter\/issues\/140934 for context.\r\n\r\nMake sure we don't regress https:\/\/github.com\/flutter\/flutter\/pull\/93556. We need to sign the framework if it's not already codesigned (on the master channel).","comments":["cc @stuartmorgan ","> However, with Apple's new 3rd party SDK codesigning requirements it seems like the more correct thing to do it leave the Flutter org codesigning instead of overwriting it with the developer cert.\r\n\r\nIf both continue to work (currently unknown, AFAIK?), we could have a flag to force re-signing, which could be useful for people who want to continue using older versions of Flutter.","My concern isn't for Flutter versions a year old, it's for versions that are released right before the cert is renewed.  \r\n\r\n> In that scenario if we release a signed version of the SDK in March, but the cert is refreshed in April, then potentially apps even on current stable would not be submittable to the App Store?","Sorry, I should have clarified that my comment was a response to discussion elsewhere about how this would also add an element of forced-update where people might be unable to continue to use old versions of Flutter that previously would have worked.\r\n\r\nThat definitely doesn't address the issue you raised; I agree that needs to work out of the box. Is there a way to have our cert refresh window be shorter than our validity period? E.g., every 6 months we get a new cert that lasts for a year?","I believe if we sign with \"trusted timestamps\" (`codesign --timestamp`) will allow the signature to be valid even after the cert has expired.\r\n\r\nhttps:\/\/developer.apple.com\/documentation\/technotes\/tn3161-inside-code-signing-certificates#Certificate-expiration\r\n\r\n> People who install your product expect it to continue working, regardless of your certificate\u2019s expiration date. Apple enables this by embedding a secure timestamp within your code signature. This records when your code was signed. When you run the code, macOS checks that its Developer ID certificate was valid at the time that it was signed.\r\n> \r\n> Xcode automatically adds a secure timestamp when it signs code with a Developer ID code-signing identity. If you sign code using codesign, pass in the --timestamp option to add a secure timestamp. \r\n\r\nWhich we do!\r\nhttps:\/\/github.com\/flutter\/cocoon\/blob\/64667f67c5d8d1e15256739961bcbb93ca65c048\/cipd_packages\/codesign\/lib\/src\/file_codesign_visitor.dart#L336\r\n\r\nNote the ** Timestamp** part:\r\n```\r\n$ codesign -d -vv flutter\/bin\/cache\/artifacts\/engine\/ios-release\/Flutter.xcframework\r\nExecutable=flutter\/bin\/cache\/artifacts\/engine\/ios-release\/Flutter.xcframework\/Info.plist\r\nIdentifier=Flutter\r\nFormat=bundle\r\nCodeDirectory v=20200 size=199 flags=0x10000(runtime) hashes=1+3 location=embedded\r\nSignature size=9058\r\nAuthority=Developer ID Application: FLUTTER.IO LLC (S8QB4VV633)\r\nAuthority=Developer ID Certification Authority\r\nAuthority=Apple Root CA\r\nTimestamp=Feb 13, 2024 at 4:12:39\u202fPM\r\nInfo.plist entries=3\r\nTeamIdentifier=S8QB4VV633\r\nSealed Resources version=2 rules=10 files=44\r\nInternal requirements count=1 size=168\r\n```\r\n\r\n@XilaiZhang this spot in cocoon is the only place we codesign binaries, right?","> @XilaiZhang this spot in cocoon is the only place we codesign binaries, right?\r\n\r\nYes! \r\n"],"labels":["platform-ios","tool","P1","team-ios","triaged-ios"]},{"title":"[video_player_web] wasm update errors out, pegs CPU at 100%","body":"![image](https:\/\/github.com\/flutter\/flutter\/assets\/17034\/ffa17b1b-f2a0-4aa0-82b3-737e5886f068)\r\n\r\npackages repo at 903f03add169c39d3f19bc70980af3f0862869a9\r\n\r\nFlutter 3.21.0-1.0.pre.59 \u2022 channel master \u2022 git@github.com:flutter\/flutter.git\r\nFramework \u2022 revision 487d42f9ee (78 minutes ago) \u2022 2024-03-07 15:28:23 -0500\r\nEngine \u2022 revision c2863530ce\r\nTools \u2022 Dart 3.4.0 (build 3.4.0-211.0.dev) \u2022 DevTools 2.33.1\r\n\r\n","comments":["JS version runs fine!","```diff\r\ndiff --git a\/packages\/image_picker\/image_picker\/example\/web\/index.html b\/packages\/image_picker\/image_picker\/example\/web\/index.html\r\nindex b05fdf840..0ba7418f6 100644\r\n--- a\/packages\/image_picker\/image_picker\/example\/web\/index.html\r\n+++ b\/packages\/image_picker\/image_picker\/example\/web\/index.html\r\n@@ -21,16 +21,15 @@ found in the LICENSE file. -->\r\n   <link rel=\"manifest\" href=\"manifest.json\">\r\n <\/head>\r\n <body>\r\n-  <!-- This script installs service_worker.js to provide PWA functionality to\r\n-       application. For more information, see:\r\n-       https:\/\/developers.google.com\/web\/fundamentals\/primers\/service-workers -->\r\n-  <!-- <script>\r\n-    if ('serviceWorker' in navigator) {\r\n-      window.addEventListener('load', function () {\r\n-        navigator.serviceWorker.register('flutter_service_worker.js');\r\n-      });\r\n-    }\r\n-  <\/script> -->\r\n-  <script src=\"main.dart.js\" type=\"application\/javascript\"><\/script>\r\n+<script src=\"flutter.js\" type=\"application\/javascript\"><\/script>\r\n+<script>\r\n+  {{flutter_build_config}}\r\n+  const searchParams = new URLSearchParams(window.location.search);\r\n+  const forceCanvaskit = searchParams.get('force_canvaskit') === 'true';\r\n+  const config = forceCanvaskit ? {'renderer': 'canvaskit'} : {};\r\n+  _flutter.loader.load({config}).then(function() {\r\n+    window.document.getElementById('splash')?.remove();\r\n+  });\r\n+<\/script>\r\n <\/body>\r\n <\/html>\r\n```","Gah! This is the image picker (which works) but the idea is the same. make sure you're actually running wasm"],"labels":["platform-web","p: video_player","P2","e: wasm","e: web_skwasm","team-web","triaged-web"]},{"title":"Handle platform view navigation method from engine for Windows","body":"An alternative PR to https:\/\/github.com\/flutter\/flutter\/pull\/144569 that introduces only the minimal blocking changes needed for further engine development. The engine shall need to invoke a `navigatedOut` method issued to the framework; this PR adds the associated method handler.\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/issues\/143375\r\n\r\n## Pre-launch Checklist\r\n\r\n- [x] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [x] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [x] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [x] I listed at least one issue that this PR fixes in the description above.\r\n- [x] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [x] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [x] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [x] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework","platform-windows","a: platform-views","team-desktop"]},{"title":"Upload packages iOS native test xcresult bundle on test failure","body":"On native iOS Xcode build test failures upload the xcresult bundle to the logs location so we can open it in Xcode and see the screenshots, etc.  This is possible as of https:\/\/github.com\/flutter\/flutter\/issues\/121535.  \r\n\r\nThis is where it would be updated:\r\nhttps:\/\/github.com\/flutter\/packages\/blob\/903f03add169c39d3f19bc70980af3f0862869a9\/script\/tool\/lib\/src\/common\/xcode.dart#L34-L56\r\n\r\nHere is how it's done in the framework repo:\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/874804e511109a4028fd9b874836e5f82fe44103\/dev\/devicelab\/lib\/framework\/ios.dart#L194-L219\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/874804e511109a4028fd9b874836e5f82fe44103\/dev\/devicelab\/lib\/framework\/ios.dart#L226-L241\r\n\r\nwhere `dumpDirectory` is `platform.environment['FLUTTER_LOGS_DIR']`\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/36e09ff34355fba4602b62b9628e533836e0d494\/dev\/devicelab\/lib\/framework\/host_agent.dart#L26-L28\r\n\r\nThis would particularly be helpful when tests are run in parallel because evidently it doesn't show the failures in stdout:\r\nhttps:\/\/logs.chromium.org\/logs\/flutter\/buildbucket\/cr-buildbucket\/8754096679487031185\/+\/u\/Run_package_tests\/native_test\/stdout\r\n\r\n","comments":["@stuartmorgan I thought we had an issue for this but I can't find it.","random thought - maybe we can share some common infra for these 2 repos? "],"labels":["platform-ios","package","P2","team-ios","triaged-ios"]},{"title":"Build Swift files in the engine to support Swift-only APIs on iOS and macOS","body":"Apple has and will continue to ship Swift-only APIs.  We would be able to add Swift files to the iOS and macOS embedder and tests where necessary.  Figure out what's needed to compile Swift files in the engine (toolchain, gn flags, other tooling).","comments":["https:\/\/chrome-infra-packages.appspot.com\/p\/chromium\/tools\/swift-toolchain\/","Can\/should we use Xcode's swiftc?\r\n\r\nWill this work with Goma\/RBE?","We probably need not only a toolchain, but also we need to investigate any swift-specific GN features we'd need to use.","> Can\/should we use Xcode's swiftc?\r\n\r\nInitially we should copy whatever is in the Chrome buildroot. After that's working, we may want to use the Xcode version to help stay more up-to-date.\r\n\r\n> Will this work with Goma\/RBE?\r\n\r\nLikely not.","> Initially we should copy whatever is in the Chrome buildroot.\r\n\r\nNot sure if I'm in the right spot, but here's a python script accumulating swiftc flags:\r\nhttps:\/\/chromium.googlesource.com\/chromium\/src\/build\/toolchain\/+\/d09c75d8838e04eb6d10264c868f51f5a548cd7c\/ios\/swiftc.py#425\r\n\r\n`DEPS` `src\/third_party\/swift-toolchain`\r\nhttps:\/\/chromium.googlesource.com\/chromium\/src\/+\/10f3782643a34cc8c02aea83b18339c25a71d5ff\/DEPS#1778\r\n\r\n`swift-format` for good measure (already running in packages repo: https:\/\/flutter-review.googlesource.com\/c\/recipes\/+\/54020 and https:\/\/github.com\/flutter\/packages\/pull\/5928)\r\nhttps:\/\/chromium.googlesource.com\/chromium\/src\/+\/10f3782643a34cc8c02aea83b18339c25a71d5ff\/DEPS#1764\r\n\r\n"],"labels":["platform-ios","engine","platform-mac","P2","team-engine","triaged-engine"]},{"title":"Remove tracing \"Frame\" in the framework","body":"This PR, together with https:\/\/github.com\/flutter\/engine\/pull\/51257, moves the tracing of the frame build time from the framework to the engine, resolving the downside of option a in https:\/\/github.com\/flutter\/engine\/pull\/51186#issuecomment-1977820525 and implementing option b. Please see the link for reason and analysis.\r\n\r\n\r\n### Landing\r\nThe framework PR should be merged first, then the engine PR. Between the gap of the two PRs, the build time benchmark will be missing, but it's fine since it's not a public API.\r\n\r\nAn alternative option of landing is:\r\n* The engine PR traces with a different name (such as `\"Animator::Frame\"`), and the framework changes `kBuildFrameEventName` to this name.\r\n  * Downside: This is a larger change and might cause problems to other places that uses this tracing (such as testing).\r\n\r\n### Question\r\n* Should I add more tests?\r\n* Should I remove existing tests? Namely\r\nhttps:\/\/github.com\/flutter\/flutter\/blob\/a23a9afeda3d2a296bcb848e7f48ad64870cd0bb\/packages\/flutter_driver\/test\/src\/real_tests\/timeline_summary_test.dart#L28\r\n\r\n## Pre-launch Checklist\r\n\r\n- [ ] I read the [Contributor Guide] and followed the process outlined there for submitting PRs.\r\n- [ ] I read the [Tree Hygiene] wiki page, which explains my responsibilities.\r\n- [ ] I read and followed the [Flutter Style Guide], including [Features we expect every widget to implement].\r\n- [ ] I signed the [CLA].\r\n- [ ] I listed at least one issue that this PR fixes in the description above.\r\n- [ ] I updated\/added relevant documentation (doc comments with `\/\/\/`).\r\n- [ ] I added new tests to check the change I am making, or this PR is [test-exempt].\r\n- [ ] I followed the [breaking change policy] and added [Data Driven Fixes] where supported.\r\n- [ ] All existing and new tests are passing.\r\n\r\nIf you need help, consider asking for advice on the #hackers-new channel on [Discord].\r\n\r\n<!-- Links -->\r\n[Contributor Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#overview\r\n[Tree Hygiene]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene\r\n[test-exempt]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#tests\r\n[Flutter Style Guide]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo\r\n[Features we expect every widget to implement]: https:\/\/github.com\/flutter\/flutter\/wiki\/Style-guide-for-Flutter-repo#features-we-expect-every-widget-to-implement\r\n[CLA]: https:\/\/cla.developers.google.com\/\r\n[flutter\/tests]: https:\/\/github.com\/flutter\/tests\r\n[breaking change policy]: https:\/\/github.com\/flutter\/flutter\/wiki\/Tree-hygiene#handling-breaking-changes\r\n[Discord]: https:\/\/github.com\/flutter\/flutter\/wiki\/Chat\r\n[Data Driven Fixes]: https:\/\/github.com\/flutter\/flutter\/wiki\/Data-driven-Fixes\r\n","comments":[],"labels":["framework"]},{"title":"[video_player] Add `onScrubbingCallback` to `VideoProgressIndicator`","body":"### Use case\n\nIn the `VideoProgressIndicator` widget, is not possible to know when the user scrubbed to another position in the video. I need to send some information about the video status to an API, and I need a way to \"listen\" when the video position is changed by `VideoProgressIndicator`.\n\n### Proposal\n\nAdd a callback named `onScrubbingCallback`, as a `void Function(Duration)?` to `VideoProgressIndicator`.\r\n\r\nIt could be as the following code:\r\n\r\n```dart\r\nVideoProgressIndicator(\r\n  controller,\r\n  allowScrubbing: true,\r\n  onScrubbing: (Duration duration) {\r\n    \/\/ Do something here\r\n  },\r\n)\r\n```","comments":["> I need a way to \"listen\" when the video position is changed by `VideoProgressIndicator`\r\n\r\nCould you elaborate on the use case here? Why do you need to know if the change came from a specific UI element, rather than monitoring the video itself for seek events?","Thank you for your response, @stuartmorgan.\r\n\r\nI need to send some information about the video that is currently playing to an API, and this includes information about when the user transitions from one duration to another.\r\n\r\nI haven't found a way to accomplish this in the current version of the package. Although I could use a listener in the controller, it would require a lot of verifications throughout the video's duration. For my use case, a callback within the `VideoProgressIndicator` seems like a simple and effective solution and is similar to the behavior of certain Flutter widgets.","> this includes information about when the user transitions from one duration to another.\r\n\r\nSo if someone were to seek some other way, would you want that information or not? I'm trying to understand whether this use is actually paired to the UI element, or whether you are just trying to add the listener there because it seems easiest.\r\n\r\n> Although I could use a listener in the controller, it would require a lot of verifications throughout the video's duration.\r\n\r\nCould you elaborate on what verifications you are referring to?"],"labels":["c: new feature","waiting for customer response","p: video_player","package","c: proposal","team-ecosystem","P3","triaged-ecosystem"]},{"title":"Windows1 has been failing tests frequently","body":"Either the task was KILLED or it shows BOT_DIED\r\n\r\n<img width=\"1274\" alt=\"Screenshot 2024-03-07 at 8 57 34\u202fAM\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/54558023\/9cc19369-a6ae-4a3f-8dd8-f418e638ccd6\">\r\n","comments":["Checking today it looks like it has not failed in the last two days. Keeping and eye on it.\r\n\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/32242716\/7bdead71-01f6-4ad2-9a6f-97db05c65d23)\r\n","The issue has returned.\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/32242716\/cc874543-428e-4b12-a397-434d4d45a71d)\r\n\r\nThe last fours tasks have failed with this error:\r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/32242716\/c531755c-28ce-46ec-ba88-f8fff943c2bd)\r\n","Okay wil some help from @godofredoc we were able to verify that this bot dying is directly correlated to the machine token for swarming not being updated correctly.\r\n\r\nHere is a list of times for tasks the bot ran: \r\n![image](https:\/\/github.com\/flutter\/flutter\/assets\/32242716\/5e25cb0e-840c-48b5-8d20-95bb28016ca8)\r\n\r\n@1:42:07 AM the bot failed to contact the swarming server and here is the task that was killed at that time as a result of the broken communciation:\r\n\r\nhttps:\/\/luci-milo.appspot.com\/ui\/p\/flutter\/builders\/prod\/Windows_android%20native_assets_android\/784\/overview"],"labels":["team-infra","P1","infra: device lab","triaged-infra"]},{"title":"[Web][Canvaskit]: Mixed byte order in result of Image.toByteData() using `format: ui.ImageByteFormat.rawRgba`","body":"### Steps to reproduce\n\n1. Call test() method in the attached code snippet on canvaskit renderer\r\n2. Using the default rawRgba, the bytes of the first pixel are in RGBA order, but others are in BGRA instead of RGBA\r\n3. Using rawStraightRgba, all pixel data are in BGRA instead of RGBA\r\n4. Running test() method on html renderer the results look good\n\n### Expected results\n\nResponse Bytes: [66, 77, 70, 0, 0, 0, 0, 0, 0, 0, 54, 0, 0, 0, 40, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 1, 0, 24, 0, 0, 0, 0, 0, 16, 0, 0, 0, 195, 14, 0, 0, 195, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 232, 162, 0, 39, 127, 255, 0, 0, 76, 177, 34, 36, 28, 237, 0, 0]\r\nImage Bytes (rawRgba):         [34, 177, 76, 255, 237, 28, 36, 255, 0, 162, 232, 255, 255, 127, 39, 255]\r\nImage Bytes (rawStraightRgba): [34, 177, 76, 255, 237, 28, 36, 255, 0, 162, 232, 255, 255, 127, 39, 255]\n\n### Actual results\n\nResponse Bytes: [66, 77, 70, 0, 0, 0, 0, 0, 0, 0, 54, 0, 0, 0, 40, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 1, 0, 24, 0, 0, 0, 0, 0, 16, 0, 0, 0, 195, 14, 0, 0, 195, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 232, 162, 0, 39, 127, 255, 0, 0, 76, 177, 34, 36, 28, 237, 0, 0]\r\nImage Bytes (rawRgba):         [34, 177, 76, 255, 36, 28, 237, 255, 232, 162, 0, 255, 39, 127, 255, 255]\r\nImage Bytes (rawStraightRgba): [76, 177, 34, 255, 36, 28, 237, 255, 232, 162, 0, 255, 39, 127, 255, 255]\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n  Future test(String url) async {\r\n    var imgData = await _downloadImage(url);\r\n    print(\"Response Bytes: \" + imgData.toString());\r\n\r\n    final image = await _loadImage(imgData);\r\n\r\n    final ByteData? rawRgbaBytes = await image.toByteData();\r\n    if (rawRgbaBytes != null) {\r\n      print(\"Image Bytes (rawRgba):         \" + rawRgbaBytes.buffer.asUint8List().toString());\r\n    }\r\n\r\n    final ByteData? rawStraightRgbaBytes = await image.toByteData(format: ui.ImageByteFormat.rawStraightRgba);\r\n    if (rawStraightRgbaBytes != null) {\r\n      print(\"Image Bytes (rawStraightRgba): \" + rawStraightRgbaBytes.buffer.asUint8List().toString());\r\n    }\r\n  }\r\n\r\n  Future<Uint8List> _downloadImage(String url) async {\r\n    http.Response response = await http.get(Uri.parse(url));\r\n    return response.bodyBytes;\r\n  }\r\n\r\n  Future<ui.Image> _loadImage(Uint8List list) async {\r\n    final completer = Completer<ui.Image>();\r\n    ui.decodeImageFromList(list, completer.complete);\r\n    return completer.future;\r\n  }\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[\u221a] Flutter (Channel stable, 3.16.5, on Microsoft Windows [Version 10.0.22631.3007], locale en-US)\r\n    \u2022 Flutter version 3.16.5 on channel stable at C:\\flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 78666c8dc5 (3 months ago), 2023-12-19 16:14:14 -0800\r\n    \u2022 Engine revision 3f3e560236\r\n    \u2022 Dart version 3.2.3\r\n    \u2022 DevTools version 2.28.4\r\n\r\n[\u221a] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[X] Android toolchain - develop for Android devices\r\n    X Unable to locate Android SDK.\r\n      Install Android Studio from: https:\/\/developer.android.com\/studio\/index.html\r\n      On first launch it will assist you in installing the Android SDK components.\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n      If the Android SDK has been installed to a custom location, please use\r\n      `flutter config --android-sdk` to update to that location.\r\n\r\n\r\n[\u221a] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[!] Visual Studio - develop Windows apps (Visual Studio Professional 2022 17.8.6)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\r\n    \u2022 Visual Studio Professional 2022 version 17.8.34525.116\r\n    X Visual Studio is missing necessary components. Please re-run the Visual Studio installer for the \"Desktop development with C++\" workload, and include these components:\r\n        MSVC v142 - VS 2019 C++ x64\/x86 build tools\r\n         - If there are multiple build tool versions available, install the latest\r\n        C++ CMake tools for Windows\r\n        Windows 10 SDK\r\n\r\n[!] Android Studio (not installed)\r\n    \u2022 Android Studio not found; download from https:\/\/developer.android.com\/studio\/index.html\r\n      (or visit https:\/\/flutter.dev\/docs\/get-started\/install\/windows#android-setup for detailed instructions).\r\n\r\n[\u221a] VS Code (version 1.87.0)\r\n    \u2022 VS Code at C:\\Users\\lpeter\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u221a] Connected device (3 available)\r\n    \u2022 Windows (desktop) \u2022 windows \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.22631.3007]\r\n    \u2022 Chrome (web)      \u2022 chrome  \u2022 web-javascript \u2022 Google Chrome 122.0.6261.95\r\n    \u2022 Edge (web)        \u2022 edge    \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.66\r\n\r\n[\u221a] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 3 categories.\r\n```\r\n\r\n<\/details>\r\n","comments":["@laszlopeter1 \r\nI think this is similar to https:\/\/github.com\/flutter\/flutter\/issues\/135409 in which you can follow-up for further updates.\r\nYou may share your findings in it for better tracking.\r\nClosing this as a duplicate. If you disagree, write in comments and I'll reopen it.","It seems [#135409](https:\/\/github.com\/flutter\/flutter\/issues\/135409) will solve only the rawStraightRgba case, but there is problem with rawRgba format as well. I'm not sure solving the issue with rawStraightRgba will solve rawRgba problem as well. Please reopen my issue.","Thanks for the feedback. Reopening.\r\n","Was able to replicate this on latest versions using canvaskit.\r\n\r\n<details>\r\n<summary> stable, master flutter doctor -v <\/summary>\r\n\r\n```\r\n[!] Flutter (Channel stable, 3.19.2, on macOS 12.2.1 21D62 darwin-x64, locale\r\n    en-GB)\r\n    \u2022 Flutter version 3.19.2 on channel stable at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (5 days ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n[!] Flutter (Channel master, 3.21.0-4.0.pre.14, on macOS 12.2.1 21D62\r\n    darwin-x64, locale en-GB)\r\n    \u2022 Flutter version 3.21.0-4.0.pre.14 on channel master at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\r\n    ! Warning: `flutter` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/flutter, which is not inside\r\n      your current Flutter SDK checkout at\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter. Consider adding\r\n      \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to\r\n      \/Users\/dhs\/Documents\/Fluttersdk\/flutter\/bin\/dart, which is not inside your\r\n      current Flutter SDK checkout at \/Users\/dhs\/documents\/fluttersdk\/flutter.\r\n      Consider adding \/Users\/dhs\/documents\/fluttersdk\/flutter\/bin to the front\r\n      of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 1ca88730a0 (4 hours ago), 2024-03-11 18:31:25 -0700\r\n    \u2022 Engine revision 6745955bb4\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-220.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however\r\n      it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[!] Android toolchain - develop for Android devices (Android SDK version 30.0.3)\r\n    \u2022 Android SDK at \/Users\/dhs\/Library\/Android\/sdk\r\n    \u2717 cmdline-tools component is missing\r\n      Run `path\/to\/sdkmanager --install \"cmdline-tools;latest\"`\r\n      See https:\/\/developer.android.com\/studio\/command-line for more details.\r\n    \u2717 Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https:\/\/flutter.dev\/docs\/get-started\/install\/macos#android-setup for\r\n      more details.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 13.2.1)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 13C100\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\r\n    \u2022 IntelliJ at \/Applications\/IntelliJ IDEA.app\r\n    \u2022 Flutter plugin version 65.1.4\r\n    \u2022 Dart plugin version 213.7228\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.29.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 Darshan's iphone (mobile) \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022 ios\r\n      \u2022 iOS 15.3.1 19D52\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 macOS 12.2.1 21D62 darwin-x64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 109.0.5414.119\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n      \r\n[!] Xcode - develop for iOS and macOS (Xcode 12.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n    \u2022 CocoaPods version 1.11.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] VS Code (version 1.62.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.21.0\r\n\r\n[\u2713] Connected device (5 available)\r\n    \u2022 SM G975F (mobile)       \u2022 RZ8M802WY0X \u2022 android-arm64   \u2022 Android 11 (API 30)\r\n    \u2022 Darshan's iphone (mobile)  \u2022 21150b119064aecc249dfcfe05e259197461ce23 \u2022\r\n      ios            \u2022 iOS 14.4.1 18D61\r\n    \u2022 iPhone 12 Pro Max (mobile) \u2022 A5473606-0213-4FD8-BA16-553433949729     \u2022\r\n      ios            \u2022 com.apple.CoreSimulator.SimRuntime.iOS-14-3 (simulator)\r\n    \u2022 macOS (desktop)            \u2022 macos                                    \u2022\r\n      darwin-x64     \u2022 Mac OS X 10.15.4 19E2269 darwin-x64\r\n    \u2022 Chrome (web)               \u2022 chrome                                   \u2022\r\n      web-javascript \u2022 Google Chrome 98.0.4758.80\r\n\r\n[\u2713] HTTP Host Availability\r\n    \u2022 All required HTTP hosts are available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\n\r\n\r\n```\r\n\r\n<\/details>\r\n"],"labels":["engine","platform-web","e: web_canvaskit","has reproducible steps","P2","team-web","triaged-web","found in release: 3.19","found in release: 3.21"]},{"title":"[Impeller] Validation error on destroyed vkImageView when host restarting emulator.","body":"### Steps to reproduce\n\nWhile don't know to reproduce it, got the error in console when attempted to hot-restart.... sharing the log below, In Andriod\n\n### Expected results\n\nRestart should have worked normally\n\n### Actual results\n\nShared the log output\n\n### Code sample\n\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\n[Paste your code here]\r\n```\r\n\r\n<\/details>\r\n\n\n### Screenshots or Video\n\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n[Upload media here]\r\n\r\n<\/details>\r\n\n\n### Logs\n\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\nPerforming hot restart...\r\nSyncing files to device vivo 1907...\r\nE\/flutter (24279): [ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: \r\nE\/flutter (24279): --- Vulkan Debug Report  ----------------------------------------\r\nE\/flutter (24279): |                Severity: Error\r\nE\/flutter (24279): |                    Type: { Validation }\r\nE\/flutter (24279): |                 ID Name: VUID-vkDestroyImageView-imageView-parameter\r\nE\/flutter (24279): |               ID Number: -534740842\r\nE\/flutter (24279): |       Queue Breadcrumbs: [NONE]\r\nE\/flutter (24279): |  CMD Buffer Breadcrumbs: [NONE]\r\nE\/flutter (24279): |         Related Objects: Instance [12**************2640] [UNNAMED]\r\nE\/flutter (24279): |                 Trigger: Validation Error: [ VUID-vkDestroyImageView-imageView-parameter ] Object 0: handle = 0xb400006e6147e4e0, type = VK_OBJECT_TYPE_INSTANCE; | MessageID = 0xe0208096 | Invalid VkImageView Object 0x1a990000001a99. The Vulkan spec states: If imageView is not VK_NULL_HANDLE, imageView must be a valid VkImageView handle (**************************************************************************************************************************\r\nE\/flutter (24279): -----------------------------------------------------------------\r\nE\/flutter (24279): [ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: \r\nE\/flutter (24279): --- Vulkan Debug Report  ----------------------------------------\r\nE\/flutter (24279): |                Severity: Error\r\nE\/flutter (24279): |                    Type: { Validation }\r\nE\/flutter (24279): |                 ID Name: UNASSIGNED-Threading-Info\r\nE\/flutter (24279): |               ID Number: 1567320034\r\nE\/flutter (24279): |       Queue Breadcrumbs: [NONE]\r\nE\/flutter (24279): |  CMD Buffer Breadcrumbs: [NONE]\r\nE\/flutter (24279): |         Related Objects: ImageView [7486574673533593] [UNNAMED]\r\nE\/flutter (24279): |                 Trigger: Validation Error: [ UNASSIGNED-Threading-Info ] Object 0: handle = 0x1a990000001a99, type = VK_OBJECT_TYPE_IMAGE_VIEW; | MessageID = 0x5d6b67e2 | Couldn't find VkImageView Object 0x1a990000001a99. This should not happen and may indicate a bug in the application.\r\nE\/flutter (24279): -----------------------------------------------------------------\r\nE\/flutter (24279): [ERROR:flutter\/impeller\/base\/validation.cc(49)] Break on 'ImpellerValidationBreak' to inspect point of failure: \r\nE\/flutter (24279): --- Vulkan Debug Report  ----------------------------------------\r\nE\/flutter (24279): |                Severity: Error\r\nE\/flutter (24279): |                    Type: { Validation }\r\nE\/flutter (24279): |                 ID Name: UNASSIGNED-Threading-Info\r\nE\/flutter (24279): |               ID Number: 1567320034\r\nE\/flutter (24279): |       Queue Breadcrumbs: [NONE]\r\nE\/flutter (24279): |  CMD Buffer Breadcrumbs: [NONE]\r\nE\/flutter (24279): |         Related Objects: ImageView [7486574673533593] [UNNAMED]\r\nE\/flutter (24279): |                 Trigger: Validation Error: [ UNASSIGNED-Threading-Info ] Object 0: handle = 0x1a990000001a99, type = VK_OBJECT_TYPE_IMAGE_VIEW; | MessageID = 0x5d6b67e2 | Couldn't find VkImageView Object 0x1a990000001a99. This should not happen and may indicate a bug in the application.\r\nE\/flutter (24279): -----------------------------------------------------------------\r\nF\/libc    (24279): Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0 in tid 24407 (DartWorker), pid 24279 (MyTrailPals.dev)\r\nRestarted application in 4,266ms.\r\nSoftversion: PD1913F_EX_A_9.72.28\r\nTime: 2024-03-07 15:15:49\r\n*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r\nBuild fingerprint: 'vivo\/1907\/1907:12\/SP1A.210812.003\/compiler03091510:user\/release-keys'\r\nRevision: '0'\r\nABI: 'arm64'\r\nTimestamp: 2024-03-07 15:15:47.618842654+0530\r\nProcess uptime: 0s\r\nCmdline: com.mytrailpals.MyTrailPals.dev\r\npid: 24279, tid: 24407, name: DartWorker  >>> com.mytrailpals.MyTrailPals.dev <<<\r\nuid: 10385\r\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0\r\nCause: null pointer dereference\r\n    x0  0000000000000000  x1  001a960000001a96  x2  0000000000000000  x3  000001b8031babc9\r\n    x4  0000000000000000  x5  0000000000000000  x6  0000000000000000  x7  0000000000000000\r\n    x8  0000000000000000  x9  0000000000000000  x10 b400006f014d77d8  x11 0000000000000000\r\n    x12 0000000000000018  x13 0000000065e98ccb  x14 00129d2af754037c  x15 000042d17800111b\r\n    x16 0000006cf69b1728  x17 0000007021adbc78  x18 0000006cab890000  x19 b400006f014d77b0\r\n    x20 b400006d555fa4d0  x21 0000006cf47a1c34  x22 b400006ec14bee68  x23 0000006cf65134f8\r\n    x24 b400006ea147fbb0  x25 0000006cf655c0ec  x26 0000006cf693c4b0  x27 00000000004c4b40\r\n    x28 0000006cf69d7000  x29 00000000000003e8\r\n    lr  0000006cf64f58b8  sp  0000006cb139ad80  pc  0000000000000000  pst 0000000060000000\r\nbacktrace:\r\n      #00 pc 0000000000000000  <unknown>\r\n      #01 pc 00000000020c78b4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #02 pc 000000000209e0b8  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #03 pc 000000000209e06c  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #04 pc 000000000209ded4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #05 pc 000000000209de30  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #06 pc 000000000209e160  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #07 pc 000000000209dd6c  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #08 pc 0000000001c89614  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #09 pc 00000000020c0290  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #10 pc 0000000001c89614  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #11 pc 00000000020878b0  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #12 pc 00000000020878c8  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #13 pc 0000000001d144a4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #14 pc 0000000001d14400  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #15 pc 0000000001d14514  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #16 pc 0000000001fc8aa4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #17 pc 0000000001fc8abc  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #18 pc 0000000001fc84d8  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #19 pc 0000000001fc84f4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #20 pc 0000000001c89614  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #21 pc 0000000001c89688  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #22 pc 0000000001c8935c  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #23 pc 0000000001fc68cc  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #24 pc 0000000001c89614  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #25 pc 00000000020f05f4  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #26 pc 00000000020f060c  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #27 pc 0000000002499a04  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #28 pc 00000000021a1434  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #29 pc 00000000021a2880  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #30 pc 000000000249de28  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #31 pc 00000000021c3d0c  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #32 pc 00000000022bea58  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #33 pc 00000000022beca8  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #34 pc 0000000002251960  \/data\/app\/~~WmBLG_uqOfmasHZX10jBhw==\/com.mytrailpals.MyTrailPals.dev-pHsfh_k8pFBBIStgQ-U8TQ==\/base.apk!libflutter.so (BuildId: 3e3bace707d40d3b2b89bfadf71b5c8703947a35)\r\n      #35 pc 00000000000b3900  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (__pthread_start(void*)+312) (BuildId: 3cf600896578484f9ee24df4f1e36b7d)\r\n      #36 pc 0000000000051a20  \/apex\/com.android.runtime\/lib64\/bionic\/libc.so (__start_thread+64) (BuildId: 3cf600896578484f9ee24df4f1e36b7d)\r\nLost connection to device.\r\n\r\n```\r\n\r\n<\/details>\r\n\n\n### Flutter Doctor output\n\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.19.1, on Microsoft Windows [Version 10.0.22621.3155], locale en-IN)\r\n    \u2022 Flutter version 3.19.1 on channel stable at C:\\Users\\harsh\\fvm\\default\r\n    ! Warning: `flutter` on your path resolves to C:\\Users\\harsh\\fvm\\versions\\stable\\bin\\flutter, which is not inside your current Flutter SDK checkout at\r\n      C:\\Users\\harsh\\fvm\\default. Consider adding C:\\Users\\harsh\\fvm\\default\\bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to C:\\Users\\harsh\\fvm\\versions\\stable\\bin\\dart, which is not inside your current Flutter SDK checkout at\r\n      C:\\Users\\harsh\\fvm\\default. Consider adding C:\\Users\\harsh\\fvm\\default\\bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision abb292a07e (2 weeks ago), 2024-02-20 14:35:05 -0800\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[\u2713] Windows Version (Installed version of Windows is version 10 or higher)\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at C:\\Users\\harsh\\AppData\\Local\\Android\\sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 Java binary at: C:\\Program Files\\Android\\Android Studio1\\jbr\\bin\\java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at C:\\Users\\harsh\\AppData\\Local\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[\u2713] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.4.4)\r\n    \u2022 Visual Studio at C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\r\n    \u2022 Visual Studio Community 2022 version 17.4.33213.308\r\n    \u2022 Windows 10 SDK version 10.0.22000.0\r\n\r\n[!] Android Studio (version 2022.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2717 Unable to determine bundled Java version.\r\n    \u2022 Try updating or re-installing Android Studio.\r\n\r\n[\u2713] Android Studio (version 2023.1)\r\n    \u2022 Android Studio at C:\\Program Files\\Android\\Android Studio1\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.7+0-b2043.56-10550314)\r\n\r\n[\u2713] IntelliJ IDEA Community Edition (version 2023.2)\r\n    \u2022 IntelliJ at C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2023.2.1\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at C:\\Users\\harsh\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    \u2022 Flutter extension version 3.56.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 vivo 1907 (mobile) \u2022 8TBYBE6H7H55USFE \u2022 android-arm64  \u2022 Android 12 (API 31)\r\n    \u2022 Windows (desktop)  \u2022 windows          \u2022 windows-x64    \u2022 Microsoft Windows [Version 10.0.22621.3155]\r\n    \u2022 Chrome (web)       \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.95\r\n    \u2022 Edge (web)         \u2022 edge             \u2022 web-javascript \u2022 Microsoft Edge 122.0.2365.66\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 2 categories.\r\n```\r\n\r\n<\/details>\r\n","comments":["Hi @Vedsaga, how many occurrences of this issue have you seen? Was it a one time thing or are you seeing it frequently? ","> Hi @Vedsaga, how many occurrences of this issue have you seen? Was it a one time thing or are you seeing it frequently?\r\n\r\nIt happened 2 times... then disabled the `EnableImpeller` \r\n\r\n```\r\n\r\n        <meta-data\r\n            android:name=\"io.flutter.embedding.android.EnableImpeller\"\r\n            android:value=\"false\" \/>\r\n ```\r\n \r\n will try to enable it and see if it happen again or not...","Does this happen with the counter app? If not could you provide us with a minimal reproducible code sample so that we can investigate this? \r\n\r\nThank you","Just noticed... last time when tried to produce the exception forget to enable Impller,,,\r\n\r\nthis time able to reproduce it...\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\n\/\/\/ Flutter code sample for [Autocomplete].\r\n\r\nvoid main() => runApp(const AutocompleteExampleApp());\r\n\r\nclass AutocompleteExampleApp extends StatelessWidget {\r\n  const AutocompleteExampleApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        appBar: AppBar(\r\n          title: const Text('Autocomplete Basic'),\r\n        ),\r\n        body: Center(\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            children: <Widget>[\r\n              Text(\r\n                  'Type below to autocomplete the following possible results: ${AutocompleteBasicExample._kOptions}.'),\r\n              const AutocompleteBasicExample(),\r\n              FilledButton(\r\n                onPressed: () {\r\n                  print(\"----Impeller Exception----\");\r\n                },\r\n                child: Text('Click for Impeller Exception'),\r\n              )\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass AutocompleteBasicExample extends StatelessWidget {\r\n  const AutocompleteBasicExample({super.key});\r\n\r\n  static const List<String> _kOptions = <String>[\r\n    'aardvark',\r\n    'bobcat',\r\n    'chameleon',\r\n  ];\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Autocomplete<String>(\r\n      optionsViewOpenDirection: OptionsViewOpenDirection.up,\r\n      optionsBuilder: (TextEditingValue textEditingValue) {\r\n        if (textEditingValue.text == '') {\r\n          return const Iterable<String>.empty();\r\n        }\r\n        return _kOptions.where((String option) {\r\n          return option.contains(textEditingValue.text.toLowerCase());\r\n        });\r\n      },\r\n      onSelected: (String selection) {\r\n        debugPrint('You just selected $selection');\r\n      },\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nAlso, set the `EnableImpeller` true... and just run the app it should throw exception as reported earlier...\r\n```xml\r\n\r\n        <meta-data\r\n            android:name=\"io.flutter.embedding.android.EnableImpeller\"\r\n            android:value=\"true\" \/>\r\n        <meta-data\r\n            android:name=\"flutterEmbedding\"\r\n            android:value=\"2\" \/>\r\n```\r\n\r\ncc: @danagbemava-nc ","sorry, just ignore the above issue code is not for this issue but it is related to #143806\r\n\r\nWill share this code in that issue...\r\n\r\nWhile we can mark above comment as not related to this issue...","And to confirm this issue didn't happen again after that... so can't confirm... ","If you do run into this issue again, please share what you were doing when it happened. \r\n\r\nLabeling for further investigation based on the report above. "],"labels":["platform-android","engine","P2","e: impeller","team-engine","triaged-engine"]},{"title":"Arrow key navigation gets stuck at the end of RTL text using Samsung Keyboard","body":"```dart\r\nconst text = '\u06cc';\r\nfinal controller = TextEditingController(text: text * 10)..selection = TextSelection.collapsed(offset: 10); \/\/ Selection is placed at the logical end of the text.\r\n\r\nTextField(textDirection: TextDirection.rtl, controller: controller, autofocus: true),\r\n```\r\n## Steps to reproduce\r\n1. wait for the text field autofocus\r\n2. switch to the Samsung keyboard\r\n3. press <kbd>\u2190<\/kbd> to move the cursor to the start of the text (since flutter currently uses logical order for arrow key navigation).\r\n\r\n## Expected behavior:\r\nthe cursor moves to the right\r\n\r\n## Actual behavior:\r\nthe cursor does not move.","comments":["This does not happen on Gboard. It seems that the Samsung keyboard ignores the <kbd>\u2190<\/kbd> key when the cursor is already at the left end of the text. \r\n\r\n## Screen recording\r\n\r\nhttps:\/\/github.com\/flutter\/flutter\/assets\/31859944\/3aac9554-a946-4c1e-a376-7be13bc75246\r\n\r\n","I can also reproduce this with Samsung keyboard.\r\n\r\n<details>\r\n<summary>Complete sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    const MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Home(),\r\n    ),\r\n  );\r\n}\r\n\r\nclass Home extends StatelessWidget {\r\n  const Home({\r\n    super.key,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    const text = '\u06cc';\r\n    final controller = TextEditingController(text: text * 10)\r\n      ..selection = const TextSelection.collapsed(offset: 10); \/\/ Selection is placed at the logical end of the text.\r\n    return Scaffold(\r\n      body: Center(\r\n        child: TextField(\r\n          textDirection: TextDirection.rtl,\r\n          controller: controller,\r\n          autofocus: true,\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.2, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (5 days ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.94\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-1.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-1.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 95bf597afe (37 minutes ago), 2024-03-06 21:57:25 -0500\r\n    \u2022 Engine revision 03ebd6460b\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-205.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 macOS (desktop)  \u2022 macos            \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome           \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","On native, arrow key navigation moves in visual order, which Flutter doesn't support at the moment. That's probably a long way off due to the framework not knowing the visual order of the text, unfortunately."],"labels":["a: text input","framework","a: internationalization","has reproducible steps","P2","found in release: 3.19","team-text-input","triaged-text-input","found in release: 3.21"]},{"title":"Background color of TextSpan when the text has English\/Non English characters(Emoji)","body":"### Steps to reproduce\r\n\r\nWhen the TextSpan's text consist English characters with emoji. the height of the background color is Inconsistent\r\n\r\n\r\n### Expected results\r\n\r\nBackground color height should be consistent through the text\r\n\r\n### Actual results\r\n\r\nEmoji's background has different height compared to non emoji characters\r\n\r\n### Code sample\r\n\r\n<details open><summary>Code sample<\/summary>\r\n\r\n```dart\r\nScaffold(\r\n  body: Center(\r\n    child: RichText(\r\n      text: TextSpan(\r\n        text: '\ud83d\udcc4Untitled',\r\n        style: TextStyle(\r\n          color: blue_60,\r\n          fontWeight: FontWeight.bold,\r\n          background: Paint()..color = blue_10,\r\n        ),\r\n      ),\r\n    ),\r\n  ),\r\n),\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Screenshots or Video\r\n\r\n<details open>\r\n<summary>Screenshots \/ Video demonstration<\/summary>\r\n\r\n![Screenshot_20240307_121601_Rocketlane Dev](https:\/\/github.com\/flutter\/flutter\/assets\/45146774\/173ca9fc-94fa-4121-8078-4aa321503867)\r\n\r\n\r\n<\/details>\r\n\r\n\r\n### Logs\r\n\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[Paste your logs here]\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.16.9, on macOS 14.3.1 23D60 darwin-arm64, locale en-US)\r\n    ! Warning: `dart` on your path resolves to \/opt\/homebrew\/Cellar\/dart\/3.2.5\/libexec\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/nithsua\/fvm\/versions\/3.16.9. Consider adding \/Users\/nithsua\/fvm\/versions\/3.16.9\/bin to the front of your path.\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n[\u2713] Chrome - develop for the web\r\n[\u2713] Android Studio (version 2022.2)\r\n[\u2713] IntelliJ IDEA Ultimate Edition (version 2023.2.5)\r\n[\u2713] VS Code (version 1.87.0)\r\n```\r\n\r\n<\/details>\r\n","comments":["I would like to confirm the issue again. Do you mean the baseline (green line below) is inconsistent between emoji and text?\r\n\r\n![Screenshot 2024-03-07 at 17 20 22](https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/f1c4ef26-84ae-4181-86eb-806280cea3b8)\r\n\r\nIf it's not, could you please highlight the affected area in your demo?","I meant the white space above the emoji.\r\n\r\n<img width=\"607\" alt=\"Screenshot 2024-03-07 at 17 35 19\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/45146774\/8b153a55-80db-4b51-8ff9-9b11c3c8382b\">\r\n","The below code outputs\r\n```\r\nRichText(\r\n  text: TextSpan(\r\n    text: '\ud83d\udcc4 Untitled',\r\n    style: TextStyle(\r\n      fontSize: 16,\r\n      color: blue_60,\r\n      fontWeight: FontWeight.bold,\r\n      background: Paint()..color = blue_10,\r\n    ),\r\n  ),\r\n)\r\n```\r\n<img width=\"607\" alt=\"Screenshot 2024-03-07 at 17 48 20\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/45146774\/73d5cc22-cc02-495b-a34c-9fb9513de418\">\r\n\r\n\r\nThe background color of the TextSpan seems to behave differently when used in RichText compared to in TextField\r\nI'm using a CustomTextEditingController which has the below buildTextSpan\r\n```\r\n@override\r\nTextSpan buildTextSpan({\r\n  required BuildContext context,\r\n  TextStyle? style,\r\n  required bool withComposing,\r\n}) {\r\n  final matchedRanges = _findMatchedRange(text);\r\n  List<InlineSpan> children = [];\r\n\r\n  TextRange? previous;\r\n  for (var matchedRange in matchedRanges) {\r\n    if (previous == null) {\r\n      children.add(TextSpan(text: matchedRange.textBefore(text)));\r\n    } else {\r\n      children.add(TextSpan(\r\n        text: text.substring(previous.end, matchedRange.start),\r\n      ));\r\n    }\r\n    previous = matchedRange;\r\n    children.add(\r\n      TextSpan(\r\n        text: matchedRange.textInside(text),\r\n        style: style?.copyWith(\r\n              color: blue_60,\r\n              fontWeight: FontWeight.bold,\r\n              background: Paint()..color = blue_10,\r\n            ) ??\r\n            TextStyle(\r\n              fontSize: 16,\r\n              color: blue_60,\r\n              fontWeight: FontWeight.bold,\r\n              background: Paint()..color = blue_10,\r\n            ),\r\n      ),\r\n    );\r\n  }\r\n  children.add(\r\n    TextSpan(\r\n      text: previous == null ? text : previous.textAfter(text),\r\n    ),\r\n  );\r\n\r\n  return TextSpan(\r\n    children: children,\r\n    style: style,\r\n  );\r\n}\r\n```\r\nThe output for this looks like this\r\n\r\n<img width=\"607\" alt=\"Screenshot 2024-03-07 at 17 35 19\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/45146774\/c9efe8f3-f8df-4ee7-a9ef-9d8fd2521e21\">\r\n\r\n<img width=\"607\" alt=\"Screenshot 2024-03-07 at 17 35 19\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/45146774\/13b91547-5a63-4465-a2fd-48decd5dd8c9\">","It seems to relate to your `CustomTextEditingController` which has some undefined components. Please provide a [completed and minimal reproducible code sample](https:\/\/stackoverflow.com\/help\/minimal-reproducible-example) that doesn\u2019t include 3rd party plugins or complex production code. ","I will try to get the minimal code for the CustomTextEditingController. But the issue persist even with the RichText widget right?",">But the issue persist even with the RichText widget right?\r\n\r\nThe issue is not reproduced. The text is showing as I shared above. Here is the sample code I used:\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: RichText(\r\n            text: TextSpan(\r\n              text: '\ud83d\udcc4 Untitled',\r\n              style: TextStyle(\r\n                color: Colors.blue[600],\r\n                fontWeight: FontWeight.bold,\r\n                background: Paint()..color = Colors.blue[100]!,\r\n                fontSize: 48,\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    ),\r\n  );\r\n}\r\n\r\n```\r\n<\/details>","<img width=\"332\" alt=\"image\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/13778798\/a5c56106-2bc8-454f-9d2e-b9f2af1a9f2a\">\r\nI also use `RichText`, and the background color is set in the internal `TextSpan`, but the Chinese and English displays are not on the same horizontal line, and the background color looks misplaced to the naked eye.\r\n@huycozy ","@giantss Thanks, I can reproduce that case with non-English and English text (on Android app and Web). This is not reproduced with emoji, though.\r\n\r\n<details>\r\n<summary>Sample code<\/summary>\r\n\r\n```dart\r\nimport 'package:flutter\/material.dart';\r\n\r\nvoid main() {\r\n  runApp(\r\n    MaterialApp(\r\n      title: 'Flutter Demo',\r\n      home: Scaffold(\r\n        body: Center(\r\n          child: RichText(\r\n            text: TextSpan(\r\n              text: '\u770b\u4e0d\u89c1Can\\'t see',\r\n              style: TextStyle(\r\n                color: Colors.blue[600],\r\n                fontWeight: FontWeight.bold,\r\n                background: Paint()..color = Colors.blue[100]!,\r\n                fontSize: 48,\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    ),\r\n  );\r\n}\r\n\r\n```\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9b276be7fe (2 hours ago), 2024-03-14 21:46:36 -0400\r\n    \u2022 Engine revision 995d8903e0\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-234.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>\r\n\r\n@Nithsua Since you mentioned `Non English` in the title. Do you also have the issue @giantss shared above? If @Nithsua only has the issue with emoji, I think we should separate this into 2 issues for better tracking.","Oh, I think this phenomenon may be caused by the same reason. This phenomenon is particularly obvious on iPhones.","@huycozy Yeah, I had the same issue with Non English Character(Chinese). \r\n\r\n@giantss I ran it on iOS. Will test it out on Android and get back on it.","I just re-checked this on iOS with the emoji example at https:\/\/github.com\/flutter\/flutter\/issues\/144753#issuecomment-1985085245, the issue indeed occurs there. \r\n\r\nMay be related: https:\/\/github.com\/flutter\/flutter\/issues\/40936\r\n\r\n<details>\r\n<summary>Demo<\/summary>\r\n\r\n| iOS (emoji) | Android (non-English text) |\r\n| --------------- | --------------- |\r\n<img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/d5114e3b-f04e-4ba2-821a-4e784af990ce\"> | <img width=\"400\" src=\"https:\/\/github.com\/flutter\/flutter\/assets\/104349824\/a280c1d5-b4ec-4950-aecd-3b888588e660\">\r\n\r\n<\/details>\r\n\r\n<details>\r\n<summary>flutter doctor -v (stable and master)<\/summary>\r\n\r\n```bash\r\n[\u2713] Flutter (Channel stable, 3.19.3, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.19.3 on channel stable at \/Users\/huynq\/Documents\/GitHub\/flutter\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision ba39319843 (6 hours ago), 2024-03-07 15:22:21 -0600\r\n    \u2022 Engine revision 2e4ba9c6fb\r\n    \u2022 Dart version 3.3.1\r\n    \u2022 DevTools version 2.31.1\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (3 available)\r\n    \u2022 iPhone (mobile) \u2022 d9a94afe2b649fef56ba0bfeb052f0f2a7dae95e \u2022 ios            \u2022 iOS 15.8 19H370\r\n    \u2022 macOS (desktop) \u2022 macos                                    \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)    \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n\u2022 No issues found!\r\n```\r\n\r\n```bash\r\n[!] Flutter (Channel master, 3.21.0-7.0.pre.46, on macOS 14.1 23B74 darwin-x64, locale en-VN)\r\n    \u2022 Flutter version 3.21.0-7.0.pre.46 on channel master at \/Users\/huynq\/Documents\/GitHub\/flutter_master\r\n    ! Warning: `flutter` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/huynq\/Documents\/GitHub\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at \/Users\/huynq\/Documents\/GitHub\/flutter_master. Consider adding \/Users\/huynq\/Documents\/GitHub\/flutter_master\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 9b276be7fe (2 hours ago), 2024-03-14 21:46:36 -0400\r\n    \u2022 Engine revision 995d8903e0\r\n    \u2022 Dart version 3.4.0 (build 3.4.0-234.0.dev)\r\n    \u2022 DevTools version 2.33.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    \u2022 Android SDK at \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 34.0.0\r\n    \u2022 ANDROID_HOME = \/Users\/huynq\/Library\/Android\/sdk\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jbr\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.2)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15C500b\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2023.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 android-studio-dir = \/Applications\/Android Studio.app\/\r\n    \u2022 Java version OpenJDK Runtime Environment (build 17.0.9+0-17.0.9b1087.7-11185874)\r\n\r\n[\u2713] VS Code (version 1.87.2)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (4 available)\r\n    \u2022 RMX2001 (mobile) \u2022 EUYTFEUSQSRGDA6D          \u2022 android-arm64  \u2022 Android 11 (API 30)\r\n    \u2022 iPad (mobile)    \u2022 00008103-000A1464346A201E \u2022 ios            \u2022 iOS 17.2 21C62\r\n    \u2022 macOS (desktop)  \u2022 macos                     \u2022 darwin-x64     \u2022 macOS 14.1 23B74 darwin-x64\r\n    \u2022 Chrome (web)     \u2022 chrome                    \u2022 web-javascript \u2022 Google Chrome 122.0.6261.129\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n<\/details>","From triage: we're not sure if this is something that it is possible to configure through the framework API. Its unclear if this is actually a bug","Sending this to team-framework, if you are familiar with this issue or know what the right solution is that would be great. Otherwise throw it back at us."],"labels":["framework","a: typography","has reproducible steps","team-framework","found in release: 3.19","found in release: 3.21"]},{"title":"Error resolving plugin [id: 'dev.flutter.flutter-plugin-loader', version: '1.0.0']","body":"### Steps to reproduce\r\n\r\n1. Create flutter project.\r\n2. flutter run for android\r\n\r\nI tried\r\n- deleting plugins{} from settings.gradle\r\n- running flutter pub cache repair\r\n- flutter pub get\r\n- flutter clean\r\n\r\nFlutter version is on latest stable version.\r\n\r\n### Expected results\r\n\r\nStart running with no errors.\r\n\r\n### Actual results\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nSettings file '\/Users\/tenna\/Desktop\/tcg_app\/tcg\/android\/settings.gradle' line: 21\r\n\r\n* What went wrong:\r\nError resolving plugin [id: 'dev.flutter.flutter-plugin-loader', version: '1.0.0']\r\n> Included build '\/Users\/tenna\/\u00e3\u00e3\u00e3\u00ad\u00e3\u00e3\u00e3\u00bc\/flutter\/packages\/flutter_tools\/gradle' does not exist.\r\n\r\n* Try:\r\n> Run with --stacktrace option to get the stack trace.\r\n> Run with --info or --debug option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\n* Get more help at https:\/\/help.gradle.org\r\n\r\nBUILD FAILED in 2s\r\nRunning Gradle task 'assembleDebug'...                              3.6s\r\nError: Gradle task assembleDebug failed with exit code 1\r\n\r\n\r\n\r\n### Logs\r\non flutter run --verbose\r\n<details open><summary>Logs<\/summary>\r\n\r\n```console\r\n[        ] FAILURE: Build failed with an exception.\r\n[   +2 ms] * Where:\r\n[        ] Settings file '\/Users\/tenna\/Desktop\/tcg_app\/tcg\/android\/settings.gradle' line: 21\r\n[        ] * What went wrong:\r\n[        ] Error resolving plugin [id: 'dev.flutter.flutter-plugin-loader', version: '1.0.0']\r\n[        ] > Included build '\/Users\/tenna\/\u00e3\u00e3\u00e3\u00ad\u00e3\u00e3\u00e3\u00bc\/flutter\/packages\/flutter_tools\/gradle' does not exist.\r\n[        ] * Try:\r\n[        ] > Run with --debug option to get more log output.\r\n[        ] > Run with --scan to get full insights.\r\n[        ] * Exception is:\r\n[        ] org.gradle.api.GradleException: Error resolving plugin [id: 'dev.flutter.flutter-plugin-loader', version: '1.0.0']\r\n[        ]      at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.resolveToFoundResult(DefaultPluginRequestApplicator.java:232)\r\n[        ]      at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.lambda$resolvePluginRequests$3(DefaultPluginRequestApplicator.java:168)\r\n[        ]      at org.gradle.util.internal.CollectionUtils.collect(CollectionUtils.java:207)\r\n[        ]      at org.gradle.util.internal.CollectionUtils.collect(CollectionUtils.java:201)\r\n[        ]      at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.resolvePluginRequests(DefaultPluginRequestApplicator.java:166)\r\n[        ]      at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugins(DefaultPluginRequestApplicator.java:101)\r\n[        ]      at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:117)\r\n[        ]      at org.gradle.configuration.BuildOperationScriptPlugin$1.run(BuildOperationScriptPlugin.java:65)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n[        ]      at org.gradle.configuration.BuildOperationScriptPlugin.lambda$apply$0(BuildOperationScriptPlugin.java:62)\r\n[        ]      at org.gradle.configuration.internal.DefaultUserCodeApplicationContext.apply(DefaultUserCodeApplicationContext.java:44)\r\n[        ]      at org.gradle.configuration.BuildOperationScriptPlugin.apply(BuildOperationScriptPlugin.java:62)\r\n[        ]      at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.applySettingsScript(ScriptEvaluatingSettingsProcessor.java:73)\r\n[        ]      at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.process(ScriptEvaluatingSettingsProcessor.java:66)\r\n[        ]      at\r\norg.gradle.initialization.SettingsEvaluatedCallbackFiringSettingsProcessor.process(SettingsEvaluatedCallbackFiringSettingsProcessor.java:34)\r\n[        ]      at org.gradle.initialization.RootBuildCacheControllerSettingsProcessor.process(RootBuildCacheControllerSettingsProcessor.java:47)\r\n[        ]      at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:50)\r\n[        ]      at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:47)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n[        ]      at org.gradle.initialization.BuildOperationSettingsProcessor.process(BuildOperationSettingsProcessor.java:47)\r\n[        ]      at org.gradle.initialization.DefaultSettingsLoader.findSettingsAndLoadIfAppropriate(DefaultSettingsLoader.java:136)\r\n[        ]      at org.gradle.initialization.DefaultSettingsLoader.findAndLoadSettings(DefaultSettingsLoader.java:62)\r\n[        ]      at org.gradle.initialization.SettingsAttachingSettingsLoader.findAndLoadSettings(SettingsAttachingSettingsLoader.java:34)\r\n[   +1 ms]      at org.gradle.internal.composite.CommandLineIncludedBuildSettingsLoader.findAndLoadSettings(CommandLineIncludedBuildSettingsLoader.java:34)\r\n[        ]      at org.gradle.internal.composite.ChildBuildRegisteringSettingsLoader.findAndLoadSettings(ChildBuildRegisteringSettingsLoader.java:48)\r\n[        ]      at org.gradle.internal.composite.CompositeBuildSettingsLoader.findAndLoadSettings(CompositeBuildSettingsLoader.java:35)\r\n[        ]      at org.gradle.initialization.InitScriptHandlingSettingsLoader.findAndLoadSettings(InitScriptHandlingSettingsLoader.java:34)\r\n[        ]      at org.gradle.initialization.GradlePropertiesHandlingSettingsLoader.findAndLoadSettings(GradlePropertiesHandlingSettingsLoader.java:39)\r\n[        ]      at org.gradle.initialization.DefaultSettingsPreparer.prepareSettings(DefaultSettingsPreparer.java:31)\r\n[        ]      at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.doLoadBuild(BuildOperationFiringSettingsPreparer.java:62)\r\n[        ]      at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.run(BuildOperationFiringSettingsPreparer.java:57)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n[        ]      at org.gradle.initialization.BuildOperationFiringSettingsPreparer.prepareSettings(BuildOperationFiringSettingsPreparer.java:45)\r\n[        ]      at org.gradle.initialization.VintageBuildModelController.lambda$prepareSettings$2(VintageBuildModelController.java:85)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:236)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:235)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$transitionIfNotPreviously$10(StateTransitionController.java:210)\r\n[        ]      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.transitionIfNotPreviously(StateTransitionController.java:206)\r\n[        ]      at org.gradle.initialization.VintageBuildModelController.prepareSettings(VintageBuildModelController.java:85)\r\n[        ]      at org.gradle.initialization.VintageBuildModelController.prepareToScheduleTasks(VintageBuildModelController.java:70)\r\n[   +1 ms]      at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$prepareToScheduleTasks$2(DefaultBuildLifecycleController.java:127)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:236)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:235)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$maybeTransition$8(StateTransitionController.java:187)\r\n[        ]      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.maybeTransition(StateTransitionController.java:183)\r\n[        ]      at org.gradle.internal.build.DefaultBuildLifecycleController.prepareToScheduleTasks(DefaultBuildLifecycleController.java:125)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:33)\r\n[        ]      at\r\norg.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$doScheduleAndRunTasks$2(DefaultBuildTreeLifecycleController.java:89)\r\n[        ]      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:101)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.doScheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:88)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:106)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$transition$5(StateTransitionController.java:166)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:166)\r\n[        ]      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n[        ]      at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:166)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:103)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:69)\r\n[        ]      at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\r\n[        ]      at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n[        ]      at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\r\n[  +82 ms]      at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\r\n[        ]      at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:136)\r\n[        ]      at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\r\n[        ]      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\r\n[        ]      at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\r\n[        ]      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\r\n[        ]      at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\r\n[        ]      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n[        ]      at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\r\n[        ]      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n[        ]      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\r\n[        ]      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n[        ]      at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n[        ]      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\r\n[        ]      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n[        ]      at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n[        ]      at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n[        ]      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n[        ]      at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\r\n[        ]      at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\r\n[        ]      at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\r\n[        ]      at\r\norg.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\r\n[        ]      at\r\norg.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\r\n[        ]      at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\r\n[        ]      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\r\n[        ]      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\r\n[        ]      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:63)\r\n[        ]      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\r\n[        ]      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:52)\r\n[        ]      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:40)\r\n[        ]      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\r\n[        ]      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\r\n[        ]      at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n[        ]      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n[        ]      at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\r\n[        ]      at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n[        ]      at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n[        ]      at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n[        ]      at java.base\/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n[        ]      at java.base\/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n[        ]      at java.base\/java.lang.Thread.run(Thread.java:829)\r\n[        ] Caused by: org.gradle.api.InvalidUserDataException: Included build '\/Users\/tenna\/\u00e3\u00e3\u00e3\u00ad\u00e3\u00e3\u00e3\u00bc\/flutter\/packages\/flutter_tools\/gradle'\r\ndoes not exist.\r\n[        ]      at org.gradle.composite.internal.DefaultIncludedBuildFactory.validateBuildDirectory(DefaultIncludedBuildFactory.java:45)\r\n[        ]      at org.gradle.composite.internal.DefaultIncludedBuildFactory.createBuild(DefaultIncludedBuildFactory.java:54)\r\n[        ]      at org.gradle.composite.internal.DefaultIncludedBuildRegistry.registerBuild(DefaultIncludedBuildRegistry.java:262)\r\n[        ]      at org.gradle.composite.internal.DefaultIncludedBuildRegistry.addIncludedBuild(DefaultIncludedBuildRegistry.java:116)\r\n[        ]      at org.gradle.internal.composite.DefaultBuildIncluder.lambda$includeRegisteredPluginBuilds$0(DefaultBuildIncluder.java:67)\r\n[        ]      at java.base\/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n[        ]      at java.base\/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\n[        ]      at java.base\/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n[        ]      at java.base\/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n[        ]      at java.base\/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n[        ]      at java.base\/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n[        ]      at java.base\/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n[        ]      at org.gradle.internal.composite.DefaultBuildIncluder.includeRegisteredPluginBuilds(DefaultBuildIncluder.java:70)\r\n[        ]      at\r\norg.gradle.composite.internal.plugins.CompositeBuildPluginResolverContributor$CompositeBuildPluginResolver.resolveFromIncludedPluginBuilds(CompositeBuil\r\ndPluginResolverContributor.java:98)\r\n[        ]      at\r\norg.gradle.composite.internal.plugins.CompositeBuildPluginResolverContributor$CompositeBuildPluginResolver.resolve(CompositeBuildPluginResolverContribut\r\nor.java:67)\r\n[        ]      at org.gradle.plugin.use.resolve.internal.CompositePluginResolver.resolve(CompositePluginResolver.java:34)\r\n[        ]      at org.gradle.plugin.use.resolve.internal.AlreadyOnClasspathPluginResolver.resolve(AlreadyOnClasspathPluginResolver.java:57)\r\n[        ]      at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.resolveToFoundResult(DefaultPluginRequestApplicator.java:229)\r\n[        ]      ... 153 more\r\n[        ] * Get more help at https:\/\/help.gradle.org\r\n[        ] BUILD FAILED in 1s\r\n[        ] Watched directory hierarchies: []\r\n[ +507 ms] Running Gradle task 'assembleDebug'... (completed in 2,540ms)\r\n[+2022 ms] Error: Gradle task assembleDebug failed with exit code 1\r\n[   +1 ms] \"flutter run\" took 17,683ms.\r\n[  +25 ms] \r\n           #0      throwToolExit (package:flutter_tools\/src\/base\/common.dart:10:3)\r\n           #1      RunCommand.runCommand (package:flutter_tools\/src\/commands\/run.dart:815:9)\r\n           <asynchronous suspension>\r\n           #2      FlutterCommand.run.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command.dart:1389:27)\r\n           <asynchronous suspension>\r\n           #3      AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n           <asynchronous suspension>\r\n           #4      CommandRunner.runCommand (package:args\/command_runner.dart:212:13)\r\n           <asynchronous suspension>\r\n           #5      FlutterCommandRunner.runCommand.<anonymous closure> (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:355:9)\r\n           <asynchronous suspension>\r\n           #6      AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n           <asynchronous suspension>\r\n           #7      FlutterCommandRunner.runCommand (package:flutter_tools\/src\/runner\/flutter_command_runner.dart:295:5)\r\n           <asynchronous suspension>\r\n           #8      run.<anonymous closure>.<anonymous closure> (package:flutter_tools\/runner.dart:119:9)\r\n           <asynchronous suspension>\r\n           #9      AppContext.run.<anonymous closure> (package:flutter_tools\/src\/base\/context.dart:153:19)\r\n           <asynchronous suspension>\r\n           #10     main (package:flutter_tools\/executable.dart:90:3)\r\n           <asynchronous suspension>\r\n```\r\n\r\n<\/details>\r\n\r\n\r\n### Flutter Doctor output\r\n\r\n<details open><summary>Doctor output<\/summary>\r\n\r\n```console\r\n[!] Flutter (Channel stable, 3.19.2, on macOS 14.1.1 23B81 darwin-arm64, locale ja-JP)\r\n    \u2022 Flutter version 3.19.2 on channel stable at \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter\r\n    ! Warning: `flutter` on your path resolves to \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter\/bin\/flutter, which is not inside your current Flutter SDK checkout at\r\n      \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter. Consider adding \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter\/bin to the front of your path.\r\n    ! Warning: `dart` on your path resolves to \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter\/bin\/dart, which is not inside your current Flutter SDK checkout at\r\n      \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter. Consider adding \/Users\/tenna\/\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\/flutter\/bin to the front of your path.\r\n    \u2022 Upstream repository https:\/\/github.com\/flutter\/flutter.git\r\n    \u2022 Framework revision 7482962148 (8 days ago), 2024-02-27 16:51:22 -0500\r\n    \u2022 Engine revision 04817c99c9\r\n    \u2022 Dart version 3.3.0\r\n    \u2022 DevTools version 2.31.1\r\n    \u2022 If those were intentional, you can disregard the above warnings; however it is recommended to use \"git\" directly to perform update checks and\r\n      upgrades.\r\n\r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n    \u2022 Android SDK at \/Users\/tenna\/Library\/Android\/sdk\r\n    \u2022 Platform android-34, build-tools 33.0.0\r\n    \u2022 Java binary at: \/Applications\/Android Studio.app\/Contents\/jre\/Contents\/Home\/bin\/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 15.3)\r\n    \u2022 Xcode at \/Applications\/Xcode.app\/Contents\/Developer\r\n    \u2022 Build 15E204a\r\n    \u2022 CocoaPods version 1.15.2\r\n\r\n[\u2713] Chrome - develop for the web\r\n    \u2022 Chrome at \/Applications\/Google Chrome.app\/Contents\/MacOS\/Google Chrome\r\n\r\n[\u2713] Android Studio (version 2021.2)\r\n    \u2022 Android Studio at \/Applications\/Android Studio.app\/Contents\r\n    \u2022 Flutter plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/9212-flutter\r\n    \u2022 Dart plugin can be installed from:\r\n      \ud83d\udd28 https:\/\/plugins.jetbrains.com\/plugin\/6351-dart\r\n    \u2022 Java version OpenJDK Runtime Environment (build 11.0.12+0-b1504.28-7817840)\r\n\r\n[\u2713] VS Code (version 1.87.0)\r\n    \u2022 VS Code at \/Applications\/Visual Studio Code.app\/Contents\r\n    \u2022 Flutter extension version 3.84.0\r\n\r\n[\u2713] Connected device (7 available)\r\n    \u2022 SCG08 (mobile)            \u2022 RFCR71VND0N                              \u2022 android-arm64  \u2022 Android 13 (API 33)\r\n    \u2022 tenna\u2019s iphone15 (mobile) \u2022 00008120-00120DDA1E10A01E                \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Tenna\u2019s iPad (2) (mobile) \u2022 00008101-0015198A28782C3A                \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Tenna\u2019s iPhone11 (mobile) \u2022 00008030-0012304A01D3402E                \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 Tenna\u2019s iPad (mobile)     \u2022 d1802c9bcfe7b9b836383ca90361f9c15180f21e \u2022 ios            \u2022 iOS 17.3.1 21D61\r\n    \u2022 macOS (desktop)           \u2022 macos                                    \u2022 darwin-arm64   \u2022 macOS 14.1.1 23B81 darwin-arm64\r\n    \u2022 Chrome (web)              \u2022 chrome                                   \u2022 web-javascript \u2022 Google Chrome 122.0.6261.112\r\n    ! Error: tenna has recently restarted. Xcode will continue when tenna is unlocked. (code -14)\r\n\r\n[\u2713] Network resources\r\n    \u2022 All expected network resources are available.\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n<\/details>\r\n","comments":["Check your JDK and Gradle version.","@ChurikiTenna \r\nCheck [this](https:\/\/docs.flutter.dev\/release\/breaking-changes\/flutter-gradle-plugin-apply) migration guide and see if it helps in your case or not.\r\n","Hi,\r\n\r\nI try to migrate the \"[Deprecated imperative apply of Flutter's Gradle plugins](https:\/\/docs.flutter.dev\/release\/breaking-changes\/flutter-gradle-plugin-apply)\" and got this error. \r\nThe migration recommend this for the settings.gradle:\r\n\r\n```\r\npluginManagement {\r\n    def flutterSdkPath = {\r\n        def properties = new Properties()\r\n        file(\"local.properties\").withInputStream { properties.load(it) }\r\n        def flutterSdkPath = properties.getProperty(\"flutter.sdk\")\r\n        assert flutterSdkPath != null, \"flutter.sdk not set in local.properties\"\r\n        return flutterSdkPath\r\n    }()\r\n\r\n    includeBuild(\"$flutterSdkPath\/packages\/flutter_tools\/gradle\")\r\n```\r\n\r\nBut the includeBuild line is wrong, the $flutterSdkPath undefined...\r\nTry to change this line and add the **settings.ext.flutterSdkPath** before..\r\nIn my settings.gradle is:\r\n\r\n```\r\n    settings.ext.flutterSdkPath = flutterSdkPath() \/\/ add this line\r\n    includeBuild(\"$settings.ext.flutterSdkPath\/packages\/flutter_tools\/gradle\") \/\/ change the variable..\r\n\r\n```\r\n\r\n","I have the same problem, with a small difference.\r\nWhen I run ` .\/gradlew signingRepor` t it gives me the following\r\n```\r\n* What went wrong:\r\nError resolving plugin [id: 'dev.flutter.flutter-plugin-loader', version: '1.0.0']\r\n> Included build 'D:\\Projects\\Flutter\\project\\android\\packages\\flutter_tools\\gradle' does not exist.\r\n```\r\nI followed the steps before the document and even the comment before mine but the problem persists. :c"],"labels":["waiting for customer response","in triage"]},{"title":"Migrate remaining internal iOS users of the Skia backend to Impeller","body":"We'd like to prepare the ground work for removing Skia GPU from iOS applications.\r\n\r\nTo do that, we'll need to stop support `--no-enable-impeller` (tracked elsewhere, this is google3 only).\r\n\r\n- [ ] Flip the default (to match the 3P tool), i.e. explicitly required (the equivalent of) `--no-enable-impeller`.\r\n- [ ] Announce the changes.\r\n- [ ] Add and enforce an allow-list.\r\n- [ ] Move folks over (i.e. remove opt-outs).\r\n- [ ] Remove the ability entirely to use `--no-enable-impeller`.\r\n\r\nI am starting on only the first part (flip the default), and the rest is subject to change (we're discussing it internally).\r\n\r\n_Note: This issue is locked as closed to flutter-hackers only._\r\n\r\n\/cc @chinmaygarde @dnfield @jonahwilliams @xster @CaseyHillers ","comments":[],"labels":["engine","customer: google","P2","c: tech-debt","e: impeller","permanently locked","team-engine","triaged-engine","fyi-google-testing","fyi-ios","slimpeller"]},{"title":"[flutter_tools] hot restart for flutter web does not fully reset browser state","body":"An example from https:\/\/github.com\/flutter\/flutter\/pull\/130662 is a flutter for web application that opens a websocket connection to a server. A hot restart will orphan the original connection, and then app will open a new one with the same client ID, which is not supported.\r\n\r\nPossibly related to https:\/\/github.com\/flutter\/devtools\/issues\/7231","comments":[],"labels":["P2","team-tool","triaged-tool"]},{"title":"Switch query to Firestore for \/api\/scheduler\/vacuum-github-commits","body":"Part of https:\/\/github.com\/flutter\/flutter\/issues\/142951\r\n\r\nAPI: https:\/\/github.com\/flutter\/cocoon\/blob\/main\/app_dart\/lib\/src\/request_handlers\/vacuum_github_commits.dart\r\n\r\nMore specifically, we need to switch the query to firestore: https:\/\/github.com\/flutter\/cocoon\/blob\/main\/app_dart\/lib\/src\/request_handlers\/vacuum_github_commits.dart#L76\r\nand then replace all datastore models to firestore `Commit` model.","comments":[],"labels":["team-infra","P2","triaged-infra"]}]