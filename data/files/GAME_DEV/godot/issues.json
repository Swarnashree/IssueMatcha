[{"title":"[macOS] Use `expand_to_title` for the project manager.","body":"Same as https:\/\/github.com\/godotengine\/godot\/pull\/64777 but for the Project Manager, it was not working nice with old PM design, but seems to look OK with new one. Can be controlled with the same editor setting as the main editor window title. \r\n\r\n<img width=\"1062\" alt=\"Screenshot 2024-03-23 at 21 08 59\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/7645683\/be92890b-9e48-42bb-9f1b-acb1da60dcbc\">\r\n","comments":[],"labels":["enhancement","platform:macos","topic:editor"]},{"title":"`PackedByteArray` copied and converted to `Array` without error when passed to a function with typed arguments","body":"### Tested versions\r\n\r\n`4.2.1.stable.arch_linux`\r\n\r\n### System information\r\n\r\n`Godot v4.2.1.stable unknown - Manjaro Linux #1 SMP PREEMPT_DYNAMIC Fri Mar 15 21:05:45 UTC 2024 - X11 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 4060 (nvidia; 550.67) - Intel(R) Core(TM) i7-9700F CPU @ 3.00GHz (8 Threads)`\r\n\r\n### Issue description\r\n\r\nIf a function has an `Array`-typed param, passing a `PackedByteArray` to it will not cause an error, and will silently convert the PBA to a normal `Array` (and making it effectively passed by value).\r\n\r\n```gdscript\r\nextends Node2D\r\n\r\nfunc _ready():\r\n    var val := PackedByteArray()\r\n    val.resize(10)\r\n    val.fill(0)\r\n    print(val)  \t# [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    f1(val) \t\t# No error!\r\n    print(val)\t# [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n\r\nfunc f1(param: Array):\r\n    param[5] = 10\r\n    print(param) \t# [0, 0, 0, 0, 0, 10, 0, 0, 0, 0]\r\n```\r\n\r\n### Steps to reproduce\r\n\r\nRun the above code - there is no type error and `val` is not updated in `_ready`\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["discussion","topic:gdscript"]},{"title":"DRAFT: C#-Performance:  Use a custom static lookup to handle InvokeGodotClassMethod and HasGodotClassMethod","body":"### Preface\r\nThis is in a **very early** draft state and by no means complete. I am presenting my working proof of concept to discuss if and how to progress with the main idea of this PR. There are lots of open TODOs, questions and polishing to be done. Please focus on the idea instead of the very rough sketch shown here - there is also some debug output which will obviously be removed later on. \r\n\r\nBe warned: this is a long one to give readers enough context! If you want a TL;DR scroll to the bottom for the performance numbers.\r\n\r\n### Introduction\r\nThe current C# bridge implementation of `InvokeGodotClassMethod` approximately looks like this for a C# script which overrides `_Ready` and `_Process`: \r\n\r\n```csharp\r\nprotected override bool InvokeGodotClassMethod(in godot_string_name method, NativeVariantPtrArgs args, out godot_variant ret)\r\n{\r\n    if (method == MethodName._Ready && args.Count == 0) {\r\n        _Ready();\r\n        ret = default;\r\n        return true;\r\n    }\r\n    if (method == MethodName._Process && args.Count == 1) {\r\n        _Process(global::Godot.NativeInterop.VariantUtils.ConvertTo<double>(args[0]));\r\n        ret = default;\r\n        return true;\r\n    }\r\n    return base.InvokeGodotClassMethod(method, args, out ret);\r\n}\r\n```\r\nWhile this seems pretty o.k. there is a small detail which makes `InvokeGodotClassMethod` more complicated than this snippet: the engine is passing the string `\"_process\"` while the user script `InvokeGodotClassMethod` checks for `\"_Process\"`. This edge case is handled by the C# glue of the builtin Godot classes (e.g. `Node2D` or `Node3D`):\r\n\r\n```csharp\r\n\/\/ excerpt from the generated Node.cs\r\n\/\/ MethodProxyName__* are the PascalCase variants, MethodName._Process is \"_process\" here\r\nif ((method == MethodProxyName__process || method == MethodName._Process) && args.Count == 1 && HasGodotClassMethod((godot_string_name)MethodProxyName__process.NativeValue))\r\n{\r\n    _Process(VariantUtils.ConvertTo<double>(args[0]));\r\n    ret = default;\r\n    return true;\r\n}\r\nif ((method == MethodProxyName__ready || method == MethodName._Ready) && args.Count == 0 && HasGodotClassMethod((godot_string_name)MethodProxyName__ready.NativeValue))\r\n{\r\n    _Ready();\r\n    ret = default;\r\n    return true;\r\n}\r\n```\r\n\r\nAnd then there is `HasGodotClassMethod` here - what does it do? It checks if a method is **actually** implemented as e.g. `Node` has to supply an empty stub implementation for `_Process(double delta)` to make this code compile. But why not just call the stub implementation? Because the C++ -> C# function parameter marshalling done via `VariantUtils` could be costly, especially for more complex types like arrays - so why marshall if an empty stub is called? This also has to be implemented this way because what happens if a user actually implements both \u00b4_Process(double)` and `_process(double)` in their script? We can't just auto-redirect `_process` to `_Process` because of this.\r\n\r\nAt this point we traversed the class hierarchy for a bit and jump back up to the original C# class to call `HasGodotClassMethod`.\r\nThis really isn't cheap and theres another part to this: the engine calls our C# script with `\"_process\"`, `\"_enter_tree\"` etc. no matter if we implement it or not and calling `HasGodotClassMethod` with an \"unimplemented\" method name traverses the whole class hierarchy and depending on what class the current C# script is based on, this can be quite expensive.\r\n\r\nThis makes the current implementation:\r\n\r\n- somewhat \"slow\"\r\n- hard to reason about as a human\r\n- hard to reason about for the branch predictor\r\n\r\n### How to improve this? \r\nI will try to keep this \"chapter\" high level:\r\n\r\nInstead of a bunch of `if`s we will use a `Dictionary<(MethodName, ParameterCount), Delegate>` to resolve functions. Adding all the C# bridge details to this yields a wrapper class (called `FunctionRegistry` for now) and the following snippet for a user script called `MainScene` which implements `_Ready` and `_Process` in C#:\r\n\r\n```csharp\r\npublic new static readonly FunctionRegistry<MainScene> Registry = new FunctionRegistry<MainScene>()\r\n    .Register(MethodName._Ready, 0, (MainScene instance, NativeVariantPtrArgs args, out godot_variant ret) => \r\n    {\r\n        instance._Ready();\r\n        ret = default;\r\n        return true;\r\n    })\r\n    .Register(MethodName._Process, 1, (MainScene instance, NativeVariantPtrArgs args, out godot_variant ret) => \r\n    {\r\n        instance._Process(global::Godot.NativeInterop.VariantUtils.ConvertTo<double>(args[0]));\r\n        ret = default;\r\n        return true;\r\n    })\r\n    .Compile();\r\n```\r\n\r\nThis still misses the  `\"_process\"` -> `\"_Process\"` mapping for the engine calls which is done via aliases, here is an excerpt from `Node.cs`:\r\n```csharp\r\n public static readonly FunctionRegistry<Node> Registry = new FunctionRegistry<Node>()\r\n    \/\/ remember MethodProxyName__process is the PascalCaseName here\r\n    .AddAlias(Node.MethodProxyName__process, 0, Node.MethodName._Process)\r\n```\r\n\r\nThese aliases are then imported which gives us:\r\n```csharp\r\npublic new static readonly FunctionRegistry<MainScene> Registry = new FunctionRegistry<MainScene>()\r\n    \/\/ this is new, we register our parents registry (aliases and function registrations)\r\n    \/\/ our parent registry did the same with Node, which did the same with GodotObject ...\r\n    .Register(global::Godot.Node3D.Registry)\r\n    .Register(MethodName._Ready, 0, (MainScene instance, NativeVariantPtrArgs args, out godot_variant ret) => \r\n    {\r\n        instance._Ready();\r\n        ret = default;\r\n        return true;\r\n    })\r\n    .Register(MethodName._Process, 1, (MainScene instance, NativeVariantPtrArgs args, out godot_variant ret) => \r\n    {\r\n        instance._Process(global::Godot.NativeInterop.VariantUtils.ConvertTo<double>(args[0]));\r\n        ret = default;\r\n        return true;\r\n    })\r\n    .Compile();\r\n```\r\nThis concept fixes all evil issues:\r\n- if a script overrides a function that its parent already implemented, it gets overriden because the registry of the parent is added first and then potentially overriden by local `.Register` definitions\r\n- if user actually implements `_process(double)` and `_Process(double)` the correct methods are invoked when the engine passes `\"_process\"` as the method name\r\n\r\nAnd now you also know why the `.Compile()` step is needed: we have to apply the aliases somewhere.\r\n\r\nAnd thats about it, invoking a function is easy and fast now, a negative response is just as fast which is a big boon (see introduction): \r\n```csharp\r\nprotected override bool InvokeGodotClassMethod(in godot_string_name method, NativeVariantPtrArgs args, out godot_variant ret)\r\n{\r\n    if (Registry.TryGetFunction(in method, args.Count, out var scriptFunction))\r\n    {\r\n         return scriptFunction(this, args, out ret);\r\n    }\r\n\r\n    ret = new godot_variant();\r\n    return false;\r\n}\r\n```\r\n### Numbers\r\n\r\nTo stress test this I made a test project which spawns 100.000 Nodes with an attached C# script. Said C# script overrides `_Ready` and `_Process`. I used it in another PR (https:\/\/github.com\/godotengine\/godot\/pull\/89807) if you wonder why its name is different from this PR:\r\n[VariantOptimizationTestProject.zip](https:\/\/github.com\/godotengine\/godot\/files\/14733596\/VariantOptimizationTestProject.zip)\r\n\r\nOn my machine (Win11, NET.Core 7.0.2, CPU: 5800x3D), I get the following results:\r\n| Implementation | Editor -> Profiler -> Process Time (ms) |\r\n|--------|--------|\r\n| Old implementation (across multiple runs) | 238 - 245ms |\r\n| This PR (across multiple runs) | 40 - 45ms | \r\n\r\n### TODOs\r\n\r\n- [ ] Cleanup TODOs meant for myself\r\n- [ ] Talk to maintainers about open questions, issues and how to solve them (see some code TODOs)\r\n- [ ] Check with the maintainers if its ok to make `godot_string_name._data` visible with `internal` as everything else breaks apart \r\nif this change is declined\r\n- [ ] What about `InvokeGodotClassStaticMethod`?\r\n- [ ] Check the assembly size, it must have shrunk a bit\r\n- [ ] This does not handle overloading with the same parameter count, the old implementation did not support this as well, is this ok?\r\n- [ ] This PR will not build in CI as I did not adjust the code generation tests, fix this\r\n- [ ] Add unit tests for `FunctionRegistry` as the whole \"inheritance\" and aliasing part of it is pretty easily testable\r\n\r\n\r\nThank you to @paulloz and @raulsntos for helping me in Rocket.Chat \/ Discord on how to go on with my idea <3","comments":[],"labels":["enhancement","topic:dotnet","performance"]},{"title":"Remove pointless `_notification()` function in `EditorPropertyOTVariation`","body":"Just something I stumbled upon.","comments":[],"labels":["enhancement","topic:codestyle"]},{"title":"PackedByteArray Unicode decoding functions decode invalid Unicode instead of returning empty strings","body":"### Tested versions\r\n\r\n- 4.2.stable\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Ubuntu 20.04.6 LTS (Focal Fossa) - X11 - GLES3 (Compatibility) - Mesa Intel(R) HD Graphics 530 (SKL GT2) () - Intel(R) Core(TM) i5-6440HQ CPU @ 2.60GHz (4 Threads)\r\n\r\n### Issue description\r\n\r\nThe documentation states that for a PackedByteArray containing invalid Unicode data, the `get_string_from_utf*()` and `get_string_from_wchar()` methods will return an empty string. However, when this is actually attempted, the operation will print errors to the console and return a string with U+FFFD in place of the invalid codepoints.\r\n\r\nThe expected behavior is that no errors are printed and empty strings are returned. This way a project can do something like:\r\n\r\n```gdscript\r\nfunc decode_valid_utf8(b: PackedByteArray):\r\n\tvar decoded = b.get_string_from_utf8()\r\n\tif decoded == '' and not b.is_empty():\r\n\t\treturn null\r\n\treturn decoded\r\n```\r\n\r\nTo my knowledge, there is currently no way of validating Unicode.\r\n\r\n### Steps to reproduce\r\n\r\n```gdscript\r\nPackedByteArray([0x80]).get_string_from_utf8()\r\n# LE unpaired surrogate\r\nPackedByteArray([0xFF, 0xDF]).get_string_from_utf16()\r\n# LE unpaired surrogate\r\nPackedByteArray([0xFF, 0xDF, 0x00, 0x00]).get_string_from_utf32()\r\n# noncharacters\r\nPackedByteArray([0xFF, 0xFF, 0xFF, 0xFF]).get_string_from_utf32()\r\nPackedByteArray([0xFF, 0xFF, 0xFF, 0xFF]).get_string_from_wchar()\r\n```\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nRefer to the \"steps to reproduce\" section.","comments":["I'd say this is a case of incorrect documentation, and the code shouldn't be changed as it is valid in itself and might be used by people in its current form","Maybe, but there is currently no way to validate UTF at all. Additionally, some of the functions indeed return empty strings as stated in the documentation, but while printing errors.","This is the correct way to process utf8 according to the standard AFAIK\r\n\r\n> but there is currently no way to validate UTF at all\r\n\r\nI'd say this method shouldn't be used for that purpose in the first place, there should be dedicated methods for it instead of wastefully decoding a string to do so","The UTF32 and wchar methods do not return empty strings on invalid characters. However, for the UTF16 decoder with the example above, a seemingly wholly invalid string is returned, instead of having a valid replacement character U+FFFD inserted.","But `0xFFDF` is a valid codepoint? It's valid utf16 no? Are you thinking of something like `0xD800` as a leading halfword?","> But 0xFFDF is a valid codepoint?\r\n\r\nIt's 0xDFFF (little-endian), invalid unpaired surrogate.","My bad, they didn't specify endianness of their system, the method uses system endianness","> Maybe, but there is currently no way to validate UTF at all. \r\n\r\nInternal functions `String::parse_utf16` and `String::parse_utf8` return error code, but I do not think these are directly exposed to the GDScript.","> However, for the UTF16 decoder with the example above, a seemingly wholly invalid string is returned\r\n\r\nThis is intentional in this case (but should be documented, and maybe have a flag to configure this behavior), unpaired surrogates are invalid in UTF-16, but Windows allow using them in the file names (and UTF-16 \u2194 String function are used to work with Windows file API), so unpaired surrogates are preserved as is.","> PackedByteArray([0xFF, 0xFF, 0xFF, 0xFF]).get_string_from_utf32()\r\n> PackedByteArray([0xFF, 0xFF, 0xFF, 0xFF]).get_string_from_wchar()\r\n\r\nThese are valid, in case wchar_t is UTF-32 (on all platforms except Windows).\r\n\r\n> U+FFFE <noncharacter-FFFE> and U+FFFF <noncharacter-FFFF> are [noncharacters](https:\/\/en.wikipedia.org\/wiki\/Universal_Character_Set_characters#Non-characters), meaning they are reserved but do not cause ill-formed Unicode text.","> > Maybe, but there is currently no way to validate UTF at all.\r\n> \r\n> Internal functions `String::parse_utf16` and `String::parse_utf8` return error code, but I do not think these are directly exposed to the GDScript.\r\n\r\nUsing the builtin search for `unicode`, `utf`, `parse` shows up nothing. I've also checked for `parse` and `valid` in the documentation. So the methods are not exposed to GDScript."],"labels":["bug","discussion","topic:core","documentation"]},{"title":"Fix concave `CollisionPolygon2D` debug drawing and docs","body":"The debug drawing for `CollisionPolygon2D` showed the convex decomposition unconditionally, which was meaningless in Segments build mode. The dead code would show a filled polygon, which would also be misleading as you can just as well put a character on the inside (because the shape is purely built of segments), so this PR draws nothing on the inside when the build mode is Segments. (If people do prefer a filled polygon, we could do that instead.)\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/229837\/07f2f1f8-a7f7-4d2d-b03a-fa677b048617\r\n\r\nThe documentation had some copy\/paste error from the 3D analogue, and it was mentioning only the solid option; now hollow is mentioned as well.\r\n\r\n- Closes https:\/\/github.com\/godotengine\/godot\/issues\/10110","comments":[],"labels":["bug","documentation","topic:physics","topic:2d"]},{"title":"Replace XML codeblock spaces with tabs","body":"XML files use tabs for base indentation and spaces for codeblock indentation. This mixup makes it annoying to write code examples, because you have to add spaces manually, which is very error-prone.\r\n\r\nThis PR makes codeblocks use tabs.","comments":[],"labels":["enhancement","usability","documentation"]},{"title":"file_dialog.cpp theme name incorrect","body":"### Tested versions\n\n4.3\n\n### System information\n\nwindows 11\n\n### Issue description\n\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/scene\/gui\/file_dialog.cpp#L200\r\nIn these few lines of code, it should be icon_normal_color instead of icon_color_normal.\r\n\r\nThe valid code should be:\r\n```\r\ndir_prev->begin_bulk_theme_override();\r\ndir_prev->add_theme_color_override(\"icon_normal_color\", theme_cache.icon_normal_color);\r\ndir_prev->add_theme_color_override(\"icon_hover_color\", theme_cache.icon_hover_color);\r\ndir_prev->add_theme_color_override(\"icon_focus_color\", theme_cache.icon_focus_color);\r\ndir_prev->add_theme_color_override(\"icon_pressed_color\", theme_cache.icon_pressed_color);\r\ndir_prev->end_bulk_theme_override();\r\n\r\ndir_next->begin_bulk_theme_override();\r\ndir_next->add_theme_color_override(\"icon_normal_color\", theme_cache.icon_normal_color);\r\ndir_next->add_theme_color_override(\"icon_hover_color\", theme_cache.icon_hover_color);\r\ndir_next->add_theme_color_override(\"icon_focus_color\", theme_cache.icon_focus_color);\r\ndir_next->add_theme_color_override(\"icon_pressed_color\", theme_cache.icon_pressed_color);\r\ndir_next->end_bulk_theme_override();\r\n```\n\n### Steps to reproduce\n\nnone\n\n### Minimal reproduction project (MRP)\n\nnone","comments":[],"labels":["bug","topic:gui"]},{"title":"Prefer family name in fonts' names table","body":"Currently, `family_name` is used as a font's name. This field is an ASCII string, but\r\n\r\n> In case the font doesn't provide a specific family name entry, FreeType tries to synthesize one, deriving it from other name entries.\r\n\r\nFreeType converts non-ASCII characters into question marks (\"?\") in this process, resulting in unreadable names for some fonts.\r\n\r\nThis PR prioritizes reading SFNT names (the name table of TrueType and OpenType fonts) to avoid possible question marks. English (US) is still preferred, so it's mostly compatible.\r\n\r\nAmong possible encodings, UTF-16 is the most common one that Godot's `String` supports. But it's always in big endian, so I added an extra parameter to `String::parse_utf16()` to specify the endianness to use when no BOM is present.","comments":[],"labels":["enhancement","topic:core","topic:gui"]},{"title":"Incoherent Property hint_string with Array","body":"### Tested versions\r\n\r\nGodot v4.2.stable (46dc27791)\r\n\r\n### System information\r\n\r\nWindows 10.0.22631 - Vulkan (Mobile) - dedicated NVIDIA GeForce RTX 3060 Ti (NVIDIA; 31.0.15.5152) - 11th Gen Intel(R) Core(TM) i7-11700KF @ 3.60GHz (16 Threads)\r\n\r\n### Issue description\r\n\r\nWhen trying to do a custom inspector for a \"in-game\" tool, I have problems with PROPERTY_HINT_TYPE_STRING wrong documentation, or bug that the last type (for the element) is its name as string instead of a type value (Variant).\r\nMake the parsing for nested type incoherent.\r\n\r\nIn the documentation for 2D Array: \r\n1D Array\r\n```gdscript\r\nhint_string = \"%d:\" % [elem_type]\r\nhint_string = \"%d\/%d:%s\" % [elem_type, elem_hint, elem_hint_string]\r\n```\r\n2D Array\r\n```gdscript\r\nhint_string = \"%d:%d:\" % [TYPE_ARRAY, elem_type]\r\nhint_string = \"%d:%d\/%d:%s\" % [TYPE_ARRAY, elem_type, elem_hint, elem_hint_string]\r\n```\r\nhttps:\/\/docs.godotengine.org\/en\/4.2\/classes\/class_@globalscope.html#enum-globalscope-propertyhint\r\n\r\nBut what I get for 1D Array:\r\n```gdscript\r\nhint_string = \"%d:%s\" % [elem_type, elem_type_name]\r\n```\r\n\r\nAnd for 2D Array:\r\n```gdscript\r\nhint_string = \"%d:%s\" % [TYPE_ARRAY, TYPE_ARRAY_name]\r\n```\r\n\r\nThere is also some incoherency between arrays and non arrays about [PropertyHint](https:\/\/docs.godotengine.org\/en\/4.2\/classes\/class_@globalscope.html#enum-globalscope-propertyhint) and [get_property_list()](https:\/\/docs.godotengine.org\/en\/4.2\/classes\/class_object.html#class-object-method-get-property-list).\r\nLike why using hint_string instead of class_name for built_in types ?\r\nWhy mixing type names and type values in hint_string ? Ok for for using \"\/\" for property_hint separation, if checking for nested type only would check the first part, but would expect first part with type values only. I think there is something to do to allow like type stacking.\r\n\r\n### Steps to reproduce\r\n\r\n1. Use the associated MRP that test on\r\n```gdscript\r\n@export var test_bool: bool = false\r\n@export var test_string: String = \"test\"\r\n@export var test_arraybool: Array[bool] = [true, false]\r\n@export var test_arayaraaystring: Array[Array] = [[\"string1\", \"string2\"],[\"string3\", \"string4\"]]\r\n@export var test_arayaraaybool: Array[Array] = [[true, true],[true, false]]\r\n\r\n@export var testResource: CustomResource = CustomResource.new()\r\n@export var test_arayresource: Array[CustomResource] = [CustomResource.new()]\r\n```\r\n2. Run the main scene\r\n\r\nGet result :\r\n```\r\n{ \"name\": \"test_bool\", \"class_name\": &\"\", \"type\": 1, \"hint\": 0, \"hint_string\": \"bool\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_string\", \"class_name\": &\"\", \"type\": 4, \"hint\": 0, \"hint_string\": \"String\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arraybool\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"1:bool\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayaraaystring\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"28:Array\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayaraaybool\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"28:Array\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"testResource\", \"class_name\": &\"CustomResource\", \"type\": 24, \"hint\": 17, \"hint_string\": \"CustomResource\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayresource\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"24\/17:CustomResource\", \"usage\": 4102 }\r\n```\r\n\r\nWhat would be expected (with some sugestions about class_name):\r\n```\r\n{ \"name\": \"test_bool\", \"class_name\": &\"bool\", \"type\": 1, \"hint\": 0, \"hint_string\": \"1\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_string\", \"class_name\": &\"String\", \"type\": 4, \"hint\": 0, \"hint_string\": \"4\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arraybool\", \"class_name\": &\"Array[bool]\", \"type\": 28, \"hint\": 23, \"hint_string\": \"1\/:bool\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayaraaystring\", \"class_name\": &\"Array[Array]\", \"type\": 28, \"hint\": 23, \"hint_string\": \"28:\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayaraaybool\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"28:\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_ressource\", \"class_name\": &\"CustomResource\", \"type\": 24, \"hint\": 17, \"hint_string\": \"CustomResource\", \"usage\": 4102 }\r\n\r\n{ \"name\": \"test_arayressource\", \"class_name\": &\"\", \"type\": 28, \"hint\": 23, \"hint_string\": \"24\/17:CustomResource\", \"usage\": 4102 }\r\n```\r\n\r\nNote that due to limitation with nested types, test_arayaraaystring and test_arayaraaybool are the same.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[IncoherentProperty.zip](https:\/\/github.com\/godotengine\/godot\/files\/14733002\/IncoherentProperty.zip)\r\n","comments":[],"labels":["topic:gdscript","topic:editor","needs testing"]},{"title":"Improve some notification and translation docs","body":"Closes #89804","comments":["~Before this is merged, I would like to tackle a way that makes the current behavior people use to update texts still work.~\r\n\r\nSee below.","On the `NOTIFICATION_TRANSLATION_CHANGED` doc also mention it gets sent when setting auto translate mode. It seems like a important thing and I kind of forgot about that. When creating the issue, I thought it only gets sent when changing locale or smth (as I have never had a reason to set the auto translate mode at runtime).","> I thought it only gets sent when changing locale or smth\r\n\r\nThe current naming definitely doesn't help. We discussed in the dev chat that also the opportunity arrives, to replace `_CHANGED` with `_UPDATED`.\r\n\r\nAlso, I'm afraid that people will have to adapt to the new way of doing it. As I can't think of a way to support the old behavior without over-complicating things."],"labels":["enhancement","documentation"]},{"title":"Touchpad (laptop) scrolling is way too fast in the web editor","body":"### Tested versions\n\nTested on Godot 4.3.dev5, but also seen as far back as 3.5\n\n### System information\n\nChromeOS 118.0, Chrome 118.0\n\n### Issue description\n\nScrolling in the editor is extremely fast on the web editor from a laptop.\n\n### Steps to reproduce\n\n1. Open the web editor from a laptop (https:\/\/editor.godotengine.org\/)\r\n2. Open a project and click on any node\r\n3. Scroll through the inspector by dragging 2 fingers up or down on the touchpad\n\n### Minimal reproduction project (MRP)\n\n[N\/A]","comments":[],"labels":["bug","platform:web","topic:editor","usability"]},{"title":"is_action_just_released happens twice in _gui_input()","body":"### Tested versions\r\n\r\nv4.2.stable.official [46dc27791] checked only\r\n\r\n### System information\r\n\r\nwindows 7 v4.2.stable Compatable rendering \r\n\r\n### Issue description\r\n\r\ni want to clarify that nothing like that happens in `is_action_just_pressed()` and `is_action_pressed()` .  is it ok? maybe i need to do it by \t`if event.is_action(\"Click\") and Input.is_action_just_pressed(\"Click\"):` and it works but its seems like a bug neverless.\r\n\r\n### Steps to reproduce\r\n\r\n```gdscript\r\nfunc gui_input(event:InputEvent):\r\n    \tif Input.is_action_just_released(\"Click\"):\r\n              print(\"released\")\r\n```\r\n\r\n (with click being left mouse button) and look at console after clicking a mouse once.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A ","comments":["You shouldn't use `Input` in this method, use the event, this is documented [here](https:\/\/docs.godotengine.org\/en\/stable\/classes\/class_input.html#class-input-method-is-action-just-pressed)","Based on your description I have tried to replicate the issue, but I was unable to do so. For me \"released\" is printed only once.\r\n\r\nSo there seem to be additional setup steps necessary to recreate this behavior. Please provide a minimal reproduction project.\r\n","Sounds like pressing or releasing two different actions on the same frame, would be good to see if the problem is solved by using the correct methods","The action is not released twice, `_gui_input()` can be received multiple times per frame for different events, while only one of them will be your action. You should use `event.is_action_released()` instead. Action methods from `Input` are best to be used in `_process()` or `_physics_process()`."],"labels":["discussion","needs testing","topic:input"]},{"title":"Fix missing i18n for some editor strings","body":null,"comments":[],"labels":["bug","topic:editor"]},{"title":"[VisualShader] Remove invalid graph connections when ports are removed","body":"Supercedes #80312. (partial salvage, the undo\/redo stuff had to be redone)\r\nFixes #79417.\r\n\r\n![invalid-conns-fix](https:\/\/github.com\/godotengine\/godot\/assets\/50084500\/2ba9cf7a-be38-44b7-9908-4f3378ad1a7b)\r\n","comments":[],"labels":["bug","topic:editor","topic:shaders"]},{"title":"Don't force-cleanup already cleaned up `TileMap` cells","body":"AFAICT fixes #89774.\r\ncc @MagmaGuy if you could please [test](https:\/\/docs.godotengine.org\/en\/4.2\/contributing\/workflow\/testing_pull_requests.html) for confirmation.\r\n\r\nThis seems like a band aid fix though, I'd say there's plenty to improve regarding cleaning\/freeing stuff. There should probably be more control about it. E.g. currently when toggling visibility of a TileMapLayer it cleanups all rendering stuff on hiding, and recreates everything on show. Meaning if you'd e.g. want to keep blinking a TileMapLayer (without making any other changes to it) then it would still do all needless freeing\/recreating, very inefficient (blinking is of course quite an exteme example). I'd say it should be somehow possible to prevent freeing (and thus recreating), on demand or something like that.","comments":["I can't test because unless I didn't spot it the actions don't create a windows mono artifact."],"labels":["bug","topic:2d","performance"]},{"title":"Don't error multiple times when trying to load missing default bus layout","body":"If \"Load Default\" is pressed when `res:\/\/default_bus_layout.tres` is missing, along with the \"There is no 'res:\/\/default_bus_layout.tres' file.\" warning dialog, two errors are also printed in the output:\r\n\r\n> * Cannot open file 'res:\/\/default_bus_layout.tres'.\r\n> * Failed loading resource: res:\/\/default_bus_layout.tres. Make sure resources have been imported by opening the project in the editor at least once.\r\n\r\nThis PR gets rid of these two errors.\r\n","comments":[],"labels":["bug","topic:editor","cherrypick:4.2"]},{"title":"C#: Improve godot_variant conversion for godot_variant-marshable C# types","body":"I was working on another C# binding optimization when I noticed that `VariantUtils.ConvertTo<T>(in godot_variant variant)` did a suspicious amount of `GetTypeFromHandle` calls (aka `typeof(T)`) for a simple `Node3D` that only overrides `_Process(double delta)`:\r\n![flamechart](https:\/\/github.com\/godotengine\/godot\/assets\/1199562\/fb52b69b-bdab-4a01-8195-27d4de0c4d5a)\r\n(Also note the accompanying `op_Equality` calls for the type comparisons)\r\n\r\nThe commit message for 3f645f980c5d7894f98075c29d1c65319be62be7 (which introduced this method) noted the following:\r\n> C# generics don't support specialization the way C++ templates do.\r\n I knew NativeAOT could optimize away many type checks when the types\r\n are known at compile time, but I didn't trust the JIT would do as good\r\n a job, so I initially went with cached function pointers.\r\n\r\n > Well, it turns out the JIT is also very good at optimizing in this\r\n scenario, so I'm changing the methods to do the conversion directly,\r\n rather than returning a function pointer for the conversion.\r\n\r\nWhile the JIT is generally good at optimizing such `typeof(T)` guarded function calls, various limitations apply - e.g. the  function *must* be inlined to enable the JIT to remove the unreachable branches for the specific callsite (and specific `T`). \r\nThis function has grown over time and it seems like the JIT does not inline `ConvertTo` (and the accompanying `CreateFrom`) as often as we like, which makes its performance degrade, which hurts for cheap conversion like e.g. `double`.\r\n\r\nI have run into this issue in the past and found a workaround which makes C# behave similar to C++ templates when it comes to method specialization: generic static classes with a statically evaluated delegate.\r\nThe delegate is resolved at class load time and is then \"resolved and cached \" for us at all call sites by the runtime. This leads to small (code size) delegates which are easily inlineable with guaranteed \"zero-overhead\" runtime characteristics. The new implementation is also stable in the sense that we are not praying for JIT optimization which might vary over time - especially because the performance of `ConvertTo \/ CreateFrom` does not depend on inlining anymore.\r\n\r\nI am attaching a simple example project which spawns 100.000 simple Node3D with an attached C# script that implements `_Ready` and `_Process` (as generated by default) - I chose a high Node count to amplify the performance differences between both implementations.\r\n[VariantOptimizationTestProject.zip](https:\/\/github.com\/godotengine\/godot\/files\/14731720\/VariantOptimizationTestProject.zip)\r\n\r\n\r\nThe timings on my local machine (Win11, NET.Core 7.0.2, CPU: 5800x3D) are as follows:\r\n\r\n| Implementation| Editor Profiler -> Frame Time -> Process Time (ms) |\r\n|--------|--------|\r\n| Previous implementation (across multiple runs) | 239 - 252ms|\r\n| Optimized implementation (across multiple runs) | 216 - 220ms | \r\n\r\nWhile this optimization may look small on paper (~10%) I want to emphasize that its gains are tremendous when applying other optimizations to the C# binding. [A PoC of mine](https:\/\/github.com\/godotengine\/godot\/pull\/89826) reduces the projects `Process Time` to ~50ms before applying this change. After applying this change it gets reduced to ~25ms, a ~50% improvement.\r\n\r\nLet me know if the code style or the comments feel off (or you have any other question)!","comments":[],"labels":["enhancement","topic:dotnet","performance"]},{"title":"Disable shader editor's undo\/redo menu items when they do nothing","body":"Also fixed wrong header includes in the `.h`\/`.cpp`.","comments":[],"labels":["enhancement","topic:editor","usability"]},{"title":"Add missing `RenderInfoType` enum to `Viewport`","body":"As added in:\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/85811\r\n\r\nAlso added details to the documentation of these copied from `RenderingServer`\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:rendering","topic:2d"]},{"title":"`NOTIFICATION_TRANSLATION_CHANGED` gets sent at wrong times","body":"### Tested versions\n\n- Reproducible in 4.3.dev4, 4.3.dev5\r\n- Not reproducible in 4.3.dev3\r\n\r\nLikely due to #87530 (@YeldhamDev)\n\n### System information\n\nWindows 10\n\n### Issue description\n\nThe notification `NOTIFICATION_TRANSLATION_CHANGED` now gets emit when ~~creating nodes~~ nodes enter the tree. \r\n\r\nIt happens before the node is ready, which leads to crashes in one of the most common use case: you hook something like `update_ui()` to it. Generally the function to update UI will set a bunch of text on other nodes, but as the node just got created and its children aren't ready, it will lead to crashes. This also creates duplicate calls to the `update_ui`, because in most uses `_ready` would already take care of initial setup call.\r\n\n\n### Steps to reproduce\n\n- Create a scene with node that listens on `_notification` for `NOTIFICATION_TRANSLATION_CHANGED`. (print something or put a breakpoint)\r\n- The notification will happen when running project, even when locale did not change.\n\n### Minimal reproduction project (MRP)\n\n[Translation changed bug MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14731563\/Translation.changed.bug.MRP.zip)\r\n","comments":["This is by design, and it matters, the translation isn't known until it enters the tree so having this emitted is necessary, how else would you know what the configured translation for the tree is?\r\n\r\nThis should maybe be documented better though\r\n\r\nThe main issue here is simply that you aren't adjusting to how the engine works\r\n\r\n> but as the node just got created and its children aren't ready\r\n\r\nThe node isn't ready until its children are, they have already had `_ready` fired on them when their parent fires it\r\n\r\n> This also creates duplicate calls to the update_ui, because in most uses _ready would already take care of initial setup call.\r\n\r\nThe solution to that is to just do those on the translation notification though, right?\r\n\r\nEdit: The issue here (which isn't clear from the description) seems to be that it's fired on entering the tree, not in `_ready`, that is something to discuss, but that's something to adjust to I'd say, it's not impossible to deal with this, and this improvement is important and good\r\n\r\nWe could theoretically move it to some other point in the initialization, but that's a complex question, and depends on various use cases","> This is by design, and it matters, the translation isn't known until it enters the tree so having this emitted is necessary, how else would you know what the configured translation for the tree is?\r\n\r\n- The notification is sent when node enters tree. That is incorrect time to send notification, as the translation didn't change.\r\n- The node doesn't need to know that it entered tree by receiving the `NOTIFICATION_TRANSLATION_CHANGED`.\r\n- The node does not receive info about the locale from the notification,  and it doesn't need to. It would in most cases just use `tr()` to retranslate all text after translation changed.\r\n\r\n> >This also creates duplicate calls to the update_ui, because in most uses _ready would already take care of initial setup call.\r\n\r\n> The solution to that is to just do those on the translation notification though, right?\r\n\r\nUsing the translation notification instead of  `_ready` for initialization seems crazy to me.\r\n\r\nIn my opinion the notification should only be sent when setting the locale, not when node enters tree. That would be how it worked before 4.3.dev4.","> The notification is sent when node enters tree. That is incorrect time to send notification, as the translation didn't change.\r\n\r\nHow would you know? What if it's configured for a different locale than the current one?\r\n\r\n> Using the translation notification instead of _ready for initialization seems crazy to me.\r\n\r\nWell that's your opinion, and it's different from the people developing this feature :)","> > The notification is sent when node enters tree. That is incorrect time to send notification, as the translation didn't change.\r\n> \r\n> How would you know?\r\n\r\nWell, as i am the one who wrote the code of the MRP , i know it will never change the translation, nor does it even have any translations in the project.\r\n\r\n> > Using the translation notification instead of _ready for initialization seems crazy to me.\r\n> \r\n> Well that's your opinion, and it's different from the people developing this feature :)\r\n \r\nUhhh","> Well, as i am the one who wrote the code of the MRP , i know it will never change the translation, nor does it even have any translations in the project.\r\n\r\nSo you don't care about this notification... So your use case isn't relevant, why are you even using the notification if you're not using translation?\r\n\r\nBur you're missing my point:\r\nHow would you know that your node is configured for the current locale?","> > Well, as i am the one who wrote the code of the MRP , i know it will never change the translation, nor does it even have any translations in the project.\r\n> \r\n> So you don't care about this notification... So your use case isn't relevant, why are you even using the notification if you're not using translation?\r\n\r\nNo i just made a MRP. I discovered the problem in [GodSVG ](https:\/\/github.com\/MewPurPur\/GodSVG)when opening in 4.3 dev. It will currently crash due to this when you click on the settings button. This doesn't happen in 4.2 or 4.3.dev3.\r\n\r\n> How would you know that your node is configured for the current locale?\r\n\r\nIt just entered the tree and used the currently set locale to translate everything. The notification is generally only used to update nodes when they are already in the tree.","> It just entered the tree and used the currently set locale to translate everything. The notification is generally only used to update nodes when they are already in the tree.\r\n\r\nThat's inefficient though, why not just use the single notification, that's much more efficient, you're only considering this an issue because you're used to one method, it makes a lot of sense and improves a lot of code, avoids duplication of code, etc.\r\n\r\nYou really don't see the value of this?\r\n\r\nBut as I said already, you need to adjust your code to how the engine works, that's what happens with compatibility breakage :) so the crash isn't a bug with this, it's because your code isn't fixed to adjust to how the engine works, please try updating your code so it works","> That's inefficient though, why not just use the single notification\r\n\r\nI don't understand how that's supposed to happen more efficiently. How would the code of the MRP need to change? I can only see this working by adding an is_node_ready().","To adjust to translation specially, handle it in a safe way, I don't see why you change the translation of another node, it should do that itself? It should not rely on `@onready`\r\n\r\nAs I already said we can evaluate and discuss if this should be moved after `_ready`, but it doesn't make sense to make another control translate IMO, it should do it itself\r\n\r\nNote that in 4.2 you'd still error if you, for example, called `set_auto_translate` on the node when it's not ready","`NOTIFICATION_TRANSLATION_CHANGED` now fires consistently with `NOTIFICATION_THEME_CHANGED` - when node enters tree. This is the first occasion when a translation\/theme can be consistently fetched, hence you are supposed to use it to update your theming and strings that don't use auto-translation.\r\n\r\nNote however that these notifications are mostly used internally, where nodes are created from code instead of being part of an instantiated scene. Hence there is discrepancy between core usage and how would users typically use it. You should use these notifications only on the current nodes, nodes created from script inside `_init()`, and if you want to use it on child nodes created in the editor, you need to wait until ready signal.\r\n\r\nWe should document this if it isn't mentioned already.\r\n\r\nEDIT:\r\nAlso the reason why this was changed is that translation is now propagated from parent nodes (see [auto_translate_mode](https:\/\/docs.godotengine.org\/en\/latest\/classes\/class_node.html#class-node-property-auto-translate-mode))."],"labels":["documentation","topic:gui"]},{"title":"Add necessary flags when opening directory with xfce4-terminal","body":"It needs the `--working-directory` flag to work properly. Otherwise nothing opens.","comments":[],"labels":["enhancement","topic:editor"]},{"title":"Built-in docs: Method lists' category vertical separation is too small","body":"### Tested versions\n\nGodot 4.x\n\n### System information\n\nWindows\n\n### Issue description\n\nGodot 3:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/76705401\/e95a4f5e-82bf-4832-85de-2670c7a30e51)\r\n\r\nGodot 4:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/76705401\/6f6118c5-3731-453a-909f-121ba05f73c4)\r\n\r\nThe clearly defined vertical separation in Godot 3 is visibly present in Godot 4, but way too small, giving the list a wall of text look.\n\n### Steps to reproduce\n\nN\/A\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["The cause seems to be a change in functionality in `RichTextLabel` between Godot 3 and Godot 4.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/editor\/editor_help.cpp#L719-L724\r\n\r\nIn Godot 3, a row of only empty cells is rendered at the same height as a row with text.\r\nIn Godot 4, it is significantly shorter.","Personally, I like the 4.x option better. 3.x wastes too much space.","The grouping is very arbitrary to begin with, it just checks that the first three characters match"],"labels":["discussion","topic:editor","topic:gui"]},{"title":"Fix heap-use-after-free when converting scene group to global","body":"To reproduce the crash, use an asan enabled build. In the Node dock, convert any group between scene group and global group for a few times.","comments":[],"labels":["bug","topic:editor","crash"]},{"title":"Image.set_pixel(x, y, Color) does not appear to work on Android","body":"### Tested versions\r\n\r\n- Reproduced on v4.1.3.stable.official [f06b6836a] and v4.2.1.stable.official [b09f793f5] \r\n\r\n### System information\r\n\r\nAndroid 14 - ~~Forward+ and~~ Mobile renderer\r\n\r\n### Issue description\r\n\r\nI've created an image from a viewport that I want to change the colors outside of the character model. On Windows the code works as expected, but when I export to Android it appears to not be working. I used this image \r\n![screenshot](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/9eb2a5d8-06f5-490e-a670-0615ee874046)\r\n\r\n\r\n### Steps to reproduce\r\n\r\n~~1. Create a new scene\r\n1. Add a TextureRect to the scene and the sample image from above to the project\r\n1. Use the following code to transform the image\r\n```gdscript\r\nvar replace_color := Color('4d4df9')\r\nvar new_color = Color.GREEN\r\n\r\nfunc _ready() -> void:\r\n\tvar image = Image.load_from_file(\"res:\/\/screenshot.png\")\r\n\tfor y in image.get_height():\r\n\t\tfor x in image.get_width():\r\n\t\t\tif image.get_pixel(x, y) == replace_color:\r\n\t\t\t\timage.set_pixel(x, y, new_color)\r\n\r\n\timage.resize(256,256)\r\n\t$TextureRect.texture = ImageTexture.create_from_image(image)\r\n\r\n```\r\n4. Setup Android export and deploy to Android\r\n5. Watch as your images pixels remain their blue color ~~\r\nEdit: to be updated based on new MRP \r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[~~ImageSetPixelTest.zip~~](https:\/\/github.com\/godotengine\/godot\/files\/14731335\/ImageSetPixelTest.zip)\r\n\r\n[MRP3.zip](https:\/\/github.com\/godotengine\/godot\/files\/14733543\/MRP3.zip)\r\n","comments":["You might not be seeing the exact color due to precision limitations, please try [`is_equal_approx`](https:\/\/docs.godotengine.org\/en\/stable\/classes\/class_color.html#class-color-method-is-equal-approx)","@AThousandShips wow thanks for the quick reply! I tried this and it didn't work.\r\n\r\nI've been trying to setup debugging on my Android device, I feel I've done it years ago on 3.x but I'm not sure what I'm doing wrong with 4.x. Would you know how to debug on Android?\r\n\r\nI also checked [`Image.cpp`](https:\/\/github.com\/godotengine\/godot\/blob\/master\/core\/io\/image.cpp#L3184) to see if there was something missing from an Android only path, but not exactly fluent in C++ and didn't see an `if Android` condition in the method.\r\n\r\nI'm wondering could changing the Image format work? I'm not too familiar with the image types in Godot, but a suitable work around for me would be to save the image with transparent pixels. This is the code I use to save the image `var image = get_viewport().get_texture().get_image().get_region(region)`, is there a way to set an alpha color before saving the image to disk?","For debugging on Android you might look [here](https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/export\/one-click_deploy.html#android)","Thanks again! \r\n\r\nI've reviewed those documents again since you provided them, but I don't see anything I'm missing. It's just when I drop a debug marker in the editor that it doesn't get hit when I'm running on my phone. The only thing I can't troubleshoot with is Wi-fi debugging, because Android Studio just gives up when I try to setup Wireless debugging, so this is USB debug.","You need to connect to it, I'm not sure exactly what you are missing, you might want to ask on the [forums](https:\/\/forum.godotengine.org\/) for help with debugging, as this isn't really the place for that part :)","Great thanks I toggled a few things and restarted my machine I'm able to debug now. And it appears your instinct was right, it's slightly different color blue on android. I'll test on a few devices but probably have a flag to switch colors based on OS.\r\n\r\nYou can see in the image below, `pix_color` is the color I want to change, but it's visibly different than the replace color which is what is set in the Project Settings -> Environment. So maybe it's an issue with colors cross platforms? Shouldn't a hex value be the same on different devices even if it looks different?\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/621e60ed-d51d-4326-9b0b-84e6b576ffa3)\r\n","Now that could be a bug, unsure what that could be caused by though, could be related to your export or other optimizations, it could be due to compression or other effects, so maybe try disabling some compression and see","![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/c7bc0fbc-90d2-40fc-94b5-f916342d7844)\r\nHmm, I've tried both `==` and the `is_equal_approx` method you provided, and neither are finding equality on Android for the colors for `pix_color` and `replace`:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/8b302d31-0640-44fb-b094-d973d1952a85)\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/22f6caf4-6093-4d87-9591-6f23b5d0a6fc)\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/7375adde-0c40-43ab-87b6-23d8e94613e7)\r\n\r\nSo there might be some sort of bug happening with `Color` and `is_equal_approx`, maybe even `==` on Android\r\n\r\n\r\n","Nope, this is not an error at all with the file color, you simply can't load it, because it's not exported, you get a warning for this:\r\n\"WARNING: Loaded resource as image file, this will not work on export: 'res:\/\/screenshot.png'. Instead, import the image file as an Image resource and load it normally as a resource.\"\r\n\r\nSo you need to import it as an image instead or it won't be loaded :)\r\n\r\nAlternatively do:\r\n```gdscript\r\nvar image = load(\"res:\/\/screenshot.png\").get_image()\r\n```","Okay great, that fixes the MRP but I'll reference my last post:\r\n\r\nI have it debugging on Android and the image is definitely displayed coming from the `user:\/\/` directory (so that might've been a mistake from me, should've saved the resource to `user:\/\/` for the MRP), I've changed the color so it matches Androids project environment. (Image below from Windows, but Android is the same but the colors are still blue, this is from my actual project) \r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/3026d2fa-63fd-4215-b317-6c069c5ddff1)\r\n\r\nBelow is the Android output, keep in mind the character portrait was created on Android so it's different:\r\n![Screenshot_20240323-093635](https:\/\/github.com\/godotengine\/godot\/assets\/5303125\/0be6ba37-5f0e-436d-9246-c3807924be33)\r\n\r\n","Please upload an updated MRP :)","Well I'm even more confused now, the MRP2 I created works as I expect. I have to step away from my PC now but I'm using the same code in my MRP as I am in my actual project so it's a bit confusing\r\n[MRP2.zip](https:\/\/github.com\/godotengine\/godot\/files\/14731854\/MRP2.zip)\r\n","So I figured out what was happening. I had the project in 4.2, and when I back-ported to 4.1 because of some 3D model issues, it must've reset the mobile renderer to Mobile (instead of Forward+).\r\n\r\nIn the MRP2 I had set the model renderer to Forward+, I changed it to Mobile and now it my MRP3 is actually reproducing hte issue.\r\n[MRP3.zip](https:\/\/github.com\/godotengine\/godot\/files\/14733543\/MRP3.zip)\r\n\r\nSo it appears it's an issue with Mobile renderer, not Forward+."],"labels":["platform:android","needs testing"]},{"title":"Translate \"Line N\" as a whole","body":"Avoid manually combining words into phrases. \"Line 3\" is not necessarily the same order or number of words after translation.","comments":[],"labels":["bug","topic:editor"]},{"title":"Disable Clear All button when not filtering in Settings","body":"![image](https:\/\/github.com\/godotengine\/godot\/assets\/372476\/70a6c3a5-0478-4542-b589-97922ea704be)\r\n*Clear All button on the top right is disabled when not filtering.*\r\n\r\nAlso added tooltip text to the button so it's clear that the button removes filters, not shortcuts.\r\n\r\nEdit: changes the Clear All in both Editor Settings and Project Settings.","comments":[],"labels":["enhancement","topic:editor","usability"]},{"title":"Apply margin to camera and shape in SpringArm3D","body":"Fixes [ !76220](https:\/\/github.com\/godotengine\/godot\/issues\/76220)\r\n\r\nCurrently, margin is only being used when neither a Camera3D is the SpringArm3D's child node nor when a shape has been set, which doesn't seem to align with the described behavior in the docs https:\/\/docs.godotengine.org\/en\/stable\/classes\/class_springarm3d.html#class-springarm3d-property-margin.\r\n\r\nAfter this change, in addition to the scenario it currently works for, the margin value will also apply when the child node of the SpringArm3D is a Camera3D node, and it will apply when there's a shape set for SpringArm3D.\r\n\r\nAnd for those who were wondering, SpringArm3D already has an if condition for handling a child node with Camera3D, so I'm just adding this application of margin there as well.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:physics","topic:3d"]},{"title":"Make the use of ellipses in menus consistent","body":"This PR removes ellipses when the menu item...\r\n- does not require additional information:\r\n    - executes immediately: Insert Key (Animation track editor)\r\n    - brings settings dialog: Editor Settings, Configure Snap, Edit, etc\r\n    - shows a separate tool\/view: Command Palette, Manage Export Templates, Orphan Resource Explorer, About Godot, etc\r\n- embeds submenu: Export As, Set Folder Color, etc\r\n\r\nAlso added ellipses for...\r\n- delete actions that require user confirmation\r\n- rename actions (even when it's in-place rename as users can still press ESC to cancel)\r\n\r\n---\r\n\r\nReferences about the use of ellipses in menu items:\r\n\r\n> Indicate a command that needs additional information (including a confirmation) by adding an ellipsis at the end of the label.\r\n> This doesn't mean you should use an ellipsis whenever an action displays another window only when additional information is required to perform the action. For example, the commands About, Advanced, Help, Options, Properties, and Settings must display another window when clicked, but don't require additional information from the user. Therefore they don't need ellipses. [^windows]\r\n> \r\n> Append an ellipsis to a menu item\u2019s label when people need to provide additional information before the action can complete. The ellipsis character (\u2026) signals that another view will open in which people can input information or make choices. [^macos]\r\n\r\n\r\n\r\n[^windows]: https:\/\/learn.microsoft.com\/en-us\/windows\/win32\/uxguide\/cmd-menus#using-ellipses\r\n[^macos]: https:\/\/developer.apple.com\/design\/human-interface-guidelines\/menus","comments":["I'd say this isn't extremely clear cut, many well established programs use ellipses where you have removed them:\r\n* Export as (gimp, open-office)\r\n* Settings, in various phrasings (open-office, Kate, octave, KeePass, GH Desktop, Signal, Visual Studio, Kdnlive)\r\n* Configure grid\/snap\/etc. (gimp)\r\n* Help Search (Kdnlive)\r\n\r\nAnd surely others, so I don't think just going by a design document is necessarily what to follow\r\n\r\nA few of these were also added recently so let's get a clear decision before we keep going back and forth undoing changes :)\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/88436\r\n\r\nI'd label this as an enhancement and not a bug as well","My opinion is that what's more important than following some third party design guides is to have a uniform design language, where specific terms or symbols mean specific things, here we have used the ellipses to mean \"you need to respond to this in some way\", and that's important IMO\r\n\r\nNow for \"About\" it makes sense, but generally I'd say the ellipses are appropriate where they trigger some kind of dialog, or more specifically perhaps, it depends on the question \"if I press this, is the operation done?\", i.e. does something happen and complete by pressing it, not opening a dialog, or requiring a response, a complete action"],"labels":["bug","discussion","topic:editor","usability","topic:gui","cherrypick:4.2"]},{"title":"Fix AnimationPlaybackTrack seeking behavior overall","body":"- Supersedes \/ closes https:\/\/github.com\/godotengine\/godot\/pull\/86298\r\n- Supersedes \/ closes https:\/\/github.com\/godotengine\/godot\/pull\/89771\r\n- Supersedes \/ closes https:\/\/github.com\/godotengine\/godot\/pull\/89736\r\n\r\nThis is a combined and slightly modified (especially for about #86298) PR of the above three, as they do not work well in separate pieces.\r\n\r\n- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/86217\r\n- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89768\r\n\r\nIt should be reworked by https:\/\/github.com\/godotengine\/godot-proposals\/issues\/8783 in the future, but I consider this sufficient to eliminate the inconvenience as a bridge until then.\r\n\r\nCo-authored-by: @jsjtxietian, @Miguel0312, @BruceLiCong","comments":[],"labels":["bug","topic:editor","regression","topic:animation","cherrypick:4.2"]},{"title":"[4.3.dev3+] Editor and project manager windows are always borderless when using wayland","body":"### Tested versions\n\nReproducible with 4.3.dev3, dev4, and dev5 for both standard and .NET versions\n\n### System information\n\nLinux 6.7.6-arch1-1; Gnome 45.4 with wayland; i5-7200u with Intel HD Graphics 620\n\n### Issue description\n\nWith `run\/platforms\/linuxbsd\/prefer_wayland` set to true, the project manager and editor window are both borderless and as a result are impossible to move or resize. Additionally, (at least on Gnome) with both x and wayland the project manager follows window positioning keyboard shortcuts but the editor only follows fullscreen shortcuts. This leaves the editor effectively only usable while fullscreened on wayland (ie no good way to split screen the godot editor with an external code editor)\r\n\r\n[sidenote - disabling `prefer_wayland` and then following the save and restart prompt still results in the editor using wayland; it needs to be restarted separately from that prompt for the setting to actually take effect]\n\n### Steps to reproduce\n\nLaunch any affected version of godot with wayland support enabled on a system using wayland\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","platform:linuxbsd","topic:porting"]},{"title":"Dotnet Sdk not updating when exporting","body":"### Tested versions\n\nGodot v4.3.dev.mono (e6d09ef1c)\n\n### System information\n\nGodot v4.3.dev.mono (e6d09ef1c) - Pop!_OS 22.04 LTS - Wayland - Vulkan (Forward+) - dedicated Intel(R) Arc(tm) A750 Graphics (DG2) () - AMD Ryzen 7 5800X 8-Core Processor (16 Threads)\n\n### Issue description\n\nThis was a very tricky one to debug.  Mainly because the dotnet nuget builds when building from source seem to be updating the godot engine build correctly.  However, when exporting (at least for Linux) they do not seem to update.  In my case, I had an old cache from last year.  And as a result, my linux exports where segfaulting.  The only way to seem to get the the export to take the new dotnet builds is to delete the dotnet build outputs in the mono module.\r\n\r\nFortunately a bash script can take care of cleaning this for us since ``dotnet clean`` does not seem to work and the ``--push-nupkgs-local`` arg as described here also doesn't seem to work: https:\/\/docs.godotengine.org\/en\/stable\/contributing\/development\/compiling\/compiling_with_dotnet.html#nuget-packages\r\n\r\nThis script will delete all folders ignored by git in the folder passed to it:\r\n\r\n```bash\r\n#!\/bin\/bash\r\n\r\nset -e\r\n\r\nprev_pwd=\"$PWD\"\r\n\r\ndir_to_clean=\"$1\"\r\ncd \"$dir_to_clean\"\r\necho \"cleaning directory: $dir_to_clean\"\r\nfiles_to_remove=\"$(git status . --ignored --short)\"\r\n\r\nif [[ \"$files_to_remove\" == \"\" ]]\r\nthen\r\n    echo \"$dir_to_clean: nothing to remove\"\r\n    exit 0\r\nfi\r\n\r\necho \"Removing the following files and folders:\"\r\necho \"${files_to_remove[@]}\"\r\n\r\n# This command removes all files that are gitignored.  This is useful for removing files that \r\n# ``scons --clean`` doesn't remove such as the mono glue.\r\n#\r\n# Explanation of commands:\r\n#\r\n# Lists all the files and folders that are being ignored due .gitignore\r\n# git status --ignored --short\r\n#\r\n# Removes the !! that ``git status --ignored --short`` outputs.\r\n# NOTE: This could be an issue if we ever name a file or folder with !\r\n# sed 's\/!\/\/g'\r\n#\r\n# Replaces all newline charactes with a ' ' so ``git status --ignored --short`` is space delimited\r\n# tr '\\n' ' '\r\n#\r\n# Removes all of the files and folders returned after formatting the output\r\n# rm -rf\r\n#\r\nrm -rf $(echo \"${files_to_remove[@]}\" | sed 's\/!\/\/g' | tr '\\n' ' ')\r\n\r\ncd \"$prev_pwd\"\r\n```\r\n\r\nAnd it can be called like this:\r\n\r\n```bash\r\n# Clean the dotnet build cache because the cache is not being cleared as the godot documentation\r\n# suggests it should.  And this is just another level of certainty that the cache is cleared.\r\n\"$dir\/clean-ignore.sh\" godot\/modules\/mono\/glue\/GodotSharp\r\n\"$dir\/clean-ignore.sh\" godot\/modules\/mono\/editor\/Godot.NET.Sdk\r\n\"$dir\/clean-ignore.sh\" godot\/modules\/mono\/editor\/GodotTools\r\n```\n\n### Steps to reproduce\n\n1. Build godot mono from source.  \r\n1. Build the Linux export template for mono.  Then export a build.\r\n1. Make a change to the C# code.  Ideally something we know will get called like the generated c# code in godot\/modules\/mono\/editor\/Godot.NET.Sdk\/Godot.SourceGenerators\/GodotPluginsInitializerGenerator.cs.  In my case, I added a ``Console.WriteLine(\"Hello\")`` inside ``InitializeFromGameProject`` so it looks like:\r\n\r\n\r\n```cs\r\nstring source =\r\n                @\"using System;\r\nusing System.Runtime.InteropServices;\r\nusing Godot.Bridge;\r\nusing Godot.NativeInterop;\r\n\r\nnamespace GodotPlugins.Game\r\n{\r\n    internal static partial class Main\r\n    {\r\n        [UnmanagedCallersOnly(EntryPoint = \"\"godotsharp_game_main_init\"\")]\r\n        private static godot_bool InitializeFromGameProject(IntPtr godotDllHandle, IntPtr outManagedCallbacks,\r\n            IntPtr unmanagedCallbacks, int unmanagedCallbacksSize)\r\n        {\r\n            Console.WriteLine(\"Hello\");\r\n            try\r\n            {\r\n                DllImportResolver dllImportResolver = new GodotDllImportResolver(godotDllHandle).OnResolveDllImport;\r\n\r\n                var coreApiAssembly = typeof(global::Godot.GodotObject).Assembly;\r\n\r\n                NativeLibrary.SetDllImportResolver(coreApiAssembly, dllImportResolver);\r\n\r\n                NativeFuncs.Initialize(unmanagedCallbacks, unmanagedCallbacksSize);\r\n\r\n                ManagedCallbacks.Create(outManagedCallbacks);\r\n\r\n                ScriptManagerBridge.LookupScriptsInAssembly(typeof(global::GodotPlugins.Game.Main).Assembly);\r\n\r\n                return godot_bool.True;\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                global::System.Console.Error.WriteLine(e);\r\n                return false.ToGodotBool();\r\n            }\r\n        }\r\n    }\r\n}\r\n\";\r\n```\r\n\r\nThen rebuild the c# glue and assemblies.\r\n\r\nDocs here: https:\/\/docs.godotengine.org\/en\/stable\/contributing\/development\/compiling\/compiling_with_dotnet.html#building-the-managed-libraries\r\n\r\nAnd here: https:\/\/docs.godotengine.org\/en\/stable\/contributing\/development\/compiling\/compiling_with_dotnet.html#nuget-packages\n\n### Minimal reproduction project (MRP)\n\nNA","comments":[],"labels":["bug","needs testing","topic:dotnet","topic:export"]},{"title":"Custom resource types are unable to be imported.","body":"### Tested versions\n\n4.2-stable\n\n### System information\n\nGodot v4.2.stable - Linux Mint 21.1 (Vera) - X11 - Vulkan (Forward+) - integrated Intel(R) Iris(R) Plus Graphics (ICL GT2) () - Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHz (8 Threads)\n\n### Issue description\n\nWhen using a `EditorImportPlugin`, the `_get_resource_type()` function cannot return a custom resource type. This means that files cannot be dragged into inspector properties of a custom resource type.\n\n### Steps to reproduce\n\n1. Create editor plugin\r\n2. Follow [import plugin documentation](https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/plugins\/editor\/import_plugins.html)\r\n3. Make a custom resource\r\n4. Change return value of `_get_resource_type()` to `\"CustomResource\"`\r\n5. _Cannot get class \"CustomResource\"_\n\n### Minimal reproduction project (MRP)\n\n[test_project.zip](https:\/\/github.com\/godotengine\/godot\/files\/14729143\/test_project.zip)\r\n","comments":[],"labels":["bug","topic:editor","topic:plugin","needs testing","topic:import"]},{"title":"[iOS Export] Check directory content before deleting old export leftovers.","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89715\r\n\r\nMakes iOS export a bit safer. Instead of deleting previous export folders (`project_name` and `project_name.xcodeproj`, was partially broken) without any checks, exporter delete them only if most of the files in the folder match expected files for the previous export (or export option to delete unconditionally is enabled).","comments":[],"labels":["enhancement","platform:ios","topic:editor","topic:export"]},{"title":"Allow dragging multiple nodes to filesystem and create scenes without dialog and using {nodename}.tscn","body":"<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n\r\nI grew tired of dragging each node (3d model in this case) inside a gltf file into the file system one by one to create new scenes. This small change allows you to drag multiple nodes into the filesystem and create .tscn files, bypassing the save file dialogue and just saving the new scenes with the same name the node had. This only works with dragging, and not rightclicking multiple nodes. Dragging multiple nodes into the filesystem will obviously save to the folder the drag ended on.\r\n","comments":["Dropping nodes in empty area results in generic error:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/66c08ea1-b15b-4cf4-b024-b51e3e15a07b\r\n\r\nIt should save them in `res:\/\/`. And also the error should provide more details.\r\n\r\nCreating multiple scenes will create undo action for each one separately. It should be a single action.","> Dropping nodes in empty area results in generic error:\r\n> \r\n>  VqKyGkDJ9q.mp4 \r\n> It should save them in `res:\/\/`. And also the error should provide more details.\r\n> \r\n> Creating multiple scenes will create undo action for each one separately. It should be a single action.\r\n\r\nThanks for the feedback, bug is fixed when dragging to blank area. It behaved differently on macOS and actually succeeded but I added an explicit check. As far as undo goes, the undo code looks like magic to me so it'll be a minute before I get those changes implemented. ","The easiest way is to make use of nested actions. If you create an action, any other action created before the parent is commited will be merged into single action.","> The easiest way is to make use of nested actions. If you create an action, any other action created before the parent is commited will be merged into single action.\r\n\r\nThanks, I would've have spun my wheels without that bit of knowledge."],"labels":["enhancement","topic:editor","usability"]},{"title":"Make project naming setting available in project manager","body":"Closes https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9357\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2223172\/c436e60b-2e51-4553-bc0b-6cfc0b631d22)\r\n","comments":[],"labels":["enhancement","topic:editor","usability"]},{"title":"Adding extra args in the editor \"connect a signal to a method\" popup when the method is located on a superclass fails","body":"### Tested versions\n\n4.2.1 Stable\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.22631 - Vulkan (Forward+) - integrated Intel(R) UHD Graphics 620 (Intel Corporation; 30.0.101.1338) - Intel(R) Core(TM) i5-8265U CPU @ 1.60GHz (8 Threads)\n\n### Issue description\n\nJust like adding an extra value to a script that is put on a node works, instead directing it onto a method that is in a superclass that is written in GDScript should work. \r\n\r\n![bild](https:\/\/github.com\/godotengine\/godot\/assets\/11806563\/ae009226-cf04-4d4f-9596-cfd3c75d0b31)\r\n\r\nThe picture above shows the setup:\r\n- A scene that has a Line edit node, this node has a script called 'child' attached.\r\n- This class has no methods, and extends a class called parent.\r\n- Parent has a method called 'line_is_edited'\r\n- Connecting the 'text_changed' via the dialog with no extra arguments with this method works fine, as expected (modifying the method signature, removing the second argument)\r\n- However, when you add the extra argument, the editor throws the following error:\r\n![bild](https:\/\/github.com\/godotengine\/godot\/assets\/11806563\/4ba26728-a554-488d-ba9d-ead6527c290c)\r\n\n\n### Steps to reproduce\n\n1. Open MRP\r\n2. Open Scene\r\n3. Open the 'connect signal' dialog through right clicking the signal 'text_changed' under Node in the inspector\r\n4. Pick the superclass method through the 'pick' button.\r\n5. Add an extra bool parameter\r\n6. Press 'Connect'\r\n7. Observe error\n\n### Minimal reproduction project (MRP)\n\n[error project.zip](https:\/\/github.com\/godotengine\/godot\/files\/14727779\/error.project.zip)\r\n","comments":[],"labels":["bug","topic:gdscript","topic:editor","needs testing"]},{"title":"Add Maximum Timeouts per Tick property to Timer","body":"This allows Timers to be configured to emit the `timeout` signal multiple times per process or physics tick. This is useful for timers with a low wait time (< 0.05 seconds), or to ensure they stick closer to real time when framerate is highly variable.\r\n\r\nKeep in mind that high values will allow the function to be called dozens of times or more in a single frame, which can have a performance impact if the method connected to the `timeout` signal is slow.\r\n\r\nThe default value is `1` to preserve existing behavior. We could perhaps consider increasing this to `8` (to match the default **Max Physics Steps per Frame** project setting value) to improve out-of-the-box Timer usability at low wait times, but this will change behavior in some projects.\r\n\r\n- This closes https:\/\/github.com\/godotengine\/godot-proposals\/issues\/3386.\r\n\r\n**Testing project:** [test_timer_maximum_timeouts_per_tick.zip](https:\/\/github.com\/godotengine\/godot\/files\/14727175\/test_timer_maximum_timeouts_per_tick.zip)\r\n\r\n## Preview\r\n\r\n*MTPT: Max Timeouts Per Tick*\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/180032\/fdb96bf3-464b-4f61-a481-87a915ea81e2","comments":[],"labels":["enhancement","topic:core"]},{"title":"Autocomplete Input.get_axis StringName parameter suddenly switches from action name to symbols while typing","body":"### Tested versions\n\n- Reproducible in v4.2.1.stable.official [b09f793f5]\n\n### System information\n\nGodot v4.2.1.stable - Ubuntu 22.04.4 LTS 22.04 - X11 - GLES3 (Compatibility) - Mesa Intel(R) HD Graphics 4600 (HSW GT2) () - Intel(R) Core(TM) i7-4710HQ CPU @ 2.50GHz (8 Threads)\n\n### Issue description\n\nWhen filling the StringName parameters for `Input.get_axis(...)`, after typing the bracket `(` or forcing autocomplete with Ctrl+space, the list of action names will appear as expected for negative_action: StringName.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1067772\/977acd3d-b90a-449c-9cb4-121d5a17ae12)\r\n\r\nHowever, if you type the action name start like \"mo\" for \"move_left\", it will quickly switch to symbols starting with \"mo\" instead.\r\n\r\nIn order to enforce action name listing, you need to type an opening single\/double quote `'` `\"` first.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1067772\/d0d0ffbe-f8ef-4b40-823e-b35e2d7cb041)\r\n\r\nThis is OK to distinguish strings from symbols, however my issue is that the autocomplete popup switches from strings to symbols while user is in the middle of typing.\r\n\r\n![Godot 4 2 1 - Autocomplete Input get_axis string changes to var](https:\/\/github.com\/godotengine\/godot\/assets\/1067772\/8559557f-d124-4a4c-8167-8217704b035e)\r\n\r\nThis is disturbing as it feels like you can select the action name, if you're fast enough you can even start pressing up\/down to navigate the results and suddenly the popup refreshes and sends you back to the top, with unrelated results. It should either:\r\na. show all matching results, both strings and symbols, to let user decide\r\nb. or, from the moment the user types a non-quote letter, it switches to symbols. I assume it takes some loading time which explains the delay, but then we could just close the popup temporarily until we actually get the new results with symbols\r\n\r\nI would go with a. personally as I often type names without quotes, but I'm also okay with b. which has the advantage of not showing strings if user really wants a variable, and user can always type a quote to show explicitly they want an action name.\n\n### Steps to reproduce\n\n0. Make sure to add some actions to Project Settings, such as \"move_left\"\r\n1. Create a script (I use `extends CharacterBody2D` to get some members starting in `mo` ready like `motion_mode`. Then Enter code in script:\r\n\r\n```gd\r\nfunc _physics_process(delta: float):\r\n\tvar move_x_intention := Input.get_axis(\r\n```\r\n\r\n2. After typing opening bracket, watch autocomplete popup open (if you missed it, retrigger with Ctrl+space)\r\n3. Start typing the name of an action, e.g. \"mo\"\r\n4. Notice how the action name list is replaced with symbols like \"motion_mode\"\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["I'd say this is appropriate, it can suggest a variable too, and it isn't checking for type compatibility, if you type without quotes you'd *want* without quotes, otherwise it'd be annoying when you actually want a variable or constant\r\n\r\nIf you had:\r\n```gdscript\r\nfunc move_helper(move_left, move_right, move_up, move_down) -> Vector2:\r\n    return Input.get_vector(move_\r\n```\r\nWouldn't it be *worse* if it suggests `\"move_left\"`?"],"labels":["discussion","topic:editor"]},{"title":"Character Controller 3D getting stuck\/slowing down on trim meshes","body":"### Tested versions\n\n- Reproduceable in 4.2.1\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1650 SUPER (NVIDIA; 31.0.15.3770) - AMD Ryzen 5 3500 6-Core Processor (6 Threads)\n\n### Issue description\n\nWhen walking along a lightly protruding mesh (window\/door trim in my case), the Character Body 3D will slow down or stop completely. I think something with collisions is to blame. I noticed the height will effect how bad the bug is. I am using the Capsule collision shape. The building model and its collision was imported from blender as a .blend file.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/164534337\/4fd06239-b4f9-4de9-9cfd-fdf87f4f0dca\r\n\r\n![Screenshot (221)](https:\/\/github.com\/godotengine\/godot\/assets\/164534337\/925fe8be-e3d8-44b1-9d3e-151642e8ab5c)\r\n\n\n### Steps to reproduce\n\nWalk along trim type meshes.\r\nI am using Jolt physics and a character controller for the AssetLib by expressobits.\n\n### Minimal reproduction project (MRP)\n\nhttps:\/\/www.mediafire.com\/file\/qbj951stjyh5o5e\/Project4+-+Copy.zip\/file","comments":["This is the kind of thing https:\/\/github.com\/godotengine\/godot-proposals\/issues\/3603 could resolve.\r\n\r\n>  I am using Jolt physics and a character controller for the AssetLib by expressobits.\r\n\r\nCan you reproduce this issue with GodotPhysics? If not, please report this on https:\/\/github.com\/godot-jolt\/godot-jolt instead.","> This is the kind of thing [godotengine\/godot-proposals#3603](https:\/\/github.com\/godotengine\/godot-proposals\/issues\/3603) could resolve.\r\n> \r\n> > I am using Jolt physics and a character controller for the AssetLib by expressobits.\r\n> \r\n> Can you reproduce this issue with GodotPhysics? If not, please report this on https:\/\/github.com\/godot-jolt\/godot-jolt instead.\r\n\r\nYes! Reproduceable on Default, Jolt, and Godot. It felt like Jolt was the least buggy."],"labels":["topic:physics","topic:3d"]},{"title":"Improve `includes` in `core\/variant`","body":"Similar to this #89568\r\n\r\n**Benchmark**\r\nSCU build time:\r\nBefore:\r\n04:29.433\r\nAfter:\r\n04:26.880\r\n\r\nEdit:\r\nI made benchmarks for variants `.cpp` compille time.\r\nCommand (for linuxbsd):\r\n```\r\ntime g++ -c -std=gnu++17 -fno-exceptions -Wctor-dtor-privacy -Wnon-virtual-dtor -Wplacement-new=1 -pipe -O3 -Wall -Wextra -Wwrite-strings -Wno-unused-parameter -Wshadow -Wno-misleading-indentation -Wno-type-limits -Walloc-zero -Wduplicated-branches -Wduplicated-cond -Wstringop-overflow=4 -Wattribute-alias=2 -Werror -DNDEBUG -DNO_EDITOR_SPLASH -DDISABLE_DEPRECATED -DSOWRAP_ENABLED -DTOUCH_ENABLED -DFONTCONFIG_ENABLED -DALSA_ENABLED -DALSAMIDI_ENABLED -DPULSEAUDIO_ENABLED -D_REENTRANT -DDBUS_ENABLED -DSPEECHD_ENABLED -DXKB_ENABLED -DJOYDEV_ENABLED -DUDEV_ENABLED -DLINUXBSD_ENABLED -DUNIX_ENABLED -D_FILE_OFFSET_BITS=64 -DX11_ENABLED -DLIBDECOR_ENABLED -DWAYLAND_ENABLED -DVULKAN_ENABLED -DRD_ENABLED -DGLES3_ENABLED -DCRASH_HANDLER_ENABLED -D_3D_DISABLED -DADVANCED_GUI_DISABLED -DBROTLI_ENABLED -DTHREADS_ENABLED -DCLIPPER2_ENABLED -DZSTD_STATIC_LINKING_ONLY -Ithirdparty\/zstd -Ithirdparty\/zlib -Ithirdparty\/clipper2\/include -Ithirdparty\/brotli\/include -Iplatform\/linuxbsd -Ithirdparty\/linuxbsd_headers\/wayland -Ithirdparty\/linuxbsd_headers -Iplatform\/linuxbsd -I. <FILENAME.cpp>\r\n```\r\n| File                                   | Before  | After  |\r\n|----------------------------------------|---------------------|--------------------|\r\n| core\/variant\/array.cpp                | real 0m2.020s      | real 0m2.008s     |\r\n|                                        | user 0m1.964s      | user 0m1.944s     |\r\n|                                        | sys 0m0.080s       | sys 0m0.088s      |\r\n| core\/variant\/callable.cpp             | real 0m0.829s      | real 0m0.825s     |\r\n|                                        | user 0m0.778s      | user 0m0.759s     |\r\n|                                        | sys 0m0.056s       | sys 0m0.070s      |\r\n| core\/variant\/dictionary.cpp           | real 0m0.727s      | real 0m0.714s     |\r\n|                                        | user 0m0.687s      | user 0m0.679s     |\r\n|                                        | sys 0m0.037s       | sys 0m0.040s      |\r\n| core\/variant\/variant.cpp              | real 0m2.753s      | real 0m2.694s     |\r\n|                                        | user 0m2.698s      | user 0m2.633s     |\r\n|                                        | sys 0m0.086s       | sys 0m0.092s      |\r\n| core\/variant\/variant_call.cpp         | real 0m23.388s     | real 0m23.292s    |\r\n|                                        | user 0m23.309s     | user 0m23.252s    |\r\n|                                        | sys 0m0.329s       | sys 0m0.290s      |\r\n| core\/variant\/variant_construct.cpp    | real 0m4.642s      | real 0m4.623s     |\r\n|                                        | user 0m4.593s      | user 0m4.555s     |\r\n|                                        | sys 0m0.114s       | sys 0m0.111s      |\r\n| core\/variant\/variant_destruct.cpp     | real 0m0.491s      | real 0m0.403s     |\r\n|                                        | user 0m0.470s      | user 0m0.367s     |\r\n|                                        | sys 0m0.021s       | sys 0m0.039s      |\r\n| core\/variant\/variant_op.cpp           | real 0m8.431s      | real 0m8.426s     |\r\n|                                        | user 0m8.365s      | user 0m8.394s     |\r\n|                                        | sys 0m0.165s       | sys 0m0.128s      |\r\n| core\/variant\/variant_parser.cpp       | real 0m1.978s      | real 0m1.958s     |\r\n|                                        | user 0m1.899s      | user 0m1.891s     |\r\n|                                        | sys 0m0.095s       | sys 0m0.081s      |\r\n| core\/variant\/variant_setget.cpp       | real 0m2.195s      | real 0m2.185s     |\r\n|                                        | user 0m2.154s      | user 0m2.120s     |\r\n|                                        | sys 0m0.072s       | sys 0m0.098s      |\r\n| core\/variant\/variant_utility.cpp      | real 0m4.353s      | real 0m4.272s     |\r\n|                                        | user 0m4.306s      | user 0m4.245s     |\r\n|                                        | sys 0m0.103s       | sys 0m0.085s      |","comments":["The benchmark you're giving isn't significant enough or relevant to this to be an argument either way I'd say, it's just misleading at best (it's 1.1%, and assuming you used the proper way to measure? Without cache and cleaning each time?)","> Without cache and cleaning each time?)\r\n\r\nWithout cache and with `--clean`","An scu build won't really give any good indicators of this as they include a lot of headers and merge source files\r\n\r\nBut these are very core files and the includes here are important and can break things if not present","> An scu build won't really give any good indicators of this as they include a lot of headers and merge source files\r\n\r\nIt is necessary to check both with SCU and without it, because most developers compile with SCU and it may be that there are no changes with SCU, or it may become worse.\r\n","Yes, but you didn't test non-scu and the changes in the scu is (as we can see) negligible ","The individual build times for those files are so short that any measurement is unreliable, what matters is building the engine and exports, though from a glance the same ~1% range changes seem to be the case with these individual files","In general, my inclusions are correct because I used this tool [include-what-you-use](https:\/\/github.com\/include-what-you-use\/include-what-you-use) in current and #89568 PRs. In short, it is a wrapper over the clang compiler that outputs all these includes fixes to the console.\r\nLike this:\r\n```\r\ncore\/variant\/variant.h should add these lines:\r\n#include \"core\/error\/error_macros.h\"         \/\/ for ERR_FAIL_COND_V_MSG\r\n#include \"core\/math\/math_defs.h\"             \/\/ for real_t, Orientation, Side\r\n#include \"core\/os\/memory.h\"                  \/\/ for memdelete, memnew\r\n#include \"core\/string\/string_name.h\"         \/\/ for StringName\r\n#include \"core\/templates\/list.h\"             \/\/ for List\r\n#include \"core\/templates\/safe_refcount.h\"    \/\/ for SafeRefCount\r\n#include \"core\/templates\/vector.h\"           \/\/ for Vector\r\n#include \"core\/typedefs.h\"                   \/\/ for _FORCE_INLINE_, _ALWAYS_...\r\n#include <stdint.h>                          \/\/ for int64_t, uint32_t, uint64_t\r\nenum class JoyAxis;\r\nenum class JoyButton;\r\nenum class Key;\r\nenum class KeyLocation;\r\nenum class MIDIMessage;\r\nenum class MouseButton;\r\n\r\ncore\/variant\/variant.h should remove these lines:\r\n- #include \"core\/input\/input_enums.h\"  \/\/ lines 34-34\r\n- #include \"core\/os\/keyboard.h\"  \/\/ lines 54-54\r\n\r\nThe full include-list for core\/variant\/variant.h:\r\n#include \"core\/error\/error_macros.h\"         \/\/ for ERR_FAIL_COND_V_MSG\r\n#include \"core\/io\/ip_address.h\"              \/\/ for IPAddress\r\n#include \"core\/math\/aabb.h\"                  \/\/ for AABB\r\n#include \"core\/math\/basis.h\"                 \/\/ for Basis\r\n#include \"core\/math\/color.h\"                 \/\/ for Color\r\n#include \"core\/math\/face3.h\"                 \/\/ for Face3\r\n#include \"core\/math\/math_defs.h\"             \/\/ for real_t, Orientation, Side\r\n#include \"core\/math\/plane.h\"                 \/\/ for Plane\r\n#include \"core\/math\/projection.h\"            \/\/ for Projection\r\n#include \"core\/math\/quaternion.h\"            \/\/ for Quaternion\r\n#include \"core\/math\/rect2.h\"                 \/\/ for Rect2\r\n#include \"core\/math\/rect2i.h\"                \/\/ for Rect2i\r\n#include \"core\/math\/transform_2d.h\"          \/\/ for Transform2D\r\n#include \"core\/math\/transform_3d.h\"          \/\/ for Transform3D\r\n#include \"core\/math\/vector2.h\"               \/\/ for Vector2\r\n#include \"core\/math\/vector2i.h\"              \/\/ for Vector2i\r\n#include \"core\/math\/vector3.h\"               \/\/ for Vector3\r\n#include \"core\/math\/vector3i.h\"              \/\/ for Vector3i\r\n#include \"core\/math\/vector4.h\"               \/\/ for Vector4\r\n#include \"core\/math\/vector4i.h\"              \/\/ for Vector4i\r\n#include \"core\/object\/object_id.h\"           \/\/ for ObjectID\r\n#include \"core\/os\/memory.h\"                  \/\/ for memdelete, memnew\r\n#include \"core\/string\/node_path.h\"           \/\/ for NodePath\r\n#include \"core\/string\/string_name.h\"         \/\/ for StringName\r\n#include \"core\/string\/ustring.h\"             \/\/ for String\r\n#include \"core\/templates\/list.h\"             \/\/ for List\r\n#include \"core\/templates\/paged_allocator.h\"  \/\/ for PagedAllocator\r\n#include \"core\/templates\/rid.h\"              \/\/ for RID\r\n#include \"core\/templates\/safe_refcount.h\"    \/\/ for SafeRefCount\r\n#include \"core\/templates\/vector.h\"           \/\/ for Vector\r\n#include \"core\/typedefs.h\"                   \/\/ for _FORCE_INLINE_, _ALWAYS_...\r\n#include \"core\/variant\/array.h\"              \/\/ for Array\r\n#include \"core\/variant\/callable.h\"           \/\/ for Callable, Signal\r\n#include \"core\/variant\/dictionary.h\"         \/\/ for Dictionary\r\n#include <stdint.h>                          \/\/ for int64_t, uint32_t, uint64_t\r\nclass Object;  \/\/ lines 63-63\r\nenum class JoyAxis;\r\nenum class JoyButton;\r\nenum class Key;\r\nenum class KeyLocation;\r\nenum class MIDIMessage;\r\nenum class MouseButton;\r\nstruct MethodInfo;  \/\/ lines 66-66\r\nstruct PropertyInfo;  \/\/ lines 65-65\r\n```\r\n\r\nIt has good logic and understands where to use Forward-declaration and where not to.\r\n\r\nI read on their github that they used it for some Google program and improved its compilation speed by 30%. ","We don't rely on that tool, very aware of it, but it's very hit and miss and we have a generally very carefully managed include hierarchy, so this is not something that's entirely safe, so this needs to be evaluated on those grounds, and reorganizing includes is something that's fragile, and needs to be done when there's real reason to do so\r\n\r\nThe data you've presented here doesn't imply any benefit from this, and has risks in creating more fragile includes elsewhere, these classes are core-core, extremely central to how the engine works, so not something that's easy to restructure or mess with\r\n\r\nNow if it affects compile time in a significant way that's something to consider, but otherwise I don't see any change that justifies that part here\r\n\r\nIWYU also can't detect different build configurations, which is a classic case where things break if includes are not handled carefully ","Yes, I understand this, when I tried to use it, I broke the engine many times. But still, these includes that I remove from `variant` did not break anything and improve compilation speed.","Well you haven't shown that they *do* improve build times? And you can't guarantee that they don't make the code more fragile, it doesn't break anything in the configurations you've build, and currently, but it might make includes for the engine more unpredictable and break other people's PRs, and currently you haven't shown any evidence it helps with anything :)\r\n\r\nI haven't run a full non-scu build of release or anything, but my testing has shown that this doesn't improve anything, there's literally no change in build time between this and `master`:\r\nMaster:\r\n* 00:03:29.209\r\n* 00:03:26.735\r\n\r\nThis:\r\n* 00:03:28.314\r\n* 00:03:28.094\r\n\r\nSo I fail to see any improvement here?","Okay, now I'll test the build without scu, and if the master differs from mine by less than 0.5% growth, I'll close it.","0.5% is a massively small limit, I'd say at least 1% is a normal variance ","So I ran once for each, just to get a starting line (which still shows the variance and limits we can expect) and it shows no significant improvement:\r\nBefore:\r\n* 00:09:08.511\r\n\r\nAfter:\r\n* 00:08:54.581\r\n\r\nEven if this were the averages (which matter relatively little, the variance is more important) you'd still just see a difference in 2.5%, which is insignificant, I can run a few more rounds, but the average isn't likely to be significantly better, and I'd say that the error margins only get bigger when you build while actually using your machine, which most people will do unless they're doing a very heavy build\r\n\r\nIf it was 5% or 10% then it'd be significant for a single run, but I'd suspect the variance is such that the ranges overlap, I could be wrong, but I let this data so far speak for itself, but if you can show it having clear distinct improvements then that's something to consider :)\r\n\r\nEdit: Two more builds, one on each, showing essentially identical results:\r\nBefore:\r\n* 00:08:54.774\r\n\r\nAfter:\r\n* 00:08:54.314\r\n\r\nSo in my testing there's no actual meaningful difference here, it's all within error margins","I also turned off the processor's turbo boost.\r\nBefore:\r\n10;37.949\r\n10:31:876\r\nAfter:\r\n10:19.530\r\n10:24.283\r\n","So that's a variance between the smallest gap of just 1.2%, the average is just 2%, so this is marginal at best\r\n\r\nThe difference between your two after builds is 0.7%, so the difference between two builds is just 1\/3 of the difference between the branches, that speaks against this actually being a real improvement in performance "],"labels":["enhancement","discussion","topic:codestyle"]},{"title":"Add std::initializer_list support to Array","body":"Allows to replace\r\n```C++\r\nArray a;\r\na.append(\"something\");\r\na.append(1);\r\n```\r\nwith\r\n```C++\r\nArray a{ \"something\", 1 };\r\n```\r\nI applied it to all Arrays I found it applicable.","comments":["I'm having trouble adding initializer list to TypedArray. I did this:\r\n```C++\r\n_FORCE_INLINE_ TypedArray(std::initializer_list<T> p_init) :\r\n\t\tArray(p_init) {\r\n\tset_typed(Variant::OBJECT, T::get_class_static(), Variant());\r\n}\r\n```\r\nbut it doesn't work. I get `Can't convert from \"initializer_list\" to \"TypedArray<String>\"` error (C2440).","It can't convert it to `std::typed_array<Variant>`","> I'm having trouble adding initializer list to TypedArray. I did this:\r\n\r\n`TypedArray` is still using `Vector<Variant>` inside, probably will require using a full loop like `Vector` do to convert each element, something like:\r\n\r\n```c++\r\n_FORCE_INLINE_ TypedArray(std::initializer_list<T> p_init) {\r\n\t_p = memnew(ArrayPrivate);\r\n\t_p->refcount.init();\r\n\r\n\tset_typed(Variant::OBJECT, T::get_class_static(), Variant());\r\n\r\n\tError err = _p->array.resize(p_init.size());\r\n\tERR_FAIL_COND(err);\r\n\r\n\tCowData<T>::Size i = 0;\r\n\tfor (const T &element : p_init) {\r\n\t\t_p->array.set(i++, element);\r\n\t}\r\n}\r\n```","```cpp\r\n_p = memnew(ArrayPrivate);\r\n_p->refcount.init();\r\n```\r\nThis part would be unnecessary as it's done in the super constructor","Shouldn't it be possible to initialize the Vector using Array's constructor? I tried `initializer_list<Variant>` instead of `initializer_list<T>` and I get the same error. Note that the problem is with the signature\/call, it won't work even if the constructor body is empty.\r\n\r\nWhat worked is wrapping an Array inside TypedArray:\r\n```C++\r\nTypedArray<String> cs(Array({ \".\", \",\", \"(\", \"=\", \"$\", \"@\", \"\\\"\", \"\\'\" }));\r\n```\r\nbut that's rather ugly.","There were only a few usages of TypedArray that could use this, so did not add a constructor in the end. The above case can be further simplified to\r\n```C++\r\nTypedArray<String> cs(Array{ \".\", \",\", \"(\", \"=\", \"$\", \"@\", \"\\\"\", \"\\'\" });\r\n```\r\nwhich does not look that bad.","- Overlaps with https:\/\/github.com\/godotengine\/godot\/pull\/86015\r\n- Partially addresses https:\/\/github.com\/godotengine\/godot-proposals\/issues\/1357\r\n\r\nIn my PR, I also added it for TypedArray and Variant, but I didn't change uses anywhere in the codebase.\r\nAdding it to Variant allows for nested initializer arrays.\r\n\r\nI initialized the Array differently, assigning the array to a Vector. I don't know which way is better.\r\nFor the TypedArray, I added it only to the macro part since it works if the type is known.\r\n\r\nI also added tests, since #50493 also did that, though I don't know how necessary they are.\r\nThe test_code_edit.h and test_text_edit.h are cleaned up in #86978. The text edit ones are changed a lot, so we could leave those untouched for now. The code edit ones are mostly the same, but they could be nested.\r\nWe should be able to replace the `build_array()` method with initializer lists in `test_array.h`, `test_dictionary.h`, `test_variant.h`, and  `test_navigation_server_3d.h`.\r\n","> I also added tests, since https:\/\/github.com\/godotengine\/godot\/pull\/50493 also did that, though I don't know how necessary they are.\r\n\r\nWell, I added initializer list usage in existing tests, so if they still pass it means it works, I guess.\r\n\r\n> Overlaps with https:\/\/github.com\/godotengine\/godot\/pull\/86015\r\n\r\nThe biggest part of this PR is updating the codebase to use the new functionality, so your PR could be merged first."],"labels":["enhancement","topic:core","topic:codestyle"]},{"title":"Adding new points to Path2D and undoing it breaks scene history","body":"### Tested versions\n\nRegression from #86542\n\n### System information\n\nWindows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 (NVIDIA; 31.0.15.4633) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\nWhen you add a new Path2D and add points to it and then undo it, the scene history breaks and you can't do anything until you reload the scene.\n\n### Steps to reproduce\n\n1. Create new scene\r\n2. Add Path2D\r\n3. Ctrl + Click somewhere to add points\r\n4. Undo\r\n5. The scene is unusable\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor","regression","topic:2d"]},{"title":"Fix import and saving related crashes","body":"* Don't add empty mesh to result when importing obj files\r\n* Check for null resources in `ResourceSaver`\r\n\r\nThis adds the check from `core_bind` to `ResourceSaver` directly, could remove the one in `ResourceSaver.save` in `core_bind` as it's now redundant, but just added it for now, it helps catch broken cases when doing things from c++\r\n\r\nThe obj side avoids doing any of the remaining code, makes things a bit clearer, and matches the code here:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/editor\/import\/3d\/resource_importer_obj.cpp#L441-L445\r\n\r\nFor this specific case we might want to look at adding support for lines in obj files as they support it, or a more clear error message or warning when using unsupported features, but that's outside the scope of this\r\n\r\n---\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89776\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:import","crash","cherrypick:4.2"]},{"title":"Internal edge collision and penetration of concave CollisionPolygon2D","body":"### Tested versions\n\nv3.5.2.stable.mono.official [170ba337a]\n\n### System information\n\nWIndows 10\n\n### Issue description\n\nPhysical bodies that should be able to slide across a CollisionPolygon2D concave suface, instead regularly catch or penetrate it at its corners.\r\nThe engine decomposes the concave polygon into convex polys, and it appears to essentially function as a set of separate shapes. Its surface is no longer continuous, instead the added internal edges seem to introduce unexpected collisions to a sliding body and in some cases can aggravate penetration.\r\nNo continuous collision or other settings found to be effective against this issue.\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/7935207\/70472521-9233-4817-bd65-ca1907cb7ed1\r\n\r\nA polygon is expected to function as a singular shape with continuous surface. Decomposition the engine applies to it is expected to introduce no new collision surfaces or holes. Collision processing is expected to avoid penetration of shapes (at least in Solids + CCD) so long as the constraints acting on bodies allow that.\n\n### Steps to reproduce\n\nThe attached project contains a scene with a concave static body, and a wedge shaped rigid body driven across its surface.\r\n- enable Visible Collision Shapes\r\n- run TestConcaveSliding.tscn, observe the rigid body occasionally penetrate into static body between the convex subshapes it is decomposed into, observe collisions indicated at the internal edges of the static body\n\n### Minimal reproduction project (MRP)\n\n[TestConcaveSliding.zip](https:\/\/github.com\/godotengine\/godot\/files\/14720657\/TestConcaveSliding.zip)\r\nTestConcaveSliding.tscn demonstrates sliding across an automatically decomposed concave shape and the penetration it results in.\r\nTestConcaveSliding2.tscn demonstrates sliding across a concave shape with the same surface outline, but decomposed into convex subshapes in a different way that manages to prevent penetration.","comments":[],"labels":["discussion","topic:physics","needs testing","topic:2d"]},{"title":"JSON.stringify (and JSON.print in 3.x) produces invalid JSON for INF\/NaN floats","body":"### Tested versions\n\nGodot Engine v4.2.2.rc1.official.c7fb0645a\r\n\r\nAlso seen in an otherwise-unspecified 3.5 build by someone I know\n\n### System information\n\nWindows 10, amd rx 480 gpu\n\n### Issue description\n\nThe `JSON.stringify` function (`JSON.print` in 3.x) produces illegal JSON if the given data contains INF or NaN floats.\r\n\r\nJSON numbers must be finite real numbers, not arbitrary floating point numbers. This means that the JSON stringifier can produce text that the JSON parser cannot parse.\r\n\r\n![firefox_2024-03-22_06-12-16](https:\/\/github.com\/godotengine\/godot\/assets\/585488\/54433d17-958b-4811-950f-4e4c62753b4b)\r\n\r\nThe JSON stringifier should either produce an error, or use best-approximation values (e.g. `DBL_MAX` or `+1e9999` or similar for INF, `0.0` or `null` for NaN, or strings saying \"INF\/-INF\/NaN\") when fed numbers that can't be stored as finite real numbers.\n\n### Steps to reproduce\n\nRun the following code in the _ready() function of a new scene in the editor and hit the \"run current scene\" button:\r\n\r\n```gdscript\r\n    prints(\"json: \", JSON.stringify([1.0\/0.0]))\r\n    prints(\"json: \", JSON.stringify([sqrt(-1.0)]))\r\n```\r\n\r\nObserve this output in the debug console output:\r\n\r\n```\r\njson:  [inf]\r\njson:  [nan]\r\n```\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["It's partially clarified that the standard isn't entirely followed in the docs, but more details would be needed\r\n\r\nThis change would be complicated and would arguably be a compatibility breakage if we changed to conform closer to the standard \r\n\r\nWhat we *could* do is add an optional argument for additional conformance","At the moment, affected outputs don't parse, so working projects won't get any real compatibility breakage. For example, the following code:\r\n\r\n```\r\n    var temp := JSON.stringify([sqrt(-1.0)])\r\n    var out = JSON.parse_string(temp)\r\n```\r\n\r\nprints a runtime error and `out` contains null.\r\n\r\nI think adding INF and NaN checks to the top of the `Variant::FLOAT` case in `JSON::_stringify` should paper over the issue without affecting any working projects. Code that only stringifies Vector2s etc. won't be affected because those types are JSONified as strings rather than numbers.","Indeed there's no handling for those, so that would be possible\r\n\r\nThe discussion would be how to solve it, what direction to go","Searching online shows this is a common complaint with JSON. The solutions seem to be:\r\n1. Just document the issue\r\n2. Convert any non-finite value to null\r\n3. Find numeric alternatives (-INF= -1e9999, INF = 1e9999, NAN = ??? no good option)\r\n4. Add new JSON keywords to encode NAN, INF, and -INF\r\n\r\nThe NAN, INF, and -INF values contain useful information, and my preference would be to allow round-tripping them through JSON. If we went down this path we would just have to decide what keyword we would use for this encoding.\r\n\r\nAccording to https:\/\/evanhahn.com\/pythons-nonstandard-json-encoding\/ Python has the following non-standard extension which is supported by a few other parsers. I would propose we adopt this standard so we're at least compatible with something:\r\n```python\r\nimport json\r\nimport math\r\n\r\njson.dumps([math.inf, -math.inf, math.nan])\r\n# => \"[Infinity, -Infinity, NaN]\"\r\n```\r\n\r\nWe may also decide to leave the choice to the user and make the non-finite handling an optional parameter to the JSON stringify method:\r\n- Allow NaN values to be encoded as `Infinity`, `-Infinity`, `NaN`\r\n- Suppress outputting of non-finite values\r\n- Convert non-finite values to null\r\n","I think always using the numeric alternative for INF (1e9999 etc) and having an option for how to convert NaN (error? null? literal NaN keyword like Python?) would be a good compromise."],"labels":["bug","discussion","topic:core"]},{"title":"Importing a line only obj crash Godot Editor","body":"### Tested versions\r\n\r\n- Reproductible in 4.3-dev5\r\n\r\n### System information\r\n\r\nWindows 10 - Godot 4.3-dev5 Vulkan (Forward+)\r\n\r\n### Issue description\r\n\r\nWhen importing a simple obj with only lines inside, Godot crashes.\r\n\r\n### Steps to reproduce\r\n\r\nJust import the provided file in a Godot project\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nCreate a new project and copy the provided obj file into it.\r\n[profil.zip](https:\/\/github.com\/godotengine\/godot\/files\/14720714\/profil.zip)\r\n","comments":["Seems like the importer doesn't handle lines which probably causes the data to be invalid, will look at a fix","Found the issue and writing a fix, will open a PR soon","Nice. Thanks for the quick fix. I hope this report helped to make Godot more robust. As I understand the comit, loading the resource will result in a null mesh right ? I will not be able to get the vertex positions and lines (obvously for the lines as the Mesh doesn't seems to have lines) ?\r\n\r\nNote it not necessarily a problem, it's just to know :)","As per my comment there it'd be a future change to add support for lines, this just fixes the crash, the mesh won't be imported at all"],"labels":["bug","topic:import","crash","topic:3d"]},{"title":"Incorrect enum value of KeyModifierMask.MODIFIER_MASK","body":"### Tested versions\n\n- Reproducible in: master branch\n\n### System information\n\nAll\n\n### Issue description\n\nFile core\/os\/keyboard.h, line 252 contains incorrect value assignment:\r\n`MODIFIER_MASK = (0x7F << 22), \/\/\/< Apply this mask to isolate modifiers.`\r\n\r\nCorrect value assignment is:\r\n`MODIFIER_MASK = (0x7E << 22)`\n\n### Steps to reproduce\n\n### Explanation\r\n22nd bit is part of Key enum in form of Key.SPECIAL value and not KeyModifierMask enum, as no value in KeyModifierMask enum contains 22nd bit set.\r\n\r\nIn other words `KeyModifierMask.CODE_MASK & KeyModifierMask.MODIFIER_MASK` must evaluate to zero.\n\n### Minimal reproduction project (MRP)\n\nNone","comments":[],"labels":["discussion","topic:input"]},{"title":"Massive performance drop when modifying a tile from a disabled tilemap","body":"### Tested versions\n\nUsing version 4.2.1 stable mono [b09f793f5]\n\n### System information\n\nWindows 11 - Godot v.4.2.1 stable mono\n\n### Issue description\n\nIf you modify (specifically in my case delete) a tile from a disabled layer in a tilemap, you will see a massive drop in performance due to GPU computing.\r\n\r\nI was doing this specifically to hide a layer while in debug mode. I guess I'll try to shift the layer behind other layers for now, but this solution will not work for people who might not be using multiple layers and just wished to make a tilemap temporarily invisible while still needing to modify it.\n\n### Steps to reproduce\n\n1) Create a tilemap, fill it with tiles 1000 x 1000\r\n2) Disable the layer\r\n3) Start removing tiles on the layer\r\n\r\nIn the Minimal Reproduction Project, you don't have to do anything, the code is already set up to automatically create the tilemap and starts a repeating task that deletes a tile every 2 seconds. Just boot the demo and check the profiler.\n\n### Minimal reproduction project (MRP)\n\n[Godot_MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14719245\/Godot_MRP.zip)\r\n","comments":["Can you try this in [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/) or [4.3.dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)?","> Can you try this in [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/) or [4.3.dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)?\r\n\r\nStill there in 4.2.2.rc2 mono\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/13719743\/75acd18b-7eda-4f9d-997f-3d6e282755ee)\r\n","It may be important to note that I specifically was testing this in compatibility mode"],"labels":["bug","topic:2d","performance"]},{"title":"BBCode's Hint tooltip not showing while following viewport","body":"### Tested versions\r\n\r\n- Reproducible in: 4.2.stable, 4.2.rc2, and 4.3.dev5\r\n\r\n### System information\r\n\r\nGodot v4.2.stable - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3050 Laptop GPU (NVIDIA; 31.0.15.2802) - AMD Ryzen 7 4800H with Radeon Graphics (16 Threads)\r\n\r\n### Issue description\r\n\r\nThe tooltip for BBcode's Hint tag does not appear if the scene also have Camera2D while the RichTextLabel that contain the hinted-text is outside of CanvasLayer or inside CanvasLayer that have followed viewport enable.\r\n\r\nWe expected it still be able to display the tooltip, as meta signals for url tag still work even when they are in the same situation. Our guess is \"maybe the issue isn't with the hitbox but the position of the tooltip instead\".\r\n\r\n### Steps to reproduce\r\n\r\n**Outside of CanvasLayer case**\r\n1. Create an empty 2D scene\r\n2. Add RichTextLabel as a child of the scene\r\n3. Enable RichTextLabel's BBcode\r\n4. Put `[hint=tooltip text displayed on hover]text[\/hint]` into the RichTextLabel's text box\r\n5. Add Camera2D into the scene\r\n6. Run Current scene\r\n7. Try to hover the text, the tooltip will never show up\r\n\r\n**Inside CanvasLayer case**\r\n1. Create an empty 2D scene\r\n2. Add CanvasLayer as a child of the scene\r\n3. Enable CanvasLayer's Follow viewport\r\n4. Add RichTextLabel as a child of the CanvasLayer\r\n5. Enable RichTextLabel's BBcode\r\n6. Put `[hint=tooltip text displayed on hover]text[\/hint]` into the RichTextLabel's text box\r\n7. Add Camera2D into the scene\r\n8. Run Current scene\r\n9. Try to hover the text, the tooltip will never show up\r\n\r\nIf you were to disable CanvasLayer's Follow viewport and run Current scene again, the tooltip will show up and vice versa.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[HintToolTipCameraBug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14718616\/HintToolTipCameraBug.zip)\r\n","comments":["Can you try this in [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/) or [4.3.dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)? 4.2 is an old and no longer supported version","Problem still persist in 4.2.rc2 and 4.3.dev5\r\nAlso sorry, this is my first time using github bug report. I accidentally press the close button instead of comment."],"labels":["bug","needs testing","topic:gui"]},{"title":"Introduce `Window` option to contain multiple `Viewports` with a focused `Control`","body":"Introduce `Window` option to contain multiple `Viewports` with a focused `Control`\r\n\r\nThis PR introduces an option `Window.multi_viewport_focus` to allow all contained `Viewports` to keep their focused `Control` independently from other Viewports in the same `Window`.\r\n\r\nAlternative to #62421\r\nSupersedes alternative #79480 and doesn't change existing behavior\r\nImplements parts of https:\/\/github.com\/godotengine\/godot-proposals\/issues\/385\r\nImplements parts of https:\/\/github.com\/godotengine\/godot-proposals\/issues\/4295\r\n\r\nMRP for testing: [MultiFocusPerWindow.zip](https:\/\/github.com\/godotengine\/godot\/files\/14733415\/MultiFocusPerWindow.zip)\r\n\r\nUpdated 2024-03-23: I have discarded my first approach, because of the added complexity caused by multiple edge cases.","comments":[],"labels":["enhancement","discussion","topic:input","topic:gui"]},{"title":"Tilemap light occluders affect all open scenes in the editor","body":"### Tested versions\n\n- Reproducible in v4.3.dev.mono.custom_build [fe01776f0] and v4.2.2.rc.mono.custom_build [15c5e10ea]\r\n- Not reproducible in v4.2.1.stable.mono.official [b09f793f5]\n\n### System information\n\nGodot v4.2.2.rc.mono (15c5e10ea) - Ubuntu 22.04.4 LTS 22.04 - Wayland - Vulkan (Forward+) - integrated AMD Unknown (RADV RENOIR) () - AMD Ryzen 7 5800H with Radeon Graphics (16 Threads)\n\n### Issue description\n\nWhen adding a tile from a tileset with a light occluder to a scene, it affects all other open scenes in the editor. That is, the light is blocked on all scenes. It seems to be only the case with tiles and not other occluders.\r\n\r\n![Scene1](https:\/\/github.com\/godotengine\/godot\/assets\/25228699\/ea3de384-8877-4c9f-80e0-ab6cacf580ad)\r\n![Scene2](https:\/\/github.com\/godotengine\/godot\/assets\/25228699\/d22d6aca-78d8-4073-99a3-8169c2f57dcd)\n\n### Steps to reproduce\n\nIn the MRP open Scene1.tscn and Scene2.tscn. The light-blocking tiles from Scene1 also block the light in Scene2 in the editor.\n\n### Minimal reproduction project (MRP)\n\n[mrp.zip](https:\/\/github.com\/godotengine\/godot\/files\/14716151\/mrp.zip)\r\n","comments":[],"labels":["bug","topic:rendering","topic:2d"]},{"title":"Dead Code in AnimationMixer","body":"### Tested versions\r\n\r\n- Latest codes in master branch\r\n\r\n### System information\r\n\r\nAll the platforms\r\n\r\n### Issue description\r\n\r\nFind the dead code snipet in AnimationMixer\r\nLine1643, 1644 are dead codes due to `seeked` is always true.\r\n```\r\nplayer2->set_assigned_animation(anim_name);\r\nplayer2->seek(at_anim_pos, true);\r\n```\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/scene\/animation\/animation_mixer.cpp#L1611-L1646\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\nN\/A\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["enhancement","topic:codestyle","topic:animation"]},{"title":"Godot 4.2.1 stuck on .blend import in CI","body":"### Tested versions\n\n- Reproducible in: v4.2.1.stable.official [b09f793f5]\r\n- I'll try to test earlier versions when I get the time\n\n### System information\n\ngitlab-runner 16.9.1 running on https:\/\/github.com\/abarichello\/godot-ci docker image\n\n### Issue description\n\nI have a Godot 4 project setup to use `.blend` files directly as described in [the doc](https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/assets_pipeline\/importing_3d_scenes\/available_formats.html#importing-blend-files-directly-within-godot).\r\n\r\nI am using the Gitlab CI with this Docker image as base https:\/\/github.com\/abarichello\/godot-ci. As this image does not have blender pre-installed, I created a first job to install it, save it in an artifact and add the path to the godot settings.\r\n\r\nWhen I then run godot in headless mode to import the project files with `godot --headless --verbose --editor --quit`, the job hangs forever and gets killed due to timeout after an hour.\r\n\r\nDoing the exact same steps as the CI locally works. From what I see in the logs, it hangs right before starting the `.blend` imports.\r\n\r\nNot configuring blender in the ci and running the import works, but then the exported project is complete nonsense without the models.\n\n### Steps to reproduce\n\n- Create a project using `.blend` files as described [here](https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/assets_pipeline\/importing_3d_scenes\/available_formats.html#importing-blend-files-directly-within-godo)\r\n- Upload your project to Gitlab\r\n- add a .gitlab-ci.yml file with the following content:\r\n\r\n```yaml\r\nimage: barichello\/godot-ci:4.2.1\r\n\r\nstages:\r\n  - install-blender\r\n  - import-assets\r\n  - export\r\n  - deploy\r\n\r\nvariables:\r\n  EXPORT_NAME: test\r\n\r\n# install blender and setup path\r\ninstall-blender:\r\n  stage: install-blender\r\n  script:\r\n    - wget https:\/\/mirrors.sahilister.in\/blender\/release\/Blender4.0\/blender-4.0.2-linux-x64.tar.xz\r\n    - apt update && apt install xz-utils\r\n    - tar xf blender-4.0.2-linux-x64.tar.xz\r\n    - mv blender-4.0.2-linux-x64 .blender\r\n  artifacts:\r\n    paths:\r\n      - .blender\r\n    expire_in: 6 hours\r\n\r\n# Open the editor to import assets\r\nimport-assets:\r\n  stage: import-assets\r\n  script:\r\n    - echo 'filesystem\/import\/blender\/blender3_path = \"'$CI_PROJECT_DIR'\/.blender\"' >> ~\/.config\/godot\/editor_settings-4.tres\r\n    - godot --headless --verbose --editor --quit\r\n  artifacts:\r\n    paths:\r\n      - .godot\/imported\/\r\n    expire_in: 6 hours\r\n  needs:\r\n    - job: install-blender\r\n\r\nlinux:\r\n  stage: export\r\n  script:\r\n    - godot --headless --verbose --export-release \"Linux\/X11\" .\/build\/linux\/$EXPORT_NAME.x86_64\r\n  artifacts:\r\n    name: $EXPORT_NAME-$CI_JOB_NAME\r\n    paths:\r\n      - build\/linux\r\n  needs:\r\n    - job: import-assets\r\n```\r\n- Push your code to trigger the ci\r\n- Open the `import-assets` job\r\n- See how the logs hang\r\n```\r\n\u001b[0KRunning with gitlab-runner 16.9.1 (782c6ecb)\u001b[0;m\r\n\u001b[0K  on green-2.saas-linux-small-amd64.runners-manager.gitlab.com\/default ns46NMmJ, system ID: s_85d7af184313\u001b[0;m\r\n\u001b[0K  feature flags: FF_USE_IMPROVED_URL_MASKING:true\u001b[0;m\r\nsection_start:1711064803:prepare_executor\r\n\u001b[0K\u001b[0K\u001b[36;1mPreparing the \"docker+machine\" executor\u001b[0;m\u001b[0;m\r\n\u001b[0KUsing Docker executor with image barichello\/godot-ci:4.2.1 ...\u001b[0;m\r\n\u001b[0KPulling docker image barichello\/godot-ci:4.2.1 ...\u001b[0;m\r\n\u001b[0KUsing docker image sha256:5f290531ff62fc3721c84a3f1003181ae699ab1a5fd2de8ff632ed27b6b1be30 for barichello\/godot-ci:4.2.1 with digest barichello\/godot-ci@sha256:902a93d0f47f7d32b15bd28e2274bb0a29d902c69fa43b4d7d42ca261922f25b ...\u001b[0;m\r\nsection_end:1711064865:prepare_executor\r\n\u001b[0Ksection_start:1711064865:prepare_script\r\n\u001b[0K\u001b[0K\u001b[36;1mPreparing environment\u001b[0;m\u001b[0;m\r\nRunning on runner-ns46nmmj-project-55483651-concurrent-0 via runner-ns46nmmj-s-l-s-amd64-1711064716-cbeec0a5...\r\nsection_end:1711064871:prepare_script\r\n\u001b[0Ksection_start:1711064871:get_sources\r\n\u001b[0K\u001b[0K\u001b[36;1mGetting source from Git repository\u001b[0;m\u001b[0;m\r\n\u001b[32;1mFetching changes with git depth set to 20...\u001b[0;m\r\nInitialized empty Git repository in \/builds\/vergnet\/godot-test\/.git\/\r\n\u001b[32;1mCreated fresh repository.\u001b[0;m\r\n\u001b[32;1mChecking out 7a31aa87 as detached HEAD (ref is ci)...\u001b[0;m\r\n\r\n\u001b[32;1mSkipping Git submodules setup\u001b[0;m\r\n\u001b[32;1m$ git remote set-url origin \"${CI_REPOSITORY_URL}\"\u001b[0;m\r\nsection_end:1711064873:get_sources\r\n\u001b[0Ksection_start:1711064873:download_artifacts\r\n\u001b[0K\u001b[0K\u001b[36;1mDownloading artifacts\u001b[0;m\u001b[0;m\r\n\u001b[32;1mDownloading artifacts for install-blender (6452469776)...\u001b[0;m\r\nDownloading artifacts from coordinator... ok      \u001b[0;m  host\u001b[0;m=storage.googleapis.com id\u001b[0;m=6452469776 responseStatus\u001b[0;m=200 OK token\u001b[0;m=glcbt-65\r\nsection_end:1711064894:download_artifacts\r\n\u001b[0Ksection_start:1711064894:step_script\r\n\u001b[0K\u001b[0K\u001b[36;1mExecuting \"step_script\" stage of the job script\u001b[0;m\u001b[0;m\r\n\u001b[0KUsing docker image sha256:5f290531ff62fc3721c84a3f1003181ae699ab1a5fd2de8ff632ed27b6b1be30 for barichello\/godot-ci:4.2.1 with digest barichello\/godot-ci@sha256:902a93d0f47f7d32b15bd28e2274bb0a29d902c69fa43b4d7d42ca261922f25b ...\u001b[0;m\r\n\u001b[32;1m$ echo 'filesystem\/import\/blender\/blender3_path = \"'$CI_PROJECT_DIR'\/.blender\"' >> ~\/.config\/godot\/editor_settings-4.tres\u001b[0;m\r\n\u001b[32;1m$ godot --headless --verbose --editor --quit-after 10\u001b[0;m\r\nGodot Engine v4.2.1.stable.official.b09f793f5 - https:\/\/godotengine.org\r\nTextServer: Added interface \"Dummy\"\r\nTextServer: Added interface \"ICU \/ HarfBuzz \/ Graphite (Built-in)\"\r\nUsing \"default\" pen tablet driver...\r\nJoypadLinux: udev enabled and loaded successfully.\r\n \r\nTextServer: Primary interface set to: \"ICU \/ HarfBuzz \/ Graphite (Built-in)\".\r\nCORE API HASH: 915626997\r\nEDITOR API HASH: 1313472085\r\nWARNING: Custom cursor shape not supported by this display server.\r\n     at: cursor_set_custom_image (servers\/display_server.cpp:505)\r\nEditorSettings: Load OK!\r\nRegenerating editor help cache\r\nClass 'AbstractPolygon2DEditor' is not exposed, skipping.\r\nClass 'AbstractPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'ActionMapEditor' is not exposed, skipping.\r\nClass 'AnchorPresetPicker' is not exposed, skipping.\r\nClass 'AnimationBezierTrackEdit' is not exposed, skipping.\r\nClass 'AnimationLibraryEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace1DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace2DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendTreeEditor' is not exposed, skipping.\r\nClass 'AnimationNodeStateMachineEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTimelineEdit' is not exposed, skipping.\r\nClass 'AnimationTrackEditDefaultPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditor' is not exposed, skipping.\r\nClass 'AnimationTrackKeyEditEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeEditor' is not exposed, skipping.\r\nClass 'AnimationTreeEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeNodeEditorPlugin' is not exposed, skipping.\r\nClass 'AssetLibraryEditorPlugin' is not exposed, skipping.\r\nClass 'AtlasMergingDialog' is not exposed, skipping.\r\nClass 'AtlasTileProxyObject' is not exposed, skipping.\r\nClass 'AudioBusesEditorPlugin' is not exposed, skipping.\r\nClass 'AudioStreamEditorPlugin' is not exposed, skipping.\r\nClass 'AudioStreamImportSettings' is not exposed, skipping.\r\nClass 'AudioStreamPreviewGenerator' is not exposed, skipping.\r\nClass 'AudioStreamRandomizerEditorPlugin' is not exposed, skipping.\r\nClass 'BackgroundProgress' is not exposed, skipping.\r\nClass 'BitMapEditorPlugin' is not exposed, skipping.\r\nClass 'BoneMapEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles2DEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles3DEditor' is not exposed, skipping.\r\nClass 'CPUParticles3DEditorPlugin' is not exposed, skipping.\r\nClass 'CSGShape3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Camera3DEditorPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditor' is not exposed, skipping.\r\nClass 'CanvasItemEditorPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditorViewport' is not exposed, skipping.\r\nClass 'CanvasItemMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'Cast2DEditor' is not exposed, skipping.\r\nClass 'Cast2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditor' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionShape2DEditor' is not exposed, skipping.\r\nClass 'CollisionShape2DEditorPlugin' is not exposed, skipping.\r\nClass 'ConnectDialog' is not exposed, skipping.\r\nClass 'ConnectDialogBinds' is not exposed, skipping.\r\nClass 'ConnectionsDock' is not exposed, skipping.\r\nClass 'ControlEditorPlugin' is not exposed, skipping.\r\nClass 'ControlEditorPopupButton' is not exposed, skipping.\r\nClass 'ControlEditorPresetPicker' is not exposed, skipping.\r\nClass 'ControlEditorToolbar' is not exposed, skipping.\r\nClass 'CreateDialog' is not exposed, skipping.\r\nClass 'CurveEditorPlugin' is not exposed, skipping.\r\nClass 'CurvePreviewGenerator' is not exposed, skipping.\r\nClass 'DebugAdapterParser' is not exposed, skipping.\r\nClass 'DebugAdapterServer' is not exposed, skipping.\r\nClass 'DebuggerEditorPlugin' is not exposed, skipping.\r\nClass 'DefaultThemeEditorPreview' is not exposed, skipping.\r\nClass 'DependencyEditor' is not exposed, skipping.\r\nClass 'DependencyEditorOwners' is not exposed, skipping.\r\nClass 'DependencyErrorDialog' is not exposed, skipping.\r\nClass 'DependencyRemoveDialog' is not exposed, skipping.\r\nClass 'DirectoryCreateDialog' is not exposed, skipping.\r\nClass 'DynamicFontImportSettings' is not exposed, skipping.\r\nClass 'DynamicFontImportSettingsData' is not exposed, skipping.\r\nClass 'EditorAbout' is not exposed, skipping.\r\nClass 'EditorAssetLibrary' is not exposed, skipping.\r\nClass 'EditorAudioBuses' is not exposed, skipping.\r\nClass 'EditorAudioStreamPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorAutoloadSettings' is not exposed, skipping.\r\nClass 'EditorBitmapPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorBuildProfileManager' is not exposed, skipping.\r\nClass 'EditorDebuggerInspector' is not exposed, skipping.\r\nClass 'EditorDebuggerNode' is not exposed, skipping.\r\nClass 'EditorDebuggerRemoteObject' is not exposed, skipping.\r\nClass 'EditorDebuggerTree' is not exposed, skipping.\r\nClass 'EditorDirDialog' is not exposed, skipping.\r\nClass 'EditorExport' is not exposed, skipping.\r\nClass 'EditorExportGDScript' is not exposed, skipping.\r\nClass 'EditorFeatureProfileManager' is not exposed, skipping.\r\nClass 'EditorFileServer' is not exposed, skipping.\r\nClass 'EditorFileSystemImportFormatSupportQueryBlend' is not exposed, skipping.\r\nClass 'EditorFileSystemImportFormatSupportQueryFBX' is not exposed, skipping.\r\nClass 'EditorFontPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorGradientPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorHelpBit' is not exposed, skipping.\r\nClass 'EditorHelpSearch' is not exposed, skipping.\r\nClass 'EditorImagePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorImportBlendRunner' is not exposed, skipping.\r\nClass 'EditorInspectorCategory' is not exposed, skipping.\r\nClass 'EditorInspectorDefaultPlugin' is not exposed, skipping.\r\nClass 'EditorInspectorPlugin3DTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginAnimationTrackKeyEdit' is not exposed, skipping.\r\nClass 'EditorInspectorPluginAudioStream' is not exposed, skipping.\r\nClass 'EditorInspectorPluginBitMap' is not exposed, skipping.\r\nClass 'EditorInspectorPluginBoneMap' is not exposed, skipping.\r\nClass 'EditorInspectorPluginControl' is not exposed, skipping.\r\nClass 'EditorInspectorPluginCurve' is not exposed, skipping.\r\nClass 'EditorInspectorPluginFontPreview' is not exposed, skipping.\r\nClass 'EditorInspectorPluginFontVariation' is not exposed, skipping.\r\nClass 'EditorInspectorPluginGradient' is not exposed, skipping.\r\nClass 'EditorInspectorPluginGradientTexture2D' is not exposed, skipping.\r\nClass 'EditorInspectorPluginInputEvent' is not exposed, skipping.\r\nClass 'EditorInspectorPluginLayeredTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginMaterial' is not exposed, skipping.\r\nClass 'EditorInspectorPluginMesh' is not exposed, skipping.\r\nClass 'EditorInspectorPluginPackedScene' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSkeleton' is not exposed, skipping.\r\nClass 'EditorInspectorPluginStyleBox' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSubViewportPreview' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSystemFont' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTextureRegion' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTileData' is not exposed, skipping.\r\nClass 'EditorInspectorRootMotionPlugin' is not exposed, skipping.\r\nClass 'EditorInspectorVisualShaderModePlugin' is not exposed, skipping.\r\nClass 'EditorJSONSyntaxHighlighter' is not exposed, skipping.\r\nClass 'EditorLayoutsDialog' is not exposed, skipping.\r\nClass 'EditorLocaleDialog' is not exposed, skipping.\r\nClass 'EditorLog' is not exposed, skipping.\r\nClass 'EditorMaterialPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorMeshPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorNativeShaderSourceVisualizer' is not exposed, skipping.\r\nClass 'EditorNode' is not exposed, skipping.\r\nClass 'EditorOBJImporter' is not exposed, skipping.\r\nClass 'EditorObjectSelector' is not exposed, skipping.\r\nClass 'EditorPackedScenePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorPerformanceProfiler' is not exposed, skipping.\r\nClass 'EditorPluginCSG' is not exposed, skipping.\r\nClass 'EditorPluginSettings' is not exposed, skipping.\r\nClass 'EditorProfiler' is not exposed, skipping.\r\nClass 'EditorPropertyCheck' is not exposed, skipping.\r\nClass 'EditorPropertyInteger' is not exposed, skipping.\r\nClass 'EditorPropertyNameProcessor' is not exposed, skipping.\r\nClass 'EditorPropertyPath' is not exposed, skipping.\r\nClass 'EditorPropertyResource' is not exposed, skipping.\r\nClass 'EditorPropertyText' is not exposed, skipping.\r\nClass 'EditorPropertyVector2i' is not exposed, skipping.\r\nClass 'EditorPropertyVectorN' is not exposed, skipping.\r\nClass 'EditorQuickOpen' is not exposed, skipping.\r\nClass 'EditorRunBar' is not exposed, skipping.\r\nClass 'EditorRunNative' is not exposed, skipping.\r\nClass 'EditorSceneFormatImporterCollada' is not exposed, skipping.\r\nClass 'EditorSceneFormatImporterESCN' is not exposed, skipping.\r\nClass 'EditorSceneTabs' is not exposed, skipping.\r\nClass 'EditorScriptPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorSettingsDialog' is not exposed, skipping.\r\nClass 'EditorTexturePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorTextureTooltipPlugin' is not exposed, skipping.\r\nClass 'EditorTheme' is not exposed, skipping.\r\nClass 'EditorTitleBar' is not exposed, skipping.\r\nClass 'EditorToaster' is not exposed, skipping.\r\nClass 'EditorValidationPanel' is not exposed, skipping.\r\nClass 'EditorVisualProfiler' is not exposed, skipping.\r\nClass 'EditorZoomWidget' is not exposed, skipping.\r\nClass 'EventListenerLineEdit' is not exposed, skipping.\r\nClass 'ExportTemplateManager' is not exposed, skipping.\r\nClass 'FBXImporterManager' is not exposed, skipping.\r\nClass 'FileSystemList' is not exposed, skipping.\r\nClass 'FindInFiles' is not exposed, skipping.\r\nClass 'FindInFilesDialog' is not exposed, skipping.\r\nClass 'FindInFilesPanel' is not exposed, skipping.\r\nClass 'FindReplaceBar' is not exposed, skipping.\r\nClass 'FogMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'FontEditorPlugin' is not exposed, skipping.\r\nClass 'GDScriptEditorTranslationParserPlugin' is not exposed, skipping.\r\nClass 'GDScriptLanguageServer' is not exposed, skipping.\r\nClass 'GDScriptNativeClass' is not exposed, skipping.\r\nClass 'GDScriptSyntaxHighlighter' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionPhysics' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionTextureKTX' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionTextureWebP' is not exposed, skipping.\r\nClass 'GPUParticles2DEditorPlugin' is not exposed, skipping.\r\nClass 'GPUParticles3DEditor' is not exposed, skipping.\r\nClass 'GPUParticles3DEditorBase' is not exposed, skipping.\r\nClass 'GPUParticles3DEditorPlugin' is not exposed, skipping.\r\nClass 'GPUParticlesCollisionSDF3DEditorPlugin' is not exposed, skipping.\r\nClass 'Gizmo3DHelper' is not exposed, skipping.\r\nClass 'GodotNavigationServer2D' is not exposed, skipping.\r\nClass 'GodotPhysicsServer2D' is not exposed, skipping.\r\nClass 'GodotPhysicsServer3D' is not exposed, skipping.\r\nClass 'GradientEditorPlugin' is not exposed, skipping.\r\nClass 'GradientTexture2DEditorPlugin' is not exposed, skipping.\r\nClass 'GraphEditFilter' is not exposed, skipping.\r\nClass 'GraphEditMinimap' is not exposed, skipping.\r\nClass 'GridMapEditor' is not exposed, skipping.\r\nClass 'GridMapEditorPlugin' is not exposed, skipping.\r\nClass 'GroupDialog' is not exposed, skipping.\r\nClass 'GroupsEditor' is not exposed, skipping.\r\nClass 'HistoryDock' is not exposed, skipping.\r\nClass 'IPUnix' is not exposed, skipping.\r\nClass 'ImportDefaultsEditor' is not exposed, skipping.\r\nClass 'ImportDefaultsEditorSettings' is not exposed, skipping.\r\nClass 'ImportDock' is not exposed, skipping.\r\nClass 'ImportDockParameters' is not exposed, skipping.\r\nClass 'InputEventConfigurationDialog' is not exposed, skipping.\r\nClass 'InputEventEditorPlugin' is not exposed, skipping.\r\nClass 'InspectorDock' is not exposed, skipping.\r\nClass 'LightOccluder2DEditor' is not exposed, skipping.\r\nClass 'LightOccluder2DEditorPlugin' is not exposed, skipping.\r\nClass 'LightmapGIEditorPlugin' is not exposed, skipping.\r\nClass 'Line2DEditor' is not exposed, skipping.\r\nClass 'Line2DEditorPlugin' is not exposed, skipping.\r\nClass 'LocalizationEditor' is not exposed, skipping.\r\nClass 'MaterialEditorPlugin' is not exposed, skipping.\r\nClass 'MeshEditorPlugin' is not exposed, skipping.\r\nClass 'MeshInstance3DEditor' is not exposed, skipping.\r\nClass 'MeshInstance3DEditorPlugin' is not exposed, skipping.\r\nClass 'MeshLibraryEditor' is not exposed, skipping.\r\nClass 'MeshLibraryEditorPlugin' is not exposed, skipping.\r\nClass 'MovieWriterMJPEG' is not exposed, skipping.\r\nClass 'MovieWriterPNGWAV' is not exposed, skipping.\r\nClass 'MultiMeshEditor' is not exposed, skipping.\r\nClass 'MultiMeshEditorPlugin' is not exposed, skipping.\r\nClass 'MultiplayerEditorDebugger' is not exposed, skipping.\r\nClass 'MultiplayerEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationLink2DEditor' is not exposed, skipping.\r\nClass 'NavigationLink2DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationMeshEditor' is not exposed, skipping.\r\nClass 'NavigationMeshEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationObstacle2DEditor' is not exposed, skipping.\r\nClass 'NavigationObstacle2DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationObstacle3DEditor' is not exposed, skipping.\r\nClass 'NavigationObstacle3DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationPolygonEditor' is not exposed, skipping.\r\nClass 'NavigationPolygonEditorPlugin' is not exposed, skipping.\r\nClass 'Node3DEditor' is not exposed, skipping.\r\nClass 'Node3DEditorPlugin' is not exposed, skipping.\r\nClass 'Node3DEditorViewport' is not exposed, skipping.\r\nClass 'Node3DEditorViewportContainer' is not exposed, skipping.\r\nClass 'NodeDock' is not exposed, skipping.\r\nClass 'NoiseEditorInspectorPlugin' is not exposed, skipping.\r\nClass 'NoiseEditorPlugin' is not exposed, skipping.\r\nClass 'ORMMaterial3DConversionPlugin' is not exposed, skipping.\r\nClass 'OccluderInstance3DEditorPlugin' is not exposed, skipping.\r\nClass 'OrphanResourcesDialog' is not exposed, skipping.\r\nClass 'PackedSceneEditorPlugin' is not exposed, skipping.\r\nClass 'PackedSceneEditorTranslationParserPlugin' is not exposed, skipping.\r\nClass 'PanoramaSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'ParticleProcessMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'Path2DEditor' is not exposed, skipping.\r\nClass 'Path2DEditorPlugin' is not exposed, skipping.\r\nClass 'Path3DEditorPlugin' is not exposed, skipping.\r\nClass 'Path3DGizmoPlugin' is not exposed, skipping.\r\nClass 'PhysicalBone3DEditorPlugin' is not exposed, skipping.\r\nClass 'PhysicalSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'PluginConfigDialog' is not exposed, skipping.\r\nClass 'Polygon2DEditor' is not exposed, skipping.\r\nClass 'Polygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'Polygon3DEditor' is not exposed, skipping.\r\nClass 'Polygon3DEditorPlugin' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonRenamer' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonRestFixer' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonTrackOrganizer' is not exposed, skipping.\r\nClass 'ProceduralSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'ProgressDialog' is not exposed, skipping.\r\nClass 'ProjectExportDialog' is not exposed, skipping.\r\nClass 'ProjectExportTextureFormatError' is not exposed, skipping.\r\nClass 'ProjectSettingsEditor' is not exposed, skipping.\r\nClass 'PropertySelector' is not exposed, skipping.\r\nClass 'RenameDialog' is not exposed, skipping.\r\nClass 'ReparentDialog' is not exposed, skipping.\r\nClass 'ReplicationEditor' is not exposed, skipping.\r\nClass 'ResourceFormatImporterSaver' is not exposed, skipping.\r\nClass 'ResourcePreloaderEditor' is not exposed, skipping.\r\nClass 'ResourcePreloaderEditorPlugin' is not exposed, skipping.\r\nClass 'SceneCacheInterface' is not exposed, skipping.\r\nClass 'SceneCreateDialog' is not exposed, skipping.\r\nClass 'SceneExporterGLTFPlugin' is not exposed, skipping.\r\nClass 'SceneImportSettings' is not exposed, skipping.\r\nClass 'SceneImportSettingsData' is not exposed, skipping.\r\nClass 'SceneRPCInterface' is not exposed, skipping.\r\nClass 'SceneReplicationInterface' is not exposed, skipping.\r\nClass 'SceneTileProxyObject' is not exposed, skipping.\r\nClass 'SceneTreeDialog' is not exposed, skipping.\r\nClass 'SceneTreeDock' is not exposed, skipping.\r\nClass 'SceneTreeEditor' is not exposed, skipping.\r\nClass 'ScriptEditorDebugger' is not exposed, skipping.\r\nClass 'ScriptEditorPlugin' is not exposed, skipping.\r\nClass 'SectionedInspector' is not exposed, skipping.\r\nClass 'SectionedInspectorFilter' is not exposed, skipping.\r\nClass 'ShaderCreateDialog' is not exposed, skipping.\r\nClass 'ShaderEditorPlugin' is not exposed, skipping.\r\nClass 'ShaderFileEditor' is not exposed, skipping.\r\nClass 'ShaderFileEditorPlugin' is not exposed, skipping.\r\nClass 'ShaderGlobalsEditor' is not exposed, skipping.\r\nClass 'ShaderGlobalsEditorInterface' is not exposed, skipping.\r\nClass 'SizeFlagPresetPicker' is not exposed, skipping.\r\nClass 'Skeleton2DEditor' is not exposed, skipping.\r\nClass 'Skeleton2DEditorPlugin' is not exposed, skipping.\r\nClass 'Skeleton3DEditorPlugin' is not exposed, skipping.\r\nClass 'Skeleton3DGizmoPlugin' is not exposed, skipping.\r\nClass 'SkeletonIK3DEditorPlugin' is not exposed, skipping.\r\nClass 'SnapDialog' is not exposed, skipping.\r\nClass 'SplitContainerDragger' is not exposed, skipping.\r\nClass 'Sprite2DEditor' is not exposed, skipping.\r\nClass 'Sprite2DEditorPlugin' is not exposed, skipping.\r\nClass 'SpriteFramesEditor' is not exposed, skipping.\r\nClass 'SpriteFramesEditorPlugin' is not exposed, skipping.\r\nClass 'StandardMaterial3DConversionPlugin' is not exposed, skipping.\r\nClass 'StyleBoxEditorPlugin' is not exposed, skipping.\r\nClass 'SubViewportPreviewEditorPlugin' is not exposed, skipping.\r\nClass 'SurfaceUpgradeDialog' is not exposed, skipping.\r\nClass 'SurfaceUpgradeTool' is not exposed, skipping.\r\nClass 'Texture3DEditorPlugin' is not exposed, skipping.\r\nClass 'TextureEditorPlugin' is not exposed, skipping.\r\nClass 'TextureLayeredEditorPlugin' is not exposed, skipping.\r\nClass 'TextureRegionEditor' is not exposed, skipping.\r\nClass 'TextureRegionEditorPlugin' is not exposed, skipping.\r\nClass 'ThemeContext' is not exposed, skipping.\r\nClass 'ThemeEditor' is not exposed, skipping.\r\nClass 'ThemeEditorPlugin' is not exposed, skipping.\r\nClass 'ThemeEditorPreview' is not exposed, skipping.\r\nClass 'ThemeItemEditorDialog' is not exposed, skipping.\r\nClass 'ThemeItemImportTree' is not exposed, skipping.\r\nClass 'ThemeTypeDialog' is not exposed, skipping.\r\nClass 'ThemeTypeEditor' is not exposed, skipping.\r\nClass 'TileAtlasView' is not exposed, skipping.\r\nClass 'TileMapEditor' is not exposed, skipping.\r\nClass 'TileMapEditorPlugin' is not exposed, skipping.\r\nClass 'TileMapEditorTerrainsPlugin' is not exposed, skipping.\r\nClass 'TileMapEditorTilesPlugin' is not exposed, skipping.\r\nClass 'TileProxiesManagerDialog' is not exposed, skipping.\r\nClass 'TileSetAtlasSourceEditor' is not exposed, skipping.\r\nClass 'TileSetAtlasSourceProxyObject' is not exposed, skipping.\r\nClass 'TileSetEditor' is not exposed, skipping.\r\nClass 'TileSetEditorPlugin' is not exposed, skipping.\r\nClass 'TileSetScenesCollectionProxyObject' is not exposed, skipping.\r\nClass 'TileSetScenesCollectionSourceEditor' is not exposed, skipping.\r\nClass 'TileSourceInspectorPlugin' is not exposed, skipping.\r\nClass 'TilesEditorUtils' is not exposed, skipping.\r\nClass 'VersionControlEditorPlugin' is not exposed, skipping.\r\nClass 'ViewPanner' is not exposed, skipping.\r\nClass 'ViewportNavigationControl' is not exposed, skipping.\r\nClass 'ViewportRotationControl' is not exposed, skipping.\r\nClass 'VisualShaderConversionPlugin' is not exposed, skipping.\r\nClass 'VoxelGIEditorPlugin' is not exposed, skipping.\r\nClass 'WindowWrapper' is not exposed, skipping.\r\nLoaded system CA certificates\r\nEditorSettings: Save OK!\r\n\r\n```\r\n- Execute the same steps to install blender and configure its path in godot locally\r\n- Run `godot --headless --verbose --editor --quit`\r\n- See how it goes past the line `EditorSettings: Save OK!` and finishes the import\n\n### Minimal reproduction project (MRP)\n\nI'll try to create a MRP when I get the time.","comments":["There is currently a headless cicd export bug we\u2019re looking into.","Thanks, do you have a link to a related issue\/PR so I can follow the progress?"],"labels":["bug","topic:import"]},{"title":"Fix variables revertable not registered from nested group.","body":"Fixes #64986","comments":[],"labels":["bug","topic:editor","usability"]},{"title":"[macOS Sandbox] Use custom URI schema to pass command line arguments when using OS:create_instance.","body":"Allows sandboxed Godot editor (or similar apps) to pass arguments (not directly supported in the sandbox) when creating instances with `OS:create_instance` via custom URI schema.","comments":[],"labels":["enhancement","platform:macos","topic:porting"]},{"title":"Fix focus when reordering array","body":"Fixes #89762\r\n","comments":[],"labels":["bug","topic:editor"]},{"title":"After reordering array element through Inspector focus is wrongly placed","body":"### Tested versions\r\n\r\nAnything after #80706 (4.3)\r\n\r\n### System information\r\n\r\nmacOS 13.3.0 - Vulkan (Forward+) - integrated Apple M1 Pro - Apple M1 Pro (8 Threads)\r\n\r\n### Issue description\r\n\r\nWhen you reorder arrays focus will follow the one you are reordering but once you drop it the focus will go back to the line where it started from.\r\n#80706 reworked how array PropertyEditor update and with that introduced the possibility to keep focus after reordering (previously everything was nuked every update so focus was removed) but the focus is tied to the slot and hence is not good when reordering. \r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/66184050\/0f967372-4b58-44d0-9e72-94a5d31f1a07\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Add an Array with some elements\r\n2. Reorder an element\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["bug","topic:editor"]},{"title":"Cannot Update my AndroidManifest File on Export","body":"### Tested versions\n\nGodot 4.2.1\n\n### System information\n\nWindows 11\n\n### Issue description\n\nGooglePlay ask me to update my Android Manifest file adding this line: \r\ncom.google.android.gms.permission.AD_ID but cannot getting updated. I have made the change in editor and also directly on Manifest, but when I reupload to GoogleStore it saids it doesn't have the permission. Help?\r\n![Captura de pantalla 2024-03-21 105149](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/1319e38a-949d-4857-b7ce-10e3aa345a15)\r\n![Captura de pantalla 2024-03-21 110858](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/9f792750-171d-459e-9846-8a075e03c3c3)\r\n![Captura de pantalla 2024-03-21 111127](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/fa9157c4-8e6f-430a-b043-16b239becdc5)\n\n### Steps to reproduce\n\nAdd Android to project, export AAB File and try to upload to Google Store.\n\n### Minimal reproduction project (MRP)\n\n![Captura de pantalla 2024-03-21 105149](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/1319e38a-949d-4857-b7ce-10e3aa345a15)\r\n![Captura de pantalla 2024-03-21 110858](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/9f792750-171d-459e-9846-8a075e03c3c3)\r\n![Captura de pantalla 2024-03-21 111127](https:\/\/github.com\/godotengine\/godot\/assets\/103970174\/fa9157c4-8e6f-430a-b043-16b239becdc5)","comments":[],"labels":["platform:android","needs testing","topic:export"]},{"title":"Fix some build errors with `disable_3d=yes`","body":"Some new issues with 3D disabled popped up after recent changes, it now once again works correctly (and tests run properly)\r\n\r\nThese are all test related and won't be caught by the CI, as it doesn't build minimal debug builds, and 3D can't be disabled in the editor\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:buildsystem","regression"]},{"title":"canvas_item light() significantly darker in editor than in debugging","body":"### Tested versions\n\nTested in 4.2 stable only, I'd test in other versions but it's a bit of a pain rn .-.\n\n### System information\n\nArch linux kernel 6.8.1-arch1-1, wayland, hyprland, I5-1240P w\/ integrated graphics (Iris XE)\n\n### Issue description\n\nTitle pretty much says it, but essentially when run in the editor my canvas_item shaders are rendering significantly darker in the editor than in a compiled test. I'm not entirely sure why this could be happening, as it happens even when there is only one light (assuming the issue is caused by the lights being averaged, perhaps?)-- all lights in the scene have a blend mode of add, with shadows completely disabled. The CanvasModulate is set to rgb(0,0,0), so that shouldn't be a factor. Tonemapping has no impact either, so at the moment I have no clue what the issue could be.\r\n\r\nHere's background.gdscript, which is running for the background\r\n```glsl\r\nshader_type canvas_item;\r\n\r\nuniform bool apply_distance_fade;\r\n\r\nuniform bool shadows;\r\nuniform bool soft_shadows;\r\nuniform float light_radius;\r\nuniform uint shadow_march_count;\r\nuniform float shadow_march_min_step;\r\nuniform float shadow_march_step_scale;\r\n\r\nuniform float ambient_amount : hint_range(0,1);\r\nuniform bool ambient_occlusion;\r\nuniform uint ao_step_count;\r\nuniform float ao_step_size;\r\nuniform float ao_influence : hint_range(0.0, 1.0);\r\n\r\nvarying vec2 screen_pix_size;\r\nvarying mat4 inv_canvas_matrix;\r\nvarying mat4 canvas_matrix;\r\n\r\n\/\/ Beckmann distribution\r\nfloat kSpec(vec3 N, vec3 H, float m) {\r\n\tfloat alpha = acos(dot(N,H));\r\n\t\/\/ alpha = max(abs(alpha) - angleTolerance, 0.0) * sign(alpha);\r\n\tfloat mSquared = m * m;\r\n\treturn (exp(-pow(tan(alpha) \/ mSquared, 2.0)) \/ (PI * mSquared * pow(cos(alpha), 4.0)));\r\n}\r\n\r\nvoid vertex() {\r\n\t\/\/ whyyyy can't I have the matrices in fragment() or light()\r\n\tinv_canvas_matrix = inverse(CANVAS_MATRIX);\r\n\tcanvas_matrix = CANVAS_MATRIX;\r\n}\r\n\r\nvoid fragment() {\r\n\t\/\/ whyyyyy can't I have SCREEN_PIXEL_SIZE in vertex() or light()\r\n\tscreen_pix_size = SCREEN_PIXEL_SIZE;\r\n}\r\n\r\nvec2 UVtoWorld(vec2 uv) {\r\n\treturn (vec4(uv \/ screen_pix_size, 0, 0) * inv_canvas_matrix).xy;\r\n}\r\n\r\nvec2 worldToUV(vec2 coord) {\r\n\treturn (vec4(coord, 0, 0) * inv_canvas_matrix).xy * screen_pix_size;\r\n}\r\n\r\nvoid light() {\r\n\tvec2 marchPos = UVtoWorld(SCREEN_UV);\r\n\tvec2 lightPos = UVtoWorld(LIGHT_POSITION.xy * screen_pix_size);\r\n\t\/\/ We need screen positions for some weirdness later\r\n\tvec2 lightPosScreen = LIGHT_POSITION.xy;\r\n\tvec2 toLight = normalize(lightPos - marchPos);\r\n\t\/\/ We also need the directions relative to the screen for weirdness mentioned above\r\n\tvec2 toLightScreen = normalize(lightPosScreen - SCREEN_UV \/ screen_pix_size);\r\n\tfloat distToLight = distance(marchPos, lightPos);\r\n\t\r\n\tfloat d, t = 0.0;\r\n\t\/\/ Obscurity - basically, how obscured our ray is\r\n\tfloat obs = 1.0;\r\n\tvec2 screenPos = SCREEN_UV \/ screen_pix_size;\r\n\t\r\n\t\/\/ We can figure out how much the distances should be scaled by figuring out the difference between a screenspace distance of 1px and a worldspace distance\r\n\t\/\/ of those points\r\n\tvec2 worldspaceScaleCalcA = UVtoWorld(vec2(0));\r\n\tvec2 worldspaceScaleCalcB = UVtoWorld(vec2(1,0) * screen_pix_size);\r\n\tfloat worldspaceDistanceScale = 1.0 \/ distance(worldspaceScaleCalcA, worldspaceScaleCalcB);\r\n\t\r\n\t\/\/ Ideally I'd make this its own function but texture_sdf has forced my hand\r\n\tif(shadows) {\r\n\t\tobs = 0.0;\r\n\t\tfor(uint i = uint(0); i < shadow_march_count; i++) {\r\n\t\t\t\/\/ texture_sdf returns screenspace distance, but we want world space distance\r\n\t\t\td = texture_sdf(screen_uv_to_sdf(screenPos * screen_pix_size)) * worldspaceDistanceScale;\r\n\t\t\t\/\/ If we aren't using soft shadows, there's no reason to march through objects\r\n\t\t\tif(!soft_shadows && d <= 0.0001) {\r\n\t\t\t\tobs = 1.0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\/\/ I don't entirely understand how this works, but the gist is that we can get a very good looking soft shadow effect by storing how close the ray\r\n\t\t\t\/\/ got to an obstacle\r\n\t\t\tif(soft_shadows) obs = max(0.5 - d * distToLight \/ (2.0 * light_radius * t), obs);\r\n\t\t\t\/\/ If we're in shadow no need to continue\r\n\t\t\tif(obs > 0.99) break;\r\n\t\t\t\/\/ Prevent getting stuck on the border of objects\r\n\t\t\t\/\/ 0.1 is a number I pulled out of my ass but it seems to work well enough\r\n\t\t\t\/\/ light_radius*t\/distToLight is the relative size of the light or something idk I'm dumb\r\n\t\t\td = max(d * shadow_march_step_scale, shadow_march_min_step  * light_radius*t\/distToLight);\r\n\t\t\t\/\/ Apply distance\r\n\t\t\tt += d;\r\n\t\t\t\/\/ If we pass the light we know we're done\r\n\t\t\tif(t >= distToLight) break;\r\n\t\t\tmarchPos += d * toLight;\r\n\t\t\tscreenPos += (d \/ worldspaceDistanceScale) * toLightScreen;\r\n\t\t}\r\n\t\t\/\/ Make sure we don't have any weird values lol\r\n\t\tobs = 1.0 - clamp(obs, 0.0, 1.0);\r\n\t}\r\n\t\r\n\tfloat ao = 1.0;\r\n\tif(ambient_occlusion) {\r\n\t\tmarchPos = SCREEN_UV \/ screen_pix_size;\r\n\t\tvec2 Epsilon = vec2(2.0, 0.0);\r\n\t\t\/\/ These normals are horrible but they seem to work well enough\r\n\t\tvec2 norm = texture_sdf_normal(sdf_to_screen_uv(SCREEN_UV));\r\n\t\tfloat res = 0.0;\r\n\t\t\/\/ Step size\r\n\t\tvec2 rp;\r\n\t\t\/\/ TBH I like vaguely understand how this works but not enough to explain it\r\n\t\tfor(uint i = uint(1); i<ao_step_count; i++) {\r\n\t\t\trp = marchPos + ao_step_size*float(i)*norm * screen_pix_size;\r\n\t\t\tres+=(1.0\/pow(2.0,float(i)))*(ao_step_size*float(i)-(texture_sdf(screen_uv_to_sdf(rp * screen_pix_size))));\r\n\t\t}\r\n\t\tif(res >= 0.0) {\r\n\t\t\tao = 1.0 - ao_influence * clamp(1.0 - ao_step_size \/ res, 0.0, 1.0);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\/\/ Finally get the world distance (including height) for the final magnitude\r\n\tvec2 worldPos = (vec4(SCREEN_UV \/ screen_pix_size, 0, 0) * inv_canvas_matrix).xy;\r\n\tvec3 worldPosLight = (vec4(LIGHT_POSITION, 0) * inv_canvas_matrix).xyz;\r\n\tfloat worldDist = distance(vec3(worldPos, 0), worldPosLight);\r\n\t\r\n\t\/\/ PBR Lighting\r\n\tfloat roughness = SPECULAR_SHININESS.r;\r\n\tfloat specular = 1.0 - SPECULAR_SHININESS.g;\r\n\tfloat metallic = SPECULAR_SHININESS.b;\r\n\t\r\n\tfloat distance_fade = 1.0 \/ pow(worldDist \/ 200.0, 2.0);\r\n\t\r\n\tLIGHT = COLOR * ambient_amount * dot(NORMAL, vec3(0,0,1)) * ao;\r\n\t\r\n\r\n\tvec4 specularColor = mix(vec4(1), COLOR, metallic);\r\n\tvec4 specularAddition = specularColor * LIGHT_COLOR * LIGHT_ENERGY * max(kSpec(NORMAL, (LIGHT_DIRECTION + vec3(0,0,1)) * 0.5, specular), 0.0) * obs;\r\n\tvec4 diffuseAddition = roughness * LIGHT_COLOR * LIGHT_ENERGY * COLOR * max(dot(NORMAL, LIGHT_DIRECTION), 0.0) * obs;\r\n\tif(apply_distance_fade) {\r\n\t\tspecularAddition *= distance_fade;\r\n\t\tdiffuseAddition *= distance_fade;\r\n\t}\r\n\tLIGHT += specularAddition + diffuseAddition;\r\n}\r\n```\r\nAnd here's foreground.gdshader, running for the objects\r\n```glsl\r\nshader_type canvas_item;\r\n\r\nuniform float ambient_amount : hint_range(0,1);\r\n\r\nuniform float light_radius;\r\n\r\nvarying mat4 inv_canvas_matrix;\r\nvarying vec2 screen_pix_size;\r\n\r\n\/\/ Beckmann distribution\r\nfloat kSpec(vec3 N, vec3 H, float m) {\r\n\tfloat alpha = acos(dot(N,H));\r\n\t\/\/ alpha = max(abs(alpha) - angleTolerance, 0.0) * sign(alpha);\r\n\tfloat mSquared = m * m;\r\n\treturn (exp(-pow(tan(alpha) \/ mSquared, 2.0)) \/ (PI * mSquared * pow(cos(alpha), 4.0)));\r\n}\r\n\r\nvoid vertex() {\r\n\t\/\/ whyyyy can't I have the matrices in fragment() or light()\r\n\tinv_canvas_matrix = inverse(CANVAS_MATRIX);\r\n\tUV = UV + vec2(0.0);\r\n}\r\n\r\nvoid fragment() {\r\n\t\/\/ whyyyy can't I have SCREEN_PIXEL_SIZE in vertex() or light()\r\n\tscreen_pix_size = SCREEN_PIXEL_SIZE;\r\n} \r\n\r\nvoid light() {\r\n\t\/\/ This one is way simpler\r\n\t\/\/ World distance including height\r\n\tvec2 worldPos = (vec4(SCREEN_UV \/ screen_pix_size, 0, 0) * inv_canvas_matrix).xy;\r\n\tvec3 worldPosLight = (vec4(LIGHT_POSITION, 0) * inv_canvas_matrix).xyz;\r\n\tfloat worldDist = distance(vec3(worldPos, 0), worldPosLight);\r\n\t\/\/ PBR Lighting\r\n\tfloat roughness = SPECULAR_SHININESS.r;\r\n\tfloat specular = 1.0 - SPECULAR_SHININESS.g;\r\n\tfloat metallic = SPECULAR_SHININESS.b;\r\n\t\r\n\t\/\/ float visibleWidth = light_radius \/ worldDist;\r\n\t\/\/ float visibleTheta = 0.0;\r\n\t\r\n\tLIGHT += COLOR * ambient_amount * dot(NORMAL, vec3(0,0,1));\r\n\t\r\n\tvec4 specularColor = mix(vec4(1), COLOR, metallic);\r\n\tLIGHT += specularColor * LIGHT_COLOR * LIGHT_ENERGY * max(kSpec(NORMAL, (LIGHT_DIRECTION + vec3(0,0,1)) * 0.5, specular), 0.0) \/ pow(worldDist \/ 200.0, 2.0);\r\n\tLIGHT += roughness * LIGHT_COLOR * LIGHT_ENERGY * COLOR * max(dot(NORMAL, LIGHT_DIRECTION), 0.0) \/ pow(worldDist \/ 100.0, 2.0);\r\n}\r\n```\r\n![2024-03-21T12:12:02,051538540-04:00](https:\/\/github.com\/godotengine\/godot\/assets\/77183348\/95dfe94d-25d8-4896-adc5-c65b4a4088c9)\r\n![2024-03-21T12:12:05,163330877-04:00](https:\/\/github.com\/godotengine\/godot\/assets\/77183348\/131cf7d3-6b81-41f4-8eb6-6ac59893e64d)\r\n\n\n### Steps to reproduce\n\nApply the above code as a ShaderMaterial to the various objects. Settings I'm using are this for the background:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/77183348\/95c97e45-f5dc-4385-99f5-9889fbcdefb1)\r\nAnd then this for the foreground:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/77183348\/a4cff525-da31-4914-8729-d325d3067190)\n\n### Minimal reproduction project (MRP)\n\n[project.zip](https:\/\/github.com\/godotengine\/godot\/files\/14704288\/project.zip)\r\n","comments":[],"labels":["bug","topic:editor","topic:2d"]},{"title":"TileSet bottom button stays visible when TileMap is deselected","body":"### Tested versions\n\n4.3 dev5\r\nNot sure when it started, might be relatively recent.\n\n### System information\n\nWindows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 (NVIDIA; 31.0.15.4633) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\nSee title.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/f4730fd3-fc70-4dcc-9645-09f5542affbf\r\n\r\nThe TileSet tab seems to stay permanently, even if you close the scene and the TileSet was built-in.\n\n### Steps to reproduce\n\n1. Add TileMap\r\n2. Add TileSet\r\n3. Try making the TileSet bottom button disappear\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor","topic:2d"]},{"title":"Pushing events to Viewports no longer triggers `InputEventMouseMotion` in `_gui_input`","body":"### Tested versions\n\n- Reproducible in Godot 4.3-dev5\r\n- Works in Godot 4.3-dev4\n\n### System information\n\nWindows 11 Pro - Godot 4.3-dev5\n\n### Issue description\n\nIf you push an `InputEventMouseMotion` to a viewport using `push_input`, it will not be received by `_gui_input` methods in its controls. This was introduced by 99ba2519eaf79271c86b8a932ce185666fb79a37, specifically the change to `mouse_in_viewport` default of `false` when it was previously `true`.\r\n\r\n`mouse_in_viewport` having a default of false does make sense, but it also doesn't make sense to me that pushing events inside a viewport do not work. Perhaps receiving events should update that flag?\r\n\r\nThere is a workaround you can call from your game code. If you trigger `NOTIFICATION_VP_MOUSE_ENTER` that will set the flag and your events will be passed as they were before.\n\n### Steps to reproduce\n\nI have included a zip file that reproduces the issue. Simply move the mouse and look at the console to see events are not being received. If you uncomment `sub_viewport.notification(NOTIFICATION_VP_MOUSE_ENTER)` in `main.gd` then you will see the events. Additionally, using a version of godot prior to 99ba2519eaf79271c86b8a932ce185666fb79a37 such as 4.3-dev4 will work.\n\n### Minimal reproduction project (MRP)\n\nHere is the project: \r\n[test-pushinput.zip](https:\/\/github.com\/godotengine\/godot\/files\/14704171\/test-pushinput.zip)\r\n","comments":[],"labels":["bug","topic:input","regression"]},{"title":"C#: Fix errors when creating `Variant` from null array","body":"Returns default `Variant` (nil) if the `Span<*>` is null. \r\n\r\nThis also adds the disposal of temporary array.\r\n\r\n- Fix #89586\r\n- Fix #82362\r\n\r\n- Supersedes #82388","comments":[],"labels":["bug","topic:dotnet"]},{"title":"Mobile VR Interface doesn't work in 4.X","body":"### Tested versions\r\n\r\nTested in Godot 4.2 and 4.3 dev5\r\n\r\n\r\n\r\n### System information\r\n\r\nSamsung Galaxy S23 Ultra, Godot in compatibily mode \r\n\r\n### Issue description\r\n\r\nThe interface that manages VR mobile games called 'Native mobile' is totally broken right now and it doesn't rotate the camera properly. It also has a weird flickering.\r\n\r\n### Steps to reproduce\r\n\r\n- Create a scene and enable the XR shaders.\r\n- Add an XROrigin as a child of a Node3D and XRCamera inside of it.\r\n- Add a script with the following code:\r\n\r\n```\r\nextends Node3D\r\n\r\nvar xr_interface: XRInterface\r\n\r\nfunc _ready():\r\n\tvar interface = XRServer.find_interface(\"Native mobile\")\r\n\tif interface and interface.initialize():\r\n\t\tget_viewport().use_xr = true\r\n\r\n```\r\n\r\n- Add some floor or an environment to check the rotation\r\n- Export to Android and check the rotation\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[NativeMobileBug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14702924\/NativeMobileBug.zip)\r\n","comments":[],"labels":["bug","needs testing","topic:xr"]},{"title":"Fix SpriteFrames editor visibility problems","body":"Fixes #80756\r\nI checked other editors and all handle it properly (except the permanent ones, which don't auto-close).","comments":[],"labels":["bug","topic:editor","topic:animation","topic:2d"]},{"title":"Remove redundant code in `Node3D`","body":"I don't know this code well enough to know if the entire block isn't redundant, I'm not sure what the need for assigning `local_transform` is here if we're just taking the existing transform, as we'll update the dirty transform later anyway, but keeping the change small for the moment\r\n\r\nFollowup to:\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/84643\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","topic:3d"]},{"title":"Fix false positive errors in gdshaderinc files","body":"Fixes #89479 \r\n\r\nThese language features are wrongly detected as not supported when used in gdshaderinc files:\r\n- instance uniforms\r\n- hint_normal_roughness_texture\r\n- hint_depth_texture\r\n\r\nThese types of error should only occur when the shader type is not spatial and not a gdshaderinc file.\r\n\r\nHere is the project I used to test this PR: [test_project.zip](https:\/\/github.com\/godotengine\/godot\/files\/14697053\/test_project.zip)\r\nThere is one scene per feature in their own folder + 1 canvas item shader for non regression tests.\r\n\r\nAs expected:\r\n- When a spatial shader use one of these language feature, no error is raised in the spatial shader nor the gdshaderinc file it includes.\r\n- An error is raised in the canvas item shader with or without including a gdshaderinc file.","comments":[],"labels":["bug","topic:shaders"]},{"title":"ERROR: FATAL when adding a new SkeletonProfileHumanoid","body":"### Tested versions\n\nv4.2.1.stable.official [b09f793f5]\n\n### System information\n\nWindows 11 Pro - 23H2 - AtlasOS - Vulkan API 1.3.277\n\n### Issue description\n\nGodot crash when I want to add a new SkeletonProfileHumanoid :\r\nERROR: FATAL: Index p_index = 2 is out of bounds (size() = 2).\r\n   at: get (.\/core\/templates\/cowdata.h:158)\r\n[](url)\n\n### Steps to reproduce\n\n1. Download the gltf model here : https:\/\/sketchfab.com\/3d-models\/curious-skeleton-757d9863b3504a75a439b2b99a530454#download\r\n2. Add it to the project folder\r\n3. In Godot, select the \"scene.gltf\" and click on the \"Advecement...\" button in the import tab\r\n4. Select the Skeleton3D and add a new BoneMap\r\n5. Add a new SkeletonProfileHumanoid to the BoneMap\r\n![Godot_v4 2 1-stable_win64_ySG4QHo5WH](https:\/\/github.com\/godotengine\/godot\/assets\/37516760\/31ad4f61-b73f-44de-a0ba-8fc642d6e5b6)\r\n\n\n### Minimal reproduction project (MRP)\n\n[game.zip](https:\/\/github.com\/godotengine\/godot\/files\/14697116\/game.zip)\r\n","comments":[],"labels":["bug","topic:import","crash","topic:animation","topic:3d"]},{"title":"Partial fix XMLParser conformity to XML specification","body":"<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n\r\nPartial fix to issues in [89668](https:\/\/github.com\/godotengine\/godot\/issues\/89668) . Now XMLparser throws an exception if a tag starts with a number, a punctuation character or the letters \"xml\".","comments":["I accidentally clicked on \"Ready for review\", so I closed the previous pull request","You can just make it a draft again, see top right where it says \"convert to draft\" :)","> You can just make it a draft again, see top right where it says \"convert to draft\" :)\r\n\r\nI did not know that, thank you! It's my first time making a draft pull request, so thank you for your patience :D","No problem at all! If you need any help don't hesitate to ask :) You can always ask [here](https:\/\/chat.godotengine.org\/) as well","> No problem at all! If you need any help don't hesitate to ask :) You can always ask [here](https:\/\/chat.godotengine.org\/) as well\r\n\r\nYoo that's amazing, thank you so much!","I'm not sure how to modify tests in \"test_xml_parser.h\", specifically those at lines 175 and 177, by making them coherent with the last edits but without disrupting the (initial) meaning behind them. If someone has a suggestion, please be free to answer to this comment or to directly edit the code"],"labels":["bug","topic:core"]},{"title":"Add method to obtain camera viewport group","body":"As noted in https:\/\/github.com\/godotengine\/godot\/pull\/87391\/files#r1477424681, some nodes use hard-coded per-viewport camera groups and it's better to avoid that. The group name is now generated in unified way.","comments":[],"labels":["enhancement","topic:core","topic:codestyle"]},{"title":"Remove redundant grabbing code from vector editor","body":"Remove some code from #77699, which is no longer needed after #87740","comments":[],"labels":["enhancement","topic:editor","topic:codestyle"]},{"title":"Remove stray item icon from tabs menu","body":"Context: https:\/\/github.com\/godotengine\/godot\/pull\/84882\/files#r1434449440\r\n\r\n\"Show in FileSystem\" option in scene tabs menu is the only one with an icon, which looks out of place.\r\n\r\nBefore:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2223172\/183c6132-8031-41b5-8c30-e03d1819d21f)\r\n\r\nAfter:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2223172\/e344be57-452b-4ce2-aae7-a044be3e96f3)\r\n","comments":["Why don't we add icons to all?","None of the top menus have icons and scene tabs menu is similar to that (especially with all these Close and Save actions being similar to Scene menu). There is a risk that it will look inconsistent\/cluttered. (script tab menu has no icons either)\r\n\r\nAlso it needs icons for these actions. I think we don't have Close icon in any menu.","I agree with this justifucation."],"labels":["bug","topic:editor","usability"]},{"title":"Remove `NOTIFICATION_ENTER_TREE` when `NOTIFICATION_THEME_CHANGED` is used","body":"Revival of #62846\r\n\r\nAs noted in https:\/\/github.com\/godotengine\/godot\/pull\/65025#issuecomment-1969280929, `NOTIFICATION_THEME_CHANGED` is no longer deferred. I checked the two mentioned regressions and none of them is happening, but maybe there is another.","comments":[],"labels":["enhancement","topic:editor","topic:gui","performance"]},{"title":"Update tooltips for 2D tools","body":"Some of 2D tools functionality wasn't mentioned in tooltips. So I added the missing description.","comments":["I suggest changing code like this\r\n```\r\nkeycode_get_string((Key)KeyModifierMask::CMD_OR_CTRL) + TTR(\"Drag: Rotate selected node around pivot.\")\r\n```\r\ninto something like\r\n```\r\n\/\/ TRANSLATORS: The placeholder is either Ctrl or Command based on the OS.\r\nvformat(TTR(\"%s Drag: Rotate selected node around pivot.\"), keycode_get_string((Key)KeyModifierMask::CMD_OR_CTRL))\r\n```\r\nto make translators' life easier :P"],"labels":["enhancement","topic:editor","topic:2d"]},{"title":"Can't open scene, error while loading","body":"### Tested versions\n\n4.3 dev5\n\n### System information\n\nWindows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 (NVIDIA; 31.0.15.4633) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\n#86781 was supposed to fix opening scenes, but I have a scene that still doesn't open for some reason.\n\n### Steps to reproduce\n\n1. Try to open the MRP scene in any project.\n\n### Minimal reproduction project (MRP)\n\n[3D.tscn.txt](https:\/\/github.com\/godotengine\/godot\/files\/14694937\/3D.tscn.txt)\r\n","comments":[],"labels":["bug","topic:editor"]},{"title":"Add progress bar when updating scene groups","body":"Fixes first part of https:\/\/github.com\/godotengine\/godot\/issues\/89516\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:editor","usability"]},{"title":"GDScript: Improve DocGen for non-constant expressions","body":"* See https:\/\/github.com\/godotengine\/godot\/pull\/88211#pullrequestreview-1874821095.\r\n\r\n```gdscript\r\nfunc test(a = [], b = a, c = {x = 0}):\r\n    pass\r\n```\r\n\r\n**Before**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/c2185136-756d-43d2-9ac2-fc421a13f7d0)\r\n\r\n**After**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/cca98aff-e3c8-4372-97c0-a5cbbb4b02bd)","comments":[],"labels":["enhancement","topic:gdscript"]},{"title":"Hover on texture button has a \"random\" work","body":"### Tested versions\n\nGodot 4.2.1 Mac version\n\n### System information\n\nMy configuration is : * Mac mini (late 2014) * Processeur 2,6 Gaz Intel Core i5 * memory : 8 Go 1600Mhz DDR3 * graphic card : Intel Iris 1536 Mo * SSD : 800 Go\n\n### Issue description\n\nHover texture button work well in a simple project but is inconsistent in bigger project. Sometime work and without changing code don't work (even if the button is lauch in single scene). It works again one time when I make a transitory \"change\" (ex : select pressed and deselect pressed) in the editor and don't work in the next run scene. Using the signals I see that it don't respond to mouse_exit or mouse_enter, but respond to button_pressed and detect mouse move in the input. I test my project on a PC and every thing works fine. It seems to be a bug mac specific...\n\n### Steps to reproduce\n\nTexture button in a \"big\" project...\n\n### Minimal reproduction project (MRP)\n\nMinimal project work fine","comments":[],"labels":["needs testing","topic:gui"]},{"title":"[Native File Dialog] Add support for using native dialogs in the editor.","body":"Add support for using native dialogs in the editor, in case https:\/\/github.com\/godotengine\/godot\/pull\/79313 used by https:\/\/github.com\/godotengine\/godot\/pull\/79316 UI, export options are shown as a separate dialog before showing native file dialog.\r\n\r\n- Adds support for using native dialogs to the `EditorFileDialog`.\r\n- Adds support for custom options to the `EditorFileDialog` (same as in the normal `FileDialog`) and use it instead of custom checkboxes in the various editor places.\r\n- Adds `interface\/editor\/use_native_file_dialogs` editor setting to enable native dialogs (also automatically enabled if editor is sandboxed).","comments":[],"labels":["enhancement","topic:editor","topic:gui"]},{"title":"OpenXR: Change timing of xrWaitFrame","body":"This PR changes the timing at which `xrWaitFrame` is called.\r\n\r\nThis also makes a start at ensuring the OpenXR code is thread safe if the renderer is run in a separate thread.\r\nIt is important to note that much of the OpenXR data such as the instance and session are initialised before rendering commences and access should be safe. However there is also much data that can be overwritten during frame processing while the previous frame is rendering and I've only just started making that safe.\r\n\r\n- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/83471 ","comments":["One of the issues I've run into is that `call_on_render_thread` requires a proper Godot Object to be used and `OpenXRAPI` is not such an object.\r\n\r\nI may decide to turn `OpenXRAPI` into a proper Godot object. This may eventually make `OpenXRAPIExtension` obsolete.\r\n\r\nAlso there is a potential minor **breakage** in `get_next_frame_time` now actually returning the predicted display time of the next frame, not the current frame, now that we're properly handling `xrWaitFrame`.\r\nIt will print out a warning on a developer version if this is the case. A new vendors plugin will likely be needed once this is released. The fix is simply calling the new `get_predicted_display_time` function."],"labels":["bug","topic:rendering","topic:xr"]},{"title":"Fix AnimationPlayer pin behavior","body":"Fixes issues described by #85285 .  Also fixes situation described by @KoBeWi where if you remove the pinned `AnimationPlayer` from the scene - the `AnimationPlayerEditor`  becomes stuck.\r\n\r\n*Bugsquad edit:*\r\n- Fixes #85285","comments":[],"labels":["bug","topic:editor","topic:animation"]},{"title":"[macOS Sandbox] Save security scope bookmarks for drag-n-drop and files opened using file associations.","body":"Allows sandboxed apps to retain access to the dropped or opened files after restart.","comments":[],"labels":["enhancement","platform:macos","topic:porting"]},{"title":"Audio plays incorrectly from a StateMachine (regression 4.3.dev4)","body":"### Tested versions\r\n\r\n- Reproducible in 4.3.dev4 and 4.3.dev5\r\n- Not reproducible in 4.3.dev3 and 4.2.2-rc2\r\n\r\n### System information\r\n\r\nGodot v4.3.dev4 - Windows 10.0.22621 - GLES3 (Compatibility) - NVIDIA GeForce RTX 3080 Laptop GPU (NVIDIA; 31.0.15.4633) - 11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz (16 Threads)\r\n\r\n### Issue description\r\n\r\nAn AudioStreamPlayer with `playing=true` in a AnimationPlayer animation plays back incorrectly when the animation is played from a StateMachine inside an AnimationTree. It sounds like it may be a buzz of the first milliseconds on repeat.\r\n\r\nVideos of the MRP (audio from [Kenney's Music Jingles](https:\/\/www.kenney.nl\/assets\/music-jingles)):\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/68911895\/4ce4f9d5-c6da-4b0b-8178-3924e696fd41\r\n\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/68911895\/337ed607-3a52-4f35-8bed-df38a5c4701c\r\n\r\n\r\n\r\n\r\nThings that don't change the outcome:\r\n- Using a different audio file, or encoding as OGG vs WAV\r\n- Setting the animation track, AudioStream and\/or the AudioStreamPlayer to loop\r\n- Changing the AudioStreamPlayer to AudioStreamPlayer3D\r\n- Changing the StateMachine transitions\r\n- Whether the AnimationTree is set to `deterministic` \r\n- Adding the AudioStreamPlayer's track to all animations\r\n\r\nNote: This project incidentally triggers the spurious `_transition_to_next_recursive` error from #82935, so I also tested with #89575, and can confirm that PR fixes the error (and, as expected, reproduces this bug).\r\n\r\n### Steps to reproduce\r\n\r\n- Create an **AudioStreamPlayer** and assign an AudioStream. Note that it plays back correctly in the Inspector.\r\n- Create an **AnimationPlayer**. Create a new animation, add a track for the AudioStreamPlayer's `playing` property and set it to true. Note that it plays back correctly when the animation is played.\r\n- Create an **AnimationTree**. Set the `Anim Player` path to the AnimationPlayer. Create a StateMachine node. Add the animation with the audio track to the state machine. Note that it plays back **incorrectly** when the StateMachine node is played.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[state-machine-audio.zip](https:\/\/github.com\/godotengine\/godot\/files\/14684784\/state-machine-audio.zip)\r\n","comments":["Setting CallbackModeDiscrete to `Dominant` will provide the expected behavior.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/61938263\/85bb6062-1706-459b-bfe6-84dcb52c63f1)\r\n\r\nHowever, this will still cause the audio to be interrupted by changing the stream to play when the state is changed. This is the intended behavior for ValueTrack. So, it is recommended to use AudioTrack for audio playback in the first place. AudioTrack has a `Don't Use Blend` property for that use cases where the playback stream exceeds the animation length.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/61938263\/bc249a03-b6db-4124-b077-e5f3f36f15c9)\r\n"],"labels":["documentation","topic:animation"]},{"title":"Shadow fade for omni lights actually stops the shadow from updating while faded out to improve performance.","body":"This is to address https:\/\/github.com\/godotengine\/godot\/issues\/88085\r\n\r\n* *Bugsquad edit, fixes: https:\/\/github.com\/godotengine\/godot\/issues\/88085*","comments":["EDIT:\r\nActually, apologies, this works before I thought it did in the pipeline, didn't read properly, so is likely a good approach.\r\n\r\nYes, this looks good. I am also wondering whether the shadows should ever be culled out _before_ the lights. If all the shadow casters will be rendered when light is showing, or none of the shadow casters, this PR should cover all bases. If we want shadows to be able to fade _during_ the light, then it becomes much more tricky to deal with.\r\n\r\nI had a little go at this this morning with #89740, although I'm now realizing it is a bag of worms, because for lights facing the viewer, we sometimes have to render casters _outside_ the shadow range, so I've shelved that for now.\r\n\r\nUPDATE:\r\nLooking through this looks good to me, I will test a bit more later if I get a chance, but probably needs a look through from a 4.x rendering team, as I'm not so familiar with 4.x (although a lot is similar there are some changes from 3.x).","You can fade the shadows before the lights.  There are 3 parameters on the light for the fade start (of the light), the fade start of the shadow, and the distance of the fade (shared between the 2).  I've been using this by fading the shadows out at a shorter distance than the lights, so that aspect seems to work.","Hopefully not rendering the entire shadow map as done here will mean we won't have to deal with the caching issues which are quite tricky (the shadowmap should just remain dirty, and keep trying to render until it comes within range).","Once the nitpicks above are done this looks fine to me (the function should take a light `RID` if possible imo). I've tested (reasonably, hard to test every permutation) and it seems to work fine.\r\n\r\nProbably one of the 4.x rendering team should also review when back from GDC prior to moving forward."],"labels":["bug","topic:rendering","topic:3d","performance"]},{"title":"Crazy error with ENetMultiplayer","body":"### Tested versions\n\nv4.2.2.rc1.official [c7fb0645a]\n\n### System information\n\nWindows 10\/64 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 4070 Desktop GPU (NVIDIA; 31.0.15.4633)\n\n### Issue description\n\nI have been having issues trying to get my multiplayer working, and have been battling many bugs. One bug is the garbled mess shown below. This is exactly as it comes from the console. Some errors are legible (as in not a crazy aztec language) but even the legible ones (ERROR: Condition \"!pinfo\" is true. Continuing.) confuse me. I can't narrow down what is causing them to apear.\r\n\r\nMy scene setup is pretty like this:\r\nroot\r\n- World\r\n- MultiplayerSpawner (only to spawn scenes under \"Level\")\r\n- - Level\r\n- - - Map1\r\n- - - - Players\r\n- - - - - 1 (server)\r\n- -   - - - ServerSynchronizer (position, rotation, etc.)\r\n- - - - - 1837827 (client) (same as server)\r\n- - - - MultiplayerSpawner (Spawns everything in \"Map1\")\r\n- - - - MultiplayerSpawner2 (Spawns only players in \"Players\")\r\n- - - - etc. map stuff\r\n\r\n```\r\nERROR: Condition \"paproesnitt-i>ohans:_ n(o3d2e.(5n3a5m4e8),\"  7i7s1 .t5r2u5e8.,  R-e2tu5r7.n0i0n4g4:)\r\nERR_INVALID_DATA\r\nERROR: ID 5 not found in cache of peer 1.\r\n   at: (modules\/multiplayer\/scene_cache_interface.cpp:278)\r\nERROR: ID 6 not found in cpaocshiet iofo np:e e(r3 21..5\r\n35 4 8 ,a t7:7 1(m.o5d2u5l8e,s \/-2m5u7l.t0i0p4l4a)y\r\ner\/scene_cache_interface.cpp:278)\r\nERROR: ID 7 not found in cache of peer 1.\r\n   at: (modules\/multiplayer\/scene_cache_interface.cpp:278)\r\nERROR: ID 8 not found in cache of peer 1.\r\n   at: (modules\/multiplayer\/scene_cache_interface.cpp:278)\r\nERROR: ID 5 not found in cache of peer 1.\r\n   at: (modules\/multiplayer\/scene_cache_interface.cpp:278)\r\nERROR: ID 6 not found in cache of peer 1.\r\n   at: (modules\/multiplayer\/scene_cache_interface.cpp:278)\r\nERROR: ID 7 not found in cache of peer 1.\r\n   atp:o s(itimoond:u l(e3s\/2m.u5l3t5i4p8l,a y7e7r1\/.s5c2e5n8e,_ c-a2c5h7e._0i0n4t4e)r\r\nface.cpp:278)\r\nERROR: Condition \"!pinfo\" is true. Continuing.\r\n   at: _remove_node_cache (modules\/multiplayer\/scene_cache_interface.cpp:57)\r\n```\n\n### Steps to reproduce\n\nI don't know the exact steps to reproduce.\n\n### Minimal reproduction project (MRP)\n\nI was unable to create a small, simple reproduction of this bug, I don't know what is not working correctly, but I tried 10 different configurations.","comments":[],"labels":["bug","needs testing","topic:multiplayer"]},{"title":"Fix XRBodyModifier3D hip driving for avatars no Root bone","body":"The XRBodyModifier3D node fails to correctly drive avatars which have no Root bone. This occurs on common avatars such as ReadyPlayerMe, Mixamo, and AvaturnMe where the root bone of the skeleton is the hips. The importers Skeleton Retarget doesn't add a Root but instead leaves the Hips as the root bone but with the corrected name.\r\n\r\nThe XRBodyModifier3D code assumes their must always be a bone associated with the Root tracking joint, and picks bone 0 (the first bone) if it didn't find it by the correct bone name. Unfortunately if it does this with an avatar where bone 0 is the hips then it associates the hips with the root and locks the hips in place.\r\n\r\nThis PR removes the offending code:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/89f70e98d209563abb4dbc1f8cd5d76c81eb7940\/scene\/3d\/xr_body_modifier_3d.cpp#L255-L258\r\n\r\nWith this removed the behavior is as follows:\r\n- The XRBodyModifier3D is still positioned at the trackers \"root\" location\r\n- The Hips bone is correctly positioned relative to the trackers \"root\" location\r\n\r\nThe following video demonstrates four different avatars moving correctly:\r\n1. An AvaturnMe avatar with no Root bone (bone 0 = Hips)\r\n2. A Mixamo avatar with no Root bone (bone 0 = Hips)\r\n3. A ReadyPlayerMe avatar with no Root bone (bone 0 = Hips)\r\n4. A VRM avatar with bone 0 = Root\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/1863707\/9f1d90b8-fccc-4769-8bc1-ee7cad062ae9\r\n","comments":["At a first glance a hips bone is not a root bone and shouldn\u2019t be a root bone. I\u2019ll try to give a proper answer or someone from the animation can be more detailed.\r\n\r\nWe\u2019re at GDC.","I assume that adding RootBone would seem to be better than using Hips as RootBone. (If necessary, such a feature may need to be added to Retargeter as well)","The purpose of this PR is indeed to prevents the hips from erroneously being driven with \"root motion\" rules.\r\n\r\nMy Godot Mocap plugins (VMC, Movella, AxisStudio) do synthesize root motion from the hips - because the mocap data-stream they're consuming doesn't include root motion information. It's just a Vector3.slide to project the hips onto the floor, followed by a double-cross-product to orient the joint facing upwards.\r\n\r\n```gdscript\r\n\t# Get the hips transform\r\n\tvar hips : Transform3D = _body_tracker.get_joint_transform(XRBodyTracker.JOINT_HIPS)\r\n\r\n\t# Construct the root under the hips pointing forwards\r\n\tvar root_y = Vector3.UP\r\n\tvar root_z = -hips.basis.x.cross(root_y)\r\n\tvar root_x = root_y.cross(root_z)\r\n\tvar root_o := hips.origin.slide(Vector3.UP)\r\n\tvar root := Transform3D(root_x, root_y, root_z, root_o).orthonormalized()\r\n```"],"labels":["bug","topic:xr","topic:3d"]},{"title":"Sync property of Animation Nodes only works with single Animation Nodes. More complex branches are stopped.","body":"### Tested versions\n\nReproducible in Godot 4.3 Dev 5\n\n### System information\n\nUbuntu 22.04\n\n### Issue description\n\nThe sync property of Animation Nodes are supposed to let both connected branches to go on even at extreme blend amount values. However this only works if such branchs are single animation nodes. This does not work if a branch is more complex, e.g., has Blend2 or other connected nodes.\r\nIn the video, we can see that the Blend2 node sync option is enabled. The first connected branch has another blend2 node (Blend2 2). We can see that this first branch is stopped when setting the blend amount to 1 although the sync option is enabled.\r\n\r\nThis is a problem when trying to synchronize different animation trees, e.g., synchronizing camera and player animation trees.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/8985409\/19d0217a-1d21-4e35-8ba7-dd96d5ad2336\r\n\r\n\n\n### Steps to reproduce\n\nDownload the attached project and play with the Blend2 node values to the extremes.\n\n### Minimal reproduction project (MRP)\n\n[syncanimationnode.zip](https:\/\/github.com\/godotengine\/godot\/files\/14681144\/syncanimationnode.zip)\r\n","comments":["This appears to be an old bug that has existed since 3.x.\r\n\r\nIn 4.x, the behavior of the `AnimationNode::_blend_node()` function for blend filters and optimization has mostly not changed from 3.x, so there is room for improvement."],"labels":["bug","confirmed","topic:animation"]},{"title":"Skeleton Retarget for ReadyPlayerMe avatars picks incorrect bones","body":"### Tested versions\r\n\r\n4.3-dev5\r\n\r\n### System information\r\n\r\nWindows 11, Vulkan Mobile, NVidia RTX 3070 TI\r\n\r\n### Issue description\r\n\r\nReadyPlayerMe produce customized avatars for game players. Importing these avatars using the Skeleton Retarget system results in the wrong finger bones being selected and renamed. The user can correct this by manually picking every bone in the left and right hands; however due to the popularity of ReadyPlayerMe avatars it would be preferrable if these could be identified and handled correctly with minimal effort.\r\n\r\n### Steps to reproduce\r\n\r\nThis Zip file [65fa409029044c117cbd3e3c.zip](https:\/\/github.com\/godotengine\/godot\/files\/14676308\/65fa409029044c117cbd3e3c.zip) contains a ReadyPlayerMe avatar.\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1863707\/546d7d0c-4635-49aa-8508-c8a422cc0b28)\r\n\r\nImporting through the standard Skeleton Retarget method results in the following finger-bone issues:\r\n\r\n| Actual Bone Type | ReadyPlayerMe Name | Name after Skeleton Retarget |\r\n| :---- | :---- | :---- |\r\n| Left Thumb Metacarpal | LeftHandThumb1 | LeftHandThumb1 |\r\n| Left Thumb Proximal | LeftHandThumb2 | LeftThumbMetacarpal |\r\n| Left Thumb Distal | LeftHandThumb3 | LeftThumbProximal |\r\n| Left Thumb Tip | LeftHandThumb4 |  LeftThumbDistal |\r\n| Left Index Proximal | LeftHandIndex1 | LeftHandIndex1 |\r\n| Left Index Intermediate | LeftHandIndex2 | LeftIndexProximal |\r\n| Left Index Distal | LeftHandIndex3 | LeftIndexIntermediate |\r\n| Left Index Tip | LeftHandIndex4 | LeftIndexDistal |\r\n| Left Middle Proximal | LeftHandMiddle1 | LeftHandMiddle1 |\r\n| Left Middle Intermediate | LeftHandMiddle2 | LeftMiddleProximal |\r\n| Left Middle Distal | LeftHandMiddle3 | LeftMiddleIntermediate |\r\n| Left Middle Tip | LeftHandMiddle4 | LeftMiddleDistal |\r\n| Left Ring Proximal | LeftHandRing1 | LeftHandRing1 |\r\n| Left Ring Intermediate | LeftHandRing2 | LeftRingProximal |\r\n| Left Ring Distal | LeftHandRing3 | LeftRingIntermediate |\r\n| Left Ring Tip | LeftHandRing4 | LeftRingDistal |\r\n| Left Pinky Proximal | LeftHandPinky1 | LeftHandPinky1 |\r\n| Left Pinky Intermediate | LeftHandPinky2 | LeftLittleProximal |\r\n| Left Pinky Distal | LeftHandPinky3 | LeftLittleIntermidate |\r\n| Left Pinky Tip | LeftHandPinky4 | LeftLittleDistal |\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["cc @fire @lyuma ","I also confirmed this happens with Mixamo avatars.\r\nAnd with the AlicialSolid VRM character included in the Godot VRM Plugin.","I remember we make it to handle the case of a model with a Palm, where the fingers could exist too close to the wrist, so that the tips are mapped in priority.\r\n\r\nIt might be handled to some extent by making sure that auto-mapping excludes bones named \"Tip\" and \"Leaf\". However, if the bone names are sequentially numbered as Finger 1, 2, 3, 4, I don't think there is anything that can be done.\r\n\r\nThis is because the human hand has 4 finger bones from the wrist, but some 3D models ignore the actual first bone , and only a few of them add TipBone that don't exist in real, so it cause an offset.\r\n\r\n| Model type | Finger bones |\r\n| -- | -- |\r\n| In Real or Realistic 3D model | Palm, Metacarpal, Proximal, Distal |\r\n| General 3D model | Metacarpal, Proximal, Distal |\r\n| 3D model specialized for FingerIK or some proprietary software | Metacarpal, Proximal, Distal, Tips |\r\n\r\nIMO, most models created by designers do not have a TipBone unless they specialize in IK. We should avoid making special accommodations for some proprietary software, so the only thing we can discuss is to consider ways to simplify manual fixes.","> IMO, most models created by designers do not have a TipBone unless they specialize in IK. We should avoid making special accommodations for some proprietary software, so the only thing we can discuss is to consider ways to simplify manual fixes.\r\n\r\nI reviewed the following avatars, and at least form this limited set we need manual correction 75% of the time:\r\n| AVATAR | BONES | MAPPING RESULTS |\r\n| :---: | :--- | :--- |\r\n| VRM<br>AliciaSolid | 4-bones (named) | Bone mapping does not use the friendly names,<br> and gets the fingers wrong (off by 1) |\r\n| Avaturn.me | 3-bones | Mapped correctly |\r\n| Mixamo | 4-bones (1..4) | Bone mapping wrong (off by 1) |\r\n| ReadyPlayerMe | 4-bones (1..4) | Bone mapping wrong (off by 1) |\r\n\r\nIn this group every model with 4-bone fingers is incorrect. The possibilities for four-bone fingers seems to be either:\r\n1. Metacarpal, Proximal, Intermediate, Distal\r\n2. Proximal, Intermediate, Distal, Tip\r\n\r\nThe bone mapper can't differentiate these - even if the bones have friendly names (metacarpal, proximal, distal, etc.)\r\n\r\nConsider the following from Mixamo:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1863707\/2ea6d200-8885-4880-9852-9651c226573e)\r\n\r\nIt might be possible to differentiate If we calculate the ratio of the finger length (hand <--> bone4) to the position of the first bone (hand <--> bone1) then we can work out if bone 1 is very close to the hand (Metacarpal) or roughly half way along (Proximal).\r\n\r\nSo we could use position-metrics, or failing that inspect the bone names and see if they contain metacarpal, proximal, intermediate, distal, or tip \"hints\".","The methods using position and length may work to some extent, but I assume it can't be guaranteed to be accurate for thumbs.\r\n\r\nI just came up with the idea that the most accurate way to identify a Tips bone is to see if it is bound to Skin or not. It would work well to add this to the factor for mapping. Although it may not work for animations that do not have Skin, that would be rare case."],"labels":["enhancement","topic:xr","topic:import","topic:3d"]},{"title":"Rename some arguments called \"position\"","body":"When you connect Tree's `empty_clicked` argument to the same Tree or just any Control node, you will get a warning that the argument `position` of the newly generated callback shadows a property.\r\nI went and renamed all arguments that could cause such warning.","comments":["resolve godotengine\/godot-proposals#5715\r\n\r\nhas a broader scope than #78864","Wanting the dotnet team to take a look concerning renaming and compatibility, I forget the specifics on what constitutes breaking compatibility there (as this is a non-critical change)","AFAIK `_input_event` might break compatibility, because C# supports named arguments. Signal changes only affect newly created callbacks.","Signal changes won't break compat in C#, lambda parameter names don't have to match.\r\n\r\nChanges to method parameters will break source compat but only if the call-site is using named parameters, not sure how common that is but I find it unlikely here specially since AFAIK a virtual method like `_input_event` is only meant to be called by the engine and not users directly. Also, breaking source compat is not very disruptive anyway, so I think the changes here are fine."],"labels":["enhancement","topic:codestyle"]},{"title":"Core: Implement `real_t` literal `_R`","body":"It turns out that c++ supports user-defined literals for certain core types, one of which being floating-point values. This PR implements this functionality via `_R`, giving a convenient way to guarantee a floating-point literal will be represented as a `real_t` value. While most warning regarding implicit conversions & precision-loss are disabled, this should help open the door to conversions\/operations being much more explicit across the repo & possibly remove the need to suppress those warnings in the first place. Limited implementation to `core\/math` files as a proof of concept & only in values that either expect `real_t` but are using hardcoded float\/double erroneously or could be trimmed down (ex: `(real_t)1`\u2192`1.0_R`).","comments":["While I think ensuring proper types is important I'm not so sure of this solution, it'd be very obscure and require you to know that it exists, as opposed to just using `(real_t)x`, I'd say using `(real_t)x` is *much* more readable, and having a custom suffix you have to know about is far from obvious IMO, `real_t` is a type, and to read what's going on isn't as big a hurdle IMO for readability with that"],"labels":["enhancement","discussion","topic:core"]},{"title":"[macOS] No paddings in popup windows","body":"### Tested versions\n\nReproducible in 4.2.1 and 4.3\n\n### System information\n\nmacOS 14.2.1 - Vulkan (Forward+) - integrated Apple M1 Max - Apple M1 Max (10 Threads)\n\n### Issue description\n\nThere's basically no space around popup window content on macOS no matter what editor settings I try, this is the default theme:\r\n\r\n<img width=\"416\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/b5392fe5-fd75-4a49-8c6d-6d8fcc84166e\"><br>\r\n\r\nThis is on windows:\r\n\r\n<img width=\"416\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/b29a6c8b-41f3-4e81-a8ac-7e187fad0854\">\r\n\r\nThe conversation about this started [here](https:\/\/twitter.com\/YuriSizov\/status\/1770510255195054089)\r\n\r\n_P.S. The default padding could also be increased by ~50%, because even on windows it look a bit too packed_\n\n### Steps to reproduce\n\nN\/A\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["- Related to https:\/\/github.com\/godotengine\/godot\/issues\/89697."],"labels":["bug","platform:macos","topic:gui"]},{"title":"[X11] Add more details to large icon size warning","body":"Searched my icons till not add this size info, I think it will simplify life for a lot of developers\/designers.","comments":["Please make your commit message more clear, the title of the PR would be good","should I currently do any changes?","@AThousandShips should I do any corrections?","You need to fix the commit message and please squash your commits into one, see [here](https:\/\/docs.godotengine.org\/en\/latest\/contributing\/workflow\/pr_workflow.html#the-interactive-rebase) ","@AThousandShips updated please check"],"labels":["enhancement","platform:linuxbsd","topic:porting"]},{"title":"When exporting an iOS Project will delete source code","body":"### Tested versions\n\n-  Reproducible in v4.2.1.stable.official [b09f793f5]\n\n### System information\n\nGodot v4.2.1.stable - macOS 13.6.5 - Vulkan (Forward+) - integrated Intel(R) Iris(TM) Plus Graphics 655 - Intel(R) Core(TM) i7-8569U CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\nwhen exporting an iOS Project to the exists directory parent, it will be remove it directly. \r\n\r\nmy all code is lost because of this!!!!\r\n\r\nexpect any warning or confirm or somethink.\r\n\n\n### Steps to reproduce\n\n1. create a new project, specify directory `\/xxx\/project\/mygame`\r\n2. create a empty scene\r\n3. export iOS Project, specify export directory `\/xxx\/project\/`\r\n4. you will lose all source code\n\n### Minimal reproduction project (MRP)\n\n- no need this","comments":["iOS exporter deletes `binary_name + \".xcodeproj\"` and `binary_name` specifically, since these are the directories created during export. So if you use `mygame` as export name, it will delete it. No sure how to fix it (or if it should be fixed), since not deleting it will result in broken export if you export multiple times to the same folder.","We could for example search for a project file in the path, but it'd still be risky, as it could be in any nested folder, unsure how it could be done reliably, alternatively we could reqire that the folder is either empty (or does not exist) or contains some specific data from exporting\r\n\r\nThis is the relevant code:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/platform\/ios\/export\/export_plugin.cpp#L1629-L1643\r\n\r\nWe could also make the binary dir have some suffix making it unlikely to match your project directory in the case you name the binary the same\r\n\r\nWe could also enforce the export happening in specific places as well","This code actually is broken and will delete it only if there's no `binary_dir + \".xcodeproj\"`:\r\n\r\n```c++\r\nif (da->change_dir(binary_dir + \".xcodeproj\") == OK) {  \/\/ enters dest\/binary_dir.xcodeproj\r\n\tda->erase_contents_recursive(); \r\n} \r\nif (da->change_dir(binary_dir) == OK) { \/\/ if previous changedir was sucessfull, enters dest\/binary_dir.xcodeproj\/binary_dir which will not exist\r\n\tda->erase_contents_recursive(); \r\n}\r\n```"],"labels":["bug","discussion","topic:export"]},{"title":"Tighter shadow culling - fix light colinear to frustum edge","body":"In rare situations if a light is placed near colinear to a frustum edge, the extra culling plane derived can have an inaccurate normal due to floating point error. This PR detects colinear triangles, and prevents adding a culling plane in this situation.\r\n\r\nFixes #89702\r\n\r\n## Notes\r\n* Epsilons were measured with typical scales (assuming 32 bit real, there's little to gain by making them smaller for 64 bit). These should hopefully be fine but if there are any more reports they can be adjusted.\r\n* There are other alternative ways of checking for co-linearity (some slightly faster, e.g. dot product of two normalized sides), but this seems pretty foolproof and is called only once per edge per light per frame, so accuracy is more important than speed.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"[display_server_windows] Parameter \"hicon\" is null. ","body":"### Tested versions\r\n\r\n4.2\r\n4.3.Dev4\r\nv4.3.dev5.mono.official [89f70e98d]\r\n\r\n\r\n### System information\r\n\r\nGodot v4.3.dev5.mono - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 Ti (NVIDIA; 31.0.15.3623) - AMD Ryzen 7 3700X 8-Core Processor (16 Threads)\r\n\r\n### Issue description\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/ed3f8bb6-6b2a-4ae4-85dc-0cc15991439c)\r\n\r\nplatform\/windows\/display_server_windows.cpp:3139 - Parameter \"hicon\" is null.\r\n\r\n### Steps to reproduce\r\n\r\nIt happens very random, I couldn't reproduce in a consistent way, but from time to time this bugs appears.\r\nIt has something to do with hovering icons.\r\n\r\nAlso more people are experiencing this error, and it is very anoying as it makes you need to restart the engine to keep working with it. (\r\nhttps:\/\/forum.godotengine.org\/t\/weird-error-that-i-dont-know-how-to-fix\/38742\/5)\r\n\r\nThe scale appears to change randonly after this bug.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2137569\/3ea597a3-3bf2-42fc-88be-824819223329\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/2f5332d9-0e32-45d7-af7a-b09216896576)\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nJust using the editor from time to time this error happen.\r\nIt happens when hovering any icon.","comments":[],"labels":["bug","platform:windows","needs testing"]},{"title":"Fix a pixel misalignment in the blue robot logo","body":"Follow-up to #78015 because I've made a huge blunder :sob: \r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/85438892\/62938e76-e059-4e1a-9fa3-1cc339a901ab\r\n\r\n- Fixes this.\r\n- Deletes misc\/dist\/project_icon.svg as mentioned here: https:\/\/github.com\/godotengine\/godot\/pull\/78015#issuecomment-1583607900\r\n- Optimizes TitleBarLogo.svg, adds width and height properties to it, and changes it to use the standard editor color #e0e0e0 instead of #fff.","comments":["What a terrible, dangerous problem )"],"labels":["bug","topic:gui","cherrypick:4.1","cherrypick:4.2"]},{"title":"[Doc] Fix casing of some C# names","body":"I think I got them all, hard to identify exactly everything\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot-docs\/issues\/9120\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","documentation","cherrypick:4.1","cherrypick:4.2"]},{"title":".Net \/ Windows \/ Main Branch: Editor Sometimes Crashes in Random Spot non-dev build","body":"### Tested versions\n\nGodot v4.3.dev.mono (fe01776f0)\n\n### System information\n\nGodot v4.3.dev.mono (fe01776f0) - Windows 10.0.17763 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 4060 Ti (NVIDIA; 31.0.15.4601) - AMD Ryzen 9 5900X 12-Core Processor (24 Threads)\n\n### Issue description\n\nFor mono + non-dev builds, Godot Editor sometimes may crash on startup, furthermore debugging breaks at this line:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/9ba8677b-f940-418b-b8eb-cabde245ca80)\r\n\r\nClicking the `Continue` button will show the program paused on exception, which is\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/fe5c2609-c71b-4d23-af76-162bbc1928ac)\r\n\r\nThe error code is `STATUS_HEAP_CORRUPTION (A heap has been corrupted.)`.\n\n### Steps to reproduce\n\nI am not sure if this is an OS-specific issue, but the repro is here:\r\n1. Clone the commit `fe01776f0`.\r\n2. Build the source with the mono module and debug symbols enabled according to the documentation.\r\n3. Launch the editor, select and open a project.\r\n4. Inspect the issue happens sometimes.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["I can confirm this on windows 11 with latest master too.\r\nit has been happening for about a week or so. The project selection works fine but when trying to open the project it starts opening it, loading something then crashes without loading the editor properly (no matter if it's a new project or an olde one), although at some rare moments (I don't know why, planets aligned or something?) I get into the editor and crash a bit later but that's like 1% of tries.","A short video.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/71481700\/5f8f1a8c-8c70-45d1-8f37-26832cdf6271\r\n","In my second build it starts crashing at another line....\r\nNow it is saying access violation.\r\n\r\n<img width=\"884\" alt=\"f064bff08e01753d69e6b7bc29c04625\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/3876d196-b84d-4cdc-9760-acc3d0d57ec4\">\r\n<img width=\"1080\" alt=\"fa065fbf455b534b67d6eb9b35ed5c38\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/148b8a4b-c2c9-4746-a48e-844fe02a289f\">\r\n","Can confirm. And it doesn't happen with `dev_build` enabled.\r\n\r\nI removed the code to load certificates at `main.cpp`, then the crash happened elsewhere.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/12966814\/09409b7e-ed51-43ba-a7ef-345190162479)\r\n\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/12966814\/24dd00fa-5255-470e-86a5-4f40ba6ac32b)\r\n\r\n\r\n","@AThousandShips request `platform:windows` tag","I went through the history building and this is the first where it breaks for me: 77f6e35a8dc34a649f817a9c3e3c2d341fe98457. The one before: 8bfc257e63ee30b18438c3dc7bad3293c8c16b30 works for me just fine.\r\nI hope I did it alright, first time trying this in this IDE but so far that's it from my side.\r\n(by just fine I mean I can launch a project into editor, I haven't spent more time in it so don't know if it would crash at some point later while working with the editor)\r\n\r\nIs it the same on your side?\r\n\r\n\r\nEDIT:\r\nAlso I take back the comment about debug_symbols making it work, it still crashes on me unless I also enable the dev_build.\r\nThis should probably also have the regression label.","> I went through the history building and this is the first where it breaks for me: [77f6e35](https:\/\/github.com\/godotengine\/godot\/commit\/77f6e35a8dc34a649f817a9c3e3c2d341fe98457). The one before: [8bfc257](https:\/\/github.com\/godotengine\/godot\/commit\/8bfc257e63ee30b18438c3dc7bad3293c8c16b30) works for me just fine. I hope I did it alright, first time trying this in this IDE but so far that's it from my side. (by just fine I mean I can launch a project into editor, I haven't spent more time in it so don't know if it would crash at some point later while working with the editor)\r\n> \r\n> Is it the same on your side?\r\n> \r\n> EDIT: Also I take back the comment about debug_symbols making it work, it still crashes on me unless I also enable the dev_build. This should probably also have the regression label.\r\n \r\nI'm doing a range of building\/testing, I even went to the commits on March 10, which led me to believe there are some problems on my end, at least on mono build.","I made 4 builds, and tests them by opening an empty project individually:\r\n- [OK] Dev5 [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n- [OK] Dev5 Mono [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n- [OK] Main [fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n- [Crash!] Main Mono [fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n\r\nThat narrows the scope of the issue:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/ef109d9f-2904-45fa-9129-32a8e2a3da9a)","> [Crash!] Main Mono [https:\/\/github.com\/godotengine\/godot\/commit\/fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n\r\n> Windows 10.0.17763\r\n\r\nThe only relevant part is probably dark mode detection (Windows build number checks might be off), `17763` seems to be outdated Windows 10 version from 2018 (current supported versions are `19044`\/`19045`), so no idea how to test it.\r\n\r\nIf you are really using this version of Windows, try commenting function calls here one-by-one, to narrow it down.\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/platform\/windows\/display_server_windows.cpp#L5512-L5523\r\n\r\nBut I'm not sure how it's related to Mono.","> > [Crash!] Main Mono [https:\/\/github.com\/godotengine\/godot\/commit\/fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n> \r\n> > Windows 10.0.17763\r\n> \r\n> The only relevant part is probably dark mode detection (Windows build number checks might be off), `17763` seems to be outdated Windows 10 version from 2018 (current supported versions are `19044`\/`19045`), so no idea how to test it.\r\n> \r\n> If you are really using this version of Windows, try commenting function calls here one-by-one, to narrow it down.\r\n> \r\n> https:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/platform\/windows\/display_server_windows.cpp#L5512-L5523\r\n> \r\n> But I'm not sure how it's related to Mono.\r\n\r\nI'm using Windows 10 1809, but I aggreed it may not be relevant.","Just to be clear, I have the same issues and I'm on windows 11.","Now I'm extra confused since my builds don't seem consistent.\r\n\r\nThese are what I done for each version:\r\n- I moved every built file to a sub folder (as shown down below) before starting a new build.\r\n- I didn't delete anything inside `modules\/mono` before performing a build.\r\n- I did build with `module_mono_enabled=yes ` argument.\r\n- I did use the built binaries to generate mono glues at the correct location.\r\n- I did ran `build_assemblies.py` and ensure the results are copied to the dest directory.\r\n\r\nThese are the builds I made:\r\n\r\n[OK] Dev5 [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n[OK] Dev5 Mono [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n\r\n[OK] Main-3 [691bd17df819d51e4a4ea2aa304bdd9857d49295]\r\n[Crash!] Main-3 [691bd17df819d51e4a4ea2aa304bdd9857d49295]\r\n\r\n\r\n[OK] Main-2 [84bdc8d1b0f12c540257878297163698c83c2d0d]\r\n[Crash!] Main-2 [84bdc8d1b0f12c540257878297163698c83c2d0d]\r\n\r\n[OK] Main-1 [68ad520da4365c866ceea42e0238b2ea24647289]\r\n[Crash!] Main-1 [68ad520da4365c866ceea42e0238b2ea24647289]\r\n\r\n[OK] Main [fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n[Crash!] Main Mono [fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n\r\nThis made me rebuild the dev5 afterward\uff1a\r\n\r\n[OK] Dev5 [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n[Sometimes Crash] Dev5 Mono [89f70e98d209563abb4dbc1f8cd5d76c81eb7940]\r\n\r\nAnd this is the order I followed when building these versions.\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/71481700\/7b5b84e7-6833-4852-8b14-53bf6b8491b2)\r\n","Assuming it's the same problem, for me this is happening since way over a week already. Sometimes it works, but usually it doesn't. I'm not sure when exactly this was introduced, as I'm only rebuilding every 5-10 days. The version I'm currently using is from end of February, which I stayed on because this problem appeared afterwards. Same problem on 2 different machines, Windows 10 and Windows 11. I'm only using Mono builds.","Just went back and tested through all commits. It started happening with [eccdf1a](https:\/\/github.com\/godotengine\/godot\/commit\/eccdf1a1e8a972b40d507321b925d756a50c2a9d).\r\n\r\n[3cac010](https:\/\/github.com\/godotengine\/godot\/commit\/3cac01034480dcb114a7becd7892d005627b45fd) is still working fine for me.","@AThousandShips request: `regression`, `topic:dotnet`"],"labels":["bug","platform:windows","topic:core","needs testing","topic:dotnet","crash","regression"]},{"title":"Clear debug session's tab when multiple running instance's count is changed","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89527\r\n\r\nIs there a better way to clear the tabContainer?\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:editor","cherrypick:4.2"]},{"title":"[Wayland] Fix typo in input code","body":"Tried to search but couldn't find any other cases like this\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89706\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","platform:linuxbsd","topic:porting"]},{"title":"Identical value linter report in `wayland_thread.cpp`","body":"### Tested versions\r\n\r\n2024-03-20 head\r\n\r\n### System information\r\n\r\nWin 10\r\n\r\n### Issue description\r\n\r\nidentical value\r\nFile platform\\linuxbsd\\wayland\\wayland_thread.cpp   line 2456\r\nCode:\r\n\tVector2i pos_delta = td.position - old_td.position;\r\n\t\tuint32_t time_delta = td.motion_time - td.motion_time; \/\/ <- identical value td.motion_time\r\n\t\tmm->set_velocity((Vector2)pos_delta \/ time_delta);\r\n\r\n### Steps to reproduce\r\n\r\nn\/a\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nn\/a","comments":[],"labels":["bug","platform:linuxbsd","topic:porting"]},{"title":"[RTL] Move shadow and foreground\/background boxes drawing into a separate draw steps.","body":"Similar changes to https:\/\/github.com\/godotengine\/godot\/pull\/89510 for RTL.\r\n\r\n- Fixes the same shadow issues for RTL (https:\/\/github.com\/godotengine\/godot\/issues\/89498).\r\n- Removes some duplicate text drawing code.\r\n- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/86251\r\n","comments":[],"labels":["bug","enhancement","topic:gui"]},{"title":"Editor: Fix text color in `EditorHelpHighlighter`","body":"* Fixes #89534.\r\n\r\nI added this to `reset_cache()`, but forgot it in the constructor.","comments":[],"labels":["bug","topic:editor"]},{"title":"android: Fix UnsupportedOperationException remove from non-ArrayList","body":"`getManifestPermissions` on some versions of android seem to return some other implementation of List<> which does not implement `remove()`\r\n\r\nI workaround this crash by converting the generic List<> to an ArrayList<> which is known to support `remove()`\r\n\r\nTested crash fix on `Pixel Tablet` Android 14:\r\nGodot v4.3.dev - Android - Vulkan (Mobile) - integrated Mali-G710 -  (8 Threads)\r\n\r\nFixes #89696\r\n","comments":[],"labels":["bug","platform:android"]},{"title":"Tighter Shadow Caster Culling causes some object shadows to not render for a Frame","body":"### Tested versions\n\nReproducable in 4.3 dev 5, or any build prior that has https:\/\/github.com\/godotengine\/godot\/pull\/84745\n\n### System information\n\nGodot v4.3.dev (0728468bd) - Windows 10.0.22621 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1050 Ti (NVIDIA; 31.0.15.5176) - Intel(R) Core(TM) i3-10105F CPU @ 3.70GHz (8 Threads)\n\n### Issue description\n\nThere seems to be an edge case where Tighter Shadow Caster Culling is inaccurately culling some shadow casters away when the lights initially move, but the next frame when they stop moving the missing casters get rendered again.\r\n\r\nThe issue doesn't seem to come from the fact they're Skinned Meshes, as replacing them with a box of the same AABBs also suffers from this problem.\r\n\r\nThis happens with both Omni Lights and Spot Lights (replace OmniLight3D with a Spot Light and rotate it -90 degrees to light the floor, it'll still flicker the shadow casters)\n\n### Steps to reproduce\n\nOpen MRP, and run it, press Home a few times to rotate the lights an increment at a time until some dummies (Female 26 and Light 1 for me) start displaying no shadows for a frame after rotation. Use End to rotate in the opposite direction, to allow for retriggering.\r\n\r\nDisable Tighter Shadow Caster Culling and repeat, observe no issues.\n\n### Minimal reproduction project (MRP)\n\n[Shadows.zip](https:\/\/github.com\/godotengine\/godot\/files\/14662489\/Shadows.zip)\r\n","comments":["[mrjustguy_tighterculling_bug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14662741\/mrjustguy_tighterculling_bug.zip)\r\n\r\nHere's a simpler MRP. Will examine in more detail today.\r\n\r\nThe flicker for one frame is likely due to some logic the culling does to juggle between partial update (tighter culling) and full update (regular culling). My best guess so far is it disappears on the partial cull and reappears on the regular cull. But debugging should reveal what is happening.\r\n","Pinning it down. The logic between partial update and regular seems fine, it is giving rise to the flicker, but the reason is that the cull on the partial update is incorrectly culling the box.\r\n\r\nAm running the numbers now to find out why this is the case.\r\n\r\nUPDATE:\r\nI *think* I'm getting there. It's been tough to debug.\r\n\r\nIt *seems* to be a float precision problem at the exact point the light is close to the frustum plane (possibly frustum edge, the 3 point plane equation is subject to error when close to colinear), the normal of the extra culling plane created between the light and the points of the view frustum is subject to considerable floating point error, and can lead to a large change in the estimate of the distance between the cube and the culling plane, resulting in it being incorrectly culled.\r\n\r\nI suspect the answer may be to disable these extra culling planes if the light is in this situation, or perform some bodging to work around it. If this is correct, it is not surprising it hasn't been reported earlier as it would seem to only occur in this rare configuration.\r\n\r\nUPDATE:\r\nCan confirm the problem is occurring when the light to frustum edge is near colinear. This explains the dodgy normal.","I can confirm it seems to be a precision issue, increasing the cull margin reduces the flickering, until you get to a large enough margin for it to go away completely (from 0.1m to 1m)"],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Depth buffer resolution is unexpectedly small when sampled in spatial shader","body":"### Tested versions\r\n\r\nNoticed in: v4.2.1.stable (when porting a working project from 3.x)\r\nAlso found when testing: v4.0.0, v4.2.2-rc2, v4.3-dev1, v4.3-dev2\r\n**Partially fixed in: v4.3-dev3 and later** (Forward+ renderer is fixed, Mobile renderer still has same issue)\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - macOS 14.3.1 - Vulkan (Forward+) - dedicated AMD Radeon Pro 555X - Intel(R) Core(TM) i7-8750H CPU @ 2.20GHz (12 Threads)\r\n\r\n### Issue description\r\n\r\nOn my system (macOS, Intel CPU, AMD GPU), 3D shaders which sample the depth buffer have visual artifacts that suggest that the depth buffer being rendered at a much lower resolution than the main camera.\r\n\r\nHere's a scene with a plane above a torus. The plane has a simple shader attached (included in sample project zip, see below) which samples the depth buffer and uses it to set the albedo. The result appears chunky, with depth buffer resolution appearing ~8x less in both dimensions than the main camera's output.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/5893857\/4cc0dcb1-3e74-4bfb-8130-5493855c088a\r\n\r\nA similar effect can be seen when using the Proximity Fade property on the standard material.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/5893857\/39e35225-7a84-4780-963e-948844142557\r\n\r\nI encountered this when porting a shader that uses the depth buffer from Godot 3.4 to Godot 4.2.1. That shader worked as expected on the same computer under that version of Godot (and the GLES 2 backend) - i.e. the depth texture was the same resolution as the scene.\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\nI can repro this on my machine with either the Forward+ or Mobile rendering method. I guess depth buffer sampling isn't supported in Compatibility mode so this bug isn't relevant there.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nThis test project contains the scene shown above. It's configured with the standard material with the proximity fade property enabled. The shader code shown above is also included.\r\n\r\n[DepthBufferBugRepro.zip](https:\/\/github.com\/godotengine\/godot\/files\/14662273\/DepthBufferBugRepro.zip)\r\n","comments":["IIRC depth works differently in Vulkan than in OpenGL - have you accounted for this fact when porting?","> IIRC depth works differently in Vulkan than in OpenGL - have you accounted for this fact when porting?\r\n\r\nYes, I think so. For convenience, here's the code from the shader example above (video 1), which is also included in the zipped project.\r\n\r\n```\r\nshader_type spatial;\r\n\r\nuniform sampler2D DEPTH_TEXTURE: hint_depth_texture;\r\n\r\nvoid fragment() {\r\n\tfloat depth = textureLod(DEPTH_TEXTURE, SCREEN_UV, 0.0).r;\r\n\tvec3 ndc = vec3(SCREEN_UV * 2.0 - 1.0, depth);\r\n\tvec4 view = INV_PROJECTION_MATRIX * vec4(ndc, 1.0);\r\n\tview.xyz \/= view.w;\r\n\tALBEDO = vec3(smoothstep(view.z + 0.5, view.z, VERTEX.z));\r\n}\r\n```\r\n\r\nI think only relevant difference between Vulkan and OpenGL in this situation is that Vulkan's normalized device coordinates go from 0 to 1 in Z, instead of -1 to 1 like in OpenGL. So the line `vec3 ndc = vec3(SCREEN_UV * 2.0 - 1.0, depth);` would be `vec3 ndc = vec3(SCREEN_UV, depth) * 2.0 - 1.0;` in OpenGL.\r\n\r\nI realized that there's an even simpler repro. This shader:\r\n\r\n```\r\nshader_type spatial;\r\n\r\nuniform sampler2D DEPTH_TEXTURE: hint_depth_texture;\r\n\r\nvoid fragment() {\r\n\tALBEDO = vec3(1.0 - textureLod(DEPTH_TEXTURE, SCREEN_UV, 0.0).r);\r\n}\r\n```\r\n\r\nShould look something like this (screenshot from [this video](https:\/\/www.youtube.com\/watch?v=F7nR35XERh0))\r\n\r\n<img width=\"1648\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/5893857\/e1f20001-1a09-4f91-b412-db25d5f3f08a\">\r\n\r\nBut on my machine it looks like this:\r\n\r\n<img width=\"1920\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/5893857\/9291acfd-9c9d-412e-9076-e4d1593b7183\">\r\n\r\nMaybe this can help narrow down the issue. I think it illustrates that two things are wrong: the depth texture is lower resolution than the scene (big chunky pixels visible) and the values at each pixel are surprising (pixels of the plane which are in front of the torus are all white, rather than showing a gray ramp).","I tested a few more versions and discovered that this bug appears to have been **fixed in v4.3-dev3 for the Forward+ renderer**. But it can still be observed when using the Mobile renderer.\r\n\r\nHere's a screenshot of v4.3-dev3 using the Forward+ renderer, showing the shader working as expected:\r\n<img width=\"2032\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/5893857\/00e72ca1-a90c-4008-a92a-e7244828e0a5\">\r\n\r\nAnd here's a screenshot using the Mobile renderer where the bug still exists.\r\n\r\n<img width=\"2032\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/5893857\/81e84906-5dca-42a9-a23b-39b5adca1665\">\r\n\r\nThe same can be seen on the latest v4.3 build (dev5).\r\n\r\nI looked at the [v4.3-dev3 changelog](https:\/\/godotengine.github.io\/godot-interactive-changelog\/#4.3-dev3) and saw that there's a change that was made to the default bit depth for the depth buffer when using the Forward+ renderer. Seems like it could be related? https:\/\/github.com\/godotengine\/godot\/pull\/87057\r\n\r\nAnyway, this solves my personal use case, so I'm happy, but I will leave this issue open since it appears that there is still a bug affecting the Mobile render method."],"labels":["topic:rendering","needs testing","topic:3d"]},{"title":"Pathfinding doesn't produce shortest path on vertical surfaces","body":"### Tested versions\n\nTested in 4.2.1\n\n### System information\n\nGodot v4.2.1.stable - Linux Mint 21.3 (Virginia) - X11 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1070 (nvidia; 545.29.06) - AMD Ryzen 5 3600 6-Core Processor (12 Threads)\n\n### Issue description\n\n3D pathfinding doesn't seem to produce the shortest path when you have vertical surfaces, often snapping to corners instead of going directly to the destination.\r\n![path1](https:\/\/github.com\/godotengine\/godot\/assets\/2514990\/3923d562-30d5-410e-9adc-e8a89743a15c)\r\n![path2](https:\/\/github.com\/godotengine\/godot\/assets\/2514990\/9eef06de-3fc1-4d4f-8965-27138b96b468)\r\nThis is using NavigationServer3D.map_get_path with optimized=true (but results are similar with optimized=false). The navigation mesh was made in blender since it doesn't seem to be possible to bake a navigation mesh with vertical surfaces.\n\n### Steps to reproduce\n\n1. Make a navigation mesh with some vertical surfaces.\r\n2. Call NavigationServer3D.map_get_path between two points on walls.\r\n3. Observe results.\n\n### Minimal reproduction project (MRP)\n\n[aaru-minimal.zip](https:\/\/github.com\/godotengine\/godot\/files\/14658151\/aaru-minimal.zip)","comments":["> Make a navigation mesh with some vertical surfaces.\r\n\r\nNo because it is not supported.\r\n\r\nA navigation mesh is a resource, it has no transform, it always needs to face towards the default up vector, hence why it is also not supported in any other way by the baking.\r\n\r\nWhat can be changed are the region transforms and the navigation map up vector but not the mesh.\r\n\r\nThe regions still need to stay within an angular limit towards the current navigation map up or else things will start to break.\r\n\r\n![nav_mesh_orientation](https:\/\/github.com\/godotengine\/godot\/assets\/52464204\/5c8f6484-c8e7-455e-a9af-8c5c588ea475)\r\n\r\n","> No because it is not supported.\r\n\r\nAh ok. I didn't see this restriction documented. Is this because the 3D pathfinding is actually like 2D but projected onto a 3D surface or something?\r\n\r\nFor my use case, I don't think simply rotating the up vector would work since the nav mesh connects together all the walls and the floor.","> Is this because the 3D pathfinding is actually like 2D but projected onto a 3D surface or something?\r\n\r\nThe two-dimensional navmesh surfaces can still be layered in 3D, they just can not overlap or intersect.\r\n\r\nThe baking is done with a voxel grid using span logic and y-axis aligned layers so it is a technical limit that it can not be rotated.\r\n\r\nThe pathfinding has calculations where vertical overlap starts to break things e.g. with path clipping or angles. That is why the orientation of all navmesh surfaces can not be rotated at or over 90\u00b0 away from the navigatio map up.\r\n\r\nNow having pathfinding for ground, wall and ceiliing is possible, just not with the default NavigationAgent.\r\nYou basically use a navigation map for each major orientation and a waypoint system, e.g. AStar3D, for the general path.\r\n\r\nQuery the general path with the waypoints and the more detailed path from the navigation map that fits the current waypoint orientation."],"labels":["topic:navigation"]},{"title":"Fix documentation for receiving light from light probes","body":"For geometry to receive light from lightmap's light probes its global illumination mode needs to be set to Dynamic.","comments":["here's a Godot project to test it out, try changing the GI mode on the sphere and move it around:\r\n[lightmap_probe.zip](https:\/\/github.com\/godotengine\/godot\/files\/14669125\/lightmap_probe.zip)\r\n"],"labels":["enhancement","documentation"]},{"title":"PopupMenu horizontal margins in the editor theme became too low since 4.3.dev3","body":"### Tested versions\r\n\r\n- Reproducible in: 4.3.dev3, 4.3.dev4, 4.3.dev fe01776f05b1787b28b4a270d53037a3c25f4ca2\r\n- Not reproducible in: 4.2.1.stable, 4.3.dev2\r\n\r\n### System information\r\n\r\nGodot v4.3.dev (fe01776f05b1787b28b4a270d53037a3c25f4ca2) - Fedora Linux 39 (KDE Plasma) - Wayland - GLES3 (Compatibility) - NVIDIA GeForce RTX 4090 (nvidia; 545.29.06) - 13th Gen Intel(R) Core(TM) i9-13900K (32 Threads)\r\n\r\n### Issue description\r\n\r\nPopupMenu horizontal margins in the editor theme became too low since 4.3.dev3. This makes popups feel less consistent with the rest of the editor theme (and most other applications).\r\n\r\nLook at the space between the edge of the popup and the **New Scene** text:\r\n\r\n4.3.dev1 | 4.3.dev4\r\n-|-\r\n![editor_popupmenu_4 3 dev1](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/f241d416-37d5-4d30-b0c5-f94166c52ccd) | ![editor_popupmenu_4 3 dev4](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/7c57c0ea-5738-42fb-8d86-a95be47982aa)\r\n\r\nBack-and-forth animation to compare:\r\n\r\n![comparison webp](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/d5f055a9-a30b-4ab3-9c71-59e1564f26c5)\r\n\r\nI bisected the regression to dc3b07e5515f71ee4a0c55217b12e98e098ea3e9 (https:\/\/github.com\/godotengine\/godot\/pull\/87085). \r\n\r\nWhile we're at it, we may want to further increase this horizontal margin to make it closer to most other applications (example with a Qt dropdown on KDE Breeze theme):\r\n\r\n![qt_dropdown](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/1177cb8f-27a4-4599-9102-8df1dc7faa75)\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n- Open any popup or dropdown in the editor.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["bug","topic:editor","regression"]},{"title":"godot 4.3 dev5 on android is crashing when i try to start it","body":"### Tested versions\n\n- reproducible in godot 4.3 dev5 on android\n\n### System information\n\nAndroid 14 One Ui 6.0\n\n### Issue description\n\nI try to open the godot 4.3 dev5 that I installed in my phone and it just crashes and dont open\n\n### Steps to reproduce\n\nthe process i do is: i go to the godot org site and go to see the newest dev, i go install the apk file then i go and i install the apk on my phone, after this when i try to open it just crashes\n\n### Minimal reproduction project (MRP)\n\nits not an in editor bug","comments":["If you're able to compile from source, feel free to give PR #89703 a try to see if it fixes it. It only changes java code so it should be possible to test the fix in your android project without recompiling the native libraries."],"labels":["bug","platform:android","crash"]},{"title":"Add minimum width\/height to dialog buttons","body":"This makes buttons with short texts such as \"OK\" or \"Close\" easier to click, especially on a touchscreen.\r\n\r\nThis is exposed to projects via `buttons_min_width` and `buttons_min_height` theme items in AcceptDialog (and therefore ConfirmationDialog and FileDialog), with the default values being 0 to preserve compatibility with existing projects.\r\n\r\n## Preview\r\n\r\n### AcceptDialog\r\n\r\nBefore\r\n|-|\r\n![acceptdialog_before](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/d623883d-853c-45ff-8be5-72dc78247f0e)\r\n\r\nDefault | Compact | Spacious\r\n-|-|-\r\n![Default](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/ff8d5eaf-a80d-4360-8f4c-7899683b7c95) | ![Compact](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/924c4070-c517-4b0a-a42a-2cdfb2746f61) | ![Spacious](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/7989eba7-c069-4a6e-bb01-a1d57df1daa7)\r\n\r\n### ConfirmationDialog\r\n\r\nBefore\r\n|-|\r\n![confirmationdialog_before](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/6de0593d-1470-455f-ac76-d80e463fd818)\r\n\r\nDefault | Compact | Spacious\r\n-|-|-\r\n![Default](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/3b10d70d-e86c-49a7-bef7-1caec318f9de) | ![Compact](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/191e920f-9b48-4013-a912-c635fe432716) | ![Spacious](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/91751755-ada3-4483-ad7c-9a576b331c37)\r\n","comments":["> Unrelated: most dialog windows in godot are missing paddings\r\n\r\nSee https:\/\/github.com\/godotengine\/godot\/issues\/89718.","This doesn't play well with the `interface\/theme\/spacing_preset` editor setting (added in #87085). At least for the \"Compact\" preset it feels to not fit in.","> This doesn't play well with the `interface\/theme\/spacing_preset` editor setting (added in #87085). At least for the \"Compact\" preset it feels to not fit in.\r\n\r\nI've pushed an update that adjusts padding based on the spacing preset. Spacing with the Default preset was also reduced by a few pixels on both axes. See OP for updated screenshots.","> I've pushed an update that adjusts padding based on the spacing preset. Spacing with the Default preset was also reduced by a few pixels on both axes. See OP for updated screenshots.\r\n\r\nWay better now!\r\nTo me they still look big in the \"Compact\" preset but I guess that's the point of this PR. So should be fine as is. :slightly_smiling_face:\r\n\r\nYou also need to add docs for the added theme properties.\r\n"],"labels":["enhancement","topic:editor","usability","topic:gui"]},{"title":"Add navigation baking crash prevention mechanism","body":"This PR adds a mechanism (enabled by default) that interrupts navigation mesh baking if it's very likely to fail or crash the engine.\r\n\r\nThis mechanism can be disabled in the project settings.\r\n\r\n### Rationale:\r\n\r\nThe current problem is as follows - if the navmesh baking is likely to fail or crash the engine, the warning is being printed. In case of engine crash, this is of very little help as the developer probably won't see it anyway. It leads to numerous issues like https:\/\/github.com\/godotengine\/godot\/issues\/87267 being reported.\r\n\r\nSee https:\/\/chat.godotengine.org\/channel\/navigation?msg=ZkocD7ZRbaDgTRCoB","comments":[],"labels":["enhancement","topic:navigation"]},{"title":"Improve the editor native shader source visualizer","body":"- Use CodeEdit to enable features such as line numbers and minimap.\r\n- Enable syntax highlighting.\r\n- Use a fixed-width font.\r\n- Use the script editor settings.\r\n\r\nThe native shader source visualizer is the option from this dropdown:\r\n\r\n![inspector_option](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/9406d9e4-43f3-4bf8-b518-c86e516ce21a)\r\n\r\nPerformance (in terms of the time it takes for the dialog to open) is roughly the same as before.\r\n\r\n## Preview\r\n\r\n### Before\r\n\r\n![Before](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/e5cc21a9-fef9-4816-ab6c-aad844260710)\r\n\r\n### After\r\n\r\n![After](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/5cb756d9-7505-419a-928b-9a7ead425dc5)","comments":[],"labels":["enhancement","topic:editor","topic:shaders"]},{"title":"Unused parameters show underscore prefix in documentation","body":"### Tested versions\n\nv4.3.dev5.official\n\n### System information\n\nWindows 11, v4.3.dev5.official\n\n### Issue description\n\nWhen creating a virtual function in a base class, Godot creates a warning that parameters are unused and suggests prefixing them with `_`. However in the class' documentation the parameters include those underscores, which doesn't follow convention.\n\n### Steps to reproduce\n\nAdd this function to any class:\r\n```gdscript\r\nfunc _my_virtual_function(_unused: int) -> void:\r\n\tpass\r\n```\r\nCheck the class' documentation and see the parameter is named `_unused`.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["In my virtual (intended to be abstract) methods I suppress the warning instead:\r\n\r\n```\r\n@warning_ignore(\"unused_parameter\")\r\nfunc _my_virtual_function(unused: int) -> void:\r\n\tpass\r\n```\r\n","If\/when we add abstract methods (#82987), we can make an exception and not produce the `UNUSED_PARAMETER` warning."],"labels":["discussion","topic:gdscript","topic:editor","documentation"]},{"title":"Add instantiate_as_child method to PackedScene","body":"Figured this would be a nice quality of life addition since very often you would want to add an instantiated node to the tree right after instantiation. As of now you would have to add an extra line using add_child().\r\n\r\n* *Bugsquad edit, closes: https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9342*\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Please open a [proposal](https:\/\/github.com\/godotengine\/godot-proposals\/issues) to track the support and details of this feature :)","I don't feel like this is useful. The extra line makes the code more readable in my opinion.","I'd also add that I feel that the normal case is to do *something* with the instantiated node beyond just adding it, setting a position, modifying some value, etc., I'd say this case where you *just* add it is an exception\r\n\r\nBut let's wait for a proposal and continue the discussion there"],"labels":["enhancement","feature proposal","topic:core"]},{"title":"Always look for unique node names in owner if not found in owned nodes","body":"Makes unique node names work consistently for subscene root nodes.\r\n\r\nResolves #66536.\r\n\r\n\r\nIf this will be approved I'll follow up with with docs (in manual) update etc. later.","comments":["Marked for cherry-picking to 3.x (3.6), not sure whether should be done for 4.2, 3.5 etc."],"labels":["bug","topic:core","cherrypick:3.x"]},{"title":"Fix the initialization order for the iOS driver","body":"The problem is that we were initializating the main loop (SceneTree) when we were supposed to just set it.  Which would cascade into a series of issues, including having the EditorNode being flagged as \"inside_tree\" and having a tree, before it was supposed to.\r\n\r\nThis meant that some code would assume it was fully initialized, when\r\nit was not.   And this manifested as the project not being scanned for\r\nresources, which meant that during the importing, the resources would\r\nnot match using the uid path, and produce lots of errors.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","platform:ios","topic:porting"]},{"title":"Area2D's input_event signal doesn't work on Android in v4.3.dev5.official [89f70e98d] and master [fe01776]","body":"### Tested versions\n\n- Reproducible in v4.3.dev5.official [89f70e98d] and master [fe01776f05b1787b28b4a270d53037a3c25f4ca2]\r\n- Not reproducible in v4.2.1.stable.official [b09f793f5]\n\n### System information\n\nWindows 10 - Godot 4.3.dev5\/master - Forward+ (Vulkan)\n\n### Issue description\n\nArea2D's input_event signal doesn't work on Android in v4.3.dev5.official [89f70e98d] and master.\r\nWorks fine in 4.2.1.\n\n### Steps to reproduce\n\n1. Create a new project in latest master or 4.3.dev5.\r\n2. Add a Node2D as root node.\r\n3. Add a simple Label for debugging.\r\n4. Add Area2D with CollisionShape2D. Set it's size.\r\n5. Add script to Area2D and connect `input_event` signal to a new function.\r\n6. Set text of Debug Label in this new function.\r\n7. Install and setup Android templates.\r\n8. Test locally and see it work.\r\n9. One-click deploy to an Android phone.\r\n10. No inputs are detected.\n\n### Minimal reproduction project (MRP)\n\n- Reproducible MRPs:\r\n\t- v4.3.dev5.official [89f70e98d] - [Area2DInputTestAndroid-4.3-dev5.zip](https:\/\/github.com\/godotengine\/godot\/files\/14654874\/Area2DInputTestAndroid-4.3-dev5.zip)\r\n\t- master [fe01776f05b1787b28b4a270d53037a3c25f4ca2] - [Area2DInputTestAndroid-4.3-master.zip](https:\/\/github.com\/godotengine\/godot\/files\/14654884\/Area2DInputTestAndroid-4.3-master.zip)\r\n- Not reproducible MRPs:\r\n\t- v4.2.1.stable.official [b09f793f5] - [Area2DInputTestAndroid.zip](https:\/\/github.com\/godotengine\/godot\/files\/14654891\/Area2DInputTestAndroid.zip)","comments":["Sounds like:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/89641","> Sounds like:\r\n> \r\n>     * [physics_object_picking_first_only breaks mouse enter\/exit\/motion events #89641](https:\/\/github.com\/godotengine\/godot\/issues\/89641)\r\n\r\nLooks similar but not sure why it's only seen when exporting to Android in my case.\r\nWill test the MR linked in that ticket when I can.","MR https:\/\/github.com\/godotengine\/godot\/pull\/89643 linked to issue https:\/\/github.com\/godotengine\/godot\/issues\/89641 does not fix my issue.\r\nTested the changes locally. My issue is still reproduced on Android export(both with and without both `set_physics_object_picking_*` flags enabled) so this is probably a different issue.\r\n\r\nStill no workaround found so I'm blocked for now.","Tested some more and found that all 5 `CollisionObject2D`(inherited by Area2D) signals don't work on Android. Not just  `input_event` signal.\r\nIt also affects `StaticBody2D` which inherits `PhysicsBody2D`(that inherits CollisionObject2D like Area2D).","Finally found it after debugging it by adding and removing `get_tree().quit()` on `viewport.cpp`'s `_process_picking` function. Couldn't find any other way to debug Android only input issue.\r\n\r\nThe commit since which it broke seems to be https:\/\/github.com\/godotengine\/godot\/pull\/88992 \/ 99ba2519eaf79271c86b8a932ce185666fb79a37. A build with that commit reverted worked.\r\n\r\nThe issue seems to be that on Android, there is no first `NOTIFICATION_VP_MOUSE_ENTER`. That MR expects that notification before events can be enabled but that is not gonna happen on a touchscreen device.\r\nThis means `mouse_in_viewport` is stays false and viewport will ignore all possible pickable events.\r\n\r\nI guess this makes this ticket same as https:\/\/github.com\/godotengine\/godot\/issues\/89757."],"labels":["bug","needs testing","topic:input"]},{"title":"[GDExtension] Incorrect signature or documentation in generated gdextension_interface.h","body":"### Tested versions\n\nReproducible in 4.2.1.stable.mono.official.b09f793f5\n\n### System information\n\nGodot v4.2.1.stable.mono - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3070 (NVIDIA; 31.0.15.4665) - AMD Ryzen 7 5800X3D 8-Core Processor (16 Threads)\n\n### Issue description\n\nThe generated `gdextension_interface.h` file contains a function signature that incorrectly drops the `const` qualifier from its return value.\r\n\r\n```c\r\ntypedef GDExtensionTypePtr (*GDExtensionInterfacePackedColorArrayOperatorIndexConst)(\r\n\tGDExtensionConstTypePtr p_self, \r\n\tGDExtensionInt p_index);\r\n```\r\n\r\nThis function should return `GDExtensionConstTypePtr` to preserve the `const` qualifier on the input `p_self`. Additionally, this is the expected behaviour described in its documentation:\r\n\r\n```c\r\n\/**\r\n * @name packed_color_array_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a __const__ pointer to a color in a PackedColorArray.\r\n *\r\n * @param p_self A const pointer to a const PackedColorArray object.\r\n * @param p_index The index of the Color to get.\r\n *\r\n * @return A __const__ pointer to the requested Color.\r\n *\/\r\n```\r\n\r\nThere are a number of similar functions operating on various `PackedArray` types which do correctly return `const` qualified values. E.g.:\r\n\r\n* `packed_float32_array_operator_index_const`\r\n* `packed_float64_array_operator_index_const`\r\n* `packed_int32_array_operator_index_const`\r\n* etc.\n\n### Steps to reproduce\n\nGenerate the file using:\r\n\r\n```\r\ngodot --dump-gdextension-interface --headless\r\n```\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["Unsure why this was the case originally, but the change would have to be limited to changing the documentation, anything else would break compatibility","The same goes for:\r\n\r\n*  `packed_string_array_operator_index_const`. It should return `GDExtensionConstStringPtr `. \r\n* `packed_vector2_array_operator_index_const` which should both return `GDExtensionConstTypePtr `.\r\n* `packed_vector3_array_operator_index_const` which should both return `GDExtensionConstTypePtr `.\r\n* `array_operator_index_const` which should return `GDExtensionConstVariantPtr`.\r\n* `dictionary_operator_index_const` which should return `GDExtensionConstVariantPtr`.\r\n\r\n```c\r\n\/**\r\n * @name packed_string_array_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a const pointer to a string in a PackedStringArray.\r\n *\r\n * @param p_self A const pointer to a PackedStringArray object.\r\n * @param p_index The index of the String to get.\r\n *\r\n * @return A const pointer to the requested String.\r\n *\/\r\ntypedef GDExtensionStringPtr (*GDExtensionInterfacePackedStringArrayOperatorIndexConst)(\r\n\tGDExtensionConstTypePtr p_self, \r\n\tGDExtensionInt p_index);\r\n\r\n\r\n\/**\r\n * @name packed_vector2_array_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a const pointer to a Vector2 in a PackedVector2Array.\r\n *\r\n * @param p_self A const pointer to a PackedVector2Array object.\r\n * @param p_index The index of the Vector2 to get.\r\n *\r\n * @return A const pointer to the requested Vector2.\r\n *\/\r\ntypedef GDExtensionTypePtr (*GDExtensionInterfacePackedVector2ArrayOperatorIndexConst)(\r\n\tGDExtensionConstTypePtr p_self, \r\n\tGDExtensionInt p_index);\r\n\r\n\r\n\/**\r\n * @name packed_vector3_array_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a const pointer to a Vector3 in a PackedVector3Array.\r\n *\r\n * @param p_self A const pointer to a PackedVector3Array object.\r\n * @param p_index The index of the Vector3 to get.\r\n *\r\n * @return A const pointer to the requested Vector3.\r\n *\/\r\ntypedef GDExtensionTypePtr (*GDExtensionInterfacePackedVector3ArrayOperatorIndexConst)(\r\n\t\tGDExtensionConstTypePtr p_self,\r\n\t\tGDExtensionInt p_index);\r\n\r\n\/**\r\n * @name array_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a const pointer to a Variant in an Array.\r\n *\r\n * @param p_self A const pointer to an Array object.\r\n * @param p_index The index of the Variant to get.\r\n *\r\n * @return A const pointer to the requested Variant.\r\n *\/\r\ntypedef GDExtensionVariantPtr (*GDExtensionInterfaceArrayOperatorIndexConst)(\r\n\tGDExtensionConstTypePtr p_self, \r\n\tGDExtensionInt p_index);\r\n\r\n\r\n\/**\r\n * @name dictionary_operator_index_const\r\n * @since 4.1\r\n *\r\n * Gets a const pointer to a Variant in a Dictionary with the given key.\r\n *\r\n * @param p_self A const pointer to a Dictionary object.\r\n * @param p_key A pointer to a Variant representing the key.\r\n *\r\n * @return A const pointer to a Variant representing the value at the given key.\r\n *\/\r\ntypedef GDExtensionVariantPtr (*GDExtensionInterfaceDictionaryOperatorIndexConst)(\r\n\tGDExtensionConstTypePtr p_self, \r\n\tGDExtensionConstVariantPtr p_key);\r\n```"],"labels":["discussion","documentation","topic:gdextension"]},{"title":"FPS cap with V-Sync enabled is incorrect with multiple monitors with different refresh rates","body":"### Tested versions\n\n- Reproducible in 4.2.stable\r\n- Not reproducible in 3.5.3.stable\n\n### System information\n\nWindows 10\n\n### Issue description\n\nI have two monitors: one is 144Hz and the other is 60Hz. If I run an empty project with V-Sync enabled, the FPS is always capped at 144. Even if I drag the game window to my 60Hz monitor, the game is still capped at 144 FPS. This is different from Godot 3.5.3, where if I dragged the game window to my 60Hz monitor, the FPS cap would update to 60, which I believe should be the intended behavior.\r\nEven if I launch the game window on my 60Hz monitor by setting the initial_position_type in ProjectSettings, the FPS is still capped at 144 rather than 60.\n\n### Steps to reproduce\n\nCreate a new project with V-Sync enabled. Check the fps as you move the game window between two monitors with different refresh rates.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["Can you test this on 4.2.1 or [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/), or even better on [4.2.dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)? I know some issues with frame rate has been solved not too long ago","I just tried testing on 4.2.2.rc2 and 4.2.dev5 and the issue is present on both versions as well","> Can you test this on 4.2.1 or [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/), or even better on [4.2.dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)? I know some issues with frame rate has been solved not too long ago\r\n\r\nDo you mean 4.3dev5?\r\n\r\n---\r\n\r\n@bogcow Did you test on 4.3? Download: https:\/\/godotengine.org\/download\/archive\/","Oh, I meant to say 4.3.dev5, yes the issue is present on 4.3.dev5"],"labels":["bug","topic:rendering"]},{"title":"[Rendering] RendererRD allocates excessive RIDs","body":"### Tested versions\r\n\r\n4.x, at least in 4.2 and later, haven't checked code in 4.1 and prior\r\n\r\n### System information\r\n\r\nN\/A\r\n\r\n### Issue description\r\n\r\nAs seen in:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/89602\r\n\r\nThe renderer (Forward+ and Mobile only) allocates a lot of RIDs for seemingly simple operations, this isn't necessarily a problem but at least to me the general assumption is that RIDs won't be allocated unless you create or update some resource, adding or changing surfaces for meshes, updating shaders, etc. makes sense but in this case it feels excessive\r\n\r\nWhile the specific case above might be considered extreme it isn't obvious that there's a maximum number of polygons (or circles, or other things drawn with a polygon as backing) you can draw ever, until you hit RID exhaustion, at first I couldn't even figure out what was wrong in that case as it shouldn't have been exhausting these\r\n\r\nI'm not sure how to best solve this, but seeing how the data here is strictly internal to the renderer, and the RIDs won't pass to the user, I'd say it would be safe to re-use the RIDs and have a pool of them for drawing (i.e. reuse the storage, instead of freeing and allocating), if some alternative method for doing this entirely can't be done and avoid allocations entirely, I'm not fully familiar with the low level details on the ways to allow reusing these etc., but I imagine it should be possible \r\n\r\nI was trying to figure out how to solve this but the complexity of updating the data correctly was a bit too complex for my current understanding of the internals so I though I'd bring it to broader attention to discuss how to improve on it\r\n\r\nTl;Dr; the renderer allocates 4 RIDs every time you draw a circle, this exhausts them and makes just drawing a circle an action you can do a finite number of times, this is unexpected and hard to manage\r\n\r\nTo put this into perspective:\r\nIf you draw just 100 circles every frame, and render at 120 FPS, it takes just 12 hours to run out\r\n\r\n### Steps to reproduce\r\n\r\nN\/A\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["discussion","topic:rendering","topic:2d"]},{"title":"Simple check for _print_header before printing anything","body":"Check engine::_print_header before actually printing header info to the console.\r\n","comments":["As I suggested on the other PR I think this should be handled in `Engine` not here, so like:\r\n```diff\r\ndiff --git a\/core\/config\/engine.cpp b\/core\/config\/engine.cpp\r\nindex d714ec42c2..9f4bff3779 100644\r\n--- a\/core\/config\/engine.cpp\r\n+++ b\/core\/config\/engine.cpp\r\n@@ -266,6 +266,12 @@ void Engine::print_header(const String &p_string) const {\r\n        }\r\n }\r\n\r\n+void Engine::print_header_rich(const String &p_string) const {\r\n+       if (_print_header) {\r\n+               print_line_rich(p_string);\r\n+       }\r\n+}\r\n+\r\n void Engine::add_singleton(const Singleton &p_singleton) {\r\n        ERR_FAIL_COND_MSG(singleton_ptrs.has(p_singleton.name), vformat(\"Can't register singleton '%s' because it already exists.\", p_singleton.name));\r\n        singletons.push_back(p_singleton);\r\ndiff --git a\/core\/config\/engine.h b\/core\/config\/engine.h\r\nindex be7cd62f66..d1495b36c2 100644\r\n--- a\/core\/config\/engine.h\r\n+++ b\/core\/config\/engine.h\r\n@@ -126,6 +126,7 @@ public:\r\n        void set_print_error_messages(bool p_enabled);\r\n        bool is_printing_error_messages() const;\r\n        void print_header(const String &p_string) const;\r\n+       void print_header_rich(const String &p_string) const;\r\n\r\n        void set_frame_delay(uint32_t p_msec);\r\n        uint32_t get_frame_delay() const;\r\ndiff --git a\/main\/main.cpp b\/main\/main.cpp\r\nindex 9215f2e848..1b8a079d70 100644\r\n--- a\/main\/main.cpp\r\n+++ b\/main\/main.cpp\r\n@@ -398,15 +398,15 @@ void Main::print_header(bool p_rich) {\r\n        if (VERSION_TIMESTAMP > 0) {\r\n                \/\/ Version timestamp available.\r\n                if (p_rich) {\r\n-                       print_line_rich(\"\\u001b[38;5;39m\" + String(VERSION_NAME) + \"\\u001b[0m v\" + get_full_version_string() + \" (\" + Time::get_singleton()->get_datetime_string_from_unix_time(VERSION_TIMESTAMP, true) + \" UTC) - \\u001b[4m\" + String(VERSION_WEBSITE));\r\n+                       Engine::get_singleton()->print_header_rich(\"\\u001b[38;5;39m\" + String(VERSION_NAME) + \"\\u001b[0m v\" + get_full_version_string() + \" (\" + Time::get_singleton()->get_datetime_string_from_unix_time(VERSION_TIMESTAMP, true) + \" UTC) - \\u001b[4m\" + String(VERSION_WEBSITE));\r\n                } else {\r\n-                       print_line(String(VERSION_NAME) + \" v\" + get_full_version_string() + \" (\" + Time::get_singleton()->get_datetime_string_from_unix_time(VERSION_TIMESTAMP, true) + \" UTC) - \" + String(VERSION_WEBSITE));\r\n+                       Engine::get_singleton()->print_header(String(VERSION_NAME) + \" v\" + get_full_version_string() + \" (\" + Time::get_singleton()->get_datetime_string_from_unix_time(VERSION_TIMESTAMP, true) + \" UTC) - \" + String(VERSION_WEBSITE));\r\n                }\r\n        } else {\r\n                if (p_rich) {\r\n-                       print_line_rich(\"\\u001b[38;5;39m\" + String(VERSION_NAME) + \"\\u001b[0m v\" + get_full_version_string() + \" - \\u001b[4m\" + String(VERSION_WEBSITE));\r\n+                       Engine::get_singleton()->print_header_rich(\"\\u001b[38;5;39m\" + String(VERSION_NAME) + \"\\u001b[0m v\" + get_full_version_string() + \" - \\u001b[4m\" + String(VERSION_WEBSITE));\r\n                } else {\r\n-                       print_line(String(VERSION_NAME) + \" v\" + get_full_version_string() + \" - \" + String(VERSION_WEBSITE));\r\n+                       Engine::get_singleton()->print_header(String(VERSION_NAME) + \" v\" + get_full_version_string() + \" - \" + String(VERSION_WEBSITE));\r\n                }\r\n        }\r\n }\r\n```\r\n\r\nBut this might be sufficient, but I don't like accessing this value directly, it makes it so we depend on how this internal details is implemented, which is error prone (I'd personally prefer if we didn't even set the variable directly but used a method for it)"],"labels":["enhancement","discussion","topic:core"]},{"title":"Editor keeps crashing on Mac with M3 Pro","body":"### Tested versions\n\n- Reproducible: 4.2-stable, 4.2.1-stable, 4.2.2-rc1, 4.2.2-rc2\r\n- NOT reproducible: 4.3-dev4, 4.3-dev5\n\n### System information\n\nMacOS Sonoma 14.3.1 - M3 Pro\n\n### Issue description\n\nThe project explorer works, the editor keeps crashing after opening a project.\r\n\r\nThe following verbose output using 4.2.2-rc2 were it is crashing:\r\n```bash\r\n.\/Godot --verbose --path \/Users\/xxx\/gamedev\/sandbox --editor\r\n\r\nGodot Engine v4.2.2.rc2.official.c61a68614 - https:\/\/godotengine.org\r\nTextServer: Added interface \"Dummy\"\r\nTextServer: Added interface \"ICU \/ HarfBuzz \/ Graphite (Built-in)\"\r\n[mvk-info] MoltenVK version 1.2.0, supporting Vulkan version 1.2.231.\r\n        The following 83 Vulkan extensions are supported:\r\n                VK_KHR_16bit_storage v1\r\n                VK_KHR_8bit_storage v1\r\n                VK_KHR_bind_memory2 v1\r\n                VK_KHR_buffer_device_address v1\r\n                VK_KHR_create_renderpass2 v1\r\n                VK_KHR_dedicated_allocation v3\r\n                VK_KHR_depth_stencil_resolve v1\r\n                VK_KHR_descriptor_update_template v1\r\n                VK_KHR_device_group v4\r\n                VK_KHR_device_group_creation v1\r\n                VK_KHR_driver_properties v1\r\n                VK_KHR_dynamic_rendering v1\r\n                VK_KHR_external_fence v1\r\n                VK_KHR_external_fence_capabilities v1\r\n                VK_KHR_external_memory v1\r\n                VK_KHR_external_memory_capabilities v1\r\n                VK_KHR_external_semaphore v1\r\n                VK_KHR_external_semaphore_capabilities v1\r\n                VK_KHR_fragment_shader_barycentric v1\r\n                VK_KHR_get_memory_requirements2 v1\r\n                VK_KHR_get_physical_device_properties2 v2\r\n                VK_KHR_get_surface_capabilities2 v1\r\n                VK_KHR_imageless_framebuffer v1\r\n                VK_KHR_image_format_list v1\r\n                VK_KHR_maintenance1 v2\r\n                VK_KHR_maintenance2 v1\r\n                VK_KHR_maintenance3 v1\r\n                VK_KHR_multiview v1\r\n                VK_KHR_portability_subset v1\r\n                VK_KHR_push_descriptor v2\r\n                VK_KHR_relaxed_block_layout v1\r\n                VK_KHR_sampler_mirror_clamp_to_edge v3\r\n                VK_KHR_sampler_ycbcr_conversion v14\r\n                VK_KHR_separate_depth_stencil_layouts v1\r\n                VK_KHR_shader_draw_parameters v1\r\n                VK_KHR_shader_float_controls v4\r\n                VK_KHR_shader_float16_int8 v1\r\n                VK_KHR_shader_subgroup_extended_types v1\r\n                VK_KHR_spirv_1_4 v1\r\n                VK_KHR_storage_buffer_storage_class v1\r\n                VK_KHR_surface v25\r\n                VK_KHR_swapchain v70\r\n                VK_KHR_swapchain_mutable_format v1\r\n                VK_KHR_timeline_semaphore v2\r\n                VK_KHR_uniform_buffer_standard_layout v1\r\n                VK_KHR_variable_pointers v1\r\n                VK_EXT_buffer_device_address v2\r\n                VK_EXT_debug_marker v4\r\n                VK_EXT_debug_report v10\r\n                VK_EXT_debug_utils v2\r\n                VK_EXT_descriptor_indexing v2\r\n                VK_EXT_fragment_shader_interlock v1\r\n                VK_EXT_hdr_metadata v2\r\n                VK_EXT_host_query_reset v1\r\n                VK_EXT_image_robustness v1\r\n                VK_EXT_inline_uniform_block v1\r\n                VK_EXT_memory_budget v1\r\n                VK_EXT_metal_objects v1\r\n                VK_EXT_metal_surface v1\r\n                VK_EXT_post_depth_coverage v1\r\n                VK_EXT_private_data v1\r\n                VK_EXT_robustness2 v1\r\n                VK_EXT_sample_locations v1\r\n                VK_EXT_scalar_block_layout v1\r\n                VK_EXT_separate_stencil_usage v1\r\n                VK_EXT_shader_stencil_export v1\r\n                VK_EXT_shader_viewport_index_layer v1\r\n                VK_EXT_subgroup_size_control v2\r\n                VK_EXT_swapchain_colorspace v4\r\n                VK_EXT_texel_buffer_alignment v1\r\n                VK_EXT_texture_compression_astc_hdr v1\r\n                VK_EXT_vertex_attribute_divisor v3\r\n                VK_AMD_gpu_shader_half_float v2\r\n                VK_AMD_negative_viewport_height v1\r\n                VK_AMD_shader_image_load_store_lod v1\r\n                VK_AMD_shader_trinary_minmax v1\r\n                VK_IMG_format_pvrtc v1\r\n                VK_INTEL_shader_integer_functions2 v1\r\n                VK_GOOGLE_display_timing v1\r\n                VK_MVK_macos_surface v3\r\n                VK_MVK_moltenvk v36\r\n                VK_NV_fragment_shader_barycentric v1\r\n                VK_NV_glsl_shader v1\r\n[mvk-info] GPU device:\r\n                model: Apple M3 Pro\r\n                type: Integrated\r\n                vendorID: 0x106b\r\n                deviceID: 0xe0303ef\r\n                pipelineCacheUUID: 000027D8-0E03-03EF-0000-000000000000\r\n        supports the following Metal Versions, GPU's and Feature Sets:\r\n                Metal Shading Language 3.0\r\n                GPU Family Apple 7\r\n                GPU Family Apple 6\r\n                GPU Family Apple 5\r\n                GPU Family Apple 4\r\n                GPU Family Apple 3\r\n                GPU Family Apple 2\r\n                GPU Family Apple 1\r\n                GPU Family Mac 2\r\n                GPU Family Mac 1\r\n                GPU Family Common 3\r\n                GPU Family Common 2\r\n                GPU Family Common 1\r\n                macOS GPU Family 2 v1\r\n                macOS GPU Family 1 v4\r\n                macOS GPU Family 1 v3\r\n                macOS GPU Family 1 v2\r\n                macOS GPU Family 1 v1\r\n[mvk-info] Created VkInstance for Vulkan version 1.2.0, as requested by app, with the following 4 Vulkan extensions enabled:\r\n                VK_KHR_get_physical_device_properties2 v2\r\n                VK_KHR_surface v25\r\n                VK_EXT_debug_utils v2\r\n                VK_MVK_macos_surface v3\r\nVulkan devices:\r\n  #0: Apple Apple M3 Pro - Supported, Integrated\r\nVulkan API 1.2.231 - Forward+ - Using Vulkan Device #0: Apple - Apple M3 Pro\r\nOptional extension VK_KHR_fragment_shading_rate not found\r\nOptional extension VK_EXT_pipeline_creation_cache_control not found\r\nOptional extension VK_KHR_incremental_present not found\r\n- Vulkan Variable Rate Shading not supported\r\n- Vulkan multiview supported:\r\n  max view count: 32\r\n  max instances: 134217727\r\n- Vulkan subgroup:\r\n  size: 32\r\n  min size: 32\r\n  max size: 32\r\n  stages: STAGE_TESSELLATION_CONTROL, STAGE_FRAGMENT, STAGE_COMPUTE\r\n  supported ops: FEATURE_BASIC, FEATURE_VOTE, FEATURE_ARITHMETIC, FEATURE_BALLOT, FEATURE_SHUFFLE, FEATURE_SHUFFLE_RELATIVE, FEATURE_QUAD\r\n  quad operations in all stages\r\n[mvk-info] Vulkan semaphores using MTLEvent.\r\n[mvk-info] Created VkDevice to run on GPU Apple M3 Pro with the following 10 Vulkan extensions enabled:\r\n                VK_KHR_16bit_storage v1\r\n                VK_KHR_create_renderpass2 v1\r\n                VK_KHR_image_format_list v1\r\n                VK_KHR_maintenance2 v1\r\n                VK_KHR_multiview v1\r\n                VK_KHR_shader_float16_int8 v1\r\n                VK_KHR_storage_buffer_storage_class v1\r\n                VK_KHR_swapchain v70\r\n                VK_EXT_subgroup_size_control v2\r\n                VK_GOOGLE_display_timing v1\r\n[mvk-info] Created 3 swapchain images with initial size (1152, 648) and contents scale 1.0 for screen Odyssey G95C.\r\n[mvk-info] Created 3 swapchain images with initial size (1152, 648) and contents scale 1.0 for screen Odyssey G95C.\r\n[mvk-info] Created 3 swapchain images with initial size (5120, 1324) and contents scale 1.0 for screen Odyssey G95C.\r\n[mvk-info] Created 3 swapchain images with initial size (5120, 1324) and contents scale 1.0 for screen Odyssey G95C.\r\nStartup PSO cache (0.0 MiB)\r\nUsing \"default\" pen tablet driver...\r\nCreating VMA small objects pool for memory type index 0\r\nShader 'CanvasSdfShaderRD' (group 0) SHA256: ea9b46725b8b302b6aea958cc47276150534c5574a40ff8eb5ca24d1efc09966\r\nShader 'SkeletonShaderRD' (group 0) SHA256: a84d0878115d8c56d9e1332e9b0e6b48abb1e054969165ba0f083a9afa26905b\r\nShader 'SortShaderRD' (group 0) SHA256: c21c0491291ca85e3b471ef0198c34a9ec09dbbb8d93de327d01ef2f12a2e985\r\nShader 'ParticlesShaderRD' (group 0) SHA256: b411bf7a4125145b41b388882a04f9e4089593f3f903f5ece28e201ca92d610d\r\nShader 'ParticlesCopyShaderRD' (group 0) SHA256: 744cea0f1a2d5c4368b4df7dcd11837ec90b23042fb7f8f5ac3cdcf31b0c567f\r\nShader 'CanvasShaderRD' (group 0) SHA256: afd3500036b2c3df3f7182c482cd0f1e4bc83f64427b0f5858b61d7821454471\r\nShader 'CanvasOcclusionShaderRD' (group 0) SHA256: 0042e111f16be08b98d2821a322de1eea192741e7ccaca290a9194a79246f069\r\nShader 'ClusterRenderShaderRD' (group 0) SHA256: 68a40dbe710cfa755dfa7854ed76ff5869517ee4c7c0d4d28060affdc079d81e\r\nShader 'ClusterStoreShaderRD' (group 0) SHA256: 009b8bd9311eff2b92edd2b87f4a1f29ee722e710c29634c9c6ff988e6078b59\r\nShader 'ClusterDebugShaderRD' (group 0) SHA256: 62d06a57a622d96abcb523849fb7605554ae1e7b95c3ac9f85c8d24672bd51a7\r\nShader 'SceneForwardClusteredShaderRD' (group 0) SHA256: 6415e21d1844838904776265622244c4c596362111d1bd3dcb4f49fa0d973ead\r\nShader 'SceneForwardClusteredShaderRD' (group 1) SHA256: 0676dd3932f68078d6d6cc30afa5e28b9248bda73c4d25ad788b13edb5f2a6a9\r\nShader 'SceneForwardClusteredShaderRD' (group 2) SHA256: ef19a9448eaf9a34818ff95f7cebc3dd8872f34a1a392ce2092a770fdbb11885\r\nShader 'SceneForwardClusteredShaderRD' (group 3) SHA256: 5ccf19e98cb037d0a469aa3d07d1f268a21fc6e1b0cc92f8303f017d39725016\r\nShader 'ResolveShaderRD' (group 0) SHA256: 0f39763446f0877341b19c91d76a7766d452c54f9103f34567c032369ff74590\r\nShader 'TaaResolveShaderRD' (group 0) SHA256: 229eeb3ebc03f3319348badd578a3b3d189d66c8f98c3f97bf22740eae982917\r\nShader 'Fsr2DepthClipPassShaderRD' (group 0) SHA256: e89fe6a4e3a94bfd2bdcd2cc5fbddeaff40fbfa1143b79c81e3fd49477758ddb\r\nShader 'Fsr2ReconstructPreviousDepthPassShaderRD' (group 0) SHA256: 1bb3095757fab3efb5fa1384a45c7d49db2adf59c68131fa5a1a85c30a3ab9b4\r\nShader 'Fsr2LockPassShaderRD' (group 0) SHA256: 1e6820b418502eb34a5aab8a7152cd70ce5c814eef516179e91fc25dccaae252\r\nShader 'Fsr2AccumulatePassShaderRD' (group 0) SHA256: a4215fdd01d9a9a92fcb7daaad586c0fe5ed1be6024ac0ec5d3b293a5aea6651\r\nShader 'Fsr2RcasPassShaderRD' (group 0) SHA256: 3a5a41e510d44fb91c34dc52517de8494151e297b631406b2fe1b900d7d2fbb1\r\nShader 'Fsr2ComputeLuminancePyramidPassShaderRD' (group 0) SHA256: a7aa3788daed0b858817b1f9667376b368f1aafc699988ce050a11cd3c2d4682\r\nShader 'Fsr2AutogenReactivePassShaderRD' (group 0) SHA256: eeaebbf97696d49ad1eb7a48cc587d75f97eeccdec234a84a67a2cc48a7c3d13\r\nShader 'Fsr2TcrAutogenPassShaderRD' (group 0) SHA256: 19721d6cf905c7d3a9079abb15d9fe015d59d2e89b7074259b096a5dd5ea251a\r\nShader 'SsEffectsDownsampleShaderRD' (group 0) SHA256: 8139ac1284e66637884421ab34583afb71b656a367b1c43a2c14253358f78184\r\nShader 'SsilShaderRD' (group 0) SHA256: 3f628790da5746ac5cf63deb99c632bde3cb4c9c21ba17c29b15a4ad0d40c331\r\nShader 'SsilImportanceMapShaderRD' (group 0) SHA256: 13d9183bde0b2bf9561c616f3ce152eda4b2707d3a4f46c5dec0712c2f30d694\r\nShader 'SsilBlurShaderRD' (group 0) SHA256: 1d500747d6fc1bb397105be1cffe95adcb2dbfc8c5eaf28075f5065eee754f3a\r\nShader 'SsilInterleaveShaderRD' (group 0) SHA256: 77901929ef1e3db797eec23d965b3975000bbb7aa7d60775c84672a7dc283d45\r\nShader 'SsaoShaderRD' (group 0) SHA256: fc519b2730bc6307ebea302c3c25ceb0100bf9382872ae52fe9f391b4f3c7801\r\nShader 'SsaoImportanceMapShaderRD' (group 0) SHA256: d731d02f63d993ae56d4730e54807979ccb6eece1506f752e384cd6f6453b94a\r\nShader 'SsaoBlurShaderRD' (group 0) SHA256: 7e8ae8d6df76b142a8a1fe0feb8f7f0ccc5e38b6ab4d2c941e2e608dd28609a1\r\nShader 'SsaoInterleaveShaderRD' (group 0) SHA256: 794cb8aa731f30307d6dc42f317d9c4b378318fbcafbe89d509733181ebe8cc6\r\nShader 'ScreenSpaceReflectionScaleShaderRD' (group 0) SHA256: 8b6a8f215a1210a301bd2819908b1fc2db2b62aa317d3ed75e544e1cedef504d\r\nShader 'ScreenSpaceReflectionShaderRD' (group 0) SHA256: a65cd0c265b6879e4fbdfe2f68d7748ef73d8000a31943078f02799aa22874d9\r\nShader 'ScreenSpaceReflectionFilterShaderRD' (group 0) SHA256: a031ff93ee6c1c903e1757a5e478200ffe8d9f4357172476d24468b98d546e9c\r\nShader 'SubsurfaceScatteringShaderRD' (group 0) SHA256: d8d01be49c5d4aea53ae02fb62e065a4b1a887ff747458f2a1012f70c4c595a5\r\nShader 'SkyShaderRD' (group 0) SHA256: fffbe5df1d955c06de5cbfef9061ff9b97bd4eef529fc7fbed095f8cc6c4705e\r\nShader 'VoxelGiShaderRD' (group 0) SHA256: be391406d572b5d2926ff7ad0b5002f194c24d1381ceebb483e71dff9ede46cb\r\nShader 'VoxelGiDebugShaderRD' (group 0) SHA256: 6a3315a60d404eca50cf07ace12dd080259f9ac004c5da8ed94ca4931483c9de\r\nShader 'SdfgiPreprocessShaderRD' (group 0) SHA256: 0586dad8dec196be33ea053c9147541e747b67dc3026704d39b4ed2b3e12262b\r\nShader 'SdfgiDirectLightShaderRD' (group 0) SHA256: 407ae1150d5e1dae3909290bdadfd3d18f4748b170ee4e3459fc1a551264b993\r\nShader 'SdfgiIntegrateShaderRD' (group 0) SHA256: 19de9b97d5f6a074c0d953170a34b09b7b5cf607ac1241d6896b3f26f05018f3\r\nShader 'GiShaderRD' (group 0) SHA256: 29cffb88a998f11c9d406f616a1fe15b524165cddac7975e097495c0c26b988f\r\nShader 'SdfgiDebugShaderRD' (group 0) SHA256: fdd8ef671ccb7e1703ad456a51dde89c05362155ff7cbcf1af41f1360f61dfca\r\nShader 'SdfgiDebugProbesShaderRD' (group 0) SHA256: 658f2310775e775129c4a1c41a765ae74260a1615cbff88ed3f075e8fbc34d5f\r\nShader 'VolumetricFogShaderRD' (group 0) SHA256: cbd442ec0616a1b2f1bcc5282df211fb935ccf43fcd02a79906205879b2db8ad\r\nShader 'VolumetricFogProcessShaderRD' (group 0) SHA256: 4da02ec5644ca273b7bd0ccf9a46c1a8d20786a47ce742014e659cb07492b516\r\nShader 'BokehDofShaderRD' (group 0) SHA256: 876684666036ce1683acfb6ea1eb2212f5343bc33b70dd740d23e16124d34cb1\r\nShader 'CopyShaderRD' (group 0) SHA256: 30b15bf32bdb576b8d71802cc0c56d7297170824025c3b07b946bec7251a7e04\r\nShader 'CopyToFbShaderRD' (group 0) SHA256: 177736b1e2133cfe1a9cf8fe4eb1c44e0617ef11f4cae5aecf33fa00335e1878\r\nShader 'CubeToDpShaderRD' (group 0) SHA256: 917971276debfb91adf2e4e04c36fd188d29f82574ab1fb7512b448debab0645\r\nShader 'CubemapDownsamplerShaderRD' (group 0) SHA256: 671abb9a07fd7fe0ee3a5b8c3f3e8bfe84de284d5b722a823647f28930424588\r\nShader 'CubemapFilterShaderRD' (group 0) SHA256: 0751a793dae7ae46c593b6f36ed0a55b5f45d39c7a7ab5faca6803195487b311\r\nShader 'CubemapRoughnessShaderRD' (group 0) SHA256: 52d0e182014abfbf9fb458a2cda7738036ffd4da60d23a6a7550622c946c33bf\r\nShader 'SpecularMergeShaderRD' (group 0) SHA256: 523373878d3260f2f7efe9dad2016f7d4b75cdeac8029beaec59d6e041ac267a\r\nShader 'ShadowFrustumShaderRD' (group 0) SHA256: 96bf66ad0287f1c3319ceeb109eb366442c3eb1a28db7d75746a3fb93f5296c1\r\nShader 'MotionVectorsShaderRD' (group 0) SHA256: 7b1a008b9c6d78b9b2efd57f0a741bee452b14002e14ff03b32f9314fef48a3d\r\nShader 'LuminanceReduceShaderRD' (group 0) SHA256: 3f610513f0fca00d6c99f131ec6ec030bb3b87743c50bd4f7a51becd50ca6f0a\r\nShader 'TonemapShaderRD' (group 0) SHA256: fe060aca9b0d8f29796ca7fda0c7701ba7e535dc753e000944f18e3431c0b294\r\nShader 'FsrUpscaleShaderRD' (group 0) SHA256: 7743fc51a4372d908b0b7670632623605884f6d975be7da69f6d987bc530b716\r\nShader 'BlitShaderRD' (group 0) SHA256: 920491d943884c90ea284e5f682a2eb9ce2241a7e58ce535c8e94b9ad11cdc00\r\nCoreAudio: detected 2 channels\r\nCoreAudio: audio buffer frames: 512 calculated latency: 11ms\r\n \r\nTextServer: Primary interface set to: \"ICU \/ HarfBuzz \/ Graphite (Built-in)\".\r\n2024-03-19 14:13:22.764 Godot[21452:6279763] WARNING: AVCaptureDeviceTypeExternal is deprecated for Continuity Cameras. Please use AVCaptureDeviceTypeContinuityCamera and add NSCameraUseContinuityCameraDeviceType to your Info.plist.\r\nCameraServer: Registered camera HD Pro Webcam C920 with ID 1 and position 0 at index 0\r\nCameraServer: Registered camera Kamera von \u201eiPhone von Andreas\u201c with ID 2 and position 0 at index 1\r\nCameraServer: Registered camera FaceTime HD-Kamera with ID 3 and position 0 at index 2\r\nCORE API HASH: 1098519051\r\nEDITOR API HASH: 2078660547\r\nEditorSettings: Load OK!\r\nWARNING: Der Blend-Dateiimport ist in den Projekteinstellungen aktiviert, aber es wurde kein Blender-Pfad in den Editoreinstellungen festgelegt. Es werden keine Blend-Dateien importiert.\r\n     at: _editor_init (modules\/gltf\/register_types.cpp:63)\r\n[mvk-info] Created 3 swapchain images with initial size (5120, 1324) and contents scale 1.0 for screen Odyssey G95C.\r\n[mvk-info] Created 3 swapchain images with initial size (5120, 1296) and contents scale 1.0 for screen Odyssey G95C.\r\n[mvk-info] Created 3 swapchain images with initial size (5120, 1352) and contents scale 1.0 for screen Odyssey G95C.\r\nLoaded system CA certificates\r\nCreating VMA small objects pool for memory type index 1\r\nEditorSettings: Save OK!\r\nRegenerating editor help cache\r\nClass 'AbstractPolygon2DEditor' is not exposed, skipping.\r\nClass 'AbstractPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'ActionMapEditor' is not exposed, skipping.\r\nClass 'AnchorPresetPicker' is not exposed, skipping.\r\nClass 'AnimationBezierTrackEdit' is not exposed, skipping.\r\nClass 'AnimationLibraryEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace1DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace2DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendTreeEditor' is not exposed, skipping.\r\nClass 'AnimationNodeStateMachineEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTimelineEdit' is not exposed, skipping.\r\nClass 'AnimationTrackEditDefaultPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditor' is not exposed, skipping.\r\nClass 'AnimationTrackKeyEditEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeEditor' is not exposed, skipping.\r\nClass 'AnimationTreeEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeNodeEditorPlugin' is not exposed, skipping.\r\nClass 'AssetLibraryEditorPlugin' is not exposed, skipping.\r\nClass 'AtlasMergingDialog' is not exposed, skipping.\r\nClass 'AtlasTileProxyObject' is not exposed, skipping.\r\nClass 'AudioBusesEditorPlugin' is not exposed, skipping.\r\nClass 'AudioListener3DGizmoPlugin' is not exposed, skipping.\r\nClass 'AudioStreamEditorPlugin' is not exposed, skipping.\r\nClass 'AudioStreamImportSettings' is not exposed, skipping.\r\nClass 'AudioStreamPlayer3DGizmoPlugin' is not exposed, skipping.\r\nClass 'AudioStreamPreviewGenerator' is not exposed, skipping.\r\nClass 'AudioStreamRandomizerEditorPlugin' is not exposed, skipping.\r\nClass 'BackgroundProgress' is not exposed, skipping.\r\nClass 'BitMapEditorPlugin' is not exposed, skipping.\r\nClass 'BoneMapEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles2DEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles3DEditor' is not exposed, skipping.\r\nClass 'CPUParticles3DEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CSGShape3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Camera3DEditorPlugin' is not exposed, skipping.\r\nClass 'Camera3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditor' is not exposed, skipping.\r\nClass 'CanvasItemEditorPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditorViewport' is not exposed, skipping.\r\nClass 'CanvasItemMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'Cast2DEditor' is not exposed, skipping.\r\nClass 'Cast2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionObject3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditor' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionPolygon3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CollisionShape2DEditor' is not exposed, skipping.\r\nClass 'CollisionShape2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionShape3DGizmoPlugin' is not exposed, skipping.\r\nClass 'ConnectDialog' is not exposed, skipping.\r\nClass 'ConnectDialogBinds' is not exposed, skipping.\r\nClass 'ConnectionsDock' is not exposed, skipping.\r\nClass 'ControlEditorPlugin' is not exposed, skipping.\r\nClass 'ControlEditorPopupButton' is not exposed, skipping.\r\nClass 'ControlEditorPresetPicker' is not exposed, skipping.\r\nClass 'ControlEditorToolbar' is not exposed, skipping.\r\nClass 'CreateDialog' is not exposed, skipping.\r\nClass 'CurveEditorPlugin' is not exposed, skipping.\r\nClass 'CurvePreviewGenerator' is not exposed, skipping.\r\nClass 'DebugAdapterParser' is not exposed, skipping.\r\nClass 'DebugAdapterServer' is not exposed, skipping.\r\nClass 'DebuggerEditorPlugin' is not exposed, skipping.\r\nClass 'DecalGizmoPlugin' is not exposed, skipping.\r\nClass 'DefaultThemeEditorPreview' is not exposed, skipping.\r\nClass 'DependencyEditor' is not exposed, skipping.\r\nClass 'DependencyEditorOwners' is not exposed, skipping.\r\nClass 'DependencyErrorDialog' is not exposed, skipping.\r\nClass 'DependencyRemoveDialog' is not exposed, skipping.\r\nClass 'DirectoryCreateDialog' is not exposed, skipping.\r\nClass 'DynamicFontImportSettings' is not exposed, skipping.\r\nClass 'DynamicFontImportSettingsData' is not exposed, skipping.\r\nClass 'EditorAbout' is not exposed, skipping.\r\nClass 'EditorAssetLibrary' is not exposed, skipping.\r\nClass 'EditorAudioBus' is not exposed, skipping.\r\nClass 'EditorAudioBuses' is not exposed, skipping.\r\nClass 'EditorAudioMeterNotches' is not exposed, skipping.\r\nClass 'EditorAudioStreamPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorAutoloadSettings' is not exposed, skipping.\r\nClass 'EditorBitmapPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorBuildProfile' is not exposed, skipping.\r\nClass 'EditorBuildProfileManager' is not exposed, skipping.\r\nClass 'EditorDebuggerInspector' is not exposed, skipping.\r\nClass 'EditorDebuggerNode' is not exposed, skipping.\r\nClass 'EditorDebuggerRemoteObject' is not exposed, skipping.\r\nClass 'EditorDebuggerTree' is not exposed, skipping.\r\nClass 'EditorDirDialog' is not exposed, skipping.\r\nClass 'EditorExport' is not exposed, skipping.\r\nClass 'EditorExportGDScript' is not exposed, skipping.\r\n```\r\n\r\nThis is the verbose output from 4.3-dev5 were it is working:\r\n```bash\r\n .\/Godot --verbose --path \/Users\/xxx\/gamedev\/sandbox --editor\r\n\r\nGodot Engine v4.3.dev5.official.89f70e98d - https:\/\/godotengine.org\r\nTextServer: Added interface \"Dummy\"\r\nTextServer: Added interface \"ICU \/ HarfBuzz \/ Graphite (Built-in)\"\r\n[mvk-info] MoltenVK version 1.2.7, supporting Vulkan version 1.2.275.\r\n        The following 108 Vulkan extensions are supported:\r\n                VK_KHR_16bit_storage v1\r\n                VK_KHR_8bit_storage v1\r\n                VK_KHR_bind_memory2 v1\r\n                VK_KHR_buffer_device_address v1\r\n                VK_KHR_calibrated_timestamps v1\r\n                VK_KHR_copy_commands2 v1\r\n                VK_KHR_create_renderpass2 v1\r\n                VK_KHR_dedicated_allocation v3\r\n                VK_KHR_deferred_host_operations v4\r\n                VK_KHR_depth_stencil_resolve v1\r\n                VK_KHR_descriptor_update_template v1\r\n                VK_KHR_device_group v4\r\n                VK_KHR_device_group_creation v1\r\n                VK_KHR_driver_properties v1\r\n                VK_KHR_dynamic_rendering v1\r\n                VK_KHR_external_fence v1\r\n                VK_KHR_external_fence_capabilities v1\r\n                VK_KHR_external_memory v1\r\n                VK_KHR_external_memory_capabilities v1\r\n                VK_KHR_external_semaphore v1\r\n                VK_KHR_external_semaphore_capabilities v1\r\n                VK_KHR_fragment_shader_barycentric v1\r\n                VK_KHR_format_feature_flags2 v2\r\n                VK_KHR_get_memory_requirements2 v1\r\n                VK_KHR_get_physical_device_properties2 v2\r\n                VK_KHR_get_surface_capabilities2 v1\r\n                VK_KHR_imageless_framebuffer v1\r\n                VK_KHR_image_format_list v1\r\n                VK_KHR_incremental_present v2\r\n                VK_KHR_maintenance1 v2\r\n                VK_KHR_maintenance2 v1\r\n                VK_KHR_maintenance3 v1\r\n                VK_KHR_map_memory2 v1\r\n                VK_KHR_multiview v1\r\n                VK_KHR_portability_subset v1\r\n                VK_KHR_push_descriptor v2\r\n                VK_KHR_relaxed_block_layout v1\r\n                VK_KHR_sampler_mirror_clamp_to_edge v3\r\n                VK_KHR_sampler_ycbcr_conversion v14\r\n                VK_KHR_separate_depth_stencil_layouts v1\r\n                VK_KHR_shader_draw_parameters v1\r\n                VK_KHR_shader_float_controls v4\r\n                VK_KHR_shader_float16_int8 v1\r\n                VK_KHR_shader_non_semantic_info v1\r\n                VK_KHR_shader_subgroup_extended_types v1\r\n                VK_KHR_spirv_1_4 v1\r\n                VK_KHR_storage_buffer_storage_class v1\r\n                VK_KHR_surface v25\r\n                VK_KHR_swapchain v70\r\n                VK_KHR_swapchain_mutable_format v1\r\n                VK_KHR_synchronization2 v1\r\n                VK_KHR_timeline_semaphore v2\r\n                VK_KHR_uniform_buffer_standard_layout v1\r\n                VK_KHR_variable_pointers v1\r\n                VK_KHR_vertex_attribute_divisor v1\r\n                VK_EXT_4444_formats v1\r\n                VK_EXT_buffer_device_address v2\r\n                VK_EXT_calibrated_timestamps v2\r\n                VK_EXT_debug_marker v4\r\n                VK_EXT_debug_report v10\r\n                VK_EXT_debug_utils v2\r\n                VK_EXT_descriptor_indexing v2\r\n                VK_EXT_extended_dynamic_state v1\r\n                VK_EXT_extended_dynamic_state2 v1\r\n                VK_EXT_extended_dynamic_state3 v2\r\n                VK_EXT_external_memory_host v1\r\n                VK_EXT_fragment_shader_interlock v1\r\n                VK_EXT_hdr_metadata v2\r\n                VK_EXT_headless_surface v1\r\n                VK_EXT_host_query_reset v1\r\n                VK_EXT_image_robustness v1\r\n                VK_EXT_inline_uniform_block v1\r\n                VK_EXT_layer_settings v2\r\n                VK_EXT_memory_budget v1\r\n                VK_EXT_metal_objects v1\r\n                VK_EXT_metal_surface v1\r\n                VK_EXT_pipeline_creation_cache_control v3\r\n                VK_EXT_pipeline_creation_feedback v1\r\n                VK_EXT_post_depth_coverage v1\r\n                VK_EXT_private_data v1\r\n                VK_EXT_robustness2 v1\r\n                VK_EXT_sample_locations v1\r\n                VK_EXT_scalar_block_layout v1\r\n                VK_EXT_separate_stencil_usage v1\r\n                VK_EXT_shader_atomic_float v1\r\n                VK_EXT_shader_demote_to_helper_invocation v1\r\n                VK_EXT_shader_stencil_export v1\r\n                VK_EXT_shader_subgroup_ballot v1\r\n                VK_EXT_shader_subgroup_vote v1\r\n                VK_EXT_shader_viewport_index_layer v1\r\n                VK_EXT_subgroup_size_control v2\r\n                VK_EXT_surface_maintenance1 v1\r\n                VK_EXT_swapchain_colorspace v4\r\n                VK_EXT_swapchain_maintenance1 v1\r\n                VK_EXT_texel_buffer_alignment v1\r\n                VK_EXT_texture_compression_astc_hdr v1\r\n                VK_EXT_vertex_attribute_divisor v3\r\n                VK_AMD_gpu_shader_half_float v2\r\n                VK_AMD_negative_viewport_height v1\r\n                VK_AMD_shader_image_load_store_lod v1\r\n                VK_AMD_shader_trinary_minmax v1\r\n                VK_IMG_format_pvrtc v1\r\n                VK_INTEL_shader_integer_functions2 v1\r\n                VK_GOOGLE_display_timing v1\r\n                VK_MVK_macos_surface v3\r\n                VK_MVK_moltenvk v37\r\n                VK_NV_fragment_shader_barycentric v1\r\n                VK_NV_glsl_shader v1\r\n[mvk-info] GPU device:\r\n                model: Apple M3 Pro\r\n                type: Integrated\r\n                vendorID: 0x106b\r\n                deviceID: 0xe0303f1\r\n                pipelineCacheUUID: 66F6FF1E-0E03-03F1-0000-000000000000\r\n                GPU memory available: 12288 MB\r\n                GPU memory used: 0 MB\r\n        supports the following Metal Versions, GPU's and Feature Sets:\r\n                Metal Shading Language 3.1\r\n                GPU Family Apple 9\r\n                GPU Family Apple 8\r\n                GPU Family Apple 7\r\n                GPU Family Apple 6\r\n                GPU Family Apple 5\r\n                GPU Family Apple 4\r\n                GPU Family Apple 3\r\n                GPU Family Apple 2\r\n                GPU Family Apple 1\r\n                GPU Family Mac 2\r\n                GPU Family Mac 1\r\n                GPU Family Common 3\r\n                GPU Family Common 2\r\n                GPU Family Common 1\r\n                macOS GPU Family 2 v1\r\n                macOS GPU Family 1 v4\r\n                macOS GPU Family 1 v3\r\n                macOS GPU Family 1 v2\r\n                macOS GPU Family 1 v1\r\n[mvk-info] Created VkInstance for Vulkan version 1.2.0, as requested by app, with the following 4 Vulkan extensions enabled:\r\n                VK_KHR_get_physical_device_properties2 v2\r\n                VK_KHR_surface v25\r\n                VK_EXT_debug_utils v2\r\n                VK_EXT_metal_surface v1\r\nDevices:\r\n  #0: Apple Apple M3 Pro - Supported, Integrated\r\nOptional extension VK_KHR_fragment_shading_rate not found\r\n- Vulkan Variable Rate Shading not supported\r\n- Vulkan multiview supported:\r\n  max view count: 32\r\n  max instances: 134217727\r\n- Vulkan subgroup:\r\n  size: 32\r\n  min size: 32\r\n  max size: 32\r\n  stages: STAGE_TESSELLATION_CONTROL, STAGE_FRAGMENT, STAGE_COMPUTE\r\n  supported ops: FEATURE_BASIC, FEATURE_VOTE, FEATURE_ARITHMETIC, FEATURE_BALLOT, FEATURE_SHUFFLE, FEATURE_SHUFFLE_RELATIVE, FEATURE_QUAD\r\n  quad operations in all stages\r\n[mvk-info] Vulkan semaphores using MTLEvent.\r\n[mvk-info] Created VkDevice to run on GPU Apple M3 Pro with the following 10 Vulkan extensions enabled:\r\n                VK_KHR_16bit_storage v1\r\n                VK_KHR_create_renderpass2 v1\r\n                VK_KHR_image_format_list v1\r\n                VK_KHR_maintenance2 v1\r\n                VK_KHR_multiview v1\r\n                VK_KHR_shader_float16_int8 v1\r\n                VK_KHR_storage_buffer_storage_class v1\r\n                VK_KHR_swapchain v70\r\n                VK_EXT_pipeline_creation_cache_control v3\r\n                VK_EXT_subgroup_size_control v2\r\nVulkan 1.2.275 - Forward+ - Using Device #0: Apple - Apple M3 Pro\r\nStartup PSO cache (0.0 MiB)\r\nUsing present mode: Enabled\r\n[mvk-info] Created 3 swapchain images with size (5120, 1324) and contents scale 1.0 in layer CAMetalLayer: GodotContentView (0x145fcbea0) on screen Odyssey G95C.\r\nUsing \"default\" pen tablet driver...\r\nCreating VMA small objects pool for memory type index 0\r\nShader 'CanvasSdfShaderRD' (group 0) SHA256: 50b872a974aec3889a3c46484034547be3ae5c66be376bb26d9e41fc2dfea51f\r\nShader 'SkeletonShaderRD' (group 0) SHA256: 607a462b72063e8c81dc7b237e49cd81454f471f7734d024206ed6a3e8b68993\r\nShader 'SortShaderRD' (group 0) SHA256: 38e695caba4b4b8c258f70585b527f7af420b9a78fc6abfd8c9666382a1e42b4\r\nShader 'ParticlesShaderRD' (group 0) SHA256: 2f411ba3b39f7ab39f4625a87b147da82eedc705e4e4975e4c8e81c53b6c102f\r\nShader 'ParticlesCopyShaderRD' (group 0) SHA256: c5d6a54d674c5e0b2f309d5216079efca8b5db75064686b378deab853563469c\r\nShader 'CanvasShaderRD' (group 0) SHA256: aa0223a61e2028f75af004fb0838e4ccad30d4cfd12bef95ee70dfaf2d3e5f09\r\nShader 'CanvasOcclusionShaderRD' (group 0) SHA256: 0ebda9e6fb68a3680f50b0f32c878adae659cbe37053c19167d6aa372cd97649\r\nShader 'ClusterRenderShaderRD' (group 0) SHA256: 66d62439cbf66de7729cebaaf8b689a497d91f1a916a106c4fdbc8e558651536\r\nShader 'ClusterStoreShaderRD' (group 0) SHA256: 22cb06d54a244f7596b9c5c43dc5f8e985a89cbfd8b86870a5a22194851b99b2\r\nShader 'ClusterDebugShaderRD' (group 0) SHA256: 0974f8fc34db232b63b7b7141122af3cdf19f5e2c6f68715ca41e47b9427da8e\r\nShader 'SceneForwardClusteredShaderRD' (group 0) SHA256: d635add608e1da8fb70af370a80646257086170404cc8a8aa7c12540879ddbd6\r\nShader 'SceneForwardClusteredShaderRD' (group 1) SHA256: e40bdd0171ac96593aa1fcef2a90c3c20c125ab07d52958dfbac13b9647498b5\r\nShader 'SceneForwardClusteredShaderRD' (group 2) SHA256: 0d40f721b015004948303339676ff2a6316f7edcc3d28950c883d7f476f19f20\r\nShader 'SceneForwardClusteredShaderRD' (group 3) SHA256: 3eab3972e31b3dac2b5a725e49bbe1e7cde46e2979fd1a1aa8df2c627fefb060\r\nShader 'BestFitNormalShaderRD' (group 0) SHA256: e1d5b1a60c01777df51299e9744933b311f34285ad23ffad81ddb37119026aa0\r\nShader 'ResolveShaderRD' (group 0) SHA256: 7cf06ed16360fe2d2cf3b8d66537d50f8afe96c944758d0db5ee601e5d665042\r\nShader 'TaaResolveShaderRD' (group 0) SHA256: ce1881806a65b899e05ade34e0e69d29fe1093848ac5eb43a197eeab944f4432\r\nShader 'Fsr2DepthClipPassShaderRD' (group 0) SHA256: da63416457edd4fed220fe873d1c0536f9c039efce3e98bb698175a950e0afb0\r\nShader 'Fsr2ReconstructPreviousDepthPassShaderRD' (group 0) SHA256: 9efdb77db3576fc0327cfe528d54030032c4e4ef4e8f9bcc1a999098a6b1725e\r\nShader 'Fsr2LockPassShaderRD' (group 0) SHA256: f8068ae40e37e5281ddfec0dbd5eb1ac21b98b22ca6550c76ab6a5b7be4e766c\r\nShader 'Fsr2AccumulatePassShaderRD' (group 0) SHA256: cdc40dd222f3995cd441698b31f861eac847896f8b7fe2dbc6015165e9b8f2dc\r\nShader 'Fsr2RcasPassShaderRD' (group 0) SHA256: 90caf217641a4f7d7138ea545d5764b80a8a3ede84ca03980068cbd316fba288\r\nShader 'Fsr2ComputeLuminancePyramidPassShaderRD' (group 0) SHA256: 1739145850059e27ca62757f03ecef1fb26ac4f3a33a25517b4d707d3c301ac3\r\nShader 'Fsr2AutogenReactivePassShaderRD' (group 0) SHA256: c16de414129ac6ebab44fa90fbe29a1017a22039206c69c6f8cb5a5df6e74f75\r\nShader 'Fsr2TcrAutogenPassShaderRD' (group 0) SHA256: c5bb03fbcfd66ea6dee0c6b289f387924a31aff2a1afc4f721713f16e794a4ac\r\nShader 'SsEffectsDownsampleShaderRD' (group 0) SHA256: 7bad6d51527303478fb83c5040ed2ffecc51530225c2a46ffbc0c4526a935515\r\nShader 'SsilShaderRD' (group 0) SHA256: a5d78d99d26124605968faae03b30d65f0024a337329943ce3e9505b91d0a1c1\r\nShader 'SsilImportanceMapShaderRD' (group 0) SHA256: 45ac2b4d06543225d1e4e00de6effe6c9c908abcf5a14a685bb669d9dc46f120\r\nShader 'SsilBlurShaderRD' (group 0) SHA256: 15aadc46ab50f3fc28af6292eaa19a749dc2b0a3cd5f73e29a7c89de58635524\r\nShader 'SsilInterleaveShaderRD' (group 0) SHA256: d2676811b5bf2de306cfc2fa9b3b49c24fab8bd65d16e9d2dbec01a02420e6b0\r\nShader 'SsaoShaderRD' (group 0) SHA256: 13f0e3f379e153e983275a7dcc423ebc0c6a3afbdcb29bdc541ca7501bfebbe4\r\nShader 'SsaoImportanceMapShaderRD' (group 0) SHA256: 63176bbd97f52ffed67747e5c7da9966ac329ed267f41586477b63029516ecd5\r\nShader 'SsaoBlurShaderRD' (group 0) SHA256: de65ee4b8ebef45b0f6d26dfb10698529d30668405c43630f5af788c1f8381bb\r\nShader 'SsaoInterleaveShaderRD' (group 0) SHA256: fcbf0cd5856e1e0a0ba26a6e0b2ef3a6e03446a7f42e3288623e9a250bbf42c5\r\nShader 'ScreenSpaceReflectionScaleShaderRD' (group 0) SHA256: b7ff23f16d4b1f02ff0faa698817e9d1c3e43228e7f1d3bc3b373ed4d2a7f894\r\nShader 'ScreenSpaceReflectionShaderRD' (group 0) SHA256: 20c466c8e92198ec1d4eb7dbe0a1cf7961cbed48db1ed9becf7234fcc69a6131\r\nShader 'ScreenSpaceReflectionFilterShaderRD' (group 0) SHA256: 754e450fe74087cb0e005a2503957ebf2af3520840b4f4074f453cc42e4f2fd8\r\nShader 'SubsurfaceScatteringShaderRD' (group 0) SHA256: acc077c9eff729f9be7eb78215c7266cf81729ee5840fce76769ce1c7653c667\r\nShader 'SkyShaderRD' (group 0) SHA256: 6fda66cd38e38137fe7e113964aab5b3726fb0c1e1c97c9e5b7af85b4d69df20\r\nShader 'VoxelGiShaderRD' (group 0) SHA256: 58f145e2b365e4920cd2fd8c52257ab28ed719dec794b583011ffed06a343f9f\r\nShader 'VoxelGiDebugShaderRD' (group 0) SHA256: 37b3a801eb69068d866256b5d7b167e6cc39b2d9ed740d4ca3a3ba994d1868d5\r\nShader 'SdfgiPreprocessShaderRD' (group 0) SHA256: 2e7e73d018d35d8bc3373ba83f9e69977e8ade27f299b7eaaeb11daa1563dccf\r\nShader 'SdfgiDirectLightShaderRD' (group 0) SHA256: 5940757f5b78307e4d6d144a879aeb5e7f6e96eadbc49179e6cade485ed56c22\r\nShader 'SdfgiIntegrateShaderRD' (group 0) SHA256: c2a252256d37294e19c16c4807ff70174166bb713a286f0b6a458e727022ad22\r\nShader 'GiShaderRD' (group 0) SHA256: bd17ee3960865e886b625a7c544be7fb7303e012527b0e515c09601ff05baa57\r\nShader 'SdfgiDebugShaderRD' (group 0) SHA256: 2ebe374a439b24c409a43732d871f341d0f45f305dd4ca75c1f90d2fa22006d7\r\nShader 'SdfgiDebugProbesShaderRD' (group 0) SHA256: d281fe853c825eb2c5c6ef4a8592e7288511883506e848f65eee97b952bb15a5\r\nShader 'VolumetricFogShaderRD' (group 0) SHA256: 2f91ed845d9905b0e758670e8a86b7f0fa2fbad667dacac927cb409b89282c92\r\nShader 'VolumetricFogProcessShaderRD' (group 0) SHA256: d77a441ee0d7e3cc49f73ea3b29ab813ff9ed73f7ff6f17bd0c8b457826da053\r\nShader 'BokehDofShaderRD' (group 0) SHA256: 48ef129b5f1bcda82c4690aa5421de284b0eecb75cfcba458ed2d467b21e12f8\r\nShader 'CopyShaderRD' (group 0) SHA256: 66d198ad28ba2910ee16d78dd44730cdc33df856930ad39f1b6aa2e47af05808\r\nShader 'CopyToFbShaderRD' (group 0) SHA256: a04b6d709f5b8d285d30cb132ddf5771205e9944041d4ae6b676a837c6465457\r\nShader 'CubeToDpShaderRD' (group 0) SHA256: 1a37b738b6c0ae94185c1170d3d64d4f5e3d2286aa25596e00c24ecbc5492493\r\nShader 'CubemapDownsamplerShaderRD' (group 0) SHA256: 9b77a233f11ed1538925e4a565feb4b9f774a04967238785fb40a6b4d06fee6f\r\nShader 'CubemapFilterShaderRD' (group 0) SHA256: 8a1cecd56ada9ff5406e30184b0bad11469227c857525dd161a3f931b3bbd988\r\nShader 'CubemapRoughnessShaderRD' (group 0) SHA256: 9a6653552e8cf12c927f57cb03d4f7c1a11f8d10d5752b9bbd9da3e3d6be7a8e\r\nShader 'SpecularMergeShaderRD' (group 0) SHA256: d8abb29989769b0c2e95b04ebd85e6fe8cc66abb7f67136708c2a68ec12eb45d\r\nShader 'ShadowFrustumShaderRD' (group 0) SHA256: d22e56608a6b25f7894a01a588f14e2205f53f941d9936b9297cbf9fcad878ae\r\nShader 'MotionVectorsShaderRD' (group 0) SHA256: 939b07e7fad7d4a3d9e4800993adb38735e92dda4c59037ccbba892846689ed9\r\nShader 'LuminanceReduceShaderRD' (group 0) SHA256: 49d53988c66ef7fc8b5398ee15349d9c2d075c165d18dc876b239d3dfa1623c4\r\nShader 'TonemapShaderRD' (group 0) SHA256: 505a2068c488354cc76a52fb73039e1acba423e35cdd087fcbdec52c3c7b3778\r\nShader 'FsrUpscaleShaderRD' (group 0) SHA256: 5d892c31f7428e335be2498a0515cca6c5e181088373b8edfa08faf0bda72167\r\nShader 'BlitShaderRD' (group 0) SHA256: 396acf2e3e09605c3574f3d66637b3f602e874bfe886394705e7652ecf41f1df\r\nCoreAudio: detected 2 channels\r\nCoreAudio: audio buffer frames: 512 calculated latency: 11ms\r\n\r\nTextServer: Primary interface set to: \"ICU \/ HarfBuzz \/ Graphite (Built-in)\".\r\n2024-03-19 14:20:14.582 Godot[22303:6288061] WARNING: AVCaptureDeviceTypeExternal is deprecated for Continuity Cameras. Please use AVCaptureDeviceTypeContinuityCamera and add NSCameraUseContinuityCameraDeviceType to your Info.plist.\r\nCameraServer: Registered camera HD Pro Webcam C920 with ID 1 and position 0 at index 0\r\nCameraServer: Registered camera Kamera von \u201eiPhone von Andreas\u201c with ID 2 and position 0 at index 1\r\nCameraServer: Registered camera FaceTime HD-Kamera with ID 3 and position 0 at index 2\r\nCORE API HASH: 3529421327\r\nEDITOR API HASH: 112094815\r\nEditorSettings: Load OK!\r\nEditorTheme: Generating new theme for the config '66886095'.\r\nEditorTheme: Generating new icons.\r\nEditorTheme: Generating new fonts.\r\nEditorTheme: Generating new styles.\r\nLoaded system CA certificates\r\nEditorSettings: Save OK!\r\nRegenerating editor help cache\r\nClass 'AbstractPolygon2DEditor' is not exposed, skipping.\r\nClass 'AbstractPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'ActionMapEditor' is not exposed, skipping.\r\nClass 'AnchorPresetPicker' is not exposed, skipping.\r\nClass 'AnimationBezierTrackEdit' is not exposed, skipping.\r\nClass 'AnimationLibraryEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace1DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendSpace2DEditor' is not exposed, skipping.\r\nClass 'AnimationNodeBlendTreeEditor' is not exposed, skipping.\r\nClass 'AnimationNodeStateMachineEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditor' is not exposed, skipping.\r\nClass 'AnimationPlayerEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTimelineEdit' is not exposed, skipping.\r\nClass 'AnimationTrackEditDefaultPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditPlugin' is not exposed, skipping.\r\nClass 'AnimationTrackEditor' is not exposed, skipping.\r\nClass 'AnimationTrackKeyEditEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeEditor' is not exposed, skipping.\r\nClass 'AnimationTreeEditorPlugin' is not exposed, skipping.\r\nClass 'AnimationTreeNodeEditorPlugin' is not exposed, skipping.\r\nClass 'AssetLibraryEditorPlugin' is not exposed, skipping.\r\nClass 'AtlasMergingDialog' is not exposed, skipping.\r\nClass 'AtlasTileProxyObject' is not exposed, skipping.\r\nClass 'AudioBusesEditorPlugin' is not exposed, skipping.\r\nClass 'AudioListener3DGizmoPlugin' is not exposed, skipping.\r\nClass 'AudioStreamEditorPlugin' is not exposed, skipping.\r\nClass 'AudioStreamImportSettingsDialog' is not exposed, skipping.\r\nClass 'AudioStreamInteractiveEditorPlugin' is not exposed, skipping.\r\nClass 'AudioStreamInteractiveTransitionEditor' is not exposed, skipping.\r\nClass 'AudioStreamPlayer3DGizmoPlugin' is not exposed, skipping.\r\nClass 'AudioStreamPlayerInternal' is not exposed, skipping.\r\nClass 'AudioStreamPreviewGenerator' is not exposed, skipping.\r\nClass 'AudioStreamRandomizerEditorPlugin' is not exposed, skipping.\r\nClass 'BackgroundProgress' is not exposed, skipping.\r\nClass 'BitMapEditorPlugin' is not exposed, skipping.\r\nClass 'BoneMapEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles2DEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles3DEditor' is not exposed, skipping.\r\nClass 'CPUParticles3DEditorPlugin' is not exposed, skipping.\r\nClass 'CPUParticles3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CSGShape3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Camera3DEditorPlugin' is not exposed, skipping.\r\nClass 'Camera3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditor' is not exposed, skipping.\r\nClass 'CanvasItemEditorPlugin' is not exposed, skipping.\r\nClass 'CanvasItemEditorViewport' is not exposed, skipping.\r\nClass 'CanvasItemMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'Cast2DEditor' is not exposed, skipping.\r\nClass 'Cast2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionObject3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditor' is not exposed, skipping.\r\nClass 'CollisionPolygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionPolygon3DGizmoPlugin' is not exposed, skipping.\r\nClass 'CollisionShape2DEditor' is not exposed, skipping.\r\nClass 'CollisionShape2DEditorPlugin' is not exposed, skipping.\r\nClass 'CollisionShape3DGizmoPlugin' is not exposed, skipping.\r\nClass 'ConnectDialog' is not exposed, skipping.\r\nClass 'ConnectDialogBinds' is not exposed, skipping.\r\nClass 'ConnectionsDock' is not exposed, skipping.\r\nClass 'ControlEditorPlugin' is not exposed, skipping.\r\nClass 'ControlEditorPopupButton' is not exposed, skipping.\r\nClass 'ControlEditorPresetPicker' is not exposed, skipping.\r\nClass 'ControlEditorToolbar' is not exposed, skipping.\r\nClass 'CreateDialog' is not exposed, skipping.\r\nClass 'CurveEditorPlugin' is not exposed, skipping.\r\nClass 'CurvePreviewGenerator' is not exposed, skipping.\r\nClass 'DebugAdapterParser' is not exposed, skipping.\r\nClass 'DebugAdapterServer' is not exposed, skipping.\r\nClass 'DebuggerEditorPlugin' is not exposed, skipping.\r\nClass 'DecalGizmoPlugin' is not exposed, skipping.\r\nClass 'DefaultThemeEditorPreview' is not exposed, skipping.\r\nClass 'DependencyEditor' is not exposed, skipping.\r\nClass 'DependencyEditorOwners' is not exposed, skipping.\r\nClass 'DependencyErrorDialog' is not exposed, skipping.\r\nClass 'DependencyRemoveDialog' is not exposed, skipping.\r\nClass 'DirectoryCreateDialog' is not exposed, skipping.\r\nClass 'DockSplitContainer' is not exposed, skipping.\r\nClass 'DynamicFontImportSettingsData' is not exposed, skipping.\r\nClass 'DynamicFontImportSettingsDialog' is not exposed, skipping.\r\nClass 'EditorAbout' is not exposed, skipping.\r\nClass 'EditorAssetLibrary' is not exposed, skipping.\r\nClass 'EditorAudioBus' is not exposed, skipping.\r\nClass 'EditorAudioBuses' is not exposed, skipping.\r\nClass 'EditorAudioMeterNotches' is not exposed, skipping.\r\nClass 'EditorAudioStreamPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorAutoloadSettings' is not exposed, skipping.\r\nClass 'EditorBitmapPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorBottomPanel' is not exposed, skipping.\r\nClass 'EditorBuildProfile' is not exposed, skipping.\r\nClass 'EditorBuildProfileManager' is not exposed, skipping.\r\nClass 'EditorDebuggerInspector' is not exposed, skipping.\r\nClass 'EditorDebuggerNode' is not exposed, skipping.\r\nClass 'EditorDebuggerRemoteObject' is not exposed, skipping.\r\nClass 'EditorDebuggerTree' is not exposed, skipping.\r\nClass 'EditorDirDialog' is not exposed, skipping.\r\nClass 'EditorDockManager' is not exposed, skipping.\r\nClass 'EditorExport' is not exposed, skipping.\r\nClass 'EditorExportGDScript' is not exposed, skipping.\r\nClass 'EditorFeatureProfileManager' is not exposed, skipping.\r\nClass 'EditorFileServer' is not exposed, skipping.\r\nClass 'EditorFileSystemImportFormatSupportQueryBlend' is not exposed, skipping.\r\nClass 'EditorFontPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorGradientPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorHelpBit' is not exposed, skipping.\r\nClass 'EditorHelpSearch' is not exposed, skipping.\r\nClass 'EditorImagePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorImportBlendRunner' is not exposed, skipping.\r\nClass 'EditorInspectorCategory' is not exposed, skipping.\r\nClass 'EditorInspectorDefaultPlugin' is not exposed, skipping.\r\nClass 'EditorInspectorParticleProcessMaterialPlugin' is not exposed, skipping.\r\nClass 'EditorInspectorPlugin3DTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginAnimationTrackKeyEdit' is not exposed, skipping.\r\nClass 'EditorInspectorPluginAudioStream' is not exposed, skipping.\r\nClass 'EditorInspectorPluginAudioStreamInteractive' is not exposed, skipping.\r\nClass 'EditorInspectorPluginBitMap' is not exposed, skipping.\r\nClass 'EditorInspectorPluginBoneMap' is not exposed, skipping.\r\nClass 'EditorInspectorPluginControl' is not exposed, skipping.\r\nClass 'EditorInspectorPluginCurve' is not exposed, skipping.\r\nClass 'EditorInspectorPluginFontPreview' is not exposed, skipping.\r\nClass 'EditorInspectorPluginFontVariation' is not exposed, skipping.\r\nClass 'EditorInspectorPluginGradient' is not exposed, skipping.\r\nClass 'EditorInspectorPluginGradientTexture2D' is not exposed, skipping.\r\nClass 'EditorInspectorPluginInputEvent' is not exposed, skipping.\r\nClass 'EditorInspectorPluginLayeredTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginMaterial' is not exposed, skipping.\r\nClass 'EditorInspectorPluginMesh' is not exposed, skipping.\r\nClass 'EditorInspectorPluginPackedScene' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSkeleton' is not exposed, skipping.\r\nClass 'EditorInspectorPluginStyleBox' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSubViewportPreview' is not exposed, skipping.\r\nClass 'EditorInspectorPluginSystemFont' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTexture' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTextureRegion' is not exposed, skipping.\r\nClass 'EditorInspectorPluginTileData' is not exposed, skipping.\r\nClass 'EditorInspectorRootMotionPlugin' is not exposed, skipping.\r\nClass 'EditorInspectorVisualShaderModePlugin' is not exposed, skipping.\r\nClass 'EditorJSONSyntaxHighlighter' is not exposed, skipping.\r\nClass 'EditorLayoutsDialog' is not exposed, skipping.\r\nClass 'EditorLocaleDialog' is not exposed, skipping.\r\nClass 'EditorLog' is not exposed, skipping.\r\nClass 'EditorMaterialPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorMeshPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorNativeShaderSourceVisualizer' is not exposed, skipping.\r\nClass 'EditorNetworkProfiler' is not exposed, skipping.\r\nClass 'EditorNode' is not exposed, skipping.\r\nClass 'EditorOBJImporter' is not exposed, skipping.\r\nClass 'EditorObjectSelector' is not exposed, skipping.\r\nClass 'EditorPackedScenePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorPerformanceProfiler' is not exposed, skipping.\r\nClass 'EditorPluginCSG' is not exposed, skipping.\r\nClass 'EditorPluginSettings' is not exposed, skipping.\r\nClass 'EditorProfiler' is not exposed, skipping.\r\nClass 'EditorPropertyCheck' is not exposed, skipping.\r\nClass 'EditorPropertyDictionaryObject' is not exposed, skipping.\r\nClass 'EditorPropertyInteger' is not exposed, skipping.\r\nClass 'EditorPropertyLocalizableString' is not exposed, skipping.\r\nClass 'EditorPropertyMultilineText' is not exposed, skipping.\r\nClass 'EditorPropertyNameProcessor' is not exposed, skipping.\r\nClass 'EditorPropertyPath' is not exposed, skipping.\r\nClass 'EditorPropertyResource' is not exposed, skipping.\r\nClass 'EditorPropertyText' is not exposed, skipping.\r\nClass 'EditorPropertyVector2i' is not exposed, skipping.\r\nClass 'EditorPropertyVectorN' is not exposed, skipping.\r\nClass 'EditorQuickOpen' is not exposed, skipping.\r\nClass 'EditorRunBar' is not exposed, skipping.\r\nClass 'EditorRunNative' is not exposed, skipping.\r\nClass 'EditorSceneExporterGLTFSettings' is not exposed, skipping.\r\nClass 'EditorSceneFormatImporterCollada' is not exposed, skipping.\r\nClass 'EditorSceneFormatImporterESCN' is not exposed, skipping.\r\nClass 'EditorSceneTabs' is not exposed, skipping.\r\nClass 'EditorScriptPreviewPlugin' is not exposed, skipping.\r\nClass 'EditorSettingsDialog' is not exposed, skipping.\r\nClass 'EditorTexturePreviewPlugin' is not exposed, skipping.\r\nClass 'EditorTextureTooltipPlugin' is not exposed, skipping.\r\nClass 'EditorTheme' is not exposed, skipping.\r\nClass 'EditorTitleBar' is not exposed, skipping.\r\nClass 'EditorToaster' is not exposed, skipping.\r\nClass 'EditorValidationPanel' is not exposed, skipping.\r\nClass 'EditorVisualProfiler' is not exposed, skipping.\r\nClass 'EditorZoomWidget' is not exposed, skipping.\r\nClass 'EventListenerLineEdit' is not exposed, skipping.\r\nClass 'ExportTemplateManager' is not exposed, skipping.\r\nClass 'FBXImporterManager' is not exposed, skipping.\r\nClass 'FileSystemList' is not exposed, skipping.\r\nClass 'FindInFiles' is not exposed, skipping.\r\nClass 'FindInFilesDialog' is not exposed, skipping.\r\nClass 'FindInFilesPanel' is not exposed, skipping.\r\nClass 'FindReplaceBar' is not exposed, skipping.\r\nClass 'FogMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'FogVolumeGizmoPlugin' is not exposed, skipping.\r\nClass 'FontEditorPlugin' is not exposed, skipping.\r\nClass 'GDScriptEditorTranslationParserPlugin' is not exposed, skipping.\r\nClass 'GDScriptLanguageServer' is not exposed, skipping.\r\nClass 'GDScriptNativeClass' is not exposed, skipping.\r\nClass 'GDScriptSyntaxHighlighter' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionPhysics' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionTextureKTX' is not exposed, skipping.\r\nClass 'GLTFDocumentExtensionTextureWebP' is not exposed, skipping.\r\nClass 'GPUParticles2DEditorPlugin' is not exposed, skipping.\r\nClass 'GPUParticles3DEditor' is not exposed, skipping.\r\nClass 'GPUParticles3DEditorBase' is not exposed, skipping.\r\nClass 'GPUParticles3DEditorPlugin' is not exposed, skipping.\r\nClass 'GPUParticles3DGizmoPlugin' is not exposed, skipping.\r\nClass 'GPUParticlesCollision3DGizmoPlugin' is not exposed, skipping.\r\nClass 'GPUParticlesCollisionSDF3DEditorPlugin' is not exposed, skipping.\r\nClass 'Gizmo3DHelper' is not exposed, skipping.\r\nClass 'GodotNavigationServer2D' is not exposed, skipping.\r\nClass 'GodotPhysicsServer2D' is not exposed, skipping.\r\nClass 'GodotPhysicsServer3D' is not exposed, skipping.\r\nClass 'GradientEditorPlugin' is not exposed, skipping.\r\nClass 'GradientTexture2DEditorPlugin' is not exposed, skipping.\r\nClass 'GraphEditFilter' is not exposed, skipping.\r\nClass 'GraphEditMinimap' is not exposed, skipping.\r\nClass 'GridMapEditor' is not exposed, skipping.\r\nClass 'GridMapEditorPlugin' is not exposed, skipping.\r\nClass 'GroupSettingsEditor' is not exposed, skipping.\r\nClass 'GroupsEditor' is not exposed, skipping.\r\nClass 'HistoryDock' is not exposed, skipping.\r\nClass 'IPUnix' is not exposed, skipping.\r\nClass 'ImportDefaultsEditor' is not exposed, skipping.\r\nClass 'ImportDefaultsEditorSettings' is not exposed, skipping.\r\nClass 'ImportDock' is not exposed, skipping.\r\nClass 'ImportDockParameters' is not exposed, skipping.\r\nClass 'InputEventConfigurationDialog' is not exposed, skipping.\r\nClass 'InputEventEditorPlugin' is not exposed, skipping.\r\nClass 'InspectorDock' is not exposed, skipping.\r\nClass 'Joint3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Label3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Light3DGizmoPlugin' is not exposed, skipping.\r\nClass 'LightOccluder2DEditor' is not exposed, skipping.\r\nClass 'LightOccluder2DEditorPlugin' is not exposed, skipping.\r\nClass 'LightmapGIEditorPlugin' is not exposed, skipping.\r\nClass 'LightmapGIGizmoPlugin' is not exposed, skipping.\r\nClass 'LightmapProbeGizmoPlugin' is not exposed, skipping.\r\nClass 'Line2DEditor' is not exposed, skipping.\r\nClass 'Line2DEditorPlugin' is not exposed, skipping.\r\nClass 'LocalizationEditor' is not exposed, skipping.\r\nClass 'Marker3DGizmoPlugin' is not exposed, skipping.\r\nClass 'MaterialEditorPlugin' is not exposed, skipping.\r\nClass 'MeshEditorPlugin' is not exposed, skipping.\r\nClass 'MeshInstance3DEditor' is not exposed, skipping.\r\nClass 'MeshInstance3DEditorPlugin' is not exposed, skipping.\r\nClass 'MeshInstance3DGizmoPlugin' is not exposed, skipping.\r\nClass 'MeshLibraryEditor' is not exposed, skipping.\r\nClass 'MeshLibraryEditorPlugin' is not exposed, skipping.\r\nClass 'MovieWriterMJPEG' is not exposed, skipping.\r\nClass 'MovieWriterPNGWAV' is not exposed, skipping.\r\nClass 'MultiMeshEditor' is not exposed, skipping.\r\nClass 'MultiMeshEditorPlugin' is not exposed, skipping.\r\nClass 'MultiplayerEditorDebugger' is not exposed, skipping.\r\nClass 'MultiplayerEditorPlugin' is not exposed, skipping.\r\nClass 'NativeMenuMacOS' is not exposed, skipping.\r\nClass 'NavigationLink2DEditor' is not exposed, skipping.\r\nClass 'NavigationLink2DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationLink3DGizmoPlugin' is not exposed, skipping.\r\nClass 'NavigationMeshEditor' is not exposed, skipping.\r\nClass 'NavigationMeshEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationObstacle2DEditor' is not exposed, skipping.\r\nClass 'NavigationObstacle2DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationObstacle3DEditor' is not exposed, skipping.\r\nClass 'NavigationObstacle3DEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationPolygonEditor' is not exposed, skipping.\r\nClass 'NavigationPolygonEditorPlugin' is not exposed, skipping.\r\nClass 'NavigationRegion3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Node3DEditor' is not exposed, skipping.\r\nClass 'Node3DEditorPlugin' is not exposed, skipping.\r\nClass 'Node3DEditorViewport' is not exposed, skipping.\r\nClass 'Node3DEditorViewportContainer' is not exposed, skipping.\r\nClass 'NodeDock' is not exposed, skipping.\r\nClass 'NoiseEditorInspectorPlugin' is not exposed, skipping.\r\nClass 'NoiseEditorPlugin' is not exposed, skipping.\r\nClass 'ORMMaterial3DConversionPlugin' is not exposed, skipping.\r\nClass 'OccluderInstance3DEditorPlugin' is not exposed, skipping.\r\nClass 'OccluderInstance3DGizmoPlugin' is not exposed, skipping.\r\nClass 'OrphanResourcesDialog' is not exposed, skipping.\r\nClass 'PackedSceneEditorPlugin' is not exposed, skipping.\r\nClass 'PackedSceneEditorTranslationParserPlugin' is not exposed, skipping.\r\nClass 'PanoramaSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'ParallaxBackgroundEditorPlugin' is not exposed, skipping.\r\nClass 'ParticleProcessMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'Path2DEditor' is not exposed, skipping.\r\nClass 'Path2DEditorPlugin' is not exposed, skipping.\r\nClass 'Path3DEditorPlugin' is not exposed, skipping.\r\nClass 'Path3DGizmoPlugin' is not exposed, skipping.\r\nClass 'PhysicalBone3DEditorPlugin' is not exposed, skipping.\r\nClass 'PhysicalBone3DGizmoPlugin' is not exposed, skipping.\r\nClass 'PhysicalSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'PluginConfigDialog' is not exposed, skipping.\r\nClass 'Polygon2DEditor' is not exposed, skipping.\r\nClass 'Polygon2DEditorPlugin' is not exposed, skipping.\r\nClass 'Polygon3DEditor' is not exposed, skipping.\r\nClass 'Polygon3DEditorPlugin' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonRenamer' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonRestFixer' is not exposed, skipping.\r\nClass 'PostImportPluginSkeletonTrackOrganizer' is not exposed, skipping.\r\nClass 'ProceduralSkyMaterialConversionPlugin' is not exposed, skipping.\r\nClass 'ProgressDialog' is not exposed, skipping.\r\nClass 'ProjectExportDialog' is not exposed, skipping.\r\nClass 'ProjectExportTextureFormatError' is not exposed, skipping.\r\nClass 'ProjectSettingsEditor' is not exposed, skipping.\r\nClass 'PropertySelector' is not exposed, skipping.\r\nClass 'RayCast3DGizmoPlugin' is not exposed, skipping.\r\nClass 'ReflectionProbeGizmoPlugin' is not exposed, skipping.\r\nClass 'RenameDialog' is not exposed, skipping.\r\nClass 'ReparentDialog' is not exposed, skipping.\r\nClass 'ReplicationEditor' is not exposed, skipping.\r\nClass 'ResourceFormatImporterSaver' is not exposed, skipping.\r\nClass 'ResourcePreloaderEditor' is not exposed, skipping.\r\nClass 'ResourcePreloaderEditorPlugin' is not exposed, skipping.\r\nClass 'RunInstancesDialog' is not exposed, skipping.\r\nClass 'SceneCacheInterface' is not exposed, skipping.\r\nClass 'SceneCreateDialog' is not exposed, skipping.\r\nClass 'SceneExporterGLTFPlugin' is not exposed, skipping.\r\nClass 'SceneImportSettingsData' is not exposed, skipping.\r\nClass 'SceneImportSettingsDialog' is not exposed, skipping.\r\nClass 'SceneRPCInterface' is not exposed, skipping.\r\nClass 'SceneReplicationInterface' is not exposed, skipping.\r\nClass 'SceneTileProxyObject' is not exposed, skipping.\r\nClass 'SceneTreeDialog' is not exposed, skipping.\r\nClass 'SceneTreeDock' is not exposed, skipping.\r\nClass 'SceneTreeEditor' is not exposed, skipping.\r\nClass 'ScreenSelect' is not exposed, skipping.\r\nClass 'ScriptEditorDebugger' is not exposed, skipping.\r\nClass 'ScriptEditorPlugin' is not exposed, skipping.\r\nClass 'SectionedInspector' is not exposed, skipping.\r\nClass 'SectionedInspectorFilter' is not exposed, skipping.\r\nClass 'ShaderCreateDialog' is not exposed, skipping.\r\nClass 'ShaderEditorPlugin' is not exposed, skipping.\r\nClass 'ShaderFileEditor' is not exposed, skipping.\r\nClass 'ShaderFileEditorPlugin' is not exposed, skipping.\r\nClass 'ShaderGlobalsEditor' is not exposed, skipping.\r\nClass 'ShaderGlobalsEditorInterface' is not exposed, skipping.\r\nClass 'ShapeCast3DGizmoPlugin' is not exposed, skipping.\r\nClass 'ShortcutBin' is not exposed, skipping.\r\nClass 'SizeFlagPresetPicker' is not exposed, skipping.\r\nClass 'Skeleton2DEditor' is not exposed, skipping.\r\nClass 'Skeleton2DEditorPlugin' is not exposed, skipping.\r\nClass 'Skeleton3DEditorPlugin' is not exposed, skipping.\r\nClass 'Skeleton3DGizmoPlugin' is not exposed, skipping.\r\nClass 'SkeletonIK3DEditorPlugin' is not exposed, skipping.\r\nClass 'SnapDialog' is not exposed, skipping.\r\nClass 'SoftBody3DGizmoPlugin' is not exposed, skipping.\r\nClass 'SplitContainerDragger' is not exposed, skipping.\r\nClass 'SpringArm3DGizmoPlugin' is not exposed, skipping.\r\nClass 'Sprite2DEditor' is not exposed, skipping.\r\nClass 'Sprite2DEditorPlugin' is not exposed, skipping.\r\nClass 'SpriteBase3DGizmoPlugin' is not exposed, skipping.\r\nClass 'SpriteFramesEditor' is not exposed, skipping.\r\nClass 'SpriteFramesEditorPlugin' is not exposed, skipping.\r\nClass 'StandardMaterial3DConversionPlugin' is not exposed, skipping.\r\nClass 'StyleBoxEditorPlugin' is not exposed, skipping.\r\nClass 'SubViewportPreviewEditorPlugin' is not exposed, skipping.\r\nClass 'SurfaceUpgradeDialog' is not exposed, skipping.\r\nClass 'SurfaceUpgradeTool' is not exposed, skipping.\r\nClass 'Texture3DEditorPlugin' is not exposed, skipping.\r\nClass 'TextureEditorPlugin' is not exposed, skipping.\r\nClass 'TextureLayeredEditorPlugin' is not exposed, skipping.\r\nClass 'TextureRegionEditor' is not exposed, skipping.\r\nClass 'TextureRegionEditorPlugin' is not exposed, skipping.\r\nClass 'ThemeContext' is not exposed, skipping.\r\nClass 'ThemeEditor' is not exposed, skipping.\r\nClass 'ThemeEditorPlugin' is not exposed, skipping.\r\nClass 'ThemeEditorPreview' is not exposed, skipping.\r\nClass 'ThemeItemEditorDialog' is not exposed, skipping.\r\nClass 'ThemeItemImportTree' is not exposed, skipping.\r\nClass 'ThemeTypeDialog' is not exposed, skipping.\r\nClass 'ThemeTypeEditor' is not exposed, skipping.\r\nClass 'TileAtlasView' is not exposed, skipping.\r\nClass 'TileMapEditorPlugin' is not exposed, skipping.\r\nClass 'TileMapLayerEditor' is not exposed, skipping.\r\nClass 'TileMapLayerEditorTerrainsPlugin' is not exposed, skipping.\r\nClass 'TileMapLayerEditorTilesPlugin' is not exposed, skipping.\r\nClass 'TileProxiesManagerDialog' is not exposed, skipping.\r\nClass 'TileSetAtlasSourceEditor' is not exposed, skipping.\r\nClass 'TileSetAtlasSourceProxyObject' is not exposed, skipping.\r\nClass 'TileSetEditor' is not exposed, skipping.\r\nClass 'TileSetEditorPlugin' is not exposed, skipping.\r\nClass 'TileSetScenesCollectionProxyObject' is not exposed, skipping.\r\nClass 'TileSetScenesCollectionSourceEditor' is not exposed, skipping.\r\nClass 'TileSourceInspectorPlugin' is not exposed, skipping.\r\nClass 'TilesEditorUtils' is not exposed, skipping.\r\nClass 'TranslationPO' is not exposed, skipping.\r\nClass 'VehicleWheel3DGizmoPlugin' is not exposed, skipping.\r\nClass 'VersionControlEditorPlugin' is not exposed, skipping.\r\nClass 'ViewPanner' is not exposed, skipping.\r\nClass 'ViewportNavigationControl' is not exposed, skipping.\r\nClass 'ViewportRotationControl' is not exposed, skipping.\r\nClass 'VisibleOnScreenNotifier3DGizmoPlugin' is not exposed, skipping.\r\nClass 'VisualShaderConversionPlugin' is not exposed, skipping.\r\nClass 'VoxelGIEditorPlugin' is not exposed, skipping.\r\nClass 'VoxelGIGizmoPlugin' is not exposed, skipping.\r\nClass 'WindowWrapper' is not exposed, skipping.\r\nUsing present mode: Enabled\r\n[mvk-info] Created 3 swapchain images with size (5120, 1352) and contents scale 1.0 in layer CAMetalLayer: GodotContentView (0x145fcbea0) on screen Odyssey G95C.\r\nUsing present mode: Enabled\r\n[mvk-info] Created 3 swapchain images with size (508, 110) and contents scale 1.0 in layer CAMetalLayer: GodotContentView (0x2a9c61fb0) on screen Odyssey G95C.\r\nEditorFileSystem: Importing file: res:\/\/icon.svg\r\nEditorFileSystem: \"res:\/\/icon.svg\" import took 3 ms.\r\nGenerated 'res:\/\/icon.svg' preview in 49415 usec\r\nUsing present mode: Enabled\r\n[mvk-info] Created 3 swapchain images with size (5120, 1352) and contents scale 1.0 in layer CAMetalLayer: GodotContentView (0x145fcbea0) on screen Odyssey G95C.\r\n```\n\n### Steps to reproduce\n\nJust create or open any project, no special steps needed.\n\n### Minimal reproduction project (MRP)\n\nJust any project.","comments":["Same problem here on M2 Pro.  Was working fine before.  Only major difference is upgrading to macOS 14.4, which has introduced a lot of issues for other apps as well.  4.3-dev5 is working fine.\r\n"],"labels":["bug","platform:macos","crash"]},{"title":"Print correct string when unable to find extension.dll","body":"When loading an extension, the library_path isn't set till later when it actually attempts to load the file on line 767.\r\nSo its printing out a blank string when it should be printing the location it expects to find the extension.dll\r\n","comments":["Should be added to line 753 too probably"],"labels":["bug","topic:gdextension"]},{"title":"GDScript: Do not produce `UNUSED_SIGNAL` warning for common implicit uses","body":"* Closes #89632.\r\n\r\nDo not produce the `UNUSED_SIGNAL` warning in the following cases:\r\n\r\n* `Signal(self, <constant signal name>)`;\r\n* `emit_signal()`, `connect()`, and `disconnect()` with constant signal name.\r\n","comments":[],"labels":["bug","topic:gdscript"]},{"title":"Crash when exporting in headless mode on Linux with Godot 4.2.2.rc2.mono","body":"### Tested versions\n\n- Reproducible in: v4.2.2.rc2.mono.official (c61a68614e5b030a4a1e11abaa5a893b8017f78d) and I think also 4.2.1.stable and 4.2.2.rc1 (I was testing various things inside podman before finding the root cause but I didn't keep the various containers).\r\n- Not reproducible: Godot 3.5 (I can't say anything more specifically as I'm porting my project to Godot 4 and haven't gotten a working version yet).\n\n### System information\n\nFedora 39, also happens inside a podman container with Fedora 39 base with minimal packages\n\n### Issue description\n\nWhen exporting in headless mode I get a crash:\r\n\r\n```\r\n$ godot --export-release Linux\/X11 build\/BlankProject --headless\r\nGodot Engine v4.2.2.rc2.mono.official.c61a68614 - https:\/\/godotengine.org\r\n \r\nWARNING: Custom cursor shape not supported by this display server.\r\n     at: cursor_set_custom_image (servers\/display_server.cpp:505)\r\n\r\n================================================================\r\nhandle_crash: Program crashed with signal 11\r\nEngine version: Godot Engine v4.2.2.rc2.mono.official (c61a68614e5b030a4a1e11abaa5a893b8017f78d)\r\nDumping the backtrace. Please include this when reporting the bug to the project developer.\r\n[1] \/usr\/lib64\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libcoreclr.so(+0x606a85) [0x7f866da06a85] (??:0)\r\n[2] \/usr\/lib64\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libcoreclr.so(+0x6060b5) [0x7f866da060b5] (??:0)\r\n[3] \/lib64\/libc.so.6(+0x3e9a0) [0x7f86931d39a0] (??:0)\r\n[4] godot() [0x314a2a9] (??:0)\r\n[5] godot() [0x31bab24] (??:0)\r\n[6] godot() [0x31b5db7] (??:0)\r\n[7] godot() [0x31b571f] (??:0)\r\n[8] godot() [0x31bbdd4] (??:0)\r\n[9] godot() [0x31bcff4] (??:0)\r\n[10] godot() [0x31e852e] (??:0)\r\n[11] godot() [0x2bef894] (??:0)\r\n[12] godot() [0x172a448] (??:0)\r\n[13] godot() [0x12edc3c] (??:0)\r\n[14] godot() [0x4a70b7] (??:0)\r\n[15] godot() [0x41e7f9] (??:0)\r\n[16] \/lib64\/libc.so.6(+0x2814a) [0x7f86931bd14a] (??:0)\r\n[17] \/lib64\/libc.so.6(__libc_start_main+0x8b) [0x7f86931bd20b] (??:0)\r\n[18] godot() [0x42b24a] (??:0)\r\n-- END OF BACKTRACE --\r\n================================================================\r\nKeskeytetty (luotiin core-tiedosto)\r\n\r\n```\r\n\r\nRunning without the headless flag works:\r\n\r\n```\r\n$ godot --export-release Linux\/X11 build\/BlankProject\r\nGodot Engine v4.2.2.rc2.mono.official.c61a68614 - https:\/\/godotengine.org\r\nVulkan API 1.3.267 - Forward+ - Using Vulkan Device #0: AMD - AMD Radeon RX 7900 XTX (RADV NAVI31)\r\n \r\nsavepack: begin: Pakataan steps: 102\r\n\tsavepack: step 2: Varastoidaan Tiedostoa: res:\/\/.godot\/imported\/icon.svg-218a8f2b3041327d8a5756f3a245f83b.ctex\r\n\tsavepack: step 2: Varastoidaan Tiedostoa: res:\/\/icon.svg.import\r\n\tsavepack: step 52: Varastoidaan Tiedostoa: res:\/\/.godot\/exported\/133200997\/export-3070c538c03ee49b7677ff960a3f5195-main.scn\r\n\tsavepack: step 102: Varastoidaan Tiedostoa: res:\/\/main.tscn.remap\r\n\tsavepack: step 102: Varastoidaan Tiedostoa: res:\/\/.godot\/global_script_class_cache.cfg\r\n\tsavepack: step 102: Varastoidaan Tiedostoa: res:\/\/icon.svg\r\n\tsavepack: step 102: Varastoidaan Tiedostoa: res:\/\/.godot\/uid_cache.bin\r\n\tsavepack: step 102: Varastoidaan Tiedostoa: res:\/\/project.binary\r\nsavepack: end\r\nERROR: Condition \"!EditorSettings::get_singleton() || !EditorSettings::get_singleton()->has_setting(p_setting)\" is true. Returning: Variant()\r\n   at: _EDITOR_GET (editor\/editor_settings.cpp:1144)\r\n```\r\n\r\n(though it prints this error: https:\/\/github.com\/godotengine\/godot\/issues\/84839)\r\n\r\nWhen I export my full project, I get slightly different results, instead of SIGSEGV I get SIGILL:\r\n```\r\nCore was generated by `godot --editor --headless .'.\r\nProgram terminated with signal SIGILL, Illegal instruction.\r\n#0  0x0000000000472607 in ?? ()\r\n[Current thread is 1 (LWP 1563)]\r\n(gdb) bt\r\n#0  0x0000000000472607 in ?? ()\r\n#1  0x0000000000000000 in ?? ()\r\n```\r\n\r\n```\r\nExporting to folder: builds\/Thrive_0.6.6.0-alpha_linux_x11\r\nlibfontconfig.so.1: cannot open shared object file: No such file or directory\r\nGodot Engine v4.2.2.rc2.mono.official.c61a68614 - https:\/\/godotengine.org\r\n \r\nWARNING: Custom cursor shape not supported by this display server.\r\n     at: cursor_set_custom_image (servers\/display_server.cpp:505)\r\n\r\n================================================================\r\nhandle_crash: Program crashed with signal 11\r\nEngine version: Godot Engine v4.2.2.rc2.mono.official (c61a68614e5b030a4a1e11abaa5a893b8017f78d)\r\nDumping the backtrace. Please include this when reporting the bug to the project developer.\r\nERROR: FATAL: Index p_index = 1 is out of bounds (size() = 0).\r\n   at: get (.\/core\/templates\/cowdata.h:158)\r\n\r\n```\n\n### Steps to reproduce\n\n- Open a basically new project (I just added one scene with a label and the default icon file in it to check that the exported project launches fine) in Godot\r\n- Try to export it with the `--headless` flag from terminal, observe it crashes\r\n- Export without the headless flag, this time it works (`godot --export-release Linux\/X11 build\/BlankProject`)\n\n### Minimal reproduction project (MRP)\n\n[BlankProject.zip](https:\/\/github.com\/godotengine\/godot\/files\/14649655\/BlankProject.zip)\r\n","comments":[],"labels":["bug","platform:linuxbsd","needs testing","crash","topic:export"]},{"title":"Do not apply \"force_native\" to the edited scene windows.","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89669","comments":[],"labels":["bug","topic:editor","topic:gui"]},{"title":"Unify compatibility aliases for deprecated platform names","body":"Does it have much sense? No because it doesn't seem that in near future will be platform name deprecation's but if they will be, it will take to add only one line `\u00af\\_(\u30c4)_\/\u00af` \r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","topic:buildsystem"]},{"title":"Stop possible underrun when processing a string","body":"Calling String::utf8(\"Unicode String\", -1) assumes that the string will be NULL terminated. However, the length parameter is always used to find the end of the string.  So there is the chance the character before th start of the string is read.\r\n\r\nMaking the pointer NULL in the case where it's out of range, still allows the following to work as expected\r\nwhile (ptrtmp != ptrtmp_limit && *ptrtmp)\r\n\r\n","comments":[],"labels":["bug","topic:core"]},{"title":"The issue of setting high-definition images in godot controls on mobile devices","body":"### Tested versions\r\n\r\n4.2\r\n\r\n### System information\r\n\r\nmacos 14.2.1 (23C71)\r\n\r\n### Issue description\r\n\r\nIn the iOS project, after using the colorPicker.add_theme_icon_override(\"picker_cursor\",grabber_icon_texture) method to replace high-definition @ 3x images, the Godot control was unable to shrink the image, resulting in the control becoming larger.\r\n\r\nAll controls have this issue, such as HSlider(grabber), LineEdit(clear), ColorPicket(picker_cursor), etc\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/134466716\/f3fa8d86-09d2-4978-a9e1-ffde61e4bc8c)\r\n\r\n\r\n### Steps to reproduce\r\n\r\nnull\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nnull","comments":["To understand better here. The problem is that using a larger texture makes the interface larger? The grabber and cursors are using their actual size directly, so this sounds like it is entirely expected, or am I missing something? Does it say anywhere that it will be a fixed size?","All system controls on mobile devices, iPhones, or iPads have blurry images because iPhone and iPad development use @ 3x images, which are three times the size of the original image.\r\nWe use @ 3x images for the TextureRect control on Godot, such as a 36X36 size image, and then set the TextureRect size to 12X12 to avoid blurring on the high-definition screen\r\nHowever, it is not possible to set the zoom function for images in Theme.\r\nFor example, in LineEdit's clear button, I have hidden the system's clear button and added a TextureRect to solve the blurring problem at the position of the clear button\r\nHSlider, I also calculate the position of the grabber based on the value, replacing the TextureRect of my @ 3x image\r\nColorPick needs to place a new TextureRect based on the position of the mouse to solve the problem of blurring.","Create a new project, add these controls, and directly export the iOS project to discover these issues.\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/134466716\/5ae687c4-9d13-4c4d-bce0-8537415b00cd)\r\n\r\nThe return button in the picture is a @ 3x image\r\nThe ColorPicker in the picture (picker_cursor) is built-in to the system and has become blurry on the iPhone 13 Pro. It needs to be replaced with a 3X image\r\n\r\nThe blurring issue will be more pronounced in other controls with larger buttons, such as the clear button in LineEdit and the gripper button in HSlide","In iOS development, the use of @2x and @3x images is to adapt to different device screen resolutions. This is because Apple's devices have a variety of different screen resolutions, for example, the resolution of iPhone 8 is 750x1334, while the resolution of iPhone 8 Plus is 1242x2208.\r\n\r\nIn iOS devices, @1x, @2x, and @3x are used to distinguish device screen resolutions. @1x images are used for early iPhone and iPod Touch devices, @2x images are used for Retina screen devices, such as iPhone 4, iPhone 4s, iPhone 5, iPhone 5s, iPhone 6, iPhone 6s, iPhone 7, iPhone 8, and some newer models of iPad. @3x images are for adapting to higher resolution devices, such as iPhone 6 Plus, iPhone 6s Plus, iPhone 7 Plus, iPhone 8 Plus, and some newer models of iPhone.\r\n\r\nHere, @2x and @3x refer to the pixel density of the image. The pixel density of @2x images is twice that of @1x, and the pixel density of @3x images is three times that of @1x. This means that if you have a @1x image with a size of 100x100, then the corresponding @2x image should be 200x200, and the corresponding @3x image should be 300x300.\r\n\r\nWhen your application runs on a @2x device, the system will prefer to use @2x images. If you do not provide @2x images, the system will use @1x images, but the images will not be clear enough. Similarly, when your application runs on a @3x device, the system will prefer to use @3x images. If you do not provide @3x images, the system will use @2x or @1x images, but the images will not be clear enough.\r\n\r\nTherefore, to ensure that your application can display high-definition images on all devices, you should provide @1x, @2x, and @3x versions for each image. This is why @2x and @3x images are used in iOS development.","![image](https:\/\/github.com\/godotengine\/godot\/assets\/134466716\/a9c013cd-e4eb-4e32-9846-8bc694d92122)\r\n\r\nWe only focus on mobile projects. In the project, we use images that are @ 3x in size, and we set the image to be magnified three times at the position displayed in the image.\r\n\r\nThank you for your answer.","@AThousandShips \r\nMay I ask if there is any solution?","Not that I know of, please have patience :) It isn't even decided what this situation is, if it's a bug or not"],"labels":["discussion","topic:gui"]},{"title":"`Window.force_native` forces edited scene's windows to be native in the editor","body":"### Tested versions\r\n\r\n- v4.3.dev.custom_build [fe01776f0]\r\n- v4.3.dev5.official [c9c17d6ca]\r\n\r\n### System information\r\n\r\nlinux\r\n\r\n### Issue description\r\n\r\n\r\nWhen enabling the `force_native` flag in a `Window` node, this window becomes native in the editor: a new os window appears...\r\n`force_native` shouldn't take effect in the editor I think.\r\n\r\nAdditionally, the window correctly disappears when switching scenes but under some circumstances it can be leaked or the editor can crash:\r\n\r\n<details>\r\n<summary>Window duplication<\/summary>\r\n\r\n- In this clip, I repeatedly toggle the `force_native` flag and reload the scene.\r\n- setting the `force_native` flag to `false` and reloading the scene \"disconnects\" the window from the os window (the os window still hangs there):\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/71937306\/6343b747-65d1-4504-a728-db48d676313e)\r\n\r\n- notice how moving the os window changes its properties in the inspector (at 0:06 in the clip).\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/71937306\/a89e6c3d-cc27-4e4c-990a-29228e4bf2b1\r\n<\/details>\r\n\r\n\r\n<details>\r\n<summary>Crash<\/summary>\r\n\r\n- if the window node spawned an os window, and then had its `force_native` flag set to `false`, and then has its visibility toggled, the editor crashes (but changing position and size works fine).\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/71937306\/de65f342-19b6-4173-95ef-528d5646a009\r\n<\/details>\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n- add a `Window` node\r\n- enable its `force_native` flag and save and reload the scene\r\n- a new os window should spawn (which I believe is an issue)\r\n- additionally, if you now set the flag back to false and save and reload the scene, the window should still be here\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nany","comments":[],"labels":["bug","topic:editor","topic:gui"]},{"title":"XMLParser doesn't conform to the XML specification for elements","body":"### Tested versions\r\n\r\nReproducible in 4.2.1\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Pop!_OS 22.04 LTS - X11 - Vulkan (Forward+) - integrated Intel(R) Graphics (ADL GT2) () - 12th Gen Intel(R) Core(TM) i5-1235U (12 Threads)\r\n\r\n### Issue description\r\n\r\nxml_parser.cpp rarely changes, so this issue likely existed in Godot's entire lifetime.\r\n\r\nThe XML specification defines three types of tags: Start-tags e.g `<svg>`, End-tags e.g. `<\/svg>`, and Empty-Element Tags e.g. `<svg\/>`. The particular syntax is as follows:\r\n\r\n**Attributes section:** You have multiple attributes that look like `AttributeName=\"AttributeValue\"`, with a possible arbitrary amounts of whitespace around the equal sign (space, \\t, \\n, \\r) and at the start (at least one is required at the start).\r\n\r\n**Tag name:** Can be a bunch of characters, but whitespaces cannot be part of it. This implies that a whitespace should terminate the tag name.\r\n\r\n**Start-tag:** `<`, followed by the tag name, followed by an attribute section, followed by an arbitrary amount of whitespace (not required), followed by `>`.\r\n\r\n**End-tag:** `<\/`, followed by the tag name, followed by an arbitrary amount of whitespace (not required), followed by `>`.\r\n\r\n**Tag for empty elements:** Exactly like a start-tag, but ends in `\/>` instead of `>`.\r\n\r\nRelevant section of the specification: https:\/\/www.w3.org\/TR\/REC-xml\/#sec-starttags\r\n\r\n-----\r\n\r\nXMLParser parses certain non-conforming structures, of which some are for sure unintentional. Namely:\r\n\r\n- Doesn't seem to consider the validity of tag\/attribute names at all.\r\n- Doesn't wait for the final \">\" in order to consider something a tag. Doesn't even wait for a name to consider something an end-tag.\r\n- Worst of all and 100% a bug: Whitespace of end-tags gets considered as part of the tag name.\r\n\r\n### Steps to reproduce\r\n\r\n```gdscript\r\nfunc _ready():\r\n\tvar parser = XMLParser.new()\r\n\t\r\n\t# Example 1: A non-conforming start-tag treated as an element.\r\n\tparser.open_buffer(\"<svg\".to_utf8_buffer())\r\n\twhile parser.read() == OK:\r\n\t\tif parser.get_node_type() == XMLParser.NODE_ELEMENT:\r\n\t\t\tprint(\"Element\")\r\n\t\r\n\t# Example 2: A non-conforming end-tag treated as an element end.\r\n\tparser.open_buffer(\"<\/\".to_utf8_buffer())\r\n\twhile parser.read() == OK:\r\n\t\tif parser.get_node_type() == XMLParser.NODE_ELEMENT_END:\r\n\t\t\tprint(\"Element end\")\r\n\t\r\n\t# Example 3: A non-conforming empty-element tag treated as an element.\r\n\tparser.open_buffer(\"<svg\/\".to_utf8_buffer())\r\n\twhile parser.read() == OK:\r\n\t\tif parser.get_node_type() == XMLParser.NODE_ELEMENT:\r\n\t\t\tprint(\"Element\")\r\n\t\r\n\t# Example 4: Whitespace for end-tags becoming part of the tag name.\r\n\tparser.open_buffer(\"<\/svg   >\".to_utf8_buffer())\r\n\twhile parser.read() == OK:\r\n\t\tif parser.get_node_type() == XMLParser.NODE_ELEMENT_END:\r\n\t\t\tprints(parser.get_node_name() == \"svg   \")\r\n\t\r\n\t# Example 5: Invalid tag name.\r\n\tparser.open_buffer(\"<42>\".to_utf8_buffer())\r\n\twhile parser.read() == OK:\r\n\t\tif parser.get_node_type() == XMLParser.NODE_ELEMENT:\r\n\t\t\tprints(\"Element\")\r\n```\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A just copy the code I provided into a node script.","comments":["The problems are in the \"XMLParser::_parse_opening_xml_element()\" and \"XMLParser::_parse_closing_xml_element()\" methods. I'm looking into it, I'll let you know when I'll open the PR","Which of these do you believe are issues? I'm realizing now that XMLParser doesn't exactly try to detect syntax errors, but the last one is definitely a problem even then.","> Which of these do you believe are issues? I'm realizing now that XMLParser doesn't exactly try to detect syntax errors, but the last one is definitely a problem even then.\r\n\r\nYou are right, the XMLParser does not check for syntax errors, as well as for other forbidden cases (i.e. a tag starting with 'xml'). I have added some of these checks, and I'm trying to open a pull request, but since it's my first time doing it it's taking a while, sorry about that","I opened the PR, but as I said previously I didn't cover every problem, mainly because I'm not 100% sure I'm in line with their way of doing things, so I have to wait for a feedback. Nonetheless, in the next days I'll continue working on it, and if necessary I'll apply the necessary changes.\r\n\r\nHave a nice day!","Would it be worth it to replace the custom XML parser with an open source library? There are a number to choose from. I'd expect them to be better tested and their interfaces are easier to use. Or is there some advantage to the custom parser?","> Would it be worth it to replace the custom XML parser with an open source library? There are a number to choose from. I'd expect them to be better tested and their interfaces are easier to use. Or is there some advantage to the custom parser?\r\n\r\nI agree, there are many open source xml parsers to choose from, hence there would be no need to reinvent the wheel. \r\n\r\nHowever, on the asset lib I found this: [https:\/\/github.com\/elenakrittik\/GodotXML\/tree\/master](https:\/\/github.com\/elenakrittik\/GodotXML\/tree\/master). From a quick glance, it seems to provide some ulterior checks, but I'm not sure how reliable it is"],"labels":["bug","topic:core"]},{"title":"Editor can't handle complex Animation State Machine Advanced Expressions","body":"### Tested versions\r\n\r\nReproducible in v4.2.stable.official [46dc27791]\r\n\r\n### System information\r\n\r\nWindows 10 - Godot v4.2.stable.official [46dc27791]\r\n\r\n### Issue description\r\n\r\nIf you use a boolean valued function in the Advanced Expression of an Animation State Machine transition, it works when the project is run, but it seems to halt in the editor.\r\n\r\nIt would be very useful for this to work, especially because I can't find an easier way to implement conditions that are consumed by transitions.\r\n\r\n### Steps to reproduce\r\n\r\n- Create an animation state machine with at least one transition\r\n- Create a script for the Advanced Expression Base Node\r\n- Create a function in the advanced expressions script that returns a boolean\r\n- Call that function as the advanced expression in one of the transitions\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[AnimationStateMachineAdvancedExpressionBug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14646674\/AnimationStateMachineAdvancedExpressionBug.zip)\r\n","comments":[],"labels":["enhancement","topic:editor","usability","topic:animation"]},{"title":"[Font] Apply oversampling to the \"embolden\" strength.","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89665","comments":[],"labels":["bug","topic:gui"]},{"title":"FontVariation embolden appears different thickness in different window size","body":"### Tested versions\n\n4.2stable\n\n### System information\n\nGodot v4.2.stable - macOS 13.6.1 - GLES3 (Compatibility) - ANGLE (AMD, ANGLE Metal Renderer: AMD Radeon Pro 560X, \u7248\u672c13.6.1\uff08\u7248\u53f722G313\uff09) - Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz (12 Threads)\n\n### Issue description\n\n<img width=\"67\" alt=\"\u56fe\u7247\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/1791493\/2f9131fd-cfb6-4c06-adb3-3a8c86954a3d\">\r\n\r\n<img width=\"155\" alt=\"\u56fe\u7247\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/1791493\/30e9a88e-5fb0-44f0-8bf5-456a09b2f7fd\">\r\n\r\nThe first screenshot is taken from a 546x854 window. The second one is taken from 1528x1982. Same FontVariation with embolden=0.5. \n\n### Steps to reproduce\n\nCreate a FontVariation and set embolden = 0.5. Create a label with that FontVariant. Play in editor and drag the window size to see the font thinkness change.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:gui"]},{"title":"Fix `empty_clicked` signal in Tree when using `hide_root`","body":"Fixes #83928\r\n\r\nThis PR fixes the `empty_clicked` function of the node `Tree`. Right clicking did not work when hide_root was active. Added an extra if statement with a command emitting the signal.","comments":["Needs to be squashed into 1 commit.","> Needs to be squashed into 1 commit.\r\n\r\nSquashed ;)"],"labels":["bug","topic:gui"]},{"title":"Rendering problems: WebXR rendering to left eye twice 4.3 dev 5","body":"### Tested versions\r\n\r\n-Reproducible in 4.3 dev 4 and 5\r\n-Not an issue in 4.2.1\r\n\r\n\r\n### System information\r\n\r\nGodot v4.3.dev5 - Manjaro Linux #1 SMP PREEMPT_RT Fri Feb 16 16:51:44 CET 2024 - X11 - Vulkan (Mobile) - dedicated NVIDIA GeForce RTX 3060 (nvidia; 550.54.14) - Intel(R) Core(TM) i5-8600K CPU @ 3.60GHz (6 Threads) exported to Web on Quest 2 \r\n\r\n### Issue description\r\n\r\nWhen loading up a basic XR demo such as the one that comes with XR tools, and viewing the web export on the quest 2, the image appears to be doubled on the left eye: Video attached\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/15620900\/ee6bcf4c-dc37-4252-816f-a34bddd4c0c2\r\n\r\nAlso, When attempting to load the export on a chromium based browser with an Developer XR Simulator, it spits an error: \r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/15620900\/9602c031-26f4-4db0-904e-74b568c9fd75)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\nOpen\/create scene with XR setup in 4.3 dev 5, export for web and test with a WebXR compatible device (in my case a quest 2)\r\n\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nJust use the XR Tools demo project\r\nif you're unable to replicate the issue I can export my project, which has the same issue.","comments":["I'm starting to have other strange issues with even the current stable version 4.2.1, which is odd. Things like exporting to quest 2 with an android build and the compatibility renderer and having messed up shaders (dark and purplish, like the colors are inverted)\r\nand exporting to web now results in all shaders except the sky being grey. Wondering if there's some sort of Godot config files or cache that carry between versions that are messing things up, since the web export on 4.2.2 WAS working for me just a few days ago. \r\n\r\nHow might I go about clearing ALL file related to Godot to see if my system is the issue?"],"labels":["bug","topic:xr"]},{"title":"Core: Support c++20 compilation","body":"Adds a new `cpp_standard` experimental variable to SCons, to allow the user to choose which C++ standard to compile with. The choices are \"17\" and \"20\", defaulting to 17. In addition, this makes changes across the repo to allow compilation of c++20 to be possible in the first place, which primarily comes down to more operators to prevent ambiguous conversions. Currently, a c++20 build successfully compiles (with `werror=no`).\r\n\r\nSubmitted as a draft, as while the equality operators are accounted for, there's still the ordering operators. Inequality operators could be handled with a wrapper, but ordering operators will be a bit more involved than that; ideally the `<=>` operator will be used, so long as parity with the secondary operators is kept between 17 & 20. There's also the matter of making sure the other warnings are accounted for, which are largely secondary but still important so long as they don't negatively impact c++17 (which will remain the repo \"default\").","comments":[],"labels":["enhancement","discussion","topic:buildsystem"]},{"title":"GDScript: Fix `for` expression is highlighted as type","body":"**Before**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/1d7df176-bf94-4824-9609-cfc8355fa651)\r\n\r\n**After**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/9dd6e668-68ca-42c2-a59d-ef914e328c8f)\r\n\r\nAlso addresses https:\/\/github.com\/godotengine\/godot\/pull\/88876#issuecomment-1964846440. I made sure that the bug fixed in #88876 was not reintroduced:\r\n\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/33eed034-7207-4aab-ba10-de69d71116c4)","comments":[],"labels":["bug","topic:gdscript","topic:editor"]},{"title":"[Editor] Add `Open in Terminal` to the file system empty click","body":"Was missing from clicking in the empty file list\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89637\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Agreed, especially as it seems to use the same callback to handle it (I only had to add the item, nothing more)"],"labels":["bug","topic:editor","usability","cherrypick:4.2"]},{"title":"OptionButton Throwing Errors in Export","body":"### Tested versions\r\n\r\n - Reproducible in Godot Engine v4.2.stable.official [46dc27791], v4.2.1.stable.official, v4.2.2.rc2.\r\n - Does not seem to happen in v4.1.3.stable.official [f06b6836a].\r\n\r\n### System information\r\n\r\nWindows 11 Home\r\n\r\n### Issue description\r\n\r\nInteracting with an OptionButton produces an error message:\r\nERROR: Attempt to disconnect a nonexistent connection from 'root:<Windows#24779948753>'. Signal: 'focus_entered', callable:...\r\nat: (core\/object\/object.cpp:1420)\r\nERROR: Attempt to disconnect a nonexistent connection from 'root:<Windows#24779948753>'. Signal: 'tree_exited', callable:...\r\nat: (core\/object\/object.cpp:1420)\r\n\r\nOnly when the project is exported to executable, both release and debug, but does not produce an error when run in the editor.\r\n\r\n### Steps to reproduce\r\n\r\nStarting from an empty project with the root node being a control node, add a child OptionButton and add 2 items to it, labeled Option 1 and Option 2. Then, export the project with the console to an executable. The console executable will display an error when an option is selected in the OptionButton.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[Test.zip](https:\/\/github.com\/godotengine\/godot\/files\/14640937\/Test.zip)\r\n","comments":["Can you try this with 4.2.1? Or [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/)? This might have been fixed and you are on an out of date version","I did just now try it with v4.1.3.stable.official [f06b6836a] and the error did not occur. I can try with other versions here soon.","That's an older version, but good to get comparison that means it was introduced after 4.1 was released","The error was reproduced in v4.2.1.stable.official [b09f793f5].","This is happening in 4.2.2.rc2"],"labels":["bug","needs testing","topic:gui","topic:export"]},{"title":"GridMap's Navmesh rotation randomly changes for multiple tiles when one is modified.","body":"### Tested versions\n\n4.2.1.stable\n\n### System information\n\nmac os 14.3.1\n\n### Issue description\n\nI followed the documentation about gridmap with navmeshes and this tutorial\r\nhttps:\/\/docs.godotengine.org\/en\/stable\/tutorials\/3d\/using_gridmaps.html\r\nhttps:\/\/youtu.be\/KT06pv06Q1U\r\n\r\nthe navmesh didnt work out of the box, after i rotated them a few times the gridmap started to glich. It seems that if i change the rotation in one of the tiles then it randomly changes other tiles. Additionally, you can see that there are pink glitches in the editor for some reason. They showed up after i rotated the navmesh in one of the tiles.\n\n### Steps to reproduce\n\n1. create a scene with a gridmap and navmeshes build into the tiles\r\n\r\n2. rotate the navmesh, gridmap and\/or the root 3Dmesh in the tile library.\r\n[godot-bug.mkv.zip](https:\/\/github.com\/godotengine\/godot\/files\/14639812\/godot-bug.mkv.zip)\r\n\n\n### Minimal reproduction project (MRP)\n\n[godot_data.zip](https:\/\/github.com\/godotengine\/godot\/files\/14639868\/godot_data.zip)\r\n","comments":["Your project is too complex to cause a problem, at least for me, try creating a minimal project","[godot_data.zip](https:\/\/github.com\/godotengine\/godot\/files\/14642652\/godot_data.zip)\r\n"],"labels":["bug","needs testing","topic:3d"]},{"title":"[Core] `Array` and `Dictionary` `set` improvements","body":"* Make `Dictionary.get_or_add` check for read-only\r\n* Add `Dictionary.set` for read-only enforcing assignments\r\n* Add `set_safe` method to `Array` and `Dictionary`\r\n* Add a range check to `Array.set` for safe usage and to match `Vector`\r\n\r\nA number of different changes, largely related, can split them up if desired (the range check for `Array.set` could be cherry-picked if desired), and the `set_safe` isn't necessarily needed but added it just to see about the demand for it\r\n\r\nWill look at adding some unit tests for read-only arrays to complement the dictionary ones\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","discussion","topic:core"]},{"title":"Add property UsingGodotNETSdk to Godot.NET.Sdk","body":"The Godot.NET.Sdk (for C# use) should define the property `UsingGodotNETSdk` in its [SDK.props](https:\/\/github.com\/godotengine\/godot\/blob\/a07dd0d6a520723c4838fb4b65461a16b7a50f90\/modules\/mono\/editor\/Godot.NET.Sdk\/Godot.NET.Sdk\/Sdk\/Sdk.props).  \r\n\r\n## Why\r\nDefining this property allows shared build configuration (e.g. Directory.Build.targets or other imported msbuild files) to detect deterministically when they are operating within the scope of a project controlled by Godot.NET.Sdk.  This enables shared build configuration that may span many different projects within a folder to have Godot.NET.Sdk-specific configuration that only applies to Godot projects.\r\n\r\n## Why named UsingGodotNETSdk\r\nThis naming scheme is common practice in Microsoft Dotnet SDKs.  For example, the property `UsingMicrosoftNETSdk` is defined by the default SDK, `UsingMicrosoftTraversalSdk` is defined by [Microsoft.Build.Traversal](https:\/\/github.com\/microsoft\/MSBuildSdks\/blob\/363532de5b406c9afc6e6ff0f276431c27b11347\/src\/Traversal\/Sdk\/Sdk.props#L10), `UsingMicrosoftNoTargetsSdk` by [Microsoft.Build.NoTargets](https:\/\/github.com\/microsoft\/MSBuildSdks\/blob\/363532de5b406c9afc6e6ff0f276431c27b11347\/src\/NoTargets\/Sdk\/Sdk.props#L10), and so on.  The property `UsingMicrosoftNETSdk` is even used in the implementation of Godot.NET.Sdk for conditional logic of the type predicted here.\r\n\r\nNote that these \"Using*\" properties are _additive_ in the sense that more than one can be defined for a given project (as SDKs can effectively be built upon other SDKs, using them as components).  So, it is normal and appropriate for both `UsingMicrosoftNETSdk` and `UsingGodotNETSdk` to be simultaneously defined within the same project.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Hello, thanks for the PR \ud83d\ude42  \r\nI'm not especially against this, but I am wondering if the use-case isn't already covered by the SDK defining `GodotDefineConstants` [here](https:\/\/github.com\/godotengine\/godot\/blob\/4.2\/modules\/mono\/editor\/Godot.NET.Sdk\/Godot.NET.Sdk\/Sdk\/Sdk.props#L86-L102)?","Hey Paul, I had similar thoughts about just using `GodotDefineConstants` but I decided I didn't really like it.  My reasoning stems from one of a set of design principles I usually try to follow (4: Code Not Convention) which argues \"If it matters, then make it explicit\".  Being able to distinguish in a shared context (such as `Directory.Build.targets`) whether you are operating within a Godot project _matters_ for both the correctness and the determinism of the build.  \r\n\r\nWhile it might be possible to distinguish using some coincidental property, such as `GodotDefineConstants`, this is not the explicit purpose of `GodotDefineConstants`.  Assuming additional semantics for `GodotDefineConstants` has a code smell since it violates the abstraction boundary of Godot.NET.Sdk.  `GodotDefineConstants` isn't meant to be part of the external interface of Godot.NET.Sdk, and so using it directly is like accessing a private variable in a class.  It's an implementation detail of the SDK.  If a future SDK author decides to come along and rename, split, make conditional, or otherwise change the nature of `GodotDefineConstants` they would likely not think at all about the consequences to outside projects that have taken an external dependency on these additional semantics.  Instead, those projects would be broken by the change.  This makes an assumption brittle.  \r\n\r\nDefining `UsingGodotNETSdk`, however, has the opposite impact.  It makes a deliberate external specification and defines an interface with external contractual guarantees.  It will never be a property that is used for some other purpose and would never be subject to unrelated refactoring.  Lastly, since its defined semantics _are_ an external contract, refactoring `UsingGodotNETSdk` cannot be done without considering the impact to dependent projects (because doing so is, by definition now, a breaking change).  \r\n\r\nPlus, this PR is trivial.  :)\r\n\r\nAs a historical note, the Dotnet SDK didn't originally define `UsingMicrosoftNETSdk` and coincidental properties within the SDK were often used as a workaround.  Over time, evolution of the SDK demonstrated the brittleness of this usage, and projects were broken.  `UsingMicrosoftNETSdk` was introduced to solve that real-world problem.","Thanks for the detailed write up. Yes. I agree with explicitness being a good thing, and the fact the constants might evolve with time, etc.  \nNot sure how other people see this, but this looks good to me."],"labels":["enhancement","topic:dotnet"]},{"title":"[4.x] Godot flies out when I hide the window","body":"### Tested versions\r\n\r\nGodot 4.1.3, Godot 4.2.1\r\n\r\n### System information\r\n\r\nGodot v4.1.3.stable - Windows 10.0.19045 - Vulkan (Mobile) - dedicated Radeon RX 560 Series (Advanced Micro Devices, Inc.; 31.0.14001.45012) - Intel(R) Core(TM) i5-4570 CPU @ 3.20GHz (4 Threads)\r\n\r\n### Issue description\r\n\r\nWhen I click the \"minimize\" button in a running application, godot displays many errors in the console and crashes.\r\nIn the example, I use [this plugin](https:\/\/github.com\/MizunagiKB\/gd_cubism), it\u2019s unlikely that this is the problem, since this happens in all modes except \u201ccompatibility\u201d\r\n\r\nErrors in Forward+:\r\n![err](https:\/\/github.com\/godotengine\/godot\/assets\/130399274\/ce8c34e8-e899-4bbd-ae9f-473d34263f7a)\r\n\r\nErrors in Mobile:\r\n![errMobile](https:\/\/github.com\/godotengine\/godot\/assets\/130399274\/bfd1aafa-6707-44e0-a12e-5f28323b979f)\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Run my example and run it in Forward+ or Mobile mode\r\n2. Minimize a window\r\n![w](https:\/\/github.com\/godotengine\/godot\/assets\/130399274\/edf50b7d-5f1b-4f04-8f26-8285e6fd5401)\r\n3. Wait about 15 seconds and you will see a huge number of errors\r\n\r\n### Minimal reproduction project (MRP)\r\n[demoGD.zip](https:\/\/github.com\/godotengine\/godot\/files\/14639407\/demoGD.zip)\r\n\r\n\r\n","comments":["Please try confirming that this happens without the plugin, that's an important thing to consider","\r\n\r\n\r\n> Please try confirming that this happens without the plugin, that's an important thing to consider\r\n\r\nIt's almost impossible :(\r\nI repeated everything that was done in the example project, drawing the Viewport in sprite2d and texturerect, nothing happens, all the main rendering process is in GDCubismUserModel.\r\n If there were problems in compatibility mode, I would be sure that this is a plugin problem, but in compatibility mode everything works","That doesn't mean it isn't specific to the plugin though, so if it happens with the plugin and not otherwise it's very clearly related to the plugin, so the first step is to make sure the plugin isn't causing it, unless the plugin triggers a bug in the engine","\r\n> That doesn't mean it isn't specific to the plugin though, so if it happens with the plugin and not otherwise it's very clearly related to the plugin, so the first step is to make sure the plugin isn't causing it, unless the plugin triggers a bug in the engine\r\n\r\nI'll try to contact the plugin developer and ask him to chime in on this issue","I'd say to report it there instead first, if it doesn't happen at all without it"],"labels":["bug","topic:rendering"]},{"title":"Core: Bind and document iterator API virtual methods","body":"This is documented [here](https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/scripting\/gdscript\/gdscript_advanced.html#custom-iterators), but I think it's not enough. This is one of Godot's secret features. Binding and documentation facilitates better discoverability, autocompletion, and static checks. See also #89639, the bug still exists only because it is not obvious that the `_iter_get()` argument does not have `Array` wrapper, unlike `_iter_init()` and `_iter_next()`.","comments":[],"labels":["enhancement","topic:core","documentation"]},{"title":"[GDScript] Correctly report invalid read-only access","body":"This ensures that read-only assignments are reported correctly, initially tried a fix using the setter system but it added a lot of extra complexity that wasn't helpful, so went with an explicit check on the script side using a new function on `Variant`, and added to a number of places in the VM, unsure if all these are needed but added them anywhere there was a set operation\r\n\r\nIncludes the fixes in (to add the new test outputs from it):\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/89647\r\n\r\nOnly the second commit is relevant for this PR\r\n\r\n---\r\n\r\n* Closes: https:\/\/github.com\/godotengine\/godot-proposals\/discussions\/9329\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","topic:gdscript"]},{"title":"[Core] Fix property access on read-only `Dictionary`","body":"Read-only dictionaries can be modified with property access, like so:\r\n```gdscript\r\nvar my_dict := { \"a\": 0 }\r\nmy_dict.make_read_only()\r\nmy_dict.a = 1\r\n```\r\n\r\nThis seems to be an oversight (and can't find any reports on it), but this makes it aligned with how it works for `const`\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["I'm not familiar with `VariantInternal`, but shouldn't the `[]` operator check for readonly? I think that the check should work not only in GDScript (`variant_setget.cpp`), but also in the core.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/core\/variant\/dictionary.cpp#L82-L83","As explained above, it uses the temporary, it doesn't throw any errors for the operator version and there isn't a distinct `set` method (which there is for `Array`, and that handles the check), we can't really have an error here as we return a reference (nor is it reliable as such, as we could be accessing it by reading only, the `operator[]` can't check for assignment without some proxy)\r\n\r\nIt works in core as well, with the `valid` return, just like for any other checks like that, when using `set` on a `Variant`, but unfortunately it can't be enforced in any other way","What we *might* want to do is add a check to `get_or_add` as it does mutate like that, will see about that separately\r\n\r\nEdit: Writing up an improvement, adding a `set` method to `Dictionary` for safe usage in c++, and adding a check to `get_or_add`, will push soon\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/89653"],"labels":["bug","topic:core","cherrypick:4.2"]},{"title":"Script editor overwriting externally edited scripts with old data","body":"### Tested versions\n\nv4.2.1.stable.official [b09f793f5]\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1660 Ti (NVIDIA; 31.0.15.3699) - AMD Ryzen 7 4800H with Radeon Graphics (16 Threads)\n\n### Issue description\n\nI use VSCode with the godot-tools extension. If I do edits to a file in VSCode, then run the program and get an error, the script will open in the local script editor inside of Godot editor itself. If I now go back to VSCode and edit my script, the new changes I did in VSCode are overwritten immediately if I hit save all in Godot editor.\r\n\r\nThis can be alleviated by making sure the \"debug with external editor\" option from the debug menu is toggled on. After enabling this, and closing all the scripts in Godot's script editor, I do not have the issue whatsoever.\r\n\r\nUntil I delete .godot, because that setting isn't an editor setting but a part of project_metadata.cfg.\r\n\r\nWhile writing this issue I found PR #89261 that seems hopeful. I'm adding the bug report just in case this is a different issue though.\n\n### Steps to reproduce\n\n1. Make sure you are set up for an external editor:\r\n  * `text_editor\/external\/use_external_editor` should be true, \r\n  * `text_editor\/external\/exec_path` should be the path to your editor\r\n  * `text_editor\/external\/exec_flags` should be correct for your editor \r\n  * Check that `text_editor\/behavior\/files\/auto_reload_and_parse_scripts_on_save` is true, which is default.\r\n2. Open the Godot Script tab, select debug, verify that \"Debug with External Editor\" is not set.\r\n3. Open the `test_script.gd` in the MRP in your external editor. Do no changes.\r\n4. Run the MRP. It will crash and open up the script editor to the script that crashed. Press stop.\r\n5. Go into the external editor, uncomment the mentioned line. Save.\r\n6. Go back to Godot and run your project. It crashes again.\r\n7. Go to external editor and see how the uncommented line is now overwritten.\r\n8. Toggle \"Debug with External Editor\" to true in the Script tab. \r\n9. Close all scripts in Script tab. \r\n10. Run and let game crash. Stop again.\r\n11. Make changes in external editor.\r\n12. Run, and it does not overwrite changes.\n\n### Minimal reproduction project (MRP)\n\n[MRP-ScriptOverwrite.zip](https:\/\/github.com\/godotengine\/godot\/files\/14637458\/MRP-ScriptOverwrite.zip)\r\n","comments":["same issue here\r\n\r\nGodot Engine v4.2.1.stable.official.b09f793f5 - https:\/\/godotengine.org\r\nVulkan API 1.3.260 - Forward Mobile - Using Vulkan Device #0: NVIDIA - NVIDIA GeForce GTX 1650","This has been driving me up the wall.\r\n\r\nWhen Godot is configured to use an external editor, I'm not sure there's even a use case for having \"debug with external editor\" toggled off. Seems like that setting should automatically get turned on when you add an external editor."],"labels":["bug","topic:editor"]},{"title":"`Window` nodes in the edited scene get their position wrongly corrected when the bottom panel is resized","body":"### Tested versions\n\n- v4.2.1.stable.official [b09f793f5]\r\n- v4.3.dev.custom_build [fe01776f0]\n\n### System information\n\nlinux\n\n### Issue description\n\nTake a look:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/71937306\/79b7f685-e2a5-4cdd-b793-36f40ed345fa\r\n\r\n- I assume it's a check to make sure the window doesn't show up out of the screen.\r\n\r\nThe problem is that this could be a valid position in my setup (and it is), so I believe this window clamping should happen at runtime (and should happen properly).\r\nAt least when windows are OS-natives rather than godot-contained (that is, either enabled in the root viewport or forced in that window).\n\n### Steps to reproduce\n\n- add a window and give it a position that makes it go outside of the game window\r\n- toggle the bottom panel\n\n### Minimal reproduction project (MRP)\n\nany","comments":["Tested it in windows and can confirm that it also happens here.","Resizing neighboring windows can also affect it's placement.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/143477744\/4178df05-92f1-44fd-983a-0a540ded627e"],"labels":["bug","topic:editor"]},{"title":"Fix mouse events when physics_object_picking_first_only enabled","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89641\r\nSee issue for test project and reasoning. In my testing this change makes all the CollisionObject2D events (input, mouse_enter, mouse_exit, mouse_shape_enter, mouse_shape_exit) fire as expected.\r\n\r\nThe enter\/exit events still fire continuously when sorting is OFF+first_only is ON, but this is expected and unavoidable (it's as if we're flipping rapidly and randomly between the stacked areas).","comments":[],"labels":["bug","topic:input","regression"]},{"title":"Resource file not found error when loading Favorite icon","body":"The order of two arguments were flipped in recently merged #77932. If you had any favorites in the file dock, you would get `ERROR: Resource file not found: res:\/\/PackedScene (expected type: )`  cc: @KoBeWi.\r\n","comments":["Maybe don't merge this until #89646 is resolved.","How is this related to that issue? Does removing the error make it even slower?","> How is this related to that issue? Does removing the error make it even slower?\r\n\r\nThere is no slowdown at all until you apply this fix. The error means that no scene files are loaded for the favorites, and loading the scenes is what is causing the slowdown as far as I can tell.","Pushed an update. This PR now fixes:\r\n\r\n1. Flipped argument order causing error message.\r\n2. Slowdown caused by trying to load an entire scene as an icon.\r\n3. Custom icons were not shown if you run the file dock in split mode."],"labels":["bug","topic:editor","regression"]},{"title":"physics_object_picking_first_only breaks mouse enter\/exit\/motion events","body":"### Tested versions\n\n- Reproducible in 4.3-dev4\r\n- Introduced by a4072196938ece22094be9f2e4b1d1fe19586be3\n\n### System information\n\nGodot v4.3.dev4 - Windows 10.0.19045\n\n### Issue description\n\nThis PR introduced physics_object_picking_first_only: https:\/\/github.com\/godotengine\/godot\/pull\/75688\r\n\r\nSee test project attached.\r\n\r\nIf you wiggle the mouse around over two logos with sort+first_only off you get this:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/18196666\/88a90b94-fd1c-45f0-aa0b-6ab9a1dc8eec)\r\n\r\nWith both settings on you get this, and clicking also fires spurious enter\/exit events:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/18196666\/870763b4-e0a2-4431-9430-2a90632fdea1)\r\n\r\nI think the problem is here: https:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/scene\/main\/viewport.cpp#L844-L846\r\n\r\nIf send_event == false then the `break` at L860 is never called. Moving L859\/860 out of the send_event check makes all the events work as expected.\r\n\n\n### Steps to reproduce\n\n- Wiggle mouse over 2 logos with both physics settings off. 2 mouse_entered and 2 mouse_shape_entered events will be logged (one per logo).\r\n- Click mouse over 2 logos with both settings off. 2 click events will be raised.\r\n- Wiggle mouse (with brief pauses in motion) over 2 icons with both physics settings on. enter\/exit events will be continuously raised.\r\n- Click mouse over 2 logos with both settings on. 1 click event will be raised along with spurious enter\/exit events.\n\n### Minimal reproduction project (MRP)\n\n[BugPickingZSort2.zip](https:\/\/github.com\/godotengine\/godot\/files\/14635720\/BugPickingZSort2.zip)\r\n","comments":[],"labels":["bug","needs testing","topic:input","regression"]},{"title":"Changing visibility of CSG-nodes crashes the editor silently (Godot 4.1.4 RC 2)","body":"### Tested versions\r\n\r\n- Reproducible in 4.1.4 RC 2\r\n- Not reproducible in 4.1.3 stable\r\n- Not reproducible in 4.3 dev5\r\n- Not reproducible in 4.2.1 stable\r\n\r\n### System information\r\n\r\nGodot v4.1.4.rc2 - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 2060 (NVIDIA; 31.0.15.5176) - Intel(R) Core(TM) i7-10750H CPU @ 2.60GHz (12 Threads)\r\n\r\n### Issue description\r\n\r\nChanging the visibility of CSG-shapes (tested with CSGBox3D, though) crashes the editor after a short freeze. No messages are printed into the console. It doesn't make any difference if visibility is changed from the parent node or some of the CSG-nodes. This does not happen in version 4.1.3 stable.\r\nVideo:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/50438441\/0cf1bffe-432c-4157-ae5e-f6972fe224d4\r\n\r\nAlthough not seen in the video it doesn't matter which way the visibility is changed or which node's visibility is changed (parent or any CSG-node).\r\n\r\n### Steps to reproduce\r\n\r\n- Create a CSG-node\r\n- Change CSG-node's visibility. Editor freezes and shuts down after a while.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[CSGVisibilityChangeCrash.zip](https:\/\/github.com\/godotengine\/godot\/files\/14635733\/CSGVisibilityChangeCrash.zip)\r\n","comments":["Sounds like:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/84304\r\n\r\nWhich was caused by something cherry picked for 4.1.4","Investigated this a bit and it indeed looks like the cherry-picked commit cf61f5e93809c9f80efdea08f733f2615867cb1d (PR https:\/\/github.com\/godotengine\/godot\/pull\/84174 ) is related to this. Editor doesn't crash after reverting changes by that commit. @jsjtxietian \r\n\r\nTested also 4.3.dev5 and 4.2.1.stable and crash doesn't happen. So the change is somehow incompatible with 4.1? I could investigate this deeper but I don't understand enough of the intricacies in this.","Yes looks like the fix (https:\/\/github.com\/godotengine\/godot\/pull\/84338) should also be cherry-picked?","Can confirm that cherry-picking the aforementioned PR (https:\/\/github.com\/godotengine\/godot\/pull\/84338) fixes the editor crash with the project it first manifested in and with the MRP above. (Although I \"cherry picked\" it by copy-paste)."],"labels":["bug","topic:editor","crash","regression","topic:3d"]},{"title":"GDScript: Fix object iterator opcodes","body":"* Fixes #89290.","comments":[],"labels":["bug","topic:gdscript"]},{"title":"[4.2] Fix Bezier Editor throwing error when adding key with CTRL+click","body":"This is a backport of https:\/\/github.com\/godotengine\/godot\/pull\/88360\r\n","comments":[],"labels":["bug","topic:editor","topic:animation"]},{"title":"Missing option in contextual menu of the bottom section of the `FileSystem` dock","body":"### Tested versions\r\n\r\n- v4.3.dev.custom_build [fe01776f0]\r\n- v4.3.dev4.official [df78c0636]\r\n\r\n### System information\r\n\r\nlinux\r\n\r\n### Issue description\r\n\r\nWhen right-clicking an *empty* section of the `FileSystem` dock's lower half (in split mode), the popup menu is missing the last `open in terminal` option.\r\n\r\n| upper half (folder tree)                                                                                   | empty space on files half                                                                         |\r\n|-----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|\r\n| ![image](https:\/\/github.com\/godotengine\/godot\/assets\/71937306\/019bb270-84ca-45d7-b964-5561124d6934) | ![image](https:\/\/github.com\/godotengine\/godot\/assets\/71937306\/064ccf88-a8a0-43e0-a260-76f9c4e1c1b1) |\r\n\r\n\r\n- it only happens on the menu for when an empty space is clicked,\r\n- it only happens when clicking in the \"files\" half of the *split view*: the tree-only view works correctly.\r\n\r\n### Steps to reproduce\r\n\r\nright click on an empty space in the `FileSystem` tab in split mode \r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nany","comments":["It's not cut off, it looks like the bottom half of the split mode just doesn't have an `Open in Terminal` option. I'm not sure why this is the case though.\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/10054226\/debc2bcc-c079-4c4b-baf2-d0d967f2f297)\r\n","I think I have a solution, will update\r\n\r\nEdit: Indeed was simple, will open a PR"],"labels":["bug","topic:editor","usability"]},{"title":"Add handedness enum for `is_polygon_clockwise`","body":"When this was originally implemented in 16022da18793823bf9d3530f1ae9a21501b4faec, the implementation treated the vertices as being in a space where the y-axis is positive in the up direction. This causes it to return the incorrect value for 2D games, since Godot treats the y-axis as being positive in the down direction.\r\n\r\nThis change maintains compatibility with existing uses of `is_polygon_clockwise` by adding an optional parameter which allows the user to select which handedness their coordinate system uses. The documentation for `is_polygon_clockwise` has also been updated to describe the difference.\r\n\r\nThis PR replaces #80035, from which it differs in the following ways:\r\n- Compatibility with existing calls is preserved.\r\n- Instead of always flipping the return result, the return result is only flipped when the left-handed version is asked for.\r\n\r\nFixes godotengine\/godot#49716.","comments":["For compatibility you need to add compatibility bindings, will explain how to add those, when I'm back at my computer ","This needs to be added:\r\n```diff\r\ndiff --git a\/core\/core_bind.compat.inc b\/core\/core_bind.compat.inc\r\nnew file mode 100644\r\nindex 0000000000..aa4399bb76\r\n--- \/dev\/null\r\n+++ b\/core\/core_bind.compat.inc\r\n@@ -0,0 +1,47 @@\r\n+\/**************************************************************************\/\r\n+\/*  core_bind.compat.inc                                                  *\/\r\n+\/**************************************************************************\/\r\n+\/*                         This file is part of:                          *\/\r\n+\/*                             GODOT ENGINE                               *\/\r\n+\/*                        https:\/\/godotengine.org                         *\/\r\n+\/**************************************************************************\/\r\n+\/* Copyright (c) 2014-present Godot Engine contributors (see AUTHORS.md). *\/\r\n+\/* Copyright (c) 2007-2014 Juan Linietsky, Ariel Manzur.                  *\/\r\n+\/*                                                                        *\/\r\n+\/* Permission is hereby granted, free of charge, to any person obtaining  *\/\r\n+\/* a copy of this software and associated documentation files (the        *\/\r\n+\/* \"Software\"), to deal in the Software without restriction, including    *\/\r\n+\/* without limitation the rights to use, copy, modify, merge, publish,    *\/\r\n+\/* distribute, sublicense, and\/or sell copies of the Software, and to     *\/\r\n+\/* permit persons to whom the Software is furnished to do so, subject to  *\/\r\n+\/* the following conditions:                                              *\/\r\n+\/*                                                                        *\/\r\n+\/* The above copyright notice and this permission notice shall be         *\/\r\n+\/* included in all copies or substantial portions of the Software.        *\/\r\n+\/*                                                                        *\/\r\n+\/* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,        *\/\r\n+\/* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF     *\/\r\n+\/* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. *\/\r\n+\/* IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY   *\/\r\n+\/* CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,   *\/\r\n+\/* TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE      *\/\r\n+\/* SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.                 *\/\r\n+\/**************************************************************************\/\r\n+\r\n+#ifndef DISABLE_DEPRECATED\r\n+\r\n+namespace core_bind {\r\n+\r\n+\/\/\/\/\/\/ Geometry2D \/\/\/\/\/\/\r\n+\r\n+bool Geometry2D::_is_polygon_clockwise_bind_compat_89635(const Vector<Vector2> &p_polygon) {\r\n+       return is_polygon_clockwise(p_polygon, RIGHT_HAND);\r\n+}\r\n+\r\n+void Geometry2D::_bind_compatibility_methods() {\r\n+       ClassDB::bind_compatibility_method(D_METHOD(\"is_polygon_clockwise\", \"polygon\"), &Geometry2D::_is_polygon_clockwise_bind_compat_89635);\r\n+}\r\n+\r\n+} \/\/ namespace core_bind\r\n+\r\n+#endif \/\/ DISABLE_DEPRECATED\r\ndiff --git a\/core\/core_bind.cpp b\/core\/core_bind.cpp\r\nindex 6927db002b..2185775dc0 100644\r\n--- a\/core\/core_bind.cpp\r\n+++ b\/core\/core_bind.cpp\r\n@@ -29,6 +29,7 @@\r\n \/**************************************************************************\/\r\n \r\n #include \"core_bind.h\"\r\n+#include \"core_bind.compat.inc\"\r\n \r\n #include \"core\/config\/project_settings.h\"\r\n #include \"core\/crypto\/crypto_core.h\"\r\ndiff --git a\/core\/core_bind.h b\/core\/core_bind.h\r\nindex 305f616cef..e27bfa26ef 100644\r\n--- a\/core\/core_bind.h\r\n+++ b\/core\/core_bind.h\r\n@@ -257,6 +257,11 @@ class Geometry2D : public Object {\r\n protected:\r\n \tstatic void _bind_methods();\r\n \r\n+#ifndef DISABLE_DEPRECATED\r\n+\tbool _is_polygon_clockwise_bind_compat_89635(const Vector<Vector2> &p_polygon);\r\n+\tstatic void _bind_compatibility_methods();\r\n+#endif \/\/ DISABLE_DEPRECATED\r\n+\r\n public:\r\n \tstatic Geometry2D *get_singleton();\r\n \tVariant segment_intersects_segment(const Vector2 &p_from_a, const Vector2 &p_to_a, const Vector2 &p_from_b, const Vector2 &p_to_b);\r\ndiff --git a\/misc\/extension_api_validation\/4.2-stable.expected b\/misc\/extension_api_validation\/4.2-stable.expected\r\nindex 8623e8eb25..cf4cb1590f 100644\r\n--- a\/misc\/extension_api_validation\/4.2-stable.expected\r\n+++ b\/misc\/extension_api_validation\/4.2-stable.expected\r\n@@ -248,3 +248,10 @@ Validate extension JSON: Error: Field 'classes\/AcceptDialog\/methods\/register_tex\r\n Validate extension JSON: Error: Field 'classes\/AcceptDialog\/methods\/remove_button\/arguments\/0': type changed value in new API, from \"Control\" to \"Button\".\r\n \r\n Changed argument type to the more specific one actually expected by the method. Compatibility method registered.\r\n+\r\n+\r\n+GH-89635\r\n+--------\r\n+Validate extension JSON: Error: Field 'classes\/Geometry2D\/methods\/is_polygon_clockwise\/arguments': size changed value in new API, from 1 to 2.\r\n+\r\n+Added handedness argument. Compatibility method registered.\r\n\r\n```","@AThousandShips Added in 5d606feff84f4c129ead0ae73600172af0f690b4. I'm not terribly familiar with how this works but I'll try to keep it in mind for future PRs.","When I have the energy and time I'm going to write a doc page on this, but it's a bit of a large task so haven't been able to focus on it","Agree that more eyes on this would be good. Imo it would benefit from some more \"user friendliness\" opinions:\r\n\r\n* First, just to re-iterate, I'm not absolutely sure whether right handed and left handed coordinate system is the correct term for this in 2D, we need a mathematician to confirm \/ or change to the correct term. I used this because it seemed \"similar\" to the cases in 3D.\r\n* I suspect the documentation needs to make more clear when and why this flip might be needed, and why. At the moment it seems very unclear to users (it's not a simple concept, evidently).\r\n\r\nAlso, we should always consider the alternative - to keep the function the same, and simply mention this problem in the classref and documentation, and leave it to the user to flip where necessary (after all it's just a single operator). I would slightly lean towards making it explicit as in this PR, but opinions may differ on this.\r\n\r\nThis probably needs some more bikeshedding on how to best handle before proceeding, as it isn't clear cut."],"labels":["bug","discussion","topic:core","topic:2d"]},{"title":"Godot Crash at startup.","body":"### Tested versions\r\n\r\ni tried also  in the stable version 4.0.4 \r\n\r\n### System information\r\n\r\nWindows 10,  Macbook 10,2 (retina late 2012), i5-3210M, intel hd 4000 (i am using an older driver cause the new ones have problems on this mac), 8 Gb ram\r\n\r\n### Issue description\r\n\r\ni just installed godot 4.2.1 form steam. it crashed at start. i downloaded the version form the official site and open in command promt. i get this error. `WARNING: Project setting: rendering\/limits\/global_shader_variables\/buffer_size exceeds maximum uniform buffer size of: 16384\r\n`\r\nalso i don't have any project. i just wanted to start to learn how to use.\r\n\r\n### Steps to reproduce\r\n\r\ni tried also  with the version 4.0.4. same error.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\ni can't open the app. so i can't make a project","comments":["You could also try run Godot with --verbose flag to get more info (https:\/\/docs.godotengine.org\/en\/stable\/tutorials\/editor\/command_line_tutorial.html)"],"labels":["bug","topic:rendering","crash"]},{"title":"UNUSED_SIGNAL warning if signal is only used via emit_signal() ","body":"### Tested versions\r\n\r\nv4.3.dev5 \r\nnot reproducable in v4.3.dev4 \r\n\r\n### System information\r\n\r\nmacOS 14.4\r\n\r\n### Issue description\r\n\r\nIf you emit signals using emit_signal(\"signal_name\") this will no longer register in 4.3dev5 as using this signal and trigger an UNUSED_SIGNAL warning for the signal. \r\n\r\n### Steps to reproduce\r\n\r\nWrite a simple script like\r\n\r\n```\r\nextends Node\r\n\r\nsignal value_changed()\r\n\r\nvar value:bool = false:\r\n\tset(new_value):\r\n\t\tif (new_value != value):\r\n\t\t\tvalue = new_value\r\n\t\t\temit_signal(\"value_changed\")\r\n```\r\n\r\nAnd observer the warning:\r\n`Line 3 (UNUSED_SIGNAL):The signal \"value_changed\" is declared but never explicitly used in the class.`\r\n\r\nIf you instead use `value_changed.emit()` the warning is not shown.\r\n\r\nIf the script is used in the project you'll get a similar warning in the debug output running the game. \r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nSee script lines above. ","comments":["Thank you for your report, consolidating in:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/40496","> Thank you for your report, consolidating in #40496:\r\n\r\nI do not think this is the same bug. The linked issue seems to be for a different problem from back in 3.x where you'd get the warning if you _did not_ explicitly use `emit_signal` (but emitted it in some other way). This seems more complicated since it's hard to tell in this cases if the signal is emitted or not. \r\n\r\nThe reported issue is that you now get the warning even when using `emit_signal` explicitly in the same class script with the signal name like in the example above. This bug is also seems new to 4.3dev5 (or a regression), it's not present in 4.3dev4 or previous 4.x versions as far as I've experienced. ","Yes, this is expected, which is why we added \"explicitly\" to the warning message. Note that you can use `Signal.emit()` (instead of `Object.emit_signal()`), which is a more recommended option.\r\n\r\nWe could add an exception for `emit_signal(constant_string)`, however this will not work in case of dynamic expressions and something like `call(\"emit_signal\", \"my_signal\")`.\r\n\r\n> This bug is also seems new to 4.3dev5 (or a regression), it's not present in 4.3dev4 or previous 4.x versions\r\n\r\nIt's a bug fix, the `UNUSED_SIGNAL` warning was never  produced before (in 4.x).","I see, but then I think it could be a good idea to either add an exception for `emit_signal(\"signal_name\")` for the specific signal (which I think could be seen as explicitly using the signal, even if technically it might not be) or be more clear in the warning that by explicit you mean using `signal_name.emit()` and that this is recommended. \r\n\r\nOtherwise I think you might get a lot more confused bug reports like this one once 4.3 is released and more people start getting these warnings that were not they may perceptive as incorrect just like I did."],"labels":["bug","discussion","topic:gdscript"]},{"title":"Editor: Fix same-name (sub)groups interfering in Inspector","body":"* Closes #71616.\r\n* Fixes #83336.\r\n* Fixes #83662.\r\n* Fixes #89620.\r\n\r\nClear (sub)group hashmaps when changing category.\r\n\r\n**Before**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/848b0724-14bd-4096-bc73-db6a78ebac21)\r\n\r\n**After**\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/05bdf50f-df5f-4de7-80fb-36907858ae79)","comments":["> This also fixes issues in some built-in nodes, like Polygon2D which has its own `texture` section. Not sure if it was reported.\r\n\r\nThese seem the same: #83336, #83662.","> These seem the same: #83336, #83662.\r\n\r\nThanks, I tested and this PR does indeed fix these issues."],"labels":["bug","topic:editor","cherrypick:4.2"]},{"title":"Make \"Pick Color\"'s result less precise, keep only 3 decimals","body":"This fixes half of https:\/\/github.com\/godotengine\/godot\/issues\/89354 , the other half I did not observe the problem yet.\r\n\r\nThe number of decimals is arbitrary, but I suppose 2-3 should be enough.\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:editor"]},{"title":"Add option to import skeleton rest as RESET animation","body":"Add option \"Import Rest as RESET\" to generate a RESET animation for a skeleton bone rest pose.\r\n\r\nAlso creates an AnimationPlayer if one does not exist.\r\nDesigned to be used in conjunction with PR #88824, loading rest pose in another importer\r\n\r\nWhen used in conjunction with #88824 , will resolve #65656 and #89244","comments":[],"labels":["enhancement","topic:import","topic:animation","topic:3d"]},{"title":"Fixes crash on `reparent()` with Node containing internal children","body":"Fixes #88146 - was not grabbing internal children (`get_child(i, false)`) but forgot to not grab internal children when calling `get_children()` :upside_down_face: \r\n\r\nI did not do a hugely exhaustive set of tests but the nodes that were listed in the original issue were fixed. Let me know if I can do anything else though or if there's something I missed.\r\n\r\nThanks!","comments":[],"labels":["bug","topic:core","crash","regression"]},{"title":"Account for scale in scroll logic for `Parallax2D`","body":"Previously, it was misunderstood how the scaling should be considering when scrolling. I originally just kinda copied how `ParallaxLayer` handles it, and recently discovered that it handles it incorrectly. Scaled `ParallaxLayer`s currently wrap at incorrect points. This can be fixed in a separate PR.\r\n\r\nThis change is for `Parallax2D` to have its scale not taken into account when the repeat is spaced, but the point in which it wraps when scrolling is updated. It shouldn't come up very often as it's not a recommended workflow, but it's good to handle it either way. I also should add some notes to the docs in the future for \"use at your own risk\" scenarios like scaling or moving parents.","comments":[],"labels":["bug","topic:2d"]},{"title":"Fix TextEdit selection end of line drawing for wrapped lines and gaps","body":"- related https:\/\/github.com\/godotengine\/godot\/pull\/72341\r\n\r\nThere were a couple of issues with the end of line drawing.\r\nFixes it being applied to all lines of wrapped text when the selection extended past it, instead of only the last one:\r\n\r\n![godot te wrapped line end](https:\/\/github.com\/godotengine\/godot\/assets\/10054226\/00b9eeb9-7b99-486d-840f-8345c6d454e4)\r\n\r\nFixes occasional gaps or overlaps. \r\nI can reproduce it only on certain lines of text and it changes based on zoom factor. It also depends on where the top of the selection is, usually at the start of a word:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/10054226\/ba4447f4-4157-45b4-ac78-9ce6d1d5ce24)\r\n\r\nFixes very small 1px selection end moving when the selection start is moved sometimes:\r\n\r\n![godot te select end jitter](https:\/\/github.com\/godotengine\/godot\/assets\/10054226\/d9651810-4ea3-4fd2-95e3-1a573722b08c)\r\n\r\n\r\nEdit: Made sure it works with rtl text at the end of the line.\r\n","comments":[],"labels":["bug","topic:gui"]},{"title":"Engine doesn't open certain scenes when you click them to open in version 4.2.2 rc1 Error \"Failed to instantiate scene\" at: (scene\/resources\/packed_scene.cpp:141)","body":"### Tested versions\n\n4.2.2 rc1\n\n### System information\n\nWindows 10 Pro Intel(R) Core(TM) i5-5200U CPU @ 2.20GHz   2.20 GHz Ram 16.0 GB\n\n### Issue description\n\nI'm making an RPG game and it has a lot of scenes of maps with tile sets. Some of those tile sets when you try to open them, especially when you first start the engine, the scene won't open. The error that appears reads \"Scene\/file \"blank\" appears to be invalid\/corrupt\". \r\n\r\n\r\nERROR: Failed to instantiate scene state of \"res:\/\/World\/TownOfValenz\/TownofVelez.tscn\", node count is 0. Make sure the PackedScene resource is valid.\r\n   at: (scene\/resources\/packed_scene.cpp:141)\r\n\n\n### Steps to reproduce\n\n1. Open any one scene in a large game with lots of tile set scenes.\r\n2. Click in the file system window at the bottom left corner of the screen. \r\n\n\n### Minimal reproduction project (MRP)\n\n[New Game Project2.zip](https:\/\/github.com\/godotengine\/godot\/files\/14629141\/New.Game.Project2.zip)\r\n","comments":[],"labels":["bug","topic:core"]},{"title":"Core: Implement autogenerator for `!=` operators","body":"Inspired by C++20 making `!=` operators implicit, I was looking for a way to prepare the repo for that conversion without compromising functionality nor readability. Initially this was achieved by wrapping all existing inequality operators in a c++20 define, though that made things incredibly cluttered. Instead, this PR adds an autogenerating define that replaces the old implementations entirely. This not only cleans up the codebase by consolidating logic, but it will allow for seamlessly excluding these operators when c++20 is officially supported.","comments":[],"labels":["enhancement","discussion","topic:core"]},{"title":"Linux - Portable installation of Blender not recognized for Blender import with error: Blender Path does not contain a Blender installation","body":"### Tested versions\n\n- Reproducible in: v4.3.dev.custom_build [f2045ba82]\n\n### System information\n\nGodot v4.3.dev (f2045ba82) - SteamOS holo - X11 - GLES3 (Compatibility) - AMD Custom GPU 0405 (vangogh, LLVM 15.0.7, DRM 3.54, 6.1.52-valve9-1-neptune-61) () - AMD Custom APU 0405 (8 Threads)\n\n### Issue description\n\nI'm running ArchLinux on a SteamDeck and trying to make .blend import work.\r\n\r\nI have first installed Blender via Flatpak as recommended, but it is known not to be supported (see https:\/\/www.reddit.com\/r\/godot\/comments\/16571z1\/how_to_set_blender_3_path\/)\r\n\r\nSo I did a classic portable install from https:\/\/www.blender.org\/download\/ > Linux (not Snap Store) and extracted archive into a folder and set that folder path in Godot when prompted from Blender path.\r\n\r\nHowever the popup still complained about the path with the error message:\r\n\r\n> Blender Path does not contain a Blender installation\r\n\r\nSo I don't know what to do, and I don't know the exact criterion for a Blender Path to be valid.\r\n\r\nApparently the only supported way is to install via some package manager (I do see a package `extra-3.5\/blender 17:3.5.1-8` when typing `yay blender` but that's Blender 3 not latest 4.0.2 so quite old - maybe some \"ppa\" can do the trick, but I'm not familiar with ArchLinux so not sure about the equivalent for 3rd-party repositories). But then what's the point of having a popup to prompt for a custom path?\n\n### Steps to reproduce\n\n1. Install Blender via portable Linux install (download and extract archive somewhere). Make sure not to also have a package install.\r\n2. Open a project and add some .blend file to the assets\r\n3. On the prompt window for Blender path, select path where you extracted Blender archive\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["What does the path look like? You need to specify the path to the blender executable itself (e.g. `~\/Downloads\/blender-3.6.5-linux-x64\/blender`), and not to the residing folder (e.g. `~\/Downloads\/blender-3.6.5-linux-x64`)\r\n\r\nIf the path looks correct, try running Godot from the command line (`godot -e --path \/path\/to\/project`) to check for any additional error info. Also check if the downloaded `blender` file is marked as executable."],"labels":["topic:thirdparty","needs testing","topic:import"]},{"title":"Weird `@export_category, @export_group, @export_subgroup` behaviours in extended scripts","body":"### Tested versions\r\n\r\n- Reproducible in: v4.2.1.stable.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 10.0.22631 - Vulkan (Forward+) - dedicated AMD Radeon RX 580 2048SP () - Genuine Intel(R) CPU 0000 @ 2.60GHz (16 Threads)\r\n\r\n### Issue description\r\n\r\nWhen adding new variables to categories, groups, or subgroups that are already exported, the category shows up twice in the inspector. Additionally, the order of the groups or subgroups gets messed up, even if they're listed in the same order in both scripts.\r\n\r\n### Steps to reproduce\r\n\r\n- Add a node\r\n- Add a new script to the node and paste the following content to the script:\r\n\r\n```gdscript\r\nextends Node\r\n@export_category(\"Category\")\r\n@export_group(\"Test Group\")\r\n@export_subgroup(\"Test Subgroup 1\")\r\n@export var base_variable1 : float\r\n@export_subgroup(\"Test Subgroup 2\")\r\n@export var base_variable2 : float\r\n```\r\n\r\n- Extend the script by right clicking on the node and select the \"Extend Script\" option in the context menu that pops up\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/116043881\/d9fbe7b4-5740-4b10-9ff7-61199a847aec)\r\n\r\n- In this new script add the following lines of code:\r\n\r\n```gdscript\r\n@export_category(\"Category\")\r\n@export_group(\"Test Group\")\r\n@export_subgroup(\"Test Subgroup 1\")\r\n@export_subgroup(\"Test Subgroup 2\")\r\n@export var extended_variable : float\r\n```\r\n\r\n- Save both scripts, and you can now see the issue in the inspector.\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/116043881\/bf6318d6-fed5-47fe-8f5b-af52b2bfca91)\r\n\r\n\r\n**Additional Steps:**\r\n- Add another node as a child of the first node you created, and attach the 'base_script' to this new node, to better see the difference.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[Exported Categories and Groups Issue.zip](https:\/\/github.com\/godotengine\/godot\/files\/14628601\/Exported.Categories.and.Groups.Issue.zip)\r\n","comments":[],"labels":["bug","topic:editor"]},{"title":"[Core] Fix `rand_weighted` not using the current state","body":"The method incorrectly used `Math::randf` instead of `randf`\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89618\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:core"]},{"title":"rand_weighted uses the global RNG state instead of the instance one","body":"### Tested versions\n\n- reproducible in: v4.3.dev5.official [89f70e98d]\n\n### System information\n\nGodot v4.3.dev5 - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1050 (NVIDIA; 31.0.15.5176) - AMD Ryzen 5 2600X Six-Core Processor (12 Threads)\n\n### Issue description\n\nThe function rand_weighted of the RandomNumberGenerator class uses the global RNG state instead of the instance one.\n\n### Steps to reproduce\n\n\r\nyou can reproduce this calling several times the following function:\r\n\r\n```\r\nfunc printTest() -> void:\r\n\tvar rng := RandomNumberGenerator.new()\r\n\trng.seed = 11\r\n\tfor i in range(5):\r\n\t\tprints(\r\n\t\t\trng.state,\r\n\t\t\trng.randi(),\r\n\t\t\trng.randi_range(10, 20),\r\n\t\t\trng.randf(),\r\n\t\t\trng.randf_range(1.0, 10.0),\r\n\t\t\trng.randfn(),\r\n\t\t\trng.rand_weighted([1,1,1,1,1,1]),\r\n\t\t\t)\r\n\tprint()\r\n```\r\nIt will produce the following output (except for the last column)\r\nthis indicates that all the functions used use the instance RNG state, but rand_weighted does not.\r\n\r\n```\r\n6334680398940262529  3351202525 13 0.409652531147   3.65621042251587 2.31155848503113  1\r\n-9188889077636703101 1105596244 19 0.83175539970398 6.92972946166992 -0.67187792062759 4\r\n-1098013312105699179 1637302916 14 0.29929420351982 8.81892585754395 0.06118292361498  3\r\n4219014458134508855  950222714  11 0.52633619308472 2.32709813117981 1.91224896907806  4\r\n8808048545931888361  4241788697 19 0.2318412065506  7.45006895065308 -0.10293079912663 5\r\n\r\n6334680398940262529  3351202525 13 0.409652531147   3.65621042251587 2.31155848503113  1\r\n-9188889077636703101 1105596244 19 0.83175539970398 6.92972946166992 -0.67187792062759 1\r\n-1098013312105699179 1637302916 14 0.29929420351982 8.81892585754395 0.06118292361498  4\r\n4219014458134508855  950222714  11 0.52633619308472 2.32709813117981 1.91224896907806  1\r\n8808048545931888361  4241788697 19 0.2318412065506  7.45006895065308 -0.10293079912663 1\r\n\r\n6334680398940262529  3351202525 13 0.409652531147 3.65621042251587   2.31155848503113  1\r\n-9188889077636703101 1105596244 19 0.83175539970398 6.92972946166992 -0.67187792062759 1\r\n-1098013312105699179 1637302916 14 0.29929420351982 8.81892585754395 0.06118292361498  3\r\n4219014458134508855  950222714  11 0.52633619308472 2.32709813117981 1.91224896907806  2\r\n8808048545931888361  4241788697 19 0.2318412065506 7.45006895065308  -0.10293079912663 5\r\n\r\n```\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:core","confirmed"]},{"title":"Add unit test for Vector2 `plane_project`","body":null,"comments":[],"labels":["enhancement","topic:core","topic:tests"]},{"title":"get_overlapping_areas() can`t detect resumed Area2D from pause.","body":"### Tested versions\r\n\r\n4.2.1.stable, 4.3.dev5\r\n\r\n### System information\r\n\r\nwin11\r\n\r\n### Issue description\r\n\r\nArea.get_overlapping_areas() can`t detect resumed Area2D from pause. Where Area2D disable mode is set to remove, pause by setting process_mode to disable. \r\n\r\n### Steps to reproduce\r\n\r\nmake a scene like this \r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/91177204\/ed4dab68-47d3-4ab6-9c5e-e86575f7fe4e)\r\n```\r\n\r\nextends Node2D\r\n\r\n@onready var area_2d = $Area2D\r\n@onready var area_2d_2 = $Area2D2\r\n\r\nfunc _ready():\r\n\tprint(\"timer 0.2\")\r\n\tawait get_tree().create_timer(0.2).timeout\r\n\tprint(\"area_2d overlap\")\r\n\tprint(area_2d.get_overlapping_areas())\r\n\tprint(\"timer 0.2\")\r\n\tawait get_tree().create_timer(0.2).timeout\r\n\tprint(\"pasue area2\")\r\n\tarea_2d_2.process_mode = Node.PROCESS_MODE_DISABLED\r\n\tprint(\"timer 0.2\")\r\n\tawait get_tree().create_timer(0.2).timeout\r\n\tprint(\"area_2d overlap\")\r\n\tprint(area_2d.get_overlapping_areas())\r\n\tprint(\"resume area2\")\r\n\tarea_2d_2.process_mode = Node.PROCESS_MODE_INHERIT\r\n\tprint(\"timer 0.2\")\r\n\tawait get_tree().create_timer(0.2).timeout\r\n\tprint(\"area_2d overlap\")\r\n\tprint(area_2d.get_overlapping_areas())\r\n\tprint(\"move area_2d2 Vector2.RIGHT * 0.1\")\r\n\tarea_2d_2.position += Vector2.RIGHT * 0.1\r\n\tprint(\"timer 0.2\")\r\n\tawait get_tree().create_timer(0.2).timeout\r\n\tprint(\"area_2d overlap\")\r\n\tprint(area_2d.get_overlapping_areas())\r\n```\r\noutput\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/91177204\/a3b4d3c7-d86d-40cb-89a0-4846f9101979)\r\nThe area_2d_2 is detected after its position changes.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[BugArea2d.zip](https:\/\/github.com\/godotengine\/godot\/files\/14628142\/BugArea2d.zip)\r\n","comments":["![image](https:\/\/github.com\/godotengine\/godot\/assets\/91177204\/07ddac7b-2689-4d0c-89f2-e0372a61a14b)\r\nsame in 4.3.dev5"],"labels":["bug","topic:physics","topic:2d"]},{"title":"Editor crashes when changing a node's type to StatusIndicator","body":"### Tested versions\n\n- Reproducible in: v4.3.dev5.official [89f70e98d], v4.3.dev4.official [df78c0636]\r\n- Not reproducible in: all previous Godot versions\n\n### System information\n\nGodot v4.3.dev5 - Windows 11 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 4070 Laptop GPU (NVIDIA; 31.0.15.5161) - 13th Gen Intel(R) Core(TM) i9-13900H (20 Threads)\n\n### Issue description\n\nAdding a node to the tree and changing its type to StatusIndicator crashes the editor.\n\n### Steps to reproduce\n\n1. Add a node to the scene tree.\r\n2. Right-click it and select \"Change Type...\"\r\n3. Select StatusIndicator from the menu and click \"Change\".\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["Sounds similar to:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/89425"],"labels":["bug","topic:editor","crash"]},{"title":"Godot (C#) on MacOS - Editor crashes on exit and sometimes when opening a project","body":"### Tested versions\n\n- Reproducible in v4.3.dev5.mono\r\n- Not reproducible in v4.3.dev5\n\n### System information\n\nGodot v4.3.dev5.mono - macOS 14.4.0 - Vulkan (Forward+) - dedicated AMD Radeon Pro 5500M - Intel(R) Core(TM) i9-9980HK CPU @ 2.40GHz (16 Threads)\n\n### Issue description\n\nWhen quitting the editor or going back to the project list, it crashes. Here's the output from the Apple crash reporter. I didn't include the full report because I hit the maximum characters limit for this field.\r\n\r\n```\r\n-------------------------------------\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               Godot [43456]\r\nPath:                  \/Applications\/Godot_mono.app\/Contents\/MacOS\/Godot\r\nIdentifier:            org.godotengine.godot\r\nVersion:               4.3 (4.3)\r\nCode Type:             X86-64 (Native)\r\nParent Process:        launchd [1]\r\nUser ID:               501\r\n\r\nDate\/Time:             2024-03-17 11:24:55.3690 -0400\r\nOS Version:            macOS 14.4 (23E214)\r\nReport Version:        12\r\nBridge OS Version:     8.4 (21P4222)\r\nAnonymous UUID:        E3265F11-2B74-117F-B9E6-5148E0B808F8\r\n\r\nSleep\/Wake UUID:       47560EBA-A222-4DAA-A7F8-088636183CAB\r\n\r\nTime Awake Since Boot: 490000 seconds\r\nTime Since Wake:       1136 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_CRASH (SIGABRT)\r\nException Codes:       0x0000000000000000, 0x0000000000000000\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 6 Abort trap: 6\r\nTerminating Process:   Godot [43456]\r\n\r\nApplication Specific Information:\r\nabort() called\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_kernel.dylib        \t    0x7ff8036d014a __pthread_kill + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff803708ebd pthread_kill + 262\r\n2   libsystem_c.dylib             \t    0x7ff80362ead9 __abort + 145\r\n3   libsystem_c.dylib             \t    0x7ff80362ea48 abort + 141\r\n4   libsystem_malloc.dylib        \t    0x7ff803533009 malloc_vreport + 857\r\n5   libsystem_malloc.dylib        \t    0x7ff8035365da malloc_report + 151\r\n6   Godot                         \t       0x107d01a36 0x103345000 + 77318710\r\n7   Godot                         \t       0x104336440 0x103345000 + 16716864\r\n8   Godot                         \t       0x10568c1be 0x103345000 + 36991422\r\n9   Godot                         \t       0x104e5d616 0x103345000 + 28411414\r\n10  Godot                         \t       0x104e5beea 0x103345000 + 28405482\r\n11  Godot                         \t       0x104f2f638 0x103345000 + 29271608\r\n12  Godot                         \t       0x105a982e3 0x103345000 + 41235171\r\n13  Godot                         \t       0x107c47107 0x103345000 + 76554503\r\n14  Godot                         \t       0x105ae0225 0x103345000 + 41529893\r\n15  Godot                         \t       0x103ba0ff2 0x103345000 + 8765426\r\n16  Godot                         \t       0x103bcef90 0x103345000 + 8953744\r\n17  dyld                          \t    0x7ff80337d366 start + 1942\r\n\r\nThread 1:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 2:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 3:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x10781b67b _IP_ResolverPrivate::_thread_function(void*) + 171\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 4:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 5:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 6:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 7:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 8:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 9:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 10:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 11:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 12:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 13:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 14:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 15:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 16:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 17:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 18:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 19:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x107c9bb3e 0x103345000 + 76901182\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 20:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 21:: com.apple.NSEventThread\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c93ce mach_msg2_trap + 10\r\n1   libsystem_kernel.dylib        \t    0x7ff8036d7c88 mach_msg2_internal + 84\r\n2   libsystem_kernel.dylib        \t    0x7ff8036d0510 mach_msg_overwrite + 653\r\n3   libsystem_kernel.dylib        \t    0x7ff8036c96bd mach_msg + 19\r\n4   CoreFoundation                \t    0x7ff8037e5be5 __CFRunLoopServiceMachPort + 143\r\n5   CoreFoundation                \t    0x7ff8037e4655 __CFRunLoopRun + 1371\r\n6   CoreFoundation                \t    0x7ff8037e3b32 CFRunLoopRunSpecific + 557\r\n7   AppKit                        \t    0x7ff806fa8abc _NSEventThread + 122\r\n8   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n9   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 22:: caulk.messenger.shared:17\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c934a semaphore_wait_trap + 10\r\n1   caulk                         \t    0x7ff80df11ba8 caulk::semaphore::timed_wait(double) + 150\r\n2   caulk                         \t    0x7ff80df11ac4 caulk::concurrent::details::worker_thread::run() + 30\r\n3   caulk                         \t    0x7ff80df117e8 void* caulk::thread_proxy<std::__1::tuple<caulk::thread::attributes, void (caulk::concurrent::details::worker_thread::*)(), std::__1::tuple<caulk::concurrent::details::worker_thread*>>>(void*) + 41\r\n4   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n5   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 23:: caulk.messenger.shared:high\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c934a semaphore_wait_trap + 10\r\n1   caulk                         \t    0x7ff80df11ba8 caulk::semaphore::timed_wait(double) + 150\r\n2   caulk                         \t    0x7ff80df11ac4 caulk::concurrent::details::worker_thread::run() + 30\r\n3   caulk                         \t    0x7ff80df117e8 void* caulk::thread_proxy<std::__1::tuple<caulk::thread::attributes, void (caulk::concurrent::details::worker_thread::*)(), std::__1::tuple<caulk::concurrent::details::worker_thread*>>>(void*) + 41\r\n4   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n5   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 24:: caulk::deferred_logger\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c934a semaphore_wait_trap + 10\r\n1   caulk                         \t    0x7ff80df11ba8 caulk::semaphore::timed_wait(double) + 150\r\n2   caulk                         \t    0x7ff80df11ac4 caulk::concurrent::details::worker_thread::run() + 30\r\n3   caulk                         \t    0x7ff80df117e8 void* caulk::thread_proxy<std::__1::tuple<caulk::thread::attributes, void (caulk::concurrent::details::worker_thread::*)(), std::__1::tuple<caulk::concurrent::details::worker_thread*>>>(void*) + 41\r\n4   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n5   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 25:: com.apple.audio.IOThread.client\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c93ce mach_msg2_trap + 10\r\n1   libsystem_kernel.dylib        \t    0x7ff8036d7c88 mach_msg2_internal + 84\r\n2   libsystem_kernel.dylib        \t    0x7ff8036d0510 mach_msg_overwrite + 653\r\n3   libsystem_kernel.dylib        \t    0x7ff8036c96bd mach_msg + 19\r\n4   CoreAudio                     \t    0x7ff805f03887 HALB_MachPort::SendSimpleMessageWithSimpleReply(unsigned int, unsigned int, int, int&, bool, unsigned int) + 103\r\n5   CoreAudio                     \t    0x7ff805dd109b HALC_ProxyIOContext::IOWorkLoop() + 4603\r\n6   CoreAudio                     \t    0x7ff805dcf7ad invocation function for block in HALC_ProxyIOContext::HALC_ProxyIOContext(unsigned int, unsigned int) + 73\r\n7   CoreAudio                     \t    0x7ff805f62b5c HALC_IOThread::Entry(void*) + 72\r\n8   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n9   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 26:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x10471264c 0x103345000 + 20764236\r\n4   Godot                         \t       0x1047124bd 0x103345000 + 20763837\r\n5   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n6   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 27:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c93ce mach_msg2_trap + 10\r\n1   libsystem_kernel.dylib        \t    0x7ff8036d7c88 mach_msg2_internal + 84\r\n2   libsystem_kernel.dylib        \t    0x7ff8036d0510 mach_msg_overwrite + 653\r\n3   libsystem_kernel.dylib        \t    0x7ff8036c96bd mach_msg + 19\r\n4   libcoreclr.dylib              \t       0x120816088 MachMessage::Receive(unsigned int) + 72\r\n5   libcoreclr.dylib              \t       0x1208152f2 SEHExceptionThread(void*) + 82\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 28:: .NET SynchManager\r\n0   libsystem_kernel.dylib        \t    0x7ff8036ce0ae kevent + 10\r\n1   libcoreclr.dylib              \t       0x12080917c CorUnix::CPalSynchronizationManager::ReadBytesFromProcessPipe(int, unsigned char*, int) + 460\r\n2   libcoreclr.dylib              \t       0x120808823 CorUnix::CPalSynchronizationManager::WorkerThread(void*) + 147\r\n3   libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n4   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n5   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 29:: .NET EventPipe\r\n0   libsystem_kernel.dylib        \t    0x7ff8036d01f2 poll + 10\r\n1   libcoreclr.dylib              \t       0x120b444ac ds_ipc_poll(_DiagnosticsIpcPollHandle*, unsigned long, unsigned int, void (*)(char const*, unsigned int)) + 172\r\n2   libcoreclr.dylib              \t       0x120bfacbe ds_ipc_stream_factory_get_next_available_stream(void (*)(char const*, unsigned int)) + 734\r\n3   libcoreclr.dylib              \t       0x120bf8acb server_thread(void*) + 203\r\n4   libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n5   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n6   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 30:: .NET DebugPipe\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c9b9a __open + 10\r\n1   libsystem_kernel.dylib        \t    0x7ff8036d2bde open + 202\r\n2   libcoreclr.dylib              \t       0x120b44f0f TwoWayPipe::WaitForConnection() + 31\r\n3   libcoreclr.dylib              \t       0x120b3da47 DbgTransportSession::TransportWorker() + 183\r\n4   libcoreclr.dylib              \t       0x120b3c635 DbgTransportSession::TransportWorkerStatic(void*) + 37\r\n5   libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 31:: .NET Debugger\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c83 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 323\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b772 WaitForMultipleObjectsEx + 82\r\n6   libcoreclr.dylib              \t       0x120b3ad69 DebuggerRCThread::MainLoop() + 217\r\n7   libcoreclr.dylib              \t       0x120b3ac3c DebuggerRCThread::ThreadProc() + 220\r\n8   libcoreclr.dylib              \t       0x120b3a9b5 DebuggerRCThread::ThreadProcStatic(void*) + 53\r\n9   libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n10  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n11  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 32:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b6ad WaitForSingleObjectEx + 77\r\n6   libcoreclr.dylib              \t       0x1209ffaab CLREventBase::WaitEx(unsigned int, WaitMode, PendingSync*) + 187\r\n7   libcoreclr.dylib              \t       0x12096feaf FinalizerThread::WaitForFinalizerEvent(CLREvent*) + 31\r\n8   libcoreclr.dylib              \t       0x12097008f FinalizerThread::FinalizerThreadWorker(void*) + 223\r\n9   libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n10  libcoreclr.dylib              \t       0x120906600 ManagedThreadBase::FinalizerBase(void (*)(void*)) + 32\r\n11  libcoreclr.dylib              \t       0x120970248 FinalizerThread::FinalizerThreadStart(void*) + 88\r\n12  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n13  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n14  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 33:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbe46 __semwait_signal + 10\r\n1   libsystem_c.dylib             \t    0x7ff8035be531 nanosleep + 199\r\n2   Godot                         \t       0x104a47aeb 0x103345000 + 24128235\r\n3   Godot                         \t       0x104ba4b02 0x103345000 + 25557762\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 34:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbe46 __semwait_signal + 10\r\n1   libsystem_c.dylib             \t    0x7ff8035be531 nanosleep + 199\r\n2   Godot                         \t       0x104a47aeb 0x103345000 + 24128235\r\n3   Godot                         \t       0x104bfde62 0x103345000 + 25923170\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 35:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libc++.1.dylib                \t    0x7ff803642d12 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n3   Godot                         \t       0x105940c6b 0x103345000 + 39828587\r\n4   Godot                         \t       0x1076e92cb 0x103345000 + 70927051\r\n5   Godot                         \t       0x1076e9634 0x103345000 + 70927924\r\n6   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n7   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 36:: .NET SigHandler\r\n0   libsystem_kernel.dylib        \t    0x7ff8036c9e2e read + 10\r\n1   libSystem.Native.dylib        \t       0x11ffe1eaf SignalHandlerLoop + 79\r\n2   libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n3   libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 37:: .NET TP Worker\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b658 PAL_WaitForSingleObjectPrioritized + 72\r\n6   libcoreclr.dylib              \t       0x120953108 WaitHandle_CorWaitOnePrioritizedNative + 40\r\n7   ???                           \t       0x121a3a99d ???\r\n8   ???                           \t       0x121a3ad55 ???\r\n9   ???                           \t       0x121a3ac60 ???\r\n10  ???                           \t       0x121a516ea ???\r\n11  ???                           \t       0x121a36e8e ???\r\n12  libcoreclr.dylib              \t       0x120adaf31 CallDescrWorkerInternal + 124\r\n13  libcoreclr.dylib              \t       0x120934e8b DispatchCallSimple(unsigned long*, unsigned int, unsigned long long, unsigned int) + 219\r\n14  libcoreclr.dylib              \t       0x120949628 ThreadNative::KickOffThread_Worker(void*) + 136\r\n15  libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n16  libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n17  libcoreclr.dylib              \t       0x1209496fa ThreadNative::KickOffThread(void*) + 170\r\n18  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n19  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n20  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 38:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b772 WaitForMultipleObjectsEx + 82\r\n6   libcoreclr.dylib              \t       0x120902c0a Thread::DoAppropriateWaitWorker(int, void**, int, unsigned int, WaitMode) + 730\r\n7   libcoreclr.dylib              \t       0x1208fe220 Thread::DoAppropriateWait(int, void**, int, unsigned int, WaitMode, PendingSync*) + 48\r\n8   libcoreclr.dylib              \t       0x120952f88 WaitHandleNative::CorWaitOneNative(void*, int) + 184\r\n9   ???                           \t       0x121a39b05 ???\r\n10  ???                           \t       0x121a4e982 ???\r\n11  ???                           \t       0x121a36e8e ???\r\n12  libcoreclr.dylib              \t       0x120adaf31 CallDescrWorkerInternal + 124\r\n13  libcoreclr.dylib              \t       0x120934e8b DispatchCallSimple(unsigned long*, unsigned int, unsigned long long, unsigned int) + 219\r\n14  libcoreclr.dylib              \t       0x120949628 ThreadNative::KickOffThread_Worker(void*) + 136\r\n15  libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n16  libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n17  libcoreclr.dylib              \t       0x1209496fa ThreadNative::KickOffThread(void*) + 170\r\n18  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n19  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n20  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 39:: .NET TP Worker\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b658 PAL_WaitForSingleObjectPrioritized + 72\r\n6   libcoreclr.dylib              \t       0x120953108 WaitHandle_CorWaitOnePrioritizedNative + 40\r\n7   ???                           \t       0x121a3a99d ???\r\n8   ???                           \t       0x121a3ad55 ???\r\n9   ???                           \t       0x121a3ac60 ???\r\n10  ???                           \t       0x121a516ea ???\r\n11  ???                           \t       0x121a36e8e ???\r\n12  libcoreclr.dylib              \t       0x120adaf31 CallDescrWorkerInternal + 124\r\n13  libcoreclr.dylib              \t       0x120934e8b DispatchCallSimple(unsigned long*, unsigned int, unsigned long long, unsigned int) + 219\r\n14  libcoreclr.dylib              \t       0x120949628 ThreadNative::KickOffThread_Worker(void*) + 136\r\n15  libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n16  libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n17  libcoreclr.dylib              \t       0x1209496fa ThreadNative::KickOffThread(void*) + 170\r\n18  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n19  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n20  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 40:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036ce0ae kevent + 10\r\n1   libSystem.Native.dylib        \t       0x11ffe0612 SystemNative_WaitForSocketEvents + 82\r\n2   ???                           \t       0x1231bf544 ???\r\n3   ???                           \t       0x1231e3094 ???\r\n4   ???                           \t       0x121a36edf ???\r\n5   libcoreclr.dylib              \t       0x120adaf31 CallDescrWorkerInternal + 124\r\n6   libcoreclr.dylib              \t       0x120934e8b DispatchCallSimple(unsigned long*, unsigned int, unsigned long long, unsigned int) + 219\r\n7   libcoreclr.dylib              \t       0x120949628 ThreadNative::KickOffThread_Worker(void*) + 136\r\n8   libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n9   libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n10  libcoreclr.dylib              \t       0x1209496fa ThreadNative::KickOffThread(void*) + 170\r\n11  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n12  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n13  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 41:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 42:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 43:\r\n0   libsystem_pthread.dylib       \t    0x7ff803704ac0 start_wqthread + 0\r\n\r\nThread 44:\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b6ad WaitForSingleObjectEx + 77\r\n6   libcoreclr.dylib              \t       0x1209ffaab CLREventBase::WaitEx(unsigned int, WaitMode, PendingSync*) + 187\r\n7   libcoreclr.dylib              \t       0x120909298 TieredCompilationManager::BackgroundWorkerStart() + 296\r\n8   libcoreclr.dylib              \t       0x1209090a8 TieredCompilationManager::BackgroundWorkerBootstrapper1(void*) + 88\r\n9   libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n10  libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n11  libcoreclr.dylib              \t       0x120908fe0 TieredCompilationManager::BackgroundWorkerBootstrapper0(void*) + 32\r\n12  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n13  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n14  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\nThread 45:: .NET TP Worker\r\n0   libsystem_kernel.dylib        \t    0x7ff8036cbf7a __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib       \t    0x7ff8037096f3 _pthread_cond_wait + 1211\r\n2   libcoreclr.dylib              \t       0x120806c36 CorUnix::CPalSynchronizationManager::ThreadNativeWait(CorUnix::_ThreadNativeWaitData*, unsigned int, CorUnix::ThreadWakeupReason*, unsigned int*) + 246\r\n3   libcoreclr.dylib              \t       0x1208068b0 CorUnix::CPalSynchronizationManager::BlockThread(CorUnix::CPalThread*, unsigned int, bool, bool, CorUnix::ThreadWakeupReason*, unsigned int*) + 368\r\n4   libcoreclr.dylib              \t       0x12080b4bb CorUnix::InternalWaitForMultipleObjectsEx(CorUnix::CPalThread*, unsigned int, void* const*, int, unsigned int, int, int) + 2203\r\n5   libcoreclr.dylib              \t       0x12080b658 PAL_WaitForSingleObjectPrioritized + 72\r\n6   libcoreclr.dylib              \t       0x120953108 WaitHandle_CorWaitOnePrioritizedNative + 40\r\n7   ???                           \t       0x121a3a99d ???\r\n8   ???                           \t       0x121a3ad55 ???\r\n9   ???                           \t       0x121a3ac60 ???\r\n10  ???                           \t       0x121a516ea ???\r\n11  ???                           \t       0x121a36e8e ???\r\n12  libcoreclr.dylib              \t       0x120adaf31 CallDescrWorkerInternal + 124\r\n13  libcoreclr.dylib              \t       0x120934e8b DispatchCallSimple(unsigned long*, unsigned int, unsigned long long, unsigned int) + 219\r\n14  libcoreclr.dylib              \t       0x120949628 ThreadNative::KickOffThread_Worker(void*) + 136\r\n15  libcoreclr.dylib              \t       0x12090607e ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 286\r\n16  libcoreclr.dylib              \t       0x1209065d0 ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n17  libcoreclr.dylib              \t       0x1209496fa ThreadNative::KickOffThread(void*) + 170\r\n18  libcoreclr.dylib              \t       0x120812fe7 CorUnix::CPalThread::ThreadEntry(void*) + 407\r\n19  libsystem_pthread.dylib       \t    0x7ff80370918b _pthread_start + 99\r\n20  libsystem_pthread.dylib       \t    0x7ff803704ae3 thread_start + 15\r\n\r\n\r\nThread 0 crashed with X86 Thread State (64-bit):\r\n  rax: 0x0000000000000000  rbx: 0x0000000000000006  rcx: 0x00007ff7bcbb9b48  rdx: 0x0000000000000000\r\n  rdi: 0x0000000000000103  rsi: 0x0000000000000006  rbp: 0x00007ff7bcbb9b70  rsp: 0x00007ff7bcbb9b48\r\n   r8: 0x0000000000000000   r9: 0x0000000000989680  r10: 0x0000000000000000  r11: 0x0000000000000246\r\n  r12: 0x0000000000000103  r13: 0x0000000000000003  r14: 0x00007ff846c3a100  r15: 0x0000000000000016\r\n  rip: 0x00007ff8036d014a  rfl: 0x0000000000000246  cr2: 0x0000000000000000\r\n  \r\nLogical CPU:     0\r\nError Code:      0x02000148 \r\nTrap Number:     133\r\n\r\n\r\nBinary Images:\r\n       0x11ffd5000 -        0x11ffe4fff libSystem.Native.dylib (*) <9301f232-aac6-3433-954b-5d5016920716> \/usr\/local\/share\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libSystem.Native.dylib\r\n       0x1211b9000 -        0x121434fff libclrjit.dylib (*) <46671b08-c0dc-3e22-8de8-94462ea4e808> \/usr\/local\/share\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libclrjit.dylib\r\n       0x1207da000 -        0x120cc5fff libcoreclr.dylib (*) <50e373c4-c314-3edb-be87-56c1a8845ae5> \/usr\/local\/share\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libcoreclr.dylib\r\n       0x1200e4000 -        0x120127fff libhostpolicy.dylib (*) <f27b49ce-cd42-35b6-bc8b-9b0dbb3ff2f3> \/usr\/local\/share\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.2\/libhostpolicy.dylib\r\n       0x120011000 -        0x120050fff libhostfxr.dylib (*) <2daa3189-307d-3876-a5c7-1845b2589cc7> \/usr\/local\/share\/dotnet\/host\/fxr\/8.0.2\/libhostfxr.dylib\r\n       0x11d54d000 -        0x11d58efff com.apple.cmio.DAL.VDC-4 (810.0) <1dcebcfa-d7d1-3f5d-a51a-d9f0c50f6c13> \/System\/Library\/Frameworks\/CoreMediaIO.framework\/Versions\/A\/Resources\/VDC.plugin\/Contents\/MacOS\/VDC\r\n       0x11d602000 -        0x11d743fff com.apple.audio.units.Components (1.14) <be137002-f7ad-3fd0-bad8-d0527e2c1f9e> \/System\/Library\/Components\/CoreAudio.component\/Contents\/MacOS\/CoreAudio\r\n       0x10aeb1000 -        0x10aeb8fff com.apple.GameController.KeyboardAndMouseSupport (*) <8adb1f6e-8560-35ce-8e78-954e9e3c17f8> \/System\/Library\/Frameworks\/GameController.framework\/Versions\/A\/Resources\/KeyboardAndMouseSupport.bundle\/Contents\/MacOS\/KeyboardAndMouseSupport\r\n       0x10ac67000 -        0x10ac73fff libobjc-trampolines.dylib (*) <79fb585f-7491-3991-afe3-baa6d8f159df> \/usr\/lib\/libobjc-trampolines.dylib\r\n       0x103345000 -        0x109af5fff org.godotengine.godot (4.3) <6e8a9c46-4369-376f-b5bc-33b81a81dc44> \/Applications\/Godot_mono.app\/Contents\/MacOS\/Godot\r\n    0x7ff8036c8000 -     0x7ff803702ff7 libsystem_kernel.dylib (*) <626c5a82-5548-30f0-8845-bc7cb6516a5b> \/usr\/lib\/system\/libsystem_kernel.dylib\r\n    0x7ff803703000 -     0x7ff80370eff7 libsystem_pthread.dylib (*) <5a006814-83f4-3c80-ab1f-528cdd08c0ff> \/usr\/lib\/system\/libsystem_pthread.dylib\r\n    0x7ff8035af000 -     0x7ff803636ff7 libsystem_c.dylib (*) <6d02e870-f215-36ed-bf7d-435f66996bfe> \/usr\/lib\/system\/libsystem_c.dylib\r\n    0x7ff803525000 -     0x7ff803564fff libsystem_malloc.dylib (*) <62866e22-9e18-3fc8-bd4d-0eb34c1e1801> \/usr\/lib\/system\/libsystem_malloc.dylib\r\n    0x7ff803377000 -     0x7ff803407b5f dyld (*) <5b2b3c62-3e49-31c5-b117-076cf2197f43> \/usr\/lib\/dyld\r\n               0x0 - 0xffffffffffffffff ??? (*) <00000000-0000-0000-0000-000000000000> ???\r\n    0x7ff803637000 -     0x7ff8036b1ff3 libc++.1.dylib (*) <1ada3159-e0b9-3850-9d06-ed79891009e8> \/usr\/lib\/libc++.1.dylib\r\n    0x7ff80376a000 -     0x7ff803c04fec com.apple.CoreFoundation (6.9) <2780e326-c5fd-3a12-b906-b9449288005c> \/System\/Library\/Frameworks\/CoreFoundation.framework\/Versions\/A\/CoreFoundation\r\n    0x7ff806e0d000 -     0x7ff80823aff5 com.apple.AppKit (6.9) <4905ef83-f061-3c82-bc30-70a4def63eee> \/System\/Library\/Frameworks\/AppKit.framework\/Versions\/C\/AppKit\r\n    0x7ff80df10000 -     0x7ff80df35ff7 com.apple.audio.caulk (1.0) <176123f8-8f88-34b4-93be-139bf58128f7> \/System\/Library\/PrivateFrameworks\/caulk.framework\/Versions\/A\/caulk\r\n    0x7ff805be8000 -     0x7ff80630cffe com.apple.audio.CoreAudio (5.0) <e4618cd1-a677-3ec0-96d6-0c5bb9856d93> \/System\/Library\/Frameworks\/CoreAudio.framework\/Versions\/A\/CoreAudio\r\n\r\nExternal Modification Summary:\r\n  Calls made by other processes targeting this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by all processes on this machine:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n\r\nVM Region Summary:\r\nReadOnly portion of Libraries: Total=693.6M resident=0K(0%) swapped_out_or_unallocated=693.6M(100%)\r\nWritable regions: Total=4.6G written=0K(0%) resident=0K(0%) swapped_out=0K(0%) unallocated=4.6G(100%)\r\n\r\n                                VIRTUAL   REGION \r\nREGION TYPE                        SIZE    COUNT (non-coalesced) \r\n===========                     =======  ======= \r\nAccelerate framework               128K        1 \r\nActivity Tracing                   256K        1 \r\nCG image                           168K       16 \r\nColorSync                          240K       29 \r\nCoreAnimation                      348K       41 \r\nCoreGraphics                        16K        3 \r\nCoreUI image data                 1396K       10 \r\nFoundation                          16K        1 \r\nFoundation (reserved)                4K        1         reserved VM address space (unallocated)\r\nKernel Alloc Once                    8K        1 \r\nMALLOC                             4.6G      166 \r\nMALLOC guard page                   96K       24 \r\nSTACK GUARD                       56.2M       46 \r\nStack                             30.6M       46 \r\nVM_ALLOCATE                        2.5G     2829 \r\nVM_ALLOCATE (reserved)              72K        2         reserved VM address space (unallocated)\r\n__CTF                               824        1 \r\n__DATA                            26.4M      411 \r\n__DATA_CONST                      22.8M      254 \r\n__DATA_DIRTY                       911K      127 \r\n__FONT_DATA                        2352        1 \r\n__LINKEDIT                       191.5M       12 \r\n__OBJC_RO                         71.7M        1 \r\n__OBJC_RW                         2196K        2 \r\n__TEXT                           502.2M      427 \r\ndyld private memory               1284K        4 \r\nmapped file                      275.3M      223 \r\nshared memory                     1412K       31 \r\n===========                     =======  ======= \r\nTOTAL                              8.2G     4711 \r\nTOTAL, minus reserved VM space     8.2G     4711 \r\n\r\n```\r\n\r\nWhen opening a project, it sometimes crashes. Here's the output from Apple crash reporter. I didn't include the full report because I hit the maximum characters limit for this field.\r\n\r\n```\r\n-------------------------------------\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               Godot [43941]\r\nPath:                  \/Applications\/Godot_mono.app\/Contents\/MacOS\/Godot\r\nIdentifier:            org.godotengine.godot\r\nVersion:               4.3 (4.3)\r\nCode Type:             X86-64 (Native)\r\nParent Process:        launchd [1]\r\nUser ID:               501\r\n\r\nDate\/Time:             2024-03-17 11:34:53.9155 -0400\r\nOS Version:            macOS 14.4 (23E214)\r\nReport Version:        12\r\nBridge OS Version:     8.4 (21P4222)\r\nAnonymous UUID:        E3265F11-2B74-117F-B9E6-5148E0B808F8\r\n\r\nSleep\/Wake UUID:       47560EBA-A222-4DAA-A7F8-088636183CAB\r\n\r\nTime Awake Since Boot: 490000 seconds\r\nTime Since Wake:       1734 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BAD_INSTRUCTION (SIGILL)\r\nException Codes:       0x0000000000000001, 0x0000000000000000\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 4 Illegal instruction: 4\r\nTerminating Process:   exc handler [43941]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_unfair_lock\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t    0x7ff80373c334 _os_unfair_lock_recursive_abort + 23\r\n1   libsystem_platform.dylib      \t    0x7ff8037364f8 _os_unfair_lock_lock_slow + 275\r\n2   libsystem_malloc.dylib        \t    0x7ff803527fb9 tiny_malloc_should_clear + 123\r\n3   libsystem_malloc.dylib        \t    0x7ff803526e8a szone_malloc_should_clear + 65\r\n4   libsystem_malloc.dylib        \t    0x7ff803529019 nanov2_realloc + 68\r\n5   libsystem_malloc.dylib        \t    0x7ff803550ba3 _malloc_zone_realloc + 104\r\n6   libsystem_malloc.dylib        \t    0x7ff80355126f _realloc + 315\r\n7   Godot                         \t       0x11423a056 0x10fe9b000 + 70905942\r\n8   Godot                         \t       0x1148398e0 0x10fe9b000 + 77195488\r\n9   Godot                         \t       0x114822e1e 0x10fe9b000 + 77102622\r\n10  Godot                         \t       0x114837a49 0x10fe9b000 + 77187657\r\n11  Godot                         \t       0x1106fc791 0x10fe9b000 + 8787857\r\n12  Godot                         \t       0x1106fbb2c 0x10fe9b000 + 8784684\r\n13  libcoreclr.dylib              \t       0x12d2eaeec invoke_previous_action(sigaction*, int, __siginfo*, void*, bool) + 44\r\n14  libsystem_platform.dylib      \t    0x7ff803737fdd _sigtramp + 29\r\n15  ???                           \t    0x7ff700000006 ???\r\n16  libsystem_malloc.dylib        \t    0x7ff80352808f tiny_malloc_should_clear + 337\r\n17  libsystem_malloc.dylib        \t    0x7ff803526e8a szone_malloc_should_clear + 65\r\n18  Godot                         \t       0x114239e83 0x10fe9b000 + 70905475\r\n19  Godot                         \t       0x1119b33ee 0x10fe9b000 + 28410862\r\n20  Godot                         \t       0x1119b2dce 0x10fe9b000 + 28409294\r\n21  Godot                         \t       0x1119b1e7c 0x10fe9b000 + 28405372\r\n22  Godot                         \t       0x1147ae6f6 0x10fe9b000 + 76625654\r\n23  Godot                         \t       0x1107610fe 0x10fe9b000 + 9199870\r\n24  Godot                         \t       0x110724f76 0x10fe9b000 + 8953718\r\n25  dyld                          \t    0x7ff80337d366 start + 1942\r\n\r\n\r\n```\n\n### Steps to reproduce\n\nCrash on exit\r\n1. Open godot_mono\r\n2. Create or edit a current project\r\n3. Once loaded, quit Godot or choose to return to the project list\r\n4. Godot crashes\r\n\r\nCrash on open:\r\n1. Open godot_mono\r\n2. Create or edit a current project\r\n3. Godot beach balls while trying to load and then crashes\n\n### Minimal reproduction project (MRP)\n\nAny empty project will work","comments":["I am also having a very similar issue on Godot v4.3.dev5.mono for Apple Silicon. I'll post my details below.\r\n\r\n### System information\r\n\r\nGodot v4.3.dev5.mono - macOS 14.2.1 - Vulkan (Forward+) - Apple M2 Pro (16GB)\r\n\r\n### Issue Description\r\n\r\nGodot hangs on a newly created project. It is recognised as not responding by MacOS but it doesn't ever crash. No crash reports are thus generated. I haven't had time to idle test this to see if the project would open or if it comes to a crash. I do, however, have a 'diagnostic report' which shows that the application is churning through CPU cycles for an extended time. Unsure if this is helpful but might help diagnosing the issue.\r\n\r\n#### Godot_2024-03-19-114330_Lyes-MacBook-Pro.cpu_resource.diag\r\n```\r\nDate\/Time:        2024-03-19 11:41:17.550 +0000\r\nEnd time:         2024-03-19 11:43:30.402 +0000\r\nOS Version:       macOS 14.2.1 (Build 23C71)\r\nArchitecture:     arm64e\r\nReport Version:   44\r\nIncident Identifier: E029A378-7739-4F76-A8DB-9111333E5D29\r\n\r\nData Source:      Microstackshots\r\nShared Cache:     F9DDD844-7F3F-34BD-BE29-F0C72D5E5449 slid base address 0x187430000, slide 0x7430000\r\n\r\nCommand:          Godot\r\nPath:             \/Applications\/Godot 4.3 dev 5.app\/Contents\/MacOS\/Godot\r\nIdentifier:       org.godotengine.godot\r\nVersion:          4.3 (4.3)\r\nTeam ID:          6K46PWY5DM\r\nIs First Party:   No\r\nResource Coalition ID: 36698\r\nArchitecture:     arm64\r\nPID:              33237\r\n\r\nEvent:            cpu usage\r\nAction taken:     none\r\nCPU:              90 seconds cpu time over 133 seconds (68% cpu average), exceeding limit of 50% cpu over 180 seconds\r\nCPU limit:        90s\r\nLimit duration:   180s\r\nCPU used:         90s\r\nCPU duration:     133s\r\nDuration:         132.85s\r\nDuration Sampled: 131.54s\r\nSteps:            133\r\n\r\nHardware model:   Mac14,9\r\nActive cpus:      10\r\nHW page size:     16384\r\nVM page size:     16384\r\n\r\nFan speed:        0 rpm\r\nOS Cryptex File Extents: 7\r\n\r\nHeaviest stack for the target process:\r\n  97  thread_start + 8 (libsystem_pthread.dylib + 7740) [0x187868e3c]\r\n  97  _pthread_start + 136 (libsystem_pthread.dylib + 28724) [0x18786e034]\r\n  65  SEHExceptionThread(void*) + 156 (libcoreclr.dylib + 229208) [0x136473f58]\r\n  65  MachMessage::Receive(unsigned int) + 80 (libcoreclr.dylib + 232448) [0x136474c00]\r\n  65  mach_msg + 24 (libsystem_kernel.dylib + 7160) [0x18782dbf8]\r\n  65  mach_msg_overwrite + 476 (libsystem_kernel.dylib + 42160) [0x1878364b0]\r\n  65  mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n\r\n\r\nPowerstats for:   Godot [33237] [unique pid 132756]\r\nUUID:             840012F8-2C4D-3FA8-BD51-109B3F8651D5\r\nPath:             \/Applications\/Godot 4.3 dev 5.app\/Contents\/MacOS\/Godot\r\nIdentifier:       org.godotengine.godot\r\nVersion:          4.3 (4.3)\r\nTeam ID:          6K46PWY5DM\r\nIs First Party:   No\r\nResource Coalition ID: 36698\r\nArchitecture:     arm64\r\nFootprint:        437.06 MB -> 571.97 MB (+134.91 MB)\r\nPageins:          1 pages\r\nStart time:       2024-03-19 11:41:17.907 +0000\r\nEnd time:         2024-03-19 11:43:29.444 +0000\r\nNum samples:      133 (100%)\r\nPrimary state:    68 samples Non-Frontmost App, Non-Suppressed, Kernel mode, Effective Thread QoS Default, Requested Thread QoS Default, Override Thread QoS Unspecified\r\nUser Activity:    0 samples Idle, 133 samples Active\r\nPower Source:     133 samples on Battery, 0 samples on AC\r\n  97   thread_start + 8 (libsystem_pthread.dylib + 7740) [0x187868e3c]\r\n    97   _pthread_start + 136 (libsystem_pthread.dylib + 28724) [0x18786e034]\r\n      65   SEHExceptionThread(void*) + 156 (libcoreclr.dylib + 229208) [0x136473f58]\r\n        65   MachMessage::Receive(unsigned int) + 80 (libcoreclr.dylib + 232448) [0x136474c00]\r\n          65   mach_msg + 24 (libsystem_kernel.dylib + 7160) [0x18782dbf8]\r\n            65   mach_msg_overwrite + 476 (libsystem_kernel.dylib + 42160) [0x1878364b0]\r\n              65   mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n                8    <Frontmost App>\r\n                2    <User mode>\r\n                1    <Frontmost App, User mode>\r\n      26   SEHExceptionThread(void*) + 408 (libcoreclr.dylib + 229460) [0x136474054]\r\n        15   MachExceptionInfo::MachExceptionInfo(unsigned int, MachMessage&) + 156 (libcoreclr.dylib + 231576) [0x136474898]\r\n          14   thread_get_state + 260 (libsystem_kernel.dylib + 44056) [0x187836c18]\r\n            14   mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n              6    <User mode>\r\n          1    memcpy + 8 (libsystem_kernel.dylib + 6980) [0x18782db44]\r\n            1    <User mode>\r\n        5    MachExceptionInfo::MachExceptionInfo(unsigned int, MachMessage&) + 220 (libcoreclr.dylib + 231640) [0x1364748d8]\r\n          5    thread_get_state + 260 (libsystem_kernel.dylib + 44056) [0x187836c18]\r\n            5    mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n              3    <User mode>\r\n              1    <Frontmost App>\r\n        4    MachExceptionInfo::MachExceptionInfo(unsigned int, MachMessage&) + 188 (libcoreclr.dylib + 231608) [0x1364748b8]\r\n          4    thread_get_state + 260 (libsystem_kernel.dylib + 44056) [0x187836c18]\r\n            4    mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n              1    <Frontmost App>\r\n        1    thread_get_state + 464 (libsystem_kernel.dylib + 44260) [0x187836ce4]\r\n          1    <User mode>\r\n        1    thread_get_state + 0 (libsystem_kernel.dylib + 43796) [0x187836b14]\r\n          1    <User mode>\r\n      3    SEHExceptionThread(void*) + 1452 (libcoreclr.dylib + 230504) [0x136474468]\r\n        3    thread_set_state + 260 (libsystem_kernel.dylib + 197644) [0x18785c40c]\r\n          3    mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n            1    <User mode>\r\n      2    SEHExceptionThread(void*) + 144 (libcoreclr.dylib + 229196) [0x136473f4c]\r\n        2    MachMessage::ReplyToNotification(MachMessage&, int) + 360 (libcoreclr.dylib + 237072) [0x136475e10]\r\n          2    mach_msg + 24 (libsystem_kernel.dylib + 7160) [0x18782dbf8]\r\n            1    mach_msg_overwrite + 476 (libsystem_kernel.dylib + 42160) [0x1878364b0]\r\n              1    mach_msg2_trap + 8 (libsystem_kernel.dylib + 6260) [0x18782d874]\r\n                1    <Frontmost App>\r\n            1    voucher_mach_msg_fill_aux + 0 (libdispatch.dylib + 178672) [0x1876e49f0]\r\n              1    <User mode>\r\n      1    SEHExceptionThread(void*) + 248 (libcoreclr.dylib + 229300) [0x136473fb4]\r\n        1    MachMessage::GetException() + 40 (libcoreclr.dylib + 233660) [0x1364750bc]\r\n          1    <User mode>\r\n  36   start + 2360 (dyld + 24800) [0x1874ed0e0]\r\n    36   ??? (Godot + 7785532) [0x104b2cc3c]\r\n      35   ??? (Godot + 8007612) [0x104b62fbc]\r\n        35   ??? (Godot + 67178144) [0x1083d0ea0]\r\n          35   ??? (Godot + 24542296) [0x105b27c58]\r\n            35   ??? (Godot + 24545872) [0x105b28a50]\r\n              35   ??? (Godot + 47376396) [0x1070ee80c]\r\n                35   ??? (Godot + 47375792) [0x1070ee5b0]\r\n                  35   ??? (Godot + 31911728) [0x10622ef30]\r\n                    35   ??? (Godot + 66980496) [0x1083a0a90]\r\n                      35   ??? (Godot + 61893940) [0x107ec6d34]\r\n                        35   szone_malloc_should_clear + 92 (libsystem_malloc.dylib + 8904) [0x1876842c8]\r\n                          35   tiny_malloc_should_clear + 288 (libsystem_malloc.dylib + 13628) [0x18768553c]\r\n                            22   tiny_malloc_from_free_list.cold.1 + 4 (libsystem_malloc.dylib + 193172) [0x1876b1294]\r\n                              20   PAL_DispatchException + 0 (libcoreclr.dylib + 228628) [0x136473d14]\r\n                                12   <Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                                4    <User mode, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                                4    <Frontmost App, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                              2    PAL_DispatchExceptionWrapper + 16 (libcoreclr.dylib + 227884) [0x136473a2c]\r\n                                2    PAL_DispatchException + 80 (libcoreclr.dylib + 228708) [0x136473d64]\r\n                                  1    PAL_DispatchExceptionInner(_CONTEXT*, _EXCEPTION_RECORD*) + 100 (libcoreclr.dylib + 228848) [0x136473df0]\r\n                                    1    SEHProcessException(PAL_SEHException*) + 336 (libcoreclr.dylib + 32060) [0x136443d3c]\r\n                                      1    HandleHardwareException(PAL_SEHException*) + 396 (libcoreclr.dylib + 2330280) [0x136674ea8]\r\n                                        1    Debugger::FirstChanceNativeException(_EXCEPTION_RECORD*, _CONTEXT*, unsigned int, Thread*, int) + 144 (libcoreclr.dylib + 3210168) [0x13674bbb8]\r\n                                          1    DebuggerController::DispatchNativeException(_EXCEPTION_RECORD*, _CONTEXT*, unsigned int, Thread*) + 560 (libcoreclr.dylib + 3159184) [0x13673f490]\r\n                                            1    <Frontmost App, User mode, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                                  1    RestoreCompleteContext + 0 (libcoreclr.dylib + 227764) [0x1364739b4]\r\n                                    1    <User mode, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                            13   tiny_malloc_from_free_list.cold.2 + 0 (libsystem_malloc.dylib + 193172) [0x1876b1294]\r\n                              6    <User mode, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                              6    <Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n                              1    <Frontmost App, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n      1    ??? (Godot + 8007608) [0x104b62fb8]\r\n        1    ??? (Godot + 25258112) [0x105bd6880]\r\n          1    ??? (Godot + 26452620) [0x105cfa28c]\r\n            1    ??? (Godot + 23629636) [0x105a48f44]\r\n              1    ??? (Godot + 39978140) [0x1069e049c]\r\n                1    ??? (Godot + 67178144) [0x1083d0ea0]\r\n                  1    ??? (Godot + 38644848) [0x10689ac70]\r\n                    1    ??? (Godot + 36723036) [0x1066c595c]\r\n                      1    ??? (Godot + 50150456) [0x107393c38]\r\n                        1    ??? (Godot + 36875632) [0x1066ead70]\r\n                          1    ??? (Godot + 36652732) [0x1066b46bc]\r\n                            1    ??? (Godot + 67186692) [0x1083d3004]\r\n                              1    DYLD-STUB$$_platform_memset + 8 (libsystem_malloc.dylib + 193416) [0x1876b1388]\r\n                                1    <Frontmost App, User mode, Effective Thread QoS User Interactive, Requested Thread QoS User Interactive>\r\n\r\n  Binary Images:\r\n           0x1043c0000 -        0x10a6c7fff  org.godotengine.godot 4.3 (4.3)     <840012F8-2C4D-3FA8-BD51-109B3F8651D5>  \/Applications\/Godot 4.3 dev 5.app\/Contents\/MacOS\/Godot\r\n           0x13643c000 -        0x13692ffff  libcoreclr.dylib (0)                <43B09202-812A-3BCB-B5FF-CB4829A9C699>  \/usr\/local\/share\/dotnet\/shared\/Microsoft.NETCore.App\/8.0.0\/libcoreclr.dylib\r\n           0x1874e7000 -        0x18757b347  dyld (1125.5)                       <324E4AD9-E01F-3183-B09F-3E20B326643A>  \/usr\/lib\/dyld\r\n           0x187682000 -        0x1876b8fff  libsystem_malloc.dylib (474.0.13)   <690A8B04-8E64-3332-B5A5-56A3D5C1C43F>  \/usr\/lib\/system\/libsystem_malloc.dylib\r\n           0x1876b9000 -        0x1876fffff  libdispatch.dylib (1462.0.4)        <A53D555D-F748-3010-83FE-385C660A81BD>  \/usr\/lib\/system\/libdispatch.dylib\r\n           0x18782c000 -        0x187866fff  libsystem_kernel.dylib (10002.61.3) <CA94FC21-BC40-3B43-B65D-B87ECE9E1D48>  \/usr\/lib\/system\/libsystem_kernel.dylib\r\n           0x187867000 -        0x187873ff3  libsystem_pthread.dylib (519)       <A7D94C96-7B1F-3229-9BEA-048D037C3292>  \/usr\/lib\/system\/libsystem_pthread.dylib\r\n```\r\n\r\n### Steps to repoduce\r\n\r\n1. Open godot_mono (In my case, the application is renamed to `Godot 4.3 dev 5`)\r\n2. Create a new project.\r\n3. Godot hangs. The OS signifies that the application is not responding but the program doesn't close automatically.\r\n\r\n### Minimum reproduction project (MRP)\r\n\r\nMuch like OP, any empty project will replicate this issue. I've tried different naming conventions for the project but no changes otherwise. Project is set-up on Forward+ rendering and structured to use Git.","Okay so I've tried loading the editor through command line on the empty project I generated for my above report. This time, it crashed immediately. I've attached the full crash report, and I've put the output from the terminal below.\r\n\r\n```\r\nlyes@Lyes-MBP MacOS % .\/Godot --verbose --path \"\/Users\/lyes\/Documents\/Development Projects\/Godot 4\/fields-of-signed-distance\" --editor\r\nGodot Engine v4.3.dev5.mono.official.89f70e98d - https:\/\/godotengine.org\r\nTextServer: Added interface \"Dummy\"\r\nTextServer: Added interface \"ICU \/ HarfBuzz \/ Graphite (Built-in)\"\r\n[mvk-info] MoltenVK version 1.2.7, supporting Vulkan version 1.2.275.\r\n\tThe following 108 Vulkan extensions are supported:\r\n\t\tVK_KHR_16bit_storage v1\r\n\t\tVK_KHR_8bit_storage v1\r\n\t\tVK_KHR_bind_memory2 v1\r\n\t\tVK_KHR_buffer_device_address v1\r\n\t\tVK_KHR_calibrated_timestamps v1\r\n\t\tVK_KHR_copy_commands2 v1\r\n\t\tVK_KHR_create_renderpass2 v1\r\n\t\tVK_KHR_dedicated_allocation v3\r\n\t\tVK_KHR_deferred_host_operations v4\r\n\t\tVK_KHR_depth_stencil_resolve v1\r\n\t\tVK_KHR_descriptor_update_template v1\r\n\t\tVK_KHR_device_group v4\r\n\t\tVK_KHR_device_group_creation v1\r\n\t\tVK_KHR_driver_properties v1\r\n\t\tVK_KHR_dynamic_rendering v1\r\n\t\tVK_KHR_external_fence v1\r\n\t\tVK_KHR_external_fence_capabilities v1\r\n\t\tVK_KHR_external_memory v1\r\n\t\tVK_KHR_external_memory_capabilities v1\r\n\t\tVK_KHR_external_semaphore v1\r\n\t\tVK_KHR_external_semaphore_capabilities v1\r\n\t\tVK_KHR_fragment_shader_barycentric v1\r\n\t\tVK_KHR_format_feature_flags2 v2\r\n\t\tVK_KHR_get_memory_requirements2 v1\r\n\t\tVK_KHR_get_physical_device_properties2 v2\r\n\t\tVK_KHR_get_surface_capabilities2 v1\r\n\t\tVK_KHR_imageless_framebuffer v1\r\n\t\tVK_KHR_image_format_list v1\r\n\t\tVK_KHR_incremental_present v2\r\n\t\tVK_KHR_maintenance1 v2\r\n\t\tVK_KHR_maintenance2 v1\r\n\t\tVK_KHR_maintenance3 v1\r\n\t\tVK_KHR_map_memory2 v1\r\n\t\tVK_KHR_multiview v1\r\n\t\tVK_KHR_portability_subset v1\r\n\t\tVK_KHR_push_descriptor v2\r\n\t\tVK_KHR_relaxed_block_layout v1\r\n\t\tVK_KHR_sampler_mirror_clamp_to_edge v3\r\n\t\tVK_KHR_sampler_ycbcr_conversion v14\r\n\t\tVK_KHR_separate_depth_stencil_layouts v1\r\n\t\tVK_KHR_shader_draw_parameters v1\r\n\t\tVK_KHR_shader_float_controls v4\r\n\t\tVK_KHR_shader_float16_int8 v1\r\n\t\tVK_KHR_shader_non_semantic_info v1\r\n\t\tVK_KHR_shader_subgroup_extended_types v1\r\n\t\tVK_KHR_spirv_1_4 v1\r\n\t\tVK_KHR_storage_buffer_storage_class v1\r\n\t\tVK_KHR_surface v25\r\n\t\tVK_KHR_swapchain v70\r\n\t\tVK_KHR_swapchain_mutable_format v1\r\n\t\tVK_KHR_synchronization2 v1\r\n\t\tVK_KHR_timeline_semaphore v2\r\n\t\tVK_KHR_uniform_buffer_standard_layout v1\r\n\t\tVK_KHR_variable_pointers v1\r\n\t\tVK_KHR_vertex_attribute_divisor v1\r\n\t\tVK_EXT_4444_formats v1\r\n\t\tVK_EXT_buffer_device_address v2\r\n\t\tVK_EXT_calibrated_timestamps v2\r\n\t\tVK_EXT_debug_marker v4\r\n\t\tVK_EXT_debug_report v10\r\n\t\tVK_EXT_debug_utils v2\r\n\t\tVK_EXT_descriptor_indexing v2\r\n\t\tVK_EXT_extended_dynamic_state v1\r\n\t\tVK_EXT_extended_dynamic_state2 v1\r\n\t\tVK_EXT_extended_dynamic_state3 v2\r\n\t\tVK_EXT_external_memory_host v1\r\n\t\tVK_EXT_fragment_shader_interlock v1\r\n\t\tVK_EXT_hdr_metadata v2\r\n\t\tVK_EXT_headless_surface v1\r\n\t\tVK_EXT_host_query_reset v1\r\n\t\tVK_EXT_image_robustness v1\r\n\t\tVK_EXT_inline_uniform_block v1\r\n\t\tVK_EXT_layer_settings v2\r\n\t\tVK_EXT_memory_budget v1\r\n\t\tVK_EXT_metal_objects v1\r\n\t\tVK_EXT_metal_surface v1\r\n\t\tVK_EXT_pipeline_creation_cache_control v3\r\n\t\tVK_EXT_pipeline_creation_feedback v1\r\n\t\tVK_EXT_post_depth_coverage v1\r\n\t\tVK_EXT_private_data v1\r\n\t\tVK_EXT_robustness2 v1\r\n\t\tVK_EXT_sample_locations v1\r\n\t\tVK_EXT_scalar_block_layout v1\r\n\t\tVK_EXT_separate_stencil_usage v1\r\n\t\tVK_EXT_shader_atomic_float v1\r\n\t\tVK_EXT_shader_demote_to_helper_invocation v1\r\n\t\tVK_EXT_shader_stencil_export v1\r\n\t\tVK_EXT_shader_subgroup_ballot v1\r\n\t\tVK_EXT_shader_subgroup_vote v1\r\n\t\tVK_EXT_shader_viewport_index_layer v1\r\n\t\tVK_EXT_subgroup_size_control v2\r\n\t\tVK_EXT_surface_maintenance1 v1\r\n\t\tVK_EXT_swapchain_colorspace v4\r\n\t\tVK_EXT_swapchain_maintenance1 v1\r\n\t\tVK_EXT_texel_buffer_alignment v1\r\n\t\tVK_EXT_texture_compression_astc_hdr v1\r\n\t\tVK_EXT_vertex_attribute_divisor v3\r\n\t\tVK_AMD_gpu_shader_half_float v2\r\n\t\tVK_AMD_negative_viewport_height v1\r\n\t\tVK_AMD_shader_image_load_store_lod v1\r\n\t\tVK_AMD_shader_trinary_minmax v1\r\n\t\tVK_IMG_format_pvrtc v1\r\n\t\tVK_INTEL_shader_integer_functions2 v1\r\n\t\tVK_GOOGLE_display_timing v1\r\n\t\tVK_MVK_macos_surface v3\r\n\t\tVK_MVK_moltenvk v37\r\n\t\tVK_NV_fragment_shader_barycentric v1\r\n\t\tVK_NV_glsl_shader v1\r\n[mvk-info] GPU device:\r\n\t\tmodel: Apple M2 Pro\r\n\t\ttype: Integrated\r\n\t\tvendorID: 0x106b\r\n\t\tdeviceID: 0xe0203f0\r\n\t\tpipelineCacheUUID: 66F6FF1E-0E02-03F0-0000-000000000000\r\n\t\tGPU memory available: 10922 MB\r\n\t\tGPU memory used: 0 MB\r\n\tsupports the following Metal Versions, GPU's and Feature Sets:\r\n\t\tMetal Shading Language 3.1\r\n\t\tGPU Family Apple 8\r\n\t\tGPU Family Apple 7\r\n\t\tGPU Family Apple 6\r\n\t\tGPU Family Apple 5\r\n\t\tGPU Family Apple 4\r\n\t\tGPU Family Apple 3\r\n\t\tGPU Family Apple 2\r\n\t\tGPU Family Apple 1\r\n\t\tGPU Family Mac 2\r\n\t\tGPU Family Mac 1\r\n\t\tGPU Family Common 3\r\n\t\tGPU Family Common 2\r\n\t\tGPU Family Common 1\r\n\t\tmacOS GPU Family 2 v1\r\n\t\tmacOS GPU Family 1 v4\r\n\t\tmacOS GPU Family 1 v3\r\n\t\tmacOS GPU Family 1 v2\r\n\t\tmacOS GPU Family 1 v1\r\n[mvk-info] Created VkInstance for Vulkan version 1.2.0, as requested by app, with the following 4 Vulkan extensions enabled:\r\n\t\tVK_KHR_get_physical_device_properties2 v2\r\n\t\tVK_KHR_surface v25\r\n\t\tVK_EXT_debug_utils v2\r\n\t\tVK_EXT_metal_surface v1\r\nDevices:\r\n  #0: Apple Apple M2 Pro - Supported, Integrated\r\nOptional extension VK_KHR_fragment_shading_rate not found\r\n- Vulkan Variable Rate Shading not supported\r\n- Vulkan multiview supported:\r\n  max view count: 32\r\n  max instances: 134217727\r\n- Vulkan subgroup:\r\n  size: 32\r\n  min size: 32\r\n  max size: 32\r\n  stages: STAGE_TESSELLATION_CONTROL, STAGE_FRAGMENT, STAGE_COMPUTE\r\n  supported ops: FEATURE_BASIC, FEATURE_VOTE, FEATURE_ARITHMETIC, FEATURE_BALLOT, FEATURE_SHUFFLE, FEATURE_SHUFFLE_RELATIVE, FEATURE_QUAD\r\n  quad operations in all stages\r\n[mvk-info] Vulkan semaphores using MTLEvent.\r\n[mvk-info] Created VkDevice to run on GPU Apple M2 Pro with the following 10 Vulkan extensions enabled:\r\n\t\tVK_KHR_16bit_storage v1\r\n\t\tVK_KHR_create_renderpass2 v1\r\n\t\tVK_KHR_image_format_list v1\r\n\t\tVK_KHR_maintenance2 v1\r\n\t\tVK_KHR_multiview v1\r\n\t\tVK_KHR_shader_float16_int8 v1\r\n\t\tVK_KHR_storage_buffer_storage_class v1\r\n\t\tVK_KHR_swapchain v70\r\n\t\tVK_EXT_pipeline_creation_cache_control v3\r\n\t\tVK_EXT_subgroup_size_control v2\r\nVulkan 1.2.275 - Forward+ - Using Device #0: Apple - Apple M2 Pro\r\nStartup PSO cache (0.0 MiB)\r\nUsing present mode: Enabled\r\n[mvk-info] Created 3 swapchain images with size (3024, 1692) and contents scale 2.0 in layer CAMetalLayer: GodotContentView (0x6000023fd410) on screen Built-in Retina Display.\r\nUsing \"default\" pen tablet driver...\r\nCreating VMA small objects pool for memory type index 0\r\nShader 'CanvasSdfShaderRD' (group 0) SHA256: 50b872a974aec3889a3c46484034547be3ae5c66be376bb26d9e41fc2dfea51f\r\nShader 'SkeletonShaderRD' (group 0) SHA256: 607a462b72063e8c81dc7b237e49cd81454f471f7734d024206ed6a3e8b68993\r\nShader 'SortShaderRD' (group 0) SHA256: 38e695caba4b4b8c258f70585b527f7af420b9a78fc6abfd8c9666382a1e42b4\r\nShader 'ParticlesShaderRD' (group 0) SHA256: 2f411ba3b39f7ab39f4625a87b147da82eedc705e4e4975e4c8e81c53b6c102f\r\nShader 'ParticlesCopyShaderRD' (group 0) SHA256: c5d6a54d674c5e0b2f309d5216079efca8b5db75064686b378deab853563469c\r\nShader 'CanvasShaderRD' (group 0) SHA256: aa0223a61e2028f75af004fb0838e4ccad30d4cfd12bef95ee70dfaf2d3e5f09\r\nShader 'CanvasOcclusionShaderRD' (group 0) SHA256: 0ebda9e6fb68a3680f50b0f32c878adae659cbe37053c19167d6aa372cd97649\r\nShader 'ClusterRenderShaderRD' (group 0) SHA256: 66d62439cbf66de7729cebaaf8b689a497d91f1a916a106c4fdbc8e558651536\r\nShader 'ClusterStoreShaderRD' (group 0) SHA256: 22cb06d54a244f7596b9c5c43dc5f8e985a89cbfd8b86870a5a22194851b99b2\r\nShader 'ClusterDebugShaderRD' (group 0) SHA256: 0974f8fc34db232b63b7b7141122af3cdf19f5e2c6f68715ca41e47b9427da8e\r\nShader 'SceneForwardClusteredShaderRD' (group 0) SHA256: d635add608e1da8fb70af370a80646257086170404cc8a8aa7c12540879ddbd6\r\nShader 'SceneForwardClusteredShaderRD' (group 1) SHA256: e40bdd0171ac96593aa1fcef2a90c3c20c125ab07d52958dfbac13b9647498b5\r\nShader 'SceneForwardClusteredShaderRD' (group 2) SHA256: 0d40f721b015004948303339676ff2a6316f7edcc3d28950c883d7f476f19f20\r\nShader 'SceneForwardClusteredShaderRD' (group 3) SHA256: 3eab3972e31b3dac2b5a725e49bbe1e7cde46e2979fd1a1aa8df2c627fefb060\r\nShader 'BestFitNormalShaderRD' (group 0) SHA256: e1d5b1a60c01777df51299e9744933b311f34285ad23ffad81ddb37119026aa0\r\nShader 'ResolveShaderRD' (group 0) SHA256: 7cf06ed16360fe2d2cf3b8d66537d50f8afe96c944758d0db5ee601e5d665042\r\nShader 'TaaResolveShaderRD' (group 0) SHA256: ce1881806a65b899e05ade34e0e69d29fe1093848ac5eb43a197eeab944f4432\r\nShader 'Fsr2DepthClipPassShaderRD' (group 0) SHA256: da63416457edd4fed220fe873d1c0536f9c039efce3e98bb698175a950e0afb0\r\nShader 'Fsr2ReconstructPreviousDepthPassShaderRD' (group 0) SHA256: 9efdb77db3576fc0327cfe528d54030032c4e4ef4e8f9bcc1a999098a6b1725e\r\nShader 'Fsr2LockPassShaderRD' (group 0) SHA256: f8068ae40e37e5281ddfec0dbd5eb1ac21b98b22ca6550c76ab6a5b7be4e766c\r\nShader 'Fsr2AccumulatePassShaderRD' (group 0) SHA256: cdc40dd222f3995cd441698b31f861eac847896f8b7fe2dbc6015165e9b8f2dc\r\nShader 'Fsr2RcasPassShaderRD' (group 0) SHA256: 90caf217641a4f7d7138ea545d5764b80a8a3ede84ca03980068cbd316fba288\r\nShader 'Fsr2ComputeLuminancePyramidPassShaderRD' (group 0) SHA256: 1739145850059e27ca62757f03ecef1fb26ac4f3a33a25517b4d707d3c301ac3\r\nShader 'Fsr2AutogenReactivePassShaderRD' (group 0) SHA256: c16de414129ac6ebab44fa90fbe29a1017a22039206c69c6f8cb5a5df6e74f75\r\nShader 'Fsr2TcrAutogenPassShaderRD' (group 0) SHA256: c5bb03fbcfd66ea6dee0c6b289f387924a31aff2a1afc4f721713f16e794a4ac\r\nShader 'SsEffectsDownsampleShaderRD' (group 0) SHA256: 7bad6d51527303478fb83c5040ed2ffecc51530225c2a46ffbc0c4526a935515\r\nShader 'SsilShaderRD' (group 0) SHA256: a5d78d99d26124605968faae03b30d65f0024a337329943ce3e9505b91d0a1c1\r\nShader 'SsilImportanceMapShaderRD' (group 0) SHA256: 45ac2b4d06543225d1e4e00de6effe6c9c908abcf5a14a685bb669d9dc46f120\r\nShader 'SsilBlurShaderRD' (group 0) SHA256: 15aadc46ab50f3fc28af6292eaa19a749dc2b0a3cd5f73e29a7c89de58635524\r\nShader 'SsilInterleaveShaderRD' (group 0) SHA256: d2676811b5bf2de306cfc2fa9b3b49c24fab8bd65d16e9d2dbec01a02420e6b0\r\nShader 'SsaoShaderRD' (group 0) SHA256: 13f0e3f379e153e983275a7dcc423ebc0c6a3afbdcb29bdc541ca7501bfebbe4\r\nShader 'SsaoImportanceMapShaderRD' (group 0) SHA256: 63176bbd97f52ffed67747e5c7da9966ac329ed267f41586477b63029516ecd5\r\nShader 'SsaoBlurShaderRD' (group 0) SHA256: de65ee4b8ebef45b0f6d26dfb10698529d30668405c43630f5af788c1f8381bb\r\nShader 'SsaoInterleaveShaderRD' (group 0) SHA256: fcbf0cd5856e1e0a0ba26a6e0b2ef3a6e03446a7f42e3288623e9a250bbf42c5\r\nShader 'ScreenSpaceReflectionScaleShaderRD' (group 0) SHA256: b7ff23f16d4b1f02ff0faa698817e9d1c3e43228e7f1d3bc3b373ed4d2a7f894\r\nShader 'ScreenSpaceReflectionShaderRD' (group 0) SHA256: 20c466c8e92198ec1d4eb7dbe0a1cf7961cbed48db1ed9becf7234fcc69a6131\r\nShader 'ScreenSpaceReflectionFilterShaderRD' (group 0) SHA256: 754e450fe74087cb0e005a2503957ebf2af3520840b4f4074f453cc42e4f2fd8\r\nShader 'SubsurfaceScatteringShaderRD' (group 0) SHA256: acc077c9eff729f9be7eb78215c7266cf81729ee5840fce76769ce1c7653c667\r\nShader 'SkyShaderRD' (group 0) SHA256: 6fda66cd38e38137fe7e113964aab5b3726fb0c1e1c97c9e5b7af85b4d69df20\r\nShader 'VoxelGiShaderRD' (group 0) SHA256: 58f145e2b365e4920cd2fd8c52257ab28ed719dec794b583011ffed06a343f9f\r\nShader 'VoxelGiDebugShaderRD' (group 0) SHA256: 37b3a801eb69068d866256b5d7b167e6cc39b2d9ed740d4ca3a3ba994d1868d5\r\nShader 'SdfgiPreprocessShaderRD' (group 0) SHA256: 2e7e73d018d35d8bc3373ba83f9e69977e8ade27f299b7eaaeb11daa1563dccf\r\nShader 'SdfgiDirectLightShaderRD' (group 0) SHA256: 5940757f5b78307e4d6d144a879aeb5e7f6e96eadbc49179e6cade485ed56c22\r\nShader 'SdfgiIntegrateShaderRD' (group 0) SHA256: c2a252256d37294e19c16c4807ff70174166bb713a286f0b6a458e727022ad22\r\nShader 'GiShaderRD' (group 0) SHA256: bd17ee3960865e886b625a7c544be7fb7303e012527b0e515c09601ff05baa57\r\nShader 'SdfgiDebugShaderRD' (group 0) SHA256: 2ebe374a439b24c409a43732d871f341d0f45f305dd4ca75c1f90d2fa22006d7\r\nShader 'SdfgiDebugProbesShaderRD' (group 0) SHA256: d281fe853c825eb2c5c6ef4a8592e7288511883506e848f65eee97b952bb15a5\r\nShader 'VolumetricFogShaderRD' (group 0) SHA256: 2f91ed845d9905b0e758670e8a86b7f0fa2fbad667dacac927cb409b89282c92\r\nShader 'VolumetricFogProcessShaderRD' (group 0) SHA256: d77a441ee0d7e3cc49f73ea3b29ab813ff9ed73f7ff6f17bd0c8b457826da053\r\nShader 'BokehDofShaderRD' (group 0) SHA256: 48ef129b5f1bcda82c4690aa5421de284b0eecb75cfcba458ed2d467b21e12f8\r\nShader 'CopyShaderRD' (group 0) SHA256: 66d198ad28ba2910ee16d78dd44730cdc33df856930ad39f1b6aa2e47af05808\r\nShader 'CopyToFbShaderRD' (group 0) SHA256: a04b6d709f5b8d285d30cb132ddf5771205e9944041d4ae6b676a837c6465457\r\nShader 'CubeToDpShaderRD' (group 0) SHA256: 1a37b738b6c0ae94185c1170d3d64d4f5e3d2286aa25596e00c24ecbc5492493\r\nShader 'CubemapDownsamplerShaderRD' (group 0) SHA256: 9b77a233f11ed1538925e4a565feb4b9f774a04967238785fb40a6b4d06fee6f\r\nShader 'CubemapFilterShaderRD' (group 0) SHA256: 8a1cecd56ada9ff5406e30184b0bad11469227c857525dd161a3f931b3bbd988\r\nShader 'CubemapRoughnessShaderRD' (group 0) SHA256: 9a6653552e8cf12c927f57cb03d4f7c1a11f8d10d5752b9bbd9da3e3d6be7a8e\r\nShader 'SpecularMergeShaderRD' (group 0) SHA256: d8abb29989769b0c2e95b04ebd85e6fe8cc66abb7f67136708c2a68ec12eb45d\r\nShader 'ShadowFrustumShaderRD' (group 0) SHA256: d22e56608a6b25f7894a01a588f14e2205f53f941d9936b9297cbf9fcad878ae\r\nShader 'MotionVectorsShaderRD' (group 0) SHA256: 939b07e7fad7d4a3d9e4800993adb38735e92dda4c59037ccbba892846689ed9\r\nShader 'LuminanceReduceShaderRD' (group 0) SHA256: 49d53988c66ef7fc8b5398ee15349d9c2d075c165d18dc876b239d3dfa1623c4\r\nShader 'TonemapShaderRD' (group 0) SHA256: 505a2068c488354cc76a52fb73039e1acba423e35cdd087fcbdec52c3c7b3778\r\nShader 'FsrUpscaleShaderRD' (group 0) SHA256: 5d892c31f7428e335be2498a0515cca6c5e181088373b8edfa08faf0bda72167\r\nShader 'BlitShaderRD' (group 0) SHA256: 396acf2e3e09605c3574f3d66637b3f602e874bfe886394705e7652ecf41f1df\r\nCoreAudio: detected 2 channels\r\nCoreAudio: audio buffer frames: 512 calculated latency: 11ms\r\n\r\nTextServer: Primary interface set to: \"ICU \/ HarfBuzz \/ Graphite (Built-in)\".\r\n2024-03-19 23:52:04.115 Godot[34096:2654671] WARNING: AVCaptureDeviceTypeExternal is deprecated for Continuity Cameras. Please use AVCaptureDeviceTypeContinuityCamera and add NSCameraUseContinuityCameraDeviceType to your Info.plist.\r\nCameraServer: Registered camera FaceTime HD Camera with ID 1 and position 0 at index 0\r\nCameraServer: Registered camera Lyes\u2019s iPhone Camera with ID 2 and position 0 at index 1\r\n.NET: Initializing module...\r\nFound hostfxr: \/usr\/local\/share\/dotnet\/host\/fxr\/8.0.0\/libhostfxr.dylib\r\n.NET: hostfxr initialized\r\n.NET: GodotPlugins initialized\r\n.NET: Failed to load project assembly\r\nCORE API HASH: 1677737928\r\nEDITOR API HASH: 3100956579\r\nEditorSettings: Load OK!\r\nEditorTheme: Generating new theme for the config '608616151'.\r\nEditorTheme: Generating new icons.\r\nEditorTheme: Generating new fonts.\r\nEditorTheme: Generating new styles.\r\nFound .NET Sdk version '8.0.100': \/usr\/local\/share\/dotnet\/sdk\/8.0.100\r\nzsh: bus error  .\/Godot --verbose --path  --editor\r\n```\r\n\r\nIt gets as far as finding the .NET SDK and then crashed. From the crash report, it specifically notes this as causing the problem:\r\n\r\n```\r\nVM Region Info: 0x6e00003f4a is in 0x1000000000-0x7000000000;  bytes after start: 403726942026  bytes before end: 8589918389\r\n      REGION TYPE                    START - END         [ VSIZE] PRT\/MAX SHRMOD  REGION DETAIL\r\n      commpage (reserved)         fc0000000-1000000000   [  1.0G] ---\/--- SM=NUL  ...(unallocated)\r\n--->  GPU Carveout (reserved)    1000000000-7000000000   [384.0G] ---\/--- SM=NUL  ...(unallocated)\r\n      GAP OF 0x5f9000000000 BYTES\r\n      MALLOC_NANO   \r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_unfair_lock\r\nAbort Cause 37907\r\n```\r\n\r\nThe report specifically points to thread 28. The dump of this thread is as follows:\r\n\r\n```\r\nThread 28 Crashed:\r\n0   libsystem_malloc.dylib        \t       0x1876889fc tiny_free_list_add_ptr + 332\r\n1   libsystem_malloc.dylib        \t       0x187686148 tiny_malloc_from_free_list + 1420\r\n2   libsystem_malloc.dylib        \t       0x18768553c tiny_malloc_should_clear + 288\r\n3   libsystem_malloc.dylib        \t       0x1876842c8 szone_malloc_should_clear + 92\r\n4   libcoreclr.dylib              \t       0x1602cf834 operator new[](unsigned long) + 12\r\n5   libcoreclr.dylib              \t       0x1600ee7ec PgoManager::getPgoInstrumentationResultsFromR2RFormat(ReadyToRunInfo*, Module*, PEDecoder*, unsigned char*, unsigned long, unsigned char**, ICorJitInfo::PgoInstrumentationSchema**, unsigned int*, unsigned char**) + 404\r\n6   libcoreclr.dylib              \t       0x16013b190 ReadyToRunInfo::GetPgoInstrumentationData(MethodDesc*, unsigned char**, ICorJitInfo::PgoInstrumentationSchema**, unsigned int*, unsigned char**) + 648\r\n7   libcoreclr.dylib              \t       0x1600ee4d0 PgoManager::getPgoInstrumentationResultsInstance(MethodDesc*, unsigned char**, ICorJitInfo::PgoInstrumentationSchema**, unsigned int*, unsigned char**, ICorJitInfo::PgoSource*) + 532\r\n8   libcoreclr.dylib              \t       0x1600bfc6c CEEJitInfo::getPgoInstrumentationResults(CORINFO_METHOD_STRUCT_*, ICorJitInfo::PgoInstrumentationSchema**, unsigned int*, unsigned char**, ICorJitInfo::PgoSource*) + 184\r\n9   libclrjit.dylib               \t       0x12fa21bfc Compiler::compInitOptions(JitFlags*) + 496\r\n10  libclrjit.dylib               \t       0x12fa24ab8 Compiler::compCompileHelper(CORINFO_MODULE_STRUCT_*, ICorJitInfo*, CORINFO_METHOD_INFO*, void**, unsigned int*, JitFlags*) + 172\r\n11  libclrjit.dylib               \t       0x12fa244cc Compiler::compCompile(CORINFO_MODULE_STRUCT_*, void**, unsigned int*, JitFlags*) + 1008\r\n12  libclrjit.dylib               \t       0x12fa25a44 jitNativeCode(CORINFO_METHOD_STRUCT_*, CORINFO_MODULE_STRUCT_*, ICorJitInfo*, CORINFO_METHOD_INFO*, void**, unsigned int*, JitFlags*, void*) + 416\r\n13  libclrjit.dylib               \t       0x12fa2a064 CILJit::compileMethod(ICorJitInfo*, CORINFO_METHOD_INFO*, unsigned int, unsigned char**, unsigned int*) + 120\r\n14  libcoreclr.dylib              \t       0x1600c04d8 invokeCompileMethodHelper(EEJitManager*, CEEInfo*, CORINFO_METHOD_INFO*, CORJIT_FLAGS, unsigned char**, unsigned int*) + 324\r\n15  libcoreclr.dylib              \t       0x1600c0698 invokeCompileMethod(EEJitManager*, CEEInfo*, CORINFO_METHOD_INFO*, CORJIT_FLAGS, unsigned char**, unsigned int*) + 168\r\n16  libcoreclr.dylib              \t       0x1600c106c UnsafeJitFunction(PrepareCodeConfig*, COR_ILMETHOD_DECODER*, CORJIT_FLAGS*, unsigned int*) + 1840\r\n17  libcoreclr.dylib              \t       0x1600f4bbc MethodDesc::JitCompileCodeLocked(PrepareCodeConfig*, COR_ILMETHOD_DECODER*, ListLockEntryBase<NativeCodeVersion>*, unsigned int*) + 208\r\n18  libcoreclr.dylib              \t       0x1600f4658 MethodDesc::JitCompileCodeLockedEventWrapper(PrepareCodeConfig*, ListLockEntryBase<NativeCodeVersion>*) + 832\r\n19  libcoreclr.dylib              \t       0x1600f3ddc MethodDesc::JitCompileCode(PrepareCodeConfig*) + 460\r\n20  libcoreclr.dylib              \t       0x1600f38c0 MethodDesc::PrepareILBasedCode(PrepareCodeConfig*) + 700\r\n21  libcoreclr.dylib              \t       0x160120ed4 TieredCompilationManager::CompileCodeVersion(NativeCodeVersion) + 228\r\n22  libcoreclr.dylib              \t       0x16012056c TieredCompilationManager::DoBackgroundWork(unsigned long long*, unsigned long long, unsigned long long) + 520\r\n23  libcoreclr.dylib              \t       0x16011fe28 TieredCompilationManager::BackgroundWorkerStart() + 280\r\n24  libcoreclr.dylib              \t       0x16011fc34 TieredCompilationManager::BackgroundWorkerBootstrapper1(void*) + 108\r\n25  libcoreclr.dylib              \t       0x16011c9c4 ManagedThreadBase_DispatchOuter(ManagedThreadCallState*) + 256\r\n26  libcoreclr.dylib              \t       0x16011cf1c ManagedThreadBase::KickOff(void (*)(void*), void*) + 32\r\n27  libcoreclr.dylib              \t       0x16011fb44 TieredCompilationManager::BackgroundWorkerBootstrapper0(void*) + 40\r\n28  libcoreclr.dylib              \t       0x160035b00 CorUnix::CPalThread::ThreadEntry(void*) + 380\r\n29  libsystem_pthread.dylib       \t       0x18786e034 _pthread_start + 136\r\n30  libsystem_pthread.dylib       \t       0x187868e3c thread_start + 8\r\n```\r\n[Godot Mono 4.3 dev 5 MacOS Crash Report.txt](https:\/\/github.com\/godotengine\/godot\/files\/14658091\/Godot.Mono.4.3.dev.5.MacOS.Crash.Report.txt)\r\n"],"labels":["bug","platform:macos","topic:editor","needs testing","crash"]},{"title":"Project setting added via GUI is removed when reset to default","body":"### Tested versions\r\n\r\nFound as far back as 4.1.1 - couldn't test any earlier version (editor froze when opening any dropdown menu, old Wayland problems maybe, doesnt matter)\r\n\r\n### System information\r\n\r\nGodot v4.3.dev5 - EndeavourOS SMP PREEMPT_DYNAMIC Fri, 08 Mar 2024 01:59:01 +0000 - Wayland - Vulkan (Forward+) - integrated AMD Radeon Graphics (RADV RENOIR) () - AMD Ryzen 7 5825U with Radeon Graphics (16 Threads)\r\n\r\n### Issue description\r\n\r\nProject settings created manually within the settings menu will be removed when reset to their default value\r\n\r\n### Steps to reproduce\r\n\r\nWhen creating a custom project setting (using the project settings dialogue), it will show up as not being at its default value (which is weird because it actually is, in theory) - see image 1. \r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/8989002\/3c96a238-dbe9-43af-9f6e-56cac0033575)\r\n\r\nThen, resetting it to the default will cause it to be deleted from the project settings, with the editor printing a few copies of the same warning:\r\n`core\/config\/project_settings.cpp:352 - Property not found: x\/y`\r\nwhere `x\/y` is whatever path was chosen for the setting:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/8989002\/b5b8457c-6d43-4a88-a7c2-a0c4d8b332ef)\r\n\r\nHowever, it will still show up in the settings GUI until it is closed and reopened:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/8989002\/0b366e91-ab2e-458b-970f-6f01d839bcf9)\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nBasically impossible to have an MRP, as the whole bug is something being unexplicably deleted. A completely empty project suffices.","comments":["This is likely because default values are not stored to the file, and therefore lost, though in this case it might be specifically an issue with the editor ","My suspicion as well, but then the project should store custom settings then, regardless of defaults"],"labels":["bug","topic:editor"]},{"title":"Godot (C#) source build frequently crashes on launch","body":"### Tested versions\r\n\r\nBuilds tested:\r\n- Godot Engine v4.3.dev.mono.custom_build.fe01776f0: display frequent crashes on loading project\r\n- Godot Engine v4.3.dev.custom_build.fe01776f0: no issues\r\n- Release candidate v4.3-dev5-mono-win64: no issues\r\n- Godot Engine v4.2.2.rc.mono.custom_build.c61a68614: synced to 4.2 tag and rebuild and this one does not have the issue.\r\n\r\n\r\n### System information\r\n\r\nWindows 11 23H2 - Godot Engine v4.3.dev.mono.custom_build.fe01776f0 (2024-03-16 12:12:53 UTC)\r\n\r\n### Issue description\r\n\r\nAny custom build I produce locally on my own machine does not reliably launch the editor into a project. Loading up the project manager works fine but as soon as I attempt to load any project the editor occasionally just randomly closes. I did attempt to run dev builds and debug this locally but this issue does not happen when I compile with `dev_build=yes`\r\n\r\nI tried forcing symbols on non dev builds by using `debug_symbols=yes` and managed to attach to it but this didn't really help me much as the locations where these crashes were happening changed everytime I tried debugging it. Not sure if this is due to optimization being applied or legit some corruption happening (like a memory stomp).\r\n\r\nAt first I thought this might have been some of my own changes, however I synced back to the main branch and retried this with an empty project and still get this issue.\r\n\r\nI've attached the output I get when running with `--verbose --editor --path <my_project>`. After the last line the editor is not running anymore.\r\n\r\n[Godot Engine v4.3.verbose.output.txt](https:\/\/github.com\/godotengine\/godot\/files\/14627604\/Godot.Engine.v4.3.verbose.output.txt)\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Follow build steps on [Compiling with dotnet](https:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/compiling\/compiling_with_dotnet.html)\r\n2. Create an empty project with a `project.godot` file.\r\n3. Run `bin\/godot.windows.editor.x86_64.mono.exe --verbose --editor --path <path_to_empty_project>` \r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["I've been doing some bisecting and testing this. Started from the 4.2.1-stable tag which doesn't have the issue. \r\n\r\nI ended up finding that the last working change was 3cac01034480dcb114a7becd7892d005627b45fd. \r\nThe change after (eccdf1a1e8a972b40d507321b925d756a50c2a9d) has the crash issue. \r\n\r\nI also compiled this with ASAN: \r\n\r\n```\r\n=================================================================\r\n==113436==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x12e29f47f408 at pc 0x7ff6925fd6cc bp 0x00b33c9fd0a0 sp 0x00b33c9fd0a0\r\nWRITE of size 8 at 0x12e29f47f408 thread T0\r\n    #0 0x7ff6925fd6cb in CSharpScript::CSharpScript F:\\dev\\godot-engine-ext\\godot-engine\\modules\\mono\\csharp_script.cpp:2790\r\n    #1 0x7ff693654fed in EditorHelpHighlighter::EditorHelpHighlighter F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3557\r\n    #2 0x7ff69369912a in EditorHelpHighlighter::create_singleton F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3428\r\n    #3 0x7ff69371ec34 in EditorNode::_notification F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.cpp:582\r\n    #4 0x7ff69371fd05 in EditorNode::_notificationv F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.h:126\r\n    #5 0x7ff69a215c25 in Object::notification F:\\dev\\godot-engine-ext\\godot-engine\\core\\object\\object.cpp:846\r\n    #6 0x7ff691748bf6 in Main::start F:\\dev\\godot-engine-ext\\godot-engine\\main\\main.cpp:3642\r\n    #7 0x7ff69166011d in widechar_main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:179\r\n    #8 0x7ff69165fdab in _main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:204\r\n    #9 0x7ff691660298 in main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:218\r\n    #10 0x7ff69b4f4b45 in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288\r\n    #11 0x7ff9aae1257c in BaseThreadInitThunk+0x1c (C:\\Windows\\System32\\KERNEL32.DLL+0x18001257c)\r\n    #12 0x7ff9abc0aa57 in RtlUserThreadStart+0x27 (C:\\Windows\\SYSTEM32\\ntdll.dll+0x18005aa57)\r\n\r\n0x12e29f47f408 is located 0 bytes to the right of 904-byte region [0x12e29f47f080,0x12e29f47f408)\r\nallocated by thread T0 here:\r\n    #0 0x7ff6916f96f5 in malloc D:\\a\\_work\\1\\s\\src\\vctools\\asan\\llvm\\compiler-rt\\lib\\asan\\asan_malloc_win_thunk.cpp:85\r\n    #1 0x7ff69a137799 in Memory::alloc_static F:\\dev\\godot-engine-ext\\godot-engine\\core\\os\\memory.cpp:75\r\n    #2 0x7ff693654fe0 in EditorHelpHighlighter::EditorHelpHighlighter F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3557\r\n    #3 0x7ff69369912a in EditorHelpHighlighter::create_singleton F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3428\r\n    #4 0x7ff69371ec34 in EditorNode::_notification F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.cpp:582\r\n    #5 0x7ff69371fd05 in EditorNode::_notificationv F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.h:126\r\n    #6 0x7ff69a215c25 in Object::notification F:\\dev\\godot-engine-ext\\godot-engine\\core\\object\\object.cpp:846\r\n    #7 0x7ff691748bf6 in Main::start F:\\dev\\godot-engine-ext\\godot-engine\\main\\main.cpp:3642\r\n    #8 0x7ff69166011d in widechar_main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:179\r\n    #9 0x7ff69165fdab in _main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:204\r\n    #10 0x7ff691660298 in main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:218\r\n    #11 0x7ff69b4f4b45 in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288\r\n    #12 0x7ff9aae1257c in BaseThreadInitThunk+0x1c (C:\\Windows\\System32\\KERNEL32.DLL+0x18001257c)\r\n    #13 0x7ff9abc0aa57 in RtlUserThreadStart+0x27 (C:\\Windows\\SYSTEM32\\ntdll.dll+0x18005aa57)\r\n\r\nSUMMARY: AddressSanitizer: heap-buffer-overflow F:\\dev\\godot-engine-ext\\godot-engine\\modules\\mono\\csharp_script.cpp:2790 in CSharpScript::CSharpScript\r\nShadow bytes around the buggy address:\r\n  0x050cf2b0fe30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n=>0x050cf2b0fe80: 00[fa]fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0fe90: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0fea0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0feb0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x050cf2b0fec0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x050cf2b0fed0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n=================================================================\r\n==113436==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x12e29f47f408 at pc 0x7ff6925fd6cc bp 0x00b33c9fd0a0 sp 0x00b33c9fd0a0\r\nWRITE of size 8 at 0x12e29f47f408 thread T0\r\n    #0 0x7ff6925fd6cb in CSharpScript::CSharpScript F:\\dev\\godot-engine-ext\\godot-engine\\modules\\mono\\csharp_script.cpp:2790\r\n    #1 0x7ff693654fed in EditorHelpHighlighter::EditorHelpHighlighter F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3557\r\n    #2 0x7ff69369912a in EditorHelpHighlighter::create_singleton F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3428\r\n    #3 0x7ff69371ec34 in EditorNode::_notification F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.cpp:582\r\n    #4 0x7ff69371fd05 in EditorNode::_notificationv F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.h:126\r\n    #5 0x7ff69a215c25 in Object::notification F:\\dev\\godot-engine-ext\\godot-engine\\core\\object\\object.cpp:846\r\n    #6 0x7ff691748bf6 in Main::start F:\\dev\\godot-engine-ext\\godot-engine\\main\\main.cpp:3642\r\n    #7 0x7ff69166011d in widechar_main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:179\r\n    #8 0x7ff69165fdab in _main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:204\r\n    #9 0x7ff691660298 in main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:218\r\n    #10 0x7ff69b4f4b45 in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288\r\n    #11 0x7ff9aae1257c in BaseThreadInitThunk+0x1c (C:\\Windows\\System32\\KERNEL32.DLL+0x18001257c)\r\n    #12 0x7ff9abc0aa57 in RtlUserThreadStart+0x27 (C:\\Windows\\SYSTEM32\\ntdll.dll+0x18005aa57)\r\n\r\n0x12e29f47f408 is located 0 bytes to the right of 904-byte region [0x12e29f47f080,0x12e29f47f408)\r\nallocated by thread T0 here:\r\n    #0 0x7ff6916f96f5 in malloc D:\\a\\_work\\1\\s\\src\\vctools\\asan\\llvm\\compiler-rt\\lib\\asan\\asan_malloc_win_thunk.cpp:85\r\n    #1 0x7ff69a137799 in Memory::alloc_static F:\\dev\\godot-engine-ext\\godot-engine\\core\\os\\memory.cpp:75\r\n    #2 0x7ff693654fe0 in EditorHelpHighlighter::EditorHelpHighlighter F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3557\r\n    #3 0x7ff69369912a in EditorHelpHighlighter::create_singleton F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_help.cpp:3428\r\n    #4 0x7ff69371ec34 in EditorNode::_notification F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.cpp:582\r\n    #5 0x7ff69371fd05 in EditorNode::_notificationv F:\\dev\\godot-engine-ext\\godot-engine\\editor\\editor_node.h:126\r\n    #6 0x7ff69a215c25 in Object::notification F:\\dev\\godot-engine-ext\\godot-engine\\core\\object\\object.cpp:846\r\n    #7 0x7ff691748bf6 in Main::start F:\\dev\\godot-engine-ext\\godot-engine\\main\\main.cpp:3642\r\n    #8 0x7ff69166011d in widechar_main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:179\r\n    #9 0x7ff69165fdab in _main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:204\r\n    #10 0x7ff691660298 in main F:\\dev\\godot-engine-ext\\godot-engine\\platform\\windows\\godot_windows.cpp:218\r\n    #11 0x7ff69b4f4b45 in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288\r\n    #12 0x7ff9aae1257c in BaseThreadInitThunk+0x1c (C:\\Windows\\System32\\KERNEL32.DLL+0x18001257c)\r\n    #13 0x7ff9abc0aa57 in RtlUserThreadStart+0x27 (C:\\Windows\\SYSTEM32\\ntdll.dll+0x18005aa57)\r\n\r\nSUMMARY: AddressSanitizer: heap-buffer-overflow F:\\dev\\godot-engine-ext\\godot-engine\\modules\\mono\\csharp_script.cpp:2790 in CSharpScript::CSharpScript\r\nShadow bytes around the buggy address:\r\n  0x050cf2b0fe30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x050cf2b0fe70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n=>0x050cf2b0fe80: 00[fa]fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0fe90: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0fea0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x050cf2b0feb0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x050cf2b0fec0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x050cf2b0fed0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\nAddress Sanitizer Error: Heap buffer overflow\r\n```","CC @dalexeev"],"labels":["bug","topic:editor","crash","regression"]},{"title":"[Doc] Clarify behavior of `String.format` with keys in replacements","body":"While this might be unreliable and unpredictable it is valid use of formatting and changing it would be break things IMO, and is a very old feature, so I'd prefer to document this over changing the code\r\n\r\nWould need to be added to the format strings docs as well (which talks about this method).\r\n\r\n* Closes: https:\/\/github.com\/godotengine\/godot\/issues\/89604\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","documentation","cherrypick:4.1","cherrypick:4.2"]},{"title":"[Editor] Fix handle ID being passed for 3D Gizmo plugins","body":"* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89581\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:editor","topic:plugin","topic:3d"]},{"title":"On Windows 11 Any project on Godot has constant frame spikes after same time, even if it's exported","body":"### Tested versions\r\n\r\nReproducable in: v4.2.1.stable.official [b09f793f5], v4.3.dev4.official.df78c0636\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 11 23H2 - Any Renderer - dedicated AMD Radeon RX 6800 XT (Advanced Micro Devices, Inc.; 31.0.24019.1006) - AMD Ryzen 5 7600 6-Core Processor (12 Threads)\r\n\r\n### Issue description\r\n\r\nAny project that i Run on Godot has this issue when i run it on Windows 11, & I know it's issue with Windows 11 because my system has dual-boot with Linux & Windows 11, on Linux no frame spikes happen at all, gameplay is buttery smooth, but if you run the project on Windows 11, it has significant frame spikes\r\n\r\nI discovered that this is Issue with Windows 11 because I even tried to use Windows 11 on my external Nvme drive by making \"Windows to go\" installation, even on that installation of Windows 11 I still have frame spikes on Godot game engine, it's likely that this issue is tied to this OS, frame spikes happen in any renderer, regardless if project is 2D or 3D, even if you export it! i even exported it with DX12, it doesn't fix the frame spikes\r\n\r\nno fixes worked, I enabled verbose stdout, it doesn't fix the issue, I tried to use \"Windows 8\" compatibility mode, it didn't fix the issue, I enabled\/disabled Vsync & used different Vsync modes, I even disabled vsync , only once enabling vsync in Godot & disabling Radeon anti-lag & setting \"wait for vertical refresh\" to \"off unless application specifies\" in AMD software fixed the frame spikes, but it's not a fix, after restarting project some of times frame spikes appeared again, even if I enabled Vsync mode that had no frame spikes & use same settings in AMD software, they reappeared\r\n\r\nalso for some reason when i click \"Copy System Info\" in \"help tab\" it specifies \"Windows 10.0.22631\" as OS instead of \"Windows 11\", despite compatibility mode not being enabled for Godot\r\n\r\nhere are how the frame spikes look like: \r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/44000381\/63efabd3-9ec9-4d9e-9a30-cd32ca1f4d90)\r\n\r\n### Steps to reproduce\r\n\r\nJust make or import any project & run it on windows 11\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[lag_spike_test.zip](https:\/\/github.com\/godotengine\/godot\/files\/14627417\/lag_spike_test.zip)\r\n","comments":[],"labels":["platform:windows","discussion","needs testing","performance"]},{"title":"`String.format` depends on the order of passed values, resulting in unwanted replacements.","body":"### Tested versions\n\nReproducible in 4.2.1.stable and v4.3.dev.custom_build [fe01776f0] (freshly synced and built `master`)\n\n### System information\n\nGodot v4.3.dev (fe01776f0) - Windows 10.0.19045 - Vulkan (Mobile) - dedicated NVIDIA GeForce RTX 3060 (NVIDIA; 31.0.15.5123) - AMD Ryzen 7 5800X 8-Core Processor (8 Threads)\n\n### Issue description\n\nIf you have a \"template\" string `\"{first}{second}\"`, the result of `.format()`ting it will depend on the order of values passed in. Specifically, if the passed value for `{first}` is a string that contains literal `\"{second}\"`, that literal will get replaced with the value of `{second}` if the value for `{first}` was passed before the value for `{second}`.\n\n### Steps to reproduce\n\nCreate a new project and assign the following script to the main scene.\r\n\r\n```gdscript\r\nextends Node\r\n\r\nfunc _ready() -> void:\r\n    var template := \"{first}{second}\"\r\n\r\n    var first_value := \"{second}\"\r\n    var second_value := \"Hello!\"\r\n\r\n    var formatted := template.format({\r\n        # if we swap the next two lines, `second` will get formatted before `first`,\r\n        # and the unwanted replacement will not occur\r\n        \"first\": first_value,\r\n        \"second\": second_value,\r\n    })\r\n\r\n    print(formatted) # \"Hello!Hello!\"\r\n```\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["This is a bit of a complex situation, \"fixing\" this would risk breaking existing code so it might be best to document this instead, but depends on how serious it's considered \r\n\r\nReading through the original PR it seems this is not an oversight, and I believe this should be documented clearly instead, as it is a useful feature, as long as you're aware of it","> This is a bit of a complex situation, \"fixing\" this would risk breaking existing code so it might be best to document this instead, but depends on how serious it's considered\r\n> \r\n> Reading through the original PR it seems this is not an oversight, and I believe this should be documented clearly instead, as it is a useful feature, as long as you're aware of it\r\n\r\nI don't think documenting this makes a lot of sense, because what it's doing is equivalent to 2 lines of GDSript and it would be nice if it had more functionality:\r\n```gdscript\r\nfor key in values:\r\n    template = template.replace(\"{\" + key + \"}\", values[key])\r\n```\r\nThis behavior of replacing the keys in already replaced parts of the string can be very problematic when dealing with user input.\r\n\r\nThis can for example corrupt data in the XML tool by elenakrittik. When setting an XML node attribute value to the string `\"{children}\"`, it will replace that with the actual string of the XML nodes children when saving the data, because it uses format strings like `\"<{node_name}{attributes}>{content}{cdata}{children}<\/{node_name}>\"`.\r\n\r\nI also tested pythons string format function to have something to compare with. It formats non-recursively by default."],"labels":["discussion","topic:core","documentation"]},{"title":"Editor window is scaled using nearest neighbour when moving window to lower DPI monitor","body":"### Tested versions\r\n\r\n- 4.2.1\r\n- 4.3.dev4\r\n- 4.3.dev5\r\n\r\n### System information\r\n\r\nMacOS Sonoma 14.3.1, Macbook Pro M2 Max\r\n\r\n### Issue description\r\n\r\nI have an ultra-wide 3440x1440 monitor connected to my M2 Max Mac Pro. When I move the editor window to the ultra wide which has a lower DPI it resizes the window using nearest neighbour which aliases horribly. This behaviour does not occur in 4.2.1. I've attached a video to demonstrate.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/7454145\/2a8249a6-e397-4fdc-96d8-3e6461d48727\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n- Connect a monitor with a lower DPI than the primary.\r\n- Move the editor window between the two monitors.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":[],"labels":["bug","topic:rendering","topic:editor"]},{"title":"when I change a scale of a instantiated scene be black","body":"### Tested versions\n\n 4.2.stable but other versions I don't know\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.19045 - GLES3 (Compatibility) - NVIDIA GeForce GTX 1650 () - Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz (12 Threads)\n\n### Issue description\n\nWhen I change a scale using script for a instantiated scene the faces that changed his scale his color be black\n\n### Steps to reproduce\n\nthe problem code\r\nfunc render_wall(tposition, type, size):\r\n\tvar render = wall.instantiate()\r\n\trender.position = tposition\r\n\t# only care about the scale down\r\n\trender.scale.y = size\r\n\tif type == 1:\r\n\t\trender.rotation.y = -90\r\n\tadd_child(render)\r\n\n\n### Minimal reproduction project (MRP)\n\nI didn't understand what I will do here","comments":["> I didn't understand what I will do here\r\n\r\nYou need to make a project to show this problem, and upload it"],"labels":["needs testing"]},{"title":"Fix unexpected auto translation of editor `Tree` content","body":"Fixes some regressions due to `Tree` now supports auto translation (#89032).\r\n\r\nThis PR almost touched every `Tree` used in the editor. The change of auto translation behavior affects compatibility. I think we could alternatively make `Tree` not auto translating by default.\r\n\r\nCC @YeldhamDev \r\n\r\nSupersedes #89546","comments":["I'm surprised you didn't include the changes in #89546 to supersede it. It would unite everything into a single commit.\r\n\r\nAnd about the compatibility, while you have a point, I think we should wait a little and see if it's affecting other people or if it's just an _us_ problem."],"labels":["bug","topic:editor","regression"]},{"title":"Fix platform name in the message about unsupported CPU architecture","body":"<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","platform:web","topic:porting","cherrypick:4.2"]},{"title":"Folder names in the file system are translated unexpectedly","body":"### Tested versions\n\nGodot v4.3.dev5.mono\n\n### System information\n\nGodot v4.3.dev5.mono - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1650 Ti (NVIDIA; 31.0.15.3667) - Intel(R) Core(TM) i5-10200H CPU @ 2.40GHz (8 Threads)\n\n### Issue description\n\nFolder names in the file system are translated unexpectedly, these should not be translated\r\n![QQ\u622a\u56fe20240317133008](https:\/\/github.com\/godotengine\/godot\/assets\/27111822\/79a28e6f-bed4-4fe6-9122-1e0b8cf708b5)\r\n\n\n### Steps to reproduce\n\n1. Create a new project\r\n2. Create a new folder, name it \"Red\"\r\n3. Switch editor language to non-English\r\n4. Folder name is now displayed as translated\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor","regression"]},{"title":"Fix `CPUParticles3D` using angle incorrectly when `ROTATE_Y` is set.","body":"Resolves #89559.","comments":[],"labels":["bug","topic:3d","topic:particles"]},{"title":"iOS: Fix AirPods routing when Play and Record category is used.","body":"So after the changes merged on https:\/\/github.com\/godotengine\/godot\/pull\/89006, the Play and Record audio session category is almost perfect on iOS (this means normal volume both on speakers and headphones!). However, I decided to try it out with my AirPods and, surprisingly, Godot didn't change the route to them. :(\r\n\r\nThis pull request does what [SDL does](https:\/\/github.com\/libsdl-org\/SDL\/blob\/e03746b25f485fdf8637cbcb3126dc2c52bd32a7\/src\/audio\/coreaudio\/SDL_coreaudio.m#L433), it adds two extra options when Play and Record is used to fix the issue:\r\n**AVAudioSessionCategoryOptionAllowBluetoothA2DP**\r\n**AVAudioSessionCategoryOptionAllowAirPlay**","comments":[],"labels":["bug","platform:ios","topic:porting"]},{"title":"SkeletonIK3D target rotates on incorrect axis","body":"### Tested versions\n\nreproducible in 4.1.1 and 4.2.1 (IK was nonfunctional in 4.0)\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3090 (NVIDIA; 31.0.15.3713) - Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz (16 Threads)\n\n### Issue description\n\nThe rotation of the target rotates the end effector on what seems to be an incorrect axis. For example, rotating about the Y axis seems to rotate the bone about the Z axis instead.\r\n\r\nMay be related to #54891\n\n### Steps to reproduce\n\n1. Open the test project (Imported VRM + SkeletonIK3D node + Node3D target)\r\n2. Open test.tscn\r\n3. Select SkeletonIK3D\r\n4. Click \"Play IK\" in the 3d scene toolbar\r\n5. Select the target \"Node3D\"\r\n6. rotate it on the red or blue axes\r\n7. You will see the foot rotates about the incorrect axis.\n\n### Minimal reproduction project (MRP)\n\n[skeletonik3d_issue.zip](https:\/\/github.com\/godotengine\/godot\/files\/14626299\/skeletonik3d_issue.zip)\r\n","comments":[],"labels":["bug","topic:animation","topic:3d"]},{"title":"Fix AudioStreamInteractiveEditorPlugin GUI bugs","body":"<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\nAdds DPI scaling to the table columns and fixes an error which occurs when clicking the top-right \"From \/ To\" cell.\r\n\r\nBefore:\r\n<img width=\"906\" alt=\"Screenshot 2024-03-16 at 23 12 40\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/103377610\/dd885afe-e69b-41be-8cf4-7f0b628136a4\">\r\nAfter:\r\n<img width=\"908\" alt=\"Screenshot 2024-03-16 at 23 04 15\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/103377610\/13e340db-9154-4bb1-a24b-b934ba0cee85\">\r\n","comments":[],"labels":["bug","topic:editor"]},{"title":"thorvg: Bump version to 0.12.8","body":"https:\/\/github.com\/thorvg\/thorvg\/releases\/tag\/v0.12.8\r\n\r\nThis update doesn't change anything regarding Godot, but we might as well bump the version.\r\n","comments":[],"labels":["enhancement","topic:thirdparty","cherrypick:4.2"]},{"title":"[Doc] Fix Parallax2D use of closer\/further","body":"\"Closer\" was used to describe both less-than one and greater-than one scrolling values by mistake.","comments":[],"labels":["bug","documentation"]},{"title":"[StatusIndicator] Switch API to use Texture2D instead of Image, improve handling on macOS, add method to set native popup menu directly.","body":"- Switches API to use `Texture2D` instead of `Image` (as most other UI element do, breaking change from the previous dev release, but API was not present in any previous stable releases).\r\n- Improve event handling and icon scaling on macOS.\r\n- Add method (to `DisplayServer` and property to `StatusIndicator` node) to set native popup menu directly, since this is a most common use for indicators (also to match https:\/\/www.freedesktop.org\/wiki\/Specifications\/StatusNotifierItem\/StatusNotifierItem\/ for the future Linux implementation which might miss other ways to position popup).\r\n","comments":[],"labels":["enhancement","platform:windows","platform:macos","breaks compat","topic:gui"]},{"title":"C# Array of StringNames Exported property with null default value causes null value exceptions in editor and in game.","body":"### Tested versions\n\nReproducible in v4.2.1.stable.mono b09f793\n\n### System information\n\nGodot v4.2.1.stable.mono - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 2060 (NVIDIA; 31.0.15.5123) - Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz (16 Threads)\n\n### Issue description\n\nWhen exporting a C# array of StringName objects with a null default value, null argument exceptions are thrown both in the editor and at runtime, unlike C# arrays of other reference or value types such as Resources or Vector2s. The exception is also not thrown when exporting a single StringName set to null or exporting a `Godot.Collections.Array<StringName>`.\r\n```cs\r\n[Export] public StringName[] ExportedArray;\r\n```\r\n\r\nThe editor error in question:\r\n```\r\n  \/root\/godot\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/NativeInterop\/ExceptionUtils.cs:112 - System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation.\r\n   ---> System.ArgumentNullException: Value cannot be null. (Parameter 'array')\r\n     at Godot.Collections.Array..ctor(Span`1 array) in \/root\/godot\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/Array.cs:line 87\r\n     at Godot.NativeInterop.VariantUtils.CreateFromSystemArrayOfStringName(Span`1 from) in \/root\/godot\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/NativeInterop\/VariantUtils.cs:line 235\r\n     at ExportArray.ExportArrayTest.GetGodotPropertyDefaultValues() in [[personal computer directory name omitted]]\\ArrayTesting\\Godot.SourceGenerators\\Godot.SourceGenerators.ScriptPropertyDefValGenerator\\ExportArray.ExportArrayTest_ScriptPropertyDefVal.generated.cs:line 18\r\n     at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)\r\n     at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)\r\n     --- End of inner exception stack trace ---\r\n     at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)\r\n     at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)\r\n     at Godot.Bridge.ScriptManagerBridge.GetPropertyDefaultValuesForType(Type type, IntPtr scriptPtr,  addDefValFunc) in \/root\/godot\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/Bridge\/ScriptManagerBridge.cs:line 1052\r\n```\n\n### Steps to reproduce\n\nMake a class extending from Node or Resource with the GlobalClass attribute and an exported property of type `StringName[]`. Upon building or running the project, the null argument exceptions are thrown.\r\n\r\n```cs\r\nusing Godot;\r\nnamespace ExportArray;\r\n\r\n[GlobalClass]\r\npublic partial class ExportArrayTest : Resource {\r\n    [Export]\r\n    public StringName[] ExportedArray;\r\n}\r\n```\n\n### Minimal reproduction project (MRP)\n\n[StringName Array Bug MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14625219\/StringName.Array.Bug.MRP.zip)\r\n","comments":["Was messing around and tried to set property with a default initialized size of 0, and it worked. Was able to work with it in the UI after as well.\r\n\r\n```\r\n    [Export]\r\n    public StringName[] ExportedArray = new StringName[0];\r\n```\r\nanother workaround is\r\n```\r\n    public StringName[] ExportedArray = Array.Empty<StringName>();\r\n```\r\n\r\n<img width=\"467\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/88902054\/8bc9df6a-2869-44b9-973d-039541350680\">\r\n\r\n\r\nLooking at the type definition there is no handler for if it is null so if there is no philosophical reason for this, the engine class could be updated to handle it. Maybe something like this?\r\n\r\n```\r\npublic StringName(string name)\r\n{\r\n    if (!string.IsNullOrEmpty(name))\r\n    {\r\n        godot_string_name value = NativeFuncs.godotsharp_string_name_new_from_string(name);\r\n        NativeValue = (godot_string_name.movable)value;\r\n        _weakReferenceToSelf = DisposablesTracker.RegisterDisposable(this);\r\n    }\r\n    else\r\n    {\r\n        \/\/ Handle empty or null strings gracefully\r\n        NativeValue = godot_string_name.movable.Zero;\r\n        _weakReferenceToSelf = DisposablesTracker.RegisterDisposable(this);\r\n    }\r\n}\r\n```"],"labels":["bug","topic:dotnet"]},{"title":"`ResourceLoader` threaded loading causes memory leak","body":"### Tested versions\n\n- Reproducible in: 4.3.dev3, 4.3.dev5\r\n- Not reproducible in: 4.2.1.stable, 4.2.2.rc1\n\n### System information\n\nGodot v4.3.dev5 - Windows 10.0.19045 - GLES3 (Compatibility) - Radeon RX 560X Series (Advanced Micro Devices, Inc.; 31.0.21910.5) - AMD Ryzen 5 2500U with Radeon Vega Mobile Gfx (8 Threads)\n\n### Issue description\n\nUsing `ResourceLoader`'s threaded loading mechanism causes memory leaks.\r\n\r\nHere is a short script which demonstrates it. It just loads a white texture repeatedly. Note how it doesn't hold any references to the loaded texture by the end of `_physics_process`.\r\n\r\n```gdscript\r\nextends Node2D\r\n\r\nconst PATH = 'res:\/\/white_1024.png' # a white 1024x1024 texture, can be any resource\r\nconst MAX_LOAD_COUNT = 500 # total of ~2GB RAM usage\r\n\r\nvar is_loading := false\r\nvar load_count := 0\r\n\r\nfunc _physics_process(__):\r\n\tif not is_loading:\r\n\t\tis_loading = true\r\n\t\tResourceLoader.load_threaded_request(PATH)\r\n\telse:\r\n\t\tif ResourceLoader.load_threaded_get_status(PATH) == ResourceLoader.THREAD_LOAD_LOADED:\r\n\t\t\tprint('Load count = %s' % load_count)\r\n\t\t\tvar test := ResourceLoader.load_threaded_get(PATH)\r\n\t\t\tassert(ResourceLoader.has_cached(PATH) == true)\r\n\t\t\ttest = null\r\n\t\t\tassert(ResourceLoader.has_cached(PATH) == false)\r\n\r\n\t\t\tload_count += 1\r\n\t\t\tif load_count < MAX_LOAD_COUNT:\r\n\t\t\t\tis_loading = false # load again\r\n```\r\n\r\n\n\n### Steps to reproduce\n\n1. Run the MRP.\r\n2. In the Debugger > Monitors tab, observe how the RAM usage and Objects counter keeps increasing.\r\n3. Observe how the RAM usage and Objects counter doesn't go down even after all the loading is done (after `MAX_LOAD_COUNT` is reached).\r\n\r\nNot sure if related, but notice how the texture memory usage didn't really change throughout.\r\n\r\nSample Run:\r\n![sample_run](https:\/\/github.com\/godotengine\/godot\/assets\/163408636\/9466ed73-2194-4fdf-b368-394897f2c848)\r\n\n\n### Minimal reproduction project (MRP)\n\n[resource_threaded_mem_leak_MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14625218\/resource_threaded_mem_leak_MRP.zip)\r\n","comments":["After further testing, I think the problem starts at 4.3.dev3. Can't reproduce it in 4.2.2.rc2 or 4.3.dev2.\r\n\r\n_(I'm OP. Didn't notice I used an alt account when posting this issue.)_","This problem might be specific to textures. I tested loading a WAV and a Curve resource and this is what I got in my machine:\r\n\r\n- WAV file (44MB, loaded 500 times in 37 secs)\r\n![wav_result](https:\/\/github.com\/godotengine\/godot\/assets\/12081004\/6622f63d-a545-44fa-b745-c1e28d18163f)\r\n\r\n\r\n\r\n- Curve resource (4.2MB, 100k points, loaded 100 times in 50 secs)\r\n![100k_points_curve_results](https:\/\/github.com\/godotengine\/godot\/assets\/12081004\/6aa51a89-b354-4f49-9d61-eef574fcb7c4)\r\n\r\n\r\n- The PNG inside MRP.zip in my post (1024x1024 pure white texture, loaded 500 times in 17 secs)\r\n![png_result](https:\/\/github.com\/godotengine\/godot\/assets\/12081004\/0ed78aae-90c4-4b70-bfbe-b9edbc599f9d)\r\n\r\n\r\nThis is using v4.3.dev3. I added a 2 second grace period after reaching the maximum number of iterations before ending the test.\r\n\r\nNotice how by the end, the WAV and Curve resource tests went back down to around ~47MB memory usage while the PNG test stayed at ~2GB till the end.","Just to clarify, using `ResourceLoader.load` directly doesn't cause any issues.\r\n\r\n```gdscript\r\nextends Node2D\r\n\r\nconst PATH = 'res:\/\/white_1024.png'\r\nconst MAX_LOAD_COUNT = 2000\r\nvar load_count := 0\r\n\r\nfunc _physics_process(__):\r\n\tif load_count < MAX_LOAD_COUNT:\r\n\t\tvar test := ResourceLoader.load(PATH)\r\n\t\tassert(ResourceLoader.has_cached(PATH) == true)\r\n\t\ttest = null\r\n\t\tassert(ResourceLoader.has_cached(PATH) == false)\r\n\t\tload_count += 1\r\n```\r\n\r\nThe resulting memory usage graph is a straight line. It didn't budge at all.\r\n\r\n![direct_load_result](https:\/\/github.com\/godotengine\/godot\/assets\/12081004\/d6e7c9ce-366c-463d-aa69-a9bf78d723ac)\r\n","I've bisected it and the problem starts with v4.3.dev.custom_build [ae418f946] which is part of #86587. Something about `WorkerThreadPool` and `CommandQueueMT`.\r\n\r\nI hope someone else can take a look at this since I'm not touching anything threading related :laughing:"],"labels":["bug","topic:core","needs testing","regression"]},{"title":"REGRESSION: Can no longer get return value from C# method when calling from GDScript.","body":"### Tested versions\n\n4.2.2.rc2.mono (Not present in 4.2.2.rc1.mono)\n\n### System information\n\nDesktop\n\n### Issue description\n\nI can't get the return value of C# methods anymore when I updated to 4.2.2.rc2. Doesn't matter if it's a preloaded script, or used with [GlobalClass]\r\n\r\n(Using. the .call(\"Add\", 1, 2) does work but its not ideal).\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/73148864\/d0cf48f3-df4a-4166-a673-120303b2b78a)\r\n\r\n\r\n\r\n\r\nIt works in 4.2.2.rc1\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/73148864\/bb3f5192-4851-423e-823e-0450f6b094c9)\r\n\r\n```gdscript\r\nextends Node\r\n\r\nconst SomeCsharpScript = preload(\"res:\/\/SomeCsharpScript.cs\")\r\nvar instance: SomeCsharpScript = SomeCsharpScript.new()\r\n\r\nfunc _ready() -> void:\r\n\tvar result = instance.Add(1, 2) # does not work in 4.2.2.rc2.mono\r\n\tprint(result)\r\n\r\n```\n\n### Steps to reproduce\n\nuse mrp\n\n### Minimal reproduction project (MRP)\n\n[MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14625205\/MRP.zip)\r\n","comments":["- Should be fixed by https:\/\/github.com\/godotengine\/godot\/pull\/86972, it hasn't been cherry-picked yet."],"labels":["bug","needs testing","topic:dotnet"]},{"title":"Editor crash when making Multimesh with use_colors turned on unique","body":"### Tested versions\r\n\r\n- Reproducible in: 4.2.1stable, 4.1.1stable, 4.2.2.rc2\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 10.0.19045 - GLES3 (Compatibility) - NVIDIA GeForce RTX 3080 Ti (NVIDIA; 31.0.15.5161) - AMD Ryzen 7 7800X3D 8-Core Processor (16 Threads)\r\n\r\n### Issue description\r\n\r\nthe editor crashes when i try to make unique multimesh with use_colors in it set to true. expected editor to not crash so that i could both use colors and have different instance_count values on different instances of one multimeshinstance2d node at the same time\r\n\r\n### Steps to reproduce\r\n\r\n1. create MultiMeshInstance2D or MultiMeshInstance3D\r\n2. create new Multimesh resource in it\r\n3. in Multimesh set use_colors to true\r\n4. right click Multimesh and press \"make unique\"\r\n\r\nafter these steps editor should crash\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["Can you please try this in [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/)? This sounds familiar and might be solved.","crashes on 4.2.2.rc2 too","Crashes in v4.3.dev1.official [9d1cbab1c].\r\nFixed since v4.3.dev2.official [352434668]. Not sure by which PR (and hence whether it's some small change which could be cherry-picked to 4.2)."],"labels":["bug","topic:rendering","needs testing","crash"]},{"title":"Implement FXAA 3.11 to replace the current broken implementation","body":"Resolves https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9300\r\nFixes https:\/\/github.com\/godotengine\/godot\/issues\/83089\r\nImproves Temporal stability over the old implementation (No Issue on github opened regarding the extremely low temporal stability of FXAA in motion)\r\n\r\nImplements FXAA 3.11 to replace the current Godot FXAA implementation which is heavily messed up.\r\n\r\nMultiview Hasn't been tested (nor can I test it) and Need to find the exact license text for FXAA 3.11, and where to place it in Godot, so help with these aspects is very welcome.\r\n\r\nNo AA:\r\n![image](https:\/\/github.com\/godotengine\/godot-proposals\/assets\/50302479\/36e2bed7-a325-40b6-b055-015b920a99c4)\r\n\r\nNew Implementation:\r\n![image](https:\/\/github.com\/godotengine\/godot-proposals\/assets\/50302479\/917077ea-95e8-4103-940e-66146f079c93)\r\n\r\nOld Implementation:\r\n![image](https:\/\/github.com\/godotengine\/godot-proposals\/assets\/50302479\/83088d1e-e56c-4ede-9e45-a298660d41a0)\r\n\r\nNote: don't mind the performance metrics, for some reason they fluctuate heavily between 4 and 5ms all the time in the scene regardless of version and AA used\/not, and these are just the numbers that happened to be at screenshot time, Actual benchmarks are required to determine actual performance differences.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Can someone confirm the license and origins of this code, see the discussion in:\r\n* https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9300","I just found the License text in the gist https:\/\/gist.github.com\/kosua20\/0c506b81b3812ac900048059d2383126 which links to the implementation at https:\/\/github.com\/kosua20\/Rendu\/blob\/master\/resources\/common\/shaders\/screens\/fxaa.frag that I've used.. Don't know How I've missed it..","It says \"cleaner version\" but does that mean it's just a copy? The original code is proprietary\/closed yes? \r\n> COPYRIGHT (C) 2010, 2011 NVIDIA CORPORATION. ALL RIGHTS RESERVED.\r\n\r\nNothing about any ability to share it, are they the author (even if they are, that doesn't mean they can share it if it's for a company)? Otherwise this looks very fishy and not valid","> FXAA 3 is released under a [public domain](https:\/\/en.wikipedia.org\/wiki\/Public_domain) license. A later version, FXAA 3.11, is released under a 3-clause BSD license.(https:\/\/en.wikipedia.org\/wiki\/Fast_approximate_anti-aliasing)\r\n\r\nwhich links to\r\nhttps:\/\/stackoverflow.com\/questions\/12170575\/using-nvidia-fxaa-in-my-code-whats-the-licensing-model\/12170857#12170857","The link to the license in that page is dead, as is the link to FXAA 3.11, so that doesn't seem like a confirmation, so all we have right now is explicit stating \"it's all rights reserved\"\r\n\r\nIn either case this requires a license inclusion, BSD 3-clause requires that\r\n\r\nFor my part I'd prefer a properly sourced reference to copy, with a clear license statement, from some original trusted source","Well all the official Nvidia links regarding FXAA seem to be dead so...","So then there's no original reference to it *being* open source, so that's a big issue\r\n\r\nEven if we take that statement at face value the source you've copied violates that, it doesn't attach a BSD license to the source, the FXAA 3.11 *isn't* public domain\r\n\r\nAs said by clayjohn this was already known previously and we've been wanting to implement it but licensing stopped us, so it might be we were wrong before but it doesn't seem that way and that we're still unable to based on the same issues as before","Even that claim about it being open source licensed is far not up to the standards of Wikipedia, a random blog or forum post isn't a valid reference, and the fact that they *don't* quote a proper source is a huge red flag to me, if it *was* possible to find a NVIDIA source for it being licensed like that it *would* be on the Wiki page, trust to Wikipedians to fix that quick if they can\r\n\r\nWith something like a big company like NVIDIA I wouldn't believe that they've released *anything* open source without seeing it from them directly","Well I guess the only way to resolve this is to contact Nvidia, and see if the Wiki information is right or not, and pray they answer.","In either case *this* source is not compatible with that unless it's under a public domain license, so in that case you'd have to find NVIDIA source code, this code is copied from a page which claims copyright for the code without any attribution to NVIDIA or any original author\r\n\r\nI don't think this is safe or realistic as a way to proceed, unless you can find a primary code copy to work with\r\n\r\nEdit: Given the phrasing in their comment this might be original code, if that *is* the case then we'd just need to cite them properly (this code currently violates the license of that code, so you need to fix that), assuming it's a valid implementation\r\n> Performs FXAA post-process anti-aliasing as described in the Nvidia FXAA white paper and the associated shader code.\r\n\r\nHowever I don't trust that, they say they have a:\r\n> I have a cleaner, probably more readable version here\r\n\r\nWhich to me reads as a cleaned up *version* of *that* source, not their own creation, which wouldn't be valid\r\n\r\nNote: The only evidence we have currently for NVIDIA releasing this under any license is:\r\n* A forum post of a\r\n* Claimed screenshot of a\r\n* Person claiming (unverifiable) to be the author claiming that\r\n* It is open source\r\n\r\nSo it's like very not any evidence lol","Well, Bevy is using the Gist FXAA implementation - https:\/\/github.com\/bevyengine\/bevy\/blob\/main\/crates\/bevy_core_pipeline\/src\/fxaa\/fxaa.wgsl","Well their header claims that it's a cleaned version of the NVIDIA code, which is very clearly not open source unless there's some part in that code I missed, as see above it says \"ALL RIGHTS RESERVED\", also this one also doesn't give proper attribution and license details \ud83d\ude43 so it still all hinges on the original NVIDIA code being open source, and if it is that would just mean we need to find how to add proper attribution\r\n\r\nThe original gist looks like it's a decompilation of the code, given it contains compiled assembly, which to me is a red flag, if this *was* legitimately released by NVIDIA wouldn't there be actual licensed code *by* them? Or is the gist just very strangely formatted and laid out?","This is Blender's FXAA - https:\/\/github.com\/blender\/blender\/blob\/main\/source\/blender\/draw\/intern\/shaders\/common_fxaa_lib.glsl","That does look more legitimate, and Blender is big enough to get in trouble, but is that actually FXAA 3.11?\r\n\r\nHowever unless that's hugely rewritten in the version you have here that looks nothing like this code\r\n\r\nAlso it says \"BSD-3 AND GPL\" which is confusing, and if it *is* GPL we can't use it","The original Gist seems like the same thing as the Blender FXAA, and the code I used is a cleaner implementation of the Gist made by the author of the gist...\r\n\r\nGPL prob for the blender tweaks stated, IIRC all blender code is GPL","The cleaned code that I used when porting code to Godot and the source code (both gist and blender versions) seem to be doing the same thing, it's just that the source didn't use things such as iterators which blew the number of lines of code like crazy..\r\n\r\nGiven Wikipedia states BSD3, and Blender actually confirms BSD3, and the gist is also used by bevy (the same implementation as I've ported) I'm fairly confident if there were Issues, Nvidia would have taken action long ago, especially given the Size of Blender and the fact they clearly know about Blender for quite a long time, and I think for a while they were even Sponsors, though could be wrong on that one, as I don't see them on the Sponsor list for blender..","> Given Wikipedia states BSD3\r\n\r\nIt doesn't cite a remotely reliable source though, so let's not use it as an argument, this sounds like a game of telephone and there's no actual original source of this claim\r\n\r\nThe Wikipedia source is a screenshot, of a person claiming to be the author of the code, claiming it's open source, that's all we have, if we look at it critically\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/96648715\/72f1cd17-d9db-4f96-a389-c6bfea91c566)\r\n\r\nThat is not a valid source (that's not a screenshot by me, that's literally the source Wikipedia uses), it also doesn't say anything about the 3.11 being BSD\r\n\r\nThe [NVIDIAGameWorks](https:\/\/github.com\/orgs\/NVIDIAGameWorks\/) gh doesn't even have the samples in question any longer, so the supposed license doesn't exist \r\n\r\nRegardless of the legality I feel it's irresponsible to add code for which the original cannot be verified and the claims about it being open source are highly questionable ","https:\/\/github.com\/AmplifyCreations\/FXAA This website has a copyright notice for FXAA.","There is also https:\/\/stackoverflow.com\/a\/40107522\/381724","Yes the second of those links were discussed above and the issues with that all the references there are dead links\r\n\r\nAlso that's FXAA 3.9, not 3.11\r\n\r\nThe first link doesn't have any licensing and all it states is all rights reserved and no basis for sharing it","A clear response would be for us to remove FXAA?\r\n\r\nI could try asking Nvidia what license it is and they can make a redeclaration?\r\n\r\nAnd this is a gist... https:\/\/gist.github.com\/kosua20\/0c506b81b3812ac900048059d2383126 which isn't that great.","I don't know about the existing implementation, where it's from\r\n\r\nNote that the *theory* behind FXAA is available (and you can't copyright it), so if the FXAA code is original it's fine, it looks relatively original\r\n\r\nCC @reduz you added this, where did you get the implementation?","I can say that https:\/\/github.com\/EpicGames\/UnrealEngine\/blob\/release\/Engine\/Shaders\/Private\/Fxaa3_11.ush might be the source of the gist, but it's not public. So it's not helpful.","I might be satisfied with https:\/\/github.com\/hghdev\/NVIDIAGameWorks-GraphicsSamples\/blob\/master\/samples\/es3-kepler\/FXAA\/FXAA3_11.h \r\n\r\n1. it is from a nvidia employee\r\n2. doesn't seem tampered\r\n\r\nhttps:\/\/github.com\/hghdev\/NVIDIAGameWorks-GraphicsSamples\/commit\/61350521f6b183d9f694f5c72c11efcf1a0cc665.patch\r\n\r\n```\r\nFrom 61350521f6b183d9f694f5c72c11efcf1a0cc665 Mon Sep 17 00:00:00 2001\r\nFrom: Lars Bishop <lbishop@nvidia.com>\r\nDate: Wed, 24 Jan 2018 11:27:58 -0800\r\nSubject: [PATCH]     Multiple fixes:     - WAR for Ant builds until we can\r\n switch to gradle     - Fix for project files to work with upcoming NSIGHT\r\n Tegra VSE     - Other doc notes for builds...\r\n```","That does have this license:\r\nhttps:\/\/github.com\/hghdev\/NVIDIAGameWorks-GraphicsSamples\/blob\/master\/license.txt\r\n> If you are acquiring the Software on behalf of any unit or agency of the United States Government, the following provisions apply. The Government agrees the Software and documentation were developed at private expense and are provided with \u201cRESTRICTED RIGHTS\u201d. Use, duplication, or disclosure by the Government is subject to restrictions as set forth in DFARS 227.7202-1(a) and 227.7202-3(a) (1995), DFARS 252.227-7013(c)(1)(ii) (Oct 1988), FAR 12.212(a)(1995), FAR 52.227-19, (June 1987) or FAR 52.227-14(ALT III) (June 1987),as amended from time to time. In the event that this License, or any part thereof, is deemed inconsistent with the minimum rights identified in the Restricted Rights provisions, the minimum rights shall prevail.\r\n\r\nAssuming it applies to this file\r\n\r\nHowever I'm not sure if the clauses are compatible, it has a \"government users\" clause which I don't think is MIT compatible, the MIT license doesn't allow any further constraints afaik, as per the MIT license:\r\n> to deal in the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so","I didn't see that in these files:\r\n\r\nFXAA.cpp\r\nFXAA.h\r\nFXAA3_11.h","It says for Redistribution and use in source and binary forms are permitted.\r\n\r\n```\r\n\/\/ Redistribution and use in source and binary forms, with or without\r\n\/\/ modification, are permitted provided that the following conditions\r\n\/\/ are met:\r\n```","That's true, now the issue is that that's not the code used in this PR, *that* code violates this requirement, so it can't be licensed IMO","However by my reading the linked version you provided seems sufficiently legitimate, so we should instead base this PR on that code, but let's get someone with some knowledge on the legalities in before we do any further work :)\r\n\r\nEdit: To clarify, I'd feel confident to use the one linked in https:\/\/github.com\/godotengine\/godot\/pull\/89582#issuecomment-2002136648 if someone with some savvy in legalities vouches for it, but I'd feel most comfortable if we can find an NVIDIA source for this with licensing, given the varying files with different terms, and that the NVIDIA original samples have been lost seemingly (them being lost doesn't make the license invalid, you can't \"un-license\" something assuming it was licensed properly, but anyone can slap a convincing looking header on a file and claim it's legal)","Out of curiosity, which FXAA quality level is this PR implementing? The performance difference between Low and Ultra quality is very low nowadays (given the reference FXAA implementation was last updated in 2011), but Ultra generally does a better job at smoothing things out. I noticed that Ultra looks a tad blurrier though, so some people may actually prefer Normal (the highest quality which doesn't add blur over Low in my experience).\r\n\r\nReference screenshots from Tesseract with various antialiasing modes:\r\n\r\n[tesseract_screenshots_1440p.zip](https:\/\/github.com\/godotengine\/godot\/files\/14639934\/tesseract_screenshots_1440p.zip)\r\n\r\nThe image without any antialiasing, which you could apply on a well-placed unshaded Sprite3D in front of the camera to compare this with Godot's FXAA implementation:\r\n\r\n![no_aa](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/8129b9b8-4190-4cf2-900b-f646e94dc695)\r\n","Currently It's custom, Subpixel is at default, Edge threshold min is highest (2 above default), Edge threshold max is high (one above default)\r\n\r\nI have considered just going Ultra on all though, but that's up for a discussion really, why I haven't really changed from the Gist values, on the other hand maybe makes sense to go with the defaults for the extra headroom, especially if we're planning on getting SMAA as a higher quality Post Process AA...\r\n\r\nBased on my testing, Ultra vs Default, I'm getting FXAA cost of ~0.8ms and ~0.6ms respectively on a 1050 Ti at 1440p, whereas the old Implementation took ~0.5ms so setting to default would be an almost free boost to quality, though ultra would be 50% more expensive compared to current FXAA, and honestly the diff between default and ultra aren't all that large so if SMAA will come, I'd go default tbh\r\n\r\nAlso do note, on default, Soft shadow dithering basically doesn't change, but is softened up on ultra FXAA, so the extra cost might pay off with not having to go to higher soft shadow quality so there's that too...","At the risk of sounding a little ignorant here... rather than do a simpler refactor, can't the Godot foundation produce their own white paper based on understanding FXAA principles and review of other open source work that sources licenses (such as the NVidia article as well as Blender's FXAA implementation)?\r\n\r\nObviously this requires effort, and if we could simply refactor the library with appropriate licenses, it's a non issue.\r\n\r\nI work in machine vision, and it seems to me that the algorithm boils down to: acquiring brightness data from the screen texture, using a high pass filter (subtractively) or presumably use a low pass filter to improve edge detection, apply a sobel filter (small kernel) or heuristic edge detection algorithm, acquire edge direction, then blend the pixel in the direction normal to the edge. Then a ton of tuning constants to dial it in.\r\n\r\nAnd from another viewport - Blender seems comfortable using FXAA3, I feel like Godot should as well.\r\n\r\nBut I am not a legal expert, so I understand that I could be very wrong here. Just my two cents...","As mentioned above writing our own implementation based on the white paper is fully legal, but that's a lot of work, and having an existing, well tested, implementation is worth a lot, the one linked above with good licensing (it seems, would be good to get it verified) would be a good start, but the current code isn't valid based on the licensing issues (and the current code here doesn't follow the license either)","> As mentioned above writing our own implementation based on the white paper is fully legal, but that's a lot of work, and having an existing, well tested, implementation is worth a lot, the one linked above with good licensing (it seems, would be good to get it verified) would be a good start, but the current code isn't valid based on the licensing issues (and the current code here doesn't follow the license either)\n\nPractically every game these days (besides pixelated style graphics) ships with FXAA. It will be a big feature for Godot to have nailed in implementation.\n\nSo the community, whether by committee or not, probably needs to figure out what the direction forward is. Which sounds like either, engage a legal team, or write a Godot FXAA implementation.\n\nI know I'm asking a lot and so I apologize. I know the engine has 2300 people working so many different things. It's just a feature I would look forward to.","This has already been discussed here and all these options raised, and we're waiting for more details, so this doesn't add anything, please read the full conversation here and on the proposal instead of repeating things :) repeating things isn't going to speed things up and with GDC at the moment a lot of people are away and unable to give their feedback here especially on legal things","FXAA or SMAA is basically a must for anyone that wants AA and doesn't want TAA for whatever reason (a good reason being that Godot's TAA is Broken, and FSR2 has Super ghosting issues due to Pixel Locking, which is unclear if it's FSR2 issue or Godot issue or a mix, and the reason Why I went into this tbh)\r\n\r\nWhat shocked me actually when looking at the current implementation and thinking about it, and comparing it to reference, I'm not surprised that ours is such garbage, as it's only taking into account a 3x3 pixel grid, whereas 3.11 reference walks on for multiple pixels in a given direction which makes sense, and I see my attempts at making my own AA method were on the right track, though the biggest error I made was blending all those pixels I walk over instead of using the walking over to determine where I sample the end result pixel, though It would have taken ages to figure out how to calculate that position even if I did have that information.","> I'm not surprised that ours is such garbage\r\n\r\nPlease don't talk about the work of others in that way, it's not friendly or constructive :) Calling code \"broken\" or \"not enough\" or even \"bad\" is one thing, those are statements of quality, not value, but \"garbage\" is a value judgement that is neither helpful nor kind.","I think I've triggered you a little with the wording and so you missed what was actually being said there.\r\n\r\n> comparing it to reference, I'm not surprised that ours is such garbage, as it's only taking into account a 3x3 pixel grid, whereas 3.11 reference walks on for multiple pixels in a given direction which makes sense\r\n\r\nThis is in no way not constructive or hostile when read in it's entirety, and as far as friendliness\/kindness goes it's neutral in tone, and there's nothing wrong with that.\r\n\r\nTo show an example of what's wrong with not taking the whole thing into consideration properly:\r\n\r\n> Please don't talk about the work of others\r\n\r\nThe tone of just this statement alone can correctly be interpreted in tones ranging from friendly (your original intention) to neutral (oh I don't care about talking about others' work) to hostile (oh shut up, you're too stupid to understand others' work and thus your input is useless)\r\n\r\nNow when you add the extra context in the continuation It's clear that the intent wasn't hostile like it could have been interpreted without it. Hope I've cleared that up now.\r\n\r\nOn another note, this comment and yours should be marked as off topic, as they're not related to this PR as a whole."],"labels":["enhancement","topic:rendering","topic:3d"]},{"title":"```EditorNode3DGizmo::_is_handle_highlighted``` loop index passed as handle id ","body":"### Tested versions\n\nv4.2.dev.custom_build [bfd78bb91]\n\n### System information\n\nW10\n\n### Issue description\n\nThe member function ```EditorNode3DGizmo::_is_handle_highlighted``` is called with the loop index instead of the handle id, See https:\/\/github.com\/godotengine\/godot\/blob\/master\/editor\/plugins\/node_3d_editor_gizmos.cpp#L407.\r\nThis leads to a discrepancy when comparing it to a custom (internal) highlighted id, saved in ```EditorNode3DGizmo::_get_handle_value```, because the actual handle id, as set by ```EditorNode3DGizmo::_redraw```, is passed there.\n\n### Steps to reproduce\n\nSee example code below.\r\n\r\n```gdscript\r\nextends EditorNode3DGizmo\r\n\r\nfunc _redraw():\r\n\tclear()\r\n\tvar handles := [Vector3(1,1,1)]\r\n\tvar handle_ids := [123]\r\n\tvar material := StandardMaterial3D.new()\r\n\tvar handle_t : CompressedTexture2D = load(\"res:\/\/icon.svg\")\r\n\tmaterial.albedo_texture = handle_t\r\n\tmaterial.use_point_size = true\r\n\tmaterial.point_size = handle_t.get_width()\r\n\tmaterial.billboard_mode = BaseMaterial3D.BILLBOARD_ENABLED\r\n\tmaterial.vertex_color_use_as_albedo = true\r\n\tadd_handles(handles, material, handle_ids)\r\n\r\nfunc _is_handle_highlighted(id, secondary):\r\n\treturn id == 123 # False\r\n```\n\n### Minimal reproduction project (MRP)\n\n[TestGizmo.zip](https:\/\/github.com\/godotengine\/godot\/files\/14624635\/TestGizmo.zip)\r\n","comments":["Should be a trivial fix, will test and open a PR if it is"],"labels":["bug","topic:editor","topic:plugin","topic:3d"]},{"title":"Fix `gdextensionlibs.json` storage path in Android gradle build","body":"<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\nFix #89062","comments":["Please make your commit message and PR title more descriptive :)"],"labels":["bug","platform:android","topic:editor","topic:gdextension","crash","regression","topic:export"]},{"title":"Incorrect work of look_at function","body":"### Tested versions\n\n- Reproducible in: 4.2-dev4 and later including 4.3-dev5\r\n- Not reproducible in: 4.2-dev3 and earlier \n\n### System information\n\nWindows 10 - Godot v4.2.1.stable - Compatibility\n\n### Issue description\n\nThe bug occurs when:\r\n- \"Compatibility\" rendering method is used\r\n- \"display\/window\/stretch\/scale_mode\" is an integer\r\n- \"display\/window\/stretch\/mode\" is viewport or canvas_item.\r\n- \"display\/window\/size\/viewport\" size does not equal the window size.\r\n\r\nThe bug manifests as if the rotation angle is being calculated not from the position of the node, but from some point with an offset from the node. This offset correlates with the difference between the viewport size in the project settings and the window size.\n\n### Steps to reproduce\n\nTo reproduces the bug, you can use the `look_at(get_global_mouse_position())` function in any node, such as Sprite2D.\n\n### Minimal reproduction project (MRP)\n\n\r\n[Bug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14624346\/Bug.zip)\r\n","comments":["The issue happens for `display\/window\/stretch\/scale_mode == integer` when \"desired\" viewport height is greater than the window size. In such case the viewport size is forced to the desired size (integer scale of `1`) so it ends up bigger than the window. However, such viewport ends up being render-wise attached to the window's bottom-left corner, while it seems all other calculations assume it's attached to the window's top-left corner. Hence the discrepancy equal to the height difference between the window\/viewport sizes.\r\n\r\n![zguDuR3qgv](https:\/\/github.com\/godotengine\/godot\/assets\/9283098\/f0ae2a2f-15d0-4e94-a126-a7d444d64acf)|![N4VeNOQNFF](https:\/\/github.com\/godotengine\/godot\/assets\/9283098\/7a9a5b0f-535d-4304-a202-8f4ae091a1e8)|![3mv50jPLeQ](https:\/\/github.com\/godotengine\/godot\/assets\/9283098\/df3a073e-72e8-4d28-b342-95a92765634f)|![Qf8mR3h4oC](https:\/\/github.com\/godotengine\/godot\/assets\/9283098\/e1df4d09-6061-49ef-8f96-4def76ef01c1)\r\n-|-|-|-\r\n\r\nMRP changed to produce the above: [Bug2.zip](https:\/\/github.com\/godotengine\/godot\/files\/14625241\/Bug2.zip)\r\n\r\n\r\nHappens since the addition in #75784 (cc @Riteo).","Mhh that's interesting. The integer scaling PR does not explicitly change the way the surface is attached AFAIK, although since it allows the buffer to \"overflow\" out of the window it might have exposed this discrepancy with the way input is scaled.\r\n\r\nMaybe the input is scaled relative to the viewport, so by breaking the window-viewport connection it looks weird. Not sure.\r\n\r\nI'll take a look at this as soon as I have some time."],"labels":["bug","topic:rendering","confirmed","topic:input","topic:2d"]},{"title":"Move the line of infinity loop checking in AnimationStateMachine","body":"- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89520\r\n- Fixes https:\/\/github.com\/godotengine\/godot\/issues\/82935 (Maybe, but i'm not sure since there is no MRP)\r\n\r\nThe checking for transition by `At End` is performed in `_can_transition_to_next()`. It is a normal termination that does not require a warning, so it should be performed prior to the infinite loop checking.","comments":["Thanks for fixing it! The MRP I uploaded for #89730 incidentally triggers the spurious error from #82935, and I can confirm it is not reproducible when opened with the build artifact for this PR."],"labels":["bug","topic:animation","cherrypick:4.1","cherrypick:4.2"]},{"title":"Wayland: Workaround API limitation in screen\/UI scale logic","body":"Partially addresses #89257.\r\n\r\nMainly, this fixes auto UI scaling with _single-monitor_ fractional setups (see the comment in `display_server_wayland.cpp` for more info).\r\n\r\nThis is the result of a bunch of current limitations, mainly the fact that the UI scale is static (it's probed at startup) and the fact that Wayland exposes fractional scales only at the window-level, by design.\r\n\r\nThe `screen_get_scale` special case should help in 99% of cases, while the auto UI scale part will unfortunately only help with single-screen situations, as multi-screen fractional scaling requires dynamic UI scale changing.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","platform:linuxbsd","topic:porting","usability"]},{"title":"Fix crash when columns are skipped in csv translation","body":"Fixes #89571\r\n\r\n#83600 added locale skipping, but the index used was not adjusted accordingly.","comments":["My bad, thanks!"],"labels":["bug","topic:editor","topic:import","crash"]},{"title":"Avoid passing zoom scale for ParallaxLayer mirror","body":"`ParallaxBackground` doesn't support zoom, so instead it scales all the `ParallaxLayer`s up(!). The old rendering method required that calculation done up front when deciding repeat size, but the new one doesn't. This just uses the `ParallaxLayer`'s original scale to mirror instead.\r\n\r\nBefore:\r\n![68747470733a2f2f692e6779617a6f2e636f6d2f30326364616462626464653565383332643933613765366232356337346561392e676966](https:\/\/github.com\/godotengine\/godot\/assets\/21325943\/3a93c038-8d2c-4c63-9fe1-f6aa646e2f2c)\r\n\r\nAfter:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/21325943\/499ba4fe-4c20-4f3a-92e0-90bdebab965b\r\n\r\n\r\nFixes #89563\r\n\r\nI'd like to have some further testing to avoid more regressions. My original PR didn't have any changes to `ParallaxBackground` or `ParallaxLayer` so I want to be cautious with this fix. I'll comment when I have tried a few more scenarios.","comments":["> The old rendering method required that calculation done up front when deciding repeat size, but the new one doesn't\r\n\r\nThis is somewhat concerning and needs some deeper investigation of potential other side effects from the changes, and sounds like a compatibility breakage (and that method is exposed)\r\n\r\nI'm not sure this is the right way to solve this, unsure that breakage is considered valid","It would be good to figure out what commit caused the regression, since it's apparently not the addition of Parallax2D.","Oh that's very interesting, sounded like it was that, will do some digging","@akien-mga Sorry, I caused a misunderstanding: It *is* my original PR that caused it. I was just clarifying that I didn't change any `ParallaxBackground` or `ParallaxLayer` code in my PR. The renderer method handles both the old nodes and the new one. It used to require the `ParallaxLayer` to account for the scaling before it sent its size where now it doesn't, but now that I'm actually modifying something in `ParallaxLayer` I want to be sure it's the right call.","Now this feature isn't used by the engine anywhere else, but it *is* exposed, so needs some evaluation of what to do to possibly preserve previous behavior","I've been trying a couple more scenarios between 4.2 and this PR and so far it looks like I haven't found any other regressions in the old nodes. This does, however, uncover an interesting choice we have. \r\n\r\nThe behavior for `ParallaxBackground` is that when you zoom in\/out, it scrolls the textures as well. I'm not sure if this is desired or not. If not, no changes need be made. If so, for `Parallax2D`, you would have to pass the camera's zoom value separately for every update. The reason is that using the camera's transform would take rotation into account, which we definitely don't want to do with `Parallax2D`. This was not an issue with `ParallaxBackground` only because it doesn't support rotation at all. I could also provide both as a selectable option, but I'd like to know what other's think.\r\n\r\nZoom doesn't scroll textures:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/21325943\/ff777b29-6b79-4925-a7e3-4c462276d460\r\n\r\nZoom scrolls textures:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/21325943\/3c1db403-dfe1-4774-a98e-d4ecdf1cdc0c\r\n\r\n","> The behavior for ParallaxBackground is that when you zoom in\/out, it scrolls the textures as well. I'm not sure if this is desired or not.\r\n\r\n_Absolutely not_ in my humble opinion. Feels like yet another reason to favour Parallax2D","I did some further testing comparing between versions and it seems this does fix the regression. Unfortunately, the original behavior is not the most ideal since every time you update the scale, you need to reset the mirroring property or it's off. It also seems that `ParallaxLayer` never fully supported scaling besides the zoom feature and scrolling will break if you alter it manually. It's not hard to fix, but that should be in a separate PR. I encountered this issue as well in `Parallax2D`, so I'll make a quick PR to fix that too.","When zoom scrolls textures, it does not look like a \"zoom\", but rather like moving the camera forward.\r\nPerhaps there could be another property for that if this is needed."],"labels":["bug","needs testing","regression","topic:2d"]},{"title":"Csv file that contains a key with underscore which is in between other keys fails to load and crashes.","body":"### Tested versions\n\nGodot v4.3.dev5, Godot v4.3.dev3\n\n### System information\n\nGodot v4.3.dev5 - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 2070 SUPER (NVIDIA; 31.0.15.3699) - Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz (8 Threads)\n\n### Issue description\n\nCsv file that contains a key with underscore which is in between other keys fails to load and crashes.\r\n\n\n### Steps to reproduce\n\nTry to load csv file that contains a key with underscore(_data). That key needs to be in between other keys(en,_data,es).\n\n### Minimal reproduction project (MRP)\n\n[csvtranslationloaderror.zip](https:\/\/github.com\/godotengine\/godot\/files\/14623957\/csvtranslationloaderror.zip)\r\n","comments":[],"labels":["bug","topic:editor","confirmed","topic:import","crash"]},{"title":"Error message whenever unfocusing editor window while working on a saved scene.","body":"### Tested versions\r\n\r\n- Reproducible in (with minor variations across versions):\r\n- v4.0.stable.official [92bee43ad]\r\n- v4.2.1.stable.official [b09f793f5]\r\n- v4.2.2.rc2.official [c61a68614]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 10.0.22631 - GLES3 (Compatibility) - Intel(R) Iris(R) Xe Graphics (Intel Corporation; 31.0.101.1999) - 12th Gen Intel(R) Core(TM) i7-1260P (16 Threads)\r\n\r\n### Issue description\r\n\r\nThis error is written to Output for each time I click out of the editor on any project when working on a saved scene:\r\n```\r\nParent node is busy setting up children, `add_child()` failed. Consider using `add_child.call_deferred(child)` instead.\r\nscene\/main\/window.cpp:1658 - Condition \"!is_inside_tree()\" is true.\r\n```\r\n\r\nI don't think I've ever seen that path or its number change (`scene\/main\/window.cpp:1658`).\r\n\r\nThis happens in new projects too. To my knowledge, it doesn't do anything to really cause any real problems. I do have some other issues, but I think those are separate matters (mainly, nested custom resources breaking and returning null on use but still showing up in the stack trace and inspector).\r\n\r\n---\r\n\r\n*_I would also like to mention that this is my first time using GitHub to contribute anything. Feel free to let me know if I'm doing anything wrong_\r\n\r\n### Steps to reproduce\r\n\r\nThe error occurs whenever the editor loses focus (ex. when I click outside of the window). This happens in both my main project that I've been working on, but also a brand new project.\r\n\r\nHowever, it only happens when inside a saved scene (I tested a plain Node2D scene and a Node3D scene). If I am in an unsaved 'new tab' labelled `[empty]` or another unsaved new scene, then the editor does not give the error.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["Can you test this in [4.2.2.rc2](https:\/\/godotengine.org\/article\/release-candidate-godot-4-1-4-and-4-2-2-rc-2\/)? This sounds familiar and might be fixed\r\n\r\nHowever this doesn't seem like something that's universal, or we'd see a lot of reports, so it's very likely specific to your project so we'd need to have an example of it happening, it doesn't happen in a new project ","I ran some tests and received some results.\r\n\r\nSummary:\r\nCan be reproduced, but so far, only for me. Error is usually mundane, except after experiencing its freeze on 4.2.2.rc2, each new scene, when saved for the first time, will freeze the editor completely (with the exception of outputting new error messages for each unfocus). The exception to this is 4.0.stable, which will only freeze on the first scene saved of any freshly-created new projects. When reloading the project, new scenes can be saved without the freeze.\r\nThe typical behaviour is an error message outputted whenever clicking off the Godot Editor. The message itself varies from version (often the path). The worst case is the freezing, which can be worked around by closing Godot in the task manager, and reloading the project for each new scene saved.\r\nBecause the error only happens for me, but still carries across versions, I think it may be something in my Godot Editor Settings, configurations, or maybe my User and Roaming file that messes with this. I'll play with my settings and update on if anything seems to cause or fix it.\r\n\r\n---\r\n\r\nHere are the unabridged details for each test:\r\n\r\nNote: Both Tests 1 and 2 were not editor-breaking\r\n### Test 1\r\nv4.0.stable - New Project\r\n\r\n```\r\nParent node is busy setting up children, `add_child()` failed. Consider using `add_child.call_deferred(child)` instead.\r\n  scene\/main\/window.cpp:1456 - Condition \"!is_inside_tree()\" is true.\r\n```\r\n- Path: `scene\/main\/window.cpp:1456`\r\n\r\n### Test 2\r\nv4.2.1.stable - New Project\r\n```\r\n  Parent node is busy setting up children, `add_child()` failed. Consider using `add_child.call_deferred(child)` instead.\r\n  scene\/main\/window.cpp:1658 - Condition \"!is_inside_tree()\" is true.\r\n```\r\n- Path: `scene\/main\/window.cpp:1658`\r\n\r\n### Test 3:\r\n4.2.2.rc2 - New Project (after saving scene for first time)\r\nEditor became unresponsive for the first time. After this test, the other breaking-cases started happening.\r\nFirst at the beginning, it outputted this error (once):\r\n```\r\nSignal 'focus_entered' is already connected to given callable 'AcceptDialog::_parent_focused' in that object.\r\nCan't make active a Viewport that is already active.\r\n```\r\n\r\nAlong with the following error. After that, it proceeded to output this error on each unfocus:\r\n```\r\nplatform\/windows\/display_server_windows.cpp:1313 - Condition \"!windows.has(p_window)\" is true. Returning: -1\r\n```\r\n\r\nCould be reproduced by following the steps to reproduce:\r\nSteps to Reproduce:\r\n- Create new project\r\n- Create new Scene\r\n- Save scene\r\n- Error occurs\r\n\r\nNotes:\r\n- Path: `platform\/windows\/display_server_windows.cpp:1313`\r\n- Window is completely unresponsive to everything except unfocusing the editor window or (which results in outputting errors). I couldn\u2019t select or copy the error message either, so I transcribed it from the attached screenshot\r\n- Editor wouldn\u2019t exit by clicking the x-button, I had to end the process from the process manager\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/144911602\/1806d9e2-5121-4978-8e7e-a154f16e4dbb) \r\n\r\n### Test 4\r\n4.2.2.rc2 - Previous Project (loading the scene saved from Test 3)\r\nResponsive.\r\nOn unfocus:\r\n```\r\n  Parent node is busy setting up children, `add_child()` failed. Consider using `add_child.call_deferred(child)` instead.\r\n  scene\/main\/window.cpp:1658 - Condition \"!is_inside_tree()\" is true.\r\n```\r\n- Path: `scene\/main\/window.cpp:1658`\r\n### Test 5\r\n4.2.1.stable - New Project\r\nUnresponsive. Could be reproduced.\r\nDisplays these errors first:\r\n```\r\nSignal 'focus_entered' is already connected to given callable 'AcceptDialog::_parent_focused' in that object.\r\nCan't make active a Viewport that is already active.\r\n```\r\nOn unfocus:\r\n```\r\nplatform\/windows\/display_server_windows.cpp:1310 - Condition \"!windows.has(p_window)\" is true. Returning: -1\r\n```\r\n\r\n- Path: `platform\/windows\/display_server_windows.cpp:1310`\r\n\r\n### Test 6\r\n4.2.1.stable - Previous Project (loading scene saved from Test 5)\r\nOn unfocus:\r\n```\r\n  Parent node is busy setting up children, `add_child()` failed. Consider using `add_child.call_deferred(child)` instead.\r\n  scene\/main\/window.cpp:1658 - Condition \"!is_inside_tree()\" is true.\r\n```\r\n- Path: `scene\/main\/window.cpp:1658`\r\n### Test 7\r\n4.0.stable - New Project\r\nUnresponsive. Could be reproduced. Outputted 16 errors along for the first few times I unfocused. The errors seemed to be composed of a combination of repetitions from the following error messages (see screenshot below):\r\n- `Signal 'focus_entered' is already connected to given callable 'AcceptDialog::_parent_focused' in that object.`\r\n- `Can't make active a Viewport that is already active.`\r\n- `platform\/windows\/gl_manager_windows.cpp:279 - Could not switch OpenGL context to other window: Error 6: The handle is invalid`\r\n- `platform\/windows\/display_server_windows.cpp:966 - Condition \"!windows.has(p_window)\" is true. Returning: -1`\r\n- (a literal blank error message, with the red dot but no text)\r\n\r\nPaths:\r\n- `platform\/windows\/gl_manager_windows.cpp:279`\r\n- `platform\/windows\/display_server_windows.cpp:966`\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/144911602\/4017cb9d-1d46-4c71-bb16-80466223bf67)\r\n\r\nOn unfocus (alongside a blank error):\r\n```\r\nplatform\/windows\/gl_manager_windows.cpp:279 - Could not switch OpenGL context to other window: Error 6: The handle is invalid\r\n\r\n```\r\n\r\nUniquely to 4.0.stable, it seems that only the first scene save on brand new projects causes this error. Upon opening up the new project after closing it and saving a new scene, we get the usual results from Test 1 rather than the editor-breaking ones. However, I did manage to reproduce the results from Test 7 on a brand new project on the same version.","Please delete your editor settings and similar and try, this isn't a bug in the editor, and unless this is an issue that can be solved by a change in the engine, and not something that's broken in your drivers, or configuration, there's nothing we can do really, so please see if clearing your data helps","Update: I believe this is caused by `Save on Focus Loss` being on in Editor Settings  (`Interface` > `Editor` > `Save on Focus Loss`), because turning it off has made the error messages stop appearing.","> Update: I believe this is caused by `Save on Focus Loss` being on in Editor Settings (`Interface` > `Editor` > `Save on Focus Loss`), because turning it off has made the error messages stop appearing.\r\n\r\nCan confirm, looked this thread up because I had the exact same problem. Disabling `Save on Focus Loss` solved the issue."],"labels":["bug","topic:editor","needs testing"]},{"title":"Improve `includes` in directory `core\/math\/`","body":"In this PR, I changed includes in directory math.\r\n\r\nI used forward declaration in some places. \r\nI also included the files(which have types that the file needs) that are already used in other inclusions. Why: It reduced the connection between files and if we want to rewrite a file to remove an include, we don't have to worry that this include is used by another file.\r\n\r\n**Why did I change files not in the math directory?**\r\nThis was because the file `math_funcs.h` uses the following inludes.\r\n``` c++\r\n#include \"core\/math\/random_pcg.h\"\r\n#include <float.h>\r\n```\r\nThey are not used in the `math_funcs.h` file, but are used in several other. I just added the necessary includes to them in order to remove includes from `math_funcs.h`.\r\n\r\n**Benchmark**\r\nSystem info:\r\nLinux Mint 21.2 (Victoria) - X11 - NVIDIA GeForce RTX 3050 Laptop GPU () - 11th Gen Intel(R) Core(TM) i5-11400H @ 2.70GHz (12 Threads)\r\n\r\nCompile command:\r\n`scons -j12 optimize=none`\r\n\r\nCompilation time in master:\r\n`[Time elapsed: 00:05:30.874]`\r\n\r\nCompilation time in this PR:\r\n`[Time elapsed: 00:05:27.627]`","comments":["Most of these are redundant, and at least a few of these should be removed IMO:\r\n* `core\/typedefs.h` This is universal and except for some places in core this is guaranteed to be included\r\n* `core\/error\/error_macros.h` Same for this one\r\n* `core\/os\/memory.h` Same for this one\r\n* `core\/variant\/binder_common.h` Internal to `variant`, shouldn't be included elsewhere unless specifically needed, which these don't (as it is redundant)\r\n* Any of the `variant`, `string` or `math` types, like `Vector2\/3\/4(i)`, `Array`, `Dictionary`, `String`, `StringName`, etc. if `variant.h` is included, it implies them very strongly\r\n\r\nIt also doesn't really improve build time by a measurable amount, how many builds did you average this for? How did you measure it? With a `--clean` and a `--no-cache`? A difference in 3 seconds (about 0.9%) is within normal margins IMO, I'd say this won't change build time and *can't* affect build times to begin with (and even if it did, the change in question is not significant)\r\n\r\nThe change that would have the possibility of improving compile time would be to strip down includes rather than adding them I'd say","I checked it 3 times. Once the time improved by 2 seconds, another time by 7 seconds, and the third time by 1 second. \r\n\r\nI did not delete the cache, just compiled on two different branches. \r\n\r\nThis definitely improves the compile time because I removed <float.h> and <random_pcg.h>, which are used in several files, but compiled in almost all files.\r\n\r\nAlso, re-including a file affects the compilation time by about 0.05% of its total compilation time.  But I think I'm going to take away the includes you mentioned earlier.","Did you run the unchanged 3 times as well? But in either case 7 seconds out of over 5 minutes is negligible, it's well within the margins for the operating system handling files\r\n\r\nIf it was a change that didn't clutter the files it would be a different story, but most of these changes are redundant, and some breaks compilation","I changed branches every time I tested","Changing branches does not mean full recompilation. You could as well change to a differently-named equivalent branch and do a null build \ud83d\ude43","Which is why you should do:\r\n```\r\nscons --clean [your options goes here]\r\nscons --cache-disable [your options goes here]\r\n```\r\nTo get a true \"from scratch\" build\r\n\r\nRemember, you're compiling literally thousands of files, that means that a variation between runs of just milliseconds per file would account for that difference, even just a few milliseconds of OS scheduling difference when starting each compilation would account for such\r\n\r\nEdit: Also, can't believe I didn't think of that at once:\r\nYour variation *between* builds of the change is greater than the difference between that and the base one, so very clearly there's no actual improvement\r\n\r\nIf the difference between this PR is about 4 seconds, and the difference between that and the base build is 3 seconds, then it's obviously variability","So after fixing the missing includes on Windows (mind you ran an SCU build so not entirely representative of \"fixes all includes\"), but from specifically SCU builds this made no difference (granted I didn't remove the `float.h` additions in other files that are redundant if they include `math_funcs.h` as `float.h` is needed in `math_funcs.h`)\r\n\r\nBefore:\r\n* 00:03:29.191\r\n* 00:03:28.656\r\n\r\nAfter:\r\n* 00:03:27.218\r\n* 00:03:28.320\r\n\r\nI'll do a few non-SCU builds too and see but I don't expect any changes there either","Tested a non-scu build and same results, identical time ranges:\r\n\r\nBefore:\r\n* 00:08:53.617\r\n* 00:08:53.669\r\n* 00:08:58.694\r\n\r\nAfter:\r\n* 00:09:07.868\r\n* 00:08:51.987\r\n* 00:08:54.952","I removed unnecessary trivial inclusions like \r\n* core\/typedefs.h\r\n* core\/error\/error_macros.h\r\n* core\/os\/memory.h\r\n* core\/math\/math_defs.h\r\n\r\nAlso I removed a `variant`, `object`, when `ref_counted` is present. And also something like `vector_n.h` when there is a `variant`.","Will take a new look but I'm not seeing the need or reason for the vast majority of this, so I'm not sure this should be made at all"],"labels":["enhancement","discussion","topic:core","topic:codestyle"]},{"title":"etcpak: Avoid resizing images and clean up the code","body":"Changes the etcpak implementation's code to avoid resizing images whose resolutions aren't multiples of 4, and to only smear them instead.\r\n\r\nAlso cleans up some of the code.","comments":[],"labels":["enhancement","topic:import"]},{"title":"Fix some invalid `int` property ranges","body":"* `HeightMapShape3D` had ranges configured for `float` instead of `int`\r\n* Particles had `amount` that used `exp` which is not supported, added a note\r\n\r\nThe `amount` case could be fixed by adding support for this to `EditorPropertyInteger` but unsure how useful that would be generally, so just fixing it here\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["I think it would be useful. *Exp* was probably used in an attempt to have more control over the lower values (where particle count is WAY more noticeable).","We can always add it back in if we improve that side, but ensuring it works correctly might be finicky, and might be buggy with integer values especially in the lower range (though I haven't tested it myself)\r\n\r\nSo opening a separate PR and adding different cases that would benefit from `exp` (including these ones back in) seems to be the way to go with that side","Instead of removing it, which does not change anything, you could put a FIXME comment.","Sure can do that instead, this *does* do one thing though: Discourage others adding this to their code thinking it will work","With just a quick check, without doing any deeper reworking, adding support for `exp` to this specific property makes it impossible to edit reliably, it *only* affects the grab behavior, and skips wildly, it only works reasonably well with the slider exposed, which won't happen without a step smaller than 1\r\n\r\nSo I think the better solution is simply to remove it, I don't see the usefulness of it, but I'll leave it as a note for now but I'd say to just remove it is the better solution, even with the slider exposed by using a smaller than 1 step it's still very clumsy to edit like that, so I don't see the usefulness at al","exp range for particles amount was added back in dfd1331690fab7e634e2e18fd7269bab8f759b3a. idk if it was better back then, but I guess it doesn't make much sense anymore.","As you can see from the code the integer one didn't support exp then either so it seems to always have been dead code \r\n\r\nIt even uses the `EXP_RANGE` hint which didn't apply at all to the int property"],"labels":["bug","topic:editor"]},{"title":"Regression in ParallaxBackground","body":"### Tested versions\n\nReproducible in 4.3 dev5, not observed in 4.2 stable\n\n### System information\n\nWindows 10, Godot 4.3 dev5, Nvidia 3060 12 GB\n\n### Issue description\n\nI want to have an infinite scrolling parallax background with 2 layers that move at different speed when the camera is moved and that also respect the zoom level of the camera. I achieved this with ```ParallaxBackground``` and sprites set to repeat to be several times larger than the viewport.\r\nOn 4.3 dev5 zooming in causes the top or both layers to dissapear.\n\n### Steps to reproduce\n\nIn the attached project you can click and drag around with the mouse to move the camera and the parallax background respectively.\r\nUse the mouse wheel to zoom in and out and notice how one or both layers will not display.\n\n### Minimal reproduction project (MRP)\n\n[BgBug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14623191\/BgBug.zip)\r\n","comments":["I see what you mean. Your project was throwing a lot of exceptions when running and the issue was hard to replicate, so I altered it significantly to show the problem more clearly. All you need to do now is scroll a bit to the right and zoom in (it's now interpolated). I'll look into this this week, but here's the project if someone else can figure it out first:\r\n[BGBug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14623523\/BGBug.zip)\r\n","I can see the issue.\r\n<img src=https:\/\/i.gyazo.com\/02cdadbbdde5e832d93a7e6b25c74ea9.gif>","I was able to fix it by changing `parallax_layer.cpp`'s mirroring update. I think because `ParallaxBackground` is a `CanvasLayer` and zoom isn't supported, `ParallaxBackground` scales the `ParallaxLayer`s *themselves* (weird, right?). This required the size after scaling to be presented to the renderer up front. The new render method doesn't need that hack since `Parallax2D` is a `Node2D`, but `ParallaxLayer` was still taking the zoom scale into account.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/21325943\/b004479e-882c-442f-a7f9-df8936922dc8)\r\n\r\nI'd like to get further testing, because I'd hate for this to cause another regression, since my original PR didn't actually change any `ParallaxBackground` or `ParallaxLayer` code.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/21325943\/a05d6792-4323-4e9f-82f7-887360a3c690\r\n\r\n","Would love to help with testing as the actual setup I discovered the is a bit more complicated than the example.","I'll make a PR and request that it wait for further testing. I'm pretty confident about your scenario, but I want to try out a few other odd cases with zooming since the old parallax duo does some pretty wacky things.","@filkata Once the checks pass, you can download an artifact from the PR and try it out. Let me know if you find anything else, and thanks for the quick catch!","@markdibarry Can I get some instructions on how to get the artifact from the pull request? Have not done this ever yet.","> Can I get some instructions on how to get the artifact from the pull request? Have not done this ever yet.\r\n\r\n@filkata See [here](https:\/\/docs.godotengine.org\/en\/latest\/contributing\/workflow\/testing_pull_requests.html#downloading-a-compiled-build).","I did some further testing comparing between versions and it seems this does fix the regression. Unfortunately, the original behavior is not the most ideal since every time you update the scale, you need to reset the `mirroring` property or it's off. It also seems that `ParallaxLayer` never fully supported scaling besides the zoom feature and scrolling will break if you alter it manually. It's not hard to fix, but that should be in a separate PR. I encountered this issue as well in `Parallax2D`, so I'll make a quick PR to fix that too."],"labels":["bug","confirmed","regression","topic:2d"]},{"title":"In Tilemap TileSetScenesCollectionSource, change source_id,but the UI doesn't display right.","body":"### Tested versions\r\n\r\nv4.2.1.stable.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 10.0.22631 - Vulkan (Mobile) - dedicated NVIDIA GeForce RTX 3060 Laptop GPU (NVIDIA; 31.0.15.5161) - AMD Ryzen 7 5800H with Radeon Graphics (16 Threads)\r\n\r\n### Issue description\r\n\r\nThe right UI display:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/36144612\/f22d928e-6966-4ee5-8cea-5dc06b673e7a)\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/36144612\/6e377168-79f8-4bc8-b70f-a1ddd84056ab)\r\n\r\nThe BUG:\r\ni want to change the source_id to make it sorted(5,6,7....) to use in the code\r\n```gdscript\r\nset_cell(4,map_pos,7,Vector2i(0,0),1) \r\n```\r\nbut the UI cant not change? it remaind 8\r\nGood, It can still run correctly ,so i guess it has changed but UI not work rightly.\r\n\r\nI create a TileSetScenesCollectionSource (7),and delete it(7) then create a new TileSetScenesCollectionSource.(display 8)\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/36144612\/42781e6f-3d26-4810-863a-ac44fe672882)\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/36144612\/f913bead-2aed-4dfd-bad5-5f65d4e000c0)\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/36144612\/ba8fe855-d250-4acc-ae82-0c8a8262d802)\r\n\r\n\r\nBy the way, i add  inherit scene to TileSetScenesCollectionSource, but it repo\r\n\"Invalid PackedScene for TileSetScenesCollectionSource: res:\/\/plants\/maitscn. Could not get the type of the root node.x\"\r\nsomeone repo it ,and has fixed. After Reload this Project ,it can work correctly.\r\n\r\n### Steps to reproduce\r\n\r\nnull\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nnull","comments":[],"labels":["bug","topic:editor"]},{"title":"Directional Shadows disappear with large Camera Z Far values at some angles","body":"### Tested versions\n\n- Reproducible in: v4.3.dev5.official [89f70e98d]\r\n- Not Reproducible in: v4.3.dev2.official [352434668], v4.2.1.stable.mono.official [b09f793f5]\n\n### System information\n\nGodot v4.3.dev5 - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 Ti (NVIDIA; 31.0.15.3623) - AMD Ryzen 7 2700 Eight-Core Processor (16 Threads)\n\n### Issue description\n\nWhen I set the camera's Z Near to 10m and Z Far to 1,000,000m, shadows from a directional light begin to disappear at certain angles. Reducing the Z Far value to 100,000m resolves the issue. The ratio between the near and far planes is not significantly different from the default values (4000 \/ 0.05 = 80,000, compared to 1,000,000 \/ 10 = 100,000), so I think that the problem is unlikely to be related to Z fighting or similar issues.\r\n\r\nSmall Z Far value:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/25693223\/633d70dc-1ab8-42c8-bfa7-e6d664273286)\r\n\r\nLarge Z Far value:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/25693223\/6e9f8fb1-27ca-4279-8f50-54df16747b25)\r\n\n\n### Steps to reproduce\n\nIn the MRP, toggle the preview between Camera3D_Ok and Camera3D_Error to observe the disappearance of shadows. Additionally, you can adjust the editor camera settings to match those of Camera3D_Error and rotate it to identify angles at which the shadows fail.\n\n### Minimal reproduction project (MRP)\n\n[ShadowTest1.zip](https:\/\/github.com\/godotengine\/godot\/files\/14622846\/ShadowTest1.zip)\r\n","comments":[],"labels":["bug","topic:rendering","regression","topic:3d"]},{"title":"`CPUParticles3D` incorrectly applies the `angle` parameters when `particle_flag_rotate_y` is used.","body":"### Tested versions\n\n- v4.2.1.stable.official [b09f793f5]\n\n### System information\n\nWindows 10.0.19044 - Vulkan (Mobile) - dedicated Radeon RX Vega (Advanced Micro Devices, Inc.; 31.0.21910.5) - AMD Ryzen 9 5900X 12-Core Processor (24 Threads)\n\n### Issue description\n\n`CPUParticles3D` incorrectly applies the `angle_min` and `angle_max` properties when the `particle_flag_rotate_y` flag is used.\r\n\r\nSpecifically, the angle value is applied as angular velocity rather than a fixed value. This is contrary to the behavior when the `particle_flag_disable_z` flag is used. Additionally, `GPUParticles3D` correctly applies the angle value when an equivalent configuration is used.\r\n\r\nHere is a video demonstrating the difference between `CPUParticles3D` and `GPUParticles3D`:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2352020\/556d8891-c993-4589-91b7-d22f066e32d0\r\n\r\nAnd here are the properties used for each:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2352020\/cf9e91de-4494-4965-8b01-2ea3ef910652) ![image](https:\/\/github.com\/godotengine\/godot\/assets\/2352020\/9379f835-431c-4f13-b3ef-262e0838fd55)\r\n\r\n\n\n### Steps to reproduce\n\n1. Create a `CPUParticles3D` node with `particle_flag_rotate_y = true` and `angle_min` and `angle_max` set to an arbitrary non-zero range.\r\n2. Observe that the particles spin extremely fast.\n\n### Minimal reproduction project (MRP)\n\n[cpuparticles3d-rotate_y-angle-repro.zip](https:\/\/github.com\/godotengine\/godot\/files\/14622805\/cpuparticles3d-rotate_y-angle-repro.zip)\r\n","comments":[],"labels":["bug","topic:3d","topic:particles"]},{"title":"Change activity name from com.godot.game.GodotApp to .GodotApp","body":"Every time we export a project from godot to Android, the package is always changed to com.godot.game.GodotApp. This pull request provides more flexibility in changing packages in Android.\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Please change the commit and PR title to reflect the actual change :)","@AThousandShips please review this!","This is not my area, the appropriate team has been notified and will review this :)"],"labels":["platform:android","topic:porting","topic:export"]},{"title":"When importing image as Font Data resource, out of bounds row\/column values cause crash upon clicking reimport","body":"### Tested versions\n\nv4.2.1.stable.official [b09f793f5]\n\n### System information\n\nGodot v4.2.1.stable - Windows 10.0.22621 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3080 (NVIDIA; 31.0.15.3770) - 12th Gen Intel(R) Core(TM) i9-12900 (24 Threads)\n\n### Issue description\n\nIf you set the rows\/columns to 0 when importing a font data image, it crashes the editor.  The field should be sanitized to only accept values >=1\n\n### Steps to reproduce\n\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/89282845\/1697dacd-a6fa-47c1-9879-80e8f8211a6c)\r\nclick 'reimport'\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor","needs testing","topic:import","crash"]},{"title":"Fix words not being selected by endpoints","body":"Previously, words were unable to be selected by placing the cursor at the left-most character or the character directly after the word. This issue is addressed by adjusting the conditions to check if the caret is positioned in these places.\r\n\r\nWhile fixing this issue, I found that my edits to the conditions affected the behaviour of drag-selecting multiple words. Specifically, it made it impossible to select the whitespace between words in word selection mode, which was a feature before. This is fixed by modifying the conditions based on if multiple words are being selected.\r\n\r\nAnother problem related to how selecting the word by the leftmost character moved the caret to the left side of the word, while selecting it by any other character moved it to the right side. This is fixed by preventing the caret from moving to the left side of the word until the word selection has moved.\r\n\r\nApologies for requesting a review from so many reviewers, I had some trouble squashing my commits into one.\r\n\r\nFixes #89551 ","comments":[],"labels":["bug","topic:gui","cherrypick:4.2"]},{"title":"Editor Crash when import this image","body":"### Tested versions\r\n\r\nv4.1.stable.mono.official [970459615]\r\nv4.2.1.stable.mono.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable.mono - macOS 14.3.1 - Vulkan (Mobile) - integrated Apple M2 Max - Apple M2 Max (12 Threads)\r\n\r\n### Issue description\r\nImage cause asset import crash. See this test project `res:\/\/Asset\/Shadow Of Storms 159x53.png`.\r\n\r\n### Steps to reproduce\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[AssetTest.zip](https:\/\/github.com\/godotengine\/godot\/files\/14622421\/AssetTest.zip)","comments":["I tested importing the texture with `Godot v4.3.dev4 - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 6GB (NVIDIA; 31.0.15.3640) - Intel(R) Core(TM) i5-3570K CPU @ 3.40GHz (4 Threads)`. This version does not crash.\r\n\r\nThe texture size is 17013x53 pixels which according to the [documentation ](https:\/\/docs.godotengine.org\/en\/4.2\/classes\/class_texture2d.html#description) is too large:\r\n\r\n> The maximum texture size is 16384\u00d716384 pixels due to graphics hardware limitations. Larger textures may fail to import.","I made some more tests (with pngs). On my system a 20000 pixel wide texture still worked fine, but a 40000 pixel wide texture was garbage. But still no crashes.\r\n\r\nShould the maximum size of 16384x16384 be enforced in the code? My guess is that what happens with very large textures depends on your hardware. If that guess is correct, not enforcing the maximum size may lead to situations where the game dev uses far too large textures just because the dev's hardware happens to support those. But the textures will then cause problems for players using less capable hardware.","@miv391 I tested the dev branch `v4.3.dev4.mono.official [df78c0636]` also `v4.3.dev5.mono.official [89f70e98d]`. But they all crashed.","> I made some more tests (with pngs). On my system a 20000 pixel wide texture still worked fine, but a 40000 pixel wide texture was garbage. But still no crashes.\r\n> \r\n> Should the maximum size of 16384x16384 be enforced in the code? My guess is that what happens with very large textures depends on your hardware. If that guess is correct, not enforcing the maximum size may lead to situations where the game dev uses far too large textures just because the dev's hardware happens to support those. But the textures will then cause problems for players using less capable hardware.\r\n\r\nI think it's possible to give a pop-up error window when texture size over the limitation, at least not to cause the godot to crash directly.","I suspect it's related to gpu capacity.\r\n\r\n>  I tested the dev branch v4.3.dev4.mono.official [df78c0636] also v4.3.dev5.mono.official [89f70e98d]. But they all crashed.\r\n\r\n@KarryCharon  Can you check the log and post it? So we can know where it crashed.","@jsjtxietian Are you tested on MacOS? Windows OS may work fine....","> I suspect it's related to gpu capacity.\r\n> \r\n> > I tested the dev branch v4.3.dev4.mono.official [[df78c06](https:\/\/github.com\/godotengine\/godot\/commit\/df78c0636d79c9545a283e0e2a926d623998cc27)] also v4.3.dev5.mono.official [[89f70e9](https:\/\/github.com\/godotengine\/godot\/commit\/89f70e98d209563abb4dbc1f8cd5d76c81eb7940)]. But they all crashed.\r\n> \r\n> @KarryCharon Can you check the log and post it? So we can know where it crashed.\r\n\r\nWhere can I find the log file?","I'm using windows so I can't reproduce the issue. \r\n\r\n> Where can I find the log file?\r\n\r\nSorry I do not know since I don't have a mac..."],"labels":["bug","needs testing","topic:import","crash"]},{"title":"Fix backspace always unfolding previous line","body":"Add a condition to `CodeEdit::_backspace_internal` so the previous line is only unfolded when the caret is at the start of the current line.\r\n\r\nFixes #89522 \r\n","comments":[],"labels":["bug","topic:gui"]},{"title":"My game causes an error upon exiting when it does not have an audio device connected","body":"### Tested versions\r\n\r\n4.3 dev 5\r\n\r\n### System information\r\n\r\nGodot v4.3.dev5.mono - Windows 10.0.22621 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3070 (NVIDIA; 31.0.15.5176) - Intel(R) Core(TM) i7-9700KF CPU @ 3.60GHz (8 Threads)\r\n\r\n### Issue description\r\n\r\nMy game causes an error upon exiting when it does not have an audio device connected.\r\n\r\nTurning on my speaker works normally if there is an audio device connected.\r\n\r\n![QQ\u622a\u56fe20240316112229](https:\/\/github.com\/godotengine\/godot\/assets\/20112581\/b1bbe450-00d0-4bea-b4e7-b74ed6088c43)\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. start\r\n2. exit\r\n3. error\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["I guess we can remove the `ERR_FAIL_COND_V(hr != S_OK, ERR_CANT_OPEN);` in `AudioDriverWASAPI::audio_device_init`, it's checked at outside anyway. "],"labels":["bug","topic:audio"]},{"title":"CI: Enable submodules on the checkout action","body":"This does not directly alter the behavior for Godot itself, but it means that forks of Godot with submodules do not need to apply a patch to the CI scripts in order for the CI to build with the submodules. The Godot repo itself has no submodules, and therefore this does nothing, there are no downsides for us, but it benefits forks.","comments":[],"labels":["enhancement","topic:buildsystem"]},{"title":"Single word characters cannot be selected with double click in Editor","body":"### Tested versions\n\nv4.3.dev3.official [36e943b6b]\n\n### System information\n\nLinux Kubuntu 23.04 KDE Plasma Version: 5.27.4 KDE Frameworks Version: 5.104.0 Qt Version: 5.15.8\n\n### Issue description\n\n**Double clicking** does not select  on _single word characters_ such as alpha or numeric, in the Editor, unless the character is at the end and the cursor is placed after it. (I know, who uses single character variable names), but just thought I would report it since other editors I tested behave as expected.\r\n\r\n```gdscript\r\n        # a not selectable but 2 is if cursor at end of line.\r\n\tvar a = 2\r\n\r\n        # b and a not selectable\r\n\tvar b= a*2\r\n\r\n        # c not selectable\r\n\tvar c =2\r\n\r\n        # d not selectable\r\n\td = 7\r\n\r\n        # cc is selectable\r\n\tvar cc= 2\r\n```\n\n### Steps to reproduce\n\nsee above\n\n### Minimal reproduction project (MRP)\n\nsee above","comments":[],"labels":["bug","topic:gui"]},{"title":"Incomplete Apache 2.0 license text returned from Engine.get_license_info()","body":"### Tested versions\n\nReproducible in:\r\n- v3.5.3.stable.official [6c814135b]\r\n- v4.2.1.stable.arch_linux\r\n- v4.3.dev5.official [c9c17d6ca]\r\n\n\n### System information\n\nGodot v4.3.dev5 - EndeavourOS #1 SMP PREEMPT_DYNAMIC Fri, 08 Mar 2024 01:59:01 +0000 - X11 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 2070 SUPER (nvidia; 550.54.14) - Intel(R) Core(TM) i7-9700K CPU @ 3.60GHz (8 Threads)\n\n### Issue description\n\n`Engine.get_license_info()` returns incomplete version of Apache 2.0 license. See https:\/\/github.com\/godotengine\/godot\/blob\/c9c17d6ca\/COPYRIGHT.txt#L567-L578 for the actual text being returned. Apache 2.0 is the only license not included in full, the others seem complete.\r\n\r\nExample of a full Apache 2.0 license: https:\/\/github.com\/godotengine\/godot\/blob\/c9c17d6ca\/thirdparty\/astcenc\/LICENSE.txt\r\n\r\nI am not a lawyer.\n\n### Steps to reproduce\n\nRun the reproduction project to see the license\r\n\r\nOr just run:\r\n```\r\nprinterr(Engine.get_license_info()[\"Apache-2.0\"])\r\n```\n\n### Minimal reproduction project (MRP)\n\n[apache-2.0-license-viewer.zip](https:\/\/github.com\/godotengine\/godot\/files\/14621815\/apache-2.0-license-viewer.zip)\r\n","comments":["This appears to be how they recommend citing it (see here https:\/\/www.apache.org\/licenses\/LICENSE-2.0). Is there any reason to think that is insufficient?","I found a related discussion on this topic here: https:\/\/github.com\/licensee\/licensee\/issues\/82#issue-132772719\r\nand https:\/\/github.com\/licensee\/licensee\/issues\/103\r\n\r\nTo me it seems that Godot is using boilerplate version intended mainly for source file headers where long text is not practical.\r\n\r\nWhether using this version for `Engine.get_license_info()` is sufficient or not would probably depend on use cases of this function.\r\n\r\nMy use case was to display license information to the end user to read in a game menu UI.\r\n\r\nI am not sure if displaying boilerplate version of the license there is sufficient or not (not being a lawyer) but for the sake of consistency it might be better to have all licenses returned from `Engine.get_license_info()` be in full.\r\n\r\nNote that `Engine.get_license_info()` already contains CC-BY-4.0 license which is even longer (309 lines) compared to full Apache-2.0 (173 lines)."],"labels":["discussion","topic:thirdparty"]},{"title":"C#: Implement `InvariantCulture` on Variant strings","body":"Supercedes #83159\r\n\r\nChanges the current behavior of the C# strings using formatting from the current culture to an invariant representation. It was discussed whether to take this approach or `IFormattable` to allow for string invariance, ultimately deciding that these strings aren't used in contexts where the culture information is relevant. If desired, `IFormattable` implementation can be revisited at a later point.","comments":[],"labels":["enhancement","topic:dotnet","breaks compat"]},{"title":"Fix FileSystem dock auto translating files","body":"Addresses https:\/\/github.com\/godotengine\/godot\/pull\/89032#issuecomment-2000550973.\r\n\r\n* *Bugsquad edit, closes: #89596*","comments":[],"labels":["bug","topic:editor","regression"]},{"title":"Fix missing gutter icon for inner class method overrides","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/69023\r\n\r\nAlso handles inner, inner classes! And inner, inner, inner classes... and so on.\r\n<img width=\"499\" alt=\"Cap\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/30541183\/5e85a3bd-543a-42c5-8ea4-3b59722c0137\">\r\n\r\n\r\n","comments":["Haven't tested but code changes look good."],"labels":["bug","topic:gdscript","topic:editor"]},{"title":"meshoptimizer: State used version explicitly","body":"Given that `meshoptimizer` uses a stable release (v0.20) of https:\/\/github.com\/zeux\/meshoptimizer, I think it's better to have it written explicitly in the `README.md` file as opposed to the ambiguous \"git\".\r\n","comments":[],"labels":["enhancement","topic:thirdparty"]},{"title":"Linux X11 OpenGL\/Vulkan - After changing window size, window content doesn't immediately refresh to match new size","body":"### Tested versions\r\n\r\n- Reproducible in: v4.2.1.stable.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Ubuntu 22.04.3 LTS 22.04 - X11 - Vulkan (Mobile) - dedicated NVIDIA GeForce GTX 860M (nvidia; 535.154.05) - Intel(R) Core(TM) i7-4710HQ CPU @ 2.50GHz (8 Threads)\r\n\r\n### Issue description\r\n\r\nI was sure the issue had been reported, but apparently it was only casually mentioned on pages like Q&A saying how to change window size by command line. So I open a bug now.\r\n\r\nI have an AppManager script that changes the window size when user presses a certain key (as fallback until I implement a proper menu, or for quick testing).\r\n\r\nI noticed that changing window size via code `_unhandled_input` or `_physics_process` can cause the window to change size, but the content gets stuck (rest is filled with black if size increased, or game content is cut is size decreased).\r\n\r\nIt seems to work fine when window is resized on _ready (fortunately, as I need this for custom initial scale on start).\r\n\r\nUsing `call_deferred` on `DisplayServer.window_set_size` doesn't help.\r\n\r\nFor instance, if I start with this window:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1067772\/1e6a3dd5-4618-4c68-833a-9ecffcaa4f4c)\r\n\r\nand press the window size change button, I could get this:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/1067772\/495289b9-160a-40de-907c-fbe57e7d601d)\r\n\r\nOn second try, it works. Sometimes, it auto-refreshes after a second.\r\n\r\nIt seems to only happen on my Linux, which uses X11, and both with OpenGL in Compatiblity and Vulkan in Forward+ (although my GPU is not 100% compatible with it - but the issue seems to be a window thing more than actual content rendering thing).\r\n\r\n### Steps to reproduce\r\n\r\n1. Open MWE in demo.tscn\r\n2. Run game\r\n3. Press K to increase window size, J to decrease (you can change this in Input Map). Repeat and observe.\r\n4. You can also test toggle fullscreen (F) but in general it works\r\n5. You can press Q to quit and relaunch the game for a fresh test\r\n6. Variant: edit WindowSizeManager.gd, locate Method A & B code, comment method A and uncomment method B to `call_deferred` window resize => still same issue\r\n\r\nNote: after reaching full screen, window size tends to get stuck. But that's another issue.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[v4.2.1 - Linux X11 window resize doesnt immediately refresh.zip](https:\/\/github.com\/godotengine\/godot\/files\/14621467\/v4.2.1.-.Linux.X11.window.resize.doesnt.immediately.refresh.zip)\r\n","comments":[],"labels":["bug","platform:linuxbsd","topic:gui"]},{"title":"GLTF: Extract converting hull points to mesh to a helper function","body":"I ran into a situation downstream where I needed this functionality in 2 places, so I separated it into a helper method. I believe this is worth upstreaming, since this method is quite a big chunk of isolated code that makes sense to separate to improve organization. The behavior should be identical except for printing another error message when failing.","comments":[],"labels":["enhancement","topic:import","topic:3d"]},{"title":"The menu is drawn on top of another workspace when it is changed","body":"### Tested versions\n\nReproducible: in 4.2.1-stable, v4.3.dev.custom_build [01152ab66]\n\n### System information\n\nGodot v4.2.1.stable - Debian GNU\/Linux 12 (bookworm\/testing) 12 - sway 1.8 (XWayland) - GLES3 (Compatibility) - Mesa Intel(R) HD Graphics 520 (SKL GT2) () - Intel(R) Core(TM) i3-6006U CPU @ 2.00GHz (4 Threads)\n\n### Issue description\n\nIf I change workspace while the menu is open the menu will be rendered in a new workspace and when I hover mouse on other top bar \"buttons\", other menus appear\r\n\r\n![screen-1710481859](https:\/\/github.com\/godotengine\/godot\/assets\/97330399\/f25f28dc-abda-4974-b6b2-085c555cc0fb)\r\n\r\nGodot was open in 6 workspace than I moved to workspace while the menu was open.\r\n\r\nCan't check with pure wayland or pure X11 because I don't have X11 and can't run on wayland with errors...\n\n### Steps to reproduce\n\n1. Open project\r\n2. Open one of the menus\r\n3. Move to another workspace\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","platform:linuxbsd","topic:gui"]},{"title":"Add Gizmo to display 3D custom AABB","body":"This PR adds the ability to preview the custom AABB of a MeshInstance3D inside the editor.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/38570835\/7fc7eb7c-7dc7-464a-82a5-d9679d43a3f6)\r\n\r\n","comments":[],"labels":["enhancement","feature proposal","topic:editor","topic:3d"]},{"title":"Godot crashes when minimizing a subwindow","body":"### Tested versions\r\n\r\nReproducible in 4.3-dev3, dev4, and dev5\r\n\r\n### System information\r\n\r\nGodot v4.3.dev4 - Windows 10.0.19045 - GLES3 (Compatibility) - Intel(R) HD Graphics 4600 (Intel Corporation; 20.19.15.5126) - Intel(R) Core(TM) i3-4330 CPU @ 3.50GHz (4 Threads)\r\n\r\n### Issue description\r\n\r\nBasically I opened the script editor in a subwindow, tried to minimize it, and Godot crashed. Later on I checked if this also happens in normal projects and yes, it does.\r\n\r\n**Here's a short video:**\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/136469511\/f790186c-0758-4514-8296-9c9d8843bbea\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Add a **Window** node to your scene.\r\n2. Make sure to disable this setting **display\/window\/subwindows\/embed_subwindows**.\r\n3. Minimize it.\r\n\r\n-- Or within Godot --\r\n1. Go to script editor.\r\n2. Make it floating.\r\n5. Minimize it.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A.","comments":["Can you please try with [dev5](https:\/\/godotengine.org\/article\/dev-snapshot-godot-4-3-dev-5\/)?","Yes, it still happens in dev5.","I don't have this problem.\r\nChecked in 4.3 dev 4 - dev 5\r\n\r\nGodot v4.3.dev5 - Windows 10.0.19045 - GLES3 (Compatibility) - Radeon RX 560 Series (Advanced Micro Devices, Inc.; 31.0.14001.45012) - Intel(R) Core(TM) i5-4570 CPU @ 3.20GHz (4 Threads)","Can't reproduce it on Windows 11 (NVIDIA GPU), neither in GLES\/Compatibility nor it Vulkan\/Forward+.","Can someone with an Intel GPU please try to reproduce it?"],"labels":["bug","topic:editor","crash"]},{"title":"Light grey text on white background in built-in docs code snippets in light theme","body":"### Tested versions\n\nReproducible: v4.3.dev5.official [c9c17d6ca], with forced wayland `run\/platforms\/linuxbsd\/prefer_wayland = true`\n\n### System information\n\nFedora Linux 39.20240315.0 (Silverblue), Wayland, GPU AMD Radeon RX 570 Series, Forward+\n\n### Issue description\n\nWith light theme for editor (`interface\/theme\/preset = \"Light\"`), in built-in docs variables and functions use light gray color for highlighting.\r\nExample for `bool` snippet:\r\n![\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f](https:\/\/github.com\/godotengine\/godot\/assets\/54743395\/749cb2ff-ff30-4cf7-b980-2978e464df0f)\r\n\r\nWhich should match text editor colors, like here:\r\n![\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f](https:\/\/github.com\/godotengine\/godot\/assets\/54743395\/4b55a8d8-8b59-4939-8947-85bec22c8d07)\r\n\r\nIt is possible to workaround this, by changing theme to Default, then change back to Light.\r\nThen right colors will be used:\r\n![\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f](https:\/\/github.com\/godotengine\/godot\/assets\/54743395\/8a17772e-cae0-45eb-b657-b7aeedc82189)\r\nI believe this issue caused by same reasons that I reported in past:\r\n#85633\r\n#85627\r\n\n\n### Steps to reproduce\n\n1. Start Godot with Light theme.\r\n2. Open any docs and scroll to code snippet.\r\n3. Observe light grey colored text.\n\n### Minimal reproduction project (MRP)\n\nGodot editor itself affected.","comments":[],"labels":["bug","topic:editor","usability"]},{"title":"'Show in File Manager' should be 'Show in Finder' on macOS","body":"### Tested versions\n\n4.2.1\n\n### System information\n\nGodot v4.2.1.stable - macOS 14.3.1 - Vulkan (Mobile) - integrated Apple M3 Max - Apple M3 Max (14 Threads)\n\n### Issue description\n\nOn macOS, the file explorer is called 'Finder'. It's a term macOS users are used to, so if a context menu in the 'File System' tab of Godot refers to it using a different name ('File Manager'), it is not clear whether that refers to another feature of Godot or the OS. For clarity, it should simply state 'Show in Finder', and every macOS user will know exactly what the option does.\r\n\r\n<img width=\"520\" alt=\"Screenshot 2024-03-15 at 20 34 16\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/5611323\/6a236d48-9278-47ec-8356-5f2df7b6fc15\">\n\n### Steps to reproduce\n\n- Right mouse click on any file in the FileSystem tab of Godot.\r\n- The second to last item is 'Show in File Manager' while 'Show in Finder' would be a lot more clear and intuitive for macOS users.\n\n### Minimal reproduction project (MRP)\n\nn\/a","comments":["Ah whoops, thanks for catching that mistake in the title @AThousandShips! Point in case how confusing it all is ;)","While this might be applicable to macOS, the name of the actual manager isn't guaranteed on other OSs, for example this varies greatly between different linux\/BSD variants (Nautilus in Gnome, Dolphin in KDE, just to name two), it's also called \"File Explorer\" in Windows 10, but \"Windows Explorer\" in Windows 7\r\n\r\nSo this isn't specific to macOS, and I think it'd be confusing to name it differently on macOS from other OSs\r\n\r\nHow does other software handle this? Does Unity have a similar feature? Blender? Etc.\r\n\r\nThis should really have been a proposal IMO, to discuss the broader discussion of OS specific naming and design\r\n\r\nEdit: This might be even more negatively affected by translation, without a clear indication in the translation strings for the editor some translations might be translated *differently* from the way macOS translates \"Finder\" in that specific language, making things *more* confusing than before\r\n\r\nUnlike the term \"File Manager\" which is generic (and doesn't actually match *any* OS naming that I've found) and anyone who knows the basic terminology can work out, specific names create a lot of confusion\r\n\r\nEdit 2: To further emphasize that this should be a proposal to discuss the broader question of \"should the Godot Editor use OS specific terms for different things\" is: It's called \"Open Containing Folder in Terminal\", yet it's not called the \"terminal\" at all in Windows, it's either the \"Command Prompt\" or \"PowerShell\"","All software I have on my Mac with an option like the one we're discussing displays this as 'Show in Finder'. This also goes for plenty of apps available on Windows and Linux. Calling the file system on macOS 'Finder' is simply the native experience on macOS, and why I made this PR about macOS specifically. Perhaps macOS _should_ be an exception in this regard, though I think you're making the case that it should be a bit smarter in general and on other platforms too \u2013 calling the file system like it is on each platform. I understand that makes it a bit more complex for translations, but that complexity came from making Godot multiplatform, and in my opinion, the shortcut that was taken to not address this issue and just call is 'file manager' just makes Godot feel less native on every platform.\r\n\r\nI understand that you're coming at this from a 'single codebase on multiple OSes' point of view. I think my perspective is that of a user who doesn't switch between OSes regularly \u2013 which I assume is most people \u2013 and those on macOS expect a native macOS experience... which Godot _almost_ is, aside from little things like this.\r\n\r\nI don't think this is better as a proposal, but you obviously know better. The way I see it is that Godot is an app on macOS and just like the menu bar and the window management it has certain standards, a UX language, and actual language that make it a native app on macOS. This is one of those things that is off \u2013 hence an issue. But I can throw this into the proposals as well, if you think that's better?","But that would be specific to macOS, this isn't *possible* to solve on Linux distributions because there *is* no fixed file manager there, even though there are *default* ones (and on all OSs we'd be at the mercy of them renaming it, again, like Windows did)\r\n\r\nI'd say that:\r\n* I'd say this isn't as simple as just specifically macOS and specifically the Finder\r\n* This is for bugs and this isn't a bug\r\n\r\nSo proposals is the place to deal with this\r\n\r\nMy suggestion for a cross-platform change would be to continue being cross-platform and just say \"Show in Folder\" which is what several programs I have use (chrome, Kate, VLC)","It's not an unsolvable problem only on Linux or about being cross platform. Even on Mac (which is what I'm using too), Finder is not necessarily what a customer is using for managing files. For obvious reasons, it's not such a hot topic as web browsers so people just accept and adapt to the default file manager, but there are lots of file managers out there ([random example](https:\/\/www.techpout.com\/best-file-manager-for-mac\/)).\r\n\r\nAnd same on Windows, Explorer is not necessarily the file manager in use. While I was on Windows, I was using Directory Opus and it was always annoying when programs used \"Open in Explorer\" phrase.\r\n\r\n\"Show in file manager\" is somewhat similar to \"Open in browser\" as I see it. To me, it'd be weird to see \"Open in Edge\" (or some other web browser) used instead. In fact other programs should be using \"Show in file manager\" too, instead of \"Show in Finder\".","To add to this, making this OS specific complicates documentation work if this menu is ever shown as a screenshot in the docs, or if we need to give users instructions on what to click.\r\n\r\nFor the record, we had similar discussions about the \"Move to Trash\" entry, which was eventually renamed to just \"Delete\" to avoid having to make it OS specific (Trash \/ Recycle Bin \/ etc.).\r\n\r\nThe function of this entry is just asking the OS to show the file in the configured default file manager application. Which as @inhalt120g pointed out, may not be Finder even on macOS if the user configured it otherwise.\r\n\r\nIt's not a hill I'd die on though, if macOS users overwhelmingly want this change for the editor to feel more native to their environment, we can likely do it. But they'll have to live with the potential inconsistency in the docs or if they don't use Finder.","\u2026and on top of all that, if Apple decides to rename Finder to something else\u2026 :)\r\n\r\nI'm not saying it's likely to happen, but\u2026 who knows. Right now it might sound improbable, but similar things already happened like how instead of \"Internet Explorer\" we got \"Edge\" just like that.","> How does other software handle this? Does Unity have a similar feature? Blender? Etc.\r\n\r\nUnity says Finder:\r\n\r\n<img width=\"280\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/e7569500-71b0-4ae0-9b45-4581dc9a965d\"><br>\r\n\r\nBlender says Open Folder:\r\n\r\n<img width=\"280\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/9d5f81ef-3ddf-4b27-bdbc-cdb749beaf4f\"><br>\r\n\r\n> On macOS, the file explorer is called 'Finder'. It's a term macOS users are used to\r\n\r\nAs a macOS user who rarely switches OS I never found \"File Manager\" to be unclear\r\n\r\nPersonally I wouldn't change it, but if a lot of macOS users feel strongly about it I wouldn't have a problem with this either. It's very rare for documentation to talk about that particular button (I think currently neither godot or unity docs have any mention of it, at least I couldn't easily find it). In any case I think it's a tiny nuance","For reference, in [VSCode](https:\/\/github.com\/microsoft\/vscode\/blob\/b3b3473543f98f70acd9587ea46c17c0e521706c\/src\/vs\/workbench\/contrib\/files\/electron-sandbox\/fileActions.contribution.ts#L27):\r\n- On Windows \"Reveal in File Explorer\"\r\n- On Mac \"Reveal in Finder\"\r\n- Otherwise \"Open Containing Folder\"\r\n\r\nAnd they are translated separately.","I'd say to match that as I suggested above and go for \"Open Containing Folder\", if anything, but I'd say there's really no need","I'm sorry you have had that experience, but no one is bullying you, please be reasonable, you are entitled to express your perspective and views, and so are others, no one has tried to silence you, everyone has been presenting arguments\r\n\r\nI'm sorry this is something you perceive as a conflict or an attack, but that's not very constructive, please consider the code of conduct\r\n\r\nEdit: was a response to a now deleted comment","I made this issue to express that I was confused about the current wording. I don't know how many or how much other macOS users are confused like me, and I don't know anything about the implications of making a solution for this. But what I do know is that calling the option \"Reveal in Finder\" clears up this issue for me, and I assume for 99% of macOS users. \n\nThank you for your consideration to make Godot a more native experience on macOS.","That's reasonable, but do keep the above arguments in mind, and that it's not that simple, and that it isn't an obvious solution and isn't guaranteed to reduce confusion, especially considering the notes about documentation above, and tutorials\r\n\r\nIn my experience people are far more likely to be confused by a documentation tutorial etc. not using the same term as the interface does, than an unfamiliar term in the editor, for example this is the first time this issue has been raised as far as I can tell, but I've seen several documentation issues over slightly incorrect wordings in the documentation causing significant confusion \r\n\r\nIt's important to consider all sides and angles, and improvement isn't that simple most of the time, and has many factors to consider "],"labels":["discussion","topic:editor","topic:porting"]},{"title":"Fix method bindings in FBXDocument by making them virtual in GLTFDocument.","body":"The FBXDocument api was not functional in GDScript, because the `_bind_methods` is in GLTFDocument, and C++ had no way to know how to reference the FBXDocument version of these functions.\r\n\r\nI also added a missing function implementation for `FBXDocument::write_to_filesystem` - it was previously not linked.","comments":[],"labels":["bug","topic:import","topic:3d"]},{"title":"Fix mobile renderer RID leaks","body":"Update render_forward_mobile destructor to include instance buffers. \r\nUpdate render_scene_buffers_rd cleanup to include weight buffers \/ blur textures.\r\n\r\nFixes: #89182 \r\n","comments":[],"labels":["bug","topic:rendering","cherrypick:4.2"]},{"title":"Editor: Add ability to rename theme types","body":"* Closes #86898.\r\n\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/ce862867-cc25-4873-86c7-c36c8fafc21b)\r\n![](https:\/\/github.com\/godotengine\/godot\/assets\/47700418\/c63f3cc2-08e6-410f-bcdb-60d1e6a0c12a)\r\n\r\nAlso adds type\/item name validation, since themes don't allow arbitrary names:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/68ad520da4365c866ceea42e0238b2ea24647289\/scene\/resources\/theme.cpp#L179-L198\r\n\r\nFixes the error `Error calling UndoRedo method operation '_update_edit_item_tree': 'ThemeTypeEditor::_update_edit_item_tree': Instance is null`.","comments":[],"labels":["enhancement","topic:editor","usability","topic:gui"]},{"title":"[Editor] Add support for displaying unsigned integers in the inspector","body":"Added these hints to shader uniforms, which is what inspired this improvement\r\n\r\nAlso made improvements to handling of vector inspector\r\n\r\nStill in progress with some details to work out, but basically ready, works well with the specific use case, limited at the moment but useful for the specific use of handling shaders, where editing unsigned values is very difficult from the editor\r\n\r\nConsidering it a feature, but it technically covers a broken or missing editor feature, I think it speaks for itself in this format, but can open a proposal if desired, but I don't think there's anything more to discuss except implementation details\r\n\r\nIt's of very limited use for `int` but for `PackedInt32Array` and `Vector2\/3\/4i` it's very potent\r\n\r\nSee for background:\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/89488#issuecomment-1999173062\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/89436\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["enhancement","feature proposal","topic:core","topic:editor"]},{"title":"Allow BaseMaterial3D height\/dither fade to work with Compatibility rendering","body":"Compatibility is based on OpenGL ES 3.0, so the height shader (including deep parallax) and distance fade dither modes work just fine with no adjustments required.\r\n\r\n**Testing project:** [test_height_compatibility.zip](https:\/\/github.com\/godotengine\/godot\/files\/14619165\/test_height_compatibility.zip)\r\n\r\n## Preview\r\n\r\n### Forward+\r\n\r\n![Screenshot_20240315_185642 webp](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/df7c70ad-9a70-410a-8e5b-ca560a264bb9)\r\n\r\n### Compatibility\r\n\r\n![Screenshot_20240315_185703 webp](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/aacf7f7e-197e-4f50-b94b-4b1e3cbd305f)","comments":[],"labels":["enhancement","topic:rendering","topic:3d"]},{"title":"Unable to Close Debugger Session Tabs","body":"### Tested versions\n\nv4.2.stable.official [46dc27791]\n\n### System information\n\nGodot v4.2.stable - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1080 Ti (NVIDIA; 31.0.15.5176) - AMD Ryzen 5 5600X 6-Core Processor (12 Threads)\n\n### Issue description\n\nWhen running multiple instances of a game through the editor for debugging purposes, the debugger creates multiple tabs labeled \"Session 1\", \"Session 2\", etc.  If you set the number of sessions back to 1, or even just a lower number of sessions, there are still tabs shown for the previous highest session count.\n\n### Steps to reproduce\n\nOpen any project and select \"Debug->Run Multiple Instances->Run # Instances\" with # > 1.  Then set the # instances back to a lower number, and check the debugger tab.  It will still show the tabs for the higher instance count.  It can be quite confusing to have 1 instance of the game running, yet seeing the error count in the debugger showing a total error count that is quite high since it duplicates the warnings as well.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor"]},{"title":"Expose `DEVICE_ID_EMULATION` constant in InputEvent","body":"This also improves the documentation related to emulated InputEvents.\n\n- See https:\/\/github.com\/godotengine\/godot\/issues\/24589.\n","comments":[],"labels":["enhancement","topic:input"]},{"title":"Add `animation_looped` signal to AnimationMixer","body":"The signal has two parameters: the animation name, and a boolean that is `true` if the looping barrier was crossed backwards (which occurs when playing backwards or with ping-pong looping), `false` otherwise.\r\n\r\nThis is available in both AnimationPlayer and AnimationTree. In AnimationTree, this is implemented in AnimationNodeAnimation.\r\n\r\nFor reference, AnimatedSprite2D\/3D have similar signals available, although they don't have an `anim_name` and `backwards` parameters.\r\n\r\n**Testing project:** [test_animation_looped_signal.zip](https:\/\/github.com\/godotengine\/godot\/files\/14618244\/test_animation_looped_signal.zip)\r\n\r\n- This closes https:\/\/github.com\/godotengine\/godot\/issues\/76159. See also https:\/\/github.com\/godotengine\/godot\/pull\/71088.","comments":["I tried building from this PR but whenever I open a blank new project it only opens 50% of the time. The other 50% of the time it will immediately crash to desktop upon opening with the following logged to the console. It does not matter if the project is Forward+ or Compatibility. The project will crash 50% of the time either way.\r\n\r\n```\r\nC:\\Users\\VALK-DESKTOP\\Documents\\Godot Projects\\Godot\\bin>godot.windows.editor.x86_64.mono.console.exe\r\nGodot Engine v4.3.dev.mono.custom_build.3a23f3eda (2024-03-15 16:39:11 UTC) - https:\/\/godotengine.org\r\nOpenGL API 3.3.0 Core Profile Context 24.2.1.240215 - Compatibility - Using Device: ATI Technologies Inc. - AM0\r\n\r\nEditing project: C:\/Users\/VALK-DESKTOP\/Documents\/_Godot Projects\/test2\r\nGodot Engine v4.3.dev.mono.custom_build.3a23f3eda (2024-03-15 16:39:11 UTC) - https:\/\/godotengine.org\r\nOpenGL API 3.3.0 Core Profile Context 24.2.1.240215 - Compatibility - Using Device: ATI Technologies Inc. - AM0\r\n\r\n\r\n================================================================\r\nCrashHandlerException: Program crashed\r\nEngine version: Godot Engine v4.3.dev.mono.custom_build (3a23f3eda4f5e3236ec337d0614849327a5e622a)\r\nDumping the backtrace. Please include this when reporting the bug to the project developer.\r\n[0] <couldn't map PC to fn name>\r\n[1] <couldn't map PC to fn name>\r\n[2] <couldn't map PC to fn name>\r\n[3] <couldn't map PC to fn name>\r\n[4] <couldn't map PC to fn name>\r\n[5] <couldn't map PC to fn name>\r\n[6] <couldn't map PC to fn name>\r\n[7] <couldn't map PC to fn name>\r\n[8] <couldn't map PC to fn name>\r\n[9] <couldn't map PC to fn name>\r\n[10] <couldn't map PC to fn name>\r\n[11] <couldn't map PC to fn name>\r\n[12] <couldn't map PC to fn name>\r\n[13] <couldn't map PC to fn name>\r\n[14] <couldn't map PC to fn name>\r\n[15] <couldn't map PC to fn name>\r\n[16] <couldn't map PC to fn name>\r\n[17] <couldn't map PC to fn name>\r\n[18] <couldn't map PC to fn name>\r\n[19] <couldn't map PC to fn name>\r\n-- END OF BACKTRACE --\r\n================================================================\r\n```\r\n\r\nOn another launch attempt in --verbose I found this warning in the logs. Not sure if this is helpful or not.\r\n```\r\nWARNING: GENERAL - Message Id Number: 0 | Message Id Name: Loader Message\r\n        windows_read_data_files_in_registry: Registry lookup failed to get layer manifest files.\r\n        Objects - 1\r\n                Object[0] - VK_OBJECT_TYPE_INSTANCE, Handle 2396889292336\r\n O r p h aant :S trRienngdNearmineg:C oIntteemxLtiDsrti v(esrtVautlikca:n :1:,_ dteobtuagl_:m e9s)s\r\nenOgreprh_acna lSltbraicnkg N(admrei:v eTresx\\tvuurlek2aDn \\(rsetnadteirci:n g0_,c otnotteaxlt:_ d2r)i\r\nveOrr_pvhualnk aSnt.rcipnpg:N3a0m1e):\r\n PopupMenu (static: 1, total: 15)\r\n```\r\n\r\nOn another launch attempt without --verbose I got this when it crashed\r\n```\r\nFatal error. Internal CLR error. (0x80131506)\r\n```\r\n\r\nIf this is helpful here is my dotnet --info\r\n```\r\n.NET SDK:\r\n Version:   7.0.203\r\n Commit:    5b005c19f5\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.22631\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\7.0.203\\\r\n\r\nHost:\r\n  Version:      7.0.5\r\n  Architecture: x64\r\n  Commit:       8042d61b17\r\n\r\n.NET SDKs installed:\r\n  3.1.426 [C:\\Program Files\\dotnet\\sdk]\r\n  6.0.127 [C:\\Program Files\\dotnet\\sdk]\r\n  6.0.202 [C:\\Program Files\\dotnet\\sdk]\r\n  6.0.400 [C:\\Program Files\\dotnet\\sdk]\r\n  7.0.203 [C:\\Program Files\\dotnet\\sdk]\r\n\r\n.NET runtimes installed:\r\n  Microsoft.AspNetCore.App 3.1.32 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 5.0.17 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 6.0.4 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 6.0.9 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 6.0.16 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 6.0.27 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.AspNetCore.App 7.0.5 [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.NETCore.App 3.1.32 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 5.0.17 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 6.0.4 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 6.0.9 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 6.0.16 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 6.0.27 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 7.0.5 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.WindowsDesktop.App 3.1.32 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 5.0.17 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 6.0.4 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 6.0.9 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 6.0.16 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 6.0.27 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n  Microsoft.WindowsDesktop.App 7.0.5 [C:\\Program Files\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n\r\nOther architectures found:\r\n  x86   [C:\\Program Files (x86)\\dotnet]\r\n    registered at [HKLM\\SOFTWARE\\dotnet\\Setup\\InstalledVersions\\x86\\InstallLocation]\r\n\r\nEnvironment variables:\r\n  Not set\r\n\r\nglobal.json file:\r\n  Not found\r\n```","@valkyrienyanko Given the `--verbose` message, this sounds like https:\/\/github.com\/godotengine\/godot\/issues\/84205 (which would also affect you with an official build). Try compiling with `debug_symbols=yes` so you can see an useful crash backtrace when running Godot.\r\n\r\nThat said, Vulkan isn't being initialized at all when you open the project manager[^1] or when you open a project that uses the Compatibility rendering method. Can you reproduce this with a non-.NET build?\r\n\r\n[^1]: The project manager always uses the Compatibility rendering method, unless forced to use a different rendering method with the `--rendering-method` command line argument."],"labels":["enhancement","topic:animation"]},{"title":"Fix external editor not opened for debug stack frames","body":"Removes part of an if statement that prevents opening external editor for debug stack frame cells unless a shortcut binding is set for item `Debug with External Editor`. There is no UI or documentation for this toggle so the easiest fix would be align this setting with the main code editor setting, hence the removal of the extra condition.\r\n\r\nFixes #19838\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["Your branch is broken, please restore it and avoid using merge commits, see [here](https:\/\/docs.godotengine.org\/en\/latest\/contributing\/workflow\/pr_workflow.html#the-interactive-rebase) \r\n\r\nPlease do:\r\n```\r\ngit reset --hard 0100d05\r\n```\r\n\r\nAnd then rebase ","You didn't resolve it correctly, please follow the instructions above","Hi sorry, first time trying to do this. I will try my best to resolve this asap. Thanks for the help!","I understand :) but if you do as I suggest it will work fine, if you need help I can fix it for you "],"labels":["bug","topic:editor"]},{"title":"Using backspace in script editor unfolds folded region on previous line","body":"### Tested versions\n\nVersion: v4.3.dev4.official [df78c0636]\n\n### System information\n\nWindows 10, Geforce 960, Vulkan\n\n### Issue description\n\nIn the script editor, pressing backspace to remove a character on the line after a block of folded code unfolds the code. This does not occur with other text-deletion methods that I tried, including delete, ctrl+backspace, or using backspace on some highlighted text. \n\n### Steps to reproduce\n\nFirst:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/208573\/ddd1bddf-4464-4b06-960c-bc463997064d)\r\n\r\nThen after hitting backspace:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/208573\/b7be985a-d042-4d1a-9c4f-06ff7ecd4c4c)\r\n\n\n### Minimal reproduction project (MRP)\n\n(hopefully unnecessary)","comments":[],"labels":["bug","topic:editor","usability"]},{"title":"AnimationTree abort transition to stop infinite loop","body":"### Tested versions\r\n\r\nTested in version v4.2.1.stable.mono.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable.mono - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 (NVIDIA; 31.0.15.5123) - AMD Ryzen 7 5700G with Radeon Graphics (16 Threads)\r\n\r\n### Issue description\r\n\r\nWhen setting up a simple AnimationNodeStateMachine, I get an inifite loop warning (check video for more info)\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/46705245\/9ec6fd60-a292-4492-9338-7c1006818f79\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\nPress play in the attack animation in AnimationTree\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[Test.zip](https:\/\/github.com\/godotengine\/godot\/files\/14617444\/Test.zip)\r\n\r\nEdit: Related to #79141 ","comments":[],"labels":["bug","confirmed","topic:animation"]},{"title":"[Editor] Remove redundant code from `EditorSpinSlider`","body":"While working on some other code I ran into some issues with the range when using up\/down with the inspector, the underlying range already does clamping, which is configurable with greater\/less, so all this code does is ignore those flags, otherwise the code is redundant\r\n\r\nThis makes the behavior of the spin up\/down consistent with the key input (which is especially relevant for `float` exports as they don't show the up\/down)\r\n\r\nAlso moved some of the code into the cases where it's used, and cleaned up some minor details\r\n\r\nTested and confirmed the code without clamping works correctly, not reintroducing the issues described in:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/81272\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["> This makes the behavior of the spin up\/down consistent with the key input (which is especially relevant for float exports as they don't show the up\/down)\r\n\r\nDoesn't seem like inspector EditorSpinSliders property handle key input.\r\n\r\nHow this can be tested?","> Doesn't seem like inspector EditorSpinSliders property handle key input.\r\n\r\nHow do you mean? Select the text input and use the up\/down keys","To illustrate how this is extra confusing and nasty:\r\n* Create a script exporting a `float`, just plain export, no range needed (the default configuration is equivalent to `\"-99999,99999,1,or_greater,or_less,hide_slider\"`)\r\n* Enter `200000` into the property\r\n* Select the property and push the arrow up key\r\n\r\nIt will jump back to `99999`, the default upper range value, the fact you can't go from `99999` to `100000` alone is a bit annoying, but that side was what made me really confused when I was working on another PR, and what made me investigate this code"],"labels":["bug","enhancement","topic:editor"]},{"title":"Caching scene groups can take a long time while the editor is unresponsive","body":"### Tested versions\n\n4.3 after #60965\n\n### System information\n\nWindows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 (NVIDIA; 31.0.15.4633) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\nWhen a project doesn't have `scene_groups_cache.cfg`, the editor will crawl every scene and fetch node groups. During this process the editor is unresponsive and it may take a looooong time if the scenes are heavy and there is many of them.\r\n\r\n- [ ] We should add some progress bar for this action, so the user knows that something is happening.\r\n- [ ] It would be nice if fetching groups did not involve fully loading the scene, because if it references some heavy resources, they are being repeatedly loaded and unloaded, which is just wasteful. You don't need to do that to know groups.\n\n### Steps to reproduce\n\n1. Have a big project\r\n2. Don't have ``scene_groups_cache.cfg` in your `.godot` folder\r\n3. Open the project\r\n4. \u23f3\u23f3\u23f3\ud83d\udc80\n\n### Minimal reproduction project (MRP)\n\n[LongGroups.zip](https:\/\/github.com\/godotengine\/godot\/files\/14616584\/LongGroups.zip)\r\nCan be used to test both raised points.","comments":["IMHO should add a `Performance` label too. \r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/pull\/89739 adddresses the first task, the second one needs more change."],"labels":["bug","topic:editor","usability","performance"]},{"title":"Crash when draggin saved animation.tres to AnimationMixer from AnimationPlayer","body":"### Tested versions\r\n\r\nv4.3.dev4.mono.official [df78c0636]\r\n\r\n### System information\r\n\r\nGodot v4.3.dev4.mono - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 Ti (NVIDIA; 31.0.15.3623) - AMD Ryzen 7 3700X 8-Core Processor (16 Threads)\r\n\r\n### Issue description\r\n\r\nWhen trying to drag and drop a .tres in the animation mixer godot crash.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/b89538c8-6114-4606-8455-89d72af8a1e2)\r\n\r\n\r\n### Steps to reproduce\r\n\r\nJust drag and drop the file there, godot will crash. What I was trying to do is saving a TRES using the RMB (Right Mouse Button) on the Animation Mixer Librarie to reuse it later, so I Save As the TRES and after I tried to load it again, and it crashed.\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/303a83fb-2d0c-49aa-a5a4-76c2c26f8e9f)\r\n\r\nTo crash just drag and drop the .TRES there like so:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/b89538c8-6114-4606-8455-89d72af8a1e2)\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[bug_anim.zip](https:\/\/github.com\/godotengine\/godot\/files\/14616291\/bug_anim.zip)\r\n","comments":["Am I doing it right? I can not reproduce this issue, but it feels extremely laggy \u2014\u2014 Godot v4.3.dev (fe01776f0) - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 (NVIDIA; 31.0.15.3619) - 11th Gen Intel(R) Core(TM) i7-11700K @ 3.60GHz (16 Threads)\r\n\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/8315986\/1d4cfc94-c813-4f09-aa23-036efdb912dd\r\n\r\n","@jsjtxietian could you try drag where it says dictionary?","It won't let me drag in\r\n\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/8315986\/71c0e866-8496-4ed8-8d48-f606a7f82b14\r\n\r\n"],"labels":["bug","topic:editor","crash","topic:animation"]},{"title":"`Camera2D` disrupts low processor mode","body":"### Tested versions\r\n\r\nGodot 4.2, 4.3\r\n\r\n### System information\r\n\r\nWindows 10 - AMD Radeon R7 Graphics, OpenGL3 angle and Vulkan\r\n\r\n### Issue description\r\n\r\nThe `Camera2D` disrupts low processor mode in GUI projects like GodSVG or Pixelorama, which use (or used to use) it for dynamic viewports. It causes high GPU usage on idle.\r\n\r\nNote: this was not reproducible by other people on Linux or other hardware for some reason. It could also be that my hardware is so underpowered that it's just more noticeable on it.\r\n\r\n### Steps to reproduce\r\n\r\nAdd a `Camera2D` to a project that uses low processor mode and observe the GPU usage staying high on idle.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n-\r\n\r\n### Temporary solution\r\n\r\nThe `Camera2D` can be replaced with a custom implementation using the `Viewport` `canvas_transform` property.\r\n","comments":["Can you reproduce it in a new project where you simply change that setting and add a camera?\r\n\r\nIt also might be something to do with the specific way our projects do cameras, like with them being a single blue 2D node among countless green ones.","> Can you reproduce it in a new project where you simply change that setting and add a camera?\r\n\r\nYes I can.\r\nIn an empty project the GPU usage stays quite low though, around 10%. That's why I didn't post an MRP.\r\n\r\nI was also able to reproduce in Pixelorama, It would stay at 20% - 40% GPU usage, around the same as in GodSVG.","> Note: this was not reproducible by other people on Linux or other hardware for some reason. It could also be that my hardware is so underpowered that it's just more noticeable on it.\r\n\r\nI was mistaken, I can indeed reproduce the issue on Linux (Godot v4.2.1.stable - openSUSE Tumbleweed 20240314 - X11 - GLES3 (Compatibility) - NVIDIA GeForce GTX 1060 6GB (nvidia) - AMD Ryzen 5 1600 Six-Core Processor (12 Threads))\r\n\r\n\r\nOn a MRP with low processor mode enabled, when a Camera2D is disabled, idle GPU usage stays at 0%, while when it is enabled, it jumps from 3-5% on average. An MRP can be found here: \r\n[Camera2DGPU.zip](https:\/\/github.com\/godotengine\/godot\/files\/14651531\/Camera2DGPU.zip)\r\n\r\nOn Pixelorama, when Camera2Ds are disabled, idle GPU usage is 0%, while with Camera2Ds enabled, it jumps from 5-20%.\r\n\r\nTaking a look at Camera2D's source code, it seems that the `_update_scroll` function which is responsible for updating `Viewport.canvas_transform is being called on [internal process\/physics_process](https:\/\/github.com\/godotengine\/godot\/blob\/master\/scene\/2d\/camera_2d.cpp#L226). This probably explains why there is GPU usage even when the camera's properties do not change.\r\n\r\nWhat's weird is that Godot 3's Camera2D seems to be working the same way (at least according to my limited knowledge of Godot's source code), but GPU usage on idle is 0% on the MRP. It could be that It could be that Godot 4.x's `Viewport.canvas_transform` updating is more taxing on the GPU than Godot 3.x. Or it could be that Godot 3.x properly respects low processor mode.\r\n\r\n\r\n**EDIT**: Taking a better look at Godot 3's Camera2D code, it seems that [process\/physics_process is only enabled when smoothing is enabled](https:\/\/github.com\/godotengine\/godot\/blob\/3.x\/scene\/2d\/camera_2d.cpp#L73), while in Godot 4, [either process or physics process is always set to true](https:\/\/github.com\/godotengine\/godot\/blob\/master\/scene\/2d\/camera_2d.cpp#L70). Indeed, when I test the MRP in Godot 3 with smoothing enabled, GPU usage is at 2%, while when it's disabled it's at 0%. I wonder if Godot 4's Camera2D could be optimized the same way?\r\n\r\n**EDIT 2:** I took a look at Camera2D's history and came across #46717 which implements the optimization I mentioned in my previous paragraph. It was targeted for 3.2 but it seems like it never got implemented in 4.x. I haven't done any testing, but if my hypothesis is correct, merging a PR with similar changes for 4.x could fix this issue, at least when camera smoothing is disabled."],"labels":["needs testing","topic:2d"]},{"title":"Editor: Customized Engine Build Configuration: auto detect usage of OpenXR","body":"If OpenXR isn't enabled int the project settings, the auto detector will disable the OpenXR in profile\r\n\r\n~~**WARNING: Possible regression:** Creates empty:~~\r\n```json\r\n\t\"disabled_build_options\": {\r\n\r\n\t},\r\n```\r\n","comments":["**How to test:**\r\n\r\nEnable\/disable the OpenXr by setting `xr\/openxr\/enabled ` property. Go to the `Project->Customize Engine Build Configuration...` and click `Detect from Project` with disabled and enabled OpenXR","I've just thought it isn't very perfect... There could be added different `xr\/openxr\/enabled.*` with different values... When the build profile creator supports creation of one profile without platform dependency...."],"labels":["enhancement","topic:buildsystem"]},{"title":"Make the \"Clear Output\" shortcut not require panel focus","body":"Removes the shortcut context (if you have to click the output panel first it's faster to click on the button itself) and changes the binding to `Ctrl+Alt+K` to avoid conflict with \"Delete Line\" in the script editor","comments":[],"labels":["enhancement","topic:editor","usability"]},{"title":"TileMap getters for cell `TileData` ignore runtime changes stored in `runtime_tile_data_cache`","body":"### Tested versions\n\n4.2.1.stable\n\n### System information\n\nWindows 10\n\n### Issue description\n\nIf you overwrite a tilemaps's navigation data, for example using the _tile_data_runtime_update() function, you can remove navigation from a tilemap tile. This works fine when using the Tilemap navigation. However, when you attempt to use the NavigationRegion2D (linked to the tilemap) and programmatically bake the navigation polygon using bake_navigation_polygon(), these changes are not accounted for.\n\n### Steps to reproduce\n\n1. Create a simple 2d scene with a TileMap and a NavigationRegion2D set to retrieve navigation information from that TileMap.\r\n2. Attach a script to the TileMap and write the following (as an example):\r\n\r\n```\r\nfunc _use_tile_data_runtime_update(layer, coords):\r\n\tif layer == 0 and coords.x == 1:\r\n\t\treturn true\r\n\treturn false\r\n\r\nfunc _tile_data_runtime_update(layer, coords, tile_data):\r\n\ttile_data.set_navigation_polygon(0, null)\r\n\treturn true\r\n```\r\n\r\n3. Attach a script to your Root node and write the following:\r\n\r\n```\r\nfunc _ready():\r\n\t$TileMap.notify_runtime_tile_data_update(0)\r\n\t$NavigationRegion2D.call_deferred(\"bake_navigation_polygon\")\r\n```\r\n\r\n4. From the Debug Menu, enable \"Visible Navigation\"\r\n5. Run the project. You will see both the tilemap's nav mesh (with column 1 excluded, as expected) and the NavigationRegion2D's nav mesh (without column 1 excluded).\r\n\r\n\r\n\n\n### Minimal reproduction project (MRP)\n\n[Test Navigation.zip](https:\/\/github.com\/godotengine\/godot\/files\/14610520\/Test.Navigation.zip)\r\n","comments":["This also seems to happen if you add collision polygons to a TileMap during runtime.","The baking just reads the TileMap used cells and cell tile data.\r\n\r\nSo this is a matter of the TileMap \/ TileSet not returning the expected.\r\n\r\nEDIT\r\nLooks like this runtime tile data update is added to a special cache only used and forwarded to server updates. \r\n\r\nThe TileMap getters do not consider this runtime cache so they return the original tile state without it.\r\n\r\nThis obviously makes the parsing and navmesh baking unable to account for it when not even the TileMap own getters do it.","Perhaps then the issue should be re-categorized as a TileMap issue.","This is unfortunately not as simple as just returning the runtime_tile_data_cache value if it is available. It seems that this cache is wiped every time _internal_update() is called, and a new copy of tile data is created from the TileSetAtlasSource every time use_tile_data_runtime_update returns true.\r\n\r\nA solution to this would thus involve the following:\r\n1. Update the runtime_tile_data_cache to be a persistent value that stores updated tile data, rather than a transient one that is discarded after its changes are accounted for internally\r\n2. Update get_cell_tile_data() to grab from the runtime_tile_data_cache first, and default to the tileset if no value is present\r\n3. Update other getters as necessary, though my suspicion is this isn't needed. get_cell_alternative_tile(), get_cell_atlas_coords(), and get_cell_source_id() already seem to account for tile_data_runtime_update.\r\n\r\nSome sample code for 2 follows, though I'm not sure how to accommodate for the p_use_proxies parameter, since that seems to be specific to TileSet.\r\n\r\n```\r\nif (E && E->value.runtime_tile_data_cache) {\r\n\treturn E->value.runtime_tile_data_cache;\r\n} else {\r\n\t\/\/ existing code gets put in this else function\r\n}\r\n```"],"labels":["bug","topic:2d"]},{"title":"Throw error when `p_start_time` is negative when starting an audio playback stream","body":"Fixes #89390. \r\n\r\nI'm not sure if this is idiomatic\/desired behavior, feel free to correct me :-)","comments":["All existing streams silently clamp any positions greater than the stream end\/length; however they are not consistent as to how they handle positions less than the stream start (e.g. negative positions):\r\n\r\n| Type | Results |\r\n| :--- | :-------- |\r\n| MP3 | Negative start or seek positions are passed to `AudioStreamPlaybackMP3::seek` which fails to clamp negative values resulting in extremely large positive values being passed to the minimp3 `mp3dec_ex_seek` function. |\r\n| Ogg Vorbis | Negative start or seek positions are passed to `AudioStreamPlaybackOggVorbis::seek` which fails to clamp negative values resulting in large positive frame values. |\r\n| WAV | Negative start or seek positions are passed to `AudioStreamPlaybackWAV::seek` which clamps them to 0. |\r\n\r\nIf clamping occurs at the end, I feel it would be more consistent to apply silent clamping at the start as well. This may be beneficial for code performing relative seeking in a stream."],"labels":["bug","topic:audio","cherrypick:4.2"]},{"title":"StandardMaterial3D Distance Fade: Object Dither mode not working as expected (problem with model origin)","body":"### Tested versions\r\n\r\nv4.2.1.stable.official [b09f793f5]\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 with Max-Q Design (NVIDIA; 31.0.15.5176) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\r\n\r\n### Issue description\r\n\r\nI'm trying to make a third person character controller. I want that if the camera is very close to the character, it will become translucent. But when using `Distance Fade` in StandardMaterial3D, specifically the `ObjectDither` mode, it does not work like other modes (`PixelAlpha`, `PixelDither`).\r\n\r\n**It looks like `ObjectDither` mode uses the origin of the model when calculating the distance to the camera. Which leads to incorrect display if the origin of the model is not in its center.**\r\n\r\nVisual demonstration (all modes with the same settings, Min Distance = 0m, Max Distance = 2m):\r\n\r\n![2024-03-14 213915](https:\/\/github.com\/godotengine\/godot\/assets\/4838367\/92e6a4b5-8909-4a1e-a35f-244731552c2b)\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/4838367\/63b6d1df-517f-4db3-9bbf-3531505a83bb\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/4838367\/a45ef66b-a32b-4c6c-b231-62a42e2b95af\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/4838367\/b4e90d87-1575-446e-9173-49adbe342b5d\r\n\r\nAs you can see, only in `ObjectDither` mode when the camera flies above the player, the dithering effect does not occur because the origin of the model is not in its center, but below.\r\n\r\n![2024-03-14 214355](https:\/\/github.com\/godotengine\/godot\/assets\/4838367\/d00abbd1-60bd-4813-8f5a-9bd996c80d5f)\r\n\r\n### Steps to reproduce\r\n\r\nIn attached example launch the scene, then in `World -> Player -> Visuals -> capsule -> Circle -> Surface Material Override` play with the `Distance Mode`.\r\n\r\n![2024-03-14 215410](https:\/\/github.com\/godotengine\/godot\/assets\/4838367\/d4b7db67-8519-47dc-929c-3e4997a0c30b)\r\n\r\nJust in case, I attached a capsule model made in Blender with the required origin to reproduce the bug. The scene uses its local copy.\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[StandardMaterial3D_ObjectDither.zip](https:\/\/github.com\/godotengine\/godot\/files\/14607339\/StandardMaterial3D_ObjectDither.zip)","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Expose bindings to compute dispatch indirect of rendering device","body":"Title is self explanatory, unsure why this wasn't done at the time it was implemented.\r\n","comments":[],"labels":["enhancement","feature proposal","topic:rendering"]},{"title":"[Rendering] Add hints to some uniform `PropertyInfo`s","body":"* Enforce range on `int\/uint`\r\n* Use flags for `bvec2\/3\/4` arrays\r\n\r\nLeft some `TODO` notes for possible future improvements, unsure what can be one with them but good to add if we end up improving other contexts\r\n\r\nFull change can't be cherry picked as it depends on arrays having hints, but can cherry pick specifically the `int\/uint` case if desired\r\n\r\n---\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89436\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["I'll be experimenting with some improvements to property handling perhaps this weekend, would start with experimenting with remapping unsinged integers to be edited correctly, that should be relatively straight forward to do, adding it as a hint string\r\n\r\nMight also look at adding special constants to the range to help with things, like `(U)INT8\/16\/32\/64_MIN\/MAX` to the range handling\r\n\r\n~Got the former working quite well, will open a PR relatively soon~\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/89529"],"labels":["bug","topic:editor","topic:shaders"]},{"title":"Core: Add `constexpr` to `if (true)` error macros","body":"By converting `if (true)` to `if constexpr (true)` in error macros, the binary size shrinks a fair amount (release template: ~8KiB, dev editor: ~27KiB) & additional compile-time checks are enabled (if extra warnings are enabled) by detecting if a returning macro causes inaccessible code.","comments":["Did some more testing and it *seems* this can be even more optimized. By wrapping **every** error macro (excluding one-liners) with `if constexpr (true)`, it shrunk by another KiB! But, I'll be honest, I'm not *entirely* sure why that worked; and because I'm uncertain, I decided that's outside the PR's original scope. I'll try to look more into it and, if it's consistent, maybe I'll look into it as part of a broader `error_macros.h` refactor\/cleanup.","I'm curious: does this have any effect on release builds?\r\n\r\nMy expectation is that every compiler in existence would have a good enough optimizer to handle an `if (true)` - what optimization can it do with `if constexpr (true)` that is somehow not possible with `if (true)`?\r\n\r\nSorry if this sounds like an obvious question, but I haven't actually been able to find an answer to this question using a search (`\"if constexpr true\"` actually has very few google results) so I figured I'd ask here.\r\n\r\nIs some c++ feature like exception handling preventing the optimization of if true?","Stripped binary sizes for Linux x86_64 `optimize=speed lto=full`:\r\n\r\nEditor:\r\n\r\n```\r\nmaster:  113,745,696 bytes\r\nThis PR: 113,745,696 bytes\r\n```\r\n\r\nRelease export template:\r\n\r\n```\r\nMaster:  64,399,656 bytes\r\nThis PR: 64,395,560 bytes\r\n```\r\n\r\n`master` was https:\/\/github.com\/godotengine\/godot\/commit\/da945ce6266ce27ba63b6b08dc0eb2414594f7cb, and the PR was rebased on top of `master` https:\/\/github.com\/godotengine\/godot\/commit\/da945ce6266ce27ba63b6b08dc0eb2414594f7cb while testing.\r\n\r\nThere's no difference at all in editor binary sizes, and release export templates become 4 KB smaller. I'd say this is worth it at a first glance, but compile times need to be measured with cold cache multiple times to ensure they don't regress when using `if constexpr`.","I'm pretty much stuck with MSVC for builds\/testing, which probably plays a role in me getting more bloat removed\u2026 Somehow. I'd be lying if I said a lot of these compiler shenanigans didn't go over my head.","Why not use something like this?\r\n``` c++\r\n#define ERR_FAIL()                                                                     \\\r\n\t{                                                                        \\\r\n\t\t_err_print_error(FUNCTION_STR, __FILE__, __LINE__, \"Method\/function failed.\"); \\\r\n\t\treturn;                                                                        \\\r\n\t}\r\n```","> Why not use something like this?\r\n> \r\n> ```c++\r\n> #define ERR_FAIL()                                                                     \\\r\n> \t{                                                                        \\\r\n> \t\t_err_print_error(FUNCTION_STR, __FILE__, __LINE__, \"Method\/function failed.\"); \\\r\n> \t\treturn;                                                                        \\\r\n> \t}\r\n> ```\r\n\r\nSee the comment before all these macro definitions:\r\n```\r\n * The `((void)0)` no-op statement is used as a trick to force us to put a semicolon after\r\n * those macros, making them look like proper statements.\r\n * The if wrappers are used to ensure that the macro replacement does not trigger unexpected\r\n * issues when expanded e.g. after an `if (cond) ERR_FAIL();` without braces.\r\n```\r\n\r\nIf more recent C++ has a better trick to achieve that, we can use it of course. But last we checked this kind of `if (cond) else ((void)0)` hack was still needed.","So maybe it's better to use this where there is `if (true)`\r\n```c++\r\n#define ERR_FAIL()                                                                     \\\r\n{                                                                                      \\\r\n\t_err_print_error(FUNCTION_STR, __FILE__, __LINE__, \"Method\/function failed.\"); \\\r\n\treturn;                                                                        \\\r\n}                                                                                      \\\r\n((void)0)\r\n```\r\nIt behaves the same way and we need to use `;`.","True, but see the second part of the comment I quoted. This would allow doing\r\n```\r\nif (cond) ERR_FAIL();\r\n```\r\nOr even\r\n```\r\nvoid SomeClass::some_func() ERR_FAIL();\r\n```\r\nWhich, while unlikely, would be pretty cursed. I don't recall if there were more realistic scenarios when we decided to use this wrapper.\r\n\r\n*Edit:* Well no my example with a function wouldn't work due to the stray `((void)0);` I suppose.","Yep, but without `if` it's also posible to \r\n`if (cond) ERR_FAIL();`\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/116561933\/660911bb-d0ec-4314-8d63-b9f7b2962c20)\r\n\r\n","@Nazarwadim that's not a problem, as `if (condition) action;` is valid C(++) syntax."],"labels":["enhancement","topic:core","performance"]},{"title":"Update CODEOWNERS","body":"* Added shared responsibilities for documentation and tests\r\n* Made buildsystem manage all build scripts (uniquely)\r\n* Cleaned up unused cases\r\n* Added unmanaged cases\r\n\r\nTODO:\r\n* [x] Add shared responsibility for `tests`\r\n* [x] Add some missing module cases (needs confirmation on the allocation)\r\n* [ ] Decide on the way to go with `buildsystem`\r\n\r\nAny feedback would be welcome!\r\n\r\nMy current reasoning is:\r\n* For tests and documentation shared responsibility is important\r\n* For buildsystem that's less relevant, we *could* do it but it'd mean a *lot* of clutter in this file (the documentation part is cluttered as it is, and haven't added tests yet)\r\n\r\nI'm not sure how to verify these changes as they don't show up in the branch (because of organization management etc. they don't turn up on my own branch)\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["I can eventually look at cleaning up some more general cases, like fixing `scene\/2d\/physics` to belong to `2d-nodes` and `physics`, but I think I'll try keep this simple, the modules part is relatively trivial to rework, but a larger cleanup would be great to help with allocation"],"labels":["enhancement","topic:buildsystem"]},{"title":"Core: Add enum class support to index error macros","body":"Currently, enum classes cannot be passed as arguments to any index-based error macro without prior conversion. While this makes complete sense if one of the arguments is a different type, it didn't make sense for two variables of the *same* enum class to fail. This addresses this issue, while retaining their implicit conversion guards, with the following changes:\r\n\r\n- For **signed** index macros: Convert `m_index` to `int64_t` for the `< 0` check.\r\n- For **all** index macros: Convert `m_index` and `m_size` to `int64_t` when passed as argument variables.\r\n\r\nThe reason these changes are safe is because there's still an explicit check between the two variables in the form of `(m_index) >= (m_size)` across all index macros. Meaning, passing an enum class `m_index` and an integer `m_size` will fail as expected, but making *both* arguments the same enum class will pass. The macros are otherwise functionally identical to their live counterparts. All relevant macro arguments were converted to this new format.","comments":["Okay, there's some linux weirdness that's making a type conversion just\u2026 Not happen. It seems to be \"solved\" if setting an explicit type on the enum, which is a good practice but not exactly a pretty solution, so I'll have to keep digging."],"labels":["enhancement","topic:core"]},{"title":"Vertical scrollbar is visible in all popup menus when using a custom display scale","body":"### Tested versions\r\n\r\nv4.3.dev.custom_build [da945ce62]\r\n\r\nWasn't happening in 4.2.1\r\n\r\n### System information\r\n\r\nGodot v4.3.dev (da945ce62) - macOS 14.2.1 - Vulkan (Forward+) - integrated Apple M1 Max - Apple M1 Max (10 Threads)\r\n\r\n### Issue description\r\n\r\nIt's like this in every popup menu:\r\n\r\n<img width=\"683\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/9a38d946-f1b4-4143-85d2-35e1752ab42f\"><br>\r\n\r\n**_EDIT: Correction, this has nothing to do with a theme, this is with no theme:_**\r\n\r\n<img width=\"826\" alt=\"image\" src=\"https:\/\/github.com\/godotengine\/godot\/assets\/60579014\/ad5a4c38-3abd-4781-b1c9-520b6c55eabc\">\r\n\r\n### Steps to reproduce\r\n\r\n~~Use [this theme](https:\/\/github.com\/passivestar\/godot-minimal-theme) with 4.3~~\r\n\r\n~~This might be mac-specific because I asked another person and found out that it's not happening on windows~~\r\n\r\nOpen 4.3 and set custom display scale to 1.6\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\nN\/A","comments":["Sounds related to:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/89122\r\n\r\nCan you test if it's fixed by:\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/89462","> Can you test if it's fixed by:\r\n> https:\/\/github.com\/godotengine\/godot\/pull\/89462\r\n\r\nalas, not fixed by that PR","- maybe related https:\/\/github.com\/godotengine\/godot\/pull\/87462\r\n\r\nIt might be caused by the content margins on the scroll container's theme."],"labels":["bug","topic:editor","regression"]},{"title":"Errors popping when using AnimationTreeEditor ","body":"### Tested versions\n\nv4.3.dev4.mono.official [df78c0636]\n\n### System information\n\nGodot v4.3.dev4.mono - Windows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 Ti (NVIDIA; 31.0.15.3623) - AMD Ryzen 7 3700X 8-Core Processor (16 Threads)\n\n### Issue description\n\nAfter updating to 4.3.dev4 I'm getting this error:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/2137569\/0729a9a9-e66e-4cd5-969c-770a8497fe31)\r\n\n\n### Steps to reproduce\n\nIt happens randomly, it is something with the editor.\n\n### Minimal reproduction project (MRP)\n\nSimple project with AnimationTree and AnimationPlayer","comments":["I got this bug today in my project (using v4.2.1.stable.mono.official [b09f793f5]).\r\n\r\nAfter some testing in my project, it seems that it only occurs when closing the project with the AnimationTree node selected. After that, next time you open the project the error will pop up. The bug doesn't trigger if you close the project with another node selected.\r\n\r\nEdit: Image of the error -> \r\n![imagen](https:\/\/github.com\/godotengine\/godot\/assets\/46705245\/d6dcd4d5-679d-4e7d-8ed9-286630e1c47b)\r\n","I managed to reproduce it:\r\n\r\nI got this bug while selecting the AnimationTree and pressing Play.\r\n\r\nIf the AnimationTree editor is not showing in the editor, than it will not spam this erros.","I also got this error in 4.2.1-stable **with and without mono** but only when I set `The Root` property of the `Animation Tree` to `AnimationNodeAnimation`","The source of this error seems to be from `animation_tree_editor_plugin.cpp`:\r\n```\r\nVector<String> AnimationTreeEditor::get_animation_list() {\r\n\tif (!singleton->tree || !singleton->is_visible()) {\r\n\t\t\/\/ When tree is empty, singleton not in the main thread.\r\n\t\treturn Vector<String>();\r\n\t}\r\n\t\r\n\t\/\/ ...\r\n}\r\n```\r\nIt is possible for this function to be called from a separate thread while the tree is not empty, so `CanvasItem::is_visible` is called, which must be called from the main thread or a thread group.\r\n\r\nSpecifically, the error has something to do with `Object::validate_property`, but I am unsure of the purpose of this validation function."],"labels":["bug","topic:editor","needs testing","topic:animation"]},{"title":"Per-instance uniforms produce an error in the gdshaderinc file editor but works fine","body":"### Tested versions\n\nReproduced with:\r\n- v4.3.dev.custom_build [da945ce]\r\n- v4.2.stable.custom_build [74f69f7ed]\n\n### System information\n\nGodot v4.3.dev (da945ce62) - Ubuntu 22.04.4 LTS 22.04 - X11 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1070 (nvidia; 525.147.05) - Intel(R) Core(TM) i7-7700K CPU @ 4.20GHz (8 Threads)\n\n### Issue description\n\nWhen declaring a per-instance uniform in a **gdshaderinc** file, the shader editor raises an error:\r\n`error(1): Uniform instances are not yet implemented for '' shaders.` \r\n\r\nDespite the error, the per-instance uniform works fine in this setup: it appears in the inspector panel, it can be edited and the shader including the gdshaderinc file works as expected.\r\n\r\nThere are several issues IMO:\r\n - the error message hide other potential errors in the gdshaderinc file which is very annoying. \r\n - the error message itself could be more accurate. It took me some time to find out that the feature was working fine despite the error. I originally thought per-instance uniforms were not supported at all when declared in a gdshaderinc file.\r\n\r\nI am aware that the proper fix would be to fully support per-instance uniform in gdshaderinc files. But in the meantime is it possible to mitigate this? I can make a PR if there is a simple fix to make.\n\n### Steps to reproduce\n\n1. Open the MRP with the editor\r\n2. Open `test_include.gdshaderinc` and notice the error in the shader editor\r\n3. In the 3D viewport notice the green mesh which shows the per-instance uniform works although it's declared in `test_include.gdshaderinc`\n\n### Minimal reproduction project (MRP)\n\n[MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14602303\/MRP.zip)\r\n","comments":["See here, for a gdshaderinc the `shader_type_identifier` is null so the check failed: \r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/fe01776f05b1787b28b4a270d53037a3c25f4ca2\/servers\/rendering\/shader_language.cpp#L8364-L8367\r\n\r\nI guess we can mark this as a good first issue?","Thanks! I would like to make the PR if you don't mind","Would hold off on declaring it a trivial fix, might be more complex to handle it in general, but you're free to open a PR for it but it might be more complex than it looks at first glance, just a heads up :)","> if you don't mind\r\n\r\nGo for it and remember to give it enough test : ) "],"labels":["bug","topic:shaders"]},{"title":"Automatic build profile generation disables `InputMap` class","body":"### Tested versions\n\nReproducible in: [4.3-dev-4](https:\/\/github.com\/godotengine\/godot\/commit\/df78c0636d79c9545a283e0e2a926d623998cc27), [4.2 branch](https:\/\/github.com\/godotengine\/godot\/issues\/2a8c429fcc19b042aaf43a51060c571d42ca2e39), [4.2.1-sable](https:\/\/github.com\/godotengine\/godot\/tree\/4.2.1-stable)\n\n### System information\n\nGodot v4.2.1.stable - Debian GNU\/Linux testing (gcc12) - Wayland - GLES3 (Compatibility)\n\n### Issue description\n\nAutomatic build profile generation disables `InputMap` class. Which should persist almost always especially when user definded custom actions. It can be difficult to determine if user use the action because it can require script parsing (which is also isn't possible for native extensions...) but if user defined custom action it should be easy to detect it\r\n\r\nBecause of #89477 it looks like is a very systematic problem. I guess it only makes shallow check of used nodes by just traversing all the scenes graphs and doesn't look anywhere else.... `\u00af\\_(\u30c4)_\/\u00af`\n\n### Steps to reproduce\n\n1. Create a new project\r\n2. Crete one scene (maybe not necessary)\r\n3. `Project->Customize Engine Build Configuration...->Detect from Project`\r\n4. `Save As`\r\n5. Open the saved profile with editor and search for `InputMap` inside disabled_classes\r\n\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":[],"labels":["bug","topic:editor","needs testing"]},{"title":"Automatic build profile generation disables `MainLoop` class","body":"### Tested versions\n\nReproducible in: [4.3-dev-4](https:\/\/github.com\/godotengine\/godot\/commit\/df78c0636d79c9545a283e0e2a926d623998cc27), [4.2 branch](https:\/\/github.com\/godotengine\/godot\/issues\/2a8c429fcc19b042aaf43a51060c571d42ca2e39), [4.2.1-sable](https:\/\/github.com\/godotengine\/godot\/tree\/4.2.1-stable)\n\n### System information\n\nGodot v4.2.1.stable - Debian GNU\/Linux testing (gcc12) - Wayland - GLES3 (Compatibility)\n\n### Issue description\n\nAutomatic build profile generation disables `MainLoop` class without which I get an error which isn't printed into the terminal but is showed in new floating window:\r\n\r\n![screen-1710413598](https:\/\/github.com\/godotengine\/godot\/assets\/97330399\/a6b4ff15-4b0b-4e2e-8518-1ae2d4b3430e)\r\n\r\nIt looks like `MainLoop` is one of the essential classes and engine can't work without it\n\n### Steps to reproduce\n\n1. Create a new project\r\n2. Crete one scene (maybe not necessary)\r\n3. `Project->Customize Engine Build Configuration...->Detect from Project`\r\n4. `Save As`\r\n5. Open the saved profile with editor and search for `MainLoop` inside `disabled_classes`\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["Possible workaround solution is to set `Forced Classes On Detect` in the bottom of the window\r\n![screen-1710527047](https:\/\/github.com\/godotengine\/godot\/assets\/97330399\/b03d9ad6-92d8-4b1d-bb5f-5884da2b2109)\r\n\r\nCurrently the UI allows manual disabling\/enabling **Nodes and Resources only!** \r\n![screen-1710527243](https:\/\/github.com\/godotengine\/godot\/assets\/97330399\/9ba4c585-089f-4775-ac07-cca7fcc8042d)\r\n\r\nBut the auto-detect feature disables all the classes not only Nodes and Resources...`MainLoop` class inherits just an `Object` that means that for user the only way to say that `MainLoop` (or any other class which isn't directly used by project scenes) should be preserved is `Forced Classes On Detect` field :\/"],"labels":["bug","topic:editor","needs testing"]},{"title":"WARNING: Failed to CreateInstance in ICD 1","body":"### Tested versions\n\nReproduced with:\r\n- v4.3.dev.custom_build [da945ce62]\r\n- v4.2.stable.custom_build [74f69f7ed]\n\n### System information\n\nGodot v4.2.stable (74f69f7ed) - Ubuntu 22.04.4 LTS 22.04 - X11 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1070 (nvidia; 525.147.05) - Intel(R) Core(TM) i7-7700K CPU @ 4.20GHz (8 Threads)\n\n### Issue description\n\nI always get this warning at editor startup when a project is loaded. It appeared some weeks ago although I didn't update Godot 4.2 until today to test 4.3. I do regularly system updates when they are available. The warning is:\r\n\r\n`WARNING: GENERAL - Message Id Number: 0 | Message Id Name: Loader Message\r\n\tterminator_CreateInstance: Failed to CreateInstance in ICD 1.  Skipping ICD.\r\n\tObjects - 1\r\n\t\tObject[0] - VK_OBJECT_TYPE_INSTANCE, Handle 94478350734896\r\n     at: _debug_messenger_callback (drivers\/vulkan\/vulkan_context.cpp:264)`\r\n\r\nDespite the presence of this warning the editor and my 3D project using forward+ works fine.\n\n### Steps to reproduce\n\nLoad any project with forward+ and watch the logs\n\n### Minimal reproduction project (MRP)\n\nNA I guess","comments":[],"labels":["bug","topic:rendering","needs testing"]},{"title":"Couldn't form plane from brush A face, (I believe there's a error that say's B instead at times.)","body":"### Tested versions\r\n\r\n4.2.Stable\r\n4.3-Dev4\r\n\r\n### System information\r\n\r\nWindows 11 - 4.2 Stable - Vulkan (Forward+)\r\n\r\n### Issue description\r\n\r\nCan anyone help me debug why godot gives me these errors when i add a csgnode to a pre existing hierarchy?\r\n\r\n![image-41](https:\/\/github.com\/godotengine\/godot\/assets\/29516927\/a5b603bb-5b91-434f-adf6-9090099b6055)\r\n![SPOILER_image-1](https:\/\/github.com\/godotengine\/godot\/assets\/29516927\/219daec1-fb86-43c5-9673-455a71a7e8bc)\r\n![SPOILER_image](https:\/\/github.com\/godotengine\/godot\/assets\/29516927\/c3b11577-9fb4-4814-9463-5a5b4add5836)\r\n![image-32](https:\/\/github.com\/godotengine\/godot\/assets\/29516927\/2de5f4f3-067a-41e8-b278-b7d9e95beaa2)\r\n\r\n### Steps to reproduce\r\n\r\n1. Drop a csg combiner node on the node3d of your scene.\r\n2. Drop a csgmesh using union and scale it up.\r\n3. Drop another mesh using the subtraction setting, And push them into each other while making a house like this.\r\n4. (Something I did that wasn't included) I used a triangle mesh.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[MininmalReproductionHouse.zip](https:\/\/github.com\/godotengine\/godot\/files\/14608139\/MininmalReproductionHouse.zip)","comments":["Please upload an MRP to make it easier to reproduce this issue, just trying to replicate it from these instructions could be difficult, and it'd be much easier if you uploaded something you know causes this","> Please upload an MRP to make it easier to reproduce this issue, just trying to replicate it from these instructions could be difficult, and it'd be much easier if you uploaded something you know causes this\n\nSince 4.2.1 isn't on android~ I'll have to get that project up when I'm back on desktop, So please bear with me \ud83d\ude05","New information. This seems to be when there are many csg node's instead of what i was thinking \ud83d\ude05\r\nLet me do more testing as i make thie reproduction project","> Please upload an MRP to make it easier to reproduce this issue, just trying to replicate it from these instructions could be difficult, and it'd be much easier if you uploaded something you know causes this\r\n\r\nI updated the issue with the reproduction project! I will be trying these same project on new builds now, Starting from 4.3, If it still happens i will make it known by saying 4.2.1 - 4.3 \r\n\r\n(In case you missed it) [MininmalReproductionHouse.zip](https:\/\/github.com\/godotengine\/godot\/files\/14608139\/MininmalReproductionHouse.zip)"],"labels":["bug","needs testing","topic:3d"]},{"title":"Godot 4.2(Sharp) , Custom MainLoop,Flickering occurs after startup","body":"### Tested versions\n\nv4.2.1.stable.mono.official [b09f793f5]\n\n### System information\n\nVulkan API 1.3.242 - Forward+ - Using Vulkan Device #0: NVIDIA - NVIDIA GeForce RTX 2060\n\n### Issue description\n\nWhen I define my own MainLoop type.\r\nThe window screen flickers between the black background and the Godot startup screen.\r\nI don't know if this is a bug or if it is \"reasonable\". Because of this phenomenon, I suspect that my MainLoop is missing some necessary code?\r\n![bug_0](https:\/\/github.com\/godotengine\/godot\/assets\/29698949\/76897c94-4c00-4129-8143-84d1044fa166)\r\n![bug_1](https:\/\/github.com\/godotengine\/godot\/assets\/29698949\/e4cac5cc-b1c9-4e1b-b22c-2b27bc63a00b)\r\n\n\n### Steps to reproduce\n\n1. Create a forward+ or Mobile project\r\n2. Create a custom MainLoop derived class\r\n3. Modify the \"MainLoop type\" project settings\r\n4. Create a main scene (the root node is Node)\r\n5. Start the program\r\n6. The window screen flickers between the black background and the Godot startup screen.\r\n7. When rewriting _Initialize in CustomMainLoop, write the following code:\r\n     DisplayServer.WindowSetSize( DisplayServer.WindowGetSize());\r\n     (I can't find a way to get a reference to the MainWindow object)\r\n8. Start the program again, and the flickering will disappear and turn into a stable black background.\r\n9.I tried other codes:\r\n     DisplayServer.WindowSetPosition( DisplayServer.WindowGetPOsition());\r\n     This code will not cause the flicker to disappear.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["Please upload an MRP, this is not enough detail to know what you are doing ","> Please upload an MRP, this is not enough detail to know what you are doing\r\n\r\nI have tested it by creating a new project. Apart from the above steps, I have not done any operations on the new project.\r\n[bugtest.zip](https:\/\/github.com\/godotengine\/godot\/files\/14601456\/bugtest.zip)\r\n"],"labels":["bug","topic:rendering","needs testing"]},{"title":"GDScript: Fix continuation lines in `GDScriptTokenizerBuffer`","body":"* Fixes #89403.","comments":[],"labels":["bug","topic:gdscript","regression","topic:export"]},{"title":"Fix shader compilation error when enabling texture MSDF and UV1 Triplanar at the same time","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89463 as  @Calinou suggested.\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Missing texture on decal causes other decals to flicker","body":"### Tested versions\n\n4.3dev4\n\n### System information\n\nGodot v4.3.dev4 - Debian GNU\/Linux trixie\/sid trixie - Wayland - Vulkan (Forward+) - dedicated AMD Radeon RX 5600 XT (RADV NAVI10) () - AMD Ryzen 5 2600X Six-Core Processor (12 Threads)\n\n### Issue description\n\nWhen a decal has a missing texture, other decals affecting the same mesh (or maybe all other decals? -- I only have one mesh so I haven't tested thoroughly) flicker.  Sometimes they are rendered correctly.  Other times, they are only partly rendered.\r\n\r\nI'm using the forward_plus rendered -- this does not seem to be a result of the 7-decal limit for the mobile renderer, and it works fine when I replace the missing texture.\n\n### Steps to reproduce\n\nI noticed this when I forgot to create one of my decal textures, and suddenly the rendering was wrong.\r\n![Screenshot from 2024-03-13 23-15-38](https:\/\/github.com\/godotengine\/godot\/assets\/77003\/c4512ca8-0128-4479-b444-c072befee786)\r\n\r\nIn the MRP, you can use the mouse to spin the shape.  When you do, you'll notice that the decals flicker.\r\n\r\nIf you replace temp-26.png (just copy any of the other ones), the flicker goes away entirely.\n\n### Minimal reproduction project (MRP)\n\n[flicker.zip](https:\/\/github.com\/godotengine\/godot\/files\/14596218\/flicker.zip)\r\n","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Flush message queue by double-buffer flipping","body":"Uses a double buffer for message queues, so using `call_deferred` during a message queue flush adds to a second buffer. After the current buffer finishes processing, it flips the buffers, deallocating the processed buffer, and continues to flush the second buffer. This repeats until both buffers are empty.\r\n\r\nThis reduces lock contention during message queue flush, and ensures queue memory usage does not grow unbounded if deferred calls add to the queue. It does not, however, allow rendering a frame or handling events between processing of each of the buffers, only when both buffers are clear.","comments":["The issue is this:\r\n* This will mask invalid behaviour and fail silently, i.e. lock up, instead of IMO correctly erroring\r\n* The worst part to me though is that people in general assume this to fire in the *next* frame, this change will make that behaviour continue to be bad, and cause confusion and frustration just like the original, crash, did, but now it'll be unclear, with no error telling them *something* is wrong, just a game that freezes forever\r\n* This is in my opinion unlikely to cause any memory savings, and will just add memory usage, the vast majority of deferred calls won't call other methods deferred, so that won't matter\r\n\r\nSo I'd say this just adds complexity and memory use for a feature that's not needed, and that makes the code less safe, but those are just my two cents\r\n\r\nHave you hit a situation where the message queue runs out of memory in normal, non destructive use? It takes quite a while as I recall from testing my own attempts to fix this, with infinite self calls, several seconds of freezing before the out of memory message fired, so I don't see any normal use of the engine ever exhausting the queue space, have you had cases where this actually was a limitation to your usage?\r\n\r\nEdit: Removed the reference to the bug report as this does not fix it, that bug was due to a misunderstanding of how the deferred mechanism works, the OP thought (as many do, including me originally) that the call puts it in the *next* frame, that was fixed by clarifying the documentation to clarify that an unconditional deferred call will infinitely loop, this doesn't make the use case of the OP work, it just changes it from a crash to a freeze\r\n\r\nEdit 2: and I'm sorry if I'm coming across, or being, too contratian here, but this is a very *very* sensitive and critical part of the engine used in every part of the engine and which is critical to functioning and performance, so it needs to be lean and robust, if there's a legitimate pain point which this solves I'm all in favour, but I'm unconvinced this is something creating a limitation for users, I don't see exhausting the message queue happening without stuttering that's outside of the reasonable, or that real world reasonable use would be benefited by this","Out of memory crashes do not produce an error. They just make the editor\/game mysteriously \"go away\", which should never happen. Message queues are generally expected to act as a trampoline, specifically for working around the limitations of regular recursion (stack overflow). Having bounded memory usage is imperative.\r\n\r\nEven if the target machine has plenty of memory, since each page is 4k bytes, allocating the 8k for 2 pages is still better than the megabyte that a few hundred cycles with a few parameters (stored internally as `Variant`s) could add up to.\r\n\r\nP.S. I want to put on the record something I mentioned in chat. A bigger issue with the message queue currently is that it uses `LocalVector` to store an array of pointers to pages. The pages can be allocated by a custom allocator, but the `LocalVector`, naturally, cannot, and uses its own allocation. In fact, it completely defeats the purpose of having paged allocation, since it needs to reallocate as it grows, and can easily cause memory fragmentation. If the purpose is to be lean and robust, this is definitely going in the opposite direction.\r\n\r\nThe proper way it _should_ be handled is by having each page start with a pointer to the next page, and only hold the first and last page pointers in the `CallQueue` class. The queue has no need for random access, so this structure makes more sense. However, I felt that a change like that would be out of scope for this specific PR.","> Out of memory crashes do not produce an error. \r\n\r\nThey do, right here:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/da945ce6266ce27ba63b6b08dc0eb2414594f7cb\/core\/object\/message_queue.cpp#L98"],"labels":["enhancement","discussion","topic:core","needs testing"]},{"title":"Enabling Albedo Texture MSDF and UV1 Triplanar at the same time results in a shader compilation error","body":"### Tested versions\r\n\r\n- Reproducible in: 4.0.3.stable, 4.1.3.stable, 4.2.1.stable, 4.3.dev da945ce62\r\n\r\n### System information\r\n\r\nGodot v4.3.dev (da945ce62) - Fedora Linux 39 (KDE Plasma) - Wayland - GLES3 (Compatibility) - NVIDIA GeForce RTX 4090 (nvidia; 545.29.06) - 13th Gen Intel(R) Core(TM) i9-13900K (32 Threads)\r\n\r\n### Issue description\r\n\r\nEnabling **Albedo Texture MSDF** and **UV1 Triplanar** at the same time results in a shader compilation error:\r\n\r\n```\r\n--Main Shader--\r\n    1 | \/\/ NOTE: Shader automatically converted from Godot Engine 4.3.dev's StandardMaterial3D.\r\n    2 | \r\n    3 | shader_type spatial;\r\n    4 | render_mode blend_mix,depth_draw_opaque,cull_back,diffuse_burley,specular_schlick_ggx;\r\n    5 | uniform vec4 albedo : source_color;\r\n    6 | uniform sampler2D texture_albedo : source_color,filter_linear_mipmap,repeat_enable;\r\n    7 | uniform float msdf_pixel_range;\r\n    8 | uniform float msdf_outline_size;\r\n    9 | uniform float point_size : hint_range(0,128);\r\n   10 | uniform float roughness : hint_range(0,1);\r\n   11 | uniform sampler2D texture_metallic : hint_default_white,filter_linear_mipmap,repeat_enable;\r\n   12 | uniform vec4 metallic_texture_channel;\r\n   13 | uniform sampler2D texture_roughness : hint_roughness_r,filter_linear_mipmap,repeat_enable;\r\n   14 | uniform float specular;\r\n   15 | uniform float metallic;\r\n   16 | varying vec3 uv1_triplanar_pos;\r\n   17 | uniform float uv1_blend_sharpness;\r\n   18 | varying vec3 uv1_power_normal;\r\n   19 | uniform vec3 uv1_scale;\r\n   20 | uniform vec3 uv1_offset;\r\n   21 | uniform vec3 uv2_scale;\r\n   22 | uniform vec3 uv2_offset;\r\n   23 | \r\n   24 | \r\n   25 | void vertex() {\r\n   26 |         vec3 normal = NORMAL;\r\n   27 |         TANGENT = vec3(0.0,0.0,-1.0) * abs(normal.x);\r\n   28 |         TANGENT+= vec3(1.0,0.0,0.0) * abs(normal.y);\r\n   29 |         TANGENT+= vec3(1.0,0.0,0.0) * abs(normal.z);\r\n   30 |         TANGENT = normalize(TANGENT);\r\n   31 |         BINORMAL = vec3(0.0,1.0,0.0) * abs(normal.x);\r\n   32 |         BINORMAL+= vec3(0.0,0.0,-1.0) * abs(normal.y);\r\n   33 |         BINORMAL+= vec3(0.0,1.0,0.0) * abs(normal.z);\r\n   34 |         BINORMAL = normalize(BINORMAL);\r\n   35 |         uv1_power_normal=pow(abs(NORMAL),vec3(uv1_blend_sharpness));\r\n   36 |         uv1_triplanar_pos = VERTEX * uv1_scale + uv1_offset;\r\n   37 |         uv1_power_normal\/=dot(uv1_power_normal,vec3(1.0));\r\n   38 |         uv1_triplanar_pos *= vec3(1.0,-1.0, 1.0);\r\n   39 | }\r\n   40 | \r\n   41 | \r\n   42 | float msdf_median(float r, float g, float b, float a) {\r\n   43 |         return min(max(min(r, g), min(max(r, g), b)), a);\r\n   44 | }\r\n   45 | \r\n   46 | \r\n   47 | vec4 triplanar_texture(sampler2D p_sampler,vec3 p_weights,vec3 p_triplanar_pos) {\r\n   48 |         vec4 samp=vec4(0.0);\r\n   49 |         samp+= texture(p_sampler,p_triplanar_pos.xy) * p_weights.z;\r\n   50 |         samp+= texture(p_sampler,p_triplanar_pos.xz) * p_weights.y;\r\n   51 |         samp+= texture(p_sampler,p_triplanar_pos.zy * vec2(-1.0,1.0)) * p_weights.x;\r\n   52 |         return samp;\r\n   53 | }\r\n   54 | \r\n   55 | \r\n   56 | void fragment() {\r\n   57 |         vec4 albedo_tex = triplanar_texture(texture_albedo,uv1_power_normal,uv1_triplanar_pos);\r\n   58 |         {\r\n   59 |                 albedo_tex.rgb = mix(vec3(1.0 + 0.055) * pow(albedo_tex.rgb, vec3(1.0 \/ 2.4)) - vec3(0.055), vec3(12.92) * albedo_tex.rgb.rgb, lessThan(albedo_tex.rgb, vec3(0.0031308)));\r\n   60 |                 vec2 msdf_size = vec2(msdf_pixel_range) \/ vec2(textureSize(texture_albedo, 0));\r\nE  61->                 vec2 dest_size = vec2(1.0) \/ fwidth(uv1_triplanar_pos);\r\n   62 |                 float px_size = max(0.5 * dot(msdf_size, dest_size), 1.0);\r\n   63 |                 float d = msdf_median(albedo_tex.r, albedo_tex.g, albedo_tex.b, albedo_tex.a) - 0.5;\r\n   64 |                 if (msdf_outline_size > 0.0) {\r\n   65 |                         float cr = clamp(msdf_outline_size, 0.0, msdf_pixel_range \/ 2.0) \/ msdf_pixel_range;\r\n   66 |                         albedo_tex.a = clamp((d + cr) * px_size, 0.0, 1.0);\r\n   67 |                 } else {\r\n   68 |                         albedo_tex.a = clamp(d * px_size + 0.5, 0.0, 1.0);\r\n   69 |                 }\r\n   70 |                 albedo_tex.rgb = vec3(1.0);\r\n   71 |         }\r\n   72 |         ALBEDO = albedo.rgb * albedo_tex.rgb;\r\n   73 |         float metallic_tex = dot(triplanar_texture(texture_metallic,uv1_power_normal,uv1_triplanar_pos),metallic_texture_channel);\r\n   74 |         METALLIC = metallic_tex * metallic;\r\n   75 |         vec4 roughness_texture_channel = vec4(1.0,0.0,0.0,0.0);\r\n   76 |         float roughness_tex = dot(triplanar_texture(texture_roughness,uv1_power_normal,uv1_triplanar_pos),roughness_texture_channel);\r\n   77 |         ROUGHNESS = roughness_tex * roughness;\r\n   78 |         SPECULAR = specular;\r\n   79 | }\r\n   80 | \r\nSHADER ERROR: Invalid arguments to operator '\/': 'vec2, vec3'.\r\n          at: (null) (:61)\r\nERROR: Shader compilation failed.\r\n   at: set_code (servers\/rendering\/renderer_rd\/forward_clustered\/scene_shader_forward_clustered.cpp:145)\r\nERROR: Parameter \"version\" is null.\r\n   at: version_get_shader (.\/servers\/rendering\/renderer_rd\/shader_rd.h:166)\r\n```\r\n\r\nEnabling **UV2 Triplanar** doesn't have this issue. I found this out while working on https:\/\/github.com\/godotengine\/godot\/pull\/89267 :slightly_smiling_face: \r\n\r\nIt probably doesn't make sense to have both triplanar and MSDF enabled at the same time, so triplanar should probably \"win\" here like we do for height mapping (where height mapping is ignored when triplanar is enabled):\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/da945ce6266ce27ba63b6b08dc0eb2414594f7cb\/scene\/resources\/material.cpp#L1146-L1158\r\n\r\n### Steps to reproduce\r\n\r\n- Create a StandardMaterial3D and assign it to a MeshInstance.\r\n- Enable **Albedo > Texture MSDF** and **UV1 > Triplanar**.\r\n- Notice the material turning gray and look at the Output panel.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[test_triplanar_msdf.zip](https:\/\/github.com\/godotengine\/godot\/files\/14594710\/test_triplanar_msdf.zip)\r\n","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Default to trimesh for generated collision shapes in Advanced Import Settings","body":"This avoids using convex decomposition every time collision is enabled on a mesh, which can be extremely slow on complex meshes (such as entire levels).\r\n\r\nThis doesn't break compatibility since [default values *are* saved to `.import` files](https:\/\/github.com\/godotengine\/godot-proposals\/issues\/8059#issuecomment-1867029299), unlike `.tscn`\/`.tres` and `project.godot`.\r\n\r\nWe may want to consider though that only StaticBody can use trimesh collision shapes. Other PhysicsBody types can only use convex shapes or primitive shapes, so perhaps we should automatically change the default according to the selected PhysicsBody type. (In this case, simple convex decomposition should be preferred for dynamic objects as it's faster).\r\n\r\n- This closes https:\/\/github.com\/godotengine\/godot-proposals\/issues\/8059.","comments":["Imo what should change is that you can turn on the \"generate physics\" property without it triggering the calculation. Instead, default it to NONE and let user select what shape they want generated before doing it. Trimesh collision is low quality and low performance so not exactly something that fits a good default.\r\n\r\nJust changing the default shape is just adding lipstick on a pig because the real issue is that such a problematic mesh shouldnt be used for collision generation in the first place. If the source mesh is so bad that the convex decomposition takes so long the trimesh will be faster but it will be horrendously low quality and performance broken at runtime, just not in the editor. That is not really doing anyone a favor, it just hides the real issue for some time."],"labels":["enhancement","topic:import","topic:3d"]},{"title":"Physics bodies can collide with tile seams","body":"### Tested versions\n\n4.3 dev4 and earlier\n\n### System information\n\nWindows 10.0.19045 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1060 (NVIDIA; 31.0.15.4633) - Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 Threads)\n\n### Issue description\n\nThere is an issue with TileMap where a body can sometimes detect a wall collision on a completely flat surface. This causes bugs like projectile bouncing backwards instead of being reflected or characters turning at random point as if they hit something. Unfortunately the bug is very random - it depends on body shape, position and movement velocity. Sometimes I can reproduce it reliably in one very specific spot, but some time later it can fix itself and happen elsewhere.\r\n\r\nSince it's so random, I didn't report it until now, because I though the issue is fixed multiple times. Apparently it's not and I just have another of these \"reliable\" cases.\r\n\r\nBug in action. Notice how the orange enemy turns for no reason, while the other enemy (which has a different shape) walks normally:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/edea97f4-b459-41f1-a118-baf0804ce943\r\n\r\nHere I replaced the TileMap with a flat StaticBody2D and moved the TileMap below:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/a82c8e8a-7149-416a-a76b-d264132fe569\r\n\r\nI suspect that it's caused by the fact that the TileMap is composed of multiple collision shapes and due to some physics glitches it's possible to hit corner of a tile. Related to #84163 and I assume solution would be merging the tiles into polygons (AFAIK navigation already does that).\n\n### Steps to reproduce\n\n1. Use TileMap\r\n2. It might happen\n\n### Minimal reproduction project (MRP)\n\nThe bug is too random to create a reliable MRP.","comments":["Ghost collision is a thing in all physics engines and always caused by using bad shape layouts.\r\n\r\nOther physics engines already lost their teeth on this topic and ended up doing sub-optimal workarounds or not bothering at all.\r\n\r\nBox2D and its extra \"ghost vertices\" definition \"fix\" that only works with one-sided surfaces.\r\nhttps:\/\/box2d.org\/posts\/2020\/06\/ghost-collisions\/.\r\nJolt physics giving you a friendly \"good luck my naive friend\".\r\nhttps:\/\/jrouwe.github.io\/JoltPhysics\/  (search for \"Ghost Collisions\" header line)\r\nHavok Physics giving you a \"welding\" option, which means \"bye, bye performance\" option.\r\nhttps:\/\/docs.unity3d.com\/Packages\/com.havok.physics@1.0\/manual\/collision-detection.html\r\n\r\nThere is a practical reason why all those legacy pixel games did not use physics polygons per cell like the TileMap does and instead  used a simplified collision bit mask per grid cell.","> Ghost collision is a thing in all physics engines and always caused by using bad shape layouts.\r\n> \r\n> Other physics engines already lost their teeth on this topic and ended up doing sub-optimal workarounds or not bothering at all.\r\n> \r\n> Box2D and its extra \"ghost vertices\" definition \"fix\" that only works with one-sided surfaces. https:\/\/box2d.org\/posts\/2020\/06\/ghost-collisions\/. Jolt physics giving you a friendly \"good luck my naive friend\". https:\/\/jrouwe.github.io\/JoltPhysics\/ (search for \"Ghost Collisions\" header line) Havok Physics giving you a \"welding\" option, which means \"bye, bye performance\" option. https:\/\/docs.unity3d.com\/Packages\/com.havok.physics@1.0\/manual\/collision-detection.html\r\n> \r\n> There is a practical reason why all those legacy pixel games did not use physics polygons per cell like the TileMap does and instead used a simplified collision bit mask per grid cell.\r\n\r\nThis also is and has been problematic for Gridmap in G4 3D, but wasn't present in G3. My shapes and setups between my two projects are identical, but G4 struggles with very very basic collision tasks (sliding along a wall cuts your movement speed; approaching a corner shoots you into the stratosphere)."],"labels":["bug","topic:physics","topic:2d"]},{"title":"Core: Improve enum class & `BitField` functionality across repo","body":"This PR lays the groundwork for transitioning entirely from legacy enums to enum classes, if so desired. A lot of quirks that were specific to enum classes are now smoothed out, without compromising qualified name & explicit conversion benefits. This is *especially* applicable to `BitField`, which now handles itself differently depending on if it contains a legacy enum or enum class. Part of this process was detaching it from `type_info.h` entirely, now existing as a template header without any dependency on `Variant`.\r\n\r\nThere's now specialized defines for binding enum classes, which adds bitwise operators. These operators are *strictly* against the enum class itself, so there's still no implicit conversions at play. Instead, this streamlines certain comparisons\/assignments in argument parameters, most obviously with the `|` operator not requiring any `(int)` wrappers. Similarly, enum classes no longer require jumping through hoops with `Variant`, instead being handled via a template conditional constructor that will **only** accept enum classes.\r\n\r\nBeyond that, two other minor adjustments were made in `BitField` specifically. One is the removal of `set_flag` returning a reference to itself, which wasn't used anywhere in the repo and has been a design pattern the repo generally avoids. The second is making the internal `value` of the bitfield be based on the enum's underlying type instead of `int64_t`, as there's otherwise going to be discrepancies between that value & what enum it's actually representing. I'm entirely fine reverting either or both if it's deemed necessary, but the latter point especially should probably have some alternative enforcement otherwise (require `int64_t`\/`uint64_t` builtin type for `BitField` enums?).","comments":[],"labels":["enhancement","topic:core","topic:codestyle"]},{"title":"Control Node jumps to right by screen width when building the game","body":"### Tested versions\r\n\r\nProduced in both 4.2.1 and 4.3d4 Mono versions\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable.mono - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 2060 (NVIDIA; 31.0.15.5152) - AMD Ryzen 5 3500X 6-Core Processor (6 Threads)\r\n\r\n### Issue description\r\n\r\nI have structure like this.\r\n\r\nMainScene (2D Node) -> Canvas Layer -> [ Control -> Panel ]\r\nBrackets part above is a scene of its own, and has other unrelated nodes both under the Control and Panel nodes.\r\n\r\nWhen I'm in the control scene and change Panel position and anchor it to top right and start the game, no problems occur. When I change the scene to the main one and then I start the game, position for the panel changes. (position in the control .tscn file changes as soon as I hit F5)\r\n\r\nThis change is always in the X axis, and is the width of the default viewport width I set in the project settings, in my case 628px.\r\n\r\nI have my AnimationTree that controls only the size of the panel, but I disabled it just in case. Still the same.\r\n\r\n[Here is a video of the problem](https:\/\/youtu.be\/KmJ1t5wInMs)\r\n\r\n**Update:** I found out that the problem was actually caused by the animations, even if my AnimationTree is disabled. Problem still persists of course, for some reason. I just tried recreating the same panel from beginning, everything was working until I made the collapse animation, which only changes the size property of the panel. When I created this animation, panel started jumping again.\r\n\r\nI added position, anchor and other properties I tought my be the problem to the RESET track, nothing changed. Still the same problem.\r\n\r\n### Steps to reproduce\r\n\r\nI could not produced the problem when I created a new project with the same version. So I'll just leave the repository for the project, which is really small as I just began. Just clone the repo, go to prefabs\/WorldGenUI.tscn, move the \"PlayerInfoBox\" to top right if jumped again, then go to scenes\/MainScene.tscn, hit F5 and you'll see.\r\n\r\n\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[Direct link to the project files](https:\/\/github.com\/godotengine\/godot\/files\/14593295\/Godot.UI.bug.project.MRP.zip)\r\n","comments":[],"labels":["bug","needs testing","topic:gui","topic:animation"]},{"title":"HTML5 cache actual implementation is not \"dynamic enough\".","body":"### Tested versions\r\n\r\n3.x\r\n\r\n### System information\r\n\r\nweb\r\n\r\n### Issue description\r\n\r\nSo, this you can catch the cache bug on several instances.\r\n\r\nInstance N1:\r\nIf one creates a html enabled project, and put on a root node on ready:\r\nOS.alert(X)\r\n\r\nand run on brower using the internal localhost debug, it will load.\r\n\r\nThen, if one changes from X to Y, and reload:\r\nThere is a big chance you will see X on the alert, not Y\r\n\r\nSO, mitigations i found:\r\n\r\nN1M0:\r\nJust reload the page SEVERAL times\r\n\r\nN1M1:\r\nClose and re-start the godot webserver that is serving the localhost \r\n(does not work very often)\r\n\r\nN1M2:\r\nDo or do not do N1M1, AND, open a new guest (incognito does not aways clean itself fully), and load the link\r\n(this AWAYS work)\r\n\r\nInstance N2:\r\n\r\nOn deploy, this behaviour continues, and if one has already loaded a page, it will load the old version again, and again, and again, and i could not find a pattern, but it will load the new page, if one continues.\r\n(But, a curiosity is that the HTML page, the LOADER, is aways the fresh new file, so it must be the PCK that is not being re-downloaded, but if the HTML is detected and re-requested, why not the rest?)\r\n\r\nN2M0:\r\nJust reload the page SEVERAL times, but does not work with a pattern. on N1M0 it will aways load the new one serveral consecutives reloads.\r\n\r\nN2M1:\r\nThis is the same almost as N1M2, juts open the link on a guest profile on your browser, and it will AWAYS load fully and correct.\r\n\r\nInstance N3:\r\non that, in have several isues already reported here:\r\nhttps:\/\/github.com\/godotengine\/godot\/issues\/69414\r\nhttps:\/\/github.com\/godotengine\/godot\/issues\/84996\r\nhttps:\/\/github.com\/godotengine\/godot\/issues\/86099\r\n\r\nand its all about progressive web apps and being able to load correct version, work offline, and so on.\r\n\r\nThe instance is, that on PWA, you cant force a incognito re-load.\r\nAnd on they too, the new html loader is readly loaded, but the old project data is still being load. The pck(\/wasm too?)is not being refreshed as need.\r\n\r\nand too, the app wont work without network.\r\n\r\n\r\n\r\nSo, all this is making the webmaster work stressfuN and not performant, neither consistent, because i cant determine state of versioning on users, with safety without central autority.\r\n\r\nWell, thats the report.\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\ncited above\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\ndescribed in body","comments":["This need a sistematic error test to be conducted, because it has several local variables;\r\n\r\nBut the case1, the localhost reload, can be reproduced by anyone.\r\n\r\nOn my case, it indeed apears, using godot 3.latest, on Chromium based Browser, in Arch based linux.\r\n\r\nIf this part is reproduced and adressed, maybe the rest comes free.\r\n\r\n\r\n\r\n\r\n----\r\n\r\n\r\n\r\nSo, i realized that i was missing something, and indeed.\r\n\r\nBUT, this does not changed the behaviour... I added a singleton with:\r\n\r\n\r\n```\r\nfunc _ready():\r\n if OS.get_name() == \"HTML5\":\r\n  if JavaScript.pwa_needs_update():\r\n   OS.alert(\"update\")\r\n   JavaScript.pwa_update()\r\n\r\n```\r\n\r\nbut the behaviour is the same.  Just deployed, waited for it to sync, and i do now have the version with the verifier.\r\n\r\nBut now a new version, still refreshing for the current. will update with results.\r\n\r\n\r\n\r\n----\r\n\r\n\r\n\r\nWell, as documented in https:\/\/github.com\/godotengine\/godot\/issues\/89622 i was not \"Really\" using PWA.\r\nBut now, i am, and indeed one can delete all cache, and force a new download of the latest version. That indeed worked.\r\n\r\nBUT, still the \"update\" alert did not ringed, and i did needed to erase cache\/data to get newest version.\r\n\r\nWill try to make the automatic update work, but there is still something i am missing?\r\n\r\n\r\n\r\n----\r\n\r\n\r\n\r\nA aprouch i want to try is this, but i do not hava experience on CI\/CD, (thats a good training then)\r\n\r\nI will create a github project of a godot project.\r\nThis project will be open and etc, but the thing is that it build every hour, and is commited to the github pages.\r\n\r\nSO, every hour, it should have a new version to sync on the PWA installed.\r\n\r\nThis loop is iterated until a good flow is achieved, and every hour the update is detected and upon opening, installed.\r\n\r\nI Shall bring the links soon\r\n\r\n\r\n\r\n----\r\n\r\n\r\n\r\nThe solution code provided on https:\/\/github.com\/godotengine\/godot\/issues\/69414#issuecomment-2007980112 maybe fixes some part of the problem. The PWA cache.\r\n\r\nI will continue testing, and will wait for some confirmation of peers.\r\n\r\nBut, thats half of the problem. \r\n\r\nBy confirming and fixing that part, PWA is gona be on a desired useful steady state of ever updatiness.\r\n\r\nBut, on non PWA browsing one may still find old version being loaded. The PWA worker does not handle browser cache of non instaled pages, as far as i know.\r\n\r\nThis, of course, still gona need some testing after confirmation of good state of new PWA cache, and if still lacking, gonna need investigations on other parts of implementation to direct handle browser cache, not PWA.\r\n\r\n\r\nAnd, going back to PWA_UPDATE systems.\r\n\r\nThis new aprouch kinda makes it non needed. I still do not know how this is really implemented, but, if to re-implement i really gonna make a sugestion:\r\n\r\nThere seens to be indeed no explicit versioning on the PWA architecture declared and faced to the developer.\r\n\r\nBut, one has the ID atribute of the manifest:\r\nhttps:\/\/developer.mozilla.org\/en-US\/docs\/Web\/Manifest\/id\r\n\r\nI even tried using it on https:\/\/github.com\/godotengine\/godot\/issues\/89713#issuecomment-2010216629 but it surge no effects.\r\n\r\nSo, what i propose is if all this became indeed a implemented aprouch, to re-implement the Javascript.pwa_needs_update() to became simply a http_requester of the manifest file on the endpoint of the instaled PWA website.\r\n\r\nThen implement a versioning metadata in the html export, as others exports have declared. (again, explored on the https:\/\/github.com\/godotengine\/godot\/issues\/89713), and to populate the ID atributte of the manifest file with the same version.\r\n\r\nThen, on javascript.pwa_needs_update() to just check if the internal version matches the retrived in the manifest.\r\nIF not, return true.\r\n\r\nThen, one can call the\r\n\r\nJavaScript.pwa_update()\r\n\r\nif still relevant on the new fetch context. If not, still keeping the call method, but refactoring it to just refresh the app (if this is not what this method already do, i did not investigate further.)\r\n\r\nSo, one can when the app is running, detect on the fly if a new version has became available, and react to that.\r\n\r\nI think this concludes the new aprouch i am exploring.\r\n\r\nStill needs several internal tests. Peer confirmations, and after all, a aligment with the engine goals. (As this will aways update first, something that was already discussed on other issues related to this, as a conflictant decision)\r\n\r\nOn my end, i belive having updated runtime a priority, and i think this new aprouch may goodly handle it.\r\n\r\nInsights?\r\n","Please edit your original post or comments instead of making multiple comments in a row, it makes it easier to follow (especially if information becomes outdated)"],"labels":["bug","platform:web"]},{"title":"SCons: Enable the experimental Ninja backend and minimize timestamp changes to generated code","body":"This PR implements everything needed to have initial support for the _experimental_ ninja build backend for SCons documented here: https:\/\/scons.org\/doc\/production\/HTML\/scons-user\/ch27s02.html\r\n\r\nUnfortunately, just enabling the backend (which was trivial) was not enough, as ninja is timestamp-based and the code generators kept rewriting (and thus retouching) everything for no good reason, tripping it up.\r\n\r\nThis PR is thus a patchset of 2 related but atomic commits:\r\n\r\n 1. A commit that makes all generators I could find extremely conservative with timestamp changes, through a new method in `methods.py` called `write_file_if_needed`, which compares the file's contents to the target string before writing to it. The SCU generators had to get a special treatment, where they keep track of every file considered and use that as a reference for what to _not_ delete when globbing everything (thus only deleting any \"stale\" file). \r\n 2. The actual ninja-enabling commit, which is quite small as it adds just the new option and the few lines needed to turn the backend on.\r\n\r\nTo use it, you'll need to have ninja installed and a python module named `ninja`, which offers nothing more than the [`ninja_syntax.py`](https:\/\/github.com\/ninja-build\/ninja\/blob\/master\/misc\/ninja_syntax.py) logic bundled by ninja.\r\n\r\nTo get it, either install the `ninja` python package like the docs recommend:\r\n```sh\r\n# In a virtualenv, or \"python\" is the native executable:\r\npython -m pip install ninja\r\n\r\n# Windows using Python launcher:\r\npy -m pip install ninja\r\n\r\n# Anaconda:\r\nconda install -c conda-forge ninja\r\n```\r\n\r\nor just put the two files needed in your local `site-packages` directory.\r\n\r\nHere's a zip which makes SCons use the system version of ninja by bundling [the upstream `ninja_syntax.py`](https:\/\/github.com\/ninja-build\/ninja\/blob\/ab510c7a8cccbea0ea2c82531dc23893b551d55e\/misc\/ninja_syntax.py) and a stub `__init__.py` that does absolutely nothing (it just needs to be there to be recognized by SCons): [ninja.zip](https:\/\/github.com\/godotengine\/godot\/files\/14591452\/ninja.zip)\r\n\r\n(yeah, I know, this is a bit unnecessary, but that's how it works. We can improve things upstream if this approach becomes more popular)\r\n\r\nAfter that, just add the `ninja=yes` option when invoking `scons`. SCons will generate a `build.ninja` and quit. After that, just call `ninja` with whatever flags you might need and enjoy :D\r\n\r\nAlso, ideally you won't have to call `scons` never again, unless you want to change some build flag, as ninja will detect any (timestamp-based) change to any SCons build script and invoke everything needed to regenerate itself.\r\n\r\nWhile experimenting sometimes it would trip itself in an infinite loop, probably due to some backwards-and-forwards that changed `SConstruct` but not its actual contents. In that case, start a clean build by deleting `build.ninja` and the `.ninja` folder and try again.\r\n\r\nBe aware that not everything is transferred properly for some reason, such as ~whether to build `compile_commands.json` (it does so by default), the linker choice (it uses `ld.bfd` on my machine for some reason) and~ the number of jobs (you'll have to manually specify `-j` while invoking ninja or it will use whatever's the default, which on my machine is 10).\r\n\r\n~Edit: more precisely, `custom.py` is not working completely for some reason. Passing manually the linker or other things will work, with the exception of compile_db and the jobs as it looks like they might be treated specially by SCons. I think that this workflow does not really allow it in the first place by design, so I would not rely on it.~\r\n\r\nEdit2: I had an old version of scons (4.3.0). The latest at the time of writing, 4.6.0, imports `custom.py` fine. It also skips building `compile_commands.json` correctly now.\r\n\r\nThat said, since this is still marked as experimental, I would not be surprised if some of those were some upstream limitations, so I would consider this good enough for now and open to testing.","comments":["Ooops sorry I did some mistakes while cleaning up the generation method and messed some things up, one sec...","There, should be fixed :D\r\n\r\nEdit: nope, not yet :\/\r\n\r\nEdit 2: ding ding ding! I had to add an handler for `FileNotFoundError` as I could not find a more clever way of doing it. I hoped that `r+` would open a file for reading and creation but in the end this turned out to be the simplest solution I could find.","> and the number of jobs (you'll have to manually specify `-j` while invoking ninja).\r\n\r\nThe good news though is that Ninja uses all CPU threads by default (unlike `make`), so builds won't be very slow if you forget to specify it.","@Calinou yeah on my machine the default is 10, which is a bit more of my actual threads but still greater than 1, so that's something :D","@Calinou thanks a lot for testing!\r\n\r\n> A small issue I noticed is that if you run SCons and Ninja once, then run SCons with no changes and run ninja again, Ninja will check 100+ files instead of exiting early. I'm not sure if this can be fixed though.\r\n\r\nMh, that's interesting. I've run `ninja` with the `-dexplain` flag which, as the name implies, explains why it decides to rebuild some file and the only meaningful message that I get on a fresh `scons`->`ninja` chain is:\r\n\r\n```\r\nninja explain: output compile_commands.json older than most recent input build.ninja (1710369857680153344 vs 1710370007912264671)\r\n``` \r\n\r\nIt doesn't look like the `compile_commands.json` thing is really a dependency on anything, but as you can notice from the message calling scons regenerates the whole `build.ninja`. Perhaps ninja invalidates a bunch of stuff when it notices an inconsistency like this. I'm not sure.\r\n\r\n> I'm not sure if this can be fixed though.\r\n\r\nYeah I don't think we can fix this easily if at all, although one has to call scons relatively rarely, as it's just there for setting the compilation options, see below for some more findings.\r\n\r\n---\r\n\r\nBTW I finally found out why in the world I couldn't get it to build with mold: apparently `custom.py` gets (partially?) ignored, relying entirely on the arguments passed from the CLI.\r\n\r\nI don't think that the SCons folks can do much either; TIWAGOS, but I think that this is by design as ninja has to invoke SCons to (re)generate any \"dynamic\" source file (e.g. anything `*.gen.*` like the Wayland protocol wrappers) and it has to know the settings in advance or bad things can happen.\r\n\r\nAlso, it's an explicit _non_-goal to have configuration handling in ninja[^1]. They look to be extremely minimalist and opinionated, which is what gives them their speed and determinism.\r\n\r\nSo, I think that we might have to live with that and communicate to the users that this workflow is a bit different from what we're used to. It might not be that bad though, as after all one has to call SCons only once per configuration change (and any SConstruct\/SCsub change is taken in account by ninja too)\r\n\r\nI think that we can get this to an usable state as-is if we become aware of its quirks and limitations. The current speed boost sounds already _very_ appetizing IMO.\r\n\r\nEventually, we could discuss this further with the SCons folks; I suppose that they would appreciate the feedback and perhaps we could help get a bunch of improvements upstream too, such as with ninja detection ~or perhaps a way to disable `compile_commands.json` for people who don't need it, as it looks hardcoded.~ Edit: I had an old SCons version, it's not hardcoded anymore.\r\n\r\nHopefully this shines some further light on this backend, as there's unfortunately not much documentation, despite this being surprisingly rock solid for being experimental (we're a _huge_ SCons project and it built _first try_, requiring only a few tweaks to have perfect incremental rebuilds, that's impressive :D )\r\n\r\n[^1]: From https:\/\/ninja-build.org\/manual.html#_design_goals: \"Some explicit non-goals: [...] * build-time customization of the build. Options belong in the program that generates the ninja files.\" ","So folks I did some more testing and realized I had a 2 year old version of SCons...\r\n\r\nThe latest, 4.6.0 is faster, better, harder and stronger: `custom.py` works again (although it's a bit inconsistent as it exports the actual commands and the cli invocation but not the whole environment, so there's chance for some unreliability in the result) and `compile_commands.json` is not built anymore by default.\r\n\r\nIn other words, this is even more stable than I reported before :)","Can you do a small rebase against master? Thanks!","@fire rebased!\r\n\r\nI also added a version check like with CompileDB, used the native setting for disabling the ninja autorun and renamed the new flaky file whitelist to `paths_to_keep` because that word is a bit... Controversial? And apparently native speakers feel way more uneasy with that word than non-native speakers like me[^1].\r\n\r\n[^1]: Based from some previous informal discussions, I have no idea if that's really the case but in this case changing it was painless and, personally, a bit more consistent with how I like my variables named.","On windows 11, `scons ninja=yes failed`.\r\n\r\n\r\n```\r\nscons use_mingw=yes use_llvm=yes ninja=yes scu_build=yes\r\n```\r\n\r\nFound some warnings and a failure on Windows 11 with python 3.12.\r\n\r\n```\r\nIn file included from platform\/windows\/rendering_context_driver_vulkan_windows.cpp:35:\r\nplatform\/windows\/rendering_context_driver_vulkan_windows.h:55:50: warning: class with destructor marked 'final' cannot be inherited from [-Wfinal-dtor-non-final-class]\r\n   41 | class RenderingContextDriverVulkanWindows : public RenderingContextDriverVulkan {\r\n      |                                           final\r\n   42 | private:\r\n   43 |         const char *_get_platform_surface_extension() const override final;\r\n   44 |\r\n   45 | protected:\r\n   46 |         SurfaceID surface_create(const void *p_platform_data) override final;\r\n   47 |\r\n   48 | public:\r\n   49 |         struct WindowPlatformData {\r\n   50 |                 HWND window;\r\n   51 |                 HINSTANCE instance;\r\n   52 |         };\r\n   53 |\r\n   54 |         RenderingContextDriverVulkanWindows();\r\n   55 |         ~RenderingContextDriverVulkanWindows() override final;\r\n      |                                                         ^\r\nplatform\/windows\/rendering_context_driver_vulkan_windows.h:41:7: note: mark 'RenderingContextDriverVulkanWindows' as 'final' to silence this warning\r\n   41 | class RenderingContextDriverVulkanWindows : public RenderingContextDriverVulkan {\r\n      |       ^\r\n1 warning generated.\r\n[583\/1820] Compiling platform\\windows\\display_server_windows.windows.editor.x86_64.llvm.o\r\nIn file included from platform\/windows\/display_server_windows.cpp:43:\r\nplatform\/windows\/rendering_context_driver_vulkan_windows.h:55:50: warning: class with destructor marked 'final' cannot be inherited from [-Wfinal-dtor-non-final-class]\r\n   41 | class RenderingContextDriverVulkanWindows : public RenderingContextDriverVulkan {\r\n      |                                           final\r\n   42 | private:\r\n   43 |         const char *_get_platform_surface_extension() const override final;\r\n   44 |\r\n   45 | protected:\r\n   46 |         SurfaceID surface_create(const void *p_platform_data) override final;\r\n   47 |\r\n   48 | public:\r\n   49 |         struct WindowPlatformData {\r\n   50 |                 HWND window;\r\n   51 |                 HINSTANCE instance;\r\n   52 |         };\r\n   53 |\r\n   54 |         RenderingContextDriverVulkanWindows();\r\n   55 |         ~RenderingContextDriverVulkanWindows() override final;\r\n      |                                                         ^\r\nplatform\/windows\/rendering_context_driver_vulkan_windows.h:41:7: note: mark 'RenderingContextDriverVulkanWindows' as 'final' to silence this warning\r\n   41 | class RenderingContextDriverVulkanWindows : public RenderingContextDriverVulkan {\r\n      |       ^\r\n1 warning generated.\r\nFAILED: thirdparty\/mbedtls\/library\/constant_time.windows.editor.x86_64.llvm.o\r\nx86_64-w64-mingw32-clang \"-o\" \"thirdparty\/mbedtls\/library\/constant_time.windows.editor.x86_64.llvm.o\" \"-c\" \"-std=gnu11\" \"-O2\" \"-Wall\" \"-Wshadow-field-in-constructor\" \"-Wshadow-uncaptured-local\" \"-Wno-ordered-compare-function-pointers\" \"-MMD\" \"-MF\" \"thirdparty\/mbedtls\/library\/constant_time.windows.editor.x86_64.llvm.o.d\" \"-w\" \"-isystem\" \"thirdparty\/glad\" \"-DTOOLS_ENABLED\" \"-DDEBUG_ENABLED\" \"-DEIGEN_MPL2_ONLY\" \"-DNDEBUG\" \"-DNO_EDITOR_SPLASH\" \"-DWINDOWS_ENABLED\" \"-DWASAPI_ENABLED\" \"-DWINMIDI_ENABLED\" \"-DWINVER=0x0601\" \"-D_WIN32_WINNT=0x0601\" \"-DVULKAN_ENABLED\" \"-DRD_ENABLED\" \"-DGLES3_ENABLED\" \"-DMINGW_ENABLED\" \"-DMINGW_HAS_SECURE_API=1\" \"-DMINIZIP_ENABLED\" \"-DBROTLI_ENABLED\" \"-DTHREADS_ENABLED\" \"-DCLIPPER2_ENABLED\" \"-DZSTD_STATIC_LINKING_ONLY\" \"-DUSE_VOLK\" \"-DVK_USE_PLATFORM_WIN32_KHR\" \"-DGLAD_ENABLED\" \"-DEGL_ENABLED\" \"-DGODOT_MODULE\" \"-DMBEDTLS_CONFIG_FILE=\/\"thirdparty\/mbedtls\/include\/godot_module_mbedtls_config.h\/\"\" \"-Ithirdparty\/mbedtls\/include\" \"-Ithirdparty\/libpng\" \"-Ithirdparty\/volk\" \"-Ithirdparty\/vulkan\" \"-Ithirdparty\/vulkan\/include\" \"-Ithirdparty\/zstd\" \"-Ithirdparty\/zlib\" \"-Ithirdparty\/clipper2\/include\" \"-Ithirdparty\/brotli\/include\" \"-Ithirdparty\/angle\/include\" \"-Iplatform\/windows\" \"-I.\" \"thirdparty\/mbedtls\/library\/constant_time.c\"\r\nIn file included from thirdparty\/mbedtls\/library\/constant_time.c:13:\r\nthirdparty\/mbedtls\/library\/common.h:15:10: error: expected \"FILENAME\" or <FILENAME>\r\n   15 | #include MBEDTLS_CONFIG_FILE\r\n      |          ^\r\n<command line>:26:29: note: expanded from macro 'MBEDTLS_CONFIG_FILE'\r\n   26 | #define MBEDTLS_CONFIG_FILE \/thirdparty\/mbedtls\/include\/godot_module_mbedtls_config.h\/\r\n      |                             ^\r\nIn file included from thirdparty\/mbedtls\/library\/constant_time.c:16:\r\nthirdparty\/mbedtls\/include\/mbedtls\/error.h:16:10: error: expected \"FILENAME\" or <FILENAME>\r\n   16 | #include MBEDTLS_CONFIG_FILE\r\n      |          ^\r\n<command line>:26:29: note: expanded from macro 'MBEDTLS_CONFIG_FILE'\r\n   26 | #define MBEDTLS_CONFIG_FILE \/thirdparty\/mbedtls\/include\/godot_module_mbedtls_config.h\/\r\n      |                             ^\r\nIn file included from thirdparty\/mbedtls\/library\/constant_time.c:17:\r\nthirdparty\/mbedtls\/include\/mbedtls\/platform_util.h:17:10: error: expected \"FILENAME\" or <FILENAME>\r\n   17 | #include MBEDTLS_CONFIG_FILE\r\n      |          ^\r\n<command line>:26:29: note: expanded from macro 'MBEDTLS_CONFIG_FILE'\r\n   26 | #define MBEDTLS_CONFIG_FILE \/thirdparty\/mbedtls\/include\/godot_module_mbedtls_config.h\/\r\n      |                             ^\r\n3 errors generated.\r\n```","To be clear this isn't a blocker and we can work on it later as long as one platform works.","Can you check that there is no breakage if you don't use `ninja=yes`?","`scons use_mingw=yes use_llvm=yes ninja=no scu_build=yes`\r\n\r\nSeems to error in different places.\r\n\r\n```\r\n[Initial build] Linking Program bin\\godot.windows.editor.x86_64.llvm.exe ...\r\n=====\r\nld.lld: error: undefined symbol: OS::get_exit_code() const\r\n>>> referenced by platform\\windows\\godot_windows.windows.editor.x86_64.llvm.o:(widechar_main(int, wchar_t**))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(vtable for OS_Windows)\r\n\r\nld.lld: error: undefined symbol: ScriptDebugger::set_depth(int)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(HandlerRoutine(unsigned long))\r\n\r\nld.lld: error: undefined symbol: ScriptDebugger::set_lines_left(int)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(HandlerRoutine(unsigned long))\r\n\r\nld.lld: error: undefined symbol: String::utf16() const\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced 111 more times\r\n\r\nld.lld: error: undefined symbol: Char16String::get_data() const\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(debug_dynamic_library_check_dependencies(String const&, String const&, HashSet<String, HashMapHasherDefault, HashMapComparatorDefault<String>>&, HashSet<String, HashMapHasherDefault, HashMapComparatorDefault<String>>&))\r\n>>> referenced 122 more times\r\n\r\nld.lld: error: undefined symbol: Memory::free_static(void*, bool)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::alert(String const&, String const&))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced 58637 more times\r\n\r\nld.lld: error: undefined symbol: NetSocketPosix::make_default()\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n\r\nld.lld: error: undefined symbol: operator new(unsigned long long, char const*)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::OS_Windows(HINSTANCE__*))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::OS_Windows(HINSTANCE__*))\r\n>>> referenced 3684 more times\r\n\r\nld.lld: error: undefined symbol: IPUnix::make_default()\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n\r\nld.lld: error: undefined symbol: is_print_verbose_enabled()\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::OS_Windows(HINSTANCE__*))\r\n>>> referenced 117 more times\r\n\r\nld.lld: error: undefined symbol: Variant::Variant(char const*)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::get_memory_info() const)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::get_memory_info() const)\r\n>>> referenced 1421 more times\r\n\r\nld.lld: error: undefined symbol: stringify_variants(Variant const&)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::OS_Windows(HINSTANCE__*))\r\n>>> referenced by platform\\windows\\display_server_windows.windows.editor.x86_64.llvm.o:(DisplayServerWindows::_update_tablet_ctx(String const&, String const&))\r\n>>> referenced 137 more times\r\n\r\nld.lld: error: undefined symbol: __print_line(String const&)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::OS_Windows(HINSTANCE__*))\r\n>>> referenced by platform\\windows\\display_server_windows.windows.editor.x86_64.llvm.o:(DisplayServerWindows::_update_tablet_ctx(String const&, String const&))\r\n>>> referenced 135 more times\r\n\r\nld.lld: error: undefined symbol: Variant::_clear_internal()\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::initialize())\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::get_memory_info() const)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::get_memory_info() const)\r\n>>> referenced 8522 more times\r\n\r\nld.lld: error: undefined symbol: String::utf8(char const*, int)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced 212 more times\r\n\r\nld.lld: error: undefined symbol: String::String(char const*)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(debug_dynamic_library_check_dependencies(String const&, String const&, HashSet<String, HashMapHasherDefault, HashMapComparatorDefault<String>>&, HashSet<String, HashMapHasherDefault, HashMapComparatorDefault<String>>&))\r\n>>> referenced 21628 more times\r\n\r\nld.lld: error: undefined symbol: String::operator+(String const&) const\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced 2493 more times\r\n\r\nld.lld: error: undefined symbol: itos(long long)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(format_error_message(unsigned long))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::move_to_trash(String const&))\r\n>>> referenced 344 more times\r\n\r\nld.lld: error: undefined symbol: String::operator+=(char const*)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(_error_handler(void*, char const*, char const*, int, char const*, char const*, bool, ErrorHandlerType))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(OS_Windows::open_dynamic_library(String const&, void*&, bool, String*))\r\n>>> referenced by libmain.windows.editor.x86_64.llvm.a(main.windows.editor.x86_64.llvm.o):(Main::setup(char const*, int, char**, bool))\r\n>>> referenced 58 more times\r\n\r\nld.lld: error: undefined symbol: Memory::alloc_static(unsigned long long, bool)\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(HashMap<long long, OS_Windows::ProcessInfo, HashMapHasherDefault, HashMapComparatorDefault<long long>, DefaultTypedAllocator<HashMapElement<long long, OS_Windows::ProcessInfo>>>::insert(long long const&, OS_Windows::ProcessInfo const&, bool))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(HashMap<long long, OS_Windows::ProcessInfo, HashMapHasherDefault, HashMapComparatorDefault<long long>, DefaultTypedAllocator<HashMapElement<long long, OS_Windows::ProcessInfo>>>::insert(long long const&, OS_Windows::ProcessInfo const&, bool))\r\n>>> referenced by platform\\windows\\os_windows.windows.editor.x86_64.llvm.o:(HashSet<String, HashMapHasherDefault, HashMapComparatorDefault<String>>::insert(String const&))\r\n>>> referenced 1307 more times\r\n\r\nld.lld: error: too many errors emitted, stopping now (use --error-limit=0 to see all errors)\r\nclang-18: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\n=====\r\nscons: *** [bin\\godot.windows.editor.x86_64.llvm.exe] Error 1\r\nscons: building terminated because of errors.\r\n[Time elapsed: 00:02:35.360]\r\nPS D:\\20240307_windows\\other\\VSK_godot> scons use_mingw=yes use_llvm=yes ninja=no scu_build=yes\r\n```\r\n","Let me try harder to see if I can get a build on any platform.\r\n\r\nEdited:\r\n\r\nBuild failure on windows using msvc.\r\n\r\nhttps:\/\/gist.github.com\/fire\/69086e702fc02bca20c515a50b518cdc\r\n\r\nI wasn't able to install python package `ninja` easily, but I'll try mac.","I have to do some errands so I won't be able test currently."],"labels":["enhancement","topic:buildsystem","needs testing","performance"]},{"title":"[Core] Disconnect one-shot signals before calling callbacks","body":"Edit: Removed the recursion fix and can add it back in separately if desired, I still think it's an improvement but it makes this easier to merge and cherry-pick, keeping things as simple as possible for this case\r\n\r\nThis solves the issue, though I'd say some of the handling of `await` needs to be improved, see for example, so some further fixing of that side is likely needed:\r\n* https:\/\/github.com\/godotengine\/godot\/issues\/79637\r\n\r\n---\r\n\r\n* Fixes: https:\/\/github.com\/godotengine\/godot\/issues\/89439\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":[">Removed the recursion fix\r\n\r\nI'd say if anything it should be opened as a separate PR anyway, it seems a separate thing to the disconnecting change.\r\n\r\n---\r\n\r\nAlso if this gets approved as us (just the disconnecting part) then I think we should be careful with cherry-picking it to 4.2, I'd say that's a change which is likely to introduce some regressions we haven't thought about.\r\n\r\n---\r\n\r\nI'm not sure if the change is safe. It's core-core so I'd say it needs to be assesed by **reduz** anyway, so let's wait for such assesment. :slightly_smiling_face:","Thanks for looking into this!","Will update tomorrow, thank you!","There, updated:\r\n* Now using `alloca` instead of a `LocalVector`\r\n* Not copying `Connection` as only the `callable` and `flags` parts are relevant, and the copy constructor for this type is actually very inefficient as it goes via a `Dictionary` to get there\r\n* Removed the disconnect data entirely and just using the copied connections data\r\n\r\nStill disconnecting all signals before emitting, to handle this:\r\n```gdscript\r\nsignal my_signal\r\n\r\nfunc foo():\r\n    print(\"Foo\")\r\n    my_signal.emit()\r\n\r\nfunc bar():\r\n    print(\"Bar\")\r\n\r\nfunc _ready():\r\n    my_signal.connect(foo, CONNECT_ONE_SHOT)\r\n    my_signal.connect(bar, CONNECT_ONE_SHOT)\r\n    my_signal.emit()\r\n```\r\nWithout disconnecting all signals at once before emitting this will fire `bar` twice, as well as complain about disconnecting a non-existing signal\r\n\r\nThis cleans up a bunch of inefficiencies in this code, like storing the name of the signal in the disconnect data (not needed, only used in a single signal) and copying the whole `Connection` data, which involves copying a whole `Signal`","Gonna add a GDScript test for this case and will push after CI has finished","> Gonna add a GDScript test for this case and will push after CI has finished\r\n\r\nWhile at it probably good idea to also add some test specifically for the fixed `await` usage, something like in https:\/\/github.com\/godotengine\/godot\/issues\/89439#issuecomment-1995097758.","Will test out writing one!","And done, that test will fail with errors on the unchanged branch, and behaves nicely now","Thank you!"],"labels":["bug","topic:core","cherrypick:4.2"]},{"title":"GPUParticles2D Trails don't align with Animated Velocity.","body":"### Tested versions\n\nv4.2.1.stable.official [b09f793f5]\r\nNever worked properly\n\n### System information\n\nN\/A\n\n### Issue description\n\nWhen using 2D particle trails with an animated velocity, such as radial or orbit velocity, they do not align with it, creating a \"calligraphy effect\". \r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/98223724\/f7b43d5e-3b0a-4628-b750-e0a98b9c1732)\r\n\r\nThis is not an issue with GPUParticles3D Trails, as they need `particle_flag_align_y` to align, and GPUParticles2D don't, which is a different issue on it's own.\r\n\n\n### Steps to reproduce\n\n- Add a GPUParticles2D Node, and a process material\r\n- Enable Trails\r\n- Use any animated velocity.\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["As a whole I'd suggest making 2D particle trails only align with velocity when `particle_flag_align_y` is enabled, for consistency with `GPUParticles3D`."],"labels":["discussion","topic:2d","topic:particles"]},{"title":"Remove editor dependencies from LineEdit","body":"Part of https:\/\/github.com\/godotengine\/godot\/issues\/53295#issuecomment-932203107","comments":[],"labels":["enhancement","topic:gui","topic:codestyle"]},{"title":"Fix error where update wouldn't reconnect the signal it should have reconnected and led to errors and crash.","body":"Fixes #78372 fixes #89425 \r\nThe second issue is half a duplicate as it is the same issue but the symptoms degenerated over time from simple errors to a full crash.","comments":[],"labels":["bug","topic:core","crash","cherrypick:4.2"]},{"title":"after i use plus button create a scene, and then click other window , godot will show a  Progress bar to save and then i can`t click anything","body":"### Tested versions\n\n4.2.1.stable\n\n### System information\n\nwin10 -4.2.1.stable - compatible - fullscreen -OpenGL API 3.3.0 NVIDIA 545.92 - Compatibility - Using Device: NVIDIA - NVIDIA GeForce RTX 4060 Laptop GPU\n\n### Issue description\n\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/94771015\/3c61b9a1-cebf-478a-9180-1cd2f29d9fe2)\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/94771015\/9e2d6002-7719-4de4-a712-99a969039bee)\r\nin fullscreen, after i create a scene and then i click other whindow there will show  a  Progress bar quickly,  then every thing can`t click\n\n### Steps to reproduce\n\nin fullscreen, after i create a scene and then i click other whindow there will show  a  Progress bar quickly,  then every thing can`t click\n\n### Minimal reproduction project (MRP)\n\n[example.zip](https:\/\/github.com\/godotengine\/godot\/files\/14589483\/example.zip)\r\n","comments":["Unable to reproduce with v4.3.dev5.official [89f70e98d] on Windows 10 with\r\n- Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1050 Ti\r\n- GLES3 (Compatibility) - NVIDIA GeForce GTX 1050 Ti\r\n\r\nTried with both settings: Single Window Mode enabled and disabled."],"labels":["bug","topic:editor","needs testing"]},{"title":"Building with `module_webp_enabled=\"no\"` breaks svg support","body":"### Tested versions\n\nReproducible in: [master](https:\/\/github.com\/godotengine\/godot\/commit\/61282068f4d59cb48f35ad95391728c58d9008ab), [4.2 branch](2a8c429fcc19b042aaf43a51060c571d42ca2e39), [4.2.1-sable](https:\/\/github.com\/godotengine\/godot\/tree\/4.2.1-stable)\r\n\r\n### Notes\r\n\r\n1. I built the 4.2.1 with many other disabled options so I am not so sure about it\r\n2. When I exported the projects I used standard 4.2.1-stable editor because it just packs `.pck` file and place it near the pre-compiled export template...?\r\n3. Tested with and without SCU\r\n4. Tested with mold and partially with default gcc linker\n\n### System information\n\nGodot v4.2.1.stable - Debian GNU\/Linux testing (gcc12) - Wayland - GLES3 (Compatibility)\n\n### Issue description\n\nCompiling export_template with `module_webp_enabled=\"no\"` doesn't throw any compilation errors but when I try to export project that use svg it suddenly crash with following erros:\r\n\r\n```error\r\nERROR: Condition \"img.is_null() || img->is_empty()\" is true. Returning: Ref<Image>()\r\n   at: load_image_from_file (.\/scene\/resources\/compressed_texture.cpp:344)\r\nERROR: Failed loading resource: res:\/\/.godot\/imported\/icon.svg-218a8f2b3041327d8a5756f3a245f83b.ctex. Make sure resources have been imported by opening the project in the editor at least once.\r\n   at: _load (.\/core\/io\/resource_loader.cpp:277)\r\nERROR: Failed loading resource: res:\/\/icon.svg. Make sure resources have been imported by opening the project in the editor at least once.\r\n   at: _load (.\/core\/io\/resource_loader.cpp:277)\r\nERROR: Can't load dependency: res:\/\/icon.svg.\r\n   at: parse_variant (.\/core\/io\/resource_format_binary.cpp:459)\r\nERROR: Error when trying to parse Variant.\r\n   at: parse_variant (.\/core\/io\/resource_format_binary.cpp:503)\r\nERROR: Error when trying to parse Variant.\r\n   at: parse_variant (.\/core\/io\/resource_format_binary.cpp:490)\r\nERROR: Failed loading resource: res:\/\/.godot\/exported\/133200997\/export-523cfd0014c18c3c941ab60c4947535f-icon.scn. Make sure resources have been imported by opening the project in the editor at least once.\r\n   at: _load (.\/core\/io\/resource_loader.cpp:277)\r\nERROR: Failed loading scene: res:\/\/icon.tscn.\r\n   at: start (main\/main.cpp:3800)\r\n```\n\n### Steps to reproduce\n\nCompile export template with `module_webp_enabled=\"no\"` and export project that use svg\n\n### Minimal reproduction project (MRP)\n\n### Project for export:\r\n\r\n1. Create new project\r\n2. Drag default godot svg icon to create new scene from this icon\r\n\r\n### `custom.py` script:\r\n\r\n```python\r\ntarget=\"template_release\"\r\ndebug_symbols=\"no\"\r\nlto=\"full\"\r\n\r\nlinker=\"mold\"\r\n\r\nplatform=\"linuxbsd\"\r\narch=\"x86_64\"\r\n\r\nmodule_webp_enabled=\"no\"\r\n```","comments":["Like JPG and PNG, SVG files are rasterized to WEBP internally.\r\nDisabling the webp module should make it fallback on saving as PNG, but already imported files may not be automatically reimported with the new format, and thus it fails loading the existing `res:\/\/.godot\/imported\/icon.svg-218a8f2b3041327d8a5756f3a245f83b.ctex`.\r\n\r\nCould you check if it works after deleting the `.godot` folder, which should reimport `icon.svg` as PNG?","> \r\n> Could you check if it works after deleting the `.godot` folder, which should reimport `icon.svg` as PNG?\r\n\r\n\r\nIt looks like I also need to compile the editor itself with disabled webp. Am I right? Anyway I will try","Ah indeed, or use the `rendering\/textures\/lossless_compression\/force_png` project setting.","Yeah it works now!\r\n\r\nAbout the \"bug\". At least if it is not too expensive for engine, I would like to know it is in the wrong\/unsupported format rather then getting `Make sure resources have been imported by opening the project in the editor at least once.` which is a bit frustrating...\r\n\r\nIf I use only svg's so I don't have neither png or webp and want to minimize template (yeah I know it will give at max 100kb space but anyway...) I should disable png because webp is default or prefer png?"],"labels":["bug","topic:buildsystem","topic:export"]},{"title":"Don't duplicate internal nodes","body":"As commented in https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9282#issuecomment-1992802567, this PR makes nodes added with `INTERNAL_MODE_FRONT` or `INTERNAL_MODE_BACK` not duplicated, similar to `parent_owned`. Also removed `parent_owned` and related methods, because they are no longer needed. AFAIK all internal nodes already use the proper internal mode. I also added helper method `is_internal()` to make it easier to use.\r\n\r\nSupersedes #88114\r\nSupersedes #89388\r\n\r\nResolves https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9282 (with alternate solution)","comments":["Doesn't fully supersede #88114 without cherry picking\r\n\r\nInteresting otherwise, I'd say it breaks compatibility even though the parent owned feature isn't accessible to scripting, though I'm not sure how people would handle this behavior currently in scripting","Well currently handling this is not possible via scripting. The internal nodes before this PR didn't prevent duplication. https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9282 proposed exposing the \"parent owned\" property, but it's a hack and now that we have a proper API for adding internal children, it can be used to replace this legacy code.","The internal nodes not handling this before *is* the compatibility breakage I'm talking about though \ud83d\ude43, unsure if people do use it but if they do use internal nodes then their code will break now, especially if they *don't* intend them to not be duplicated\r\n\r\nI'm not against this change, but it should be treated as breaking IMO to indicate this change so people can adjust","I agree. It would break compatibility. But \"break compatibility (good)\". It also gives more reasons to make use of this feature. It could use some testing to ensure it doesn't break built-in Control nodes on duplication."],"labels":["bug","enhancement","topic:core","breaks compat"]},{"title":"Godot (4.3) freezes\/crashes when opening projects with lots of spotlights\/omnilights","body":"### Tested versions\n\n- Reproducible in 4.3.dev4\r\n- Not reproducible in 4.2.1.stable\n\n### System information\n\nGodot v4.3.dev4 - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce RTX 3060 Laptop GPU (NVIDIA; 31.0.15.5161) - AMD Ryzen 5 5600H with Radeon Graphics (12 Threads)\n\n### Issue description\n\nGodot 4.3.dev4 cannot open projects with lots of omnilights\/spotlights - the editor freezes, and in the console a constant non ending spam of `Condition \"err != VK_SUCCESS\" is true` is outputted.\n\n### Steps to reproduce\n\nTry to open any project with lots of omnilights\/spotlights (perhaps 100+). A publicly available project that satisfies this condition is [Crater-Province-Level](https:\/\/github.com\/Jamsers\/Crater-Province-Level).\n\n### Minimal reproduction project (MRP)\n\n[Crater-Province-Level](https:\/\/github.com\/Jamsers\/Crater-Province-Level)","comments":["- probably duplicate of https:\/\/github.com\/godotengine\/godot\/issues\/89312"],"labels":["bug","topic:rendering","regression"]},{"title":"Noticable rendering errors when using a projector texture with an OmniLight. ","body":"### Tested versions\r\n\r\nv4.2.1.stable.official [b09f793f5]\r\nv4.3.dev4.official [df78c0636]\r\n\r\n### System information\r\n\r\nTested on 2 seperate systems:\r\nGodot v4.2.1.stable - Fedora Linux 39 (KDE Plasma) - Wayland - Vulkan (Forward+) - dedicated AMD Radeon RX 580 Series (RADV POLARIS10) - Intel(R) Core(TM) i7-3770K CPU @ 3.50GHz (8 Threads)\r\n\r\nGodot v4.3.dev4 - Windows 10.0.22631 - Vulkan (Forward+) - dedicated NVIDIA GeForce GTX 1660 Ti with Max-Q Design (NVIDIA; 31.0.15.5152) - AMD Ryzen 7 4800HS with Radeon Graphics (16 Threads)\r\n\r\n### Issue description\r\n\r\n![projector_bug_1](https:\/\/github.com\/godotengine\/godot\/assets\/781121\/430deecc-2649-4174-a6a9-5db2038ab372)\r\n\r\n![projector_bug_2](https:\/\/github.com\/godotengine\/godot\/assets\/781121\/df44e9a2-8aab-48f1-9ba2-e899141705fd)\r\nThe same thing happens when I use a pure white texture for the projection.\r\nBoth Forward+ and Mobile are affected.\r\n\r\nMRP Screenshot:\r\n![Screenshot_20240313_192632](https:\/\/github.com\/godotengine\/godot\/assets\/781121\/b74768f0-41bd-41c6-b27f-7d12e39519e4)\r\n\r\n### Steps to reproduce\r\n\r\n1. Open the MRP\r\n2. Open the main.tscn scene if godot doesn't open it on load.\r\n3. Select the OmniLight node and switch between the two different projector textures provided.\r\n4. Observe results, using the 8x8 white.png texture results in bigger rendering errors.\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[projector_bug.zip](https:\/\/github.com\/godotengine\/godot\/files\/14591961\/projector_bug.zip)","comments":[],"labels":["bug","topic:rendering","topic:3d"]},{"title":"Errors when firing a signal just after awaiting on that signal","body":"### Tested versions\n\n4.2.stable\n\n### System information\n\nMacOS, M2\n\n### Issue description\n\nErrors are logged when firing a signal just after awaiting on that signal. It seems that the await object is not properly cleaned up and is still partly waiting on the signal.\r\n\r\n```\r\nextends Node2D\r\n\r\nsignal my_signal()\r\n\r\nfunc _ready() -> void:\r\n\tawait my_signal\r\n\tmy_signal.emit()\r\n\r\nfunc _process(_delta: float) -> void:\r\n\tmy_signal.emit()\r\n\tset_process(false)\r\n```\r\n\r\ngives \r\n\r\n```\r\nE 0:00:00:0589   Node2D.gd:8 @ _ready(): Resumed function '_ready()' after await, but script is gone. At script: res:\/\/Node2D.gd:7\r\n  <Erreur C++>   Method\/function failed. Returning: Variant()\r\n  <Source C++>   modules\/gdscript\/gdscript_function.cpp:197 @ resume()\r\n  <Pile des appels>Node2D.gd:8 @ _ready()\r\n                 Node2D.gd:13 @ _process()\r\n\r\nE 0:00:00:0589   Node2D.gd:13 @ _process(): Attempt to disconnect a nonexistent connection from 'Node2D:<Node2D#26793215177>'. Signal: 'my_signal', callable: 'GDScriptFunctionState::_signal_callback'.\r\n  <Erreur C++>   Condition \"!s->slot_map.has(*p_callable.get_base_comparator())\" is true. Returning: false\r\n  <Source C++>   core\/object\/object.cpp:1420 @ _disconnect()\r\n  <Pile des appels>Node2D.gd:13 @ _process()\r\n```\r\n\n\n### Steps to reproduce\n\nRun the project below or the code sample above.\n\n### Minimal reproduction project (MRP)\n\n[await_signal_twice_fired.zip](https:\/\/github.com\/godotengine\/godot\/files\/14585959\/await_signal_twice_fired.zip)\r\n","comments":["Aren't you doing something \"illegal\"?\r\n\r\nYou're blocking your `_ready` from running before `_process` has emitted the signal.\r\n`set_process` docs say and probably for good reason\r\n```\r\nAny calls to this before _ready will be ignored.\r\n```\r\n\r\nWhatever called the `_ready` is probably stuck waiting on the `await` as well so maybe it can't clean up or assign things properly?","It's just a minimal code example to reproduce the bug. The bug is not linked to this happening in `_ready` or not. The bug is also not linked to the `set_process(false)`, which I added to remove confusion due to the signal being emitted each frame. This way, it is only emitted once.","The direct cause is that `ONE_SHOT` connections to a signal are disconnected after the connected method is called, not before. Meaning e.g. this results in an infinite loop:\r\n```gdscript\r\nextends Node2D\r\n\r\nsignal my_signal\r\n\r\nfunc _ready():\r\n\tmy_signal.connect(foo, CONNECT_ONE_SHOT)\r\n\tmy_signal.emit()\r\n\r\nfunc foo():\r\n\tmy_signal.emit()\r\n```\r\n\r\nRelated issue: #28857.\r\n\r\nHow does it affect `await`? When awaiting on a signal `GDScriptFunctionState::_signal_callback` which calls `GDScriptFunctionState::resume` is `ONE_SHOT`-connected to such awaited signal:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/61282068f4d59cb48f35ad95391728c58d9008ab\/modules\/gdscript\/gdscript_vm.cpp#L2306\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/61282068f4d59cb48f35ad95391728c58d9008ab\/modules\/gdscript\/gdscript_function.cpp#L137-L167\r\n\r\nMeaning if the awaited signal is emitted again during such `resume()` then it results in calling `resume()` again because the `ONE_SHOT` connection is not yet disconnected.\r\n\r\n---\r\n```gdscript\r\nextends Node2D\r\n\r\nsignal my_signal\r\n\r\nfunc _ready() -> void:\r\n\tfoo()\r\n\tmy_signal.emit() # A\r\n\r\nfunc foo():\r\n\tawait my_signal\r\n\tmy_signal.emit() # B\r\n```\r\nExecution goes something like:\r\n```\r\n`_ready()`\r\n\t`foo()`\r\n\t\t`await my_signal`\r\n\t\t\t`ONE_SHOT` connect resuming `foo` on `my_signal`\r\n\t`my_signal.emit() # A`\r\n\t\tResume `foo`.\r\n\t\t\t`my_signal.emit() # B`\r\n\t\t\t\tResume `foo`.\r\n\t\t\t\t\tError (already removed from `scripts_list` within the first resume).\r\n\t\t\t\tDisconnect resuming `foo` on `my_signal` signal (it's ONE_SHOT and `my_signal.emit() # B` handled all connections).\r\n\t\t\tfoo \"completed\" signal\r\n\t\tError trying to disconnect resuming `foo` on `my_signal` signal (`my_signal.emit() # A` handled all connections).\r\n```\r\nThe in `GDScriptFunctionState::resume` error part:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/61282068f4d59cb48f35ad95391728c58d9008ab\/modules\/gdscript\/gdscript_function.cpp#L190-L212\r\n\r\n---\r\n\r\nHow disconnecting `ONE_SHOT` connections is done:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/61282068f4d59cb48f35ad95391728c58d9008ab\/core\/object\/object.cpp#L1121-L1175","@kleonc Thanks for investigating! @AThousandShips it is still a bug, though, right? Why did you remove the `bug` tag?","The infinite recursion should maybe be considered one, but I'd say emitting a signal from the handler for that same signal should be considered recursion and not allowed, I'd say that's expected behavior\r\n\r\nI'd say the behavior should either be documented, or a blocking check should be added to emitting signals to ensure you don't loop, but allowing this doesn't make sense to me, regardless of one-shot\r\n\r\nI'd say this is the same limitation as:\r\n```gdscript\r\nfunc foo() -> void:\r\n    foo.call_deferred()\r\n\r\nfunc _ready() -> void:\r\n    foo.call_deferred()\r\n```\r\n\r\nI'm not even sure how this could be \"fixed\" in any other way than adding a check that errors if you try to emit a signal from within its own handler","That's what I get for giving a minimal reproducing example :). \r\n\r\nConsider this: I want to wait for the state to get back to `Idle` before updating it to `State1`. There is a `set_state()` setter and a `state_changed` signal:\r\n```\r\nfunc set_state(p_state: State) -> void:\r\n   state = p_state\r\n   state_changed.emit()\r\n```\r\n\r\nnow in my updating function:\r\n\r\n```\r\nfunc wait_and_update_to_state1() -> void:\r\n   while state != Idle:\r\n      await state_changed\r\n   state = State1\r\n```\r\n\r\nThis seems reasonable, right? It gives the above errors.","> That's what I get for giving a minimal reproducing example\r\n\r\nWhat do you mean?\r\n\r\nAs explained above awaiting uses connections, so that's an unfortunate consequence of the same limitation, but I don't think it's solvable to handle this as such, try using deferred calls to update the data perhaps, otherwise I'd say this is a limitation just like call deferred\r\n\r\nBut I'd really say that awaiting something happening and then triggering the same *is* the same issue and would be error prone","The problem of giving minimal reproducing example is that it can often be answered by \"why would even do that anyway?\". I should have given more realistic context from the start.\r\n\r\nIn my opinion, it's not because something is complicated to fix that it's not a bug: I think the above example is a perfectly reasonable usecase for await, and it not working without weird errors being logged constitutes a bug.","> The problem of giving minimal reproducing example is that it can often be answered by \"why would even do that anyway?\"\r\n\r\nThat's not the reason for requesting an MRP, as you can see from the issue template :)\r\n\r\n> In my opinion, it's not because something is complicated to fix that it's not a bug\r\n\r\nAgreed, I never said it wasn't a bug because of that, please read what I say instead of putting words in my moth, act professionally and please read the [code of conduct](https:\/\/godotengine.org\/code-of-conduct)\r\n\r\nI'm going to stop engaging with you and I'll wish you a good day\r\n\r\nTo be clear, using `await` means:\r\n```gdscript\r\nfunc my_func():\r\n    foo_1()\r\n    foo_2()\r\n    await bar\r\n    baz_1()\r\n    baz_2()\r\n```\r\nIs equivalent to:\r\n```gdscript\r\nfunc my_func():\r\n    foo_1()\r\n    foo_2()\r\n    bar.connect(my_func_2, CONNECT_ONE_SHOT)\r\n\r\nfunc my_func_2():\r\n    baz_1()\r\n    baz_2()\r\n```\r\n    ","@AThousandShips\r\nTo clarify: I've only pointed out the direct cause of the reported issue for the current implementation.\r\n\r\nWhether how `ONE_SHOT` connections are being disconnected is intentional or it is a bug itself I don't know, hence why [I've asked about this in the contributors chat](https:\/\/chat.godotengine.org\/channel\/core?msg=kFQYGzuXwBAdojfLN) (I could have mentioned my doubts in my previous comment).\r\n\r\nBut regardless of the current `ONE_SHOT` disconnecting behavior, what's reported here i.e. `await` producing errors was already triaged as a bug by a GDScript team member (**dalexeev**) so please respect this more \/ be more thoughful about changing the labels in the future (I'll leave fixing them to you).\r\n\r\nThe behavior of `await` seems already correct \/ as expected, what's reported here is some superfluous\/unneeded errors.\r\n\r\n---\r\n\r\nSo:\r\n- If the current `ONE_SHOT` disconnecting behavior is a bug then it needs to be fixed. The issue with `await` erroring would then be automatically fixed as a result.\r\n- If the current `ONE_SHOT` disconnecting behavior is not a bug then `await`'s implementation needs to be tweaked to fix the reported issue accordingly.\r\n\r\n---\r\n\r\n@BimDav Your original MRP is fine\/sufficient on its own, no need for a \"real world\" example to classify some easily reproducible behavior as a bug \/ not a bug.","And I gave my arguments in chat too, and explained here, but I'll restore the label, but I thought this through and presented my arguments, so please take that into account (and don't misrepresent my actions) :) also note that the original labelling of this was made without the knowledge of these details, so it's not irrelevant \r\n\r\nI'd say the solution should be using something else for await, and enforcing protection against recursion in signals","> It's just a minimal code example to reproduce the bug.\r\n\r\nJust for information, you can call an async function without waiting for it. So the following example is simpler since it doesn't involve node processing:\r\n\r\n```gdscript\r\nextends Node\r\n\r\nsignal my_signal()\r\n\r\nfunc _ready():\r\n    async_func()\r\n    my_signal.emit()\r\n\r\nfunc async_func():\r\n    await my_signal\r\n    my_signal.emit()\r\n```","_(All below responses are not about the subject of the issue, hence I'm marking this as offtopic myself.)_\r\n\r\n@AThousandShips\r\n\r\n> And I gave my arguments in chat too, and explained here\r\n\r\nGreat, thanks!\r\n\r\n>, but I'll restore the label, but I thought this through and presented my arguments, so please take that into account\r\n\r\nSure I take this into account. But I also take into account that others think things through as well (here \"labelers\"). What I mean is if I see that GDScript\/rendering\/etc. team member\/maintainer marked an issue in the given area as a bug then in case I disagree I'd state my arguments and let them reevaluate the issue. I wouldn't unmark it as a bug on my own because I think it's not a bug etc. (unless that's something really obvious\/trivial; not the case in here). Maybe I'm right that it's not a bug and they'd agree with me (and change labels). But maybe I'm not aware of something else and it is indeed a bug and it's me still not taking something into account. What I'm saying is that in such situations there's no need to rush and \"take over\" by changing the labels. I think we both agree that we don't want labels being changed back and forth whenever some member have different opinion about them.\r\nAnd if this needs clarification: I'm not saying any of this to attack you or something like that. I think that's something you could improve on, hence my suggestion in my previous comment. That's all. :slightly_smiling_face:\r\n\r\n>(and don't misrepresent my actions) :)\r\n\r\nI don't think I did, for sure I haven't tried to do so. So I'm not promising anything. :upside_down_face:\r\n\r\n> also note that the original labelling of this was made without the knowledge of these details, so it's not irrelevant\r\n\r\nNow that's just your assumption that **dalexeev** wasn't aware of these details. And nothing wrong with this! Making some assumptions about others is of course fine.\r\nAnd while I agree you're likely right that he haven't dived deeply into the details at the time of labelling things, I still stand my point - I think it would be better if you'd restrained yourself from changing the labels in a situation like in here.\r\n\r\nI don't expect any response to this from you, I'd say let's not continute this offtopic about meta stuff (or at least not here). That's just my opinion and if you take anything positive from it - great. :slightly_smiling_face:","> enforcing protection against recursion in signals\r\n\r\nI'm absolutely against this, there's nothing wrong with the recursive signals on its own. Sure an infinite recursion is unwanted\/problematic but if it happens then that would be a user error (assuming no in-engine bugs). Just because recursion can be misued doesn't mean it should be disallowed.\r\n\r\nBTW it's already allowed hence changing it I'd consider as a breaking change (as I don't think it's a bug \/ needs a bugfix).\r\n\r\nAnd that's also kinda a separate discussion, even possibly a material for a proposal.","I have a second, similar but different enough case. Here is a sample project: \r\n[resume_after_await.zip](https:\/\/github.com\/godotengine\/godot\/files\/14603203\/resume_after_await.zip)\r\n\r\n```\r\nextends Node2D\r\n\r\nsignal signal1\r\nsignal signal2\r\n\r\n\r\nfunc _ready() -> void:\r\n\tsignal1.connect(_on_signal1_emitted)\r\n\tvar coroutine: = Coroutine.new()  # a RefCounted\r\n\tcoroutine.add_future(signal1)   # coroutine awaits on signal1\r\n\tcoroutine.add_future(signal2)   # coroutine awaits on signal2\r\n\tawait coroutine.join_either()   # signal1 will resume execution here and coroutine will be deleted\r\n\tprint(\"after\")\r\n\r\n\r\nfunc _process(delta: float) -> void:\r\n\tsignal1.emit()\r\n\r\n\r\nfunc _on_signal1_emitted() -> void:\r\n\tsignal2.emit()  # this gives an error as coroutine is deleted\r\n```\r\n\r\nThe issue here seems to be that the receivers list stills contains `coroutine`'s `await` even though it was just deleted."],"labels":["bug","discussion","topic:gdscript"]},{"title":"Opening window-node makes me lose -10fps in compability mode","body":"### Tested versions\n\nReproducible in godot 4.0-4.3 dev4\n\n### System information\n\nWindows 11, Compatibility mode\n\n### Issue description\n\nI try to target my game for older devices or laptops without dGPU. \r\n\r\nMy game opens another window with the window-node (embedded subwindows are off.) Without opening another window the game runs smoothly 60fps. With window the game fps drops to 50fps.\r\n\r\nThis is without opening window:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/81559157\/1c23c268-c999-4596-99fa-a72f2f5ccae9)\r\n\r\nAnd this is with window opened:\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/81559157\/9fa6c9c2-8a0a-40d8-8d7c-667a7f421db7)\r\n\r\nThe code for the opening window is here:\r\n```\r\nextends Control\r\n\r\nconst CONTROL_PANEL: PackedScene = preload(\"res:\/\/window.tscn\")\r\nfunc _ready():\r\n\tvar _scene = CONTROL_PANEL.instantiate()\r\n\t\r\n\t_scene.title = \"Control panel\"\r\n\tself.add_child(_scene)\r\n```\r\nWithout vsync, my fps is around 1400 but will cause a lot of stuttering (Even if I cap fps to 60.\r\n\r\nThis is only reproducible in compatibility mode. Forward+ won't make this. I'm running this with intel 12th igpu for testing purposes. Somehow my RTX 3060 can handle the 2 windows. \r\n\r\nThis problem makes my game not suitable for older laptops even if it's a very simple game.\r\n\r\n\r\n\n\n### Steps to reproduce\n\nRun with igpu and make project compatibility mode. \r\n1. Make the main scene and window scene (Just Godot sprite in both).\r\n\r\nMain scene: \r\n```\r\nconst CONTROL_PANEL: PackedScene = preload(\"res:\/\/window.tscn\")\r\nfunc _ready():\r\n\tvar _scene = CONTROL_PANEL.instantiate()\r\n\t\r\n\t_scene.title = \"Control panel\"\r\n\tself.add_child(_scene)\r\n```\r\n\n\n### Minimal reproduction project (MRP)\n\n[MRP.zip](https:\/\/github.com\/godotengine\/godot\/files\/14585751\/MRP.zip)\r\n","comments":[],"labels":["bug","enhancement","topic:rendering","performance"]},{"title":"shader uniform uint allows negative numbers in inspector panel","body":"### Tested versions\n\nTested in 4.2 canvas_item shader\n\n### System information\n\nGodot v4.2.1.stable - macOS 14.3.0 - GLES3 (Compatibility) - Apple M2 Max - Apple M2 Max (12 Threads)\n\n### Issue description\n\n`uniform uint unsigned_int = 1;`\r\n\r\nunsigned_int cannot set to negative 'inside the shader' which is perfect. But the uniform allows to be to set to a negative integer 'inside the inspector panel', that's a bug. It can be set by typing and by using the decrement arrow.\n\n### Steps to reproduce\n\n1. create a Node2D scene\r\n2. Add a `canvas_item` shader to the root node\r\n3. add a uint uniform\r\n\r\n```\r\nshader_type canvas_item;\r\nuniform uint unsigned_int = 1;\r\n```\r\n\r\n4. go to shader parameter\r\n5a. type a negative number\r\n5b. use arrows to decrease the number below 0\r\n\r\n![Screenshot 2024-03-13 at 10 37 21](https:\/\/github.com\/godotengine\/godot\/assets\/22577709\/ec8b638a-6c6e-4869-a3ea-129c89711c94)\r\n\r\n\r\n\n\n### Minimal reproduction project (MRP)\n\n1. create a Node2D scene\r\n2. Add a `canvas_item` shader to the root node\r\n3. add a uint uniform\r\n\r\n```\r\nshader_type canvas_item;\r\nuniform uint unsigned_int = 1;\r\n```\r\n\r\n4. go to shader parameter\r\n5a. type a negative number\r\n5b. use arrows to decrease the number below 0\r\n\r\n![Screenshot 2024-03-13 at 10 37 21](https:\/\/github.com\/godotengine\/godot\/assets\/22577709\/ec8b638a-6c6e-4869-a3ea-129c89711c94)\r\n","comments":["The type for the info is `INT`:\r\n\r\n![image](https:\/\/github.com\/godotengine\/godot\/assets\/8315986\/22308ff9-4453-4bd5-a8ec-e4aa0a2900fc)\r\n\r\nCan we somehow add a hint to this? \r\n","We could add a range hint for it, at least if it's 32 bits\r\n\r\nShould be as simple as an addition here:\r\nhttps:\/\/github.com\/godotengine\/godot\/blob\/da945ce6266ce27ba63b6b08dc0eb2414594f7cb\/servers\/rendering\/shader_language.cpp#L4110-L4120\r\n\r\nWill test later today ","Works or at least seems to, so will open a PR soon","Great work!\r\n"],"labels":["bug","topic:editor","topic:shaders"]},{"title":"Crash when trying to move stuff around in the UI (File system or the scene and import menus on the left)","body":"### Tested versions\n\n- Reproducible on 4.2.1 and 4.2(stable) releases. I haven't tested any older ones.\n\n### System information\n\nWindows 11 - CPU: Ryzen 5 4600H - GPU: RX5600M - AMD Adrenaline Edition: 24.1.1 - RAM: 16GB\n\n### Issue description\n\nI get a crash on my PC when I try to move stuff around in the FileSystem window on the bottom left of the screen. It takes few attempts to move stuff around and renaming things for it to happen, but it is still a quite consistent crash. I know it's about to crash when the tooltip that appears in the on hovering over FileSystem items gets rendered as a black square with no text inside so it might be related to that but I can't say for sure.\r\n\r\nThis is what I get in the command prompt:\r\nERROR: Error code: VK_ERROR_DEVICE_LOST\r\n   at: (drivers\/vulkan\/vulkan_context.cpp:2683)\n\n### Steps to reproduce\n\n1. Open Godot project\r\n2. Keep moving things to different folders in \"FileSystem\" window - or - keep renaming files there.\r\n3. After around 10 attempts or so it crashes.\r\n\r\nNOTE: There has never been a case where I kept trying for more than a minute and the crash didn't happen\n\n### Minimal reproduction project (MRP)\n\nN\/A","comments":["I tried to reproduce it a few more times and it does some related to the tooltip. When I hover over asset files there (like images) then it works fine, I can see a small thumbnail of that image as well.\r\nBut when I keep trying to hover over a .tscn file or .gd file, that's when it crashes.","Do you have Single Window Mode enabled or disabled in the Editor Settings?\r\nIt would help if you could test, if the problem also occurs with the other setting.","Earlier Single Window Mode was disabled. I tested after enabling that and I'm no longer getting that crash."],"labels":["bug","topic:editor","needs testing","crash","topic:gui"]},{"title":"Fix error on undoing the creation of a node that you are currently renaming","body":"Fixes #87406\r\n\r\nI'm not 100% sure why it was checking if the tree was editing an item and prevented update in this case but it does not seems to be causing any issue to remove it and it fixes the issue. I would really like to have the opinion of the person who first added this check.\r\nIt was added here #44831 to fix #44163. I tested and can't reproduce the bug with my PR. But since the bug stated that it was not happening every time I would really like if people could test it a bit more.\r\n\r\n","comments":["The MRP from #44163 is cursed or something.\r\nAfter reverting #44831 I can still reproduce that issue. It's consistent, but for some reason you need to reload the scene after first rename attempt if you want to trigger the bug again.\r\n\r\nThen with your PR this happens:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/5e6054b8-5ff3-4042-9b7f-e779e6acd9ff\r\n\r\nWhen trying to rename the node, the popup will randomly disappear. Again, it happens in the same MRP and I'm not sure how to reproduce it in another project. Seems like something causes tree update when you select a node."],"labels":["bug","topic:editor","topic:gui"]},{"title":"Add checks for scene type reimports","body":"-Removes duplicate scene that is added during reimport when it is safe to do so.\r\n-Added some safeties to the set_edited_scene() function of the EditorNode script (doesn't check if the signal exists when disconnecting it, and same issue as the next point)\r\n-Adds a safety to the _add_nodes() function of the SceneTreeEditor script (would print an error if the node had its parent changed from the viewport\/null, which can happen in plugin scripts)\r\n\r\nCould be improved by properly selecting the node directly to restore the node tree, instead of using set_edited_scene() on line 1063 of editor_node.cpp (possible slight efficiency gain)\r\n\r\nFixes #87451","comments":[],"labels":["bug","topic:import","crash","topic:3d"]},{"title":"Fix BasisU artifacts on images with resolutions not divisible by 4","body":"Fixes artifacts on mipmaps of BasisU-compressed images whose resolutions aren't multiples of 4.\r\n\r\n|master|PR|\r\n|-------|---|\r\n|![aaa](https:\/\/github.com\/godotengine\/godot\/assets\/53150244\/ce761692-e011-48c4-9ba3-001bed6dabed)|![bbb](https:\/\/github.com\/godotengine\/godot\/assets\/53150244\/001ab3ba-b4e1-41eb-9d5c-e0a7c305acc2)|\r\n\r\n\r\nMRP: [Basisu_not_mul_4_test.zip](https:\/\/github.com\/godotengine\/godot\/files\/14576718\/Basisu_not_mul_4_test.zip)\r\n(Requires reimporting the image).","comments":["I do not agree with this approach. Unless I am misreading the code, it is silently resizing the image by a few pixels which will cause blurry heavily antialiasing artifacts on any text, lines or pixel art. The user will be unaware of why their art is getting corrupted when basisu is used.\r\n\r\nThere is no requirement I can see that textures are rounded to a multiple of 4:\r\nhttps:\/\/registry.khronos.org\/OpenGL-Refpages\/es3.0\/html\/glCompressedTexImage2D.xhtml\r\nTherefore, the correct approach should be to smear average pixels over the last 4x4 blocks in each row and column, to pad the extra blocks.\r\n\r\nIf we are unable to implement this algorithm or there is not enough time to implement for 4.3, it would be better to fail the import (with a user visible warning in the import dock IMHO) than to silently resize it, and perhaps have a dropdown where the user can manually choose to resize to 4 if they want.","This is using the same resizing approach as in etcpak, sans the smearing. I've tried implementing it here, though I couldn't spot any differences between that and the current version of this PR.\r\nIt's also worth noting that BasisU isn't very suitable for pixel art or images with high accuracy.","The processing is now done without upscaling, but with a slight variation of the smearing algorithm from Godot's etcpak implementation."],"labels":["bug","topic:import"]},{"title":"Godot crashes, when you change root node to something unpredictable","body":"### Tested versions\n\n4.2.1 Steam version\n\n### System information\n\nWindows 10\n\n### Issue description\n\nI changed Sprite3D to subviewport, while it was root node and godot just closed instantly\n\n### Steps to reproduce\n\n1. Create scene with Sprite3D as a root node\r\n2. Give it a texture and enable billboard\r\n3. Change Sprite3D to sub-viewport\n\n### Minimal reproduction project (MRP)\n\nIt happened once, I tried to make it again, but everything is fine","comments":["I have checked and it is most likely #78372 which is the culprit and it escalated into a crash now."],"labels":["bug","topic:core","crash"]},{"title":"Add `String.number_format()` method for more readable large numbers","body":"This is used in the editor to display large numbers such as in the View Information panel.\r\n\r\n`TextServer.format_number()` automatically uses this method with the current language (if no language is specified), which benefits many locations in the editor such as the inspector, performance monitors and the 3D editor View Information panel.\r\n\r\nUnit tests have been added for both `String.number_format()` and `TextServer.number_format()`.\r\n\r\n- This closes https:\/\/github.com\/godotengine\/godot-proposals\/issues\/9289.\r\n\r\n## Preview\r\n\r\n### English\r\n\r\n![Screenshot_20240311_224042](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/964f1bc5-2604-4510-8c39-5a5e74ea7026) | ![Screenshot_20240311_235852](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/e2e49a06-992b-4d05-93f3-8076e1d73e7d) | ![Screenshot_20240311_235917](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/25b023d9-6437-4603-8609-cbbac5510b67)\r\n-|-|-\r\n\r\n### French\r\n\r\n| ![Screenshot_20240312_000354](https:\/\/github.com\/godotengine\/godot\/assets\/180032\/e2aa2c56-6ba0-4928-90a6-4fb319dd3a2c) |\r\n|-|","comments":["Does not work well in the inspector:\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/c3d918fb-64a9-4f7c-b2e9-1ebb95e08197\r\n\r\nDouble click will select parts separately and the commas are treated as decimal separators, so if you add an actual separator, the result is invalid.\r\n\r\nIn space-separated locales, the decimal part is simply rejected.\r\n\r\nhttps:\/\/github.com\/godotengine\/godot\/assets\/2223172\/c0e04f12-ee53-4926-8628-4ae8996a758b\r\n","Somewhat related on the editor side I think:\r\n* https:\/\/github.com\/godotengine\/godot\/pull\/80541","> Does not work well in the inspector:\r\n\r\nI recall it working correctly in my testing (the displayed number during editing didn't have any separators). I think it should work this way preferably, but we should make it so EditorSpinSlider and SpinBox accept numbers with various separators nonetheless for better usability.\r\n\r\nTo handle situations where we have both `,` and `.` separators in the same string, the decimal separator is the one that comes last in the string.","`TextServerAdvanced::_format_number` isn't doing anything like this (adding separators), it's only converting western Arabic numerals to the language specific numeral system. So it should be either modified to do so or not use it as fallback.\r\n\r\nFor the reference: ICU have full number formatting methods, but we do not build ICU internationalization part and do not include relevant databases (nor sure if it's possible to include only part relevant to the number formatting, full database is ~36 MB).\r\n\r\nEdit: decimal format strings are part of main locale files, so not counting extra code that should be added it will add at least 8MB if data if used directly. So it probably should be a custom implementation, similar to the one used for numeral system conversion."],"labels":["enhancement","topic:core"]},{"title":"Win32Exception on Ubuntu when opening c# script via external editor","body":"### Tested versions\r\n\r\nTested on Godot v4.2.1.stable.mono (b09f793f5)\r\n\r\n### System information\r\n\r\nGodot v4.2.1.stable.mono (b09f793f5) - Freedesktop SDK 23.08 (Flatpak runtime) - X11 - Vulkan (Mobile) - dedicated AMD Radeon RX 6700 XT (RADV NAVI22) () - AMD Ryzen 7 7700X 8-Core Processor (16 Threads)\r\n\r\n### Issue description\r\n\r\nI want to use neovim in order to edit c# scripts.\r\nI made a bash script which will open a terminal and then run neovim from there.\r\nWhen I click a c# script to open it I get the Win32Exception.\r\n\r\nExpectation:\r\nrun the bash script\r\n\r\nFull error for completeness:\r\n```error\r\n  \/run\/build\/godot-tools\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/NativeInterop\/ExceptionUtils.cs:112 - System.ComponentModel.Win32Exception (2): An error occurred trying to start process 'home\/tycho\/Programming\/Games\/connect_godot.sh' with working directory '\/home\/tycho\/Programming\/Games\/Clicker'. No such file or directory\r\n     at System.Diagnostics.Process.ForkAndExecProcess(ProcessStartInfo startInfo, String resolvedFilename, String[] argv, String[] envp, String cwd, Boolean setCredentials, UInt32 userId, UInt32 groupId, UInt32[] groups, Int32& stdinFd, Int32& stdoutFd, Int32& stderrFd, Boolean usesTerminal, Boolean throwOnNoExec)\r\n     at System.Diagnostics.Process.StartCore(ProcessStartInfo startInfo)\r\n     at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)\r\n     at GodotTools.Utils.OS.RunProcess(String command, IEnumerable`1 arguments) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/Utils\/OS.cs:line 241\r\n     at GodotTools.GodotSharpEditor.OpenInExternalEditor(Script script, Int32 line, Int32 col) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/GodotSharpEditor.cs:line 253\r\n     at GodotTools.GodotSharpEditor.InvokeGodotClassMethod(godot_string_name& method, NativeVariantPtrArgs args, godot_variant& ret) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/Godot.SourceGenerators\/Godot.SourceGenerators.ScriptMethodsGenerator\/GodotTools.GodotSharpEditor_ScriptMethods.generated.cs:line 160\r\n     at Godot.Bridge.CSharpInstanceBridge.Call(IntPtr godotObjectGCHandle, godot_string_name* method, godot_variant** args, Int32 argCount, godot_variant_call_error* refCallError, godot_variant* ret) in \/run\/build\/godot-tools\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/Bridge\/CSharpInstanceBridge.cs:line 24\r\n```\r\n### Steps to reproduce\r\n\r\nMake new project, add a scene and attach c# script.\r\n\r\nin editor settings under dotnet:\r\nExternal Editor = Custom\r\nCustom Exec Path = path to bash file. example: \"\/home\/username\/remote_godot.sh\r\nCustom Exec Path Args = {project}\r\n\r\n\r\nThe Bash file\r\n```sh\r\n#!\/bin\/dash\r\n\r\necho $1\r\n\r\n# If there is no second argument from godot\r\nif [ \"$1\" ==  \"$0\" ]; then\r\n    gnome-terminal -- nvim\r\nelse\r\n    gnome-terminal -- nvim $1\r\nfi \r\n```\r\nAlso add execution rights to this file\r\nin terminal: `chmod +x path_to_file.sh`\r\n\r\n### Minimal reproduction project (MRP)\r\n\r\n[project.zip](https:\/\/github.com\/godotengine\/godot\/files\/14569588\/project.zip)\r\n","comments":["Hello \ud83d\ude42  \r\nCan you double-check the path configured in `dotnet\/editor\/custom_exec_path_args`? The error hints that it might lack a `\/` at the beginning:\r\n```\r\nAn error occurred trying to start process 'home\/tycho\/Programming\/Games\/connect_godot.sh'\r\n```","I think I copied something wrong when writing this, the same happens with the `\/` in the beginning\r\nHere is the error when I do that:\r\n```\r\n\/run\/build\/godot-tools\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/NativeInterop\/ExceptionUtils.cs:112 - System.ComponentModel.Win32Exception (2): An error occurred trying to start process '\/home\/tycho\/programming\/games\/connect_godot.sh' with working directory '\/home\/tycho\/programming\/games\/Clicker'. No such file or directory\r\n     at System.Diagnostics.Process.ForkAndExecProcess(ProcessStartInfo startInfo, String resolvedFilename, String[] argv, String[] envp, String cwd, Boolean setCredentials, UInt32 userId, UInt32 groupId, UInt32[] groups, Int32& stdinFd, Int32& stdoutFd, Int32& stderrFd, Boolean usesTerminal, Boolean throwOnNoExec)\r\n     at System.Diagnostics.Process.StartCore(ProcessStartInfo startInfo)\r\n     at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)\r\n     at GodotTools.Utils.OS.RunProcess(String command, IEnumerable`1 arguments) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/Utils\/OS.cs:line 241\r\n     at GodotTools.GodotSharpEditor.OpenInExternalEditor(Script script, Int32 line, Int32 col) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/GodotSharpEditor.cs:line 253\r\n     at GodotTools.GodotSharpEditor.InvokeGodotClassMethod(godot_string_name& method, NativeVariantPtrArgs args, godot_variant& ret) in \/run\/build\/godot-tools\/modules\/mono\/editor\/GodotTools\/GodotTools\/Godot.SourceGenerators\/Godot.SourceGenerators.ScriptMethodsGenerator\/GodotTools.GodotSharpEditor_ScriptMethods.generated.cs:line 160\r\n     at Godot.Bridge.CSharpInstanceBridge.Call(IntPtr godotObjectGCHandle, godot_string_name* method, godot_variant** args, Int32 argCount, godot_variant_call_error* refCallError, godot_variant* ret) in \/run\/build\/godot-tools\/modules\/mono\/glue\/GodotSharp\/GodotSharp\/Core\/Bridge\/CSharpInstanceBridge.cs:line 24\r\n```\r\n\r\nEdit : typo     \r\n     \r\n"],"labels":["bug","topic:dotnet"]},{"title":"Update `TileMap::get_cell_tile_data` to mention that the TileData is from TileSet not per cell","body":"Fixes https:\/\/github.com\/godotengine\/godot\/issues\/89349\r\n\r\nHowever I feel that I still did not express it quite clear, feel free to make suggestions!\r\n\r\n<!--\r\nPlease target the `master` branch in priority.\r\n\r\nRelevant fixes are cherry-picked for stable branches as needed by maintainers.\r\n\r\nTo speed up the contribution process and avoid CI errors, please set up pre-commit hooks locally:\r\nhttps:\/\/docs.godotengine.org\/en\/latest\/contributing\/development\/code_style_guidelines.html\r\n-->\r\n","comments":["> I feel that I still did not express it quite clear, feel free to make suggestions!\r\n\r\nI made some attempts at language I felt was a bit clearer. But feel free to disregard my suggestions if you feel they weren't an improvement. \ud83d\ude05"],"labels":["enhancement","documentation"]}]