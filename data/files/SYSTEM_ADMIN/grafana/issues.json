[{"title":"Fix InteractiveTable: React, less hooks rendered than previous render","body":"## What is this feature?\r\n\r\nThere was an error state introduced where pagination could be enabled or disabled based on data length change.\r\n\r\n## Why do we need this feature?\r\n\r\nIf using pagination and your implementation allows for filtering of the table data. An exception would be through due to react rendering more (or less) hooks than the previous render.\r\n\r\n## Which issue(s) does this PR fix?\r\n\r\n- resolves: https:\/\/github.com\/grafana\/grafana-adaptive-metrics-app\/issues\/306\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"Chore: InfluxQL stream parser improvements","body":"**What is this feature?**\r\n\r\nSmall improvements, removing unnecessary checks, not making any significant performance improvements but make it a bit easier to read the code.\r\n\r\nNote: stream parser is behind the feature flag `influxqlStreamingParser`","comments":[],"labels":["datasource\/InfluxDB","area\/backend","no-backport","no-changelog"]},{"title":"Y axis width control on all x=time panels","body":"some panels dont support y axis width control via override, which makes them impossible to align vertically with ones that do.\r\n\r\nStatusHistory\r\nStateTimeline\r\nHeatmap\r\n\r\nStatusHistory is a bit different cause it grows its visible time range to fit the edge cells, so we should add control for allowing them to be cut in half as well? not great, but maybe.","comments":["Happy to see some movement.\r\nMeanwhile I would like to make a proposal. For multiple panels with the same Y-Axis, the information conveyed would be redundant. \r\nHow about this?\r\nOnly one Y-Axis for two different panels.\r\n![Shared Y-Axis for multiple chartareas](https:\/\/github.com\/grafana\/grafana\/assets\/64785859\/b2f6e8c2-ed5f-4590-a1b4-6020d7fc6b12)\r\n\r\n\r\nThis is, how it looked before:\r\n![125912128-cfa1a035-fa11-44d2-be4d-f28682170638](https:\/\/github.com\/grafana\/grafana\/assets\/64785859\/f8c1f58a-8439-4a13-b681-90e2322281cc)\r\n","This is a grafana screenshot:\r\n![Other example spreaded](https:\/\/github.com\/grafana\/grafana\/assets\/64785859\/fb057a19-2543-4826-b335-48299b803f8e)\r\n\r\nIn Windows Paint I reduced the Y-Axis.\r\n![Other example one Y](https:\/\/github.com\/grafana\/grafana\/assets\/64785859\/42751ee3-85eb-4de6-bd56-e39bdffae8e4)\r\nIt is just a detail, but it makes it more easy to understand. And the is no Y-Axis redundancy."],"labels":["area\/panel\/heatmap","area\/panel\/state-timeline","area\/panel\/status-history","internal"]},{"title":"Min\/Avg\/Max Chart","body":"**Why is this needed**:\nSay you are monitoring a database cluster and would like to see an overview of the latencies of all nodes. A Candlestick chart could usually be used for that. However, Grafana only really sports those for financial and trend analyses, requiring a timeseries. I dont want to have different timeseries. I want one number-triplet (min\/avg\/max) per node, side by side.\n\n**What would you like to be added**:\nA new version of the candlestick chart which has one handle per series\/label instead of using timedata. An alternative would be an adjustment to existing charts (gauges e.g.) to allow showcasing more than one metric per widget. I know bar charts could already show this side by side, but thats quite verbose and not visually compact enough imo, we have dozens of nodes per cluster.\n\n**Who is this feature for?**\nStandard end users; data analysts.","comments":["sounds like you're asking for a BoxPlot?\r\n\r\ni think we need one in the core and i'd like to add one this year. there are external panel plugins that can do this if you need it in the short term.","I wasn't sure what the English Term is so I used the Candlechart which most closely resembles it. Glad to hear that you have it on your roadmap, in the meanwhile I will check out the plugins. Thank you"],"labels":["area\/dataviz"]},{"title":"Canvas: Infinite pan mode connection glitch","body":"When infinite panning mode is enabled and a connection is targeting the root element (scene), panning \/ zooming causes the connection to infinitely scale (along side the underlying canvas \ud83d\ude2c)\r\n\r\n![Mar-22-2024 13-21-45](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/008286b9-9030-4e16-a04b-342f4ae5d470)\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: Infinite panning zoom breaks when holding down control key","body":"When holding down the control key and zooming out, the canvas content can disappear forever (well until a refresh)\r\n\r\nThe behavior works as normal for just zooming out without the control key held down.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/1418924\/d1037e21-864a-4a60-8497-23c8cf63fa84","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"XYChart2: Removing last \/ only remaining series in the editor does not clear form","body":"![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/46704691-a7e2-4b67-bc7b-fbdc09960cad)","comments":[],"labels":["type\/bug","area\/panel\/xychart","internal"]},{"title":"XYChart2: Mapped size and color fields should use global\/shared ranges","body":"we can add a toggle for local-only behavior later, but the default should be shared range","comments":[],"labels":["type\/bug","area\/panel\/xychart","internal"]},{"title":"XYChart2: Some legend options don't work","body":"visibility off, calc values\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/c96367cb-9f48-49f6-889b-070b17258470)","comments":[],"labels":["type\/bug","area\/panel\/xychart","internal","area\/legend"]},{"title":"XYChart2: Mapped size field does not show up in the tooltip","body":"size is mapped to \"Price\" field and is absent from tooltip:\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/c16f8a1b-e943-4304-a088-93ddf0a1989b)\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/d3673d96-4c43-4ed8-b382-e56c0abf26f2)","comments":[],"labels":["type\/bug","area\/panel\/xychart","area\/tooltip","internal"]},{"title":"XYChart2: Choose better series name for single dataset","body":"x is sometimes shared, so we use the y field to identify each series, and usually take the name from it.\r\n\r\nfor datasets that do not contain frame names or labels to identify their \"group\" (e.g. from a transform), this doesnt really work well. this should probably be named generically \"Series 1\".\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/d3673d96-4c43-4ed8-b382-e56c0abf26f2)\r\n\r\nthe tricky question here is how would users change this name (by override of Y field displayName) without also making the tooltip say\r\n\r\n```\r\no MySeries\r\n----------\r\nLat\r\nMy Series\r\n```\r\n\r\ninternally, we use any common prefix and\/or suffix of each y field as the series name, but when there is only one y field it becomes tricky. if we have a frame name that's different than y field name, we can use that, in this case it's the CSV file name:\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/aa4452fc-0e0c-4996-8b05-398e0b48f57f)\r\n\r\nwe have some code in place for more advanced naming customization without resorting to manual mode but that's for future:\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/cdb64cb7ebb5b0f3ba7a86f8e84c259353e6ca13\/public\/app\/plugins\/panel\/xychart\/v2\/types2.ts#L11-L26\r\n","comments":[],"labels":["type\/bug","area\/panel\/xychart","area\/tooltip","internal","area\/legend"]},{"title":"Canvas: Connection bug when anchors line up perfectly","body":"When attempting to modify a connection that is drawn between two anchors of exactly the same absolute x or y coordinates, an error occurs because division by zero leads to svg attributes of infinity: \r\n\r\nWhen creating a new vertex...\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/plugins\/panel\/canvas\/components\/connections\/Connections.tsx#L527\r\n\r\nand\r\n\r\nWhen modifying an existing vertex...\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/plugins\/panel\/canvas\/components\/connections\/Connections.tsx#L406-L407\r\n\r\nOne solution would be to set the coordinate to zero instead of infinity to avoid the render error; however, this would not allow the connector shape to be modified in any meaningful way. Instead, I think invoking a minimum width and height of the relative vertex coordinate system would be a better approach. This would also reduce unexpected behavior when elements are being moved around.","comments":[],"labels":["type\/bug","area\/panel\/canvas"]},{"title":"XYChart2: Make min\/max point size conditional on size field mapping","body":"the point size slider is the common\/shared point size when there is no size field mapped. this size can be overridden per series y field. the min\/max point size inputs only apply to fields that have a size field mapped. we should hide them if no size field is mapped in any series.\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/cc9331ee-4dba-4831-9e81-7d87de396a8f)\r\n\r\nsimilar behavior for color field. we currently don't expose the color controls at all and expect people to rely on y series overrides for static colors. if a color field is mapped we rely on overrides for the mapped color field (scheme, value mappings, thresholds). this might be tackled as part of https:\/\/github.com\/grafana\/grafana\/issues\/85025.","comments":[],"labels":["area\/panel\/xychart","internal"]},{"title":"XYChart2: Point size control does not reflect save model until modified","body":"the actual rendered size is 5\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/441ee2f1-2707-45ae-a582-b789ae51e6c0)","comments":[],"labels":["type\/bug","area\/panel\/xychart","internal"]},{"title":"Datatrails: hide empty breakdown panels, improve loading status","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nDetect panels with no data, and omit them from being shown.\r\nThis avoids \"No data\" panels, and the confusing `<unspecified>` No data panel.\r\n\r\nA status message indicates that there are no results for the current selection.\r\n\r\nLoading states have been improved somewhat.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"XYChart2: Strip common parts from series labels in tooltips with partitioned datasets","body":"we should remove the shared series name portion (in the header and legend) from each tooltip label (USA)\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/f01b7e80-6005-4d9d-b025-1389c989deb2)","comments":[],"labels":["type\/bug","area\/panel\/xychart","area\/tooltip","internal"]},{"title":"XYChart2: Color field mapping not implemented \/ crashes","body":"![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/9ec44324-56ed-4181-83ad-3abb07aff77b)","comments":[],"labels":["type\/bug","area\/panel\/xychart","internal"]},{"title":"Docs: Fix canvas G11 updates","body":null,"comments":[],"labels":["type\/docs","area\/panel\/canvas","no-backport","no-changelog"]},{"title":"PDF and Reporting tab not added in ShareModal","body":"Enterprise tabs are not added in Scenes ShareModal.\nThose tabs are added in the old arch via `addDashboardShareTab` method","comments":[],"labels":["type\/bug","area\/dashboard","area\/frontend","area\/scenes","team\/grafana-dashboards"]},{"title":"Bug Bash 11","body":"```[tasklist]\r\n### Table\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85020\r\n```\r\n\r\n```[tasklist]\r\n### XYChart2\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85025\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85033\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85035\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85029\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85027\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85032\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85034\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85036\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85030\r\n```\r\n```[tasklist]\r\n### Canvas\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85037\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85038\r\n- [ ] TODO: See refinements \/ feedback section of: https:\/\/github.com\/grafana\/grafana\/issues\/81347\r\n```\r\n","comments":["@adela-almasan please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/epic","internal"]},{"title":"Table: Prevent showing full size images on hover","body":"\n\nhttps:\/\/github.com\/grafana\/grafana\/assets\/88068998\/3c79db2c-552b-4da9-aa73-fe0948ae933e\n\n","comments":[],"labels":["type\/bug","area\/panel\/table"]},{"title":"Canvas: Limit connection vertex radius to numeric fields","body":"See[ this comment](https:\/\/github.com\/grafana\/grafana\/pull\/84873#discussion_r1536013211) for context.","comments":[],"labels":["area\/panel\/canvas"]},{"title":"Alerting: Deprecate single alert rule provisioning endpoints in favor of group endpoints","body":"**What is this feature?**\r\n\r\nThis PR marks all single rule endpoints as deprecated, in anticipation of shifting to groups as the working unit in the alerting API.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of alerting API\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/docs","area\/alerting","area\/backend","area\/frontend","add to changelog"]},{"title":"EmptyState: Add `initial` variant","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFor https:\/\/github.com\/grafana\/grafana\/issues\/84516\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","area\/grafana\/ui","no-backport","no-changelog"]},{"title":"Canvas: Optimize math for connection arc calculations","body":"For [canvas connection corner radius](https:\/\/github.com\/grafana\/grafana\/pull\/84873), math can be simplified, optimized, and the code organization can be improved.","comments":[],"labels":["area\/panel\/canvas"]},{"title":"InfluxDB: Append influxql query response to data frame as custom metadata","body":"**What is this feature?**\r\n\r\nThis PR allows users to receive raw query response from influxdb in custom metadata of first frame.\r\nThe functionality is behind the feature flag `influxdbReturnInfluxQLResponse`. \r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["datasource\/InfluxDB","type\/docs","area\/backend","area\/frontend","no-backport","no-changelog"]},{"title":"Provisioning: Fix regression when dashboardProvisioner is accessed before being initialised","body":"\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n`dashboardProvisioner` used to be initialised [during provisioning Run()](https:\/\/github.com\/grafana\/grafana\/blob\/86a2a1a19bfc929f70ef0e11e46a84f35d1f0e42\/pkg\/services\/provisioning\/provisioning.go#L235) but [GetAllowUIUpdatesFromConfig()](https:\/\/github.com\/grafana\/grafana\/blob\/86a2a1a19bfc929f70ef0e11e46a84f35d1f0e42\/pkg\/services\/provisioning\/provisioning.go#L280) - that is called when [fetching](https:\/\/github.com\/grafana\/grafana\/blob\/e138ae3eb91a3650597658a07b0d6fc8b60cc2b6\/pkg\/api\/dashboard.go#L199) or [updating](https:\/\/github.com\/grafana\/grafana\/blob\/e138ae3eb91a3650597658a07b0d6fc8b60cc2b6\/pkg\/api\/dashboard.go#L432) a provisioned dashboard through the HTTP API - didn't check if it was not initialised yet.\r\n\r\n**Why do we need this feature?**\r\n\r\nFixes flaky [test](https:\/\/drone.grafana.net\/grafana\/grafana-enterprise\/68560\/2\/9) because of:\r\n<details><summary>Details<\/summary>\r\n<p>\r\n\r\n```\r\n(string) (len=8525) \"{\\n  \\\"error\\\": \\\"runtime error: invalid memory address or nil pointer dereference - \/opt\/homebrew\/opt\/go\/libexec\/src\/runtime\/panic.go:261 (0x100c8f5d7)\\\\n\\\\tpanicmem: panic(memoryError)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/runtime\/signal_unix.go:881 (0x100c8f5a4)\\\\n\\\\tsigpanic: panicmem()\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/services\/provisioning\/provisioning.go:284 (0x104ac5384)\\\\n\\\\t(*ProvisioningServiceImpl).GetAllowUIUpdatesFromConfig: return ps.dashboardProvisioner.GetAllowUIUpdatesFromConfig(name)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/api\/dashboard.go:432 (0x104b31c0b)\\\\n\\\\t(*HTTPServer).postDashboard: allowUiUpdate = hs.ProvisioningService.GetAllowUIUpdatesFromConfig(provisioningData.Name)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/api\/dashboard.go:378 (0x104b316f7)\\\\n\\\\t(*HTTPServer).PostDashboard: return hs.postDashboard(c, cmd)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/api\/routing\/routing.go:19 (0x104b1b277)\\\\n\\\\t(*HTTPServer).registerRoutes.func2.13.Wrap.6: if res := handler(c); res != nil {\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/api\/response\/web_hack.go:40 (0x101e14687)\\\\n\\\\twrap_handler.func3: handle(reqCtx(w, r))\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x101e07d0f)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:131 (0x101e07cd0)\\\\n\\\\tmwFromHandler.func1.1: h.ServeHTTP(mrw, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/tests\/testinfra\/testinfra.go:69 (0x10560a37f)\\\\n\\\\tStartGrafanaEnv.func1.1: next.ServeHTTP(w, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/services\/contexthandler\/contexthandler.go:137 (0x104b7155f)\\\\n\\\\t(*ContextHandler).Middleware-fm.(*ContextHandler).Middleware.func1: next.ServeHTTP(w, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/render.go:44 (0x101e08783)\\\\n\\\\tRenderer.func1.1: next.ServeHTTP(rw, req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:137 (0x101e07db7)\\\\n\\\\tmwFromHandler.func1.1: next.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/csrf\/csrf.go:66 (0x1040585a3)\\\\n\\\\t(*CSRF).Middleware.func1.1: next.ServeHTTP(w, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/recovery.go:180 (0x104b4d3ab)\\\\n\\\\t(*HTTPServer).addMiddlewaresAndStaticRoutes.Recovery.func4.1: next.ServeHTTP(w, req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/loggermw\/logger.go:72 (0x10405944b)\\\\n\\\\t(*loggerImpl).Middleware.func1.1: next.ServeHTTP(rw, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/request_metrics.go:75 (0x102b29b3b)\\\\n\\\\tRequestMetrics.func1.1: next.ServeHTTP(w, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/request_tracing.go:88 (0x104b4deff)\\\\n\\\\t(*HTTPServer).addMiddlewaresAndStaticRoutes.RequestTracing.func2.1: next.ServeHTTP(w, req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/middleware\/requestmeta\/request_metadata.go:66 (0x104b707db)\\\\n\\\\t(*HTTPServer).addMiddlewaresAndStaticRoutes.SetupRequestMetadata.func1.1: next.ServeHTTP(w, r)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2166 (0x100fd04c7)\\\\n\\\\tHandlerFunc.ServeHTTP: f(w, r)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/context.go:52 (0x101e065bf)\\\\n\\\\t(*Context).run: h.ServeHTTP(ctx.Resp, ctx.Req)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/router.go:155 (0x101e09e53)\\\\n\\\\t(*Router).Handle.func1: c.run()\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/router.go:211 (0x101e0a8c3)\\\\n\\\\t(*Router).ServeHTTP: leaf.handle(rw, req, nil)\\\\n\/Users\/josefk\/go\/src\/github.com\/grafana\/grafana\/pkg\/web\/macaron.go:163 (0x101e081bf)\\\\n\\\\t(*Macaron).ServeHTTP: m.Router.ServeHTTP(rw, req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:3137 (0x100fd38db)\\\\n\\\\tserverHandler.ServeHTTP: handler.ServeHTTP(rw, req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/net\/http\/server.go:2039 (0x100fcf097)\\\\n\\\\t(*conn).serve: serverHandler{c.server}.ServeHTTP(w, w.req)\\\\n\/opt\/homebrew\/opt\/go\/libexec\/src\/runtime\/asm_arm64.s:1222 (0x100cb27d3)\\\\n\\\\tgoexit: MOVD\\\\tR0, R0\\\\t\/\/ NOP\\\\n\\\",\\n  \\\"message\\\": \\\"Internal Server Error - please inspect Grafana server log for details\\\"\\n}\\n\"\r\n```\r\n\r\n<\/p>\r\n<\/details> \r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"Alerting: Evaluation quick buttons","body":"**What is this feature?**\r\n\r\nAdds a quick selection of evaluation interval for rule groups and the evaluation duration.\r\n\r\nPending period quick options will depend on the group interval\r\n<img width=\"543\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/6d66a9f9-eb91-4ef9-82b9-07de271361a9\">\r\n\r\nQuick options for the group interval will depend on `[unified_alerting] min_interval` setting.\r\n<img width=\"574\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/473a85ff-adaf-4365-a20d-16af73de9ecb\">\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\nStill needs a test for `getOptions()` in `FolderAndGroup`","comments":["Perhaps add button `None` to pending period?","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/168812\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/alerting","area\/frontend","add to changelog","\ud83c\udf50-programming"]},{"title":"EmptyState: use `EmptyState` search variant everywhere in core","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n- uses the search variant of `EmptyState` in lots of places in core\r\n- adds a couple of translations \r\n\r\n| before | after |\r\n| --- | --- |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/a0cffc13-c4de-4857-bd58-7b31aa11c9bd) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/2051fb9a-c722-4e31-81c2-392075c30056) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/6acd205f-a019-40c1-9299-9ad029fd0993) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/3e6d75cc-9d3c-401e-8b0f-10a1f2b8a73a) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/1a69c1f7-b632-419c-bc27-61a16508f9da) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/88f4218c-6ae1-4737-bee9-9796050f3d34) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/62b27080-dd03-488b-8eb2-385e66774641) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/18fe5f61-6917-4b76-ad6a-6154923eb5fa) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/78b7db7f-d0be-4e46-9a7b-c6549d271e13) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/6d386395-272d-417c-af85-96a29c839c68) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/031c20fa-af45-4366-8878-19256a0d34d9) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/e8a5165e-d68e-43be-b94b-e06948ffa8f7) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/af4674dd-a2b1-4d88-88c6-2111c46f47bf) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/c8d53389-6557-493c-9ca4-3196c123ed85) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/51327fc1-1dff-4a74-b403-816e41fb093e) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/d008b8db-81e6-4929-8620-4cd5d1527440) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/6e42f83c-5c6d-4d1d-8017-c6f5c94bc958) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/b50df851-dad2-4c45-af29-f95f1ffd7cb3) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/8494e73e-ce47-468c-8d0d-96ae70695661) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/72e844ef-ad03-43a0-bc37-9736774c6766) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/b0790ef2-8f71-44db-9b3c-419d060087d5) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/4e428eba-ce3d-4333-9d72-b9e8830d8a8d) |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/926541d8-410a-450e-b14c-eb964487b241) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/20999846\/c59a2356-1977-434c-b057-a6e081295b74) |\r\n\r\n**Why do we need this feature?**\r\n\r\n- consistency\r\n\r\n**Who is this feature for?**\r\n\r\n- everyone\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFor https:\/\/github.com\/grafana\/grafana\/issues\/84516\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"I18n: Download translations from Crowdin","body":":robot: Automatic download of translations from Crowdin.\n\nSteps for merging:\n  1. A quick sanity check of the changes and approve. Things to look out for:\n    - No changes in the English file. The source of truth is in the main branch, NOT in Crowdin.\n    - Translations maybe be removed if the English phrase was removed, but there should not be many of these\n    - Anything else that looks 'funky'. Ask if you're not sure.\n  2. Approve & (Auto-)merge. :tada:\n\nIf there's a conflict, close the pull request and **delete the branch**. A GH action will recreate the pull request.\nRemember, the longer this pull request is open, the more likely it is that it'll get conflicts.\n","comments":[],"labels":["area\/frontend","area\/internationalization","no-backport","no-changelog"]},{"title":"Alerting: Implement SaveAndApplyDefaultConfig in the remote Alertmanager struct","body":"This PR implements the `SaveAndApplyDefaultConfig()` method in the remote Alertmanager struct. This method sends the default Grafana Alertmanager configuration over to the remote Alertmanager. ","comments":[],"labels":["area\/alerting","area\/backend","no-backport","no-changelog"]},{"title":"Dashboards: Fix an issue where the dashboard would unmount and then mount again causing requests to cancel under some circumstances","body":"**What is this feature?**\r\n\r\nReplaces #84978\r\n\r\nThe dashboard page you are trying to navigate will unmount and mount again when navigating between two dashboards. If the user is on a slow connection we might end up with a race condition where the variable request from the dashboard we're trying to load, is canceled by itself.\r\n\r\nThis eliminates the extra mount.","comments":[],"labels":["area\/dashboard","area\/frontend","no-backport","no-changelog"]},{"title":"Update Service Account table to use InteractiveTable component","body":"With the recent updates to the User and Teams list tables, we should look to update the Service Account list table to also use the `InteractiveTable` component","comments":[],"labels":["area\/frontend","saga design system"]},{"title":"Chore: Bump golangci-lint v1.57.1","body":"**What is this feature?**\r\n\r\nWhat this PR done:\r\n- Bump golangci-lint version to `v1.57.1`.\r\n- Disable `goconst` since it is creating too much noise and false positives. Check [this](https:\/\/drone.grafana.net\/grafana\/grafana\/168563) if you want to see it.\r\n- Handle security linting erros. I wrote comments for each one. Please check them below.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo be able to define rules much easier way like in this PR https:\/\/github.com\/grafana\/grafana\/pull\/84991\r\n\r\n**Who is this feature for?**\r\n\r\ngrafana developers\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/chore","area\/backend","no-backport","no-changelog"]},{"title":"BrowseDashboards: Add subpath to URLs on Browse Dashboards page","body":"Fixes #74275 ","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84992) <br\/>All committers have signed the CLA.","Hi @butkovv - I believe that this problem is there (unfortunately it's fairly common - we need a better way to solve this), but I'm having trouble reproducing and would appreciate some tips for reproducing:\r\n\r\n - Are you able to tell me which link doesn't work correctly with the sub path?\r\n - Which Grafana version do you get this one?\r\n - Do you have the `nestedFolders` or `newBrowseDashboards` feature toggles enabled in your config.ini? (you can check the `grafanaBootData.settings.featureToggles` object in the browser JS console)\r\n\r\nA screen recording would help. I've tried to follow reproduction in https:\/\/github.com\/grafana\/grafana\/issues\/74275 but wasn't able to reproduce\r\n","Hmm. I can reproduce this in 10.1.5, but not in 10.2.0. We've made a lot of improvements to how folders and breadcrumbs work during this period, so it's hard to know what exactly fixed it.","> Hi @butkovv - I believe that this problem is there (unfortunately it's fairly common - we need a better way to solve this), but I'm having trouble reproducing and would appreciate some tips for reproducing:\r\n> \r\n> * Are you able to tell me which link doesn't work correctly with the sub path?\r\n> * Which Grafana version do you get this one?\r\n> * Do you have the `nestedFolders` or `newBrowseDashboards` feature toggles enabled in your config.ini? (you can check the `grafanaBootData.settings.featureToggles` object in the browser JS console)\r\n> \r\n> A screen recording would help. I've tried to follow reproduction in #74275 but wasn't able to reproduce\r\n\r\nYeah, sorry about that, kinda mislead by mentioning that issue because I thought it wasn't also fixed yet. There's another issue related to when you open a dashboard that is in nested directory while serving Grafana from subpath. See the attached video for reproduction on Grafana v11.0.0-pre.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/52626407\/93e2f79e-5d35-46e3-9944-321243634875\r\n\r\n"],"labels":["type\/bug","area\/frontend","add to changelog","pr\/external"]},{"title":"Store and restore selected layout from local storage","body":"We should store the selected layout in local storage so users can create a new exploration and keep the layout from the previous exploration. Alternatively we can look at what the most recent trail had selected when initialising the layout for an exploration.\n\n![Image](https:\/\/github.com\/grafana\/grafana\/assets\/4313971\/829b55ce-33ad-466b-8961-d6945338fff3)\n\n","comments":["@adrapereira please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["internal","area\/datatrails"]},{"title":"Update configure-tempo-data-source.md","body":"Typo:\r\n\r\ntraceToProfiles => tracesToProfiles\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n\r\nFixes a typo in docs\r\n\r\n**Who is this feature for?**\r\n\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [X] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84986) <br\/>All committers have signed the CLA."],"labels":["type\/docs","pr\/external"]},{"title":"Updating alert rule group with a duplicate value returns 5xx error, should be 4xx","body":"This is a follow-up of https:\/\/github.com\/grafana\/grafana\/pull\/76396, which should also target `\/api\/ruler\/grafana\/api\/v1\/rules\/<Alert folder>`\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/3528218\/a6230d28-222d-4ebc-96d1-f19d92f71a11)\r\n","comments":[],"labels":["type\/bug","area\/alerting","area\/backend","internal"]},{"title":"Config: Fix spelling of `postgres` (#84979)","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nFixes typos in comments of the default configuration.\r\n\r\n**Why do we need this feature?**\r\n\r\nComments in the default configuration shouldn't contain typos.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers using PostgreSQL as database.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #84979\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84980) <br\/>All committers have signed the CLA.","Thanks @cschug !"],"labels":["pr\/external","no-changelog"]},{"title":"Add onClick behaviour to links to new tooltips","body":"**What is this feature?**\r\n\r\nThis PR adds a call to the `onClick` function of a link if it exists. It replicates the behaviour of the previous tooltips (it was using the `DataLink` component, and handling the link's `onClick` ([ref](https:\/\/github.com\/grafana\/grafana\/blob\/b20da139ad0fe96299321c347baa4da36860ea54\/packages\/grafana-ui\/src\/components\/DataLinks\/DataLinkButton.tsx#L22)))\r\n\r\n**Why do we need this feature?**\r\n\r\nWe need this feature to be able to override the link and behaviour when clicking on it, since we usually have the information related to that point in there.\r\n\r\n**Who is this feature for?**\r\n\r\nIt replicates existing behaviour in the old tooltips, so for everyone relying on the `onClick` attribute of the link.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend"]},{"title":"Datasources: Add fixed width to name field in config editor","body":"**What is this feature?**\r\n\r\nBy fixating the width of this field, we at least give data sources a chance to align label width in the fields used in the config editor so that it looks better. \r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","add to changelog"]},{"title":"DS\/APIServer: use struct to manage handlers rather than interface","body":"We have been passing around an interface that implements all handlers -- but it would be better to pass in a struct that only has the supported ones.  (not everything implements resource!)\r\n\r\nCurrently this works for the standalone mode -- but the global `plugins.Client` implements all methods, so reflection does not help much and we expose endpoints that do not really exist \ud83d\ude22 eg:\r\nhttp:\/\/localhost:3000\/apis\/graphite.datasource.grafana.app\/v0alpha1\/namespaces\/default\/connections\/P6798F81BB5440721\/health\r\n\r\n<img width=\"1017\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/705951\/b64c8a62-eef3-4dd7-873c-5ad3b8162ec3\">\r\n","comments":[],"labels":["datasource\/Prometheus","area\/backend","no-backport","no-changelog"]},{"title":"Canvas: Consider adding support for rotating a group of elements","body":"Currently when selecting a group of elements the rotatable control appears but does not actually apply any rotation to the selected elements.\r\n\r\nLook into supporting this functionality. The movie below show cases what this might look like using the `rotateGroup` event\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/22381771\/ad3b99e5-8a12-47d1-bb5d-b21d451a5279\r\n\r\n","comments":[],"labels":["area\/panel\/canvas","internal"]},{"title":"Canvas: Improve resizing UX for rotated elements","body":"Resizing rotated elements is a little wonky, especially when the element isn't rotated 0 or 180 degrees\r\n\r\nWe should address this and improve this UX\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/22381771\/a8f599ec-fdbb-4356-87ab-9cfbe613bb43\r\n\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: Rotation control can be hidden behind dimensions","body":"When an element is rotated around 180 degrees the rotation control can be hidden \/ rendered useless as it can go behind the element's dimensions\r\n\r\n![Screenshot 2024-03-21 at 2 54 10\u202fPM](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/8559edf1-2423-4d57-8263-19534c977d1e)\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: When changing element type with a rotated element moveable control box glitches","body":"This is relatively minor, but when changing the element type of a rotated element, the moveable control box \"glitches\" and does not update to the new default non rotated element's shape\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/22381771\/095e55af-becf-4030-be00-48143089b7f2\r\n\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: Connection anchors are not aligned for rotated elements","body":"Connection anchors are not rendering as expected for rotated elements. They should align with the bounds of the element similar to the moveable control box\r\n\r\nAlso, investigate connections behavior when attached to a rotated element and ensure this is expected \/ ok UX\r\n\r\n<img width=\"211\" alt=\"Fix connection lines to match rotation\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/12deabbf-64a7-49db-997f-932d8b6ca0da\">\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: Support all constraints for rotated elements","body":"Currently only top, bottom, left, and right constrained elements have a good UX when rotated\r\n\r\nBetter support elements with top+bottom, left+right, center, and scale constraints.\r\n\r\nAlso figure out glitch when zoomed in with moving all constraint types (when zoomed in the drag event isn't being applied quite correctly)\r\n\r\n","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Scopes: Name relationship objects *binding","body":"After talking to @ryantxu we agreed that objects use to track relationships should be named `*Binding` similar to [RoleBinding](https:\/\/kubernetes.io\/docs\/reference\/access-authn-authz\/rbac\/#rolebinding-example) in k8s.\r\n\r\nThis only changes the backend so we need to change the frontend objects and paths. @bfmatei would you be able to do that next week? ","comments":[],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"docs: update status history panel","body":"**What is this feature?**\r\n\r\nUpdates to the state timeline docs to include:\r\n- how to configure a status history (state timeline video added since it is quite similar)\r\n- supported data formats and example\r\n- when to use a status history\r\n\r\n**Why do we need this feature?**\r\n\r\nTo explain to our users how to configure a status history easily and when to use it.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana OSS and Cloud users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/docs","no-changelog"]},{"title":"Chore: Add github action to check  go.work.sum","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAdds an action to check for modifications to `go.work.sum`.\r\n\r\n**Why do we need this feature?**\r\n\r\nChanges to `go.work.sum` are being missed in PRs that modify dependencies.\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"Nodegraph: Fix issue with rendering single node","body":"If a single node without any edges was passed to node graph it would error out:\r\n```\r\nUncaught (in promise) TypeError: Cannot read properties of undefined (reading 'obj')\r\n    at layout (layoutMsagl.worker.js:55:1)\r\n    at layoutMsagl.worker.js:15:1\r\n```\r\nThis happened because for the specific DOT syntax used by the layout engine, nodes were extracted from the edges which does not work for single node graphs or for graphs where some nodes have 0 edges.","comments":[],"labels":["area\/frontend","add to changelog","area\/panel\/node-graph"]},{"title":"Task: Remove publicDashboardUid from dashboard meta","body":"After datasource transformation support, we decided to rely on `config.publicDashboardAccessToken` to know if the rendered component is a public dashboard or not. \nWe need to delete meta `publicDashboardUid`, which is not filled with any value and generates confusion","comments":[],"labels":["area\/backend","area\/frontend","type\/debt","area\/public-dashboards"]},{"title":"ModalsContext: Unify modals context and manager","body":"Problems\r\n* In a few places we need to render a modal or drawer outside the current react components context (or from some state function). These are mostly legacy edge cases. In these legacy edge cases we use [ModalsContext](https:\/\/github.com\/grafana\/grafana\/blob\/main\/packages\/grafana-ui\/src\/components\/Modal\/ModalsContext.tsx) and the appEvents ShowModalReactEvent and ShowConfirmModalEvent. \r\n* ModelsContext ModalRoot was rendered outside ReactRouter https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/AppWrapper.tsx#L125 \r\n* The ShowModalReactEvent rendered by [ModalManager](https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/core\/services\/ModalManager.ts#L100) renders the modal outside the ReactRouter context, grafana context (separate theme context), separate react root\r\n* Modals shown with ShowModalReactEvent are not closed when a user clicks a link inside the modal \/ drawer to another page \r\n\r\nThis PR \r\n* Have ModalManager now render modals inside the main react app via a new ModalsContextProvider (implemented in core). \r\n* Remove ModalManager as the events are now handled by ModalsContextProvider \r\n* Have ModalsContextProvider clear any open modal\/drawer state if pathname change. Since these modals are a bit of of an edge case (we usually do not need to use ShowModalReactEvent to show a modal) I think this is fine. If we have the need for a modal\/drawer that is to be shown across many different react routes then that modal\/drawer can probably be rendered directly inside the route instead of relying on ModalsContext. \r\n* Deprecate old ModalsProvider exported from grafana\/ui\r\n\r\n\r\n","comments":["nice - this has been a source of bugs in the past. glad to get this out of here"],"labels":["area\/frontend"]},{"title":"Repeating a row which contains repeated panels causes an error in the console","body":"If you create a dashboard, add a repeated panel to it and then a row to hold that panel, and then repeat that row with the same variable used for the panel it crashes in the console, but UI seems to work fine.","comments":[],"labels":["type\/bug","internal","team\/grafana-dashboards"]},{"title":"Update dependency rudder-sdk-js to v2.48.5","body":"[![Mend Renovate](https:\/\/app.renovatebot.com\/images\/banner.svg)](https:\/\/renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Change | Age | Adoption | Passing | Confidence |\n|---|---|---|---|---|---|\n| [rudder-sdk-js](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/blob\/main\/packages\/analytics-v1.1\/README.md) ([source](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/tree\/HEAD\/packages\/analytics-v1.1)) | [`2.48.3` -> `2.48.5`](https:\/\/renovatebot.com\/diffs\/npm\/rudder-sdk-js\/2.48.3\/2.48.5) | [![age](https:\/\/developer.mend.io\/api\/mc\/badges\/age\/npm\/rudder-sdk-js\/2.48.5?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![adoption](https:\/\/developer.mend.io\/api\/mc\/badges\/adoption\/npm\/rudder-sdk-js\/2.48.5?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![passing](https:\/\/developer.mend.io\/api\/mc\/badges\/compatibility\/npm\/rudder-sdk-js\/2.48.3\/2.48.5?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![confidence](https:\/\/developer.mend.io\/api\/mc\/badges\/confidence\/npm\/rudder-sdk-js\/2.48.3\/2.48.5?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) |\n\n---\n\n> [!WARNING]\n> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.\n\n---\n\n### Release Notes\n\n<details>\n<summary>rudderlabs\/rudder-sdk-js (rudder-sdk-js)<\/summary>\n\n### [`v2.48.5`](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/blob\/HEAD\/packages\/analytics-v1.1\/CHANGELOG.md#2485-2024-03-22)\n\n[Compare Source](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/compare\/rudder-sdk-js@2.48.4...rudder-sdk-js@2.48.5)\n\n##### Dependency Updates\n\n-   `@rudderstack\/analytics-js-common` updated to version `2.48.4`\n\n##### Bug Fixes\n\n-   replace polyfillio with fastly ([#&#8203;1664](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/issues\/1664)) ([24d3a0b](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/commit\/24d3a0b383f58b79fc1970d0c74761de30bb3f4a))\n\n### [`v2.48.4`](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/blob\/HEAD\/packages\/analytics-v1.1\/CHANGELOG.md#2484-2024-03-21)\n\n[Compare Source](https:\/\/togithub.com\/rudderlabs\/rudder-sdk-js\/compare\/rudder-sdk-js@2.48.3...rudder-sdk-js@2.48.4)\n\n##### Dependency Updates\n\n-   `@rudderstack\/analytics-js-common` updated to version `2.48.3`\n\n<\/details>\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Enabled.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase\/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase\/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https:\/\/www.mend.io\/free-developer-tools\/renovate\/). View repository job log [here](https:\/\/developer.mend.io\/github\/grafana\/grafana).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4yNjEuMCIsInVwZGF0ZWRJblZlciI6IjM3LjI2MS4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->\n","comments":["### \u26a0 Artifact update problem\n\nRenovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.\n\n\u267b Renovate will retry this branch, including artifacts, only when one of the following happens:\n\n - any of the package files in this branch needs updating, or \n - the branch becomes conflicted, or\n - you click the rebase\/retry checkbox if found above, or\n - you rename this PR's title to start with \"rebase!\" to trigger it manually\n\nThe artifact failure details are included below:\n\n##### File name: yarn.lock\n\n```\n! Corepack is about to download https:\/\/repo.yarnpkg.com\/4.1.0\/packages\/yarnpkg-cli\/bin\/yarn.js\n\n```\n\n"],"labels":["area\/frontend","dependencies","no-changelog"]},{"title":"Query Library API: Tags","body":null,"comments":[],"labels":["area\/query-library"]},{"title":"Query Library API: Folders","body":null,"comments":[],"labels":["area\/query-library"]},{"title":"Query Library API: Migration endpoint for starred query history","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Migrate existing starred queries","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Sharing a link to Explore for a query template","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Add a query template from a query row","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Add `jest-watch-typeahead` and use for better filtering of jest tests","body":"**What is this feature?**\r\n\r\nAdds [jest-watch-typeahead](https:\/\/www.npmjs.com\/package\/jest-watch-typeahead) to our jest config so you can filter the tests to run in watch mode without passing in the full path.\r\n\r\n(Recording from the package docs:)\r\n![watch](https:\/\/user-images.githubusercontent.com\/574806\/40672937-25dab91a-6325-11e8-965d-4e55ef23e135.gif)\r\n\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nImproved dev experience running tests :)\r\n\r\n**Who is this feature for?**\r\n\r\nFrontend devs!\r\n","comments":["LGTM but I'll defer approval to @grafana\/frontend-ops :)"],"labels":["area\/frontend","no-changelog"]},{"title":"Query Library: Private query templates","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Query Library API: Paginated results","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Query Library API: Star a query template","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Duplicating a query template","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Starring a query template","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Explore: Edit query template name and description","body":null,"comments":[],"labels":["area\/explore","area\/query-library"]},{"title":"Alerting: Implement GetStatus in the remote Alertmanager struct","body":"This PR implements the `GetStatus()` method in the remote Alertmanager struct.\r\n\r\nThe signature of this method has been changed for the Alertmanager interface, we now need to pass a context and return an error alongside the status.\r\n\r\nCurrently, `GetStatus` only returns the Alertmanager configuration for the internal Alertmanager. I replicated this behavior for the remote one, so instead of calling the same method on the Mimir client we retrieve the remote Alertmanager configuration and put it inside a `GettableStatus` struct.","comments":[],"labels":["area\/alerting","area\/backend","no-backport","no-changelog","kata:am_unify"]},{"title":"Kick-start: Requirements elicitation","body":"- Data source plugins should be able to register kick start your queries (will become powerful with proper templating)\r\n- Configure which folders or tags are used to pull kick-start queries\r\n- UI or application extension to load a kick start query from a query row","comments":[],"labels":["area\/query-library"]},{"title":"docs: update text panel documentation","body":"**What is this feature?**\r\n\r\nUpdates to the text panel docs to include:\r\n- when to use a text panel\r\n- quick configuration guide\r\n\r\n**Note**: I have not linked any video tutorial since text panel is quite simple to configure.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo explain to our users how to configure a text panel easily and when to use it.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana OSS and Cloud users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["This PR must be merged before a backport PR will be created.","This PR must be merged before a backport PR will be created.","This PR must be merged before a backport PR will be created."],"labels":["type\/docs","no-changelog","backport v10.2.x","backport v10.3.x","backport v10.4.x"]},{"title":"Remove repeating responsibility from LibraryVizPanel","body":"Based on https:\/\/github.com\/grafana\/grafana\/pull\/84710, removes the responsibility of panel repeats from `LibraryVizPanel` to `DashboardGridItem`. Removes the weird `this._parent = undefined` asignment in the `LibraryVizPanel` that I think may be problematic.","comments":["@dprokop This works when loading dashboards with repeated lib panels but doesn't work with the `Add library widget` when loading a repeated library panel. This happens because the activation handler runs when the gridItem is created and at that point the body isn't a libVizPanel but a AddLibPanelWidget and thus never subscribes to library panel state and updates with the actual repeated lib panel. I'm looking into this as well but wanted to let you know, maybe you have a quicker idea about it. \r\n\r\nEdit: Think it's because we don't perform the repeat after setting the repeat related state in the DashboardGridItem [here](https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/features\/dashboard-scene\/scene\/LibraryVizPanel.tsx#L115) when the library viz panel is loaded"],"labels":["area\/frontend","no-backport","no-changelog","area\/scenes"]},{"title":"Pa11y: Fix a11y issues on \/alerting\/list","body":"In our CI pipeline we use Pa11y in the step test-a11y-frontend which checks a number of URLs. There are currently 7 a11y errors on the page \/alerting\/list which need to get fixed (see list below). \n\n**For more information on Pa11y:** https:\/\/github.com\/grafana\/grafana\/blob\/72bf647dc648676f6b17838a626a4ee5154d1366\/contribute\/style-guides\/accessibility.md#pull-requests-that-introduce-accessibilitya11y-errors\n\n> **Errors in http:\/\/grafana-server:3001\/alerting\/list:**\n> \n>  \u2022 Buttons must have discernible text\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/button-name?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    section:nth-child(5) > div:nth-child(2) > div > button)\n> \n>    <button class=\"css-1hnzyll-button\" type=\"button\" aria-expanded=\"false\"\n>    data-testid=\"data-testid group-collapse-toggle\"><svg\n>    xmlns=\"http:\/\/www.w3.org\/2...<\/button>\n> \n>  \u2022 Buttons must have discernible text\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/button-name?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    section:nth-child(5) > div:nth-child(3) > div > button)\n> \n>    <button class=\"css-1hnzyll-button\" type=\"button\" aria-expanded=\"false\"\n>    data-testid=\"data-testid group-collapse-toggle\"><svg\n>    xmlns=\"http:\/\/www.w3.org\/2...<\/button>\n> \n>  \u2022 IDs of active elements must be unique\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/duplicate-id-active?application=axeAPI)\n> \n>    (#Layer_1)\n> \n>    <svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\n>    viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" class=\"css-1d3xu67-Icon\"><path\n>    d=\"M12,14a1.25,1.25,0,1,0...<\/svg>\n> \n>  \u2022 Elements must have sufficient color contrast\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/color-contrast?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    div:nth-child(1) > div > div:nth-child(2) > span)\n> \n>    <span class=\"css-73o1g6\">Errors loading rules<\/span>\n> \n>  \u2022 Elements must have sufficient color contrast\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/color-contrast?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    div:nth-child(1) > div > div:nth-child(2) > div > div)\n> \n>    <div>Failed to load the data source ...<\/div>\n> \n>  \u2022 Elements must have sufficient color contrast\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/color-contrast?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    div:nth-child(1) > div > div:nth-child(2) > div > div > a)\n> \n>    <a href=\"\/datasources\/edit\/gdev-prometheus\"\n>    class=\"css-1av9vxy\">gdev-prometheus<\/a>\n> \n>  \u2022 Elements must have sufficient color contrast\n>    (https:\/\/dequeuniversity.com\/rules\/axe\/4.4\/color-contrast?application=axeAPI)\n> \n>    (#pageContent > div:nth-child(3) > div > div > div:nth-child(2) > div >\n>    div:nth-child(1) > div > div:nth-child(2) > div > button > span)\n> \n>    <span class=\"css-1riaxdn\">1 more error<\/span>","comments":[],"labels":["area\/alerting","type\/accessibility","type\/ci"]},{"title":"Saga-icons: Switch to ESM","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nBuild the icons package as an ESM module.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\n","comments":[],"labels":["area\/frontend","no-changelog"]},{"title":"Canvas: SVG elements transparent option glitch","body":"When applying transparent background color to svg based elements the element is filled in as black instead of the expected transparent color based on the current theme.\r\n\r\n![Screenshot 2024-03-20 at 5 24 19\u202fPM](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/999a0ce7-770d-4fdd-a38a-2aec3c9e8739)\r\n![Screenshot 2024-03-20 at 5 24 28\u202fPM](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/d83559e6-c954-4544-ae7f-abb3cb548e51)\r\n\r\n\r\n![Transparent color doesn't seem to work as expected](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/7b3761b2-cdb4-447b-9a4c-5b7dd9536e06)\r\n![expected behavior for transparent color](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/e4dab2da-4c84-4802-9da3-6d61e4afb3bb)\r\n","comments":["May be related to https:\/\/github.com\/grafana\/grafana\/issues\/84869"],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Canvas: Element background glitch when switching from rectangle to svg based element","body":"Changing element from rectangle to one of the \"svg\" elements (ellipse, triangle, etc) leads to a strange glitch where the rectangle background styles are not cleared. This is due to the data styles being skipped on data update for svg based elements which leads to existing data styles persisting.\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/22381771\/7d1007cb-b85f-4737-b7be-3db33bfdb16c\r\n\r\n\r\n\r\nSee https:\/\/github.com\/grafana\/grafana\/pull\/84205#discussion_r1533026355 for context","comments":[],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Storage: Support continue at specified resource version","body":"One of the problem we have with fully-supporting the list+watch model is the behavior when entities change during a multi-page list operation. The current implementation is a standard \"best effort\" offset-based list, which does not allow the caller to retrieve all pages of the list, then start a watch operation at the resource version of the list while being guaranteed that they have built a consistent view of the system and have not missed any events.\r\n\r\nThe approach works as follows:\r\n\r\nFirst, we query the entity table to find out the highest resource_version and the count of records that match the specified keys (we only use keys because they are fixed for the lifetime of the resource). These 2 values give us enough information to know whether the database changes, if a resource is added or updated then the new rv will be higher, and if a resource is deleted then the count will be lower.\r\n\r\nIf we do not have a continue token, we can run the query as usual and return the results, including a continue token that encodes the rv and count values. We also set the resource version of the list result to the max rv.\r\n\r\nIf we have a continue token that matches the max_rv and cnt values, then we set the offset and run the query as usual, since we know no entities that could be returned by the list response have changed.\r\n\r\nUp until this point, we have not touched the entity_history table.\r\n\r\nIf however the max_rv or cnt values *do not* match, we know that for a consistent read we need to instead query the entity_history table for the row for each entity that has the highest resource version that isn't higher than the resource version in the continue token. This is more expensive, but will give us a consistent view of the database.","comments":[],"labels":["area\/backend"]},{"title":"Table panel: Add Apply to entire row option to colored text cell","body":"**What is this feature?**\r\n\r\nThis PR adds the ability to apply the color text cell to an entire row. This matches the capability of the color background cell.\r\n\r\n**Why do we need this feature?**\r\n\r\nBeing able to color text by row is in additional useful expansion of the ability to format the table rows.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of the table panel.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend"]},{"title":"Scopes: Add type filter","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend"]},{"title":"Alerting: Add annotation with explanation for NoData \/ Error alert instances","body":"An idea that occurred to me since a lot of users seem to be confused about `NoData` and `Error` alert instances \u2013 should we add an annotation with some explanation for what these mean and how those can be handled?\r\n\r\nWe could link to a documentation topic or have the explanation embedded in the annotation.","comments":[],"labels":["area\/alerting","area\/backend","internal"]},{"title":"Canvas: The border of the SVG element clipped outside the wrapper","body":"Right now border of the new canvas shapes cut if the goes outside of the wrapper.\r\n<img width=\"607\" alt=\"Screenshot 2024-03-18 at 18 09 19\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1418924\/b369506e-9839-4c35-a52b-1f68756b797a\">\r\n","comments":["Additional context on this issue, it seems that ellipse and cloud is also impacted by this. Also for the cloud element it seems that default range is not behaving at the same scale as our other SVGs\r\n\r\n![general strangeness with borders; uneven for triangle : parallelogram, maxed out for cloud seems over the top](https:\/\/github.com\/grafana\/grafana\/assets\/22381771\/d8552c6e-02be-4d57-ad04-0965be2e7a6b)\r\n","Additional context [from original PR](https:\/\/github.com\/grafana\/grafana\/pull\/84205#pullrequestreview-1946765573)"],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Repeated panels are always rendered with 24 grid units width","body":"This seems like an invalid approach given that we have changed the repeating behavior. \r\n\r\nThe 24 grid units width made sense in the old architecture, where the repeating was crating individual grid items. Now **repeated group is an individual, resizable grid item** and we should not set the width to 24 grid units.\r\n\r\nOpen for discussion.\r\n\r\n","comments":[],"labels":["type\/bug","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"MySQL: snapshot tests","body":"test only change.\r\n\r\nwe add snapshot-based tests, very similar to what we do in postgres.\r\n\r\nhow to test:\r\n- if the CI job succeeds, it's ok","comments":[],"labels":["datasource\/MySQL","area\/backend","no-changelog"]},{"title":"Canvas: Make connection point match the shape","body":"Right now connection points located on shape wrapper, like this:\r\n<img width=\"290\" alt=\"Screenshot 2024-03-20 at 17 23 41\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1418924\/be73e77f-5efa-4242-9eeb-346486a93adb\">\r\n\r\nbut it would be better to match connection point with actual shape, e.g. like this:\r\n<img width=\"198\" alt=\"Screenshot 2024-03-20 at 17 24 27\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1418924\/31c20ebe-2dbf-4baf-9fea-8d42d060aea5\">\r\n","comments":[],"labels":["area\/panel\/canvas","internal"]},{"title":"Canvas: New SVG elements don't support background image position","body":"New SVG elements don't react to `Image size` changes.\r\n\r\n<img width=\"575\" alt=\"Screenshot 2024-03-20 at 17 17 32\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1418924\/4f2a92cf-abff-478d-866c-8bee5035a682\">\r\n","comments":["This is caused by the logic skipping applying data css that is causing https:\/\/github.com\/grafana\/grafana\/issues\/84869"],"labels":["type\/bug","area\/panel\/canvas","internal"]},{"title":"Alerting: Add state history polling interval","body":"**What is this feature?**\r\n\r\nRefresh the alert state history on re-focus, re-connect and on a 10-second interval to allow users to observe the history of an alert rule without having to manually refresh the page and switch tabs.","comments":[],"labels":["area\/alerting","area\/frontend","add to changelog"]},{"title":"CloudWatch: Improve metric label parsing","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nUpdates parsing labels from queries. Instead of checking for dimension values in the default returned label, make AWS format it for us in a way where we can consistently parse the label values out without searching for substrings.\r\n\r\n**Why do we need this feature?**\r\nWe have some issues with incorrectly returned labels from Cloudwatch, because we were just searching for known dimension values as substrings in the returned label from AWS, which just takes all of the dimensions with multiple values and concatenates them with spaces. This becomes an issue if any of the dimension values are substrings of the other dimension values, as it may set a label to one value when it means another.\r\n\r\n**Who is this feature for?**\r\nThis feature is for anyone who uses CloudWatch query labels for expressions or alerting.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #79809\r\n\r\n**Special notes for your reviewer:**\r\nI wasn't sure if it was necessary, but I added it behind a feature flag because its sort of a big logic change.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/docs","datasource\/CloudWatch","area\/backend","area\/frontend","add to changelog","no-backport"]},{"title":"Scenes powered dashboards enhacements","body":"\r\n```[tasklist]\r\n### Improvements\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81079\r\n- [ ] Standarize buttons across setting pages\r\n- [ ] Unifiy list views in the Dashboard settings\r\n- [ ] Remove link\/variables\/annotations uses a delete prompt to confirm\r\n- [ ] One can view variables dependency graph\r\n```\r\n","comments":[],"labels":["type\/epic","area\/scenes","team\/grafana-dashboards"]},{"title":"Menu hiding when panel has no title","body":"The panel menu hides behind when:\r\n* The panel is the first one in the dashboard, hides behind the fixed controls (variables, timepicker, etc.)\r\n* The panel is below another panel (this also seems to be the case in the previous architecture)\r\n\r\nI atatch a video with the issue. The first part is with the Scenes toggle off.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/74534993\/09724af4-b47b-41c7-b53b-8345f79aecd1\r\n\r\n","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","area\/panel-chrome","team\/grafana-dashboards","area\/dashboards\/panel"]},{"title":"Menu hiding when panel has no title","body":null,"comments":["@natellium please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["internal"]},{"title":"ci(docs): Disable tag requirement for pushing release docs","body":"This is a temporary workaround and will be swiftly undone once the underlying issue has been fixed.","comments":["Thanks :) Coming to think of it, I think we should probably remove the whole tag-trigger too, because otherwise ref_name might have some weird behaviour on beta\/preview tags :)","nvm, turns out that's already covered by the docs-target action \ud83d\ude42 \r\n\r\nhttps:\/\/github.com\/grafana\/grafana-github-actions\/pull\/213"],"labels":["type\/ci","no-backport","no-changelog"]},{"title":"Annotations are not shown in the panel edit unless refreshed","body":"When annotations are a result of a data query, they are incorrectly combined with annotations provided from the data layers.\r\n\r\nIn the attached dashboard, there's a panel with annotations provided by the Raw Frames response. Annotations are correctly shown in the dashboard, but when going into panel edit, the query provided anotations are not visible, unless one clicks refresh. However, disabling dashboard annotations in the dashboard settings makes them appear normally. \r\n\r\nThere must be some bug in the way annotations are merged in the SceneQueryRunner. Mind this wos working OK in the old architecture.\r\n\r\n<details>\r\n\r\n<summary>dashboard.json<\/summary>\r\n\r\n```json\r\n{\r\n  \"annotations\": {\r\n    \"list\": [\r\n      {\r\n        \"builtIn\": 1,\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"target\": {\r\n          \"limit\": 100,\r\n          \"matchAny\": false,\r\n          \"tags\": [],\r\n          \"type\": \"dashboard\"\r\n        },\r\n        \"type\": \"dashboard\"\r\n      }\r\n    ]\r\n  },\r\n  \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\": 0,\r\n  \"id\": 2456,\r\n  \"links\": [],\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {},\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"custom\": {\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            }\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 14,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 2,\r\n      \"maxDataPoints\": 100,\r\n      \"options\": {\r\n        \"calculate\": false,\r\n        \"cellGap\": 1,\r\n        \"color\": {\r\n          \"exponent\": 0.5,\r\n          \"fill\": \"dark-orange\",\r\n          \"mode\": \"scheme\",\r\n          \"reverse\": false,\r\n          \"scale\": \"exponential\",\r\n          \"scheme\": \"Spectral\",\r\n          \"steps\": 64\r\n        },\r\n        \"exemplars\": {\r\n          \"color\": \"rgba(255,0,255,0.7)\"\r\n        },\r\n        \"filterValues\": {\r\n          \"le\": 1e-9\r\n        },\r\n        \"legend\": {\r\n          \"show\": true\r\n        },\r\n        \"rowsFrame\": {\r\n          \"layout\": \"auto\"\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"showColorScale\": false,\r\n          \"yHistogram\": false\r\n        },\r\n        \"yAxis\": {\r\n          \"axisPlacement\": \"left\",\r\n          \"reverse\": false\r\n        }\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"grafana-testdata-datasource\",\r\n            \"uid\": \"PD8C576611E62080A\"\r\n          },\r\n          \"rawFrameContent\": \"[\\n  {\\n    \\\"schema\\\": {\\n      \\\"refId\\\": \\\"A\\\",\\n      \\\"meta\\\": {\\n        \\\"type\\\": \\\"heatmap-rows\\\", \\n        \\\"typeVersion\\\": [\\n          0,\\n          1\\n        ],\\n        \\\"custom\\\": {\\n          \\\"resultType\\\": \\\"matrix\\\"\\n        }\\n      },\\n      \\\"name\\\": \\\"0.005\\\",\\n      \\\"fields\\\": [\\n        {\\n          \\\"name\\\": \\\"Time\\\",\\n          \\\"type\\\": \\\"time\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"time.Time\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"interval\\\": 60000\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.005\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.005\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.005\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.01\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.01\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.01\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.025\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.025\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.025\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.05\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.05\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.05\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.1\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.1\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.1\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.25\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.25\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.25\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"0.5\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"0.5\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"0.5\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"1.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"1.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"1.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"2.5\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"2.5\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"2.5\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"5.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"5.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"5.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"10.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"10.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"10.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"25.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"25.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"25.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"50.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"50.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"50.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"100.0\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"100.0\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"100.0\\\"\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"+Inf\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"labels\\\": {\\n            \\\"le\\\": \\\"+Inf\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"displayNameFromDS\\\": \\\"+Inf\\\"\\n          }\\n        }\\n      ]\\n    },\\n    \\\"data\\\": {\\n      \\\"values\\\": [\\n        [\\n          1699408500000,\\n          1699408560000,\\n          1699408620000,\\n          1699408680000,\\n          1699408740000,\\n          1699408800000,\\n          1699408860000,\\n          1699408920000,\\n          1699408980000,\\n          1699409040000,\\n          1699409100000,\\n          1699409160000,\\n          1699409220000,\\n          1699409280000,\\n          1699409340000,\\n          1699409400000,\\n          1699409460000,\\n          1699409520000,\\n          1699409580000,\\n          1699409640000,\\n          1699409700000,\\n          1699409760000,\\n          1699409820000,\\n          1699409880000\\n        ],\\n        [\\n          125.86666666666667,\\n          123.73333333333333,\\n          124.80000000000001,\\n          124.80000000000001,\\n          124.80000000000001,\\n          126.93333333333334,\\n          125.86666666666667,\\n          124.80000000000001,\\n          125.86666666666667,\\n          127.99715561876403,\\n          126.93333333333334,\\n          128,\\n          126.93333333333334,\\n          124.80000000000001,\\n          126.93333333333334,\\n          126.93333333333334,\\n          124.80000000000001,\\n          126.93333333333334,\\n          124.80000000000001,\\n          124.80000000000001,\\n          111.76815384615385,\\n          87.94351621463927,\\n          82.4377482072613,\\n          77.92061131919219\\n        ],\\n        [\\n          9.599999999999994,\\n          11.733333333333334,\\n          10.666666666666657,\\n          10.666666666666657,\\n          10.666666666666657,\\n          8.533333333333331,\\n          9.599999999999994,\\n          10.666666666666657,\\n          9.599999999999994,\\n          7.466500744427918,\\n          8.533333333333331,\\n          7.466666666666669,\\n          8.533333333333331,\\n          10.666666666666657,\\n          8.533333333333331,\\n          8.533333333333331,\\n          10.666666666666657,\\n          8.533333333333331,\\n          10.666666666666657,\\n          10.666666666666657,\\n          9.959538461538457,\\n          5.6464211100863935,\\n          13.551410664207339,\\n          22.58568444034556\\n        ],\\n        [\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          15.999644452345507,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          14.933333333333337,\\n          14.933333333333337,\\n          14.933333333333337,\\n          14.933333333333337,\\n          16,\\n          14.385999999999996,\\n          10.38600000000001,\\n          6.775705332103669,\\n          2.2585684440345517\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          1.0666666666666629,\\n          1.0666666666666629,\\n          1.0666666666666629,\\n          1.0666666666666629,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          15.999644452345507,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          16,\\n          14.385999999999996,\\n          10.385999999999996,\\n          9.034273776138235,\\n          9.034273776138235\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          -2.842170943040401e-14,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ],\\n        [\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0,\\n          0\\n        ]\\n      ]\\n    }\\n  },\\n  {\\n    \\\"schema\\\": {\\n      \\\"refId\\\": \\\"A\\\",\\n      \\\"meta\\\": {\\n        \\\"typeVersion\\\": [\\n          0,\\n          0\\n        ],\\n        \\\"custom\\\": {\\n          \\\"resultType\\\": \\\"exemplar\\\"\\n        },\\n        \\\"dataTopic\\\": \\\"annotations\\\"\\n      },\\n      \\\"name\\\": \\\"exemplar\\\",\\n      \\\"fields\\\": [\\n        {\\n          \\\"name\\\": \\\"Time\\\",\\n          \\\"type\\\": \\\"time\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"time.Time\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"Value\\\",\\n          \\\"type\\\": \\\"number\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"float64\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"__name__\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"cluster\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"container\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"instance\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"job\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"le\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"method\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"namespace\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"pod\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"prometheus_job\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"route\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"status_code\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        },\\n        {\\n          \\\"name\\\": \\\"traceID\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {\\n            \\\"links\\\": [\\n              {\\n                \\\"title\\\": \\\"Query with grafanacloud-nativehistogram-traces\\\",\\n                \\\"url\\\": \\\"\\\",\\n                \\\"internal\\\": {\\n                  \\\"query\\\": {\\n                    \\\"query\\\": \\\"${__value.raw}\\\",\\n                    \\\"queryType\\\": \\\"traceql\\\"\\n                  },\\n                  \\\"datasourceUid\\\": \\\"grafanacloud-traces\\\",\\n                  \\\"datasourceName\\\": \\\"grafanacloud-nativehistogram-traces\\\"\\n                }\\n              }\\n            ]\\n          }\\n        },\\n        {\\n          \\\"name\\\": \\\"ws\\\",\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"typeInfo\\\": {\\n            \\\"frame\\\": \\\"string\\\"\\n          },\\n          \\\"config\\\": {}\\n        }\\n      ]\\n    },\\n    \\\"data\\\": {\\n      \\\"values\\\": [\\n        [\\n          1699408545523,\\n          1699408605524,\\n          1699408665522,\\n          1699408725520,\\n          1699408785522,\\n          1699408845523,\\n          1699408905522,\\n          1699408965520,\\n          1699409025524,\\n          1699409085523,\\n          1699409145521,\\n          1699409205522,\\n          1699409265522,\\n          1699409325521,\\n          1699409385532,\\n          1699409445521,\\n          1699409505520,\\n          1699409565520,\\n          1699409625522,\\n          1699409789001,\\n          1699409848061\\n        ],\\n        [\\n          0.020431832,\\n          0.02090233,\\n          0.019722001,\\n          0.016970139,\\n          0.019284203,\\n          0.020572653,\\n          0.019318701,\\n          0.017329633,\\n          0.021806494,\\n          0.018097813,\\n          0.01909374,\\n          0.019286653,\\n          0.018773903,\\n          0.017577304,\\n          0.029428525,\\n          0.018254914,\\n          0.017515206,\\n          0.01797259,\\n          0.019303786,\\n          0.005466718,\\n          0.000586483\\n        ],\\n        [\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\",\\n          \\\"cortex_request_duration_seconds_bucket\\\"\\n        ],\\n        [\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\",\\n          \\\"dev-us-central-0\\\"\\n        ],\\n        [\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\",\\n          \\\"compactor\\\"\\n        ],\\n        [\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\",\\n          \\\"compactor-0:compactor:http-metrics\\\"\\n        ],\\n        [\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\",\\n          \\\"mimir-dev-12\/compactor\\\"\\n        ],\\n        [\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.05\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.025\\\",\\n          \\\"0.01\\\",\\n          \\\"0.005\\\"\\n        ],\\n        [\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\",\\n          \\\"GET\\\"\\n        ],\\n        [\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\",\\n          \\\"mimir-dev-12\\\"\\n        ],\\n        [\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\",\\n          \\\"compactor-0\\\"\\n        ],\\n        [\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\",\\n          \\\"nativehistogram\\\"\\n        ],\\n        [\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"debug_pprof\\\",\\n          \\\"metrics\\\",\\n          \\\"debug_pprof\\\"\\n        ],\\n        [\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\",\\n          \\\"200\\\"\\n        ],\\n        [\\n          \\\"71cf1dfd8f3d01e2\\\",\\n          \\\"5de8349e39986ecb\\\",\\n          \\\"365d8c1a9590606d\\\",\\n          \\\"74bb127c7f30e211\\\",\\n          \\\"4f4da590eb49335d\\\",\\n          \\\"3b7a072cf88636a5\\\",\\n          \\\"094d3f4421f87af4\\\",\\n          \\\"7e5444a2ac635799\\\",\\n          \\\"7404c197005a87e5\\\",\\n          \\\"6412591a61b76b6a\\\",\\n          \\\"7131e4c73ce16131\\\",\\n          \\\"0229ed3905458ddb\\\",\\n          \\\"5fb2200e69616856\\\",\\n          \\\"709f2e40d15fc13f\\\",\\n          \\\"6c6e98fa58a6729d\\\",\\n          \\\"5a4f82574df2e6c4\\\",\\n          \\\"1981b3f623d27ceb\\\",\\n          \\\"0d5c6e75a136be98\\\",\\n          \\\"4d3e66a003190452\\\",\\n          \\\"384dac0442da6e54\\\",\\n          \\\"728ceedb3647a28d\\\"\\n        ],\\n        [\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\",\\n          \\\"false\\\"\\n        ]\\n      ]\\n    }\\n  }\\n]\",\r\n          \"refId\": \"A\",\r\n          \"scenarioId\": \"raw_frame\"\r\n        }\r\n      ],\r\n      \"title\": \"Panel Title\",\r\n      \"type\": \"heatmap\"\r\n    }\r\n  ],\r\n  \"schemaVersion\": 39,\r\n  \"tags\": [],\r\n  \"templating\": {\r\n    \"list\": []\r\n  },\r\n  \"time\": {\r\n    \"from\": \"2023-11-08T01:53:57.047Z\",\r\n    \"to\": \"2023-11-08T02:18:04.478Z\"\r\n  },\r\n  \"timeRangeUpdatedDuringEditOrView\": false,\r\n  \"timepicker\": {},\r\n  \"timezone\": \"\",\r\n  \"title\": \"transform-annotations Copy\",\r\n  \"uid\": \"cdg8i8uvewow0a\",\r\n  \"version\": 4,\r\n  \"weekStart\": \"\"\r\n}\r\n```\r\n<\/details>\r\n","comments":["@dprokop please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","probably dupe of https:\/\/github.com\/grafana\/grafana\/issues\/84712","@leeoniya - yes and no, there's definitely a bug on the scenes implementation end that causes this, can clearly see the data layer annotations are merged into the results and override annotations provided by the query. "],"labels":["type\/bug","area\/scenes","internal"]},{"title":"docs: updates to stat panel documentation","body":"**What is this feature?**\r\n\r\nUpdates to the stat docs to include:\r\n- how to configure a stat panel (to be added as a video)\r\n- supported data formats and example\r\n- when to use a stat panel\r\n\r\n**Why do we need this feature?**\r\n\r\nTo explain to our users how to configure a stat panel easily and when to use it.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana OSS and Cloud users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["This PR must be merged before a backport PR will be created.","This PR must be merged before a backport PR will be created.","This PR must be merged before a backport PR will be created."],"labels":["type\/docs","no-changelog","backport v10.2.x","backport v10.3.x","backport v10.4.x"]},{"title":"Dashboard - extensions menu split into sub menus when using scenes","body":"Looks like when Scenes is being used for a dashboard, the panel menu changes how it handles extensions, each getting a submenu rather than being part of a single level.\r\n\r\nBefore:\r\n<img width=\"358\" alt=\"UI-ext-before\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/19860021\/172bf10c-2ba2-45dc-a58e-4690ba3e75c8\">\r\n\r\nAfter:\r\n<img width=\"481\" alt=\"UI-ext-after\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/19860021\/1ad65266-e6ee-4a78-b3eb-aa385fe5b95f\">\r\n","comments":["@sympatheticmoose please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/bug","area\/dashboard","area\/scenes","internal"]},{"title":"Explore: Remove deprecated raw range fallback","body":"Remove the if added to support passing TimeRange without `raw` inside an internal data link. It was added in https:\/\/github.com\/grafana\/grafana\/pull\/84732. Please search for `#84806` in the code base find the relevant part.\n\n\nBlocked by https:\/\/github.com\/grafana\/grafana-plugin-sdk-go\/issues\/934","comments":[],"labels":["type\/tech","area\/explore"]},{"title":"Docs: add variable indexing and selection guidance","body":"Indexing and selecting values from a variable\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nIndexing and selecting values from a variable\r\n\r\n**Why do we need this feature?**\r\n\r\nThese is no specific documentation available. \r\n\r\n**Who is this feature for?**\r\n\r\nData scientist and Developers who are using Variables in SQL queries and at other places.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nUpdating existing documentation.\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84802) <br\/>All committers have signed the CLA.","@jdbaldry Agree with you that the addition would be pertinent in variable-syntax docs. made changes accordingly. Thanks","Hi @NimJ, thanks for the contribution! I've tagged the dashboards squad so they can give this a technical review. Once that's completed, I'll circle back and do a wording review. I've also updated the title of the PR to make it more descriptive."],"labels":["type\/docs","pr\/external"]},{"title":"Alerting: Improve template preview","body":"**What is this feature?**\r\nThis PR changes the notification templates editor layout to use 3-column view with the preview always available\r\n\r\nFixes #83591 \r\n\r\n**Special notes for your reviewer:**\r\n\r\n**BEFORE**\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/6293563\/d33670f4-69fa-4aee-94ff-d1e97180ef00)\r\n\r\n\r\n**AFTER**\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/6293563\/064d7ce2-9f12-4f0e-8d68-0689896e88c2)\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/alerting","area\/frontend","add to changelog","no-backport"]},{"title":"fail to get render panel image with valid admin role service account token","body":"### What happened?\r\n\r\nI have admin role service account token,I have a script run as webhook service to receive alert from grafana.\r\nas webhook way could send alert with image, with help of image render. it was working before 9.4.7, using apikey.\r\nafter grafana 10.x, it forces to migrate to service account and token to integrate with grafana. \r\nmy cmd run  like below, \r\ncurl -H 'Authorization: Bearer glsa_abcd_15de8a1b' 'https:\/\/abc.com\/render\/d-solo\/NtNdgVOSk?panelId=4' > test34.png\r\nresult:\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/8426828\/d032839d-e774-4188-af61-58a3c2ed8854)\r\n\r\nwhile using same token, I could create dashboard via below post. \r\ntips:  the image render works when I click the rendered image link\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/8426828\/fc09ff3e-92b5-4ac9-96e8-3fcd2cb8789d)\r\n\r\n\r\ncurl -X POST --insecure -H \"Authorization: Bearer glsa_aaaaa_37aa44a6\" -H \"Content-Type: application\/json\" -d '{\r\n  \"dashboard\": {\r\n    \"id\": null,\r\n    \"title\": \"Production Overview\",\r\n    \"tags\": [ \"templated\" ],\r\n    \"timezone\": \"browser\",\r\n    \"rows\": [\r\n      {\r\n      }\r\n    ],\r\n    \"schemaVersion\": 6,\r\n    \"version\": 0\r\n  },\r\n  \"overwrite\": false\r\n}' https:\/\/abc.com\/api\/dashboards\/db\r\n\r\n\r\n### What did you expect to happen?\r\n\r\ndownload the rendered image with panel content, not the error.\r\n\r\n### Did this work before?\r\n\r\nyes, on 9.4.7, now we are on 10.3 & 10.4\r\n\r\n### How do we reproduce it?\r\n\r\n1. install image render(https:\/\/github.com\/grafana\/grafana-image-renderer)\r\ndraw a panel with a time series chart  and click share to check rendered image on browser like above pic 2 ==> to validate the image render works.\r\n2. run below cmd with an admin service account token(create by admin, goto service account tab), replace below token and grafana url, \r\nNtNdgVOSk and panelId could be found on step1\r\ncurl -H 'Authorization: Bearer glsa_abcd_15de8a1b' 'https:\/\/abc.com\/render\/d-solo\/NtNdgVOSk?panelId=4' > test34.png\r\n\r\n3. check the png file, whether it's an error or normal panel content\r\n\r\n\r\n\r\n### Is the bug inside a dashboard panel?\r\n\r\nno, looks like grafana block an entry\r\n\r\n### Environment (with versions)?\r\n\r\nGrafana: 10.4\r\nOS: ubuntu\r\nBrowser: Chrome\r\n\r\n\r\n### Grafana platform?\r\n\r\nKubernetes\r\n\r\n### Datasource(s)?\r\n\r\nany","comments":[],"labels":["area\/image-rendering","team\/grafana-sharing"]},{"title":"Add asynchronous invocation middleware node in the service graph","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nIn the current service graph, I find that the representation of relationships when making asynchronous service calls via message middleware is not intuitive, and I would prefer to be able to visualize the message middleware nodes.\r\n\r\n**What would you like to be added**:\r\n(To give an example of rabbitmq, below is a graph of the current state vs. the state after the requirements are implemented)\r\n\r\nNow\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/42265657\/d0fcafce-0728-45f1-ab81-79df51389e60)\r\n\r\n\r\nThen\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/42265657\/b42d2772-9ccc-4d99-aaca-75e71b94e438)\r\n\r\n\r\n**Who is this feature for?**\r\nDistinguishing between synchronous and asynchronous service calls makes it more intuitive to understand.\r\n\r\nThere have been some previous discussions for your information.\r\nhttps:\/\/github.com\/grafana\/tempo\/issues\/3348\r\n","comments":["In the linked ticket @fyuan1316 and I discussed the possibility of adding a second histogram to Tempo generation to accomplish this. However, in the interest of keeping time series down and since Grafana had all necessary information, it felt like it would make more sense to just render the node in the service graph with no Tempo changes."],"labels":["type\/feature-request","area\/explore","area\/tracing","datasource\/Tempo","area\/panel\/node-graph"]},{"title":"OptionsPicker: Allow storing raw input even when matches exist","body":"Fixes https:\/\/github.com\/grafana\/support-escalations\/issues\/9733\r\n\r\n<details><summary>tpl-vars-raw.json<\/summary>\r\n\r\n```json\r\n{\r\n  \"annotations\": {\r\n    \"list\": [\r\n      {\r\n        \"builtIn\": 1,\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"type\": \"dashboard\"\r\n      }\r\n    ]\r\n  },\r\n  \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\": 0,\r\n  \"id\": 1009,\r\n  \"links\": [],\r\n  \"liveNow\": false,\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"grafana-testdata-datasource\",\r\n        \"uid\": \"PD8C576611E62080A\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 1,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"targets\": [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"grafana-testdata-datasource\",\r\n            \"uid\": \"PD8C576611E62080A\"\r\n          },\r\n          \"refId\": \"A\",\r\n          \"scenarioId\": \"random_walk\",\r\n          \"seriesCount\": 1\r\n        }\r\n      ],\r\n      \"title\": \"Panel Title\",\r\n      \"type\": \"timeseries\"\r\n    }\r\n  ],\r\n  \"refresh\": \"\",\r\n  \"schemaVersion\": 39,\r\n  \"tags\": [],\r\n  \"templating\": {\r\n    \"list\": [\r\n      {\r\n        \"current\": {\r\n          \"selected\": false,\r\n          \"text\": \"A\",\r\n          \"value\": \"A\"\r\n        },\r\n        \"hide\": 0,\r\n        \"includeAll\": false,\r\n        \"multi\": false,\r\n        \"name\": \"query0\",\r\n        \"options\": [\r\n          {\r\n            \"selected\": true,\r\n            \"text\": \"A\",\r\n            \"value\": \"A\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"AA\",\r\n            \"value\": \"AA\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"AB\",\r\n            \"value\": \"AB\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"AC\",\r\n            \"value\": \"AC\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"BC\",\r\n            \"value\": \"BC\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"C\",\r\n            \"value\": \"C\"\r\n          },\r\n          {\r\n            \"selected\": false,\r\n            \"text\": \"CD\",\r\n            \"value\": \"CD\"\r\n          }\r\n        ],\r\n        \"query\": \"A, AA, AB, AC, BC, C, CD\",\r\n        \"queryValue\": \"\",\r\n        \"skipUrlSync\": false,\r\n        \"type\": \"custom\"\r\n      }\r\n    ]\r\n  },\r\n  \"time\": {\r\n    \"from\": \"now-6h\",\r\n    \"to\": \"now\"\r\n  },\r\n  \"timeRangeUpdatedDuringEditOrView\": false,\r\n  \"timepicker\": {},\r\n  \"timezone\": \"\",\r\n  \"title\": \"tpl-vars-raw\",\r\n  \"uid\": \"edg5vz0frq1a8c\",\r\n  \"version\": 2,\r\n  \"weekStart\": \"\"\r\n}\r\n```\r\n<\/details>\r\n\r\n<img width=\"966\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/43234\/44073b0a-698c-43cb-ad0e-b62ef907d086\">\r\n\r\n---\r\n\r\n**Background**\r\n\r\nThe dashboard template variable selector only accepts\/saves the literal typed input when there are 0 matches returned by the options search\/filter. This was true in `v10.2` and this is still true on `main`. For instance, if you create a custom variable with values `Key1, Key2, Key3`, you cannot get the variable selector to accept `key`, but you _can_ get it to accept `foo` -- that's weird.\r\n\r\nSince these template variables usually end up in queries, some users were relying on this oddity to inject partial regexps into queries. for example entering `key.*` into the variable picker and ending up with a query like `up{instance~=\"key.*\"}`. this works, as long as the match list is empty for `key.*`.\r\n\r\n**What's the problem \/ what changed?**\r\n\r\nIn https:\/\/github.com\/grafana\/grafana\/pull\/79286 we replaced the basic, unranked substring search with a fuzzy + ranked search. The probability of getting 0 matches changed and with it, the ability to save raw inputs in template variables. Specifically, the fuzzy search library ignores everything that is not alpha-numeric, so searching for `key.*` matches the same thing as `key` after the non-alphanum chars are stripped. this makes it impossible to construct the above query through var interpolation if we have any options that contain 'key'.\r\n\r\n**Proposed solution**\r\n\r\nThis PR adds a \"raw input\" option to the top of the list when there are no matches or when there are no exact matches. it still pre-selects\/highlights the best-ranked match, but you can now manually choose the raw input. This solution is not great, but it does work without any gotchas. The main problem is that it's hard to distinguish this raw input option from the real ones below it. i tried adding a `>` prefix to it because did not see any other options to style the item differently.\r\n\r\nalternatives welcome, but it seems there's a bit of a time crunch to backport this into 10.4.1 in the next few days, so let's try to keep the bikeshedding to a minimum, and maybe come up with something more permanent in a future PR :pray: \r\n\r\n**Alternative solution**\r\n\r\nanother thing that can work is to simply not pre-select the best match. always leave it at -1 and let the users manually choose the option from the filtered matches, otherwise use raw input. this seems much cleaner but might break some existing muscle memory \/ workflows. i'll leave it up to you folks to decide\/implement (i dont have enough knowledge of this component to do it quickly)","comments":["Hello @leeoniya!\nBackport pull requests need to be either:\n* Pull requests which address bugs,\n* Urgent fixes which need product approval, in order to get merged,\n* Docs changes.\n\nPlease, if the current pull request addresses a bug fix, label it with the `type\/bug` label.\nIf it already has the product approval, please add the `product-approved` label. For docs changes, please add the `type\/docs` label.\nIf the pull request modifies CI behaviour, please add the `type\/ci` label.\nIf none of the above applies, please consider removing the backport label and target the next major\/minor release.\nThanks!","This PR must be merged before a backport PR will be created."],"labels":["type\/bug","area\/dashboard\/templating","area\/search","area\/frontend","no-changelog","backport v10.4.x"]},{"title":"Update countries.json","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nFix country names based on:\r\n- https:\/\/www.iso.org\/obp\/ui\/#iso:code:3166:GB\r\n- https:\/\/www.iso.org\/obp\/ui\/#iso:code:3166:US\r\n\r\n**Why do we need this feature?**\r\n\r\nTo match the country names based on ISO 3166.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84788) <br\/>All committers have signed the CLA."],"labels":["area\/frontend","pr\/external","no-changelog"]},{"title":"publish-docs workflow not pulling remote changes","body":"There\u2019s an issue with the publish-docs workflow where sometimes it is not pulling in remote changes before attempting to push. Example failed job: https:\/\/github.com\/grafana\/grafana\/actions\/runs\/8346723640\/job\/22844709033\r\n\r\nCurrent theory is that this is a race condition that we hit when there are commits to the repo in short succession. Retries of the job are successful. We should either update the job to pull changes right before pushing or to add retry logic.","comments":[],"labels":["internal"]},{"title":"TimeSeriesPanel: Show vertical annotations","body":"\r\n<img width=\"1502\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/30407135\/37a2ce59-d428-4d02-a38b-fe4e0e57939d\">\r\n<img width=\"279\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/30407135\/e025f5b5-bad0-4f6a-b6b7-3f7b40d3869b\">\r\n\r\n\r\n```Dashboard json to test annotations with vertical time series panel\r\n{\r\n  \"annotations\": {\r\n    \"list\": [\r\n      {\r\n        \"builtIn\": 1,\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"type\": \"dashboard\"\r\n      },\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"target\": {\r\n          \"limit\": 100,\r\n          \"matchAny\": false,\r\n          \"tags\": [],\r\n          \"type\": \"dashboard\"\r\n        },\r\n        \"type\": \"dashboard\"\r\n      },\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"testdata\",\r\n          \"uid\": \"PD8C576611E62080A\"\r\n        },\r\n        \"enable\": true,\r\n        \"filter\": {\r\n          \"exclude\": false,\r\n          \"ids\": [\r\n            1\r\n          ]\r\n        },\r\n        \"iconColor\": \"red\",\r\n        \"mappings\": {\r\n          \"timeEnd\": {\r\n            \"source\": \"field\",\r\n            \"value\": \"time\"\r\n          }\r\n        },\r\n        \"name\": \"Red, only panel 1\",\r\n        \"target\": {\r\n          \"lines\": 4,\r\n          \"refId\": \"Anno\",\r\n          \"scenarioId\": \"annotations\"\r\n        }\r\n      },\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"testdata\",\r\n          \"uid\": \"PD8C576611E62080A\"\r\n        },\r\n        \"enable\": true,\r\n        \"filter\": {\r\n          \"exclude\": true,\r\n          \"ids\": [\r\n            1\r\n          ]\r\n        },\r\n        \"iconColor\": \"yellow\",\r\n        \"name\": \"Yellow - all except 1\",\r\n        \"target\": {\r\n          \"lines\": 5,\r\n          \"refId\": \"Anno\",\r\n          \"scenarioId\": \"annotations\"\r\n        }\r\n      },\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"testdata\",\r\n          \"uid\": \"PD8C576611E62080A\"\r\n        },\r\n        \"enable\": true,\r\n        \"filter\": {\r\n          \"exclude\": false,\r\n          \"ids\": [\r\n            3,\r\n            4\r\n          ]\r\n        },\r\n        \"iconColor\": \"dark-purple\",\r\n        \"name\": \"Purple only panel 3+4\",\r\n        \"target\": {\r\n          \"lines\": 6,\r\n          \"refId\": \"Anno\",\r\n          \"scenarioId\": \"annotations\"\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\": 0,\r\n  \"id\": 906,\r\n  \"links\": [],\r\n  \"liveNow\": false,\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"testdata\",\r\n        \"uid\": \"PD8C576611E62080A\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 1,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"orientation\": \"vertical\",\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"title\": \"Panel one\",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"testdata\",\r\n        \"uid\": \"PD8C576611E62080A\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 2,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"orientation\": \"vertical\",\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"title\": \"Panel two\",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"testdata\",\r\n        \"uid\": \"PD8C576611E62080A\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 8\r\n      },\r\n      \"id\": 3,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"orientation\": \"vertical\",\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"title\": \"Panel three\",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"testdata\",\r\n        \"uid\": \"PD8C576611E62080A\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\": 8\r\n      },\r\n      \"id\": 4,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"orientation\": \"vertical\",\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"title\": \"Panel four\",\r\n      \"type\": \"timeseries\"\r\n    }\r\n  ],\r\n  \"refresh\": \"\",\r\n  \"schemaVersion\": 39,\r\n  \"tags\": [\r\n    \"gdev\",\r\n    \"annotations\"\r\n  ],\r\n  \"templating\": {\r\n    \"list\": []\r\n  },\r\n  \"time\": {\r\n    \"from\": \"now-30m\",\r\n    \"to\": \"now\"\r\n  },\r\n  \"timeRangeUpdatedDuringEditOrView\": false,\r\n  \"timepicker\": {},\r\n  \"timezone\": \"\",\r\n  \"title\": \"Annotation vertical\",\r\n  \"uid\": \"ed1556651\",\r\n  \"version\": 5,\r\n  \"weekStart\": \"\"\r\n}\r\n```","comments":["I just import the dashboard and it works. It is basically the same dashboard as this[ gdev-dashboard](http:\/\/localhost:3000\/d\/ed155665\/annotation-filtering?orgId=1), just with vertical orientation. \r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/30407135\/8921fd48-0f2a-49f6-b406-083242bf90b8\r\n\r\n"],"labels":["area\/frontend","area\/panel\/timeseries","no-backport","no-changelog"]},{"title":"Build: Set Nx inputs for theme-generate","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nThis PR adds inputs to the `themes-generate` task to reduce reruns of the task across branches locally.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo fine tune task runs. Currently running `yarn nx themes-generate grafana --graph` and looking at the inputs it looks like all of the repo is being used to calculate \/ invalidate caches. Minimising the inputs should reduce the number of runs as devs move between branches.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana developers\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/build-packaging","area\/frontend","no-backport","no-changelog"]},{"title":"Prometheus: Migrate Azure auth to sdk repository","body":"Migrate all Azure auth to an sdk repository outside of core Grafana.\n\n\n\n![Image](https:\/\/github.com\/grafana\/grafana\/assets\/25674746\/bc79d3da-f28c-4878-8512-59cbf6e506ff)\n\n","comments":["We already have a work item to do this but our priority is to do this for Azure Monitor\/ADX first."],"labels":["area\/auth","datasource\/Prometheus","area\/backend","area\/frontend"]},{"title":"Allow partial access to alert rules in a group","body":"Currently, a user can access a rule in a group only if it has access to the rules in the folder + access to query all data sources all rules use in that group.\r\n\r\nThe main reason for that was to enforce the correctness of the position of a rule in a group.\r\n\r\nThis approach makes the RBAC logic very difficult: there can be a situation when a user adding a new rule to a group effectively removes access to other rules from other users that do not have access to the data source the new rule refers to. \r\n\r\nI propose to remove that requirement and give users partial access to rules in the group:\r\n\r\n- Update GET API to return a group where rules to which the user does not have access are presented by a placeholder with only UID, and rules to which the user has access - full specification. UI should show a placeholder for the rule\r\n- Update authorization logic to not check whether the user has access to all rules but only to rules that are touched during the update.\r\n\r\n\r\nBenefits:\r\n- More straightforward RBAC. Users can access rules to which they have full access.\r\n- It will make it simpler to calculate the access to rule for a user in some areas like silence API.\r\n- Provisioning still have single-rule APIs. This will simplify managing.\r\n\r\n\r\nTBD:\r\n- should we allow to change the position of the rules in a group?  I think we can because the user is allowed to access rules in a folder but not the rule's query.","comments":[],"labels":["area\/alerting"]},{"title":"Display the last\/ current value of the frame - Time series","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nIn the State Timeline Plugin, I would display the last (or current) state of each frame, positioned next to the bar. This value will be updated with each render.\r\n\r\n**What would you like to be added**:\r\n\r\nHere is a simple example of what I would like, used as a preview with missing requirements.\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/92711118\/bfa41d04-a83f-4188-b679-063e87f8e66c)\r\nThe value should :\r\n- be **colored** using the value mappings. (And threshold if possible)\r\n- be **hidden** if the user wants. \r\n- positioned at the **right** or **left** of the bar.\r\n- represent the **last**, the **current** value, or **none** if no value is available.\r\n\r\n**Who is this feature for?**\r\n\r\nThis feature helps users monitor their system in real-time. It can help users to get a better preview of their system.\r\n","comments":["you can get a little bit of this using the legend and adding calculations like `Last*`\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/824cd785-2245-4d84-aa4c-f3b6016829fc)"],"labels":["type\/feature-request","area\/panel\/state-timeline"]},{"title":"Alerting: Remove `recoveryThreshold` feature toggle","body":"This has been GA for a while and removing the feature toggle (enabling it by default) should have no user impact.","comments":[],"labels":["area\/alerting","area\/backend","internal"]},{"title":"OAuth: Make sub claim required for generic oauth","body":"**What is this feature?**\r\nMake sub claim required for generic oauth. We still handle the case where a auth connection was made without a valid `AuthID` and patches it during user sync.\r\n\r\n* Special case https:\/\/github.com\/grafana\/grafana\/blob\/a8e211bf770f03f8574c67d68a57d9f0984ae061\/pkg\/services\/authn\/authnimpl\/sync\/user_sync.go#L339-L347\r\n*  Patching https:\/\/github.com\/grafana\/grafana\/blob\/a8e211bf770f03f8574c67d68a57d9f0984ae061\/pkg\/services\/authn\/authnimpl\/sync\/user_sync.go#L192\r\n\r\n**Which issue(s) does this PR fix?**:\r\nFixes #https:\/\/github.com\/grafana\/identity-access-team\/issues\/603\r\n\r\n# Release notice breaking change\r\nAuthentication with generic oauth now requires sub claim to be present in either ID-Token or API response\r\n","comments":[],"labels":["area\/backend","add to changelog","breaking change"]},{"title":"Auth: add Dex example to generic OAuth2 documentation","body":"This patch adds an example configuration for setting up generic OAuth2 authentication using [Dex IdP](https:\/\/dexidp.io\/).\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84744) <br\/>All committers have signed the CLA.","@fredrikekre Thank you very much for your submission!  Just a few minor changes.  ","Thanks for the review. I spent some time figuring this configuration out and thought it could be useful for others too.\r\n\r\n~~Btw, is is possible to build the docs locally to get a preview?~~ Edit: `make -C docs docs`."],"labels":["type\/docs","pr\/external","no-backport","no-changelog"]},{"title":"Avoid `duplicate manual mock` warning","body":"When running frontend tests locally or in CI, there are a few warning on mock duplications. [Example](https:\/\/drone.grafana.net\/grafana\/grafana\/167514\/1\/6):\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/135109076\/2dbc9d59-52e5-4f16-beb4-33844c6480d5)\r\n\r\nThis PR proposes a fix to that, [as for example suggested here](https:\/\/stackoverflow.com\/questions\/52416567\/how-to-handle-duplicated-manual-mock-found-in-the-project). [Outcome for this PR](https:\/\/drone.grafana.net\/grafana\/grafana\/167521\/1\/6):\r\n<img width=\"790\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/135109076\/293cfd57-ca2b-412b-a97e-f97ccf45b0cc\">\r\n","comments":[],"labels":["no-changelog"]},{"title":"PoC: Empty state components","body":"not intending to deliver this PR as-is, just using it to prove out the APIs for the new empty state components.\r\nwill split out and deliver in separate PRs later\r\n\r\nfor #84516 ","comments":["\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184735ashharr.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184735ashharr.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/167819\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.24.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/go-logr\/logr v1.4.1\ngo: downloading go.opentelemetry.io\/otel\/metric v1.24.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.1.0\ngo: downloading google.golang.org\/protobuf v1.32.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20240102182953-50ed04b92917\ngo: downloading google.golang.org\/grpc v1.61.1\ngo: downloading golang.org\/x\/sys v0.17.0\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.19.0\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading golang.org\/x\/net v0.19.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20240102182953-50ed04b92917\ngo: downloading golang.org\/x\/text v0.14.0\n2024\/03\/20 15:36:14 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-20T15:36:43.105Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/20 15:36:43 if git -C src checkout ash\/empty-state-component; then echo \"checked out ash\/empty-state-component\"; else exit 3; fi\n2024\/03\/20 15:39:21 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-20T15:39:25.714Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/20 15:39:25 if git -C src checkout ash\/empty-state-component; then echo \"checked out ash\/empty-state-component\"; else exit 3; fi\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/20 15:39:25 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/20 15:39:25 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/20 15:39:25 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/20 15:39:25 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-20T15:39:25.732Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-20T15:40:07.146Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-20T15:40:07.160Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-20T15:40:07.174Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T15:40:07.200Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/datasource\npkg\/extensions\/datasource\/cloudconfig.go:17:9: cannot use &cloudConfig{\u2026} (value of type *cloudConfig) as \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider value in return statement: *cloudConfig does not implement \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider (wrong type for method Get)\n\t\thave Get(context.Context, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\n\t\twant Get(context.Context, string, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\npkg\/extensions\/datasource\/cloudconfig.go:30:42: cannot use (*cloudConfig)(nil) (value of type *cloudConfig) as \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider value in variable declaration: *cloudConfig does not implement \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider (wrong type for method Get)\n\t\thave Get(context.Context, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\n\t\twant Get(context.Context, string, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\nexit status 1\n exit status 1","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/167918\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.24.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.24.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/go-logr\/logr v1.4.1\ngo: downloading go.opentelemetry.io\/otel\/metric v1.24.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.1.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20240102182953-50ed04b92917\ngo: downloading google.golang.org\/grpc v1.61.1\ngo: downloading google.golang.org\/protobuf v1.32.0\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading golang.org\/x\/sys v0.17.0\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.19.0\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading golang.org\/x\/net v0.19.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20240102182953-50ed04b92917\ngo: downloading golang.org\/x\/text v0.14.0\n2024\/03\/20 16:44:53 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-20T16:45:00.237Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/20 16:45:00 if git -C src checkout ash\/empty-state-component; then echo \"checked out ash\/empty-state-component\"; else exit 3; fi\n2024\/03\/20 16:47:36 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-20T16:47:40.306Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/20 16:47:40 if git -C src checkout ash\/empty-state-component; then echo \"checked out ash\/empty-state-component\"; else exit 3; fi\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/20 16:47:40 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/20 16:47:40 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/20 16:47:40 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/20 16:47:40 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-20T16:47:40.324Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-20T16:48:23.421Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-20T16:48:23.435Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-20T16:48:23.448Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T16:48:23.472Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-20T16:48:23.473Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/datasource\npkg\/extensions\/datasource\/cloudconfig.go:17:9: cannot use &cloudConfig{\u2026} (value of type *cloudConfig) as \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider value in return statement: *cloudConfig does not implement \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider (wrong type for method Get)\n\t\thave Get(context.Context, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\n\t\twant Get(context.Context, string, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\npkg\/extensions\/datasource\/cloudconfig.go:30:42: cannot use (*cloudConfig)(nil) (value of type *cloudConfig) as \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider value in variable declaration: *cloudConfig does not implement \"github.com\/grafana\/grafana\/pkg\/registry\/apis\/datasource\".PluginDatasourceProvider (wrong type for method Get)\n\t\thave Get(context.Context, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\n\t\twant Get(context.Context, string, string) (*\"github.com\/grafana\/grafana\/pkg\/apis\/datasource\/v0alpha1\".DataSourceConnection, error)\nexit status 1\n exit status 1","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184735ashharr.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/167966\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/empty-state-component** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184735ashharr.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/167982\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/168512\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/168533\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/dashboard\/templating","area\/frontend"]},{"title":"Explore: Use internal data link range","body":"This PR adds support for passing custom time range in internal data links. It temporarily adds support for passing a TimeRange without `raw` due to a bug in [grafana-plugin-sdk-go](https:\/\/github.com\/grafana\/grafana-plugin-sdk-go\/issues\/934).\r\n\r\nFixes #81306\r\n\r\nRaw data frames for testing (you can cross check with ops):\r\n\r\n<details><summary>raw data frames for testing<\/summary>\r\n\r\n```json\r\n[\r\n  {\r\n    \"meta\": {\r\n      \"preferredVisualisationType\": \"table\"\r\n    },\r\n    \"fields\": [\r\n      {\r\n        \"name\": \"time\",\r\n        \"values\": [\r\n          1,\r\n          2\r\n        ]\r\n      },\r\n      {\r\n        \"name\": \"full-range-provided (now-5y)\",\r\n        \"config\": {\r\n          \"links\": [\r\n            {\r\n              \"title\": \"test\",\r\n              \"url\": \"\",\r\n              \"internal\": {\r\n                \"query\": \"test\",\r\n                \"range\": {\r\n                  \"from\": 946684800000,\r\n                  \"to\": 946684800001,\r\n                  \"raw\": {\r\n                    \"from\": \"now-5y\",\r\n                    \"to\": \"now-5y\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"values\": [\r\n          \"foo\",\r\n          \"bar\"\r\n        ]\r\n      },\r\n      {\r\n        \"name\": \"no-raw-range-provided (2000\/01\/01)\",\r\n        \"config\": {\r\n          \"links\": [\r\n            {\r\n              \"title\": \"test\",\r\n              \"url\": \"\",\r\n              \"internal\": {\r\n                \"query\": \"test\",\r\n                \"range\": {\r\n                  \"from\": 946684800000,\r\n                  \"to\": 946684800001\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"values\": [\r\n          \"foo\",\r\n          \"bar\"\r\n        ]\r\n      },\r\n      {\r\n        \"name\": \"raw-only-provided (now-5y)\",\r\n        \"config\": {\r\n          \"links\": [\r\n            {\r\n              \"title\": \"test\",\r\n              \"url\": \"\",\r\n              \"internal\": {\r\n                \"query\": \"test\",\r\n                \"range\": {\r\n                  \"raw\": {\r\n                    \"from\": \"now-5y\",\r\n                    \"to\": \"now-5y\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"values\": [\r\n          \"foo\",\r\n          \"bar\"\r\n        ]\r\n      },\r\n      {\r\n        \"name\": \"no-range-provided (Explore's range)\",\r\n        \"config\": {\r\n          \"links\": [\r\n            {\r\n              \"title\": \"test\",\r\n              \"url\": \"\",\r\n              \"internal\": {\r\n                \"query\": \"test\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"values\": [\r\n          \"foo\",\r\n          \"bar\"\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n<\/details>\r\n\r\nHere's the previous and new behavior compared:\r\n\r\n| field name | expected range* | main: URL | main: split open | branch: URL | branch: split open |\r\n|-----------|-----------------|-----------|------------------|-------------|-------------------|\r\n| full-range-provided | now-5y | main | main | branch | branch |\r\n| no-raw-range-provided | 2000\/01\/01 | main | main | branch | branch |\r\n| raw-only-provided | now-5y | main | main | branch | branch  |\r\n| no-range-provided | Explore's range | main | main | branch | branch |\r\n\r\n(*) to\/from are the same\r\n\r\n\r\n","comments":[],"labels":["area\/explore","area\/frontend"]},{"title":"Enable simplified routing for all cloud users","body":null,"comments":[],"labels":["kata:simplify-alert-rule-routing"]},{"title":"Dashboard - [Migration] Variable Settings: Wrong interval option added","body":"This was found while trying to run e2e tests with `dashboard Scene` feature flag\r\n\r\nSteps to reproduce it:\r\n- Go to this `gdev-dashboard` on your instance `http:\/\/localhost:3000\/d\/kVi2Gex7z\/test-variable-output?orgId=1` \r\n- Create an interval variable called `VariableUnderTest` with the interval values `10s,10m,60m,90m,1h30m`\r\n- Click `back to list` and observe the values and the variable name are correct\r\n-  Click `back to dashboard` \r\n\r\n#### Current Behavior\r\nThe default value selected in `VariableUnderTest` is `1m`.\r\n\r\n#### Expected Behavior\r\nThe default value selected in `VariableUnderTest` should be the first value from the interval, in our test `10s`.\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/239999\/9c864e59-2c0e-45d5-a62b-92e4bc784c9e\r\n\r\n\r\n\r\n\r\n","comments":[],"labels":["type\/bug","area\/frontend","team\/grafana-dashboards"]},{"title":"Dashboard scenes: Refactor scene save library panel","body":"Small refactor to how we save library panels. Should also let the user stay in the edit view after save, as in the old architecture. \r\n\r\nSince editing library panels is sort of a special case I've opted to let the panel editor be responsible for saving the panel instead of the VizPanelManager, just to keep the VizPanelManager more focused on normal viz panels. Don't have a strong opinion on this, so the save functionality could move to the manager as well.","comments":["I agree that this is another situation that would benefit from the vizPanel\/libVizPanel simplification and should be revisited later on."],"labels":["area\/frontend","no-backport","no-changelog","area\/scenes"]},{"title":"Annotations: Lazy-loaded panels do not show annotations until refreshed","body":"### What happened?\r\n\r\nWhen you have a lazy loaded panel with annotations, and the panel loads before the annotation request finishes, the annotations do not immediately show up. It requires you to scroll or collapse and re-open the panel in order for the panel to re-render and finally show the annotations. The network inspector indicates that the annotation is queried correctly at the right time, and responds with the right data but it does not trigger a lazy loaded panel re-render as expected.\r\n\r\nImmediately after annotations fetched:\r\n\r\n![Screenshot 2024-03-19 083201](https:\/\/github.com\/grafana\/grafana\/assets\/163986527\/3178e84d-02b7-4b4a-b0b0-9f3b129c4e3a)\r\n\r\nAfter panel collapsed and re-opened to trigger re-render:\r\n\r\n![Screenshot 2024-03-192](https:\/\/github.com\/grafana\/grafana\/assets\/163986527\/62e888a9-8ce6-4e1e-9519-1fdf0aebef2d)\r\n\r\n\r\n### What did you expect to happen?\r\n\r\nWe expect the panel to re-render as soon as the annotation fetch is finished to show the annotations.\r\n\r\n### Did this work before?\r\n\r\nThis worked in Grafana 10.2.3, but is verified as broken in both Grafana 10.3 and 10.4.\r\n\r\n@leeoniya acknowledges this bugs existence in this issue #81846 in this [comment](https:\/\/github.com\/grafana\/grafana\/issues\/81846#issuecomment-1939621263) but the issue author closed it due to an unrelated bug dissapearing.\r\n\r\n### How do we reproduce it?\r\n\r\n1. Make a dashboard with annotations and lazy loaded panels\r\n2. Observe annotation loads but does not render\r\n3. Collapse and open panel and see that annotations render now\r\n\r\n\r\n### Is the bug inside a dashboard panel?\r\n\r\n_No response_\r\n\r\n### Environment (with versions)?\r\n\r\nGrafana: 10.4\r\nOS: Windows\r\nBrowser: Chrome\r\n\r\n\r\n### Grafana platform?\r\n\r\nA downloaded binary\r\n\r\n### Datasource(s)?\r\n\r\n_No response_","comments":[],"labels":["area\/annotations"]},{"title":"Alerting: Persist silence state immediately on Create\/Delete ","body":"**What is this feature?**\r\n\r\nThis feature makes silence Create\/Delete in GMA update the snapshot in kvstore immediately instead of waiting for the\r\nnext maintenance run. This is to prevent silences from being lost when a new Alertmanager is started before the state has persisted. This can happen, for example, in a rolling deployment scenario when HA is not enabled.\r\n\r\n**Why do we need this feature?**\r\n\r\nCurrently, there is a bug that can happen with specific timings of silence creation and pod restart.\r\n\r\nConditions:\r\n- HA is not enabled.\r\n- Pod is restarted with something like rolling deploys, where the new instance is started before the old instance is stopped.\r\n- A silence is created and then the pod is restarted before the next maintenance run.\r\n\r\nWith the above conditions, the newly created silences will eventually be lost.\r\n\r\nThis happens because silence state is only persisted to db:\r\n- Periodically during maintenance (default 15m)\r\n- On shutdown.\r\n\r\nWhile silence state is loaded from db (keeping in mind, no gossiping without HA):\r\n- On startup.\r\n\r\nThis causes the newly deployed instance to read a state from the db that does not include any of these new silences and it will never re-load the database. From the new instances point of view, the new silences do not exist. In this interim, alerts that should be silenced can slip through if they are attempted to be sent by this AM.\r\n\r\nEventually, the old instance will shutdown and write the silence state to the db but the new instance will not read this state. Finally, once the new instance's maintenance runs, the db silence state will be overwritten with the incomplete set of silence, permanently losing the new silences.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of Grafana-Managed Alerting.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https:\/\/github.com\/grafana\/alerting-squad\/issues\/761\r\n\r\n**Special notes for your reviewer:**\r\n\r\n- Will update `grafana\/alerting` dependency to real ref once [PR](https:\/\/github.com\/grafana\/alerting\/pull\/169) is merged.\r\n- Eventually, we will likely want to treat silences as top-level Resources so they can be incorporated in future API\/CRD plans. This means storing them individually instead of as a blob so we can guarantee consistency on writes in an HA environment. I chose to bring us slightly closer to that goal but without changing anything too drastically yet as there are too many unknowns right now.\r\n- The interface is likely to be a point of contention and I welcome suggestions. I can't think of any clearly better options that don't increase the scope of work here to a large degree:\r\n  - It would have been preferable to use the existing `GettableSilence` methods, but they do not contain `ExpiresAt` necessary for the state snapshot.\r\n  - `SilenceState(context.Context) (alertingNotify.SilenceState, error)` could have instead returned the string encoding at the expense of type safety. The gain of a bit of performance on a low-volume endpoint seems to not be worth it though.\r\n  - We currently have to make a call to the AM implementation to get the silence state. For local AM, this is not a problem. For remote AM, this means an extra network call. This is obviously not great, but I don't think there is a clear improvement to be made here without going full CRD\/async reconciliation.\r\n- We can put this behind a FF if that's desired but seeing as this is a bugfix at heart, I would prefer not to.\r\n- For remote alertmanager maintainers: The way the remote AM currently reads state from the kvstore but never saves it back seems wrong and I believe is likely not working as expected for primary remote AM. Either way, fixing the logic was out of scope for this PR, I implemented `SilenceState` according to what made sense to me.\r\n","comments":[],"labels":["type\/bug","area\/alerting","area\/backend","add to changelog","no-backport"]},{"title":"[WIP] Unified storage entity server improvements","body":"**What is this feature?**\r\n\r\n- Improve logging in Entity Server.\r\n- TODO: keep describing\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nNone\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/chore","area\/backend","go","no-changelog"]},{"title":"Spike: Slack App - Analyze the use of Screenshot Service","body":"We developed our own DashboardImage service which takes a dashboard\/panel screenshot and uploads it in storage.\nThere's already a Screenshot service that does it quite similar.\nWe should investigate if we can make use of it and delete the current DashboardImage service","comments":["@juanicabanas please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["area\/backend","area\/frontend","team\/grafana-sharing"]},{"title":"Transformations - make substring and not substring transformer case insensitive.","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nGot some [feedback](https:\/\/raintank-corp.slack.com\/archives\/C036J5B39\/p1709890324917879?thread_ts=1709852108.538739&cid=C036J5B39) on the substring transformer for value filtering that it would be nicer if it was case insensitive. So this adds that :)\r\n\r\n**Why do we need this feature?**\r\n\r\nSometimes you don't know if something is cased when searching for it.\r\n\r\n**Who is this feature for?**\r\n\r\neveryone\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["imo this should be an option, not the only behavior. fine to make it default tho.",">imo this should be an option, not the only behavior. fine to make it default tho.\r\n\r\nI agree @leeoniya, but I didn't see an easy way to introduce a checkbox to the filter by value model, would take more effort. What do you think, should we hold off on this but then file a ticket to do it properly?","> > imo this should be an option, not the only behavior. fine to make it default tho.\r\n> \r\n> I agree @leeoniya, but I didn't see an easy way to introduce a checkbox to the filter by value model, would take more effort. What do you think, should we hold off on this but then file a ticket to do it properly?\r\n\r\nIMO I think we can move forward with merging this and have the default behavior be case insensitive. This default makes sense to me as it is the least limiting option. In the future based on usage \/ feedback we can consider adding more advanced filtering \/ matching modes to this",":+1: all good, as long as the 0-coercion thing is not an issue."],"labels":["area\/frontend","area\/transformations","no-backport","no-changelog"]},{"title":"K8s: file storage - add sync around resource version (RV) management","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nA bunch of changes. Things were pretty far from where they need to be for file-storage.\r\n\r\n* Buffers events now for watchers that may miss events around subscribing \/ creation boundaries\r\n* Implements watchBookmarks\r\n* Implements SendInitialEvents\r\n* Handles FieldSelectors correctly\r\n* Handles namespaces correctly for watch. Previously it will send events not related to a watchers namespace their way.\r\n* Implements predicate.AllowWatchBookmarks\r\n* Protects RV generation and maintenance\r\n* Passes the watcher tests written for etcd in kubernetes repo, copied here now\r\n* Adequately handles `MODIFIED` events internally that are needed to be streamed to watchers as ADDED or DELETED as necessary\r\n* It resolves a problem with aggregated service registration on startup, something that is currently only impacting the example service and only sporadically.\r\n\r\n\r\n**Why do we need this feature?**\r\nWe need a working file storage. We have gotten away with too lax an implementation for sometime.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana App Platform\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/build-packaging","area\/backend","type\/ci","no-changelog"]},{"title":"Cloud migrations: create endpoint to create an access token","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAs part of the project to migrate instances to cloud, this PR adds and endpoint (`POST \/api\/cloudmigrations\/token`) that can be used to create an access policy and a token with the scopes `cloud-migrations:read` and `cloud-migrations:write`. This token will be used in the migration process.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nCloses https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/687\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"NodeGraphPanel: Fix invisible arrow tips in Editor","body":"**Which issue(s) does this PR fix?**:\n\nWhen opening the editor on a NodeGraph panel, arrow tips are invisible.\n\n**Special notes for your reviewer:**\n\nPlease check that:\n- [x] It works as expected from a user's perspective.\n","comments":["<details><summary>Screenshots of the browser debugger<\/summary>\r\n<p>\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/25167\/523bfb63-4267-4d26-9f39-189b02900b27)\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/25167\/b7e6cf3a-27fd-4ce6-a76d-802701f4e4db)\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/25167\/30415149-0d4f-4af8-9309-d10be72dab96)\r\n<\/p>\r\n<\/details> \r\n\r\nin the third screenshot you can see the inspector jumped to the node that was returned by getElementById, and from the grey coloration you can tell it's the invisible copy of the NodeGraphPanel rather than the one in the foreground that we would have expected\r\n\r\nedit to clarify: even though it has \"lmao\" where my pull request puts the \"namespace\", this was an edit made to the code to show what the code does without this pull request. with the pull request, editor and dashboard get different IDs and the tips are visible again"],"labels":["area\/frontend","pr\/external"]},{"title":"K8s: Add slog wrapper","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend"]},{"title":"QueryLibrary: Use default variable values in render","body":"**What is this feature?**\r\n\r\nDefault values in the template were ignored, this makes it so they are used if the values are not applied.\r\n","comments":[],"labels":["area\/backend","no-changelog","area\/query-library"]},{"title":"postgres: improved tests","body":"test only change.\r\n\r\nimproved tests in 2 ways:\r\n- added more tests\r\n- adjusted the time-range used in the tests to be more \"ugly\", to better surface any potential problems in the future.\r\n\r\nhow to test:\r\n- if the CI job succeeds, it's ok","comments":[],"labels":["datasource\/Postgres","area\/backend","no-changelog"]},{"title":"AdhocFilters: Support `-- Mixed --` data source","body":"### Discussed in https:\/\/github.com\/grafana\/grafana\/discussions\/39396\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **Grubana** September 19, 2021<\/sup>\r\n<!--\r\nPlease use this template to create your bug report. By providing as much info as possible you help us understand the issue, reproduce it and resolve it for you quicker. Therefor take a couple of extra minutes to make sure you have provided all info needed.\r\n\r\nPROTIP: record your screen and attach it as a gif to showcase the issue.\r\n\r\n- Questions should be posted to: https:\/\/community.grafana.com\r\n- Use query inspector to troubleshoot issues: https:\/\/bit.ly\/2XNF6YS\r\n- How to record and attach gif: https:\/\/bit.ly\/2Mi8T6K\r\n-->\r\n\r\n**What happened**:\r\n![19-09-_2021_22-52-38](https:\/\/user-images.githubusercontent.com\/1355287\/133942703-54e9912a-8853-42cf-aa55-9f2a8e272ca6.gif)\r\nWhen adding an adhoc filter within a mixed datasource panel, the filter is not getting applied to the queries.\r\n\r\n**What you expected to happen**:\r\nFilters are applied to all adhoc enabled datasources within the panel\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nCreate a table panel with a mixed datasource.\r\nTry to filter for a value within the table.\r\n\r\n**Anything else we need to know?**:\r\nLooks like the adhoc filter is tied to the mixed datasource type, instead of the concrete datasources used in the panel config\r\n\r\n**Environment**:\r\n- Grafana version: v8.1.3 (a61f38238c)\r\n<\/div>","comments":[],"labels":["type\/feature-request","area\/dashboard\/templating","team\/grafana-dashboards"]},{"title":"alerting: get started tutorial","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\nTutorial on how to set up alerting by providing hands on practice, and simple explanations\r\n\r\nWhich issue(s) does this PR fix?:\r\n\r\nFixes https:\/\/github.com\/grafana\/grafana\/issues\/84352\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["One thing upfront - I would perhaps follow the style and structure of this tutorial: https:\/\/grafana.com\/tutorials\/create-alerts-with-logs\/ with section headers like Introduction and Before you begin. I know they're not consistent across the board - but a few seem to follow this pattern, so makes sense to me.\r\nAlso - in the Introduction, I would add \"On this tutorial, you will:\" and then detail the main learning outcomes of the tutorial upfront. It's not a guide; that will come later once we translate it into the docs:)",">One thing upfront - I would perhaps follow the style and structure of this tutorial: https:\/\/grafana.com\/tutorials\/create-alerts-with-logs\/ with section headers like Introduction and Before you begin. I know they're not consistent across the board - but a few seem to follow this pattern, so makes sense to me.\r\nAlso - in the Introduction, I would add \"On this tutorial, you will:\" and then detail the main learning outcomes of the tutorial upfront. It's not a guide; that will come later once we translate it into the docs:)\r\n\r\nBig thanks, @brendamuir , for jumping on this PR so quickly! I will take a look, make some changes and get back to you \ud83d\udc4d ","Added @gillesdemey Gilles here for review as I know he's worked with tutorials in the past and created our get started video. I'm sure he'll have great content feedback :) ","Running this locally it seems like the topic title isn't showing up :( \r\n\r\nCould this be an issue with my local setup or did we miss something to make it show up properly?\r\n<img width=\"374\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/afefcfbb-48f1-4b33-9d8c-e644da1f16e8\">\r\n","thank you both @brendamuir and @gillesdemey  for your reviews \ud83d\ude4f \r\n\r\nOriginally I was working on google doc, so that's why the PR did not have any formatting applied.\r\n\r\nI have been commiting your changes, pplying the advice in the commented sections, and updating my local repo. \r\n\r\nI have been also working on formatting and editing. Let me push my latest changes so we all are working on the same page","I didnt go through all the titles-but you get the gist.:)","> I didnt go through all the titles-but you get the gist.:)\r\n\r\n@brendamuir  i have updated the headings locally, and pushed, so i could see how they would look like using the preview in vscode","Oops, sorry to point out the formatting while it was still in-progress! \ud83d\ude4f "],"labels":["type\/docs"]},{"title":"Add 301 redirect to Saga site","body":"To get the Saga site set as a property on Google Search Console so we can dig into analytics there we need to implement a 301 from `\/saga\/overview `to `\/saga\/overview\/`","comments":["SEO - found more issues with Saga and will be discussing next steps in regards to 301 redirects. I'll update here once I know more.","Notes from meeting wtih @AnneB-SEO2 \n\n- Don't use canonical tags; we need to use 301 redirects\n- There needs to be a decision on using the trailing slash to be consistent with a dev portal"],"labels":["saga design system","saga ds: dev work"]},{"title":"Org: Adding endpoint to get Org Preferences by Org ID","body":"**What is this feature?**\r\n\r\nExposes a new endpoint \/orgs\/{org_id}\/preferences to allow for Org preferences to be retrieved without switching the current user's Org.\r\n\r\n**Why do we need this feature?**\r\n\r\nCleaner API to avoid multiple calls on the grafana backend to accomplish the same result.\r\n\r\n**Who is this feature for?**\r\n\r\nDevelopers of tooling around grafana utilizing the API\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #84309 \r\n\r\n**Special notes for your reviewer:**\r\n\r\nI'm invoking the prefApi directly to avoid re-creating the same logic in the OrgsApi, but if that is preferred, I can refactor it to do so. \r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","pr\/external"]},{"title":"Alerting: Implement SaveAndApplyConfig in the forked Alertmanager (remote primary)","body":"This PR implements `SaveAndApplyConfig` in the forked Alertmanager for _remote primary_ mode.","comments":[],"labels":["area\/alerting","area\/backend","no-backport","no-changelog","kata:am_unify"]},{"title":"Unified Storage: added pkg\/util\/ringq package to handle queueing of notifications","body":"**What is this feature?**\r\n\r\nIntroduce a library that implements:\r\n\r\n- `RingQ`: A generic Queue backed by a slice-based growable\/shrinkable Ring Buffer, with the possibility to set a max capacity. If max capacity is reached, then the next item to be dequeued is overwritten. Simple enough but not safe for concurrency.\r\n- `DynChan` and `DynChanMax`: Wrappers around that Queue that provides two channels, one send-only and another receive-only. It also provides basic stats about the queue. The former does not enforce a limit on the capacity of the underlying `RingQ`, while the latter does.\r\n\r\nIt's ~200 of runnable code, the rest is comments, tests and benchmarks.\r\n\r\n**Why do we need this feature?**\r\n\r\nThis is needed in Unified Storage in two places:\r\n\r\n1. To allow Broadcaster to communicate with the watch implementation with a lossless, never-blocking channel (`DynChan`), that will also grow and shrink to reclaim memory after spiky loads.\r\n2. To allow Broadcaster to communicate with individual watchers with a lossy, never-blocking channel (`DynChanMax`), that will also grow and shrink to reclaim memory after spiky loads, but will be capped so that a single lagging client does not lead to OOM. \r\n\r\n**Who is this feature for?**\r\n\r\nEveryone.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nNone, but is closely related to https:\/\/github.com\/grafana\/search-and-storage-team\/issues\/4\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","go","no-changelog"]},{"title":"Replace docs\/reference with ref URIs in Alerting","body":"You can use `ref` URIs in admonitions (or any shortcodes) because they are inline and not subject to the issues noted in the [`admonition` shortcode](https:\/\/grafana.com\/docs\/writers-toolkit\/write\/shortcodes\/#code-shortcode:~:text=to%20core%20understanding.-,WARNING,For%20more%20information%2C%20refer%20to%20Markdown%20Reference%20Links%20in%20Shortcodes.,-Examples).\r\n\r\nThe `ref` URIs perform the same pattern matching as `docs\/reference` but don't require the use of reference-style links and the destinations are ordinary (full) URLs that can include version substitution. Unlike `docs\/reference`, the implementation doesn't use `relref` so you don't have to be careful with omitting trailing slashes and the links will follow redirects.\r\n\r\nDocumentation: https:\/\/github.com\/grafana\/writers-toolkit\/pull\/589.\r\n\r\nI have manually clicked all the links in all the affected pages and confirmed that they take you somewhere.\r\n","comments":[],"labels":["type\/docs","no-changelog"]},{"title":"Alerting: implement SaveAndApplyConfig in the remote Alertmanager struct","body":"This PR implements `SaveAndApplyConfig`, which sends a configuration to the remote Alertmanager.","comments":[],"labels":["area\/alerting","area\/backend","no-backport","no-changelog","kata:am_unify"]},{"title":"[Feature Request] Improve error message when an unauthorized user attempts to log in to Grafana instance","body":"Coming from VOC: see [slide](https:\/\/docs.google.com\/presentation\/d\/1Rr3LFBk24Twy0SQi_lNY4-iBQopWN7xWzTUglBzCUIw\/edit#slide=id.g2667a96c7fe_0_367)\n\n","comments":["@yaelleC please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","I tried to access a colleague's instance and denied my access, so I got this message:\r\n<img width=\"1434\" alt=\"Captura de pantalla 2024-03-18 a las 13 15 27\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/65417731\/0dbef9b3-28cf-4943-80d8-49ffbb81f82c\">\r\nThe code can be found here: https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/api\/login_oauth.go#L25 \r\nHope this helps to understand better the issue.\r\n"],"labels":["area\/frontend","effort\/medium","internal"]},{"title":"Chore: Vendor wire into pkg\/build","body":"This may look like a big PR, but most of the files are actual `testdata` from the original wire. \r\nThis vendored wire can be used with either `github.com\/google\/wire` import or `github.com\/grafana\/grafana\/pkg\/build\/wire`. Otherwise it's fully compatible with the original wire.\r\n\r\nTo those wondering why we're doing this: google\/wire seems to be mostly unmaintained and no new features planned there. However, the codebase is tiny and we can extend wire to analyse and visualise the dependency graph, to add better support for graceful shutdown during the instantiation phase and maybe some other features.","comments":[],"labels":["type\/build-packaging","area\/backend"]},{"title":"Loki: Decouple from `infra\/tracing`","body":"Following our last meeting on decoupling, I've investigated `pkg\/infra\/tracing`, but it seems quite different from `grafana-plugin-sdk-go\/backend\/tracing`, so I don't think we can use the latter one directly in the Loki plugin.\r\n\r\nThis is a first PR to decouple the Loki plugin from pkg\/infra\/tracing. At the moment it simply pkg\/infra\/tracing into the plugin itself. We can consider moving some stuff into `grafana-plugin-sdk-go\/backend`, although IIRC there were some concerns on this during the meeting, so it has to be investigated more.\r\n\r\nLet me know what you think of this first proposal, so that we can iterate on this.","comments":["@fabrizio-grafana Could you share more details on - \"but it seems quite different from grafana-plugin-sdk-go\/backend\/tracing\". ","> @fabrizio-grafana Could you share more details on - \"but it seems quite different from grafana-plugin-sdk-go\/backend\/tracing\".\r\n\r\nSure. I simply mean that, looking at the code in `grafana-plugin-sdk-go\/backend\/tracing`, this seems quite limited compared to the one of `pkg\/infra\/tracing`. In fact, `grafana-plugin-sdk-go\/backend\/tracing` contains less than 100 LOCs, which only seem to deal with basic setups of tracers. Instead, `pkg\/infra\/tracing` has ~500 LOCs that deal with more convoluted tracers which have more context (e.g., they seem to search for specific span attributes).\r\n\r\nI can investigate more the differences, but so far `grafana-plugin-sdk-go\/backend\/tracing` doesn't look like a drop-in replacement for `pkg\/infra\/tracing`. As such, trying to use and potentially adapt the former for Loki could take some time and even cause some regressions, that's why I was proposing to do use `grafana-plugin-sdk-go\/backend\/tracing` only later.\r\n\r\nOf course if I'm missing something and you have more knowledge of what the two packages do, feel free to correct me!"],"labels":["area\/backend","datasource\/Loki","no-changelog"]},{"title":"Frontend sandbox: Worker postMessage failing in specific scenarios","body":"Plugins using service workers fail at time when trying to pass data via postMessage because proxied objects can't be serialized. \r\n\r\nInvestigate why the original distortion for service workers is not correctly serialising these objects. ","comments":[],"labels":["type\/bug","internal","area\/plugins\/sandbox"]},{"title":"Frontend Sandbox: Public dashboard not loading","body":"\r\nThe bug:\r\n\r\nPublic dashboards with panels and datasources running inside the sandbox are not working because the endpoint to retrieve the module.js location from settings requires permissions. \r\n\r\n\r\nExpected behaviour:\r\n\r\nThe frontend sandbox should work as usual with public dashboards. ","comments":[],"labels":["type\/bug","internal","area\/plugins\/sandbox"]},{"title":"[WIP] [Don't look yet] Unified Storage: Add improved Watch for Postgres","body":"**What is this feature?**\r\n\r\nWithin Unified Storage:\r\n\r\n- Add PostreSQL watcher based on LISTEN\/NOTIFY, inspired by https:\/\/github.com\/grafana\/grafana\/pull\/83772 and https:\/\/github.com\/grafana\/grafana\/pull\/84129, but not yet wired to the main implementation.\r\n- Fix broadcaster either dropping incoming notifications or blocking\r\n- Fix broadcaster to allow proper termination of watcher implementation\r\n- Fix sqlstash not properly doing teardown\r\n- Fix many data races\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nNone, but is closely related to https:\/\/github.com\/grafana\/search-and-storage-team\/issues\/4\r\n\r\n**Special notes for your reviewer:**\r\n\r\nChecked that:\r\n- [X] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [X] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["This will be broken down into different PRs to make it more approachable, but will still serve as guidance.","1. PR for `RingQ` and `DynChan`: https:\/\/github.com\/grafana\/grafana\/pull\/84657\r\n2. [Optional] PR to ignore Go coverage files: https:\/\/github.com\/grafana\/grafana\/pull\/84702\r\n3. PR for general improvements to Entity Store Server (still a WIP): https:\/\/github.com\/grafana\/grafana\/pull\/84703\r\n\r\nThe last one is being actively worked on, and is needed to unblock the followup PR for Postgres."],"labels":["area\/backend","area\/backend\/db\/migration"]},{"title":"Chore(deps): Bump buf.build\/gen\/go\/parca-dev\/parca\/protocolbuffers\/go from 1.28.1-20221222094228-8b1d3d0f62e6.4 to 1.33.0-20240222154137-7ec32567cf78.1","body":"[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=buf.build\/gen\/go\/parca-dev\/parca\/protocolbuffers\/go&package-manager=go_modules&previous-version=1.28.1-20221222094228-8b1d3d0f62e6.4&new-version=1.33.0-20240222154137-7ec32567cf78.1)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["area\/backend","dependencies","go"]},{"title":"Transform Inner Join: Fails to select all matching rows","body":"### What happened?\n\nAssuming sample data from system alerts:\r\n\r\nA:\r\nid,alert\r\n19,\"Drive C: over 90% full\"\r\n23,\"Drive C: over 90% full\"\r\n23.\"Drive D over 90% full\"\r\n\r\nB:\r\nid.systemName\r\n19,\"Server1\"\r\n23,\"Server2\"\r\n\r\nThe return on inner join was:\r\n\r\nid,systemName,alert\r\n19,\"Server1\",\"Drive C: over 90% full\"\r\n23,\"Server2\",\"Drive D: over 90% full\"\n\n### What did you expect to happen?\n\nThe result should have been:\r\n\r\nid,systemName,alert\r\n19,\"Server1\", \"Drive C: over 90% full\"\r\n23,\"Server2\",\"Drive C: over 90% full\"\r\n23,\"Server2\",\"Drive D: over 90% full\"\n\n### Did this work before?\n\nNo\n\n### How do we reproduce it?\n\n1. Setup two queries with an id between. The first query, for alerts, is one to many for deviceId and alertText. The second query, for device name, is one to one for id to name.\r\n2. Join with inner join\r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: Grafana v11.0.0-67977 (0e7c0d25fe)\r\nOS: Windows\r\nBrowser: Chrome\r\n\n\n### Grafana platform?\n\nI use Grafana Cloud\n\n### Datasource(s)?\n\n_No response_","comments":["Edited to fix typo. "],"labels":["area\/transformations"]},{"title":"Table Panel: Fix image disappearing when datalinks applied","body":"**What is this feature?**\r\n\r\nWhen using the image cell with a datalink and hovering over the image the image would disappear because no absolute width or height is applied. This makes the link functionally have zero width and height making it so it's no displayed. This PR sets the height of the link to the height of the cell (minus 2px).\r\n\r\nWith old styles container width would be sufficient for this, but with height now changing with hover for text wrapping this no longer works in the intended way.\r\n\r\n**Why do we need this feature?**\r\n\r\nPrevents images from disappearing on hover.\r\n\r\n\r\n### Before: \r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/199847\/20312796-18f3-40a8-9fbf-96218fe32dff\r\n\r\n### After:\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/199847\/7a3cde94-42b9-4b9a-8bab-233a3dd76873\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["@codeincarnate do you have a datasource that returns image urls I can use to test?","@gtk-grafana @nmarrs I'm using [this dashboard for testing](https:\/\/github.com\/grafana\/grafana\/files\/14641864\/images-disappearing.json)\r\n","Fixed up the issue with the height shifting. Applying an offset that's inline with the padding so nothing changes \ud83d\ude04 ","Tested locally and LGTM! :shipit: "],"labels":["area\/panel\/table","area\/frontend","add to changelog","no-backport"]},{"title":"Bump google.golang.org\/api from 0.155.0 to 0.170.0","body":"Bumps [google.golang.org\/api](https:\/\/github.com\/googleapis\/google-api-go-client) from 0.155.0 to 0.170.0.\n<details>\n<summary>Release notes<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/releases\">google.golang.org\/api's releases<\/a>.<\/em><\/p>\n<blockquote>\n<h2>v0.170.0<\/h2>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.169.0...v0.170.0\">0.170.0<\/a> (2024-03-14)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2458\">#2458<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/fb2b816b756c5b8bc80f5485ad93d710fdfdb6ea\">fb2b816<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2460\">#2460<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/dc4811aa3cfdf120544f3e2eddd1962a56794a08\">dc4811a<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2461\">#2461<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/e938bf17ecd2b8430d95b7adb066f9a35f03dceb\">e938bf1<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2464\">#2464<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/c3a2f34ee8091bf1aab9f9a44d38a42f40d5a81d\">c3a2f34<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2466\">#2466<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/de61eb772c1f4b91bf46934101331953c82f3d96\">de61eb7<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2468\">#2468<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/67f16b6ada0cd92d94d98bb32f3bec61ca3472c6\">67f16b6<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2471\">#2471<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/5537676cf7a165ff492701a368b94c11511d2929\">5537676<\/a>)<\/li>\n<\/ul>\n<h2>v0.169.0<\/h2>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.168.0...v0.169.0\">0.169.0<\/a> (2024-03-07)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2450\">#2450<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/d22da1806db891da12d7290ef4334e18fbaf0ca2\">d22da18<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2454\">#2454<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/2675c0abf9e442bb3ac35e18ecc196aaaa4facd3\">2675c0a<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2457\">#2457<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/a488112cd111b883dfaffa7e4ab67e99a6ea9b90\">a488112<\/a>)<\/li>\n<\/ul>\n<h2>v0.168.0<\/h2>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.167.0...v0.168.0\">0.168.0<\/a> (2024-03-04)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2431\">#2431<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/e635a5e61572ec4a7dbad19a9e32ab7918cde9f0\">e635a5e<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2433\">#2433<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/0c30ecca06ff770fafce74743b0a038122e31813\">0c30ecc<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2436\">#2436<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/4dc71d4531deeb116af23cd13245ca644f0be991\">4dc71d4<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2438\">#2438<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/d290e1861655087f52294c6e4994688cbfb3098a\">d290e18<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2442\">#2442<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/9f9c0cf59e864281bd8b04319e4ce4c3914e147c\">9f9c0cf<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2443\">#2443<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/ced0c099be7b1bfa2802567f2a6e57b69b29285e\">ced0c09<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2445\">#2445<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/4fa90c93dd04c64c6e1a35b358a23cb014be0e7a\">4fa90c9<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2447\">#2447<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/022c85c3d443e58228ea3eb51ee621f2a20d3a45\">022c85c<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2448\">#2448<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/af383c78468f5129b2333ad7222fb361873a4cd4\">af383c7<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2449\">#2449<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/b43898129eca3b710c3573c48672b73a46ea9cdc\">b438981<\/a>)<\/li>\n<\/ul>\n<h2>v0.167.0<\/h2>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.166.0...v0.167.0\">0.167.0<\/a> (2024-02-23)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2427\">#2427<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/f72b5af5b412eec03394457a27065e58ae6d7f43\">f72b5af<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2429\">#2429<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/55a9e5a4be3360d0294c3811503e83c694ed8d28\">55a9e5a<\/a>)<\/li>\n<\/ul>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Changelog<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/blob\/main\/CHANGES.md\">google.golang.org\/api's changelog<\/a>.<\/em><\/p>\n<blockquote>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.169.0...v0.170.0\">0.170.0<\/a> (2024-03-14)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2458\">#2458<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/fb2b816b756c5b8bc80f5485ad93d710fdfdb6ea\">fb2b816<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2460\">#2460<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/dc4811aa3cfdf120544f3e2eddd1962a56794a08\">dc4811a<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2461\">#2461<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/e938bf17ecd2b8430d95b7adb066f9a35f03dceb\">e938bf1<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2464\">#2464<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/c3a2f34ee8091bf1aab9f9a44d38a42f40d5a81d\">c3a2f34<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2466\">#2466<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/de61eb772c1f4b91bf46934101331953c82f3d96\">de61eb7<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2468\">#2468<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/67f16b6ada0cd92d94d98bb32f3bec61ca3472c6\">67f16b6<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2471\">#2471<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/5537676cf7a165ff492701a368b94c11511d2929\">5537676<\/a>)<\/li>\n<\/ul>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.168.0...v0.169.0\">0.169.0<\/a> (2024-03-07)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2450\">#2450<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/d22da1806db891da12d7290ef4334e18fbaf0ca2\">d22da18<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2454\">#2454<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/2675c0abf9e442bb3ac35e18ecc196aaaa4facd3\">2675c0a<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2457\">#2457<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/a488112cd111b883dfaffa7e4ab67e99a6ea9b90\">a488112<\/a>)<\/li>\n<\/ul>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.167.0...v0.168.0\">0.168.0<\/a> (2024-03-04)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2431\">#2431<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/e635a5e61572ec4a7dbad19a9e32ab7918cde9f0\">e635a5e<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2433\">#2433<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/0c30ecca06ff770fafce74743b0a038122e31813\">0c30ecc<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2436\">#2436<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/4dc71d4531deeb116af23cd13245ca644f0be991\">4dc71d4<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2438\">#2438<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/d290e1861655087f52294c6e4994688cbfb3098a\">d290e18<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2442\">#2442<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/9f9c0cf59e864281bd8b04319e4ce4c3914e147c\">9f9c0cf<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2443\">#2443<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/ced0c099be7b1bfa2802567f2a6e57b69b29285e\">ced0c09<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2445\">#2445<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/4fa90c93dd04c64c6e1a35b358a23cb014be0e7a\">4fa90c9<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2447\">#2447<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/022c85c3d443e58228ea3eb51ee621f2a20d3a45\">022c85c<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2448\">#2448<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/af383c78468f5129b2333ad7222fb361873a4cd4\">af383c7<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2449\">#2449<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/b43898129eca3b710c3573c48672b73a46ea9cdc\">b438981<\/a>)<\/li>\n<\/ul>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.166.0...v0.167.0\">0.167.0<\/a> (2024-02-23)<\/h2>\n<h3>Features<\/h3>\n<ul>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2427\">#2427<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/f72b5af5b412eec03394457a27065e58ae6d7f43\">f72b5af<\/a>)<\/li>\n<li><strong>all:<\/strong> Auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2429\">#2429<\/a>) (<a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/55a9e5a4be3360d0294c3811503e83c694ed8d28\">55a9e5a<\/a>)<\/li>\n<\/ul>\n<h2><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.165.0...v0.166.0\">0.166.0<\/a> (2024-02-21)<\/h2>\n<h3>Features<\/h3>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Commits<\/summary>\n<ul>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/cb0f4337e9e6650b46fab53849e481b683150ad5\"><code>cb0f433<\/code><\/a> chore(main): release 0.170.0 (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2459\">#2459<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/5537676cf7a165ff492701a368b94c11511d2929\"><code>5537676<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2471\">#2471<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/cca46fb78503badf9386727652d27ba35ee58f68\"><code>cca46fb<\/code><\/a> chore(deps): bump google.golang.org\/protobuf (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2470\">#2470<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/67f16b6ada0cd92d94d98bb32f3bec61ca3472c6\"><code>67f16b6<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2468\">#2468<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/de61eb772c1f4b91bf46934101331953c82f3d96\"><code>de61eb7<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2466\">#2466<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/73e8b66a1d2d7b064cb44afe531c073e930f1665\"><code>73e8b66<\/code><\/a> chore(all): update all (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2462\">#2462<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/cc19990c5548d4b26ce082c0ed04cc8dd8a016c6\"><code>cc19990<\/code><\/a> chore(deps): ignore google\/go-github package updates (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2465\">#2465<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/c3a2f34ee8091bf1aab9f9a44d38a42f40d5a81d\"><code>c3a2f34<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2464\">#2464<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/e938bf17ecd2b8430d95b7adb066f9a35f03dceb\"><code>e938bf1<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2461\">#2461<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/commit\/dc4811aa3cfdf120544f3e2eddd1962a56794a08\"><code>dc4811a<\/code><\/a> feat(all): auto-regenerate discovery clients (<a href=\"https:\/\/redirect.github.com\/googleapis\/google-api-go-client\/issues\/2460\">#2460<\/a>)<\/li>\n<li>Additional commits viewable in <a href=\"https:\/\/github.com\/googleapis\/google-api-go-client\/compare\/v0.155.0...v0.170.0\">compare view<\/a><\/li>\n<\/ul>\n<\/details>\n<br \/>\n\n\n[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=google.golang.org\/api&package-manager=go_modules&previous-version=0.155.0&new-version=0.170.0)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["area\/backend","dependencies","go"]},{"title":"Chore: Add ts-prune for finding dead\/unused exports","body":"was looking for a way to make sure our large [newVizTooltips cleanup PR](https:\/\/github.com\/grafana\/grafana\/pull\/84420) did not leave now-unused things behind. `ts-prune` helped catch quite a few leftovers (and then-some) :)\r\n\r\n```\r\nyarn run deadcode > deadcode.txt\r\n```\r\n\r\nfound on the interwebs: https:\/\/blog.logrocket.com\/how-detect-dead-code-frontend-project\/","comments":[],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"Chore: Refactor render via http","body":"**What is this feature?**\r\n\r\nRefactor render PNG, PDF and CSV\r\n* Extract duplicated code\r\n* Remove Encoding hardcoded value and use the renderType\r\n* Rename functions\r\n* Improve funcs responsibility\r\n\r\nWe could improve the codebase more, but this is big enough to review.\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"Prometheus: Improve Code Mode autocomplete performance for large numbers of metric names","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nWhen a Prometheus instance has an enormous number of unique metric names (on the order of many hundreds of thousands, or millions), it takes a long time (single to double-digit seconds) to load metric names to power the autocomplete experience in [Code Mode][code-mode]. Rendering such a large volume of label names in the Monaco editor can freeze the UI.\r\n\r\n\r\n**What would you like to be added**:\r\n\r\nWhen the number of metric names exceeds some threshold value _n_ (TBD, perhaps 10k), use fuzzy search to provide only the _n_ best metric name matches to the Monaco editor's pool of autocomplete values.\r\n\r\n**Who is this feature for?**\r\n\r\nPrometheus data source users, especially those with hundreds of thousands to millions of unique metric names.\r\n\r\n[code-mode]: https:\/\/grafana.com\/docs\/grafana\/latest\/datasources\/prometheus\/query-editor\/#code-mode","comments":["## Research findings\r\n\r\nThe [Monaco editor](https:\/\/microsoft.github.io\/monaco-editor) that powers [Code Mode][code-mode] in the Prometheus data source has some quirks that will require some creativity in resolving this issue. Challenges include:\r\n- Monaco doesn't provide a built-in way to limit the number of suggestions it renders in the dropdown.\r\n- When supplying our own autocomplete values to Monaco (as we do today), it continues to use its own matching algorithm for autocomplete, so there are no guarantees that autocomplete values we provide (which we can filter ourselves depending on the query) will appear in the autocomplete dropdown.\r\n\r\nOne possibility for overcoming these challenges is to:\r\n- Filter metric names when their count exceeds some threshold value (tbd, perhaps 10k)\r\n- As the user input changes, regenerate the list of metric names supplied to the Monaco editor as autocomplete possibilities, from the original list of all metric names\r\n- Tune the metric name search to match the results of [Monaco's own autocomplete suggestion algorithms](https:\/\/github.com\/microsoft\/vscode\/blob\/11865e136761bceef312301a60ec404017f80c0a\/src\/vs\/base\/common\/filters.ts#L628) closely enough that it doesn't feel like autocomplete results are \"missing\"\r\n\r\nThe filtering implementation could rely on a permissive implementation of [`@leeoniya\/ufuzzy`](https:\/\/www.npmjs.com\/package\/@leeoniya\/ufuzzy), which is already a dependency that's used elsewhere in the Prometheus data source.\r\n\r\nWe welcome feedback on this approach to limiting the number of autocomplete suggestions in [Code Mode][code-mode] :)\r\n\r\n[code-mode]: https:\/\/grafana.com\/docs\/grafana\/latest\/datasources\/prometheus\/query-editor\/#code-mode","> When supplying our own autocomplete values to Monaco (as we do today), it continues to use its own matching algorithm for autocomplete, so there are no guarantees that autocomplete values we provide (which we can filter ourselves depending on the query) will appear in the autocomplete dropdown.\r\n\r\nCan you clarify this a bit? Just to be sure I understand...\r\n\r\nThe full set of values is A, B, C, D, E, F, G. \r\nWe filter that down to A, B, C, D, which we provide to Monaco. \r\nMonaco does its own matching algorithm on top of that, and may only choose to provide A and B, but not C and D.  \r\n\r\nIs that right? ","@09jvilla your example is spot-on!","Thanks for clarifying @NWRichmond !"],"labels":["datasource\/Prometheus"]},{"title":"NodeGraph: Fix configuring arc colors with mixed case field names","body":"Fixes mixed case field names used to create colored arcs in NodeGraph's nodes.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nWhen a field has mixed case in the data frame, and the user uses the options panel to set a color for it, the code that applies the color property to the field in the DataFrame accidentally skips the field.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84609) <br\/>All committers have signed the CLA.","I'm not sure if \"panel data\" or \"panel json\" is what helps test this quickly, so here's both:\r\n\r\n<details><summary>Panel JSON<\/summary>\r\n<p>\r\n```json\r\n{\r\n  \"datasource\": {\r\n    \"uid\": \"adfrz9c3z2n0ge\",\r\n    \"type\": \"marcusolsson-static-datasource\"\r\n  },\r\n  \"gridPos\": {\r\n    \"h\": 8,\r\n    \"w\": 12,\r\n    \"x\": 0,\r\n    \"y\": 0\r\n  },\r\n  \"id\": 1,\r\n  \"options\": {\r\n    \"nodes\": {\r\n      \"arcs\": [\r\n        {\r\n          \"color\": \"#73BF69\",\r\n          \"field\": \"arc__lollmao\"\r\n        },\r\n        {\r\n          \"color\": \"#F2495C\",\r\n          \"field\": \"arc__whoaHey\"\r\n        }\r\n      ]\r\n    },\r\n    \"edges\": {}\r\n  },\r\n  \"targets\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"marcusolsson-static-datasource\",\r\n        \"uid\": \"adfrz9c3z2n0ge\"\r\n      },\r\n      \"frame\": {\r\n        \"fields\": [\r\n          {\r\n            \"name\": \"id\",\r\n            \"type\": \"string\",\r\n            \"config\": {},\r\n            \"values\": [\r\n              \"a\",\r\n              \"b\"\r\n            ]\r\n          },\r\n          {\r\n            \"name\": \"title\",\r\n            \"type\": \"string\",\r\n            \"config\": {},\r\n            \"values\": [\r\n              \"hello\",\r\n              \"goodbye\"\r\n            ]\r\n          },\r\n          {\r\n            \"name\": \"arc__lolLmao\",\r\n            \"type\": \"number\",\r\n            \"config\": {},\r\n            \"values\": [\r\n              0.5,\r\n              0.9\r\n            ]\r\n          },\r\n          {\r\n            \"name\": \"arc__whoaHey\",\r\n            \"type\": \"number\",\r\n            \"config\": {},\r\n            \"values\": [\r\n              0.5,\r\n              0.1\r\n            ]\r\n          }\r\n        ],\r\n        \"meta\": {},\r\n        \"name\": \"nodes\"\r\n      },\r\n      \"refId\": \"A\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"marcusolsson-static-datasource\",\r\n        \"uid\": \"adfrz9c3z2n0ge\"\r\n      },\r\n      \"frame\": {\r\n        \"fields\": [\r\n          {\r\n            \"config\": {},\r\n            \"name\": \"source\",\r\n            \"type\": \"string\",\r\n            \"values\": [\r\n              \"a\"\r\n            ]\r\n          },\r\n          {\r\n            \"config\": {},\r\n            \"name\": \"target\",\r\n            \"type\": \"string\",\r\n            \"values\": [\r\n              \"b\"\r\n            ]\r\n          },\r\n          {\r\n            \"config\": {},\r\n            \"name\": \"id\",\r\n            \"type\": \"string\",\r\n            \"values\": [\r\n              \"a-b\"\r\n            ]\r\n          }\r\n        ],\r\n        \"meta\": {},\r\n        \"name\": \"edges\"\r\n      },\r\n      \"hide\": false,\r\n      \"refId\": \"B\"\r\n    }\r\n  ],\r\n  \"title\": \"Panel Title\",\r\n  \"type\": \"nodeGraph\"\r\n}\r\n```\r\n<\/p>\r\n<\/details> \r\n\r\n<details><summary>Panel Data<\/summary>\r\n<p>\r\n```json\r\n{\r\n  \"state\": \"Done\",\r\n  \"series\": [\r\n    {\r\n      \"fields\": [\r\n        {\r\n          \"name\": \"id\",\r\n          \"type\": \"string\",\r\n          \"config\": {},\r\n          \"values\": [\r\n            \"a\",\r\n            \"b\"\r\n          ],\r\n          \"state\": null\r\n        },\r\n        {\r\n          \"name\": \"title\",\r\n          \"type\": \"string\",\r\n          \"config\": {},\r\n          \"values\": [\r\n            \"hello\",\r\n            \"goodbye\"\r\n          ],\r\n          \"state\": null\r\n        },\r\n        {\r\n          \"name\": \"arc__lolLmao\",\r\n          \"type\": \"number\",\r\n          \"config\": {},\r\n          \"values\": [\r\n            0.5,\r\n            0.9\r\n          ],\r\n          \"state\": {\r\n            \"calcs\": {\r\n              \"sum\": 1.4,\r\n              \"max\": 0.9,\r\n              \"min\": 0.5,\r\n              \"logmin\": 0.5,\r\n              \"mean\": 0.7,\r\n              \"last\": 0.9,\r\n              \"first\": 0.5,\r\n              \"lastNotNull\": 0.9,\r\n              \"firstNotNull\": 0.5,\r\n              \"count\": 2,\r\n              \"nonNullCount\": 2,\r\n              \"allIsNull\": false,\r\n              \"allIsZero\": false,\r\n              \"range\": 0.4,\r\n              \"diff\": 0.4,\r\n              \"delta\": 0.4,\r\n              \"step\": 0.4,\r\n              \"diffperc\": 0.8,\r\n              \"previousDeltaUp\": true\r\n            }\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"arc__whoaHey\",\r\n          \"type\": \"number\",\r\n          \"config\": {},\r\n          \"values\": [\r\n            0.5,\r\n            0.1\r\n          ],\r\n          \"state\": {\r\n            \"calcs\": {\r\n              \"sum\": 0.6,\r\n              \"max\": 0.5,\r\n              \"min\": 0.1,\r\n              \"logmin\": 0.1,\r\n              \"mean\": 0.3,\r\n              \"last\": 0.1,\r\n              \"first\": 0.5,\r\n              \"lastNotNull\": 0.1,\r\n              \"firstNotNull\": 0.5,\r\n              \"count\": 2,\r\n              \"nonNullCount\": 2,\r\n              \"allIsNull\": false,\r\n              \"allIsZero\": false,\r\n              \"range\": 0.4,\r\n              \"diff\": -0.4,\r\n              \"delta\": 0.1,\r\n              \"step\": -0.4,\r\n              \"diffperc\": -0.8,\r\n              \"previousDeltaUp\": false\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      \"refId\": \"A\",\r\n      \"meta\": {},\r\n      \"name\": \"nodes\",\r\n      \"length\": 2\r\n    },\r\n    {\r\n      \"fields\": [\r\n        {\r\n          \"config\": {},\r\n          \"name\": \"source\",\r\n          \"type\": \"string\",\r\n          \"values\": [\r\n            \"a\"\r\n          ],\r\n          \"state\": null\r\n        },\r\n        {\r\n          \"config\": {},\r\n          \"name\": \"target\",\r\n          \"type\": \"string\",\r\n          \"values\": [\r\n            \"b\"\r\n          ],\r\n          \"state\": null\r\n        },\r\n        {\r\n          \"config\": {},\r\n          \"name\": \"id\",\r\n          \"type\": \"string\",\r\n          \"values\": [\r\n            \"a-b\"\r\n          ],\r\n          \"state\": null\r\n        }\r\n      ],\r\n      \"meta\": {},\r\n      \"name\": \"edges\",\r\n      \"length\": 1,\r\n      \"refId\": \"B\"\r\n    }\r\n  ],\r\n  \"annotations\": [],\r\n  \"request\": {\r\n    \"app\": \"panel-editor\",\r\n    \"requestId\": \"Q105\",\r\n    \"timezone\": \"browser\",\r\n    \"panelId\": 1,\r\n    \"panelPluginId\": \"nodeGraph\",\r\n    \"dashboardUID\": \"ddfs0co4pwcg0c\",\r\n    \"range\": {\r\n      \"from\": \"2024-03-15T16:44:20.184Z\",\r\n      \"to\": \"2024-03-15T22:44:20.184Z\",\r\n      \"raw\": {\r\n        \"from\": \"now-6h\",\r\n        \"to\": \"now\"\r\n      }\r\n    },\r\n    \"timeInfo\": \"\",\r\n    \"interval\": \"30s\",\r\n    \"intervalMs\": 30000,\r\n    \"targets\": [\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"marcusolsson-static-datasource\",\r\n          \"uid\": \"adfrz9c3z2n0ge\"\r\n        },\r\n        \"frame\": {\r\n          \"fields\": [\r\n            {\r\n              \"name\": \"id\",\r\n              \"type\": \"string\",\r\n              \"values\": [\r\n                \"a\",\r\n                \"b\"\r\n              ]\r\n            },\r\n            {\r\n              \"name\": \"title\",\r\n              \"type\": \"string\",\r\n              \"values\": [\r\n                \"hello\",\r\n                \"goodbye\"\r\n              ]\r\n            },\r\n            {\r\n              \"name\": \"arc__lolLmao\",\r\n              \"type\": \"number\"\r\n            },\r\n            {\r\n              \"name\": \"arc__whoaHey\",\r\n              \"type\": \"number\"\r\n            }\r\n          ],\r\n          \"name\": \"nodes\"\r\n        },\r\n        \"refId\": \"A\"\r\n      },\r\n      {\r\n        \"datasource\": {\r\n          \"type\": \"marcusolsson-static-datasource\",\r\n          \"uid\": \"adfrz9c3z2n0ge\"\r\n        },\r\n        \"frame\": {\r\n          \"fields\": [\r\n            {\r\n              \"name\": \"source\",\r\n              \"type\": \"string\",\r\n              \"values\": [\r\n                \"a\"\r\n              ]\r\n            },\r\n            {\r\n              \"name\": \"target\",\r\n              \"type\": \"string\",\r\n              \"values\": [\r\n                \"b\"\r\n              ]\r\n            },\r\n            {\r\n              \"name\": \"id\",\r\n              \"type\": \"string\",\r\n              \"values\": [\r\n                \"a-b\"\r\n              ]\r\n            }\r\n          ],\r\n          \"name\": \"edges\"\r\n        },\r\n        \"hide\": false,\r\n        \"refId\": \"B\"\r\n      }\r\n    ],\r\n    \"maxDataPoints\": 528,\r\n    \"scopedVars\": {\r\n      \"__interval\": {\r\n        \"text\": \"30s\",\r\n        \"value\": \"30s\"\r\n      },\r\n      \"__interval_ms\": {\r\n        \"text\": \"30000\",\r\n        \"value\": 30000\r\n      }\r\n    },\r\n    \"startTime\": 1710542660184,\r\n    \"filters\": [],\r\n    \"endTime\": 1710542660185\r\n  },\r\n  \"timings\": {\r\n    \"dataProcessingTime\": 0\r\n  },\r\n  \"structureRev\": 2\r\n}\r\n```\r\n<\/p>\r\n<\/details> ","![image](https:\/\/github.com\/grafana\/grafana\/assets\/25167\/ad10dcce-28e9-4251-8ec1-0d4a1f2199ce)\r\nthis picture is from before my pull request\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/25167\/bd7d716f-86ab-470b-a98e-2628c037b30b)\r\nthis picture is with the code from my pull request\r\n\r\nthis time, when the option dropdown says \"field not found\", the color doesn't work\r\n\r\nbefore, when the option dropdown says \"field not found\", the color worked when it shouldn't have","I realize now that if a user previously had their color settings intentionally incorrect to work around this bug, an update will break their panels until they change it. How is this kind of issue handled in grafana in general? Breakage of user panels in minor revisions is hopefully strongly discouraged?\r\n\r\nIf the change puts a .toLowerString on both sides of the equals sign (i think even though technically\/theoretically correcter, fold case isn't necessarily better here?) it would continue working with previously incorrect configurations and start working with how a future user would expect it. Is there a mechanism to bring warnings to the attention of an editor or administrator while not unnecessarily confusing someone who's just there to look at the metrics and isn't interested in making adjustments? Theoretically this could be fixed automatically for the user by changing the settings of the panel, but should grafana do that, ever?","rebased the branch on latest main and it's now using toLowerCase for both field name and config field. This will not break existing user dashboards. A TODO comment is left in the code so it can be deprecated properly at a later date."],"labels":["area\/frontend","pr\/external"]},{"title":"[v10.4.x] Alerting: Clamp Loki ASH range query to configured max_query_length","body":"Backport 97f37b2e6fea4512fc5e77bb298da17788e792dd from #83986\n\n---\n\n**What is this feature?**\r\n\r\nThis PR clamps the time range of Loki queries using the state historian Loki client to the configured `max_query_length` value in order to avoid request failures.\r\n\r\n**Why do we need this feature?**\r\n\r\nIf Grafana is set up to query Loki for alert state history, annotation queries that span a time longer than `max_query_length` (721h = 30d1h by default) fail on the Loki side, which means state history does not appear in panels.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of dashboard annotations who have configured Grafana to save\/fetch alert state history from a Loki database.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/bug","area\/alerting","area\/backend","backport","no-changelog"]},{"title":"Storage: Include k8s-object fields when dual writing","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nImplementation of proposal 3 from [Design Doc: Unified storage dual writer](https:\/\/docs.google.com\/document\/d\/1mkIYgF5Ik3GOaKMLWueeEfvXbECqrfr2DBzLZM08ce0\/edit). \r\n\r\n**Why do we need this feature?**\r\n\r\nCurrently when a resource is created or updated via the new API server, k8s-object fields such as labels are not persisted. \r\n\r\n**Who is this feature for?**\r\n\r\nU.S. developers and users.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nSomewhat related to https:\/\/github.com\/grafana\/search-and-storage-team\/issues\/5\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\n**Special notes for your reviewer:**\r\n\r\nThis is the easiest implementation from the design doc but adding k8s fields to the result of a legacy create\/update is a bit awkward. Eventually we may want to choose another implementation such as Proposal 1. Additionally, I only updated playlists for now but we can add k8s-object fields to other entities as needed.\r\n\r\n<details closed>\r\n<summary>Reproduction steps <\/summary>\r\n<br>\r\n\r\n- Follow the instructions in the [README](https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/services\/store\/entity\/README.md) for creating a playlist. Make sure to include a label or an annotation to `playlist-generate.yaml`. \r\n- Check the entity table to check that the label\/annotation was persisted.\r\n- Follow the instructions to update a playlist making sure to update a label or annotation.\r\n- Check the entity table to ensure the label\/annotation was updated.\r\n\r\nGoing through the steps above using the main branch should show that labels\/new annotations aren't persisted\/updated.\r\n<\/details>\r\n\r\nAbout `origin_ts`:\r\nWe are supposedly setting the origin timestamp [when converting the resource to an entity](https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/services\/apiserver\/storage\/entity\/utils.go#L153). It relies on annotations, but it seems the timestamp was not getting added to annotations [here](https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/registry\/apis\/playlist\/conversions.go#L94) to begin with. Would be good to confirm if this was a bug.\r\n\r\n<details closed>\r\n<summary>Overview of previously missing fields in the entity table<\/summary>\r\n<br>\r\n\r\nFields that will start to be included:\r\n* labels\r\n* origin_ts (see previous section)\r\n* the following will be included if the annotations for them are added:\r\n  * folder\r\n  * updated_by\r\n  * slug \r\n\r\nAs far as I can tell `description`, `message` and `fields` aren't supported yet. If annotations are added for them along with the logic to extract them (similar to slug\/folder), they will be persisted as well. \r\n\r\nThe `status` and `errors` fields are out of scope as far as I can tell. They get generated during the Create\/Update process.\r\n<\/details>\r\n\r\nTODO\r\n- [ ] If the implementation is approved, I'll update tests.\r\n- [ ] The `origin` and `origin_key` fields are already being set. Should they be set to other values?\r\n- [ ] Clarify whether `description`, `message` and `fields` will be set using annotations.\r\n- [ ] Found a couple of small inconsistencies\/bugs while building the implementation. Confirm that they should be changed. Share with teammates in case they'd like to make the fixes. Could be helpful for dualwriter onboarding.\r\n  - [ ] Support `description`, `message` and `fields` depending on the outcome of the previous todo.\r\n  - [ ] The `generateName` value (runtime.Object field but not an entity field) doesn't get propagated and is instead set [here](https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/registry\/apis\/playlist\/legacy_storage.go#L125).\r\n  - [ ] The value of `created_by` is later than that of `updated_by`. I think it's because `updated_by` is less precise.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["Interesting approach! Right now the dual-writer operates somewhere in between mode 2 and mode 3 so we'll have to validate whether this will work the way we expect in mode 2 when we read an object from legacy storage and try to create\/update it in k8s, I'm thinking that we'll need to do more enrichment on read for things like the resource version optimistic locking to work since the caller will need to know the previous resource version.","> I'm thinking that we'll need to do more enrichment on read for things like the resource version optimistic locking to work since the caller will need to know the previous resource version.\r\n\r\nThanks for the input @DanCech! I need to take a closer look at what this entails. I'd like to check if this PR is incomplete without the resource version enrichment. If not, I might do it as a separate PR.","should we add a test for `enrichObject` fn?"],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"Canvas: Connections without a target behave unexpectedly during resize","body":"During resize of panel, since connections without targets are positioned by relative percent, instead of absolutely, unexpected positioning can occur, especially when navigating from panel edit to panel view.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/60050885\/88a104a3-80fe-496b-80f6-8f500110fa4d\r\n\r\n","comments":["This behavior is actually expected as the connections are anchored relative to the panel dimensions on a relative coordinate system (-1,-1, bottom left corner, to 1, 1 top right corner). When panel is resized the relative coordinates result in different positioning of the ends of the connection lines \ud83d\ude2c "],"labels":["area\/panel\/canvas"]},{"title":"Docs: What\u2019s new & Upgrade guide & Breaking changes v11.0-preview","body":"**PLEASE DO NOT ADD DIRECTLY TO THIS PR**\r\n\r\n- For What's new: Create entries using the website CMS\r\n- For Upgrade guide and Breaking changes: Create a branch and make changes there for review prior to merging\r\n\r\n************\r\nThis PR adds the What\u2019s new, Upgrade guide, and Breaking changes for Grafana v11.0-preview. These same pages will be reused for Grafana v11.0.\r\n\r\n**Note for reviewers**: Review for the What's new should be limited to placement of entries. Please do not make any copy edits except to the introductory text. If there's anything that looks wrong or is missing, please update the What's new in Cloud entry and notify me.\r\n*************\r\n\r\n**TO DO**\r\n\r\n- [ ] Add enablement videos as they are available - videos added but commented out. Will be commented in on a separate PR when videos are out of draft.\r\n- [ ] Update backport label\r\n\r\n","comments":[],"labels":["type\/docs","no-backport","no-changelog"]},{"title":"Prometheus: Improve Code Mode performance by truncating autocomplete results","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nWhen a Prometheus instance has an enormous number of unique metric names (on the order of many hundreds of thousands, or millions), it takes a long time (single to double-digit seconds) to load metric names to power the autocomplete experience in [Code Mode](https:\/\/grafana.com\/docs\/grafana\/latest\/datasources\/prometheus\/query-editor\/#code-mode). Rendering such a large volume of label names in the Monaco editor can freeze the UI.\r\n\r\n**What would you like to be added**:\r\n\r\n- Determine the approximate number of unique metric names that can be loaded in, say, <300ms\r\n- When the number of unique metric names exceeds that number:\r\n  - Truncate the list of unique metric names that are used to power the Code Mode autocomplete feature\r\n  - Display a warning in the UI that there are too many results to support autocomplete\r\n\r\n**Who is this feature for?**\r\n\r\nPrometheus data source users, especially those with hundreds of thousands to millions of unique metric names.","comments":["for \"Display a warning in the UI that there are too many results to support autocomplete\" - anything we can add to the messaging that helps the user (or their admin) go figure out their naming issues would be very helpful.\r\n\r\nFor example, we could suggest queries they could run, like \r\ngroup ({cluster=\"my_cluster\"}) by (__name__)","This may be closed next week in favor of https:\/\/github.com\/grafana\/grafana\/issues\/84612."],"labels":["datasource\/Prometheus"]},{"title":"FlameGraph: Add button to collapse\/expand items","body":"Right now in flamegraph the only way to expand or collapse all items is through context menu:\r\n<img width=\"399\" alt=\"Screenshot 2024-03-15 at 16 19 54\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1014802\/9ff1c7c3-7c1b-4a0a-9de9-8ede368c36e1\">\r\n\r\nThis is sort of hidden and also the collapsing state isn't always super clear so it is easily missed. Having a button\/checkbox in the toolbar would make this feature and state more visible to the users.\r\n<img width=\"759\" alt=\"Screenshot 2024-03-15 at 16 21 49\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/1014802\/ec0ca4e2-b6e7-4b73-a6ce-58a1d8770fdc\">\r\n","comments":[],"labels":["area\/panel\/flame-graph","internal"]},{"title":"Dashboard: POC to run existing e2e with `dashboardScene` feature toggle","body":"#### Design Doc: [Link](https:\/\/docs.google.com\/document\/d\/1XfG30i9wtMxRltJKnIeuuuPLsDno11UyGg_cND-49rQ\/edit?usp=sharing )\r\n\r\n#### Depends on this PR ([scenes PR](https:\/\/github.com\/grafana\/scenes\/pull\/648))\r\n\r\nThis POC PR is part of Proposal 1\r\n\r\nIt is possible to run our e2e with a feature flag enabled by default.  This PR enables the `dashboardScene` feature toggle (using local storage) and sets up an extra `scenes` option on the cypress config.  The idea will be to run this \"scene\" e2e tests in a grafana-mirror repository to prevent increasing CI times.\r\n\r\nExplorations on this proposal: \r\n- #### Use the same e2e tests and modify them based on the feature toggle (failed)\r\n\t- I tried to standardize e2e selectors across different flows (adding a dashboard)\r\n\t- Blocker: Some dashboard flows involve editing, it became cumbersome to achieve this, due to the new edit mode we added. I found myself adding a lot of conditionals for the existing e2e code to handle these cases\r\n- #### Duplicate e2e tests and refactor them to only align with the new flows (the changes on this PR) \r\n\t- Created a new folder called `scenes` in the `e2e` folder and duplicated some of the suites that have dashboard logic \r\n\t- Added an extra option called `scenes` on the cypress config, it will only run the e2e that are on that `scenes` folder\r\n\t- Added a new command to enable the feature toggle via local storage \r\n\t- Started to refactor all the tests and flows to accommodate the new UX flow (the edit mode)\r\n\r\n##### E2E tests migrated\r\n- `smoke-tests-suite`\r\n\t- [x] 1-smoketests\r\n\t- [x] panels_smokecreen\r\n- `dashboard-suite`\r\n\t- [x] import-dashboard.spec.ts \r\n\t- [x] embedded-dashboard.spec.ts\r\n\t- [x] dashboard-browse.spec.ts   \r\n\t- [x] dashboard-live-streaming.spec.ts \r\n\t- [x] dashboard-timepicker.spec.ts     \r\n##### Todo\r\n- `dashboard-suite`\r\n\t- [ ] Repeating_a_panel_horizontally.spec.ts  ----> This is not rendered with scenes? (need research)\r\n\t- [ ]  Repeating_a_panel_vertically.spec.ts ----> This is not rendered with scenes? (need research)\r\n\t- [ ] Repeating_an_empty_row.spec.ts\r\n\t- [ ] dashboard-browse-nested.spec.ts ---> is it empty? no output when running\r\n\t- [ ] dashboard-public-create.spec.ts \r\n\t- [ ] dashboard-public-templating.spec.ts   \r\n\t- [ ] dashboard-templating.spec.ts    \r\n\t- [ ] dashboard-time-zone.spec.ts      \r\n\t- [ ] general-dashboards.spec.ts          \r\n\t- [ ] load-options-from-url.spec.ts    \r\n\t- [ ] new-constant-variable.spec.ts \r\n\t- [ ]  new-custom-variable.spec.ts\r\n\t- [ ] new-datasource-variable.spec.ts \r\n\t- [ ] new-interval-variable.spec.ts   ---> failed, bug found https:\/\/github.com\/grafana\/grafana\/issues\/84727 \r\n\t- [ ] new-query-variable.spec.ts \r\n\t- [ ] new-text-box-variable.spec.ts      \r\n\t- [ ] set-options-from-ui.spec.ts   \r\n\t- [ ] templating-dashboard-links-and-variables.spec.ts\r\n\t- [ ] textbox-variables.spec.ts \r\n\r\n","comments":["\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166972\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/frontend","type\/e2e"]},{"title":"posgres&mysql: create e2e tests for the PDC\/socks-proxy functionality that is run automatically","body":"we should find a way to create automated tests that trigger the PDC\/socks-proxy functionality.\r\nwe should try multiple different postgres configs (disabled-ssl, with-ssl, certificates, etc.)\r\n\r\nwe will need [support for e2e tests in pdc](https:\/\/github.com\/grafana\/hosted-grafana\/issues\/4512) first","comments":[],"labels":["internal"]},{"title":"Issue with Angular panel","body":"Steps to reproduce:\r\n\r\n- Load a dashboard with angular panels.\r\n- Make any small change and save dashboard \r\n- Angular panel is saved with options: {angularOptions{....}}  structure \r\n\r\nIt should look like before (angular options on the root panel json object level)\r\n","comments":[],"labels":["type\/bug","area\/scenes","team\/grafana-dashboards","area\/dashboards\/panel"]},{"title":"Creating a new dashboard and quickly (< 1s) pressing the add visualization button makes an unsaved changes dialog appear","body":"Creating a new dashboard and quickly (< 1s) pressing the add visualization button makes an unsaved changes dialog appear","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards"]},{"title":"External panel crashes","body":"External panels(not installed on instance) set up from a community dashboard crash dashboard on edit instead of showing panel edit and instead of a viz show a warning that the plugin is not installed","comments":[],"labels":["type\/bug","area\/dashboard","area\/dashboard\/import","area\/scenes","team\/grafana-dashboards"]},{"title":"Dashboard data source: Sometimes the selected panel data is not loaded","body":"See attached dashboard for repro:\r\n\r\n- Add new panel to https:\/\/dev.grafana-dev.net\/d\/cdfjv9izbwj5sb\/victor-s-dashboard-copy\r\n- Select Dashboard data source\r\n- Pick source panel \r\n- Panel will be in a loading state infinitely.\r\n","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards","area\/dashboards\/panel"]},{"title":"Slow dashboard doesn't have loading indicators","body":"On a slowly loading dashboard (due to slow template variable query), panels do not get loading indicators until variables are loaded. This creates a sense of a broken dashboard.","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards"]},{"title":"Dashboard datasource: modififying source panel doesn't have an effect","body":"Dashboard data source. Modifying source panel query and going back to a dashboard is not reflected in a panel that uses it as a source panel. You need to refresh the dashboard to see the destination panel aligned with the source panel.","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards"]},{"title":"Adding library panel from an empty state doesn't work","body":"Adding a library panel from the empty dashboard state (save and refresh and empty dashboard) does not enable dashboard edit mode, hence one cannot save a newly added lib panel\r\n\r\n","comments":[],"labels":["type\/bug","area\/frontend\/library-panels","area\/scenes","team\/grafana-dashboards","area\/dashboard\/edit"]},{"title":"Discarding changes to an empty dashboard has no effect - changes are still visible.","body":"- Create and save an empty dashboard.\r\n- Refresh page\r\n- Add a panel (without entering edit mode)\r\n- Go back do dashboard (panel should be added)\r\n- Exit edit mode and discard changes\r\n- Booom: Panel is still visible on that dashboard that should be empty","comments":[],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards","area\/dashboard\/edit"]},{"title":"Changes made in panel edit mode are not subject of change detection unless navigating back to a dashboard.","body":null,"comments":[],"labels":["type\/bug","area\/scenes","team\/grafana-dashboards","area\/dashboards\/panel"]},{"title":"Removing a panel from a row duplicates row actions","body":"To repro:\r\n\r\n- Create a new panel\r\n- Create a new row\r\n- Remove the panel\r\n- Row glitches out\r\n\r\nAfter this, trying to save the dashboard crashes with the error in image\r\n<img width=\"530\" alt=\"Screenshot 2024-03-15 at 13 06 58\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/74534993\/12d110c7-d632-447d-bd5d-17485f9fe7f7\">\r\n\r\n\r\n","comments":[],"labels":["type\/bug","area\/scenes","area\/dashboard\/rows","team\/grafana-dashboards"]},{"title":"Public dashboard tag is missing in the nav bar when a dashboard has been shared as a public dashboard","body":null,"comments":[],"labels":["type\/bug","area\/public-dashboards","area\/scenes","team\/grafana-dashboards"]},{"title":"Sometimes, trying to change a visualization in panel edit, shows an empty list.","body":"Reported by @dprokop, wasn't able to consistently reproduce it.","comments":[],"labels":["type\/bug","team\/grafana-dashboards","area\/dashboards\/panel"]},{"title":"Permissions tab should not appear if user does not have permission to edit those","body":"See screenshot\r\n<img width=\"540\" alt=\"Screenshot 2024-03-15 at 13 02 37\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/74534993\/6a4cb785-37b2-4f57-bc98-c6ee87030a70\">\r\n","comments":[],"labels":["type\/bug","area\/dashboard","area\/permissions","team\/grafana-dashboards"]},{"title":"Changes warning is not triggered when navigating away from the dashboard","body":"I've noticed it for:\r\n* Added row\r\n* Added dashboard link\r\n","comments":[],"labels":["type\/bug","area\/dashboard","team\/grafana-dashboards","area\/dashboard\/edit"]},{"title":"Changing dashboard folder in dashboard settings does not trigger change detection","body":"Details:\r\n* This only happens if you go to Settings from the dashboard.\r\n* This does not happen if you refresh the general settings page.\r\n","comments":[],"labels":["type\/bug","area\/dashboard","area\/dashboard\/folders","area\/scenes","team\/grafana-dashboards"]},{"title":"Version 10.2.3 - [CVE-2023-42282]","body":"### What happened?\n\nCan this vulnerability be fixed in 10.2.3 version - https:\/\/nvd.nist.gov\/vuln\/detail\/CVE-2023-42282\n\n### What did you expect to happen?\n\nUpgrade ip@npm version\n\n### Did this work before?\n\nIts present in all latest Grafana version\n\n### How do we reproduce it?\n\n1. Start Grafana\r\n2. Run vulnerability scan\r\n3. CVE - CVE-2023-42282 \r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: 10.2.3+\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":["Hi @sachinjangle,\r\n\r\nThanks for opening this issue.\r\n\r\nI will forward this to our Engineers so that they can have a look and might be able to tell more details about it.\r\n","@usmangt Thanks for looking into this. This CVE has 9.8 severity. If possible can you please take this on priority."],"labels":["area\/security","triage\/needs-confirmation"]},{"title":"Feature request: improve discoverability of core UI extension points","body":"**Why is this needed**:\r\n\r\nThere are currently a few places in the core Grafana UI which can be extended by plugins; most notably the dashboard panel menu and the explore menu bar (see screenshots below). My concern is that neither of them are hugely visible: they're hidden behind at least one click (2 in the case of the panel menu) and don't really draw the user in to discover them.\r\n\r\nDashboard panel menu: \r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/5464991\/9b50a51d-a7b4-47c4-97b3-c0b5c3faee57)\r\n\r\nExplore menu bar:\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/5464991\/ff4d81b7-e068-4a45-9f99-9b8a10d45b15)\r\n\r\n**What would you like to be added**:\r\n\r\nI'm not sure on the exact design but a few things may help:\r\n\r\n- a responsive design which puts the extension links in a more prominent place if there are only a few of them, or if there is enough screen real estate\r\n- a history of 'recently used extensions', which we could use to make commonly used extensions more easily accessible.\r\n\r\nFor example, if I've just used the Sift 'Run investigation' button then it could be shown in the top level of the panel menu or directly on the explore menu bar, rather than inside a dropdown. If my screen is wide enough I could see the top 3 most recently used extension links on the bar, rather than just 1.\r\n\r\n**Who is this feature for?**\r\n\r\n- users making use of plugin extensions\r\n- developers who want their plugin extensions to be more discoverable","comments":["@sd2k please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/ux","internal","area\/plugin-extensions"]},{"title":"Select: When virtualised is true the items get's wrong top position ","body":"* Create a Select with a few options\r\n* Select an option 3 options down\r\n* Open the menu again, notice the empty space above and the top 2 options are not visible \r\n\r\n![Screenshot 2024-03-15 at 09 44 24](https:\/\/github.com\/grafana\/grafana\/assets\/10999\/fd40fec8-ce4a-40f8-8f14-6db61aad6b2b)\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/10999\/953d749a-7b59-4aeb-9ea1-486e9d29ba13\r\n\r\nLooks like it's caused by initialScrollOffset here:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/main\/packages\/grafana-ui\/src\/components\/Select\/SelectMenu.tsx#L71\r\n\r\nIt is fixed If I remove that line, maybe bug in react-window?\r\n\r\n\r\n","comments":["Hi @torkelo, correct me if I'm wrong, but didn't your [PR](https:\/\/github.com\/grafana\/grafana\/pull\/84544) fix this issue? Should we close it as done? \ud83e\udd14 "],"labels":["type\/bug","area\/grafana\/ui","internal"]},{"title":"Users: Slow user search due to permission search","body":"### What happened?\r\n\r\nSlow user search due to permission search \/api\/org\/users\/search\r\n\r\n### What did you expect to happen?\r\n\r\nSub 2s search\r\n\r\n### Did this work before?\r\n\r\nmaybe\r\n\r\n### How do we reproduce it?\r\n\r\n1.\r\n2.\r\n3.\r\n\r\n\r\n### Is the bug inside a dashboard panel?\r\n\r\n_No response_\r\n\r\n### Environment (with versions)?\r\n\r\nGrafana: main\r\nOS:\r\nBrowser:\r\n\r\n\r\n### Grafana platform?\r\n\r\nI use Grafana Cloud\r\n\r\n### Datasource(s)?\r\n\r\n_No response_","comments":[],"labels":["area\/admin\/user","team\/identity-access"]},{"title":"Bump actions\/checkout from 3 to 4","body":"Bumps [actions\/checkout](https:\/\/github.com\/actions\/checkout) from 3 to 4.\n<details>\n<summary>Release notes<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/actions\/checkout\/releases\">actions\/checkout's releases<\/a>.<\/em><\/p>\n<blockquote>\n<h2>v4.0.0<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Update default runtime to node20 by <a href=\"https:\/\/github.com\/takost\"><code>@\u200btakost<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1436\">actions\/checkout#1436<\/a><\/li>\n<li>Support fetching without the --progress option by <a href=\"https:\/\/github.com\/simonbaird\"><code>@\u200bsimonbaird<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1067\">actions\/checkout#1067<\/a><\/li>\n<li>Release 4.0.0 by <a href=\"https:\/\/github.com\/takost\"><code>@\u200btakost<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1447\">actions\/checkout#1447<\/a><\/li>\n<\/ul>\n<h2>New Contributors<\/h2>\n<ul>\n<li><a href=\"https:\/\/github.com\/takost\"><code>@\u200btakost<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1436\">actions\/checkout#1436<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/simonbaird\"><code>@\u200bsimonbaird<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1067\">actions\/checkout#1067<\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/actions\/checkout\/compare\/v3...v4.0.0\">https:\/\/github.com\/actions\/checkout\/compare\/v3...v4.0.0<\/a><\/p>\n<h2>v3.6.0<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Mark test scripts with Bash'isms to be run via Bash by <a href=\"https:\/\/github.com\/dscho\"><code>@\u200bdscho<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1377\">actions\/checkout#1377<\/a><\/li>\n<li>Add option to fetch tags even if fetch-depth &gt; 0 by <a href=\"https:\/\/github.com\/RobertWieczoreck\"><code>@\u200bRobertWieczoreck<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/579\">actions\/checkout#579<\/a><\/li>\n<li>Release 3.6.0 by <a href=\"https:\/\/github.com\/luketomlinson\"><code>@\u200bluketomlinson<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1437\">actions\/checkout#1437<\/a><\/li>\n<\/ul>\n<h2>New Contributors<\/h2>\n<ul>\n<li><a href=\"https:\/\/github.com\/RobertWieczoreck\"><code>@\u200bRobertWieczoreck<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/579\">actions\/checkout#579<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/luketomlinson\"><code>@\u200bluketomlinson<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1437\">actions\/checkout#1437<\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/actions\/checkout\/compare\/v3.5.3...v3.6.0\">https:\/\/github.com\/actions\/checkout\/compare\/v3.5.3...v3.6.0<\/a><\/p>\n<h2>v3.5.3<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Fix: Checkout Issue in self hosted runner due to faulty submodule check-ins by <a href=\"https:\/\/github.com\/megamanics\"><code>@\u200bmegamanics<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1196\">actions\/checkout#1196<\/a><\/li>\n<li>Fix typos found by codespell by <a href=\"https:\/\/github.com\/DimitriPapadopoulos\"><code>@\u200bDimitriPapadopoulos<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1287\">actions\/checkout#1287<\/a><\/li>\n<li>Add support for sparse checkouts by <a href=\"https:\/\/github.com\/dscho\"><code>@\u200bdscho<\/code><\/a> and <a href=\"https:\/\/github.com\/dfdez\"><code>@\u200bdfdez<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1369\">actions\/checkout#1369<\/a><\/li>\n<li>Release v3.5.3 by <a href=\"https:\/\/github.com\/TingluoHuang\"><code>@\u200bTingluoHuang<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1376\">actions\/checkout#1376<\/a><\/li>\n<\/ul>\n<h2>New Contributors<\/h2>\n<ul>\n<li><a href=\"https:\/\/github.com\/megamanics\"><code>@\u200bmegamanics<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1196\">actions\/checkout#1196<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/DimitriPapadopoulos\"><code>@\u200bDimitriPapadopoulos<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1287\">actions\/checkout#1287<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/dfdez\"><code>@\u200bdfdez<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1369\">actions\/checkout#1369<\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/actions\/checkout\/compare\/v3...v3.5.3\">https:\/\/github.com\/actions\/checkout\/compare\/v3...v3.5.3<\/a><\/p>\n<h2>v3.5.2<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Fix: Use correct API url \/ endpoint in GHES by <a href=\"https:\/\/github.com\/fhammerl\"><code>@\u200bfhammerl<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1289\">actions\/checkout#1289<\/a> based on <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1286\">#1286<\/a> by <a href=\"https:\/\/github.com\/1newsr\"><code>@\u200b1newsr<\/code><\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/actions\/checkout\/compare\/v3.5.1...v3.5.2\">https:\/\/github.com\/actions\/checkout\/compare\/v3.5.1...v3.5.2<\/a><\/p>\n<h2>v3.5.1<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Improve checkout performance on Windows runners by upgrading <code>@\u200bactions\/github<\/code> dependency by <a href=\"https:\/\/github.com\/BrettDong\"><code>@\u200bBrettDong<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1246\">actions\/checkout#1246<\/a><\/li>\n<\/ul>\n<h2>New Contributors<\/h2>\n<ul>\n<li><a href=\"https:\/\/github.com\/BrettDong\"><code>@\u200bBrettDong<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1246\">actions\/checkout#1246<\/a><\/li>\n<\/ul>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Changelog<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/actions\/checkout\/blob\/main\/CHANGELOG.md\">actions\/checkout's changelog<\/a>.<\/em><\/p>\n<blockquote>\n<h1>Changelog<\/h1>\n<h2>v4.1.2<\/h2>\n<ul>\n<li>Fix: Disable sparse checkout whenever <code>sparse-checkout<\/code> option is not present <a href=\"https:\/\/github.com\/dscho\"><code>@\u200bdscho<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1598\">actions\/checkout#1598<\/a><\/li>\n<\/ul>\n<h2>v4.1.1<\/h2>\n<ul>\n<li>Correct link to GitHub Docs by <a href=\"https:\/\/github.com\/peterbe\"><code>@\u200bpeterbe<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1511\">actions\/checkout#1511<\/a><\/li>\n<li>Link to release page from what's new section by <a href=\"https:\/\/github.com\/cory-miller\"><code>@\u200bcory-miller<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1514\">actions\/checkout#1514<\/a><\/li>\n<\/ul>\n<h2>v4.1.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1396\">Add support for partial checkout filters<\/a><\/li>\n<\/ul>\n<h2>v4.0.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1067\">Support fetching without the --progress option<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1436\">Update to node20<\/a><\/li>\n<\/ul>\n<h2>v3.6.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1377\">Fix: Mark test scripts with Bash'isms to be run via Bash<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/579\">Add option to fetch tags even if fetch-depth &gt; 0<\/a><\/li>\n<\/ul>\n<h2>v3.5.3<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1196\">Fix: Checkout fail in self-hosted runners when faulty submodule are checked-in<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1287\">Fix typos found by codespell<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1369\">Add support for sparse checkouts<\/a><\/li>\n<\/ul>\n<h2>v3.5.2<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1289\">Fix api endpoint for GHES<\/a><\/li>\n<\/ul>\n<h2>v3.5.1<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1246\">Fix slow checkout on Windows<\/a><\/li>\n<\/ul>\n<h2>v3.5.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1237\">Add new public key for known_hosts<\/a><\/li>\n<\/ul>\n<h2>v3.4.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1209\">Upgrade codeql actions to v2<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1210\">Upgrade dependencies<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1225\">Upgrade <code>@\u200bactions\/io<\/code><\/a><\/li>\n<\/ul>\n<h2>v3.3.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1045\">Implement branch list using callbacks from exec function<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1050\">Add in explicit reference to private checkout options<\/a><\/li>\n<li>[Fix comment typos (that got added in <a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/770\">#770<\/a>)](<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1057\">actions\/checkout#1057<\/a>)<\/li>\n<\/ul>\n<h2>v3.2.0<\/h2>\n<ul>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/942\">Add GitHub Action to perform release<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/967\">Fix status badge<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1002\">Replace datadog\/squid with ubuntu\/squid Docker image<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/964\">Wrap pipeline commands for submoduleForeach in quotes<\/a><\/li>\n<li><a href=\"https:\/\/redirect.github.com\/actions\/checkout\/pull\/1029\">Update <code>@\u200bactions\/io<\/code> to 1.1.2<\/a><\/li>\n<\/ul>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Commits<\/summary>\n<ul>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/b4ffde65f46336ab88eb53be808477a3936bae11\"><code>b4ffde6<\/code><\/a> Link to release page from what's new section (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1514\">#1514<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/8530928916aaef40f59e6f221989ccb31f5759e7\"><code>8530928<\/code><\/a> Correct link to GitHub Docs (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1511\">#1511<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/7cdaf2fbc075e6f3b9ca94cfd6cec5adc8a75622\"><code>7cdaf2f<\/code><\/a> Update CODEOWNERS to Launch team (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1510\">#1510<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/8ade135a41bc03ea155e62e844d188df1ea18608\"><code>8ade135<\/code><\/a> Prepare 4.1.0 release (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1496\">#1496<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/c533a0a4cfc4962971818edcfac47a2899e69799\"><code>c533a0a<\/code><\/a> Add support for partial checkout filters (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1396\">#1396<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/72f2cec99f417b1a1c5e2e88945068983b7965f9\"><code>72f2cec<\/code><\/a> Update README.md for V4 (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1452\">#1452<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/3df4ab11eba7bda6032a0b82a6bb43b11571feac\"><code>3df4ab1<\/code><\/a> Release 4.0.0 (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1447\">#1447<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/8b5e8b768746b50394015010d25e690bfab9dfbc\"><code>8b5e8b7<\/code><\/a> Support fetching without the --progress option (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1067\">#1067<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/actions\/checkout\/commit\/97a652b80035363df47baee5031ec8670b8878ac\"><code>97a652b<\/code><\/a> Update default runtime to node20 (<a href=\"https:\/\/redirect.github.com\/actions\/checkout\/issues\/1436\">#1436<\/a>)<\/li>\n<li>See full diff in <a href=\"https:\/\/github.com\/actions\/checkout\/compare\/v3...v4\">compare view<\/a><\/li>\n<\/ul>\n<\/details>\n<br \/>\n\n\n[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=actions\/checkout&package-manager=github_actions&previous-version=3&new-version=4)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["dependencies","github_actions","no-backport","no-changelog"]},{"title":"Bump peter-evans\/create-pull-request from 5 to 6","body":"Bumps [peter-evans\/create-pull-request](https:\/\/github.com\/peter-evans\/create-pull-request) from 5 to 6.\n<details>\n<summary>Release notes<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/releases\">peter-evans\/create-pull-request's releases<\/a>.<\/em><\/p>\n<blockquote>\n<h2>Create Pull Request v6.0.0<\/h2>\n<h2>Behaviour changes<\/h2>\n<ul>\n<li>The default values for <code>author<\/code> and <code>committer<\/code> have changed. See &quot;What's new&quot; below for details. If you are overriding the default values you will not be affected by this change.<\/li>\n<li>On completion, the action now removes the temporary git remote configuration it adds when using <code>push-to-fork<\/code>. This should not affect you unless you were using the temporary configuration for some other purpose after the action completes.<\/li>\n<\/ul>\n<h2>What's new<\/h2>\n<ul>\n<li>Updated runtime to Node.js 20\n<ul>\n<li>The action now requires a minimum version of <a href=\"https:\/\/github.com\/actions\/runner\/releases\/tag\/v2.308.0\">v2.308.0<\/a> for the Actions runner. Update self-hosted runners to v2.308.0 or later to ensure compatibility.<\/li>\n<\/ul>\n<\/li>\n<li>The default value for <code>author<\/code> has been changed to <code>${{ github.actor }} &lt;${{ github.actor_id }}+${{ github.actor }}@users.noreply.github.com&gt;<\/code>. The change adds the <code>${{ github.actor_id }}+<\/code> prefix to the email address to align with GitHub's standard format for the author email address.<\/li>\n<li>The default value for <code>committer<\/code> has been changed to <code>github-actions[bot] &lt;41898282+github-actions[bot]@users.noreply.github.com&gt;<\/code>. This is to align with the default GitHub Actions bot user account.<\/li>\n<li>Adds input <code>git-token<\/code>, the <a href=\"https:\/\/docs.github.com\/en\/github\/authenticating-to-github\/creating-a-personal-access-token\">Personal Access Token (PAT)<\/a> that the action will use for git operations. This input defaults to the value of <code>token<\/code>. Use this input if you would like the action to use a different token for git operations than the one used for the GitHub API.<\/li>\n<li><code>push-to-fork<\/code> now supports pushing to sibling repositories in the same network.<\/li>\n<li>Previously, when using <code>push-to-fork<\/code>, the action did not remove temporary git remote configuration it adds during execution. This has been fixed and the configuration is now removed when the action completes.<\/li>\n<li>If the pull request body is truncated due to exceeding the maximum length, the action will now suffix the body with the message &quot;...<em>[Pull request body truncated]<\/em>&quot; to indicate that the body has been truncated.<\/li>\n<li>The action now uses <code>--unshallow<\/code> only when necessary, rather than as a default argument of <code>git fetch<\/code>. This should improve performance, particularly for large git repositories with extensive commit history.<\/li>\n<li>The action can now be executed on one GitHub server and create pull requests on a <em>different<\/em> GitHub server. Server products include GitHub hosted (github.com), GitHub Enterprise Server (GHES), and GitHub Enterprise Cloud (GHEC). For example, the action can be executed on GitHub hosted and create pull requests on a GHES or GHEC instance.<\/li>\n<\/ul>\n<h2>What's Changed<\/h2>\n<ul>\n<li>Update distribution by <a href=\"https:\/\/github.com\/actions-bot\"><code>@\u200bactions-bot<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2086\">peter-evans\/create-pull-request#2086<\/a><\/li>\n<li>fix crazy-max\/ghaction-import-gp parameters by <a href=\"https:\/\/github.com\/fharper\"><code>@\u200bfharper<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2177\">peter-evans\/create-pull-request#2177<\/a><\/li>\n<li>Update distribution by <a href=\"https:\/\/github.com\/actions-bot\"><code>@\u200bactions-bot<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2364\">peter-evans\/create-pull-request#2364<\/a><\/li>\n<li>Use checkout v4 by <a href=\"https:\/\/github.com\/okuramasafumi\"><code>@\u200bokuramasafumi<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2521\">peter-evans\/create-pull-request#2521<\/a><\/li>\n<li>Note about <code>delete-branch<\/code> by <a href=\"https:\/\/github.com\/dezren39\"><code>@\u200bdezren39<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2631\">peter-evans\/create-pull-request#2631<\/a><\/li>\n<li>98 dependency updates by <a href=\"https:\/\/github.com\/dependabot\"><code>@\u200bdependabot<\/code><\/a><\/li>\n<\/ul>\n<h2>New Contributors<\/h2>\n<ul>\n<li><a href=\"https:\/\/github.com\/fharper\"><code>@\u200bfharper<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2177\">peter-evans\/create-pull-request#2177<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/okuramasafumi\"><code>@\u200bokuramasafumi<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2521\">peter-evans\/create-pull-request#2521<\/a><\/li>\n<li><a href=\"https:\/\/github.com\/dezren39\"><code>@\u200bdezren39<\/code><\/a> made their first contribution in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2631\">peter-evans\/create-pull-request#2631<\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.2...v6.0.0\">https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.2...v6.0.0<\/a><\/p>\n<h2>Create Pull Request v5.0.2<\/h2>\n<p>\u2699\ufe0f Fixes an issue that occurs when using <code>push-to-fork<\/code> and both base and head repositories are in the same org\/user account.<\/p>\n<h2>What's Changed<\/h2>\n<ul>\n<li>fix: specify head repo by <a href=\"https:\/\/github.com\/peter-evans\"><code>@\u200bpeter-evans<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/2044\">peter-evans\/create-pull-request#2044<\/a><\/li>\n<li>20 dependency updates by <a href=\"https:\/\/github.com\/dependabot\"><code>@\u200bdependabot<\/code><\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.1...v5.0.2\">https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.1...v5.0.2<\/a><\/p>\n<h2>Create Pull Request v5.0.1<\/h2>\n<h2>What's Changed<\/h2>\n<ul>\n<li>fix: truncate body if exceeds max length by <a href=\"https:\/\/github.com\/peter-evans\"><code>@\u200bpeter-evans<\/code><\/a> in <a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/pull\/1915\">peter-evans\/create-pull-request#1915<\/a><\/li>\n<li>12 dependency updates by <a href=\"https:\/\/github.com\/dependabot\"><code>@\u200bdependabot<\/code><\/a><\/li>\n<\/ul>\n<p><strong>Full Changelog<\/strong>: <a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.0...v5.0.1\">https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5.0.0...v5.0.1<\/a><\/p>\n<\/blockquote>\n<\/details>\n<details>\n<summary>Commits<\/summary>\n<ul>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/70a41aba780001da0a30141984ae2a0c95d8704e\"><code>70a41ab<\/code><\/a> perf: shallow fetch the actual base when rebasing from working base (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2816\">#2816<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/57a101480a00db37082a7c7d3348bf2075d3a6e8\"><code>57a1014<\/code><\/a> build(deps-dev): bump <code>@\u200btypes\/node<\/code> from 18.19.21 to 18.19.23 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2811\">#2811<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/b3a2c5d525a1eb75e75c781e45a1bf3bfc23bdc6\"><code>b3a2c5d<\/code><\/a> build(deps-dev): bump <code>@\u200btypes\/node<\/code> from 18.19.18 to 18.19.21 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2798\">#2798<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/02c7da59e880d01b07e68afd0370a3399f08b42a\"><code>02c7da5<\/code><\/a> build(deps-dev): bump eslint-plugin-github from 4.10.1 to 4.10.2 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2797\">#2797<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/bac6da8071ada152cce76cfbd24b54b7190ad799\"><code>bac6da8<\/code><\/a> docs: update description of delete-branch<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/a4f52f8033a6168103c2538976c07b467e8163bc\"><code>a4f52f8<\/code><\/a> fix: list pulls using the correct head format (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2792\">#2792<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/853c071bcf61c8762f57e59c1576d97418f495ad\"><code>853c071<\/code><\/a> build(deps-dev): bump eslint from 8.56.0 to 8.57.0 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2781\">#2781<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/d2c126edc79e6a215930e9a6adc95b7686b84f78\"><code>d2c126e<\/code><\/a> build(deps-dev): bump <code>@\u200btypes\/node<\/code> from 18.19.17 to 18.19.18 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2780\">#2780<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/43d39c683601267cd565ea6bd727a4e92aa00852\"><code>43d39c6<\/code><\/a> build(deps-dev): bump <code>@\u200btypes\/node<\/code> from 18.19.15 to 18.19.17 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2768\">#2768<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/commit\/5a9d206da2b6452cd63eb84e2e5116ff3213e8cb\"><code>5a9d206<\/code><\/a> build(deps-dev): bump eslint-plugin-jest from 27.6.3 to 27.9.0 (<a href=\"https:\/\/redirect.github.com\/peter-evans\/create-pull-request\/issues\/2769\">#2769<\/a>)<\/li>\n<li>Additional commits viewable in <a href=\"https:\/\/github.com\/peter-evans\/create-pull-request\/compare\/v5...v6\">compare view<\/a><\/li>\n<\/ul>\n<\/details>\n<br \/>\n\n\n[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=peter-evans\/create-pull-request&package-manager=github_actions&previous-version=5&new-version=6)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["dependencies","github_actions"]},{"title":"K8s: replace a noop certKey content func with actual if available","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAggregator is usually the one for constructing this func and passing to the availability controller but since we forked the controller, we need to additionally parse the cert\/key pair, if available. It ultimately is used to run the first discovery checks for an aggregated service.\r\n\r\n**Why do we need this feature?**\r\n\r\nPart of aggregation.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana App Platform\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/backend","no-changelog"]},{"title":"Revamp the current Basics of Saga dashboard","body":"Investigate how we can improve the current Basics of Saga dashboard within Grafana\r\n\r\n**Ideas**\r\n- No longer need the GitHub tracking\r\n- Currently showing duplicate information from Levitate\r\n- What tracking information would be needed from the actual product site?","comments":[],"labels":["saga design system"]},{"title":"Use Levitate to track metrics in grafana plugins","body":"Investigate how Levitate currently works and determine how we can use it track the internal usage and adoption of design system components and patterns.","comments":["How can we associate # of imports with product area? Is there any level of granularity we can gain to provide more insights into adoption\/usage?"],"labels":["saga design system","saga ds: dev work"]},{"title":"Empty state design exploration","body":"Identify any and all explorations done around the Empty States of Grafana to create an exhaustive catalog of ideas to build off of.","comments":[],"labels":["saga design system","saga ds: pattern"]},{"title":"Empty state components (dev)","body":"internal design doc [here](https:\/\/docs.google.com\/document\/d\/1EmjGm84SQtxrfi9qDreyWWAg0id8L-3B8pu5FQo3mMk\/edit)\r\n\r\n```[tasklist]\r\n### Tasks\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/pull\/84891\r\n- [ ] https:\/\/github.com\/grafana\/grafana\/pull\/85017\r\n- [ ] EmptyState: Apply new components everywhere in core\r\n- [ ] EmptyState: Create saga documentation\r\n```\r\n","comments":[],"labels":["saga design system","internal","saga ds: dev work"]},{"title":"Empty State [epic]","body":"The empty state experience across Grafana could be better and definitely not consistent. We're looking to improve on this experience and tighten up the overall consistency.\n\n1. Review existing empty state requirements and patterns\n2. Create general best-fit versions to be implemented across the product\n3. Pull together design explorations done by UXers to leverage any recent research\n4. Build new components, include slim\/full variations\n5. Expand Grot illustration\n6. Build Figma components to support\n7. Create documentation for Saga to provide How-tos, when to, when not documentation\n\n```[tasklist]\n### Related work\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84516\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84517\n- [ ] Empty state compnent & pattern creation\n- [ ] Empty state documentation\n```\n","comments":[],"labels":["type\/epic","saga design system","saga ds: pattern","saga ds: template"]},{"title":"Canvas: Selected Element options editor for Icon has \"image size\" options overflowing container","body":"### What happened?\n\nhttps:\/\/github.com\/grafana\/grafana\/assets\/46619047\/a151cee6-404e-4e98-88ca-1a8a856f04cf\n\n### What did you expect to happen?\n\nNot to overflow\n\n### Did this work before?\n\nUnknown\n\n### How do we reproduce it?\n\n1. Create Icon element inside of Canvas viz.\r\n2. Edit the element, and scroll to `Selected Element (icon)` -> `Background (icon)` -> `Image Size`\r\n3. Narrow the width of the editor to less than the options, and see the overflow.\r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: on branch `drew08t\/canvas-midpoint-control` as of commit `70a3fdc` on 2024-03-14\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":[],"labels":["type\/bug","area\/frontend","area\/panel\/canvas","internal"]},{"title":"Scenes: Fix issue with adding library panel to saved empty dashboard","body":"Fixes an issue where trying to add a library panel via the CTA had no effect on a saved empty dashboard.","comments":[],"labels":["type\/bug","area\/dashboard","area\/frontend","area\/frontend\/library-panels","no-changelog","area\/scenes"]},{"title":"datatrails: facilitate adding \"explore metrics\" links from time series panel context menu","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nWe were discussing being able to open a drawer from the time series panel context menu.\r\nThis PR provides a function to help with this.\r\n\r\nBranches off of:\r\n- #84521\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend"]},{"title":"Alerting: New settings page","body":"**What is this feature?**\r\n\r\nThis PR adds a new redesigned settings page for alerting. Currently still in draft until I figure out the tests and how to split this in to smaller chunks.\r\n\r\nCurrently acts as a placeholder for testing and discussions. \r\n\r\nNot for G11 but perhaps for 11.1.\r\n\r\nEnable \/ disable Alertmanager datasources as targets\r\n<img width=\"1367\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/e04c6a32-4378-4e03-a65f-d48a95c42bf7\">\r\nEditing the configuration file is now in a drawer with more space\r\n<img width=\"1367\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/60c95c4b-c397-4b24-b093-020e54f1410b\">\r\nVersioning is now available for all administrators\r\n<img width=\"1367\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/787ce6cb-310a-4aaf-bac1-6073c02a162e\">\r\nCompare and restore\r\n<img width=\"1367\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/f955807d-0c3b-4887-8f8e-54420ffe7cae\">\r\nAnd the before view, for comparison\r\n<img width=\"1367\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/868844\/9750cde8-ab23-40d8-b248-01894c509dbd\">\r\n","comments":[],"labels":["area\/alerting","area\/frontend","add to what's new"]},{"title":"Add query\/mutation hooks that plugin can use to query\/mutate Grafana redux store","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nPlugin developers often load data such as data sources, dashboards, etc. This is currently achieved by using Grafana API. The issue is that mutations from plugins or Grafana do not automatically synchronize cached data. We would like to have access to the cached data, including performing mutations such as: \r\n- starring a dashboard\r\n- changing data source configuration\r\n- ...\r\n\r\n**What would you like to be added**:\r\nWe would like a query\/mutation hooks package that would work similarly to popular data-fetching libraries such as RTKQ, React Query, SWR, etc. \r\n\r\nSee this documentation for the full [RTKQ query hook signature](https:\/\/redux-toolkit.js.org\/rtk-query\/api\/created-api\/hooks#usequery).\r\n\r\nNote that we don't necessarily need full RTKQ implementation; a bare minimum would be: \r\noptions: \r\n- skip: boolean (for conditional fetching)\r\n \r\nresult:\r\n- data (data on success)\r\n- error (error on error)\r\n- isLoading (true when data is being fetched)\r\n\r\nSee this documentation for the full [RTKQ mutation hook signature](https:\/\/redux-toolkit.js.org\/rtk-query\/api\/created-api\/hooks#usemutation) \r\n\r\nA bare minimum would be: \r\noptions: \r\n- fixedCacheKey (enable shared results across hook instances)\r\n- trigger: (function that triggers the mutation)\r\n\r\nresult: \r\n- data\r\n- error\r\n- isLoading\r\n\r\nNote that we already use [a generated client ](https:\/\/github.com\/grafana\/grafana-cloud\/tree\/main\/packages\/grafana-api)for the grafana API; this can be used by plugins right now. However, the cache is not updated when a mutation occurs in Grafana as it doesn't use this package. \r\n\r\n**Who is this feature for?**\r\n\r\nPlugin developers\r\n\r\ncc @leventebalogh ","comments":["Thanks for raising this @jarben \ud83d\ude4f \r\n\r\nI will bring it to our @grafana\/plugins-platform weekly discussion today and get back soon. \r\n\r\n@sympatheticmoose for visibility.","Thanks for creating this @jarben!\r\nOne particular issue that we often face is that we sometimes update\/delete some dashboards from the Connections plugin, and show a LinkButton to users which redirects them to their dashboards, and when they go there they don't see the latest state of dashboards if they have visited the dashboards page before, because the it is cached in Grafana. It would be nice if we could invalidate this cache from the plugin. See also https:\/\/github.com\/grafana\/grafana\/issues\/77959"],"labels":["area\/frontend"]},{"title":"New UI extension point in dashboards","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nWe would like to indicate that a dashboard was installed via an integration. This should also give user an option to update the dashboard in case a new update is available (without going to Connections and updating dashboards there). \r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/561365\/23a38ea3-bc33-467b-ab97-2e60026b11d8)\r\n\r\n**What would you like to be added**:\r\n\r\nThis can be achieved by adding a new extension point to the dashboard header. The Connections plugin would inject a button or a badge informing the user that the dashboard was installed from an integration. Ideally, this would also allow showing a UI that would allow users to update the dashboard in case a new version is available. \r\n\r\nAnother use case is when moving from dashboards to Apps (Synthetic monitoring as an example). We may want to show a message saying that the dashboard was replaced by an App plugin (panels rendered using scenes)\r\n\r\n**Who is this feature for?**\r\n\r\nViewers\/Editors\/Admins\r\n\r\ncc @leventebalogh @mikkancso\r\n","comments":["Interesting \ud83d\ude4c Will bring it up with @grafana\/plugins-platform and get back!\r\n\r\n@sympatheticmoose for visibility. "],"labels":["area\/plugin-extensions"]},{"title":"New UI extension point in the data source list item","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nWe would like to indicate that a data source is configured to use PDC\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/561365\/72575666-e812-4f49-9b6f-56dded88c980)\r\n\r\n\r\n**What would you like to be added**:\r\n\r\nA new component extension point in the list of data sources where we can inject a badge or button indicating that the data source is configured to use PDC. The extension point should pass a context to the extension with the data source ID as minimum. The extension would then fetch all data sources and detect which data sources are using the PDC by checking data source jsonData. \r\n\r\n**Who is this feature for?**\r\n\r\nAdmins and editor who can see the list of data sources. \r\n\r\ncc @leventebalogh \r\n","comments":["Thanks! \ud83d\ude4c Bringing it up with @grafana\/plugins-platform and get back!\r\n\r\n@sympatheticmoose for visibility. "],"labels":["area\/plugin-extensions"]},{"title":"New UI component extension point in the data source auth ","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nUsers typically want to create auth tokens when creating a data source. They need to open a new browser tab and create a token either in the grafana-com user portal or within the instance (Administration>Cloud Access Policies). \r\n\r\nWe want to offer a UI within the data source configuration>auth section where users can create tokens without leaving their current page. \r\n\r\n**What would you like to be added**:\r\n\r\nThis can be achieved by adding a new UI extension (component type) where the Cloud Access Policies plugin can inject a `New Token` button. Clicking on the button would show a similar UI to the one we have now in PDC: \r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/561365\/a255a0e2-2930-4915-9e4b-41fe84a07498)\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/561365\/a0f54c9f-1663-4d24-8dfc-633d404b538c)\r\n\r\nThis UI is already part of the https:\/\/github.com\/grafana\/grafana-cloud repo. Scopes would be defined per data source in the Cloud Access Policies plugin. \r\n\r\nThe extension context should pass: \r\n- data source info including data source type etc. (similar interface as `PluginExtensionDataSourceConfigContext`)\r\n- the context should also provide setData() method where we can set data source data - passing the token to the password field so that users don't need to copy\/paste manually. This is not mandatory but we think it would be very useful. \r\n\r\nThis extension point can be restricted to the `grafana-auth-app`, similar to how the `grafana\/datasources\/config` is restricted to some cloud plugins only. \r\n\r\n**Who is this feature for?**\r\n\r\nAdmins, who have access to configure data sources. \r\n\r\ncc @leventebalogh \r\n","comments":["Thanks! \ud83d\ude4c Bringing it up with @grafana\/plugins-platform and get back!\r\n\r\n@sympatheticmoose for visibility. "],"labels":["area\/plugin-extensions"]},{"title":"Dashboards: reductions not working with noValue=0","body":"### What happened?\n\nRelated to https:\/\/github.com\/grafana\/grafana\/issues\/49030, https:\/\/github.com\/grafana\/grafana\/discussions\/43093, and https:\/\/github.com\/grafana\/grafana\/issues\/50713. But now I've tracked down a much more specific issue.\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/687269\/dc172b49-c3a7-4ac2-ad08-ea5eefd943e7)\n\n### What did you expect to happen?\n\nIn the screenshot above, you'll see 3 prometheus series. I have set \"No value\" to be \"0\". In the visualization, it appears to be working. But you can see that for series 2 and 3 the 0's aren't being included properly when calculating reductions such as \"Min\" and \"Mean\".\n\n### Did this work before?\n\nYes. As discussed in https:\/\/github.com\/grafana\/grafana\/issues\/49030 this used to work in Grafana 8.3.6 with `Graph (old)`, and we have been waiting for reductions with noValue=0 to start working before upgrading any further.\n\n### How do we reproduce it?\n\nJust use the panel debug data attached below.\n\n### Is the bug inside a dashboard panel?\n\n| Key | Value |\r\n|--|--|\r\n| Panel | timeseries @ 10.2.4 (103917bbd7854ea613a42e6a8fcf32d1f3c5a0d2) |\r\n| Grafana | 10.2.4 (103917bbd7854ea613a42e6a8fcf32d1f3c5a0d2) \/\/ Open Source |\r\n<details><summary>Panel debug snapshot dashboard<\/summary>\r\n\r\n```json\r\n{\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"grafana\",\r\n        \"uid\": \"grafana\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"custom\": {\r\n            \"drawStyle\": \"line\",\r\n            \"lineInterpolation\": \"linear\",\r\n            \"barAlignment\": 0,\r\n            \"lineWidth\": 1,\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"spanNulls\": false,\r\n            \"insertNulls\": false,\r\n            \"showPoints\": \"always\",\r\n            \"pointSize\": 5,\r\n            \"stacking\": {\r\n              \"mode\": \"none\",\r\n              \"group\": \"A\"\r\n            },\r\n            \"axisPlacement\": \"auto\",\r\n            \"axisLabel\": \"\",\r\n            \"axisColorMode\": \"text\",\r\n            \"axisBorderShow\": false,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"axisCenteredZero\": false,\r\n            \"hideFrom\": {\r\n              \"tooltip\": false,\r\n              \"viz\": false,\r\n              \"legend\": false\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          },\r\n          \"noValue\": \"0\"\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 13,\r\n        \"w\": 15,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 2,\r\n      \"options\": {\r\n        \"tooltip\": {\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        },\r\n        \"legend\": {\r\n          \"showLegend\": true,\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"calcs\": [\r\n            \"min\",\r\n            \"mean\"\r\n          ]\r\n        }\r\n      },\r\n      \"targets\": [\r\n        {\r\n          \"refId\": \"A\",\r\n          \"datasource\": {\r\n            \"type\": \"grafana\",\r\n            \"uid\": \"grafana\"\r\n          },\r\n          \"queryType\": \"snapshot\",\r\n          \"snapshot\": [\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"A\",\r\n                \"meta\": {\r\n                  \"type\": \"timeseries-multi\",\r\n                  \"typeVersion\": [\r\n                    0,\r\n                    1\r\n                  ],\r\n                  \"custom\": {\r\n                    \"resultType\": \"matrix\"\r\n                  },\r\n                  \"executedQueryString\": \"Expr: vector(1) and ((vector(time()) % 600) < 150)\\nStep: 10s\",\r\n                  \"preferredVisualisationType\": \"graph\"\r\n                },\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"time.Time\"\r\n                    },\r\n                    \"config\": {\r\n                      \"interval\": 10000\r\n                    }\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"float64\"\r\n                    },\r\n                    \"labels\": {},\r\n                    \"config\": {\r\n                      \"displayNameFromDS\": \"vector(1) and ((vector(time()) % 600) < 150)\"\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710424800000,\r\n                    1710424810000,\r\n                    1710424820000,\r\n                    1710424830000,\r\n                    1710424840000,\r\n                    1710424850000,\r\n                    1710424860000,\r\n                    1710424870000,\r\n                    1710424880000,\r\n                    1710424890000,\r\n                    1710424900000,\r\n                    1710424910000,\r\n                    1710424920000,\r\n                    1710424930000,\r\n                    1710424940000,\r\n                    1710425400000,\r\n                    1710425410000,\r\n                    1710425420000,\r\n                    1710425430000,\r\n                    1710425440000,\r\n                    1710425450000,\r\n                    1710425460000,\r\n                    1710425470000,\r\n                    1710425480000,\r\n                    1710425490000,\r\n                    1710425500000,\r\n                    1710425510000,\r\n                    1710425520000,\r\n                    1710425530000,\r\n                    1710425540000,\r\n                    1710426000000,\r\n                    1710426010000,\r\n                    1710426020000,\r\n                    1710426030000,\r\n                    1710426040000,\r\n                    1710426050000,\r\n                    1710426060000,\r\n                    1710426070000,\r\n                    1710426080000,\r\n                    1710426090000,\r\n                    1710426100000,\r\n                    1710426110000,\r\n                    1710426120000,\r\n                    1710426130000,\r\n                    1710426140000,\r\n                    1710426600000,\r\n                    1710426610000,\r\n                    1710426620000,\r\n                    1710426630000,\r\n                    1710426640000,\r\n                    1710426650000,\r\n                    1710426660000,\r\n                    1710426670000,\r\n                    1710426680000,\r\n                    1710426690000,\r\n                    1710426700000,\r\n                    1710426710000,\r\n                    1710426720000,\r\n                    1710426730000,\r\n                    1710426740000,\r\n                    1710427200000,\r\n                    1710427210000,\r\n                    1710427220000,\r\n                    1710427230000,\r\n                    1710427240000,\r\n                    1710427250000,\r\n                    1710427260000,\r\n                    1710427270000,\r\n                    1710427280000,\r\n                    1710427290000,\r\n                    1710427300000,\r\n                    1710427310000,\r\n                    1710427320000,\r\n                    1710427330000,\r\n                    1710427340000,\r\n                    1710427800000,\r\n                    1710427810000,\r\n                    1710427820000,\r\n                    1710427830000,\r\n                    1710427840000,\r\n                    1710427850000,\r\n                    1710427860000,\r\n                    1710427870000,\r\n                    1710427880000,\r\n                    1710427890000,\r\n                    1710427900000,\r\n                    1710427910000,\r\n                    1710427920000,\r\n                    1710427930000,\r\n                    1710427940000\r\n                  ],\r\n                  [\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"B\",\r\n                \"meta\": {\r\n                  \"type\": \"timeseries-multi\",\r\n                  \"typeVersion\": [\r\n                    0,\r\n                    1\r\n                  ],\r\n                  \"custom\": {\r\n                    \"resultType\": \"matrix\"\r\n                  },\r\n                  \"executedQueryString\": \"Expr: vector(1) and (((vector(time()) + 200) % 600) < 150)\\nStep: 10s\",\r\n                  \"preferredVisualisationType\": \"graph\"\r\n                },\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"time.Time\"\r\n                    },\r\n                    \"config\": {\r\n                      \"interval\": 10000\r\n                    }\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"float64\"\r\n                    },\r\n                    \"labels\": {},\r\n                    \"config\": {\r\n                      \"displayNameFromDS\": \"vector(1) and (((vector(time()) + 200) % 600) < 150)\"\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710424660000,\r\n                    1710424670000,\r\n                    1710424680000,\r\n                    1710424690000,\r\n                    1710424700000,\r\n                    1710424710000,\r\n                    1710424720000,\r\n                    1710424730000,\r\n                    1710424740000,\r\n                    1710425200000,\r\n                    1710425210000,\r\n                    1710425220000,\r\n                    1710425230000,\r\n                    1710425240000,\r\n                    1710425250000,\r\n                    1710425260000,\r\n                    1710425270000,\r\n                    1710425280000,\r\n                    1710425290000,\r\n                    1710425300000,\r\n                    1710425310000,\r\n                    1710425320000,\r\n                    1710425330000,\r\n                    1710425340000,\r\n                    1710425800000,\r\n                    1710425810000,\r\n                    1710425820000,\r\n                    1710425830000,\r\n                    1710425840000,\r\n                    1710425850000,\r\n                    1710425860000,\r\n                    1710425870000,\r\n                    1710425880000,\r\n                    1710425890000,\r\n                    1710425900000,\r\n                    1710425910000,\r\n                    1710425920000,\r\n                    1710425930000,\r\n                    1710425940000,\r\n                    1710426400000,\r\n                    1710426410000,\r\n                    1710426420000,\r\n                    1710426430000,\r\n                    1710426440000,\r\n                    1710426450000,\r\n                    1710426460000,\r\n                    1710426470000,\r\n                    1710426480000,\r\n                    1710426490000,\r\n                    1710426500000,\r\n                    1710426510000,\r\n                    1710426520000,\r\n                    1710426530000,\r\n                    1710426540000,\r\n                    1710427000000,\r\n                    1710427010000,\r\n                    1710427020000,\r\n                    1710427030000,\r\n                    1710427040000,\r\n                    1710427050000,\r\n                    1710427060000,\r\n                    1710427070000,\r\n                    1710427080000,\r\n                    1710427090000,\r\n                    1710427100000,\r\n                    1710427110000,\r\n                    1710427120000,\r\n                    1710427130000,\r\n                    1710427140000,\r\n                    1710427600000,\r\n                    1710427610000,\r\n                    1710427620000,\r\n                    1710427630000,\r\n                    1710427640000,\r\n                    1710427650000,\r\n                    1710427660000,\r\n                    1710427670000,\r\n                    1710427680000,\r\n                    1710427690000,\r\n                    1710427700000,\r\n                    1710427710000,\r\n                    1710427720000,\r\n                    1710427730000,\r\n                    1710427740000,\r\n                    1710428200000,\r\n                    1710428210000,\r\n                    1710428220000,\r\n                    1710428230000,\r\n                    1710428240000,\r\n                    1710428250000,\r\n                    1710428260000\r\n                  ],\r\n                  [\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"C\",\r\n                \"meta\": {\r\n                  \"type\": \"timeseries-multi\",\r\n                  \"typeVersion\": [\r\n                    0,\r\n                    1\r\n                  ],\r\n                  \"custom\": {\r\n                    \"resultType\": \"matrix\"\r\n                  },\r\n                  \"executedQueryString\": \"Expr: vector(1) and (((vector(time()) + 400) % 600) < 150)\\nStep: 10s\",\r\n                  \"preferredVisualisationType\": \"graph\"\r\n                },\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"time.Time\"\r\n                    },\r\n                    \"config\": {\r\n                      \"interval\": 10000\r\n                    }\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"typeInfo\": {\r\n                      \"frame\": \"float64\"\r\n                    },\r\n                    \"labels\": {},\r\n                    \"config\": {\r\n                      \"displayNameFromDS\": \"vector(1) and (((vector(time()) + 400) % 600) < 150)\"\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710425000000,\r\n                    1710425010000,\r\n                    1710425020000,\r\n                    1710425030000,\r\n                    1710425040000,\r\n                    1710425050000,\r\n                    1710425060000,\r\n                    1710425070000,\r\n                    1710425080000,\r\n                    1710425090000,\r\n                    1710425100000,\r\n                    1710425110000,\r\n                    1710425120000,\r\n                    1710425130000,\r\n                    1710425140000,\r\n                    1710425600000,\r\n                    1710425610000,\r\n                    1710425620000,\r\n                    1710425630000,\r\n                    1710425640000,\r\n                    1710425650000,\r\n                    1710425660000,\r\n                    1710425670000,\r\n                    1710425680000,\r\n                    1710425690000,\r\n                    1710425700000,\r\n                    1710425710000,\r\n                    1710425720000,\r\n                    1710425730000,\r\n                    1710425740000,\r\n                    1710426200000,\r\n                    1710426210000,\r\n                    1710426220000,\r\n                    1710426230000,\r\n                    1710426240000,\r\n                    1710426250000,\r\n                    1710426260000,\r\n                    1710426270000,\r\n                    1710426280000,\r\n                    1710426290000,\r\n                    1710426300000,\r\n                    1710426310000,\r\n                    1710426320000,\r\n                    1710426330000,\r\n                    1710426340000,\r\n                    1710426800000,\r\n                    1710426810000,\r\n                    1710426820000,\r\n                    1710426830000,\r\n                    1710426840000,\r\n                    1710426850000,\r\n                    1710426860000,\r\n                    1710426870000,\r\n                    1710426880000,\r\n                    1710426890000,\r\n                    1710426900000,\r\n                    1710426910000,\r\n                    1710426920000,\r\n                    1710426930000,\r\n                    1710426940000,\r\n                    1710427400000,\r\n                    1710427410000,\r\n                    1710427420000,\r\n                    1710427430000,\r\n                    1710427440000,\r\n                    1710427450000,\r\n                    1710427460000,\r\n                    1710427470000,\r\n                    1710427480000,\r\n                    1710427490000,\r\n                    1710427500000,\r\n                    1710427510000,\r\n                    1710427520000,\r\n                    1710427530000,\r\n                    1710427540000,\r\n                    1710428000000,\r\n                    1710428010000,\r\n                    1710428020000,\r\n                    1710428030000,\r\n                    1710428040000,\r\n                    1710428050000,\r\n                    1710428060000,\r\n                    1710428070000,\r\n                    1710428080000,\r\n                    1710428090000,\r\n                    1710428100000,\r\n                    1710428110000,\r\n                    1710428120000,\r\n                    1710428130000,\r\n                    1710428140000\r\n                  ],\r\n                  [\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1,\r\n                    1\r\n                  ]\r\n                ]\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      \"title\": \"Reproduced with embedded data\",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"gridPos\": {\r\n        \"h\": 7,\r\n        \"w\": 9,\r\n        \"x\": 15,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 5,\r\n      \"options\": {\r\n        \"content\": \"<table width=\\\"100%\\\">\\n    <tr>\\n      <th width=\\\"2%\\\">Panel<\/th>\\n      <td >timeseries @ 10.2.4 (103917bbd7854ea613a42e6a8fcf32d1f3c5a0d2)<\/td>\\n    <\/tr>\\n    <tr>\\n      <th>Queries<\/th>\\n      <td>A[prometheus], B[prometheus], C[prometheus]<\/td>\\n    <\/tr>\\n    \\n    <tr><th>Data<\/th><td> 3 frames, 6 fields, 271 rows <\/td><\/tr>\\n    \\n    <tr>\\n      <th>Grafana<\/th>\\n      <td>10.2.4 (103917bbd7854ea613a42e6a8fcf32d1f3c5a0d2) \/\/ Open Source<\/td>\\n    <\/tr>\\n  <\/table>\",\r\n        \"mode\": \"html\"\r\n      },\r\n      \"title\": \"Debug info\",\r\n      \"type\": \"text\"\r\n    },\r\n    {\r\n      \"id\": 6,\r\n      \"title\": \"Original Panel JSON\",\r\n      \"type\": \"text\",\r\n      \"gridPos\": {\r\n        \"h\": 13,\r\n        \"w\": 9,\r\n        \"x\": 15,\r\n        \"y\": 7\r\n      },\r\n      \"options\": {\r\n        \"content\": \"{\\n  \\\"datasource\\\": {\\n    \\\"uid\\\": \\\"P1809F7CD0C75ACF3\\\",\\n    \\\"type\\\": \\\"prometheus\\\"\\n  },\\n  \\\"fieldConfig\\\": {\\n    \\\"defaults\\\": {\\n      \\\"custom\\\": {\\n        \\\"drawStyle\\\": \\\"line\\\",\\n        \\\"lineInterpolation\\\": \\\"linear\\\",\\n        \\\"barAlignment\\\": 0,\\n        \\\"lineWidth\\\": 1,\\n        \\\"fillOpacity\\\": 0,\\n        \\\"gradientMode\\\": \\\"none\\\",\\n        \\\"spanNulls\\\": false,\\n        \\\"insertNulls\\\": false,\\n        \\\"showPoints\\\": \\\"always\\\",\\n        \\\"pointSize\\\": 5,\\n        \\\"stacking\\\": {\\n          \\\"mode\\\": \\\"none\\\",\\n          \\\"group\\\": \\\"A\\\"\\n        },\\n        \\\"axisPlacement\\\": \\\"auto\\\",\\n        \\\"axisLabel\\\": \\\"\\\",\\n        \\\"axisColorMode\\\": \\\"text\\\",\\n        \\\"axisBorderShow\\\": false,\\n        \\\"scaleDistribution\\\": {\\n          \\\"type\\\": \\\"linear\\\"\\n        },\\n        \\\"axisCenteredZero\\\": false,\\n        \\\"hideFrom\\\": {\\n          \\\"tooltip\\\": false,\\n          \\\"viz\\\": false,\\n          \\\"legend\\\": false\\n        },\\n        \\\"thresholdsStyle\\\": {\\n          \\\"mode\\\": \\\"off\\\"\\n        }\\n      },\\n      \\\"color\\\": {\\n        \\\"mode\\\": \\\"palette-classic\\\"\\n      },\\n      \\\"mappings\\\": [],\\n      \\\"thresholds\\\": {\\n        \\\"mode\\\": \\\"absolute\\\",\\n        \\\"steps\\\": [\\n          {\\n            \\\"color\\\": \\\"green\\\",\\n            \\\"value\\\": null\\n          },\\n          {\\n            \\\"color\\\": \\\"red\\\",\\n            \\\"value\\\": 80\\n          }\\n        ]\\n      },\\n      \\\"noValue\\\": \\\"0\\\"\\n    },\\n    \\\"overrides\\\": []\\n  },\\n  \\\"gridPos\\\": {\\n    \\\"h\\\": 8,\\n    \\\"w\\\": 12,\\n    \\\"x\\\": 0,\\n    \\\"y\\\": 0\\n  },\\n  \\\"id\\\": 1,\\n  \\\"options\\\": {\\n    \\\"tooltip\\\": {\\n      \\\"mode\\\": \\\"single\\\",\\n      \\\"sort\\\": \\\"none\\\"\\n    },\\n    \\\"legend\\\": {\\n      \\\"showLegend\\\": true,\\n      \\\"displayMode\\\": \\\"list\\\",\\n      \\\"placement\\\": \\\"bottom\\\",\\n      \\\"calcs\\\": [\\n        \\\"min\\\",\\n        \\\"mean\\\"\\n      ]\\n    }\\n  },\\n  \\\"targets\\\": [\\n    {\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"prometheus\\\",\\n        \\\"uid\\\": \\\"P1809F7CD0C75ACF3\\\"\\n      },\\n      \\\"editorMode\\\": \\\"code\\\",\\n      \\\"expr\\\": \\\"vector(1) and ((vector(time()) % 600) < 150)\\\",\\n      \\\"hide\\\": false,\\n      \\\"instant\\\": false,\\n      \\\"interval\\\": \\\"10s\\\",\\n      \\\"legendFormat\\\": \\\"__auto\\\",\\n      \\\"range\\\": true,\\n      \\\"refId\\\": \\\"A\\\"\\n    },\\n    {\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"prometheus\\\",\\n        \\\"uid\\\": \\\"P1809F7CD0C75ACF3\\\"\\n      },\\n      \\\"editorMode\\\": \\\"code\\\",\\n      \\\"expr\\\": \\\"vector(1) and (((vector(time()) + 200) % 600) < 150)\\\",\\n      \\\"hide\\\": false,\\n      \\\"instant\\\": false,\\n      \\\"interval\\\": \\\"10s\\\",\\n      \\\"legendFormat\\\": \\\"__auto\\\",\\n      \\\"range\\\": true,\\n      \\\"refId\\\": \\\"B\\\"\\n    },\\n    {\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"prometheus\\\",\\n        \\\"uid\\\": \\\"P1809F7CD0C75ACF3\\\"\\n      },\\n      \\\"editorMode\\\": \\\"code\\\",\\n      \\\"expr\\\": \\\"vector(1) and (((vector(time()) + 400) % 600) < 150)\\\",\\n      \\\"hide\\\": false,\\n      \\\"instant\\\": false,\\n      \\\"interval\\\": \\\"10s\\\",\\n      \\\"legendFormat\\\": \\\"__auto\\\",\\n      \\\"range\\\": true,\\n      \\\"refId\\\": \\\"C\\\"\\n    }\\n  ],\\n  \\\"title\\\": \\\"Panel\\\",\\n  \\\"type\\\": \\\"timeseries\\\"\\n}\",\r\n        \"mode\": \"code\",\r\n        \"code\": {\r\n          \"language\": \"json\",\r\n          \"showLineNumbers\": true,\r\n          \"showMiniMap\": true\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": 3,\r\n      \"title\": \"Data from panel above\",\r\n      \"type\": \"table\",\r\n      \"datasource\": {\r\n        \"type\": \"datasource\",\r\n        \"uid\": \"-- Dashboard --\"\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 7,\r\n        \"w\": 15,\r\n        \"x\": 0,\r\n        \"y\": 13\r\n      },\r\n      \"options\": {\r\n        \"showTypeIcons\": true\r\n      },\r\n      \"targets\": [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"datasource\",\r\n            \"uid\": \"-- Dashboard --\"\r\n          },\r\n          \"panelId\": 2,\r\n          \"withTransforms\": true,\r\n          \"refId\": \"A\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"schemaVersion\": 37,\r\n  \"title\": \"Debug: Panel \/\/ 2024-03-14 08:00:42\",\r\n  \"tags\": [\r\n    \"debug\",\r\n    \"debug-timeseries\"\r\n  ],\r\n  \"time\": {\r\n    \"from\": \"2024-03-14T14:00:42.398Z\",\r\n    \"to\": \"2024-03-14T15:00:42.398Z\"\r\n  }\r\n}\r\n```\r\n<\/details>\n\n### Environment (with versions)?\n\nGrafana: 10.4.0\r\nOS: docker (alpine) on Archlinux (kernel 6.7.8)\r\nBrowser: reproduced on both Firefox 123.0.1 and Edge 122.0.2365.80\n\n### Grafana platform?\n\nDocker\n\n### Datasource(s)?\n\nprometheus","comments":["After a lot of printf debugging, I learned the following:\r\n* `reduceField()` from `packages\/grafana-data\/src\/transformations\/fieldReducer.ts` is called twice for each series\r\n  * On the first call, noValue is not set, so the min() calculation returns 1 and the value is cached inside field.state.calcs\r\n  * On the second call, noValue is set, but field.state.calcs still holds the old, cached value from the first calculation and so it doesn't recalculate to get the proper answer (min=0). Weirdly, the first series doesn't have the cached value - only series 2 and 3. I haven't yet been able to figure out why that's the case.","One solution could be https:\/\/github.com\/grafana\/grafana\/pull\/84486","hey there, @lukeyeager ,\r\n\r\nwe had a chat about this today and agreed that we need to fix this correctly rather than continuing to apply band-aids without addressing the root cause.\r\n\r\nthe root cause of a lot of past `noValue` issues (and this one) is that the calcs are done inside of `fieldOverrides` [1] on data which has not yet been passed to the panel or been processed by any additional panel settings (such as noValue, spanNulls, boolean -> 0,1 conversion, value stacking, etc). since we do not currently re-process the calcs for performance reasons (the state cache for calcs is there for the same purpose), we end up with calcs from post-transform data. your PR resets the cache each time, which is not a great solution perf-wise, though it is _a_ solution :+1: and thanks for taking the time to investigate it.\r\n\r\nwhat we want to try is to completely avoid running the calcs on pre-panel data, and instead delegate calcs to the panels, where they are closer to the final data shape. that will allow us to remove a lot of previous patches that complicate the code and make the flow more confusing.\r\n\r\n[1] https:\/\/github.com\/grafana\/grafana\/blob\/0fa0cede7515c8a886734b0cae046bab31de9fc7\/packages\/grafana-data\/src\/field\/fieldOverrides.ts#L170",">  your PR resets the cache each time, which is not a great solution perf-wise, though it is a solution \ud83d\udc4d and thanks for taking the time to investigate it.\r\n> \r\n> what we want to try is to completely avoid running the calcs on pre-panel data, and instead delegate calcs to the panels, where they are closer to the final data shape.\r\n\r\nThat makes sense to me based on what I've seen, thanks for discussing!\r\n\r\nCan you give an ETA on when y'all can fix it the right way? I'm trying to trade-off how much time I'll spend rebasing my local patch onto future releases vs. how much development time it would take me to try to dig even further into the codebase and fix it myself.","i dont think we will touch the `nullToValue` util fn. we may just stop using `field.state.calcs` inside the panels and re-do the calcs locally as a first step. this feels pretty straightforward, but i haven't dug into it yet. that will fix this and other wrong legend calcs issues, but might introduce behavior changes, too!\r\n\r\npreventing the calcs from being done in fieldOverrides is a riskier and bigger lift. it would be somewhat easier if we did not have a \"match by reducer\" field matcher that relies on pre-panel data (and calcs). this is one place i'm aware of that will need some attention. more will likely come up.\r\n\r\ni think we can look at this within the next month, but we're in the final stretch of G11 features before the code freeze \/ beta.\r\n\r\nif you want to take a stab at tweaking the legend code in a couple panels to re-do the calcs, that would probably speed things up :)\r\n\r\nas a first-first step, we can still continue to use `field.state.calcs` to avoid touching too much of the API, but replace that value with locally-redone calcs using the final fields."],"labels":["area\/transformations"]},{"title":"Alerting: Handle slashes in rules API endpoint","body":"Prometheus and Mimir rules containing slashes in namespaces and group names cause 404 errors due to slash character being encoded by middleware proxies before reaching grafana server\n\nThere are 2 possible solutions to this problem:\n\n1. Pass parameters that currently go in the path to query parameters (like \/rules?group=foo%2Fbar&namespace=with%2Fslashes)\n2. Pass them the request body of a POST request \n\n1) we have paths like `\/ruler\/{DatasourceUID}\/api\/v1\/rules\/{Namespace}\/{Groupname}` in the case of slashes in folder name\\group we do `\/ruler\/{DatasourceUID}\/api\/v1\/rules\/QUERY_NAMESPACE\/QUERRY_GROUP?namespace=with%2Fslashes&group=with%2Fslashes`. \nThis way we do not need to modify any routing, and just update the proxy URL builder. \nPros: the path can work as normal and do not break anyone who relies upon those APIs in OSS or GE.\n\n2) will require changes in endpoints and models. A new set of endpoints would make sense. The model for those endpoints could be a wrapper for an old model with group name and namespace.\n\n\n**Related bug reports**\nhttps:\/\/github.com\/grafana\/grafana\/issues\/83088","comments":[],"labels":["type\/bug","area\/alerting","area\/backend","area\/frontend","internal"]},{"title":"CloudWatch Logs: Use Monaco query language for cheat sheet","body":"The query cheat sheet [uses the old query language](https:\/\/github.com\/grafana\/grafana\/blob\/8e90e02db2bf9de26766a5c640f8717bfb103fdb\/public\/app\/plugins\/datasource\/cloudwatch\/components\/CheatSheet\/LogsCheatSheet.tsx#L335) to color code the suggested code snippets. We should make it so that it uses the monaco language. We also may be able to remove the old query language completely after that, but we have to confirm that the `languageProvider` property on [CloudWatchDatasource](https:\/\/github.com\/grafana\/grafana\/blob\/8e90e02db2bf9de26766a5c640f8717bfb103fdb\/public\/app\/plugins\/datasource\/cloudwatch\/datasource.ts#L47) isn't used for anything first.","comments":[],"labels":["type\/chore","datasource\/CloudWatch Logs","internal"]},{"title":"Update dependency typescript to v5.4.3","body":"[![Mend Renovate](https:\/\/app.renovatebot.com\/images\/banner.svg)](https:\/\/renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Change | Age | Adoption | Passing | Confidence |\n|---|---|---|---|---|---|\n| [typescript](https:\/\/www.typescriptlang.org\/) ([source](https:\/\/togithub.com\/Microsoft\/TypeScript)) | [`5.3.3` -> `5.4.3`](https:\/\/renovatebot.com\/diffs\/npm\/typescript\/5.3.3\/5.4.3) | [![age](https:\/\/developer.mend.io\/api\/mc\/badges\/age\/npm\/typescript\/5.4.3?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![adoption](https:\/\/developer.mend.io\/api\/mc\/badges\/adoption\/npm\/typescript\/5.4.3?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![passing](https:\/\/developer.mend.io\/api\/mc\/badges\/compatibility\/npm\/typescript\/5.3.3\/5.4.3?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![confidence](https:\/\/developer.mend.io\/api\/mc\/badges\/confidence\/npm\/typescript\/5.3.3\/5.4.3?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) |\n\n---\n\n> [!WARNING]\n> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.\n\n---\n\n### Release Notes\n\n<details>\n<summary>Microsoft\/TypeScript (typescript)<\/summary>\n\n### [`v5.4.3`](https:\/\/togithub.com\/microsoft\/TypeScript\/releases\/tag\/v5.4.3): TypeScript 5.4.3\n\n[Compare Source](https:\/\/togithub.com\/Microsoft\/TypeScript\/compare\/v5.4.2...v5.4.3)\n\nFor release notes, check out the [release announcement](https:\/\/devblogs.microsoft.com\/typescript\/announcing-typescript-5-4\/).\n\nFor the complete list of fixed issues, check out the\n\n-   [fixed issues query for Typescript 5.4.0 (Beta)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.0%22+is%3Aclosed+).\n-   [fixed issues query for Typescript 5.4.1 (RC)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.1%22+is%3Aclosed+).\n-   [fixed issues query for Typescript 5.4.2 (Stable)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.2%22+is%3Aclosed+).\n-   [fixed issues query for Typescript 5.4.3 (Stable)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.3%22+is%3Aclosed+).\n\nDownloads are available on:\n\n-   [NuGet package](https:\/\/www.nuget.org\/packages\/Microsoft.TypeScript.MSBuild)\n\n### [`v5.4.2`](https:\/\/togithub.com\/microsoft\/TypeScript\/releases\/tag\/v5.4.2): TypeScript 5.4\n\n[Compare Source](https:\/\/togithub.com\/Microsoft\/TypeScript\/compare\/v5.3.3...v5.4.2)\n\nFor release notes, check out the [release announcement](https:\/\/devblogs.microsoft.com\/typescript\/announcing-typescript-5-4\/).\n\nFor the complete list of fixed issues, check out the\n\n-   [fixed issues query for Typescript 5.4.0 (Beta)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.0%22+is%3Aclosed+).\n-   [fixed issues query for Typescript 5.4.1 (RC)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.1%22+is%3Aclosed+).\n-   [fixed issues query for Typescript 5.4.2 (Stable)](https:\/\/togithub.com\/Microsoft\/TypeScript\/issues?utf8=%E2%9C%93\\&q=milestone%3A%22TypeScript+5.4.2%22+is%3Aclosed+).\n\nDownloads are available on:\n\n-   [NuGet package](https:\/\/www.nuget.org\/packages\/Microsoft.TypeScript.MSBuild)\n\n<\/details>\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase\/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase\/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https:\/\/www.mend.io\/free-developer-tools\/renovate\/). View repository job log [here](https:\/\/developer.mend.io\/github\/grafana\/grafana).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4yNDUuMCIsInVwZGF0ZWRJblZlciI6IjM3LjI2MS4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->\n","comments":["There's some typescript failures in this. I will fix."],"labels":["area\/frontend","datasource\/GoogleCloudMonitoring","datasource\/Azure","dependencies","datasource\/Tempo","no-changelog","datasource\/grafana-pyroscope"]},{"title":"Prometheus: Add $__interval_s and $__rate_inteval_s to go along with $__interval_ms and $__rate_interval_ms","body":"**What is this feature?**\r\n\r\nAdded two new variables $__interval_s and $__rate_inteval_s. Equivalents of already existing $__interval_ms and $__rate_inteval_ms but in seconds. \r\n\r\n**Why do we need this feature?**\r\n\r\nFor some usecases it is simply more convenient to operate on seconds rather milliseconds (depending on the metric). `$__rate_interval_s` is simpler and less error-prone compared to `($__rate_interval_s \/ 1e3)`.\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84456) <br\/>All committers have signed the CLA."],"labels":["type\/docs","area\/backend","pr\/external"]},{"title":"Grafana: define the api for the grafana cloudmigration api (not the csm api)","body":"Updated suggested API here https:\/\/github.com\/grafana\/grafana\/pull\/84430#pullrequestreview-1946239291\r\n\r\nAdd design for cloud migration endpoints.\r\n\r\n\t\t\/\/ authentication\r\n\t       GET \/api\/cloudmigration\/authentication\r\n\t       POST \/api\/cloudmigration\/\/token\r\n\t\t\/\/ migration\r\n\t\tGET \/api\/cloudmigration\/migration\r\n\t\tGET \/api\/cloudmigration\/migration\/:id\r\n\t\tPOST \/api\/cloudmigration\/migration\r\n\t\tPOST \/api\/cloudmigration\/migration\/:id\/run\r\n\t\tGET \/api\/cloudmigration\/migration\/:uid\/run\r\n\t\tGET \/api\/cloudmigration\/migration\/:uid\/status\r\n\r\nFixes #https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/676\r\n","comments":["Reply to the comment above (not clicking reply because there's too much text)\r\n\r\nUsually, auth tokens are sent in the header instead of the request body. Should we do that instead?\r\n\r\nAbout Update migration:\r\nWhat does it mean to update a migration?","> Reply to the comment above (not clicking reply because there's too much text)\r\n> \r\n> Usually, auth tokens are sent in the header instead of the request body. Should we do that instead?\r\n\r\nIsn't that usually for the main auth token used to authenticate with the service you are talking to? In this case that would be Grafana which you can do that for. But we are sening the auth token to be stored in grafana as well as forwarded to another service. Do you think it's usual in our case?\r\n \r\n> About Update migration: What does it mean to update a migration?\r\n\r\nThe case for updating a migration is to re-authenticate with a new auth token either if the token has been removed or its time has run out. It is a functionality we can easily skip for now if we decide it doesn't make sense as its easy to add later if there's need. I just thought it might make sense to add it while we were at it. But we can remove it for now.","> Member\r\n\r\nCan you remind me why we need to forward the auth token to another service?","> > Member\r\n> \r\n> Can you remind me why we need to forward the auth token to another service?\r\n\r\nWe are storing it in the grafana backend so that we can send it to the cloud migration service when making migrations."],"labels":["area\/backend","no-backport","no-changelog"]},{"title":"Prometheus Datasource: scrape interval in mixed datasource","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\nOriginated from https:\/\/community.grafana.com\/t\/graph-panels-using-mixed-data-sources-do-not-respect-prometheus-scrape-interval\/16082\r\n\r\nPanels using \u201cMixed\u201d data sources do not respect Prometheus \u201cScrape Interval\u201d [setting](https:\/\/grafana.com\/docs\/grafana\/latest\/datasources\/prometheus\/configure-prometheus-data-source\/#interval-behavior) but is respected when Prometheus datasource is used directly.\r\n\r\nThere is a workaround of setting `minStep` on the query but it means users would have to set it on every query which makes it hard for those that have to manage a lot of queries \/ dashboards.\r\n\r\n**What would you like to be added**:\r\n\r\nPlease evaluate what our options are and if that is something we want to support in the combination \"mixed datasource -> prometheus\"\r\n\r\n**Who is this feature for?**\r\nThis who use scrape interval setting for prometheus in combination with prometheus in mixed datasource.\r\n\r\nInternal note: \r\nAdded dashboards squad as owners of mixed datasource.\r\n\r\n**How to reproduce**\r\nIn any Grafana version (you can use latest):\r\n- Create a prometheus datasource with scrape interval and set it to some value e.g. `1m`\r\n- Create a dashboard with mixed datasource and add this prometheus datasource to it, using interval \r\n- Check out the query being sent via query inspector and see that scrape interval had no affect\r\n- Now use the prometheus datasource directly and see that in query inspector now this setting has an effect\r\n\r\n\r\n![SCR-20240313-lfpz (1)](https:\/\/github.com\/grafana\/grafana\/assets\/580672\/7883f1fb-69fe-4536-bd86-422dec58702b)\r\n\r\n<img width=\"935\" alt=\"SCR-20240313-lghz (1)\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/580672\/78ded541-ccb2-4e92-a2e1-23cdcf8a16b8\">\r\n\r\n\r\n","comments":[],"labels":["type\/feature-request","prio\/high","datasource\/Prometheus","team\/grafana-dashboards"]},{"title":"[WIP] VizTooltips: Remove old tooltips and annotations","body":"Fixes https:\/\/github.com\/grafana\/grafana\/issues\/83632\r\n\r\nthe way to review this is not to look at the code :sweat_smile:. but just to make sure the new tooltips continue to work as before :+1: ","comments":["\u26a0\ufe0f &nbsp;&nbsp;**Possible breaking changes (md version)**&nbsp;&nbsp; \u26a0\ufe0f\n\n<h3>grafana-ui<\/h3><h4>Removals<\/h4><b>TooltipPlugin<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\nTooltipPlugin\n<\/pre><br>\n<b>UPlotConfigBuilder.setTooltipInterpolator<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\nsetTooltipInterpolator(interpolator: PlotTooltipInterpolator): void;\n<\/pre><br>\n<b>UPlotConfigBuilder.getTooltipInterpolator<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\ngetTooltipInterpolator(): PlotTooltipInterpolator | undefined;\n<\/pre><br>\n<b>UPlotConfigBuilder.setSync<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\nsetSync(): void;\n<\/pre><br>\n<b>UPlotConfigBuilder.hasSync<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\nhasSync(): boolean;\n<\/pre><br>\n<b>ZoomPlugin<\/b><br>\n<sub>\/home\/runner\/work\/grafana\/grafana\/base\/grafana-ui\/dist\/index.d.ts<\/sub><br>\n<pre lang=\"typescript\">\nZoomPlugin\n<\/pre><br><br>\n\n[Read our guideline](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/breaking-changes-guide\/breaking-changes-guide.md)\n[Console output](https:\/\/github.com\/grafana\/grafana\/actions\/runs\/8398676712\/job\/23003855544?check_suite_focus=true#step:8:1)\n<!-- Sticky Pull Request Commentlevitate-breaking-change-comment -->","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **leeoniya\/vizTooltips-extract-sync** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.17.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.18.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/go-logr\/logr v1.2.4\ngo: downloading go.opentelemetry.io\/otel\/metric v1.18.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.0.0\ngo: downloading google.golang.org\/protobuf v1.31.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20230711160842-782d3b101e98\ngo: downloading google.golang.org\/grpc v1.58.0\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading golang.org\/x\/sys v0.14.0\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.16.0\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading golang.org\/x\/net v0.12.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20230711160842-782d3b101e98\ngo: downloading golang.org\/x\/text v0.11.0\n2024\/03\/19 09:25:05 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-19T09:25:11.772Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/19 09:25:11 if git -C src checkout leeoniya\/vizTooltips-extract-sync; then echo \"checked out leeoniya\/vizTooltips-extract-sync\"; else exit 3; fi\n2024\/03\/19 09:27:46 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-19T09:27:49.837Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/19 09:27:49 if git -C src checkout leeoniya\/vizTooltips-extract-sync; then echo \"checked out leeoniya\/vizTooltips-extract-sync\"; else exit 3; fi\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/19 09:27:49 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/19 09:27:49 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/19 09:27:49 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/19 09:27:49 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-19T09:27:49.854Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-19T09:27:49.855Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-19T09:27:49.855Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-19T09:27:49.855Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-19T09:28:32.272Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-19T09:28:32.295Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-19T09:28:32.309Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-19T09:28:32.323Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/report\/render\npkg\/extensions\/report\/render\/pdf.go:26:21: r.Renderer.IsCapabilitySupported undefined (type rendering.Service has no field or method IsCapabilitySupported)\npkg\/extensions\/report\/render\/pdf.go:26:58: undefined: rendering.PDFRendering\nexit status 1\n exit status 1"],"labels":["area\/panel\/heatmap","area\/frontend","area\/panel\/timeseries","area\/panel\/barchart","area\/panel\/xychart","area\/panel\/state-timeline","area\/panel\/status-history","area\/panel\/candlestick","no-backport","levitate breaking change","no-changelog","area\/panel\/trend"]},{"title":"Angular migration guide: How to setup a Suggestion Supplier","body":null,"comments":["@briangann please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/docs","internal"]},{"title":"Live: Add a note with limitation of Grafana Live","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["type\/docs","no-backport","no-changelog"]},{"title":"Canvas: Bug where editing connection's vertices modifies the wrong connection","body":null,"comments":[],"labels":["area\/panel\/canvas"]},{"title":"Plugins: Allow using full plugin ID as data source API group name","body":"**What is this feature?**\r\n\r\nMakes it possible to use the full plugin ID as the API group name for data source API servers.\r\n\r\n**Why do we need this feature?**\r\n\r\nThis allows us to start to work with both core and non-Core Grafana authored data source plugins. This likely isn't the final thing we will land on but it keeps things simple for now.\r\n\r\n**NOTE:** Alternatively, we keep the functionality as is, and introduce a parameter\/config so that we know the explicit plugin ID we are dealing with.\r\n","comments":["I agree it is a bit of a pain that there is not a 1:1 mapping -- big picture we need to decide what the most appropriate group names are and how that can live nicely in a k8s first world.  We currently have a strategy that lets us map pluginID > group, but the other way is not deterministic.\r\n\r\nEventually I think the group name (and apiVersion) should be part of the plugin.json -- I'm fearful that if we make a 1:1 mapping now, then that will get encoded in ways that are hard to undo, and I am not yet willing to tell the world that our new naming strategy is: \ud83d\ude2c \r\n```\r\norg-name-datasource.datasource.grafana.app\r\n```\r\n\r\n\r\n\r\n\r\n","> and I am not yet willing to tell the world that our new naming strategy is: \ud83d\ude2c\r\n> \r\n> ```\r\n> org-name-datasource.datasource.grafana.app\r\n> ```\r\n\r\nI don't think that matters if it's really internal"],"labels":["area\/plugins","area\/backend","area\/datasource","no-backport","no-changelog"]},{"title":"Prometheus: Improve integration tests with plugin-e2e","body":"**What do we need to do?**\r\n\r\n- [ ] Move Prometheus selectors from e2e-selectors ([here](https:\/\/github.com\/grafana\/grafana\/blob\/1e02c831adddc3ec7b01792c4f8ce53bc3c07958\/packages\/grafana-e2e-selectors\/src\/selectors\/components.ts#L63C1-L143C5) and [here](https:\/\/github.com\/grafana\/grafana\/blob\/1e02c831adddc3ec7b01792c4f8ce53bc3c07958\/packages\/grafana-e2e-selectors\/src\/selectors\/components.ts#L434C1-L440C1) to [versioned selectors in plugin-e2e](https:\/\/github.com\/grafana\/plugin-tools\/tree\/main\/packages\/plugin-e2e\/src\/e2e-selectors\/versioned)\r\n- [ ] Replace all selectors in core Prometheus and [external Prometheus](https:\/\/github.com\/grafana\/prometheus-amazon\/issues\/31) data sources\r\n- [ ] Add a new folder with the plugin name in [this](https:\/\/github.com\/grafana\/grafana\/tree\/main\/e2e\/plugin-e2e) directory\r\n- [ ] Setup a new project that runs e2e tests [here](https:\/\/github.com\/grafana\/grafana\/blob\/d6acb474cfaee5f1ee953b0d082d2ee34700f88c\/playwright.config.ts#L55-L63).\r\n\r\n\r\n**Why do we need to do this?**\r\n\r\nWe previously used\/currently use [cypress e2e tests](https:\/\/github.com\/grafana\/grafana\/blob\/main\/e2e\/various-suite\/prometheus-annotations.spec.ts) but are moving into using `@grafana\/plugin-e2e` which uses Playwright. We can then improve integration tests, test across grafana versions, add this to github workflows in external data sources, and more.\r\n\r\n**Examples of tests using `@grafana\/plugin-e2e`**\r\n\r\n- [General help](https:\/\/grafana.com\/developers\/plugin-tools\/e2e-test-a-plugin\/introduction)\r\n- [External Prometheus plugin-e2e with github workflow](https:\/\/github.com\/grafana\/prometheus-amazon\/pull\/27)\r\n- [Infinity data source with plugin-e2e and github workflow](https:\/\/github.com\/grafana\/grafana-infinity-datasource\/blob\/e2e-playwright\/docker-compose-debug.yaml)","comments":[],"labels":["datasource\/Prometheus","type\/epic","area\/datasource\/frontend","type\/e2e","area\/grafana\/e2e"]},{"title":"Stat: Percent change incorrect when previous datapoint is invalid","body":"The percent change displayed when the previous datapoint is missing is displaying `00%` which is confusing and not a useful thing to display.\r\n\r\nI would argue that 00% is actually incorrect. The previous value is no-data, so you can't say that the change is 0% -  you could argue that it's rather a period of infinite relative growth, if the no-data corresponds to a zero absolute amount previously.\r\n\r\nSee this internal [slack message for more context](https:\/\/raintank-corp.slack.com\/archives\/C04J73AAQ87\/p1710264656442539?thread_ts=1705594881.953189&cid=C04J73AAQ87)","comments":[],"labels":["type\/bug","area\/panel\/stat","internal"]},{"title":"Read-only annotations","body":"**Why is this needed**:\r\n\r\nMost datasource only support retrieving data for annotation and have no support for updating\/deleting these annotations. When such annotation queries are used it can be quite confusing for users that they see the option to delete or edit these annotations. \r\n\r\n**What would you like to be added**:\r\n\r\nA readonly checkmark when creating an annotation query so that the edit and delete buttons are not shown for annotations originating from that query.\r\nAn option in the library for developing custom datasources to indicate that annotations from that datasource are read-only\r\n","comments":["we have code in there that should be handling this. perhaps it's not working correctly.\r\n\r\ncan you try enabling `newVizTooltips` feature flag on your grafana instance and see if the situation improves?\r\n\r\nif not, try doing the same on a nightly build: https:\/\/grafana.com\/grafana\/download\/nightly?edition=oss"],"labels":["area\/annotations","area\/tooltip"]},{"title":"Accessibility: Default Icon to aria-hidden","body":"\r\n**What is this feature?**\r\n\r\nDefaults the Icon component to `aria-hidden`, and adds documentation encouraging adding an accessible title.\r\n\r\n**Why do we need this feature?**\r\n\r\nEmpty images fill up the a11y tree, often when they lack semantic meaning.\r\n\r\n**Who is this feature for?**\r\n\r\nScreen reader users.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #79513 \r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166217\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/frontend","no-changelog"]},{"title":"XY Chart: Missing x dimension: Edit panel not working","body":"### What happened?\n\nAn unexpected error happened:\r\n![grafik](https:\/\/github.com\/grafana\/grafana\/assets\/49042626\/862f3698-52e0-4087-bcdc-c55e4b11e73b)\r\n![grafik](https:\/\/github.com\/grafana\/grafana\/assets\/49042626\/d5ac634b-6a1a-4a7a-adcf-14186b5af1cb)\r\n\n\n### What did you expect to happen?\n\nNormal panel edit window\n\n### Did this work before?\n\nNo\n\n### How do we reproduce it?\n\n1. Create a query with no data\r\n2. Insert it into the XY Chart panel\r\n3. The error occurs, or save the dashboard, load it, and try to open the panel edit window\n\n### Is the bug inside a dashboard panel?\n\n[debug-Panel Title-2024-03-13 12 41 25.json](https:\/\/github.com\/grafana\/grafana\/files\/14587001\/debug-Panel.Title-2024-03-13.12.41.25.json)\r\n\n\n### Environment (with versions)?\n\nGrafana: 10.3.0\r\nOS: docker\/Windows\r\nBrowser: Firefox\r\n\n\n### Grafana platform?\n\nDocker\n\n### Datasource(s)?\n\nPostgreSQL","comments":["a lot of xychart things will be fixed by https:\/\/github.com\/grafana\/grafana\/pull\/82499 next week. we'll verify this issue as well."],"labels":["type\/bug","area\/panel\/xychart"]},{"title":"A11y: Adjust placeholder text color to pass a11y tests","body":"**What is this feature?**\r\n\r\n`placeholder`s  tests are mainly using `theme.color.text.disabled` and this color is not passing a11y test when using the light theme.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo improve accessibility\r\n\r\n**Who is this feature for?**\r\n\r\nAll who care about accessibility\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #79571\r\n\r\n**Special notes for your reviewer:**\r\nAs I see it, I have two options:\r\n1. Change the color of the `disabled` text in light mode, so we will fix this a11y problem everywhere\r\n2. Change the color used by placeholders to another value\r\nI chose the first option as is the more efficient one but not sure if we can change the color values without any issues.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":[],"labels":["area\/frontend","type\/accessibility","no-backport","no-changelog"]},{"title":"Tooltip \/ Toggletip content link styling: Remove global a element selector inside tooltips","body":"**What is this feature?**\r\n\r\nRemoves the global `a` tag selector targeting all links inside tooltips and toggletips.\r\n\r\n**Why do we need this feature?**\r\n\r\nIt overrides the Saga Design system by default when using something like `<LinkButton \/>` inside a Toggletip. The current workaround without this change is to reapply the styles that should be applied by default (which becomes a maintainability nightmare...).\r\n\r\n**Who is this feature for?**\r\n\r\nAll users.\r\n\r\n**Which issue(s) does this PR fix?**:\r\nUn-ticketed.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nI felt a little bit silly adding the test but I also thought it could be easy for it to be added back in by mistake so was worth putting in?\r\n\r\nI also toyed with removing the global selectors for `code` and `pre` in the `buildTooltipTheme` function because they equally should not be there but chose not to to limit the scope of the PR. Is it worth removing those at the same time, too?\r\n\r\n**Before**\r\n\r\n![A screenshot of a Toggletip with a LinkButton inside. The LinkButton text is almost black against a dark blue background and has a text underline.](https:\/\/github.com\/grafana\/grafana\/assets\/6906380\/91d3bb98-c2f5-4cd7-aea7-f675954da6a8)\r\n\r\n**After**\r\n![A screenshot of a Toggletip with a LinkButton inside. The LinkButton text looks identical to where it is used elsewhere in the application, blue background with white text.](https:\/\/github.com\/grafana\/grafana\/assets\/6906380\/c797d683-6091-4980-8cd4-b7f3c1da06bf)\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["I think you should expand the scope. A quick search gives me that `AlertInstanceModalSelector` uses `pre`, can't seem to find anything directly that uses `code`."],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"Alerting docs: review\/create tutorial and create a get started page","body":"### What happened?\n\n- Antonio to create a tutorial, Brenda to give feedback\r\n- Create a get started docs page from it\n\n### What did you expect to happen?\n\nx\n\n### Did this work before?\n\nx\n\n### How do we reproduce it?\n\n1.\r\n2.\r\n3.\r\nx\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana:\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":[],"labels":["type\/docs"]},{"title":"Alerting docs: update introduction topics","body":"### What happened?\n\n- restructure topics in the Intro section to simplify\n\n### What did you expect to happen?\n\nx\n\n### Did this work before?\n\nx\n\n### How do we reproduce it?\n\n1.\r\n2.\r\n3.\r\nx\n\n### Is the bug inside a dashboard panel?\n\nx\n\n### Environment (with versions)?\n\nGrafana:\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":[],"labels":["type\/docs"]},{"title":"Migrations: Graph (old) percent stacked","body":"Fixes https:\/\/github.com\/grafana\/grafana\/issues\/84263\r\n\r\ntest with dashboard in https:\/\/github.com\/grafana\/grafana\/issues\/84263#issuecomment-1991481904\r\n\r\nthis also switches to using hex colors to fix the hover point stroke getting incorrect color due to some migrated colors being `rgb()` and our `alpha()` setting function expects `#hex` color strings.","comments":[],"labels":["area\/panel\/graph","type\/angular-2-react","area\/frontend","area\/panel\/timeseries","no-backport","no-changelog"]},{"title":"Canvas: Selected connection overlap bug","body":"When attempting to select to edit a vertex of a connection that is drawn below another connection, it can overlap, resulting in the mouse event for the vertex to not work.\r\n\r\nNeed to make it such that the z index (or draw order) of the selected connection is always on top.\r\n\r\n![Mar-12-2024 17-48-16](https:\/\/github.com\/grafana\/grafana\/assets\/60050885\/8926356d-54e4-4846-929d-867526d7facb)\r\n\r\n","comments":[],"labels":["area\/panel\/canvas"]},{"title":"Re-work \"should drop any concurrent sending\" scheduler tests which are prone to deadlocking","body":"The following tests have concurrency issues, that are getting by in the CI essentially based on luck.\r\n- `\"update should drop any concurrent sending to updateCh\"`\r\n- `\"eval should drop any concurrent sending to evalCh\"`\r\n\r\nAdding even a tiny (1millisecond) delay to involved code causes the tests to deadlock. For example, consider the test for updating a rule - here's the logic being tested:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/3f5526b9158c0d3345e13a0f192e21090676614f\/pkg\/services\/ngalert\/schedule\/alert_rule.go#L174-L189\r\n\r\nAdd the following sleep between checking if the channel is empty and writing to the channel:\r\n```\r\n        default:\r\n        }\r\n\r\n+       time.Sleep(1 * time.Millisecond)\r\n+\r\n        select {\r\n        case a.updateCh <- lastVersion:\r\n                return true\r\n```\r\nThen run the test suite for that package repeatedly:\r\n```\r\nwhile go clean -testcache && go test -timeout 60s .\/pkg\/services\/ngalert\/schedule\/...; do :; done\r\n```\r\nThe test suite will deadlock and timeout within the first few runs. Sleeping longer than a millisecond all but guarantees it.\r\n\r\nAdding even a memory allocation here affected the tests a bit - just the time taken to allocate caused deadlocks to happen on 2-3% of test runs. The same happens for eval().","comments":["This happens because of the WaitGroup in the test making an incorrect assumption.\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/3f5526b9158c0d3345e13a0f192e21090676614f\/pkg\/services\/ngalert\/schedule\/alert_rule_test.go#L57-L58\r\n\r\nThe test wants the first goroutine to be in a state where it's blocking on the Update() channel write before proceeding. It uses the `Done()` call as a proxy for this. But, there is no locking between the wg.Done() and the update happening - meaning the waitgroup can basically before the test has actually entered this state.\r\n\r\nThis means we might not yet actually be blocking on the write, even though the test thinks we are. The longer the delay, the less chance we are in the right state when wg.Wait() is called for the first time.\r\n\r\nWhen we're in the wrong state, the second goroutine might start too early. Its check on the channel (which should, ideally, unblock the first goroutine) ends up yielding nothing, because the first thread has not actually written yet! Then both threads attempt a blocking channel write, and both are hanging on update(). The guard for this inside update() is not thread safe.\r\n\r\nThen, the test thread is also blocking on wg.Wait(), waiting for this done to be hit: https:\/\/github.com\/grafana\/grafana\/blob\/3f5526b9158c0d3345e13a0f192e21090676614f\/pkg\/services\/ngalert\/schedule\/alert_rule_test.go#L59 but it can't because the updates are blocking on each other. All 3 goroutines simply hang forever - the two writers waiting on a read, and the main thread that would read is stuck waiting on the writes to complete."],"labels":["area\/alerting","internal"]},{"title":"Legend: Add option to configure \"isolate selection\" and \"filter selection\" on-click behavior","body":"Some panel's default on-click behavior when clicking an item in a Legend is to isolate that section (and deselect all other items) - e.g. `timeSeries`, `barChart`. And some panel's are the inverse (to filter the selection, and keep all others highlighted) - e.g `pieChart`. This behavior generally makes sense, but would also be nice to have both options in something like timeSeries, where the user could select 2+ items from the panel instead of only 1.","comments":["@baldm0mma please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["area\/frontend","internal","area\/legend"]},{"title":"Explore: Move Query History to be screen wide","body":"WIP while we figure out some options\r\n\r\n**What is this feature?**\r\n\r\nThis moves the drawer that expands for query history from being one instance per pane to one instance for the entire window. This means that if there are multiple panes, there will be an extra step to select which pane a query history item gets sent to. Other than that and the automatic initial filtering of datasources in the history being for all panes, there should be no behavior difference.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo support future work with a query library in explore, we decided we should move the query history drawer to always span all panes. This is because we want query library and query history to live in the same place, in that drawer, and query library's additional features will require the extra screen space.\r\n\r\n**Who is this feature for?**\r\n\r\nExplore users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #83259\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["Removing external teams for now, this is just a prototype. We will solidify a plan before involving the review of others.","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **kristina\/explore-extend-drawer** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184321gelicia.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)"],"labels":["area\/explore","area\/frontend","area\/panel\/timeseries"]},{"title":"Scenes: Persist changes made in edit mode to save model","body":"Fixes an issue where if you have panel edit open and have made some changes, those changes aren't persisted to the save model when saving while still in panel edit mode.\r\nNot thrilled with the solution, but it's tricky to find a fix that only \"temporarily\" commits the changes in case a user cancels the save and we want to discard the changes.\r\nWould be nice if we could just clone the dashboard scene at the top of `transformSceneToSaveModel` and then we could just call `commitChanges`, but I guess scene objects with refs can't be cloned :(\r\nIf you're reviewing this, let me know if you have any alternative ideas.","comments":[],"labels":["type\/bug","area\/dashboard","area\/frontend","no-changelog","area\/scenes"]},{"title":"Fix i18n:extract behaving inconsistently for enterprise","body":" - there are translated phrases in enterprise now. this is never something we explicitly supported....\r\n - during local development, enterprise is symlinked to oss\r\n - yarn i18n:extract doesn't currently follow symlinks, due to... a bug in... something?\r\n - changing the i18next-parser input files to include `public\/app\/extensions\/**\/*` glob makes it parse enterprise\r\n - where should enterprise phrases live? they shouldn't be in the same grafana.json oss file because external contributors won't be able to extract any more. Our existing workflow must continue to work if you don't have enterprise checked out","comments":["We're currently blocked on this because a regression in glob-stream broke symlink behaviour https:\/\/github.com\/gulpjs\/vinyl-fs\/issues\/349\r\n\r\n - We upgraded from i18next-parser v7 to v8 in Feb https:\/\/github.com\/grafana\/grafana\/pull\/82085\r\n - This change ([specifically v8.9.0](https:\/\/github.com\/i18next\/i18next-parser\/compare\/8.8.0...8.9.0)) bumped vinyl-fs -> glob-stream v7 to v8\r\n - glob-stream v8 has different behaviour with symlinks (though both are wonky), which prevents any enterprise files from being scanned\r\n\r\nAlternatively, we could downgrade to i18next-parser 8.8.0"],"labels":["area\/internationalization"]},{"title":"Clarify AWS Auth instructions for Grafana Cloud users","body":"Following the recommendations provided in support-escalation issue 8277, some additional details were added to guide Grafana Cloud users working with the Grafana Assume Role feature. \r\n","comments":["@melgl, do you want this change to be backported to previous\/current versions of the docs?"],"labels":["type\/docs","no-changelog"]},{"title":"Alerting: improve Alerting story in devenv tools","body":"There were a lot of useful scripts and tools in devenv for legacy alerting. Since the legacy Alerting is deleted in Grafana 11 those tools were also deleted. \r\nWe need to add tools for new alerting. Consider the following commit as a reference: \r\nhttps:\/\/github.com\/grafana\/grafana\/pull\/83671\/commits\/c22a807b7351011a4f7b8594405edc8e6cd9d68a","comments":[],"labels":["area\/alerting","area\/devenv","good first issue","internal"]},{"title":"I18n: Add pt-br language","body":"We want to add first-class support for Brazilian Portuguese (pt-br) translations of Grafana.\r\n\r\nWe already have documentation for adding a new language, so as doing this we should make sure this is up to date https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/internationalization.md#how-to-add-a-new-language\r\n\r\n\r\n```[tasklist]\n### Tasks\n- [x] Arrange new language Translated (invoice \/ contract)\n- [x] https:\/\/github.com\/grafana\/grafana\/pull\/84458 (Set up language in Crowdin)\n- [x] https:\/\/github.com\/grafana\/grafana\/pull\/84461 (Set up language in code)\n- [ ] https:\/\/github.com\/grafana\/grafana\/pull\/84457\n- [ ] Pull in translations from Crowdin (when translated!\n```\r\n","comments":["Re 1)\r\n\r\nI have checked the translation budget for the year and we should be good until the end of the year even with the new language addition, - or at least until Zsofia comes back and she can a a more thorough estimation \r\n\r\nThe current contract does not specify restriction on languages so we could start requesting pt-br strings now."],"labels":["area\/internationalization","internal"]},{"title":"Update dependency @types\/ol-ext to v3.3.0","body":"[![Mend Renovate](https:\/\/app.renovatebot.com\/images\/banner.svg)](https:\/\/renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Change | Age | Adoption | Passing | Confidence |\n|---|---|---|---|---|---|\n| [@types\/ol-ext](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext) | [`3.2.4` -> `3.3.0`](https:\/\/renovatebot.com\/diffs\/npm\/@types%2fol-ext\/3.2.4\/3.3.0) | [![age](https:\/\/developer.mend.io\/api\/mc\/badges\/age\/npm\/@types%2fol-ext\/3.3.0?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![adoption](https:\/\/developer.mend.io\/api\/mc\/badges\/adoption\/npm\/@types%2fol-ext\/3.3.0?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![passing](https:\/\/developer.mend.io\/api\/mc\/badges\/compatibility\/npm\/@types%2fol-ext\/3.2.4\/3.3.0?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![confidence](https:\/\/developer.mend.io\/api\/mc\/badges\/confidence\/npm\/@types%2fol-ext\/3.2.4\/3.3.0?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) |\n\n---\n\n> [!WARNING]\n> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.\n\n---\n\n### Release Notes\n\n<details>\n<summary>Siedlerchr\/types-ol-ext (@&#8203;types\/ol-ext)<\/summary>\n\n### [`v3.3.0`](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/releases\/tag\/3.3.0): Version 3.3.0\n\n[Compare Source](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/compare\/3.2.4...3.3.0)\n\n#### What's Changed\n\n-   Make jspdf a peerDependency by [@&#8203;simon04](https:\/\/togithub.com\/simon04) in [https:\/\/github.com\/Siedlerchr\/types-ol-ext\/pull\/144](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/pull\/144)\n-   Adding the fix to the error with PerspectiveMap. by [@&#8203;sergiotarxz](https:\/\/togithub.com\/sergiotarxz) in [https:\/\/github.com\/Siedlerchr\/types-ol-ext\/pull\/147](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/pull\/147)\n-   Update types with new options by [@&#8203;Siedlerchr](https:\/\/togithub.com\/Siedlerchr) in [https:\/\/github.com\/Siedlerchr\/types-ol-ext\/pull\/143](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/pull\/143)\n-   Update to ol 9.0 and ol-ext 4.0.16\n-   Update examples\n-   Fixes wrog type for shadow [#&#8203;145](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/issues\/145)\n\n#### New Contributors\n\n-   [@&#8203;simon04](https:\/\/togithub.com\/simon04) made their first contribution in [https:\/\/github.com\/Siedlerchr\/types-ol-ext\/pull\/144](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/pull\/144)\n-   [@&#8203;sergiotarxz](https:\/\/togithub.com\/sergiotarxz) made their first contribution in [https:\/\/github.com\/Siedlerchr\/types-ol-ext\/pull\/147](https:\/\/togithub.com\/Siedlerchr\/types-ol-ext\/pull\/147)\n\n**Full Changelog**: https:\/\/github.com\/Siedlerchr\/types-ol-ext\/compare\/3.2.4...3.3.0\n\n<\/details>\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase\/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase\/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https:\/\/www.mend.io\/free-developer-tools\/renovate\/). View repository job log [here](https:\/\/developer.mend.io\/github\/grafana\/grafana).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4yMzguMSIsInVwZGF0ZWRJblZlciI6IjM3LjIzOC4xIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->\n","comments":["hi @grafana\/dataviz-squad , this npm-auto-update is failing, and `ol-ext` is only used in the geomap plugin, could you please check if this can be fixed? thanks!","I'm guessing this is related to [this issue](https:\/\/github.com\/grafana\/grafana\/issues\/82947).","### Edited\/Blocked Notification\n\nRenovate will not automatically rebase this PR, because it does not recognize the last commit author and assumes somebody else may have edited the PR.\n\nYou can manually request rebase by checking the rebase\/retry box above.\n\n \u26a0 **Warning**: custom changes will be lost.","Pushed up a commit that pushes this in the right direction - basically the photos layer shadow option is numeric vs boolean\r\n\r\nThis probably will require some migration to convert this save option from boolean to a numeric value\r\n\r\nThat being said there is some funkiness with how the shadow is being applied \/ interacting with the border so this might need additional polish\r\n\r\ncc @drew08t \r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/22381771\/d4d3ad33-e1f7-4714-a28e-db7bb2b95e4b\r\n\r\n"],"labels":["area\/frontend","dependencies","area\/panel\/geomap","no-changelog"]},{"title":"Changes in panel edit are not subject of change detection unless panel edit is exited","body":"1. Go to panel edit\r\n2. Make some changes, i.e. tite\r\n3. Observe Save dashboard button - changes are not detected even though they are \"applied\" ","comments":[],"labels":["type\/bug","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"samlsettings: api integration","body":"**What is this feature?**\r\n\r\nThis PR registers the sso settings saml strategy; this way we can update and retrieve saml sso settings from the sso endpoints. This PR also renames the functions of the old saml strategy interface, since they're not compatible with the new sso settings interface.\r\n\r\n**Why do we need this feature?**\r\n\r\nThis PR allows to interact and save the saml settings via the sso settings api\r\n\r\n**Who is this feature for?**\r\n\r\nIAM\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes https:\/\/github.com\/grafana\/identity-access-team\/issues\/594\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166015\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166037\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **linoman\/samlsettings_api_integration** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.17.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.18.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/go-logr\/logr v1.2.4\ngo: downloading go.opentelemetry.io\/otel\/metric v1.18.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.0.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20230711160842-782d3b101e98\ngo: downloading google.golang.org\/grpc v1.58.0\ngo: downloading google.golang.org\/protobuf v1.31.0\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading golang.org\/x\/sys v0.14.0\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.16.0\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading golang.org\/x\/net v0.12.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20230711160842-782d3b101e98\ngo: downloading golang.org\/x\/text v0.11.0\n2024\/03\/18 14:47:43 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-18T14:47:51.219Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/18 14:47:51 if git -C src checkout linoman\/samlsettings_api_integration; then echo \"checked out linoman\/samlsettings_api_integration\"; else exit 3; fi\n2024\/03\/18 14:50:35 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-18T14:50:39.348Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/18 14:50:39 if git -C src checkout linoman\/samlsettings_api_integration; then echo \"checked out linoman\/samlsettings_api_integration\"; else exit 3; fi\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/18 14:50:39 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/18 14:50:39 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/18 14:50:39 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/18 14:50:39 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-18T14:50:39.366Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-18T14:51:22.901Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-18T14:51:22.916Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-18T14:51:22.929Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-18T14:51:22.943Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/datasource\npkg\/extensions\/datasource\/context.go:92:3: unknown field SigV4AuthEnabled in struct literal of type pluginconfig.PluginInstanceCfg\npkg\/extensions\/datasource\/context.go:93:3: unknown field SigV4VerboseLogging in struct literal of type pluginconfig.PluginInstanceCfg\n# github.com\/grafana\/grafana\/pkg\/extensions\/saml\npkg\/extensions\/saml\/saml.go:209:58: cannot use s (variable of type *Auth) as \"github.com\/grafana\/grafana\/pkg\/setting\".ReloadHandler value in argument to s.SettingsProvider.RegisterReloadHandler: *Auth does not implement \"github.com\/grafana\/grafana\/pkg\/setting\".ReloadHandler (missing method ReloadSection)\n# github.com\/grafana\/grafana\/pkg\/extensions\/whitelabeling\npkg\/extensions\/whitelabeling\/whitelabeling.go:120:49: indexData.Settings.BuildInfo.VersionString undefined (type dtos.FrontendSettingsBuildInfoDTO has no field or method VersionString)\npkg\/extensions\/whitelabeling\/whitelabeling.go:127:34: indexData.Settings.BuildInfo.VersionString undefined (type dtos.FrontendSettingsBuildInfoDTO has no field or method VersionString)\npkg\/extensions\/whitelabeling\/whitelabeling.go:138:32: indexData.Settings.BuildInfo.VersionString undefined (type dtos.FrontendSettingsBuildInfoDTO has no field or method VersionString)\n# github.com\/grafana\/grafana\/pkg\/extensions\/settings\/settingsprovider\npkg\/extensions\/settings\/settingsprovider\/settingsprovider.go:344:18: handler.Validate undefined (type \"github.com\/grafana\/grafana\/pkg\/setting\".ReloadHandler has no field or method Validate)\npkg\/extensions\/settings\/settingsprovider\/settingsprovider.go:357:18: handler.Reload undefined (type \"github.com\/grafana\/grafana\/pkg\/setting\".ReloadHandler has no field or method Reload)\nexit status 1\n exit status 1","\/deploy-to-hg --enterprise-ref linoman\/samlsettings_api_integration","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **linoman\/samlsettings_api_integration** oss branch and **linoman\/samlsettings_api_integration** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184300linoman.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)"],"labels":["area\/backend","no-backport","area\/auth\/saml","no-changelog"]},{"title":"Alerting: Improve pausing \/ resuming alert rules","body":"Several smaller issues that make this feature undiscoverable;\r\n\r\n1. Alert rules can't be paused \/ unpaused except from the rule editor, we should promote this to the actions available on rules in the list view and detail view\r\n2. We don't seem to give any proper indication that rules are paused, this should be integrated in the alert rule detail view and list views too","comments":[],"labels":["area\/alerting","beginner friendly","area\/frontend","\ud83c\udf50-programming","internal"]},{"title":"Prometheus: Respect dashboard queries when querying ad hoc filter labels","body":"Currently, when presenting the ad hoc filters, prometheus data source shows all available labels in the labels selector. \r\n\r\nWith https:\/\/github.com\/grafana\/grafana\/pull\/81071 merged it's now possible for the ad hoc filters to access the queries that exist in the Grafana dashboard. This allows data source to narrow down the list of presented ad hoc filter labels to a list that' meaningful in the context of a given dashboard.\r\n\r\nHowever, no data source currently does that, and Prometheus seems like an obvious candidate to introduce this feature. \r\n\r\nPlease have a look at  https:\/\/github.com\/grafana\/grafana\/pull\/81071  to see the API changes that enable this feature.","comments":["\ud83d\udc4d @dprokop do we know the order of the queries? Can we expect them to come in the same order as the panels?","@bergquist yes, they should come in the order of the panels.","If there is a limitation in the prometheus API for how many timeseries that can be used when fetching labels, we should just use the first X. \r\n\r\nWould be frontend be clever enough to extract the timeserie name themself or are we better of delegating that to the backend? \r\n\r\nping @kylebrandt @itsmylife"],"labels":["type\/feature-request","prio\/high","datasource\/Prometheus","internal"]},{"title":"Postgres\/Mysql\/Mssql: Handle no-rows results correctly","body":"NOTE: this PR improves the current situation, but it is also a breaking change. we will have to decide if we want to do this or not.\r\n\r\n(fixes https:\/\/github.com\/grafana\/grafana\/issues\/82306)\r\n\r\nwhen an sql query returns zero rows (for example `SELECT * FROM table1 WHERE false`), the current behavior is to return a single dataframe, that has no fields.\r\n\r\nthis PR adjusts this so that:\r\n- it keeps the current behavior for the situation where the following two are both true:\r\n    - format=time series\r\n    - frame is a \"long\"  frame ( https:\/\/grafana.com\/developers\/plugin-tools\/introduction\/data-frames#long-format )\r\n- in other situations it keeps the fields, which will have no values in them\r\n\r\nthe idea is to have the dataframe the same shape both in no-rows and has-rows situations.\r\n(the long-frame in timeseries-format is complicated. in that case we convert the frame to a wide-frame, so we change it's shape. but with zero-rows it's not possible to do the transformation, so we don't know how many fields the frame would have if has-rows).\r\n\r\ncontext:\r\n- before `9.4.0` we did not modify the frame at all when it had zero rows.\r\n- in `9.4.0` we changed it with this PR: https:\/\/github.com\/grafana\/grafana\/pull\/59121 . we were fixing a bug with it. after this change, we returned no dataframes at all, in the zero-rows situation.\r\n- in `10.0.0` we changed it again with this PR: https:\/\/github.com\/grafana\/grafana\/pull\/67844 . we were fixing a bug with it. after this change, we returned a single dataframe, with all the metadata, but no fields.\r\n\r\n( additional internal dicussion at https:\/\/raintank-corp.slack.com\/archives\/C02P3H4118V\/p1709554119716519 )\r\n\r\n\r\nhow to test:\r\n- go through the 2 change-PRs mentioned above. find the bug-reports that they were fixing, and try those again. are they ok now, are they not? also check any related-issues that appear in those 2 change-PRs.\r\n- potential issues:\r\n    - in the past it seems alerting had problems with this format (fields exist, but have no values in them), and a fix was proposed for alerting ( https:\/\/github.com\/grafana\/grafana\/pull\/55683 ) but it was not merged, because we changed the sql behavior.. we'll need to doublecheck if that stuff works now.\r\n\r\n# Release notice breaking change\r\n\r\nWhen using the Postgres, MySQL and MsSQL datasources, the way we represent the result of a query that returns no rows has changed slightly. Previously such a response contained no fields, now it contains all the fields from the database, but those fields contain no values. If you are using transforms that rely on the structure of the data in such a case, please doublecheck them. ","comments":["\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **gabor\/sql-better-no-rows** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184275gabor.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166313\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","so, i was discussing this with @kylebrandt ,and he identified a potential problem.\r\n- for table-mode, we are ok\r\n- for timeseries-mode, NOT long-format, we are ok\r\n- for timeseries-mode, long-format, problem\r\n\r\nin general, with this PR we want to say that the \"shape\" of the dataframe does not change between cases with zero-rows and nonzero-rows.\r\n\r\nbut, if the user chooses timeseries-mode, and the data returned from the database is in `long` format, we convert the frame to `wide`-format: https:\/\/github.com\/grafana\/grafana\/blob\/d480d3296c20d44aa5268b157c3c02b1787d2785\/pkg\/tsdb\/sqleng\/sql_engine.go#L334\r\n(this will technically return an error if we feed it with a zero-rows frame, but that's beside the point right now \ud83d\ude01 )\r\n\r\nhere is an example processing of long-format data returned from the database, and how it's processed:\r\n\r\ninput:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/d480d3296c20d44aa5268b157c3c02b1787d2785\/pkg\/tsdb\/grafana-postgresql-datasource\/testdata\/time_series\/simple.sql#L2-L12\r\n\r\nraw dataframe conversion:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/d480d3296c20d44aa5268b157c3c02b1787d2785\/pkg\/tsdb\/grafana-postgresql-datasource\/testdata\/table\/simple.golden.jsonc#L12-L20\r\n\r\nfinal dataframe in wide format:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/d480d3296c20d44aa5268b157c3c02b1787d2785\/pkg\/tsdb\/grafana-postgresql-datasource\/testdata\/time_series\/simple.golden.jsonc#L13-L19\r\n\r\nas you can see, the number of fields in the final dataframe depends on the CONTENT of the sql-results.. in this example it has two value-columns because we have that many unique strings in the sql-response's string-column. if we would have 5 unique strings, we would get 5 value-columns. with zero-rows there is no way to know what the shape would be at the end.\r\n\r\nso, maybe in this situation (mode=timeseries, long-format data), we should just return zero-fields. WDYT?","> so, i was discussing this with @kylebrandt ,and he identified a potential problem.\r\n> \r\n> * for table-mode, we are ok\r\n> * for timeseries-mode, NOT long-format, we are ok\r\n> * for timeseries-mode, long-format, problem\r\n> \r\n\r\n@gabor - Are we sending multi frame in any case? wondering what if we specify `timeseries-wide` for timeseries format and `numeric-wide` for non-timeseries format queries in case of no results? If we aren't sending multi frame, I guess only format server returning is wide (as there is long to wide converter exists between ).","@yesoreyeram \r\n> @gabor - Are we sending multi frame in any case? wondering what if we specify `timeseries-wide` for timeseries format and `numeric-wide` for non-timeseries format queries in case of no results? If we aren't sending multi frame, I guess only format server returning is wide (as there is long to wide converter exists between ).\r\n\r\nso, this is how it behaves currently in core sql datasources:\r\n- you can specify the query `format`, you can set it to `table` or `time series`\r\n- in both cases, we start by calling `FrameFromRows` from plugin-sdk.\r\n- if format=table, we return this frame (some minor field-conversions like number-to-time etc. will still happen)\r\n    - no frameType is set\r\n- if format=time-series:\r\n    - we check if the frame is a `long` dataframe\r\n        - if yes, we convert it to wide with pluginsdk's LongToWide. that function sets frameType to `timeseries-wide`\r\n    - afterwards there's some more processing to the frame.\r\n    - we return the frame\r\n\r\nto sum it up, when we have rows, we only have frame-type set if format=time-series and the data is in long-format at the input.\r\n\r\nand we always return a single frame.\r\n\r\nthe question basically is, if we should set frameType for frames where we don't really know what's inside. as you can see, we only really know what's going on in the format=time-series___AND___long-frame case, otherwise it really can contain anything. (well, for format=time-series we also know it has a time-field)."],"labels":["type\/bug","datasource\/MySQL","datasource\/Postgres","area\/backend","add to changelog","breaking change"]},{"title":"PoC: Make the body element scrollable","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n# TODO\r\n\r\n- [ ] place this behind the `betterPageScrolling` feature toggle\r\n\r\n**What is this feature?**\r\n\r\n- makes the body element scrollable\r\n\r\n**Why do we need this feature?**\r\n\r\n- arrow keys now properly scroll the content\r\n- url bar should now properly hide on mobile\r\n\r\n**Who is this feature for?**\r\n\r\n- everyone!\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/body-scrolling** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.17.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.18.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/go-logr\/logr v1.2.4\ngo: downloading go.opentelemetry.io\/otel\/metric v1.18.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.0.0\ngo: downloading google.golang.org\/protobuf v1.31.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20230711160842-782d3b101e98\ngo: downloading google.golang.org\/grpc v1.58.0\ngo: downloading golang.org\/x\/sys v0.14.0\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.16.0\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading golang.org\/x\/net v0.12.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20230711160842-782d3b101e98\ngo: downloading golang.org\/x\/text v0.11.0\n2024\/03\/12 12:05:12 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-12T12:05:23.570Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/12 12:05:23 if git -C src checkout ash\/body-scrolling; then echo \"checked out ash\/body-scrolling\"; else exit 3; fi\n2024\/03\/12 12:08:00 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-12T12:08:03.741Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/12 12:08:03 if git -C src checkout ash\/body-scrolling; then echo \"checked out ash\/body-scrolling\"; else exit 3; fi\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/12 12:08:03 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/12 12:08:03 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/12 12:08:03 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/12 12:08:03 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-12T12:08:03.758Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-12T12:08:46.966Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-12T12:08:46.980Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-12T12:08:46.993Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-12T12:08:47.014Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/pluginsintegration\npkg\/extensions\/pluginsintegration\/pluginsintegration.go:63:29: not enough arguments in call to client.ProvideService\n\thave (\"github.com\/grafana\/grafana\/pkg\/plugins\/manager\/registry\".Service)\n\twant (\"github.com\/grafana\/grafana\/pkg\/plugins\/manager\/registry\".Service, *\"github.com\/grafana\/grafana\/pkg\/plugins\/config\".PluginManagementCfg)\nexit status 1\n exit status 1","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **ash\/body-scrolling** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182184268ashharr.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)","@ashharrison90, apart from the ephimeral instance, would you mind giving visual info? For example, screenshots of the issue, so I can check for the different behaviour in the POC. Thanks in advance!","@eledobleefe will do, more work to do first though \ud83e\udd13 ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166307\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"Improve auto migration from Graph panel to Time Series panel","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nAngularJS plugins and panel will soon be removed, yet the migration could be simpler.\r\nUsers can migrate the Graph panel to the Time Series panel but in some case the resulting panel is not the one expected.\r\nSee the screencast:\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/12611310\/93ad712f-722a-4698-8a0c-61660347ba7f\r\n\r\nIn the screencast, I had to further tweak the resulting panel to match the initial visualization:\r\n* Connect null value to never\r\n* Set stack series 100%\r\n* Set unit to number\r\n* Set max to auto\r\n* Set decimal to auto\r\n\r\nI'm opening this as a feature request and not a bug because the migration is working however the visualization is wrong.\r\n\r\n**What would you like to be added**:\r\n\r\nA better support for migrating Graph panel to Time Series panel\r\n\r\n**Who is this feature for?**\r\n\r\nUsers migrating from Graph panel to Time series.\r\nFor the context, in my case I've potentially 4500 dashboards in 130 orgs to migrate \ud83d\ude05 \r\n\r\nEdit: I'm running Grafana v10.1.5 (849c612fcb)\r\n","comments":["> For the context, in my case I've potentially 4500 dashboards in 130 orgs to migrate \ud83d\ude05\r\n\r\nthank you for signing up to be our guinea pig :sweat_smile: \r\n\r\ncan you please attach a debug snapshot of your pre-migration `Graph (old)` panel so we can work to fix these migrations? :pray: \r\n\r\nhttps:\/\/grafana.com\/docs\/grafana\/latest\/troubleshooting\/send-panel-to-grafana-support\/","Is this enough for you @leeoniya?\r\n\r\n| Key | Value |\r\n|--|--|\r\n| Panel | graph @ 10.1.5 |\r\n| Grafana | 10.1.5 (849c612fcb) \/\/ Open Source |\r\n<details><summary>Panel debug snapshot dashboard<\/summary>\r\n\r\n```json\r\n{\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"grafana\",\r\n        \"uid\": \"grafana\"\r\n      },\r\n      \"aliasColors\": {\r\n        \"400\": \"yellow\",\r\n        \"401\": \"blue\",\r\n        \"403\": \"dark-blue\",\r\n        \"404\": \"orange\",\r\n        \"408\": \"dark-orange\",\r\n        \"409\": \"semi-dark-orange\",\r\n        \"429\": \"purple\",\r\n        \"460\": \"light-orange\",\r\n        \"500\": \"red\",\r\n        \"3xx\": \"yellow\",\r\n        \"429 (Too Many Requests)\": \"purple\",\r\n        \"4xx\": \"rgb(194, 127, 0)\",\r\n        \"5xx\": \"rgb(158, 0, 19)\"\r\n      },\r\n      \"bars\": false,\r\n      \"dashLength\": 10,\r\n      \"dashes\": false,\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"links\": []\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"fill\": 8,\r\n      \"fillGradient\": 0,\r\n      \"gridPos\": {\r\n        \"h\": 13,\r\n        \"w\": 15,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"hiddenSeries\": false,\r\n      \"id\": 2,\r\n      \"legend\": {\r\n        \"avg\": false,\r\n        \"current\": false,\r\n        \"max\": false,\r\n        \"min\": false,\r\n        \"show\": true,\r\n        \"total\": false,\r\n        \"values\": false\r\n      },\r\n      \"lines\": true,\r\n      \"linewidth\": 0,\r\n      \"nullPointMode\": \"connected\",\r\n      \"options\": {\r\n        \"alertThreshold\": true\r\n      },\r\n      \"percentage\": true,\r\n      \"pluginVersion\": \"10.1.5\",\r\n      \"pointradius\": 2,\r\n      \"points\": false,\r\n      \"queryType\": \"lucene\",\r\n      \"renderer\": \"flot\",\r\n      \"seriesOverrides\": [],\r\n      \"spaceLength\": 10,\r\n      \"stack\": true,\r\n      \"steppedLine\": false,\r\n      \"targets\": [\r\n        {\r\n          \"refId\": \"A\",\r\n          \"datasource\": {\r\n            \"type\": \"grafana\",\r\n            \"uid\": \"grafana\"\r\n          },\r\n          \"queryType\": \"snapshot\",\r\n          \"snapshot\": [\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"A\",\r\n                \"name\": \"2xx\",\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"config\": {}\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"config\": {}\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710234680000,\r\n                    1710234700000,\r\n                    1710234720000,\r\n                    1710234740000,\r\n                    1710234760000,\r\n                    1710234780000,\r\n                    1710234800000,\r\n                    1710234820000,\r\n                    1710234840000,\r\n                    1710234860000,\r\n                    1710234880000,\r\n                    1710234900000,\r\n                    1710234920000,\r\n                    1710234940000,\r\n                    1710234960000,\r\n                    1710234980000,\r\n                    1710235000000,\r\n                    1710235020000,\r\n                    1710235040000,\r\n                    1710235060000,\r\n                    1710235080000,\r\n                    1710235100000,\r\n                    1710235120000,\r\n                    1710235140000,\r\n                    1710235160000,\r\n                    1710235180000,\r\n                    1710235200000,\r\n                    1710235220000,\r\n                    1710235240000,\r\n                    1710235260000,\r\n                    1710235280000,\r\n                    1710235300000,\r\n                    1710235320000,\r\n                    1710235340000,\r\n                    1710235360000,\r\n                    1710235380000,\r\n                    1710235400000,\r\n                    1710235420000,\r\n                    1710235440000,\r\n                    1710235460000,\r\n                    1710235480000,\r\n                    1710235500000,\r\n                    1710235520000,\r\n                    1710235540000,\r\n                    1710235560000,\r\n                    1710235580000,\r\n                    1710235600000,\r\n                    1710235620000,\r\n                    1710235640000,\r\n                    1710235660000,\r\n                    1710235680000,\r\n                    1710235700000,\r\n                    1710235720000,\r\n                    1710235740000,\r\n                    1710235760000,\r\n                    1710235780000,\r\n                    1710235800000,\r\n                    1710235820000,\r\n                    1710235840000,\r\n                    1710235860000,\r\n                    1710235880000,\r\n                    1710235900000,\r\n                    1710235920000,\r\n                    1710235940000,\r\n                    1710235960000,\r\n                    1710235980000,\r\n                    1710236000000,\r\n                    1710236020000,\r\n                    1710236040000,\r\n                    1710236060000,\r\n                    1710236080000,\r\n                    1710236100000,\r\n                    1710236120000,\r\n                    1710236140000,\r\n                    1710236160000,\r\n                    1710236180000,\r\n                    1710236200000,\r\n                    1710236220000,\r\n                    1710236240000,\r\n                    1710236260000,\r\n                    1710236280000,\r\n                    1710236300000,\r\n                    1710236320000,\r\n                    1710236340000,\r\n                    1710236360000,\r\n                    1710236380000,\r\n                    1710236400000,\r\n                    1710236420000,\r\n                    1710236440000,\r\n                    1710236460000,\r\n                    1710236480000,\r\n                    1710236500000,\r\n                    1710236520000,\r\n                    1710236540000,\r\n                    1710236560000,\r\n                    1710236580000,\r\n                    1710236600000,\r\n                    1710236620000,\r\n                    1710236640000,\r\n                    1710236660000,\r\n                    1710236680000,\r\n                    1710236700000,\r\n                    1710236720000,\r\n                    1710236740000,\r\n                    1710236760000,\r\n                    1710236780000,\r\n                    1710236800000,\r\n                    1710236820000,\r\n                    1710236840000,\r\n                    1710236860000,\r\n                    1710236880000,\r\n                    1710236900000,\r\n                    1710236920000,\r\n                    1710236940000,\r\n                    1710236960000,\r\n                    1710236980000,\r\n                    1710237000000,\r\n                    1710237020000,\r\n                    1710237040000,\r\n                    1710237060000,\r\n                    1710237080000,\r\n                    1710237100000,\r\n                    1710237120000,\r\n                    1710237140000,\r\n                    1710237160000,\r\n                    1710237180000,\r\n                    1710237200000,\r\n                    1710237220000,\r\n                    1710237240000,\r\n                    1710237260000,\r\n                    1710237280000,\r\n                    1710237300000,\r\n                    1710237320000,\r\n                    1710237340000,\r\n                    1710237360000,\r\n                    1710237380000,\r\n                    1710237400000,\r\n                    1710237420000,\r\n                    1710237440000,\r\n                    1710237460000,\r\n                    1710237480000,\r\n                    1710237500000,\r\n                    1710237520000,\r\n                    1710237540000,\r\n                    1710237560000,\r\n                    1710237580000,\r\n                    1710237600000,\r\n                    1710237620000,\r\n                    1710237640000,\r\n                    1710237660000,\r\n                    1710237680000,\r\n                    1710237700000,\r\n                    1710237720000,\r\n                    1710237740000,\r\n                    1710237760000,\r\n                    1710237780000,\r\n                    1710237800000,\r\n                    1710237820000,\r\n                    1710237840000,\r\n                    1710237860000,\r\n                    1710237880000,\r\n                    1710237900000,\r\n                    1710237920000,\r\n                    1710237940000,\r\n                    1710237960000,\r\n                    1710237980000,\r\n                    1710238000000,\r\n                    1710238020000,\r\n                    1710238040000,\r\n                    1710238060000,\r\n                    1710238080000,\r\n                    1710238100000,\r\n                    1710238120000,\r\n                    1710238140000,\r\n                    1710238160000,\r\n                    1710238180000,\r\n                    1710238200000,\r\n                    1710238220000,\r\n                    1710238240000,\r\n                    1710238260000,\r\n                    1710238280000\r\n                  ],\r\n                  [\r\n                    71480,\r\n                    94724,\r\n                    104049,\r\n                    100556,\r\n                    97473,\r\n                    104857,\r\n                    102141,\r\n                    97143,\r\n                    102477,\r\n                    100519,\r\n                    97167,\r\n                    113842,\r\n                    103447,\r\n                    96198,\r\n                    109559,\r\n                    108944,\r\n                    94190,\r\n                    103054,\r\n                    103463,\r\n                    97317,\r\n                    110911,\r\n                    93295,\r\n                    99881,\r\n                    98106,\r\n                    95636,\r\n                    100185,\r\n                    122601,\r\n                    113669,\r\n                    111108,\r\n                    112830,\r\n                    111537,\r\n                    100403,\r\n                    106609,\r\n                    105035,\r\n                    98453,\r\n                    102129,\r\n                    95298,\r\n                    90281,\r\n                    102976,\r\n                    106631,\r\n                    106904,\r\n                    116575,\r\n                    110285,\r\n                    105387,\r\n                    108506,\r\n                    111400,\r\n                    104930,\r\n                    109282,\r\n                    105461,\r\n                    103597,\r\n                    106333,\r\n                    108544,\r\n                    102683,\r\n                    101124,\r\n                    102147,\r\n                    101968,\r\n                    125396,\r\n                    113606,\r\n                    109572,\r\n                    102241,\r\n                    105138,\r\n                    100151,\r\n                    107432,\r\n                    103350,\r\n                    101441,\r\n                    104530,\r\n                    101197,\r\n                    109637,\r\n                    110411,\r\n                    105813,\r\n                    110262,\r\n                    120544,\r\n                    106932,\r\n                    106155,\r\n                    102488,\r\n                    105953,\r\n                    99575,\r\n                    98039,\r\n                    98910,\r\n                    98145,\r\n                    102390,\r\n                    99648,\r\n                    96586,\r\n                    101352,\r\n                    95691,\r\n                    91782,\r\n                    124698,\r\n                    104150,\r\n                    105051,\r\n                    96449,\r\n                    99397,\r\n                    99256,\r\n                    101518,\r\n                    97869,\r\n                    103420,\r\n                    99747,\r\n                    99469,\r\n                    100754,\r\n                    107340,\r\n                    97643,\r\n                    95924,\r\n                    116887,\r\n                    104061,\r\n                    106589,\r\n                    103875,\r\n                    102653,\r\n                    104002,\r\n                    106884,\r\n                    93494,\r\n                    98451,\r\n                    105284,\r\n                    102766,\r\n                    103233,\r\n                    103632,\r\n                    103113,\r\n                    103588,\r\n                    119329,\r\n                    106476,\r\n                    107071,\r\n                    104149,\r\n                    104400,\r\n                    101956,\r\n                    105729,\r\n                    98198,\r\n                    101445,\r\n                    104490,\r\n                    98422,\r\n                    99161,\r\n                    103623,\r\n                    94719,\r\n                    101397,\r\n                    113561,\r\n                    102185,\r\n                    102574,\r\n                    105040,\r\n                    102435,\r\n                    105407,\r\n                    103602,\r\n                    107401,\r\n                    104816,\r\n                    108562,\r\n                    100244,\r\n                    104190,\r\n                    103744,\r\n                    101591,\r\n                    102650,\r\n                    136903,\r\n                    113301,\r\n                    106195,\r\n                    108464,\r\n                    103755,\r\n                    100227,\r\n                    110709,\r\n                    103012,\r\n                    102426,\r\n                    106335,\r\n                    103817,\r\n                    100636,\r\n                    104455,\r\n                    100168,\r\n                    98685,\r\n                    117890,\r\n                    103894,\r\n                    100364,\r\n                    112401,\r\n                    102811,\r\n                    104085,\r\n                    112368,\r\n                    93834,\r\n                    111770,\r\n                    109563,\r\n                    107115,\r\n                    100284,\r\n                    107306,\r\n                    100676,\r\n                    95498,\r\n                    123904,\r\n                    104602,\r\n                    99662,\r\n                    105254,\r\n                    31664\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"C\",\r\n                \"name\": \"3xx\",\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"config\": {}\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"config\": {}\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710234680000,\r\n                    1710234700000,\r\n                    1710234720000,\r\n                    1710234740000,\r\n                    1710234760000,\r\n                    1710234780000,\r\n                    1710234800000,\r\n                    1710234820000,\r\n                    1710234840000,\r\n                    1710234860000,\r\n                    1710234880000,\r\n                    1710234900000,\r\n                    1710234920000,\r\n                    1710234940000,\r\n                    1710234960000,\r\n                    1710234980000,\r\n                    1710235000000,\r\n                    1710235020000,\r\n                    1710235040000,\r\n                    1710235060000,\r\n                    1710235080000,\r\n                    1710235100000,\r\n                    1710235120000,\r\n                    1710235140000,\r\n                    1710235160000,\r\n                    1710235180000,\r\n                    1710235200000,\r\n                    1710235220000,\r\n                    1710235240000,\r\n                    1710235260000,\r\n                    1710235280000,\r\n                    1710235300000,\r\n                    1710235320000,\r\n                    1710235340000,\r\n                    1710235360000,\r\n                    1710235380000,\r\n                    1710235400000,\r\n                    1710235420000,\r\n                    1710235440000,\r\n                    1710235460000,\r\n                    1710235480000,\r\n                    1710235500000,\r\n                    1710235520000,\r\n                    1710235540000,\r\n                    1710235560000,\r\n                    1710235580000,\r\n                    1710235600000,\r\n                    1710235620000,\r\n                    1710235640000,\r\n                    1710235660000,\r\n                    1710235680000,\r\n                    1710235700000,\r\n                    1710235720000,\r\n                    1710235740000,\r\n                    1710235760000,\r\n                    1710235780000,\r\n                    1710235800000,\r\n                    1710235820000,\r\n                    1710235840000,\r\n                    1710235860000,\r\n                    1710235880000,\r\n                    1710235900000,\r\n                    1710235920000,\r\n                    1710235940000,\r\n                    1710235960000,\r\n                    1710235980000,\r\n                    1710236000000,\r\n                    1710236020000,\r\n                    1710236040000,\r\n                    1710236060000,\r\n                    1710236080000,\r\n                    1710236100000,\r\n                    1710236120000,\r\n                    1710236140000,\r\n                    1710236160000,\r\n                    1710236180000,\r\n                    1710236200000,\r\n                    1710236220000,\r\n                    1710236240000,\r\n                    1710236260000,\r\n                    1710236280000,\r\n                    1710236300000,\r\n                    1710236320000,\r\n                    1710236340000,\r\n                    1710236360000,\r\n                    1710236380000,\r\n                    1710236400000,\r\n                    1710236420000,\r\n                    1710236440000,\r\n                    1710236460000,\r\n                    1710236480000,\r\n                    1710236500000,\r\n                    1710236520000,\r\n                    1710236540000,\r\n                    1710236560000,\r\n                    1710236580000,\r\n                    1710236600000,\r\n                    1710236620000,\r\n                    1710236640000,\r\n                    1710236660000,\r\n                    1710236680000,\r\n                    1710236700000,\r\n                    1710236720000,\r\n                    1710236740000,\r\n                    1710236760000,\r\n                    1710236780000,\r\n                    1710236800000,\r\n                    1710236820000,\r\n                    1710236840000,\r\n                    1710236860000,\r\n                    1710236880000,\r\n                    1710236900000,\r\n                    1710236920000,\r\n                    1710236940000,\r\n                    1710236960000,\r\n                    1710236980000,\r\n                    1710237000000,\r\n                    1710237020000,\r\n                    1710237040000,\r\n                    1710237060000,\r\n                    1710237080000,\r\n                    1710237100000,\r\n                    1710237120000,\r\n                    1710237140000,\r\n                    1710237160000,\r\n                    1710237180000,\r\n                    1710237200000,\r\n                    1710237220000,\r\n                    1710237240000,\r\n                    1710237260000,\r\n                    1710237280000,\r\n                    1710237300000,\r\n                    1710237320000,\r\n                    1710237340000,\r\n                    1710237360000,\r\n                    1710237380000,\r\n                    1710237400000,\r\n                    1710237420000,\r\n                    1710237440000,\r\n                    1710237460000,\r\n                    1710237480000,\r\n                    1710237500000,\r\n                    1710237520000,\r\n                    1710237540000,\r\n                    1710237560000,\r\n                    1710237580000,\r\n                    1710237600000,\r\n                    1710237620000,\r\n                    1710237640000,\r\n                    1710237660000,\r\n                    1710237680000,\r\n                    1710237700000,\r\n                    1710237720000,\r\n                    1710237740000,\r\n                    1710237760000,\r\n                    1710237780000,\r\n                    1710237800000,\r\n                    1710237820000,\r\n                    1710237840000,\r\n                    1710237860000,\r\n                    1710237880000,\r\n                    1710237900000,\r\n                    1710237920000,\r\n                    1710237940000,\r\n                    1710237960000,\r\n                    1710237980000,\r\n                    1710238000000,\r\n                    1710238020000,\r\n                    1710238040000,\r\n                    1710238060000,\r\n                    1710238080000,\r\n                    1710238100000,\r\n                    1710238120000,\r\n                    1710238140000,\r\n                    1710238160000,\r\n                    1710238180000,\r\n                    1710238200000,\r\n                    1710238220000,\r\n                    1710238240000,\r\n                    1710238260000,\r\n                    1710238280000\r\n                  ],\r\n                  [\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"D\",\r\n                \"name\": \"4xx\",\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"config\": {}\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"config\": {}\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710234680000,\r\n                    1710234700000,\r\n                    1710234720000,\r\n                    1710234740000,\r\n                    1710234760000,\r\n                    1710234780000,\r\n                    1710234800000,\r\n                    1710234820000,\r\n                    1710234840000,\r\n                    1710234860000,\r\n                    1710234880000,\r\n                    1710234900000,\r\n                    1710234920000,\r\n                    1710234940000,\r\n                    1710234960000,\r\n                    1710234980000,\r\n                    1710235000000,\r\n                    1710235020000,\r\n                    1710235040000,\r\n                    1710235060000,\r\n                    1710235080000,\r\n                    1710235100000,\r\n                    1710235120000,\r\n                    1710235140000,\r\n                    1710235160000,\r\n                    1710235180000,\r\n                    1710235200000,\r\n                    1710235220000,\r\n                    1710235240000,\r\n                    1710235260000,\r\n                    1710235280000,\r\n                    1710235300000,\r\n                    1710235320000,\r\n                    1710235340000,\r\n                    1710235360000,\r\n                    1710235380000,\r\n                    1710235400000,\r\n                    1710235420000,\r\n                    1710235440000,\r\n                    1710235460000,\r\n                    1710235480000,\r\n                    1710235500000,\r\n                    1710235520000,\r\n                    1710235540000,\r\n                    1710235560000,\r\n                    1710235580000,\r\n                    1710235600000,\r\n                    1710235620000,\r\n                    1710235640000,\r\n                    1710235660000,\r\n                    1710235680000,\r\n                    1710235700000,\r\n                    1710235720000,\r\n                    1710235740000,\r\n                    1710235760000,\r\n                    1710235780000,\r\n                    1710235800000,\r\n                    1710235820000,\r\n                    1710235840000,\r\n                    1710235860000,\r\n                    1710235880000,\r\n                    1710235900000,\r\n                    1710235920000,\r\n                    1710235940000,\r\n                    1710235960000,\r\n                    1710235980000,\r\n                    1710236000000,\r\n                    1710236020000,\r\n                    1710236040000,\r\n                    1710236060000,\r\n                    1710236080000,\r\n                    1710236100000,\r\n                    1710236120000,\r\n                    1710236140000,\r\n                    1710236160000,\r\n                    1710236180000,\r\n                    1710236200000,\r\n                    1710236220000,\r\n                    1710236240000,\r\n                    1710236260000,\r\n                    1710236280000,\r\n                    1710236300000,\r\n                    1710236320000,\r\n                    1710236340000,\r\n                    1710236360000,\r\n                    1710236380000,\r\n                    1710236400000,\r\n                    1710236420000,\r\n                    1710236440000,\r\n                    1710236460000,\r\n                    1710236480000,\r\n                    1710236500000,\r\n                    1710236520000,\r\n                    1710236540000,\r\n                    1710236560000,\r\n                    1710236580000,\r\n                    1710236600000,\r\n                    1710236620000,\r\n                    1710236640000,\r\n                    1710236660000,\r\n                    1710236680000,\r\n                    1710236700000,\r\n                    1710236720000,\r\n                    1710236740000,\r\n                    1710236760000,\r\n                    1710236780000,\r\n                    1710236800000,\r\n                    1710236820000,\r\n                    1710236840000,\r\n                    1710236860000,\r\n                    1710236880000,\r\n                    1710236900000,\r\n                    1710236920000,\r\n                    1710236940000,\r\n                    1710236960000,\r\n                    1710236980000,\r\n                    1710237000000,\r\n                    1710237020000,\r\n                    1710237040000,\r\n                    1710237060000,\r\n                    1710237080000,\r\n                    1710237100000,\r\n                    1710237120000,\r\n                    1710237140000,\r\n                    1710237160000,\r\n                    1710237180000,\r\n                    1710237200000,\r\n                    1710237220000,\r\n                    1710237240000,\r\n                    1710237260000,\r\n                    1710237280000,\r\n                    1710237300000,\r\n                    1710237320000,\r\n                    1710237340000,\r\n                    1710237360000,\r\n                    1710237380000,\r\n                    1710237400000,\r\n                    1710237420000,\r\n                    1710237440000,\r\n                    1710237460000,\r\n                    1710237480000,\r\n                    1710237500000,\r\n                    1710237520000,\r\n                    1710237540000,\r\n                    1710237560000,\r\n                    1710237580000,\r\n                    1710237600000,\r\n                    1710237620000,\r\n                    1710237640000,\r\n                    1710237660000,\r\n                    1710237680000,\r\n                    1710237700000,\r\n                    1710237720000,\r\n                    1710237740000,\r\n                    1710237760000,\r\n                    1710237780000,\r\n                    1710237800000,\r\n                    1710237820000,\r\n                    1710237840000,\r\n                    1710237860000,\r\n                    1710237880000,\r\n                    1710237900000,\r\n                    1710237920000,\r\n                    1710237940000,\r\n                    1710237960000,\r\n                    1710237980000,\r\n                    1710238000000,\r\n                    1710238020000,\r\n                    1710238040000,\r\n                    1710238060000,\r\n                    1710238080000,\r\n                    1710238100000,\r\n                    1710238120000,\r\n                    1710238140000,\r\n                    1710238160000,\r\n                    1710238180000,\r\n                    1710238200000,\r\n                    1710238220000,\r\n                    1710238240000,\r\n                    1710238260000,\r\n                    1710238280000\r\n                  ],\r\n                  [\r\n                    4471,\r\n                    7352,\r\n                    6707,\r\n                    5948,\r\n                    6719,\r\n                    7257,\r\n                    6392,\r\n                    6423,\r\n                    5759,\r\n                    6077,\r\n                    6517,\r\n                    6723,\r\n                    5728,\r\n                    5058,\r\n                    5262,\r\n                    5973,\r\n                    7084,\r\n                    7515,\r\n                    5830,\r\n                    5270,\r\n                    6122,\r\n                    6483,\r\n                    6640,\r\n                    6733,\r\n                    6115,\r\n                    6972,\r\n                    5944,\r\n                    6016,\r\n                    6691,\r\n                    5920,\r\n                    5757,\r\n                    6065,\r\n                    5906,\r\n                    6050,\r\n                    7912,\r\n                    7218,\r\n                    6538,\r\n                    7409,\r\n                    6832,\r\n                    6409,\r\n                    8158,\r\n                    7258,\r\n                    6498,\r\n                    6262,\r\n                    5777,\r\n                    5444,\r\n                    6640,\r\n                    6175,\r\n                    5764,\r\n                    5899,\r\n                    5450,\r\n                    5226,\r\n                    6083,\r\n                    6055,\r\n                    6138,\r\n                    5912,\r\n                    6676,\r\n                    6412,\r\n                    6133,\r\n                    6100,\r\n                    6460,\r\n                    7007,\r\n                    6010,\r\n                    6128,\r\n                    6519,\r\n                    6229,\r\n                    6391,\r\n                    6804,\r\n                    6164,\r\n                    5847,\r\n                    6577,\r\n                    6970,\r\n                    6601,\r\n                    6538,\r\n                    6079,\r\n                    6393,\r\n                    7583,\r\n                    6678,\r\n                    6591,\r\n                    6860,\r\n                    5873,\r\n                    6656,\r\n                    6487,\r\n                    6175,\r\n                    5962,\r\n                    6444,\r\n                    6376,\r\n                    5655,\r\n                    6314,\r\n                    5577,\r\n                    4902,\r\n                    6647,\r\n                    5577,\r\n                    5991,\r\n                    6883,\r\n                    6190,\r\n                    5867,\r\n                    6692,\r\n                    5901,\r\n                    5295,\r\n                    5976,\r\n                    5923,\r\n                    5359,\r\n                    5800,\r\n                    5347,\r\n                    5509,\r\n                    5728,\r\n                    5471,\r\n                    5646,\r\n                    6664,\r\n                    6085,\r\n                    5399,\r\n                    7270,\r\n                    5884,\r\n                    7001,\r\n                    6810,\r\n                    7155,\r\n                    6112,\r\n                    7585,\r\n                    6864,\r\n                    6143,\r\n                    7238,\r\n                    6675,\r\n                    6538,\r\n                    7197,\r\n                    6374,\r\n                    6611,\r\n                    7395,\r\n                    8271,\r\n                    6388,\r\n                    8373,\r\n                    7401,\r\n                    6673,\r\n                    6986,\r\n                    7036,\r\n                    6953,\r\n                    7264,\r\n                    6517,\r\n                    6385,\r\n                    6979,\r\n                    6321,\r\n                    6254,\r\n                    6931,\r\n                    6063,\r\n                    5735,\r\n                    6604,\r\n                    8573,\r\n                    7553,\r\n                    7464,\r\n                    7052,\r\n                    6415,\r\n                    6596,\r\n                    7563,\r\n                    8238,\r\n                    9406,\r\n                    7819,\r\n                    6977,\r\n                    7094,\r\n                    6585,\r\n                    6471,\r\n                    7842,\r\n                    7843,\r\n                    6516,\r\n                    6588,\r\n                    6459,\r\n                    6363,\r\n                    7172,\r\n                    6564,\r\n                    5962,\r\n                    6881,\r\n                    6436,\r\n                    6763,\r\n                    8133,\r\n                    7798,\r\n                    7116,\r\n                    7364,\r\n                    7730,\r\n                    6141,\r\n                    7492,\r\n                    8048,\r\n                    3323\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"E\",\r\n                \"name\": \"429 (Too Many Requests)\",\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"config\": {}\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"config\": {}\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710234680000,\r\n                    1710234700000,\r\n                    1710234720000,\r\n                    1710234740000,\r\n                    1710234760000,\r\n                    1710234780000,\r\n                    1710234800000,\r\n                    1710234820000,\r\n                    1710234840000,\r\n                    1710234860000,\r\n                    1710234880000,\r\n                    1710234900000,\r\n                    1710234920000,\r\n                    1710234940000,\r\n                    1710234960000,\r\n                    1710234980000,\r\n                    1710235000000,\r\n                    1710235020000,\r\n                    1710235040000,\r\n                    1710235060000,\r\n                    1710235080000,\r\n                    1710235100000,\r\n                    1710235120000,\r\n                    1710235140000,\r\n                    1710235160000,\r\n                    1710235180000,\r\n                    1710235200000,\r\n                    1710235220000,\r\n                    1710235240000,\r\n                    1710235260000,\r\n                    1710235280000,\r\n                    1710235300000,\r\n                    1710235320000,\r\n                    1710235340000,\r\n                    1710235360000,\r\n                    1710235380000,\r\n                    1710235400000,\r\n                    1710235420000,\r\n                    1710235440000,\r\n                    1710235460000,\r\n                    1710235480000,\r\n                    1710235500000,\r\n                    1710235520000,\r\n                    1710235540000,\r\n                    1710235560000,\r\n                    1710235580000,\r\n                    1710235600000,\r\n                    1710235620000,\r\n                    1710235640000,\r\n                    1710235660000,\r\n                    1710235680000,\r\n                    1710235700000,\r\n                    1710235720000,\r\n                    1710235740000,\r\n                    1710235760000,\r\n                    1710235780000,\r\n                    1710235800000,\r\n                    1710235820000,\r\n                    1710235840000,\r\n                    1710235860000,\r\n                    1710235880000,\r\n                    1710235900000,\r\n                    1710235920000,\r\n                    1710235940000,\r\n                    1710235960000,\r\n                    1710235980000,\r\n                    1710236000000,\r\n                    1710236020000,\r\n                    1710236040000,\r\n                    1710236060000,\r\n                    1710236080000,\r\n                    1710236100000,\r\n                    1710236120000,\r\n                    1710236140000,\r\n                    1710236160000,\r\n                    1710236180000,\r\n                    1710236200000,\r\n                    1710236220000,\r\n                    1710236240000,\r\n                    1710236260000,\r\n                    1710236280000,\r\n                    1710236300000,\r\n                    1710236320000,\r\n                    1710236340000,\r\n                    1710236360000,\r\n                    1710236380000,\r\n                    1710236400000,\r\n                    1710236420000,\r\n                    1710236440000,\r\n                    1710236460000,\r\n                    1710236480000,\r\n                    1710236500000,\r\n                    1710236520000,\r\n                    1710236540000,\r\n                    1710236560000,\r\n                    1710236580000,\r\n                    1710236600000,\r\n                    1710236620000,\r\n                    1710236640000,\r\n                    1710236660000,\r\n                    1710236680000,\r\n                    1710236700000,\r\n                    1710236720000,\r\n                    1710236740000,\r\n                    1710236760000,\r\n                    1710236780000,\r\n                    1710236800000,\r\n                    1710236820000,\r\n                    1710236840000,\r\n                    1710236860000,\r\n                    1710236880000,\r\n                    1710236900000,\r\n                    1710236920000,\r\n                    1710236940000,\r\n                    1710236960000,\r\n                    1710236980000,\r\n                    1710237000000,\r\n                    1710237020000,\r\n                    1710237040000,\r\n                    1710237060000,\r\n                    1710237080000,\r\n                    1710237100000,\r\n                    1710237120000,\r\n                    1710237140000,\r\n                    1710237160000,\r\n                    1710237180000,\r\n                    1710237200000,\r\n                    1710237220000,\r\n                    1710237240000,\r\n                    1710237260000,\r\n                    1710237280000,\r\n                    1710237300000,\r\n                    1710237320000,\r\n                    1710237340000,\r\n                    1710237360000,\r\n                    1710237380000,\r\n                    1710237400000,\r\n                    1710237420000,\r\n                    1710237440000,\r\n                    1710237460000,\r\n                    1710237480000,\r\n                    1710237500000,\r\n                    1710237520000,\r\n                    1710237540000,\r\n                    1710237560000,\r\n                    1710237580000,\r\n                    1710237600000,\r\n                    1710237620000,\r\n                    1710237640000,\r\n                    1710237660000,\r\n                    1710237680000,\r\n                    1710237700000,\r\n                    1710237720000,\r\n                    1710237740000,\r\n                    1710237760000,\r\n                    1710237780000,\r\n                    1710237800000,\r\n                    1710237820000,\r\n                    1710237840000,\r\n                    1710237860000,\r\n                    1710237880000,\r\n                    1710237900000,\r\n                    1710237920000,\r\n                    1710237940000,\r\n                    1710237960000,\r\n                    1710237980000,\r\n                    1710238000000,\r\n                    1710238020000,\r\n                    1710238040000,\r\n                    1710238060000,\r\n                    1710238080000,\r\n                    1710238100000,\r\n                    1710238120000,\r\n                    1710238140000,\r\n                    1710238160000,\r\n                    1710238180000,\r\n                    1710238200000,\r\n                    1710238220000,\r\n                    1710238240000,\r\n                    1710238260000,\r\n                    1710238280000\r\n                  ],\r\n                  [\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0\r\n                  ]\r\n                ]\r\n              }\r\n            },\r\n            {\r\n              \"schema\": {\r\n                \"refId\": \"B\",\r\n                \"name\": \"5xx\",\r\n                \"fields\": [\r\n                  {\r\n                    \"name\": \"Time\",\r\n                    \"type\": \"time\",\r\n                    \"config\": {}\r\n                  },\r\n                  {\r\n                    \"name\": \"Value\",\r\n                    \"type\": \"number\",\r\n                    \"config\": {}\r\n                  }\r\n                ]\r\n              },\r\n              \"data\": {\r\n                \"values\": [\r\n                  [\r\n                    1710234680000,\r\n                    1710234700000,\r\n                    1710234720000,\r\n                    1710234740000,\r\n                    1710234760000,\r\n                    1710234780000,\r\n                    1710234800000,\r\n                    1710234820000,\r\n                    1710234840000,\r\n                    1710234860000,\r\n                    1710234880000,\r\n                    1710234900000,\r\n                    1710234920000,\r\n                    1710234940000,\r\n                    1710234960000,\r\n                    1710234980000,\r\n                    1710235000000,\r\n                    1710235020000,\r\n                    1710235040000,\r\n                    1710235060000,\r\n                    1710235080000,\r\n                    1710235100000,\r\n                    1710235120000,\r\n                    1710235140000,\r\n                    1710235160000,\r\n                    1710235180000,\r\n                    1710235200000,\r\n                    1710235220000,\r\n                    1710235240000,\r\n                    1710235260000,\r\n                    1710235280000,\r\n                    1710235300000,\r\n                    1710235320000,\r\n                    1710235340000,\r\n                    1710235360000,\r\n                    1710235380000,\r\n                    1710235400000,\r\n                    1710235420000,\r\n                    1710235440000,\r\n                    1710235460000,\r\n                    1710235480000,\r\n                    1710235500000,\r\n                    1710235520000,\r\n                    1710235540000,\r\n                    1710235560000,\r\n                    1710235580000,\r\n                    1710235600000,\r\n                    1710235620000,\r\n                    1710235640000,\r\n                    1710235660000,\r\n                    1710235680000,\r\n                    1710235700000,\r\n                    1710235720000,\r\n                    1710235740000,\r\n                    1710235760000,\r\n                    1710235780000,\r\n                    1710235800000,\r\n                    1710235820000,\r\n                    1710235840000,\r\n                    1710235860000,\r\n                    1710235880000,\r\n                    1710235900000,\r\n                    1710235920000,\r\n                    1710235940000,\r\n                    1710235960000,\r\n                    1710235980000,\r\n                    1710236000000,\r\n                    1710236020000,\r\n                    1710236040000,\r\n                    1710236060000,\r\n                    1710236080000,\r\n                    1710236100000,\r\n                    1710236120000,\r\n                    1710236140000,\r\n                    1710236160000,\r\n                    1710236180000,\r\n                    1710236200000,\r\n                    1710236220000,\r\n                    1710236240000,\r\n                    1710236260000,\r\n                    1710236280000,\r\n                    1710236300000,\r\n                    1710236320000,\r\n                    1710236340000,\r\n                    1710236360000,\r\n                    1710236380000,\r\n                    1710236400000,\r\n                    1710236420000,\r\n                    1710236440000,\r\n                    1710236460000,\r\n                    1710236480000,\r\n                    1710236500000,\r\n                    1710236520000,\r\n                    1710236540000,\r\n                    1710236560000,\r\n                    1710236580000,\r\n                    1710236600000,\r\n                    1710236620000,\r\n                    1710236640000,\r\n                    1710236660000,\r\n                    1710236680000,\r\n                    1710236700000,\r\n                    1710236720000,\r\n                    1710236740000,\r\n                    1710236760000,\r\n                    1710236780000,\r\n                    1710236800000,\r\n                    1710236820000,\r\n                    1710236840000,\r\n                    1710236860000,\r\n                    1710236880000,\r\n                    1710236900000,\r\n                    1710236920000,\r\n                    1710236940000,\r\n                    1710236960000,\r\n                    1710236980000,\r\n                    1710237000000,\r\n                    1710237020000,\r\n                    1710237040000,\r\n                    1710237060000,\r\n                    1710237080000,\r\n                    1710237100000,\r\n                    1710237120000,\r\n                    1710237140000,\r\n                    1710237160000,\r\n                    1710237180000,\r\n                    1710237200000,\r\n                    1710237220000,\r\n                    1710237240000,\r\n                    1710237260000,\r\n                    1710237280000,\r\n                    1710237300000,\r\n                    1710237320000,\r\n                    1710237340000,\r\n                    1710237360000,\r\n                    1710237380000,\r\n                    1710237400000,\r\n                    1710237420000,\r\n                    1710237440000,\r\n                    1710237460000,\r\n                    1710237480000,\r\n                    1710237500000,\r\n                    1710237520000,\r\n                    1710237540000,\r\n                    1710237560000,\r\n                    1710237580000,\r\n                    1710237600000,\r\n                    1710237620000,\r\n                    1710237640000,\r\n                    1710237660000,\r\n                    1710237680000,\r\n                    1710237700000,\r\n                    1710237720000,\r\n                    1710237740000,\r\n                    1710237760000,\r\n                    1710237780000,\r\n                    1710237800000,\r\n                    1710237820000,\r\n                    1710237840000,\r\n                    1710237860000,\r\n                    1710237880000,\r\n                    1710237900000,\r\n                    1710237920000,\r\n                    1710237940000,\r\n                    1710237960000,\r\n                    1710237980000,\r\n                    1710238000000,\r\n                    1710238020000,\r\n                    1710238040000,\r\n                    1710238060000,\r\n                    1710238080000,\r\n                    1710238100000,\r\n                    1710238120000,\r\n                    1710238140000,\r\n                    1710238160000,\r\n                    1710238180000,\r\n                    1710238200000,\r\n                    1710238220000,\r\n                    1710238240000,\r\n                    1710238260000,\r\n                    1710238280000\r\n                  ],\r\n                  [\r\n                    16,\r\n                    40,\r\n                    52,\r\n                    37,\r\n                    35,\r\n                    83,\r\n                    37,\r\n                    31,\r\n                    28,\r\n                    28,\r\n                    30,\r\n                    35,\r\n                    33,\r\n                    49,\r\n                    44,\r\n                    37,\r\n                    40,\r\n                    45,\r\n                    12,\r\n                    48,\r\n                    26,\r\n                    38,\r\n                    69,\r\n                    30,\r\n                    17,\r\n                    78,\r\n                    20,\r\n                    53,\r\n                    41,\r\n                    22,\r\n                    33,\r\n                    60,\r\n                    33,\r\n                    54,\r\n                    39,\r\n                    52,\r\n                    33,\r\n                    35,\r\n                    46,\r\n                    21,\r\n                    56,\r\n                    23,\r\n                    21,\r\n                    51,\r\n                    38,\r\n                    14,\r\n                    58,\r\n                    14,\r\n                    25,\r\n                    42,\r\n                    37,\r\n                    38,\r\n                    50,\r\n                    47,\r\n                    38,\r\n                    23,\r\n                    34,\r\n                    68,\r\n                    30,\r\n                    10,\r\n                    44,\r\n                    40,\r\n                    41,\r\n                    74,\r\n                    36,\r\n                    36,\r\n                    44,\r\n                    34,\r\n                    21,\r\n                    18,\r\n                    73,\r\n                    51,\r\n                    69,\r\n                    13,\r\n                    26,\r\n                    39,\r\n                    23,\r\n                    20,\r\n                    27,\r\n                    28,\r\n                    11,\r\n                    24,\r\n                    43,\r\n                    46,\r\n                    50,\r\n                    18,\r\n                    34,\r\n                    31,\r\n                    20,\r\n                    31,\r\n                    37,\r\n                    18,\r\n                    30,\r\n                    37,\r\n                    30,\r\n                    37,\r\n                    32,\r\n                    27,\r\n                    56,\r\n                    46,\r\n                    44,\r\n                    36,\r\n                    53,\r\n                    17,\r\n                    35,\r\n                    20,\r\n                    25,\r\n                    51,\r\n                    38,\r\n                    30,\r\n                    33,\r\n                    6,\r\n                    51,\r\n                    12,\r\n                    33,\r\n                    44,\r\n                    29,\r\n                    21,\r\n                    31,\r\n                    32,\r\n                    30,\r\n                    34,\r\n                    33,\r\n                    11,\r\n                    41,\r\n                    32,\r\n                    38,\r\n                    21,\r\n                    23,\r\n                    24,\r\n                    27,\r\n                    28,\r\n                    35,\r\n                    53,\r\n                    16,\r\n                    40,\r\n                    23,\r\n                    52,\r\n                    22,\r\n                    34,\r\n                    39,\r\n                    18,\r\n                    40,\r\n                    27,\r\n                    27,\r\n                    23,\r\n                    36,\r\n                    42,\r\n                    41,\r\n                    35,\r\n                    34,\r\n                    35,\r\n                    45,\r\n                    19,\r\n                    20,\r\n                    11,\r\n                    13,\r\n                    16,\r\n                    37,\r\n                    13,\r\n                    30,\r\n                    20,\r\n                    17,\r\n                    21,\r\n                    35,\r\n                    37,\r\n                    29,\r\n                    22,\r\n                    34,\r\n                    51,\r\n                    18,\r\n                    27,\r\n                    73,\r\n                    10,\r\n                    27,\r\n                    32,\r\n                    52,\r\n                    53,\r\n                    30,\r\n                    42,\r\n                    5\r\n                  ]\r\n                ]\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      \"thresholds\": [],\r\n      \"timeRegions\": [],\r\n      \"title\": \"Reproduced with embedded data\",\r\n      \"tooltip\": {\r\n        \"shared\": true,\r\n        \"sort\": 0,\r\n        \"value_type\": \"individual\"\r\n      },\r\n      \"type\": \"graph\",\r\n      \"xaxis\": {\r\n        \"mode\": \"time\",\r\n        \"show\": true,\r\n        \"values\": [],\r\n        \"name\": null,\r\n        \"buckets\": null\r\n      },\r\n      \"yaxes\": [\r\n        {\r\n          \"$$hashKey\": \"object:41\",\r\n          \"decimals\": 0,\r\n          \"format\": \"short\",\r\n          \"logBase\": 1,\r\n          \"max\": \"100\",\r\n          \"min\": \"0\",\r\n          \"show\": true\r\n        },\r\n        {\r\n          \"$$hashKey\": \"object:42\",\r\n          \"format\": \"short\",\r\n          \"logBase\": 1,\r\n          \"show\": false\r\n        }\r\n      ],\r\n      \"yaxis\": {\r\n        \"align\": false\r\n      },\r\n      \"timeFrom\": null,\r\n      \"timeShift\": null\r\n    },\r\n    {\r\n      \"gridPos\": {\r\n        \"h\": 7,\r\n        \"w\": 9,\r\n        \"x\": 15,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 5,\r\n      \"options\": {\r\n        \"content\": \"<table width=\\\"100%\\\">\\n    <tr>\\n      <th width=\\\"2%\\\">Panel<\/th>\\n      <td >graph @ 10.1.5<\/td>\\n    <\/tr>\\n    <tr>\\n      <th>Queries<\/th>\\n      <td>A[grafana-opensearch-datasource], C[grafana-opensearch-datasource], D[grafana-opensearch-datasource], E[grafana-opensearch-datasource], B[grafana-opensearch-datasource]<\/td>\\n    <\/tr>\\n    \\n    <tr><th>Data<\/th><td> 5 frames, 10 fields, 905 rows <\/td><\/tr>\\n    \\n    <tr>\\n      <th>Grafana<\/th>\\n      <td>10.1.5 (849c612fcb) \/\/ Open Source<\/td>\\n    <\/tr>\\n  <\/table>\",\r\n        \"mode\": \"html\"\r\n      },\r\n      \"title\": \"Debug info\",\r\n      \"type\": \"text\"\r\n    },\r\n    {\r\n      \"id\": 6,\r\n      \"title\": \"Original Panel JSON\",\r\n      \"type\": \"text\",\r\n      \"gridPos\": {\r\n        \"h\": 13,\r\n        \"w\": 9,\r\n        \"x\": 15,\r\n        \"y\": 7\r\n      },\r\n      \"options\": {\r\n        \"content\": \"{\\n  \\\"datasource\\\": {\\n    \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n    \\\"uid\\\": \\\"${source}\\\"\\n  },\\n  \\\"aliasColors\\\": {\\n    \\\"400\\\": \\\"yellow\\\",\\n    \\\"401\\\": \\\"blue\\\",\\n    \\\"403\\\": \\\"dark-blue\\\",\\n    \\\"404\\\": \\\"orange\\\",\\n    \\\"408\\\": \\\"dark-orange\\\",\\n    \\\"409\\\": \\\"semi-dark-orange\\\",\\n    \\\"429\\\": \\\"purple\\\",\\n    \\\"460\\\": \\\"light-orange\\\",\\n    \\\"500\\\": \\\"red\\\",\\n    \\\"3xx\\\": \\\"yellow\\\",\\n    \\\"429 (Too Many Requests)\\\": \\\"purple\\\",\\n    \\\"4xx\\\": \\\"rgb(194, 127, 0)\\\",\\n    \\\"5xx\\\": \\\"rgb(158, 0, 19)\\\"\\n  },\\n  \\\"bars\\\": false,\\n  \\\"dashLength\\\": 10,\\n  \\\"dashes\\\": false,\\n  \\\"fieldConfig\\\": {\\n    \\\"defaults\\\": {\\n      \\\"links\\\": []\\n    },\\n    \\\"overrides\\\": []\\n  },\\n  \\\"fill\\\": 8,\\n  \\\"fillGradient\\\": 0,\\n  \\\"gridPos\\\": {\\n    \\\"h\\\": 30,\\n    \\\"w\\\": 24,\\n    \\\"x\\\": 0,\\n    \\\"y\\\": 0\\n  },\\n  \\\"hiddenSeries\\\": false,\\n  \\\"id\\\": 4,\\n  \\\"legend\\\": {\\n    \\\"avg\\\": false,\\n    \\\"current\\\": false,\\n    \\\"max\\\": false,\\n    \\\"min\\\": false,\\n    \\\"show\\\": true,\\n    \\\"total\\\": false,\\n    \\\"values\\\": false\\n  },\\n  \\\"lines\\\": true,\\n  \\\"linewidth\\\": 0,\\n  \\\"nullPointMode\\\": \\\"connected\\\",\\n  \\\"options\\\": {\\n    \\\"alertThreshold\\\": true\\n  },\\n  \\\"percentage\\\": true,\\n  \\\"pluginVersion\\\": \\\"10.1.5\\\",\\n  \\\"pointradius\\\": 2,\\n  \\\"points\\\": false,\\n  \\\"queryType\\\": \\\"lucene\\\",\\n  \\\"renderer\\\": \\\"flot\\\",\\n  \\\"seriesOverrides\\\": [],\\n  \\\"spaceLength\\\": 10,\\n  \\\"stack\\\": true,\\n  \\\"steppedLine\\\": false,\\n  \\\"targets\\\": [\\n    {\\n      \\\"alias\\\": \\\"2xx\\\",\\n      \\\"bucketAggs\\\": [\\n        {\\n          \\\"field\\\": \\\"timestamp\\\",\\n          \\\"id\\\": \\\"2\\\",\\n          \\\"settings\\\": {\\n            \\\"interval\\\": \\\"$interval\\\",\\n            \\\"min_doc_count\\\": 0,\\n            \\\"trimEdges\\\": 0\\n          },\\n          \\\"type\\\": \\\"date_histogram\\\"\\n        }\\n      ],\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n        \\\"uid\\\": \\\"${source}\\\"\\n      },\\n      \\\"metrics\\\": [\\n        {\\n          \\\"field\\\": \\\"select field\\\",\\n          \\\"id\\\": \\\"1\\\",\\n          \\\"type\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"query\\\": \\\"_exists_:call_status_int AND cluster_type:$cluster AND region:$region AND section:$section AND call_status_int:[200 TO 299]\\\",\\n      \\\"queryType\\\": \\\"lucene\\\",\\n      \\\"refId\\\": \\\"A\\\",\\n      \\\"timeField\\\": \\\"timestamp\\\"\\n    },\\n    {\\n      \\\"alias\\\": \\\"3xx\\\",\\n      \\\"bucketAggs\\\": [\\n        {\\n          \\\"field\\\": \\\"timestamp\\\",\\n          \\\"id\\\": \\\"2\\\",\\n          \\\"settings\\\": {\\n            \\\"interval\\\": \\\"$interval\\\",\\n            \\\"min_doc_count\\\": 0,\\n            \\\"trimEdges\\\": 0\\n          },\\n          \\\"type\\\": \\\"date_histogram\\\"\\n        }\\n      ],\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n        \\\"uid\\\": \\\"${source}\\\"\\n      },\\n      \\\"metrics\\\": [\\n        {\\n          \\\"field\\\": \\\"select field\\\",\\n          \\\"id\\\": \\\"1\\\",\\n          \\\"type\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"query\\\": \\\"_exists_:call_status_int AND cluster_type:$cluster AND region:$region AND section:$section AND call_status_int:[300 TO 399]\\\",\\n      \\\"queryType\\\": \\\"lucene\\\",\\n      \\\"refId\\\": \\\"C\\\",\\n      \\\"timeField\\\": \\\"timestamp\\\"\\n    },\\n    {\\n      \\\"alias\\\": \\\"4xx\\\",\\n      \\\"bucketAggs\\\": [\\n        {\\n          \\\"field\\\": \\\"timestamp\\\",\\n          \\\"id\\\": \\\"2\\\",\\n          \\\"settings\\\": {\\n            \\\"interval\\\": \\\"$interval\\\",\\n            \\\"min_doc_count\\\": 0,\\n            \\\"trimEdges\\\": 0\\n          },\\n          \\\"type\\\": \\\"date_histogram\\\"\\n        }\\n      ],\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n        \\\"uid\\\": \\\"${source}\\\"\\n      },\\n      \\\"metrics\\\": [\\n        {\\n          \\\"field\\\": \\\"select field\\\",\\n          \\\"id\\\": \\\"1\\\",\\n          \\\"type\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"query\\\": \\\"_exists_:call_status_int AND cluster_type:$cluster AND region:$region AND section:$section AND call_status_int:[400 TO 499] AND NOT call_status_int:429\\\",\\n      \\\"queryType\\\": \\\"lucene\\\",\\n      \\\"refId\\\": \\\"D\\\",\\n      \\\"timeField\\\": \\\"timestamp\\\"\\n    },\\n    {\\n      \\\"alias\\\": \\\"429 (Too Many Requests)\\\",\\n      \\\"bucketAggs\\\": [\\n        {\\n          \\\"field\\\": \\\"timestamp\\\",\\n          \\\"id\\\": \\\"2\\\",\\n          \\\"settings\\\": {\\n            \\\"interval\\\": \\\"$interval\\\",\\n            \\\"min_doc_count\\\": 0,\\n            \\\"trimEdges\\\": 0\\n          },\\n          \\\"type\\\": \\\"date_histogram\\\"\\n        }\\n      ],\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n        \\\"uid\\\": \\\"${source}\\\"\\n      },\\n      \\\"metrics\\\": [\\n        {\\n          \\\"field\\\": \\\"select field\\\",\\n          \\\"id\\\": \\\"1\\\",\\n          \\\"type\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"query\\\": \\\"_exists_:call_status_int AND cluster_type:$cluster AND region:$region AND section:$section AND call_status_int:429\\\",\\n      \\\"queryType\\\": \\\"lucene\\\",\\n      \\\"refId\\\": \\\"E\\\",\\n      \\\"timeField\\\": \\\"timestamp\\\"\\n    },\\n    {\\n      \\\"alias\\\": \\\"5xx\\\",\\n      \\\"bucketAggs\\\": [\\n        {\\n          \\\"field\\\": \\\"timestamp\\\",\\n          \\\"id\\\": \\\"2\\\",\\n          \\\"settings\\\": {\\n            \\\"interval\\\": \\\"$interval\\\",\\n            \\\"min_doc_count\\\": 0,\\n            \\\"trimEdges\\\": 0\\n          },\\n          \\\"type\\\": \\\"date_histogram\\\"\\n        }\\n      ],\\n      \\\"datasource\\\": {\\n        \\\"type\\\": \\\"grafana-opensearch-datasource\\\",\\n        \\\"uid\\\": \\\"${source}\\\"\\n      },\\n      \\\"metrics\\\": [\\n        {\\n          \\\"field\\\": \\\"select field\\\",\\n          \\\"id\\\": \\\"1\\\",\\n          \\\"type\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"query\\\": \\\"_exists_:call_status_int AND cluster_type:$cluster AND region:$region AND section:$section AND call_status_int:[500 TO 599]\\\",\\n      \\\"queryType\\\": \\\"lucene\\\",\\n      \\\"refId\\\": \\\"B\\\",\\n      \\\"timeField\\\": \\\"timestamp\\\"\\n    }\\n  ],\\n  \\\"thresholds\\\": [],\\n  \\\"timeRegions\\\": [],\\n  \\\"title\\\": \\\"HTTP status repartition: section $section\\\",\\n  \\\"tooltip\\\": {\\n    \\\"shared\\\": true,\\n    \\\"sort\\\": 0,\\n    \\\"value_type\\\": \\\"individual\\\"\\n  },\\n  \\\"type\\\": \\\"graph\\\",\\n  \\\"xaxis\\\": {\\n    \\\"mode\\\": \\\"time\\\",\\n    \\\"show\\\": true,\\n    \\\"values\\\": [],\\n    \\\"name\\\": null,\\n    \\\"buckets\\\": null\\n  },\\n  \\\"yaxes\\\": [\\n    {\\n      \\\"$$hashKey\\\": \\\"object:41\\\",\\n      \\\"decimals\\\": 0,\\n      \\\"format\\\": \\\"short\\\",\\n      \\\"logBase\\\": 1,\\n      \\\"max\\\": \\\"100\\\",\\n      \\\"min\\\": \\\"0\\\",\\n      \\\"show\\\": true\\n    },\\n    {\\n      \\\"$$hashKey\\\": \\\"object:42\\\",\\n      \\\"format\\\": \\\"short\\\",\\n      \\\"logBase\\\": 1,\\n      \\\"show\\\": false\\n    }\\n  ],\\n  \\\"yaxis\\\": {\\n    \\\"align\\\": false\\n  },\\n  \\\"timeFrom\\\": null,\\n  \\\"timeShift\\\": null\\n}\",\r\n        \"mode\": \"code\",\r\n        \"code\": {\r\n          \"language\": \"json\",\r\n          \"showLineNumbers\": true,\r\n          \"showMiniMap\": true\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": 3,\r\n      \"title\": \"Data from panel above\",\r\n      \"type\": \"table\",\r\n      \"datasource\": {\r\n        \"type\": \"datasource\",\r\n        \"uid\": \"-- Dashboard --\"\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 7,\r\n        \"w\": 15,\r\n        \"x\": 0,\r\n        \"y\": 13\r\n      },\r\n      \"options\": {\r\n        \"showTypeIcons\": true\r\n      },\r\n      \"targets\": [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"datasource\",\r\n            \"uid\": \"-- Dashboard --\"\r\n          },\r\n          \"panelId\": 2,\r\n          \"withTransforms\": true,\r\n          \"refId\": \"A\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"schemaVersion\": 37,\r\n  \"title\": \"Debug: HTTP status repartition: section $section \/\/ 2024-03-12 12:45:01\",\r\n  \"tags\": [\r\n    \"debug\",\r\n    \"debug-graph\"\r\n  ],\r\n  \"time\": {\r\n    \"from\": \"2024-03-12T09:11:26.238Z\",\r\n    \"to\": \"2024-03-12T10:11:26.238Z\"\r\n  }\r\n}\r\n```\r\n<\/details>","yep, thanks!\r\n\r\n> Set decimal to auto\r\n\r\nlooks like the original panel has decimals set to 0, so i dont think that's a migration bug?\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/0c33f239-d51b-4498-a59d-1571dd92d02c)\r\n","`Null value` was also set to \"connected\", so the migration was correct to set it to Always.\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/78bcb4ea-ced8-47f2-bff7-84ad194dc064)\r\n","looking at this a bit closer...\r\n\r\nfrom what i can see, the defaults for `Graph (old)` look like the options below.\r\n\r\nwhen i enable stacking by percent, i see that the axis limits are not great (94%-110%), so i think it's reasonable to remove min and max if we see they have been set to 0 and 100 for percent stacked mode (we automatically default to 0-100. another approach would be to convert these values to explicit limits that work for TimeSeries % mode (0-1). plus we also need to fix setting the percent stacked mode setting.\r\n\r\ndecimals=0 is more tricky. it has no effect in the old panel for this dataset. the new panel with 0 decimals becomes only 0% and 100% ticks. this is because internally we represent percent as 0-1, so with 0 decimals you only get the edge ticks. the original intent was likely to avoid showing values like 20.5% for a dataset that had a small range near 20%. i think this is a bug in TimeSeries that needs to be fixed and the migration is technically correct.\r\n\r\n<img width=\"417\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/43234\/726ccdf6-aa33-4395-b16b-ca10cde9b259\">"],"labels":["area\/panel\/graph","type\/angular-2-react","area\/panel\/timeseries"]},{"title":"Scenes: Changes to panel used as source for other panels using dashboard datasource aren't reflected when returning to dashboard","body":"### What happened?\n\nChanges to panel used as source for other panels using dashboard datasource aren't reflected when returning to the dashboard after making those changes:\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/45561153\/cce92067-36ab-461c-9369-df55dfe6d440\r\n\r\n\n\n### What did you expect to happen?\n\nFor the changes to be immediately reflected in any panels using the changed panel as a source.\n\n### Did this work before?\n\nIt works in non-scene dashboards.\n\n### How do we reproduce it?\n\n1. Create a panel\r\n2. Create another panel with the dashboard datasource and choose the first panel as a source \r\n3. Enter edit mode for the first panel and make some changes\r\n4. Return to the dashboard and notice those changes aren't reflected in the other panel\r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: Grafana v11.0.0-pre (ffd0bdafe4)\r\nOS: macOS\r\nBrowser: Chrome 122.0.6261.112\r\n\n\n### Grafana platform?\n\nOther\n\n### Datasource(s)?\n\nDashboard","comments":[],"labels":["type\/bug","area\/dashboard","area\/frontend","area\/scenes","team\/grafana-dashboards"]},{"title":"Grafana not wroking in the local system","body":"I clone the grafana form the repo for development purposes and then tried to build in the local system but got error in yarn install and yarn start.\r\n\r\n**Errors during yarn install :**\r\n\r\nYN0000: \u00b7 Yarn 4.1.1\r\n\u27a4 YN0000: \u250c Resolution step\r\n\u27a4 YN0000: \u2514 Completed in 1s 548ms\r\n\u27a4 YN0000: \u250c Post-resolution validation\r\n\u27a4 YN0060: \u2502 @grafana\/data is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (p09961) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 @grafana\/data is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (p5bf5e) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 @grafana\/e2e-selectors is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (p69e2d) and other dependencies request (^10.0.0).\r\n\u27a4 YN0060: \u2502 @grafana\/runtime is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (p68c57) and other dependencies request (10.4.0-pre).\r\n\u27a4 YN0060: \u2502 @grafana\/runtime is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (pb5a74) requests (^10.0.0).\r\n\u27a4 YN0060: \u2502 @grafana\/schema is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/scenes (pb8930) requests (^10.0.3).\r\n\u27a4 YN0060: \u2502 @grafana\/ui is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (p2a6ff) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 @grafana\/ui is listed by your project with version 11.0.0-pre, which doesn't satisfy what @grafana\/experimental (pd722e) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 @types\/react is listed by your project with version 18.2.60, which doesn't satisfy what @testing-library\/react-hooks (p0d7fb) and other dependencies request (^16.9.0 || ^17.0.0).\r\n\u27a4 YN0060: \u2502 esbuild is listed by your project with version 0.18.12, which doesn't satisfy what esbuild-plugin-browserslist (pcca10) requests \r\n(~0.20.0).\r\n\u27a4 YN0060: \u2502 marked is listed by your project with version 12.0.0, which doesn't satisfy what @glideapps\/glide-data-grid (pbb6a7) requests (^4.0.10).\r\n\u27a4 YN0060: \u2502 mocha is listed by your project with version 10.2.0, which doesn't satisfy what @mochajs\/json-file-reporter (p87db2) requests (^6.0.0 || ^7.0.0 || ^8.0.0).\r\n\u27a4 YN0060: \u2502 monaco-editor is listed by your project with version 0.34.0, which doesn't satisfy what @kusto\/monaco-kusto (p2a8aa) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 react is listed by your project with version 18.2.0, which doesn't satisfy what rc-time-picker (p1eae0) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 react-dom is listed by your project with version 18.2.0, which doesn't satisfy what rc-time-picker (p5dcbe) and other dependencies request (but they have non-overlapping ranges!).\r\n\u27a4 YN0060: \u2502 react-dom is listed by your project with version 18.2.0, which doesn't satisfy what rc-time-picker (p61bd9) and other dependencies request (17.0.1).\r\n\u27a4 YN0060: \u2502 react-test-renderer is listed by your project with version 18.2.0, which doesn't satisfy what @testing-library\/react-hooks (pdf88f) requests (^16.9.0 || ^17.0.0).\r\n\u27a4 YN0060: \u2502 rollup is listed by your project with version 2.79.1, which doesn't satisfy what rollup-plugin-dts (p94e70) and other dependencies request (^3.0.0).\r\n\u27a4 YN0060: \u2502 rxjs is listed by your project with version 7.8.1, which doesn't satisfy what @grafana\/experimental (p41c44) and other dependencies request (7.8.0).\r\n\u27a4 YN0060: \u2502 webpack-dev-server is listed by your project with version 5.0.2, which doesn't satisfy what @pmmmwh\/react-refresh-webpack-plugin \r\n(p2313d) requests (^3.0.0 || ^4.0.0).\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor [655a6] doesn't provide @testing-library\/dom (pc1263), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor [655a6] doesn't provide react-dom (p6ad69), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor [655a6] doesn't provide react-dom (p911dd), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor [655a6] doesn't provide react-dom (pdc834), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor [655a6] doesn't provide react-select (p4aa99), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor doesn't provide @testing-library\/dom (p8084d), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor doesn't provide react-dom \r\n(p593a5), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor doesn't provide react-dom \r\n(pfaa42), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-azure-monitor-datasource@workspace:public\/app\/plugins\/datasource\/azuremonitor doesn't provide react-select (p6769b), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-pyroscope-datasource@workspace:public\/app\/plugins\/datasource\/grafana-pyroscope-datasource [655a6] doesn't provide @testing-library\/dom (p88de1), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-pyroscope-datasource@workspace:public\/app\/plugins\/datasource\/grafana-pyroscope-datasource [655a6] doesn't provide @types\/node (p124c6), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-pyroscope-datasource@workspace:public\/app\/plugins\/datasource\/grafana-pyroscope-datasource doesn't provide @testing-library\/dom (ped398), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-pyroscope-datasource@workspace:public\/app\/plugins\/datasource\/grafana-pyroscope-datasource doesn't provide @types\/node (pef6e0), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide @testing-library\/dom (pfd29d), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide react-dom (p588b0), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide react-dom (p8213f), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide react-dom (pedb9d), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide react-select (pae371), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource [655a6] doesn't \r\nprovide typescript (p5332d), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource doesn't provide \r\n@testing-library\/dom (p66e70), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource doesn't provide \r\nreact-dom (p8783e), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource doesn't provide \r\nreact-dom (pce60d), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource doesn't provide \r\nreact-select (pdb0dd), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/grafana-testdata-datasource@workspace:public\/app\/plugins\/datasource\/grafana-testdata-datasource doesn't provide \r\ntypescript (p8034a), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide @swc\/core (p3dab5), requested by swc-loader.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide @types\/node (p43036), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide eslint (pf3d2e), requested \r\nby eslint-webpack-plugin.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide typescript (p33e6e), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide typescript (p361b3), requested by ts-jest.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/input-datasource@workspace:plugins-bundled\/internal\/input-datasource doesn't provide typescript (p778dd), requested by fork-ts-checker-webpack-plugin.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca [655a6] doesn't provide @testing-library\/dom (p151f2), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca [655a6] doesn't provide @types\/node (pb9408), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca [655a6] doesn't provide react-dom (p70ede), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca [655a6] doesn't provide react-dom (pbc75a), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca [655a6] doesn't provide typescript (p8003c), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca doesn't provide @testing-library\/dom (pe42dc), requested by \r\n@testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca doesn't provide @types\/node (pff22b), requested by ts-node. \r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca doesn't provide react-dom (p4a79f), requested by react-use. \r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca doesn't provide react-dom (pe0d48), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/parca@workspace:public\/app\/plugins\/datasource\/parca doesn't provide typescript (pb4c6a), requested by ts-node.  \r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide @testing-library\/dom (p68a2e), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide react-dom (p1a9ee), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide react-dom (p65f29), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide react-dom (p8012f), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide react-dom (pe04ea), requested by @grafana\/google-sdk.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring [655a6] doesn't provide react-select (pf3e66), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring doesn't provide @testing-library\/dom (p1a3f8), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring doesn't provide react-dom (p19489), requested by @grafana\/google-sdk.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring doesn't provide react-dom (p6dbcb), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring doesn't provide react-dom (pa931d), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/stackdriver@workspace:public\/app\/plugins\/datasource\/cloud-monitoring doesn't provide react-select (p326bd), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/tempo@workspace:public\/app\/plugins\/datasource\/tempo [655a6] doesn't provide @testing-library\/dom (pdc008), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/tempo@workspace:public\/app\/plugins\/datasource\/tempo [655a6] doesn't provide react-select (pef07b), requested by \r\n@grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/tempo@workspace:public\/app\/plugins\/datasource\/tempo doesn't provide @testing-library\/dom (pdeec8), requested by \r\n@testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/tempo@workspace:public\/app\/plugins\/datasource\/tempo doesn't provide react-select (p32da8), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide @grafana\/e2e-selectors (pb8d52), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide @types\/node (pda898), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide react-dom (p51171), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide react-dom (p5400d), requested by @grafana\/o11y-ds-frontend.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide react-dom (p57256), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide react-dom (pa4473), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide react-select (p31455), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin [655a6] doesn't provide typescript (p10200), requested by \r\nts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide @grafana\/e2e-selectors (p5d43e), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide @types\/node (p94484), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide react-dom (p3173a), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide react-dom (p4e845), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide react-dom (pdc82e), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide react-dom (pfe211), requested by @grafana\/o11y-ds-frontend.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide react-select (p5ef64), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana-plugins\/zipkin@workspace:public\/app\/plugins\/datasource\/zipkin doesn't provide typescript (pe5932), requested by ts-node.\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph [655a6] doesn't provide @testing-library\/dom (p44b20), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph [655a6] doesn't provide @types\/node (p30f63), requested by ts-node.    \r\n\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph [655a6] doesn't provide esbuild (p79256), requested by rollup-plugin-esbuild.\r\n\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph doesn't provide @testing-library\/dom (pc8a76), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph doesn't provide @types\/node (p7f0b7), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana\/flamegraph@workspace:packages\/grafana-flamegraph doesn't provide esbuild (p5680a), requested by rollup-plugin-esbuild.  \r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [1d9c0] doesn't provide @testing-library\/dom (pa3120), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [1d9c0] doesn't provide @types\/node (p82f3f), requested by \r\nts-node.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [1d9c0] doesn't provide react-select (pf6237), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [655a6] doesn't provide @testing-library\/dom (p6799e), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [655a6] doesn't provide @types\/node (pc57d2), requested by \r\nts-node.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend [655a6] doesn't provide react-select (pbfd44), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend doesn't provide @testing-library\/dom (p6263b), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend doesn't provide @types\/node (pd77e9), requested by ts-node.\u27a4 YN0002: \u2502 @grafana\/o11y-ds-frontend@workspace:packages\/grafana-o11y-ds-frontend doesn't provide react-select (pa42fb), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana\/plugin-configs@workspace:packages\/grafana-plugin-configs doesn't provide @swc\/core (p1095a), requested by swc-loader.   \r\n\u27a4 YN0002: \u2502 @grafana\/plugin-configs@workspace:packages\/grafana-plugin-configs doesn't provide eslint (pd4664), requested by eslint-webpack-plugin.\r\n\u27a4 YN0002: \u2502 @grafana\/plugin-configs@workspace:packages\/grafana-plugin-configs doesn't provide typescript (pbfda9), requested by fork-ts-checker-webpack-plugin.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide @grafana\/e2e-selectors (pf6095), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide @testing-library\/dom (p18639), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide @types\/node (pb9b95), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-dom (p54090), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-dom (p67a1a), requested by react-virtualized-auto-sizer.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-dom (p9dc1a), requested by @testing-library\/react.     \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-dom (pc0be2), requested by @react-awesome-query-builder\/ui.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-dom (pcbdba), requested by @grafana\/experimental.      \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql [655a6] doesn't provide react-select (pb389b), requested by @grafana\/experimental.   \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide @grafana\/e2e-selectors (pdf788), requested by @grafana\/experimental. \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide @testing-library\/dom (p69332), requested by @testing-library\/user-event.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide @types\/node (p9b08e), requested by ts-node.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-dom (p24d04), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-dom (p47eca), requested by react-use.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-dom (p751d7), requested by react-virtualized-auto-sizer.       \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-dom (pd8f9f), requested by @react-awesome-query-builder\/ui.    \r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-dom (pebe34), requested by @testing-library\/react.\r\n\u27a4 YN0002: \u2502 @grafana\/sql@workspace:packages\/grafana-sql doesn't provide react-select (p76f4e), requested by @grafana\/experimental.\r\n\u27a4 YN0002: \u2502 grafana@workspace:. doesn't provide @babel\/core (p30ca4), requested by @cypress\/webpack-preprocessor.\r\n\u27a4 YN0002: \u2502 grafana@workspace:. doesn't provide @babel\/core (p530fe), requested by @rtsao\/plugin-proposal-class-properties.\r\n\u27a4 YN0002: \u2502 grafana@workspace:. doesn't provide @babel\/preset-env (p10887), requested by @cypress\/webpack-preprocessor.\r\n\u27a4 YN0002: \u2502 grafana@workspace:. doesn't provide babel-loader (p2b5b3), requested by @cypress\/webpack-preprocessor.\r\n\u27a4 YN0086: \u2502 Some peer dependencies are incorrectly met; run yarn explain peer-requirements <hash> for details, where <hash> is the six-letter p-prefixed code.\r\n\u27a4 YN0068: \u2502 react-compat-css-styled \u27a4 dependencies \u27a4 react-simple-compat: No matching package in the dependency tree; you may not need this rule anymore.\r\n\u27a4 YN0068: \u2502 react-icons \u27a4 peerDependencies \u27a4 prop-types: No matching package in the dependency tree; you may not need this rule anymore.\r\n\u27a4 YN0068: \u2502 react-resizable \u27a4 peerDependencies \u27a4 react-dom: No matching package in the dependency tree; you may not need this rule anymore.\r\n\u27a4 YN0000: \u2514 Completed\r\n\u27a4 YN0000: \u250c Fetch step\r\n\u27a4 YN0000: \u2514 Completed in 2s 817ms\r\n\u27a4 YN0000: \u250c Link step\r\n\u27a4 YN0000: \u2514 Completed in 2s 365ms\r\n\u27a4 YN0000: \u00b7 Done with warnings in 7s 711ms\r\n\r\n**Errors during yarn start:**\r\n\r\nPS C:\\Program Files\\Grafana Git\\grafana> yarn start  \r\n10% building 0\/3 entries 3\/3 dependencies 0\/3 modules[1] lerna notice cli v8.1.2\r\n[1] lerna notice filter excluding [\"@grafana\/*\",\"@grafana-plugins\/input-datasource\"]\r\n[1] lerna info filter [ '!@grafana\/*', '!@grafana-plugins\/input-datasource' ]\r\n[1] \r\n[1]  >  Lerna (powered by Nx)   Running target build for 7 projects:\r\n[1] \r\n[1]     - @grafana-plugins\/grafana-azure-monitor-datasource\r\n[1]     - @grafana-plugins\/stackdriver\r\n[1]     - @grafana-plugins\/grafana-pyroscope-datasource\r\n[1]     - @grafana-plugins\/grafana-testdata-datasource\r\n[1]     - @grafana-plugins\/parca\r\n[1]     - @grafana-plugins\/tempo\r\n[1]     - @grafana-plugins\/zipkin\r\n[1]\r\n[1]\r\n46% building 2\/3 entries 14312\/14335 dependencies 2545\/4509 modules[1] \r\n[1] > @grafana-plugins\/grafana-pyroscope-datasource:build\r\n[1] \r\n[1] assets by status 43.2 KiB [cached] 6 assets\r\n[1]\r\n[1] ERROR in module\r\n[1] Module not found: Error: Can't resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-pyroscope-datasource'\r\n[1] Did you mean '.\/module.ts'?\r\n[1] Requests that should resolve in the current directory need to start with '.\/'.\r\n[1] Requests that start with a name are treated as module requests and resolve within module directories (node_modules).\r\n[1] If changing the source code is not an option there is also a resolve options called 'preferRelative' which tries to resolve these kind of requests \r\nin the current directory too.\r\n[1] resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-pyroscope-datasource'\r\n[1]   Parsed request is a module\r\n[1]   using description file: C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-pyroscope-datasource\\package.json (relative path: .)\r\n[1]     Field 'browser' doesn't contain a valid alias configuration\r\n[1]     resolve as module\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-pyroscope-datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\node_modules doesn't exist or is not a directory\r\n[1]       looking for modules in C:\\Program Files\\Grafana Git\\grafana\\node_modules\r\n[1]         single file module\r\n[1]           using description file: C:\\Program Files\\Grafana Git\\grafana\\package.json (relative path: .\/node_modules\/module.ts)\r\n[1]             no extension\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]             .ts\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.ts doesn't exist\r\n[1]             .tsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.tsx doesn't exist\r\n[1]             .js\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.js doesn't exist\r\n[1]             .jsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.jsx doesn't exist\r\n[1]         C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]       C:\\Program Files\\Grafana Git\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\node_modules doesn't exist or is not a directory\r\n[1]\r\n[1] webpack 5.90.3 compiled with 1 error in 1223 ms\r\n[1]\r\n[1] > @grafana-plugins\/grafana-testdata-datasource:build\r\n[1] \r\n[1] assets by status 40.6 KiB [cached] 7 assets\r\n[1]\r\n[1] ERROR in module\r\n[1] Module not found: Error: Can't resolve 'module.tsx' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-testdata-datasource'\r\n[1] Did you mean '.\/module.tsx'?\r\n[1] Requests that should resolve in the current directory need to start with '.\/'.\r\n[1] Requests that start with a name are treated as module requests and resolve within module directories (node_modules).\r\n[1] If changing the source code is not an option there is also a resolve options called 'preferRelative' which tries to resolve these kind of requests \r\nin the current directory too.\r\n[1] resolve 'module.tsx' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-testdata-datasource'\r\n[1]   Parsed request is a module\r\n[1]   using description file: C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-testdata-datasource\\package.json (relative path: .)\r\n[1]     Field 'browser' doesn't contain a valid alias configuration\r\n[1]     resolve as module\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\grafana-testdata-datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\node_modules doesn't exist or is not a directory\r\n[1]       looking for modules in C:\\Program Files\\Grafana Git\\grafana\\node_modules\r\n[1]         single file module\r\n[1]           using description file: C:\\Program Files\\Grafana Git\\grafana\\package.json (relative path: .\/node_modules\/module.tsx)\r\n[1]             no extension\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx doesn't exist\r\n[1]             .ts\r\n46% building 2\/3 entries 15600\/19177 dependencies 2992\/4771 modules[1]               Field 'browser' doesn't contain a valid alias configuration       \r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx.ts doesn't exist\r\n[1]             .tsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx.tsx doesn't exist\r\n[1]             .js\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx.js doesn't exist\r\n[1]             .jsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx.jsx doesn't exist\r\n[1]         C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.tsx doesn't exist\r\n[1]       C:\\Program Files\\Grafana Git\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\node_modules doesn't exist or is not a directory\r\n[1]\r\n[1] webpack 5.90.3 compiled with 1 error in 1510 ms\r\n[1]\r\n[1] > @grafana-plugins\/stackdriver:build\r\n[1]\r\n[1] assets by status 345 KiB [cached] 21 assets\r\n[1]\r\n[1] ERROR in module\r\n[1] Module not found: Error: Can't resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\cloud-monitoring'\r\n[1] Did you mean '.\/module.ts'?\r\n[1] Requests that should resolve in the current directory need to start with '.\/'.\r\n[1] Requests that start with a name are treated as module requests and resolve within module directories (node_modules).\r\n[1] If changing the source code is not an option there is also a resolve options called 'preferRelative' which tries to resolve these kind of requests \r\nin the current directory too.\r\n[1] resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\cloud-monitoring'\r\n[1]   Parsed request is a module\r\n[1]   using description file: C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\cloud-monitoring\\package.json (relative path: .)      \r\n[1]     Field 'browser' doesn't contain a valid alias configuration\r\n[1]     resolve as module\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\cloud-monitoring\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\node_modules doesn't exist or is not a directory\r\n[1]       looking for modules in C:\\Program Files\\Grafana Git\\grafana\\node_modules\r\n[1]         single file module\r\n[1]           using description file: C:\\Program Files\\Grafana Git\\grafana\\package.json (relative path: .\/node_modules\/module.ts)\r\n[1]             no extension\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]             .ts\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.ts doesn't exist\r\n[1]             .tsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.tsx doesn't exist\r\n[1]             .js\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.js doesn't exist\r\n[1]             .jsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.jsx doesn't exist\r\n[1]         C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]       C:\\Program Files\\Grafana Git\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\node_modules doesn't exist or is not a directory\r\n[1]\r\n[1] webpack 5.90.3 compiled with 1 error in 1400 ms\r\n[1] \r\n[1] > @grafana-plugins\/grafana-azure-monitor-datasource:build\r\n[1]\r\n[1] assets by status 3.06 MiB [cached] 35 assets\r\n[1]\r\n[1] ERROR in module\r\n[1] Module not found: Error: Can't resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\azuremonitor'\r\n[1] Did you mean '.\/module.ts'?\r\n[1] Requests that should resolve in the current directory need to start with '.\/'.\r\n[1] Requests that start with a name are treated as module requests and resolve within module directories (node_modules).\r\n[1] If changing the source code is not an option there is also a resolve options called 'preferRelative' which tries to resolve these kind of requests \r\nin the current directory too.\r\n[1] resolve 'module.ts' in 'C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\azuremonitor'\r\n[1]   Parsed request is a module\r\n[1]   using description file: C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\azuremonitor\\package.json (relative path: .)\r\n[1]     Field 'browser' doesn't contain a valid alias configuration\r\n[1]     resolve as module\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\azuremonitor\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\datasource\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\plugins\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\app\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\Grafana Git\\grafana\\public\\node_modules doesn't exist or is not a directory\r\n[1]       looking for modules in C:\\Program Files\\Grafana Git\\grafana\\node_modules\r\n[1]         single file module\r\n[1]           using description file: C:\\Program Files\\Grafana Git\\grafana\\package.json (relative path: .\/node_modules\/module.ts)\r\n[1]             no extension\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]             .ts\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.ts doesn't exist\r\n[1]             .tsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.tsx doesn't exist\r\n[1]             .js\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.js doesn't exist\r\n[1]             .jsx\r\n[1]               Field 'browser' doesn't contain a valid alias configuration\r\n[1]               C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts.jsx doesn't exist\r\n[1]         C:\\Program Files\\Grafana Git\\grafana\\node_modules\\module.ts doesn't exist\r\n[1]       C:\\Program Files\\Grafana Git\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\Program Files\\node_modules doesn't exist or is not a directory\r\n[1]       C:\\node_modules doesn't exist or is not a directory\r\n[1]\r\n[1] webpack 5.90.3 compiled with 1 error in 1053 ms\r\n[1]\r\n[1]\r\n[1]\r\n[1]  >  Lerna (powered by Nx)   Running target build for 7 projects failed\r\n[1] \r\n[1]    Tasks not run because their dependencies failed or --nx-bail=true:\r\n[1]\r\n[1]    - @grafana-plugins\/parca:build\r\n[1]    - @grafana-plugins\/tempo:build\r\n[1]    - @grafana-plugins\/zipkin:build\r\n[1]\r\n[1]    Failed tasks:\r\n[1]\r\n[1]    - @grafana-plugins\/grafana-pyroscope-datasource:build\r\n[1]    - @grafana-plugins\/grafana-testdata-datasource:build\r\n[1]    - @grafana-plugins\/stackdriver:build\r\n[1]    - @grafana-plugins\/grafana-azure-monitor-datasource:build\r\n[1]\r\n46% building 2\/3 entries 17400\/19177 dependencies 3251\/5649 modulesJob [1], 'yarn prebuild' has ended\r\nassets by status 101 MiB [cached] 254 assets\r\nasset assets-manifest.json 198 KiB [compared for emit]\r\nEntrypoint app 34.5 MiB (36.1 MiB) = runtime~app.7701bdc16676eeef6427.js 30.9 KiB app.e848eda977734c2ad941.js 34.5 MiB 3 auxiliary assets\r\nEntrypoint dark 265 KiB (5.05 KiB) = runtime~dark.17b4d1c541b0624fca31.js 5.44 KiB grafana.dark.fc9f82d8c2c8e77332d0.css 259 KiB dark.e4e24240d951421c7246.js 638 bytes 2 auxiliary assets\r\nEntrypoint light 264 KiB (5.05 KiB) = runtime~light.6e52bb965b366de4b171.js 5.44 KiB grafana.light.63c4f73c0bd4a96d3cba.css 258 KiB light.d1e24f88fea01ef0f016.js 642 bytes 2 auxiliary assets\r\ncached modules 68.6 MiB (javascript) 505 KiB (css\/mini-extract) 72.3 KiB (asset) 43.2 KiB (runtime) [cached] 10352 modules\r\norphan modules 499 KiB [orphan] 2 modules\r\njavascript modules 100 bytes\r\n  .\/public\/sass\/grafana.dark.scss 50 bytes [built]\r\n  .\/public\/sass\/grafana.light.scss 50 bytes [built]\r\nwebpack 5.90.3 compiled successfully in 51530 ms\r\nType-checking in progress...\r\nassets by status 101 MiB [cached] 254 assets\r\nasset assets-manifest.json 198 KiB [emitted]\r\nEntrypoint app 34.5 MiB (36.1 MiB) = runtime~app.7701bdc16676eeef6427.js 30.9 KiB app.e848eda977734c2ad941.js 34.5 MiB 3 auxiliary assets\r\nEntrypoint dark 265 KiB (5.05 KiB) = runtime~dark.17b4d1c541b0624fca31.js 5.44 KiB grafana.dark.fc9f82d8c2c8e77332d0.css 259 KiB dark.e4e24240d951421c7246.js 638 bytes 2 auxiliary assets\r\nEntrypoint light 264 KiB (5.05 KiB) = runtime~light.6e52bb965b366de4b171.js 5.44 KiB grafana.light.63c4f73c0bd4a96d3cba.css 258 KiB light.d1e24f88fea01ef0f016.js 642 bytes 2 auxiliary assets\r\ncached modules 68.5 MiB (javascript) 505 KiB (css\/mini-extract) 72.3 KiB (asset) 41.4 KiB (runtime) [cached] 10323 modules\r\njavascript modules 39.7 KiB\r\n  cacheable modules 37.1 KiB\r\n    modules by path .\/public\/app\/plugins\/ 22.8 KiB\r\n      modules by path .\/public\/app\/plugins\/datasource\/ 9.5 KiB 7 modules\r\n      modules by path .\/public\/app\/plugins\/panel\/ 13.3 KiB 4 modules\r\n    modules by path .\/public\/app\/features\/ 13.9 KiB\r\n      .\/public\/app\/features\/geo\/editor\/locationEditor.ts 1.77 KiB [built]\r\n      .\/public\/app\/features\/canvas\/runtime\/frame.tsx 7.26 KiB [built]\r\n      .\/public\/app\/features\/canvas\/index.ts 140 bytes [built]\r\n      .\/public\/app\/features\/canvas\/elements\/button.tsx 4.75 KiB [built]\r\n    .\/public\/app\/core\/components\/Layers\/AddLayerButton.tsx 349 bytes [built]\r\n  .\/public\/app\/ sync extensions\\\/index.ts 160 bytes [built]\r\n  .\/public\/app\/ sync \\.html$ 2.49 KiB [built]\r\nwebpack 5.90.3 compiled successfully in 33277 ms\r\nType-checking in progress...\r\nNo errors found.\r\nassets by status 101 MiB [cached] 254 assets\r\nasset assets-manifest.json 198 KiB [emitted]\r\nEntrypoint app 34.5 MiB (36.1 MiB) = runtime~app.7701bdc16676eeef6427.js 30.9 KiB app.e848eda977734c2ad941.js 34.5 MiB 3 auxiliary assets\r\nEntrypoint dark 265 KiB (5.05 KiB) = runtime~dark.17b4d1c541b0624fca31.js 5.44 KiB grafana.dark.fc9f82d8c2c8e77332d0.css 259 KiB dark.e4e24240d951421c7246.js 638 bytes 2 auxiliary assets\r\nEntrypoint light 264 KiB (5.05 KiB) = runtime~light.6e52bb965b366de4b171.js 5.44 KiB grafana.light.63c4f73c0bd4a96d3cba.css 258 KiB light.d1e24f88fea01ef0f016.js 642 bytes 2 auxiliary assets\r\ncached modules 68.6 MiB (javascript) 505 KiB (css\/mini-extract) 72.3 KiB (asset) 41.4 KiB (runtime) [cached] 10339 modules\r\njavascript modules 2.64 KiB\r\n  .\/public\/app\/ sync extensions\\\/index.ts 160 bytes [built]\r\n  .\/public\/app\/ sync \\.html$ 2.49 KiB [built]\r\nwebpack 5.90.3 compiled successfully in 8243 ms\r\nNo errors found.\r\n\r\nversion information:\r\nnode - 18.12.0\r\nnpm - 8.19.2\r\nyarn - 4.1.1\r\ngo - 1.22.1 windows\/amd64\r\ngcc - (tdm64-1) 10.3.0\r\n\r\nAny Help will be much appreciated.","comments":["It's also a compilation error https:\/\/github.com\/grafana\/grafana\/issues\/84967\r\n```\r\ngo run build.go build  \r\n\r\nVersion: 10.3.4, Linux Version: 10.3.4, Package Iteration: 1711090828\r\nbuilding binaries build\r\nbuilding grafana .\/pkg\/cmd\/grafana\r\nrm -r .\/bin\/windows-amd64\/grafana.exe\r\nrm -r .\/bin\/windows-amd64\/grafana.exe.md5\r\ngo build -ldflags -w -X main.version=10.3.4 -X main.commit=5bde27379c -X main.buildstamp=1709675391 -X main.buildBranch=HEAD -buildmode=exe -o .\/bin\/windows-amd64\/grafana.exe .\/pkg\/cmd\/grafana\r\n# github.com\/grafana\/grafana\/pkg\/server\r\npkg\\server\\service.go:31:15: undefined: Initialize\r\nexit status 1\r\nexit status 1\r\n\r\n```\r\nI've been stuck here, I don't know where the problem lies\r\n\r\nversion information:\r\nnode - 18.16.1\r\nyarn - 4.0.0\r\ngo - go version go1.21.0 windows\/amd64\r\ngcc - gcc version 13.2.0 (GCC)\r\n\r\n","@Aayush19909 \r\nhttps:\/\/github.com\/grafana\/grafana\/pull\/84709 Fixed"],"labels":["internal"]},{"title":"Timeseries: Need \"Use right y-axis\" toggle shortcut that used to be on Graph (old)","body":"**Why is this needed**:\r\nThe deprecated Graph panel used to have a right y-axis placement toggle shortcut when you click on the legend icon, and this used to be an extra tab next to the color selecting tabs. However, this feature was removed in the Timeseries panel, and moved to the override selection in the panel editor. This feature went from 3 clicks on the dashboard level, to 11 clicks for adding each override. My team does a lot of new dashboards & panels creation, in addition to having multiple channels\/measurements on each graph, and we need to be able to quickly switch measurements between the left & right y-axis placements during critical tests. \r\n\r\n![image (1)](https:\/\/github.com\/grafana\/grafana\/assets\/162646309\/fc2ebf98-7bed-4a56-a6b5-4a197dbb0611)\r\n![311830760-4c2d0448-b177-4f7d-9d25-03baa61b5530](https:\/\/github.com\/grafana\/grafana\/assets\/162646309\/c0f31623-3e0e-4d7a-86e0-0fbf05ff48d0)\r\n\r\n\r\n**What would you like to be added**:\r\nWe want to add back the \"Use right y-axis\" toggle feature when clicking the legend series icon, which used to exist on the old Graph panel. We want to be able to quickly edit the y-axis placement and alignment for multiple panels with many measurements on each panel.\r\n\r\n\r\n**Who is this feature for?**\r\nUsers who need to quickly switch the y-axis placement for each timeseries line.\r\n","comments":["we've had TimeSeries as the default viz for several years now, and afaik this is the first time anyone even noticed that this setting was removed. i think few people know that color menu exists and fewer still know that the y-axis setting was there.\r\n\r\ni think this is not a common enough need that we should bring it back, but we can leave this open to collect feedback for a while.","In that case, how would you recommend we add this feature? Is there some sort of custom legend plugin? Or any other way of adding some version of this feature back (being able to add overrides from the UI on the dashboard level)? Are there any upcoming updates similar to this feature? This is a really critical feature for us.","a few things...\r\n\r\nthis has zero chance of getting into v11 since our code freeze is March 22, then beta releases, testing, and fixes until official v11. if this is mission-critical, you'll have to hang back on latest 10.x for a while.\r\n\r\nas far as i know panel plugins are all-or-nothing. there's no plugin for modifying just the legend of an existing panel.\r\n\r\nif you self-host grafana, you can probably add this option yourselves to the core panels and make yourselves a grafana build with those modifictions. we can probably provide some guidance where the code changes would need to go. keep in mind that we're about to start work on a new legend re-architecture, so there will likely be breaking changes in the next few months that might make your additions incompatible unless you keep up.\r\n\r\nsince there are hundreds of possible field overrides (and growing every day), we dont know if we want to be in the business of dictating which are going to end up as shortcuts in the legend menu. any kind of popularity contest will surely end up in an endless bikeshed and disappoint the 49%. to that effect i think it would be interesting to add some kind of user customization for selecting which overrides they want to surface in the legend or even as panel toggles. that is a much deeper discussion we're not going to touch until well after v11, perhaps v12.\r\n\r\ni am curious what kind of workflow relies on this as a critical feature. it would surely help to see a screen rec or more detailed description of this so we can better understand the need, and maybe even provide a better, more holistic approach.","it's possible that we settle on some nested context menu and\/or search\/autocomplete that exposes all overrides. there's a lot to decide in terms of ui\/ux here. but it's def on our radar for the legends work.","Hi @leeoniya , thanks for taking the time to read our issue. I am one of the leads on our Data Platform team here at Relativity Space, so I should be able to give you a bit more context on your ask:\r\n\r\n>i am curious what kind of workflow relies on this as a critical feature. it would surely help to see a screen rec or more detailed description of this so we can better understand the need, and maybe even provide a better, more holistic approach.\r\n\r\nUnfortunately due to ITAR concerns, we won't be able to share a screen recording. However, I can give you a high level overview of what we do with Grafana internally and how this feature is used. My team owns a product internally that gives users a way to view live data that is being generated by various hardware systems at our company. A core piece of this workflow currently is the ability to tweak dashboards quickly and effectively. Our users use the Y-Axis toggle to quickly move streams of data onto a different axis to more easily visually compare data streams with different magnitudes. \r\n\r\nI imagine that most Grafana users are building a dashboard once and then rarely if ever making modifications (we do the same thing for our internal application metric monitoring dashboards). For those use cases, the extra 3-4 clicks it takes to go to the series override panel is not super important. However, for our use cases those clicks take extra time that our users have expressed frustration with due to their interactive and iterative workflows.\r\n\r\nObviously we understand that this is slightly different from the typical Grafana use case, but this is the context in which our internal users are missing this feature.\r\n","hey @bauerm97 \r\n\r\nthanks for the additional context\r\n\r\n> Our users use the Y-Axis toggle to quickly move streams of data onto a different axis to more easily visually compare data streams with different magnitudes.\r\n\r\ni figured it was something along these lines. have you considered using a permanent log or symlog y axis for this purpose? that would eliminate the need to manually move series onto different axes, and in fact makes them _easier_ to compare. if you have considered or tried this, what were the reasons for not using this?"],"labels":["type\/feature-request","area\/panel\/timeseries","area\/legend"]},{"title":"Newly duplicated panel cannot be edited","body":"\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/2376619\/00d162a9-5106-4363-aaf5-b00b2e0938ff\r\n\r\n","comments":[],"labels":["type\/bug","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"Logs: Infinite scrolling to show 10k+ results freezes browser","body":"During user interview we've learned, that user sometimes scrolls-scrolls-scrolls. And in a case they go trough 10k+ log lines, browzer freezes for them and they have to restart it. ","comments":[],"labels":["area\/logs","internal","interview-generated"]},{"title":"Dashboard can be saved with add-library-panel panel","body":"One can save dashboard with add libtary panel widget:\r\n\r\n<img width=\"2088\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/2376619\/ab901472-cf54-4c17-aeb0-45491187de84\">\r\n","comments":["Is this not desired? Same happens in old arch."],"labels":["type\/bug","area\/scenes","team\/grafana-dashboards"]},{"title":"Removing a panel within a row results in broken layout","body":"```\r\nUncaught Error: Unsupported grid item type\r\n    at gridItemToPanel (transformSceneToSaveModel.ts:215:11)\r\n    at transformSceneToSaveModel.ts:439:57\r\n    at Array.map (<anonymous>)\r\n    at gridRowToSaveModel (transformSceneToSaveModel.ts:439:46)\r\n    at transformSceneToSaveModel (transformSceneToSaveModel.ts:75:9)\r\n    at DashboardSceneChangeTracker.detectChanges (DashboardSceneChangeTracker.ts:78:41)\r\n    at DashboardSceneChangeTracker.onStateChanged (DashboardSceneChangeTracker.ts:48:12)\r\n    at ConsumerObserver.next (Subscriber.js:96:1)\r\n    at Subscriber._next (Subscriber.js:63:1)\r\n    at Subscriber.next (Subscriber.js:34:1)\r\n```\r\n\r\nSee the attached video.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/2376619\/cf0fb6eb-20da-4da1-8c41-9108ca62283c\r\n\r\n","comments":[],"labels":["type\/bug","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"SaveDashboardForm: Remove deprecated Form usage","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nRemove deprecated Form component usage from `SaveDashboardForm`. \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nPart of https:\/\/github.com\/grafana\/grafana\/issues\/81226\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["this form will soon be removed, the scenes version is not using deprecated Form https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/features\/dashboard-scene\/saving\/SaveDashboardForm.tsx \r\n\r\nso question is is worth updating it now? ","> this form will soon be removed, the scenes version is not using deprecated Form https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/features\/dashboard-scene\/saving\/SaveDashboardForm.tsx \n> \n> so question is is worth updating it now? \n\nIt's a relatively minor change so I think we'd just do it. This is one of the two PRs left to eliminate Form usage from grafana\/UI before v11 release."],"labels":["area\/frontend","no-changelog"]},{"title":"TLS enabled memcached Feature flag","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n-->\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n<!--\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n\r\n-->\r\n\r\nDraft PR for testing purposes. ","comments":[],"labels":["area\/backend","area\/frontend","no-backport"]},{"title":"Feature toggle in Managed Azure Grafana - version 10.3.3","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nHi! currently I can't find any option to turn on or off feature toggle's in Azure Managed Grafana, is this even possible? or is this feature locked behind enterprise. \r\nhttps:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/configure-grafana\/feature-toggles\/\r\n\r\nCurrently, I can't find any option or documentation regarding this subject for Azure Managed Grafana.\r\n\r\n**What would you like to be added**:\r\n\r\nDocumentation regarding feature toggle for Azure Managed Grafana.\r\n\r\n\r\n**Who is this feature for?**\r\n\r\nFeature toggle.\r\n","comments":["Hi @Altforlett,\r\n\r\nThanks for opening this issue.\r\n\r\nI am not an expert for the Azure managed grafana but if you can tell us how exactly you are running Grafana i.e. in a Docker Env or K8s or just a VM in Azure env?"],"labels":["needs more info"]},{"title":"Plugin Extensions: Add admin page","body":"> [!NOTE]  \r\n> This PR is currently in development.\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/9974811\/b3080d04-63fa-442d-a5fc-6043b9955be9\r\n\r\n","comments":[],"labels":["area\/backend","area\/frontend"]},{"title":"Repeated panels do not work as expected within a row","body":"Trying to create a repeated panel, either library or normal, within a row does not work properly. This affects other flows, like duplication.\r\n\r\nHow to repro in various situations:\r\n- Normal panels\r\n  - Add a new viz\r\n  - Create a row so that this viz is under the new row\r\n  - Go to panel edit and add a variable repeat\r\n  - The panel does not get repeated\r\n- Library panels\r\n  - Add a new library panel widget\r\n  - Create a row so that the widget is under the row\r\n  - Select a library panel that is repeated from the widget\r\n  - The repetition is not applied\r\n- When trying to duplicate a library repeated panel within a row\r\n  - Add a library panel widget\r\n  - Select a repeated panel\r\n  - There should be a PanelRepeaterGridItem now with that library panel\r\n  - Add a row so that the repeated lib panel is under it\r\n  - Duplicate that repeated lib panel\r\n  - It does not duplicate correctly\r\n\r\n\r\n","comments":["@mdvictor please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","@mdvictor not sure if you have noticed that or not, but it seems like the panel repeat options are not being applied. Other panel options are working just fine. ","> @mdvictor not sure if you have noticed that or not, but it seems like the panel repeat options are not being applied. Other panel options are working just fine.\r\n\r\nIndeed, should've mentioned in the issue, thank you pointing it out!\r\n"],"labels":["type\/bug","area\/dashboard","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"postgres: add support for configurable limit on max-response-size","body":"currently, if the sql query returns a lot of data, this can cause the datasource-plugin to consume essentially unlimited amounts of memory. there should be a configure way to say for example \"if the postgres response is larger than 1 megabyte, return an error\".\r\n\r\nwe could connect this to https:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/configure-grafana\/#response_limit , this should be easily doable when https:\/\/github.com\/grafana\/grafana\/pull\/83915 is merged.\r\n\r\nlook at https:\/\/github.com\/jackc\/pgx\/pull\/1839 for ideas about how to do this with `pgx`.","comments":["For whoever picks this up, if you have further questions pls message me \ud83d\udc4d "],"labels":["kind\/enhancement","internal"]},{"title":"DashboardScene: Support time region migrations","body":"* [x]\u00a0Support time region migrations in scenes\r\n* [x] Unit test \r\n\r\nDepends on scenes fix https:\/\/github.com\/grafana\/scenes\/pull\/638 \r\n\r\nTODO (Requires fix in separate PR, which is why this is in draft)\r\n\r\n* [ ] When adding new annotations they need to be added after AlertStates data layers or otherwise the editing index 1 will throw error.  Want to fix this is in separate PR as I think we should rethink\/rewrite SceneDataLayers a bit. \r\n* [ ] SceneDataLayers needs to support adding new layers, we cannot call activate like this https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/features\/dashboard-scene\/settings\/AnnotationsEditView.tsx#L89 ","comments":[],"labels":["area\/frontend","area\/panel\/timeseries"]},{"title":"Update .gitignore","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/not_signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84145) <br\/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84145) before we can accept your contribution.<br\/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https:\/\/cla-assistant.io\/check\/grafana\/grafana?pullRequest=84145) it.<\/sub>"],"labels":["pr\/external"]},{"title":"Docs: Change Angular text references to AngularJS","body":"**What is this feature?**\r\nupdating docs - Grafana is deprecating AngularJS \r\n\r\nAngularJS support has officially ended as of January 2022 \r\nVisit [angular.io](https:\/\/angular.io\/) for the actively supported Angular.\r\n\r\n**Why do we need this feature?**\r\nto remove any ambiguity: AngularJS vs Angular\r\n\r\n**Who is this feature for?**\r\nanyone who read the docs \r\n\r\n**Which issue(s) does this PR fix?**:\r\nDocument reference to a particular library's name: AngularJS\r\nwhich is very different to Angular (Web Development framework)\r\n\r\n\r\nFixes #\r\nupdate library name reference in docs.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/not_signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84141) <br\/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84141) before we can accept your contribution.<br\/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https:\/\/cla-assistant.io\/check\/grafana\/grafana?pullRequest=84141) it.<\/sub>","I think we need a technical review though. I'll add another reviewer"],"labels":["type\/docs","pr\/external","no-changelog"]},{"title":"Update dependency cypress to v13.7.1","body":"[![Mend Renovate](https:\/\/app.renovatebot.com\/images\/banner.svg)](https:\/\/renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Change | Age | Adoption | Passing | Confidence |\n|---|---|---|---|---|---|\n| [cypress](https:\/\/cypress.io) ([source](https:\/\/togithub.com\/cypress-io\/cypress)) | [`13.1.0` -> `13.7.1`](https:\/\/renovatebot.com\/diffs\/npm\/cypress\/13.1.0\/13.7.1) | [![age](https:\/\/developer.mend.io\/api\/mc\/badges\/age\/npm\/cypress\/13.7.1?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![adoption](https:\/\/developer.mend.io\/api\/mc\/badges\/adoption\/npm\/cypress\/13.7.1?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![passing](https:\/\/developer.mend.io\/api\/mc\/badges\/compatibility\/npm\/cypress\/13.1.0\/13.7.1?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) | [![confidence](https:\/\/developer.mend.io\/api\/mc\/badges\/confidence\/npm\/cypress\/13.1.0\/13.7.1?slim=true)](https:\/\/docs.renovatebot.com\/merge-confidence\/) |\n\n---\n\n> [!WARNING]\n> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.\n\n---\n\n### Release Notes\n\n<details>\n<summary>cypress-io\/cypress (cypress)<\/summary>\n\n### [`v13.7.1`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.7.1)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.7.0...v13.7.1)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-7-1\n\n### [`v13.7.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.7.0)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.6...v13.7.0)\n\nChangelog: <https:\/\/docs.cypress.io\/guides\/references\/changelog#13-7-0>\n\n### [`v13.6.6`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.6)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.5...v13.6.6)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-6\n\n### [`v13.6.5`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.5)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.4...v13.6.5)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-5\n\n### [`v13.6.4`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.4)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.3...v13.6.4)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-4\n\n### [`v13.6.3`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.3)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.2...v13.6.3)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-3\n\n### [`v13.6.2`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.2)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.1...v13.6.2)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-2\n\n### [`v13.6.1`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.1)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.6.0...v13.6.1)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-1\n\n### [`v13.6.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.6.0)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.5.1...v13.6.0)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-6-0\n\n### [`v13.5.1`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.5.1)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.5.0...v13.5.1)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-5-1\n\n### [`v13.5.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.5.0): v.13.5.0\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.4.0...v13.5.0)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-5-0\n\n### [`v13.4.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.4.0)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.3.3...v13.4.0)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-4-0\n\n### [`v13.3.3`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.3.3)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.3.2...v13.3.3)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-3-3\n\n### [`v13.3.2`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.3.2)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.3.1...v13.3.2)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-3-2\n\n### [`v13.3.1`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.3.1)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.3.0...v13.3.1)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-3-1\n\n### [`v13.3.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.3.0)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.2.0...v13.3.0)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-3-0\n\n### [`v13.2.0`](https:\/\/togithub.com\/cypress-io\/cypress\/releases\/tag\/v13.2.0)\n\n[Compare Source](https:\/\/togithub.com\/cypress-io\/cypress\/compare\/v13.1.0...v13.2.0)\n\nChangelog: https:\/\/docs.cypress.io\/guides\/references\/changelog#13-2-0\n\n<\/details>\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase\/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase\/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https:\/\/www.mend.io\/free-developer-tools\/renovate\/). View repository job log [here](https:\/\/developer.mend.io\/github\/grafana\/grafana).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4yMzAuMCIsInVwZGF0ZWRJblZlciI6IjM3LjI2MS4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->\n","comments":[],"labels":["area\/frontend","dependencies","no-changelog"]},{"title":"VizTooltips: Consider moving Duration to header","body":"with `newVizTooltips` we synchronized the Heatmap tooltip with StateTimeline tooltips (which already showed Duration). however, it's not clear that Duration is the x time interval in a heatmap, especially since they are commonly used to view latencies, which are \"durations\" on the y axis. one proposal from @hairyhenderson was to move the heatmap cell Duration to the header: `2024-03-05 12:40:30 - (15s)`\r\n\r\ncurrently:\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/43234\/e7212f4c-021c-4e28-892e-49e5dcc83392)","comments":[],"labels":["area\/panel\/heatmap","area\/tooltip","internal"]},{"title":"Alerting: Add size checks on text messages for the Telegram notifier","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAs described on issue #83412, sending text-based Telegram notifications won't work when the message body becomes too large. We believe this was caused by the lack of size checks when constructing the message to be sent when leveraging the `sendMessage` API endpoint instead of `sendPhoto`. This PR includes size checks for the former case so that alerts do get sent even if they're a bit too large.\r\n\r\n**Why do we need this feature?**\r\n\r\nAs seen on issue #83412, if the resulting alert message when using `sendMessage` (i.e. when calling `buildMessageLinkedImage`) exceeded Telegram's maximum message size it wouldn't be sent at all. This would blindside the recipients of the alerts, as it would seem as if no alerts where being generated...\r\n\r\nEven if the alert message that's sent is not complete, the reception of a message will alert admins so that they can investigate further and inquire so as to what's triggering the alerts. In other words, the notification will serve the purpose of, well, notifying people in charge of reacting to abnormal conditions.\r\n\r\n**Who is this feature for?**\r\n\r\nEveryone using Telegram as an alerting channel in their Grafana instances.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #83412\r\n\r\n**Special notes for your reviewer:**\r\nAccording to https:\/\/limits.tginfo.me\/en, the message size limit sits at 4096 UTF-8 characters, so we have enforced that limit when constructing the message to be sent out. What's more, we have also added tests to check this condition is met when the message payload is too large.\r\n\r\nThe strategy to shorten the message is the same as the one followed by existing logic related to the `sendPhoto` flow: the message will be truncated to the maximum size and any data that's appended to it must fit within the known limit.\r\n\r\nTests have been updated to exercise the new implementation in a fashion that's backwards-compatible with existing methods.\r\n\r\nShould any issues exist or should any improvements be carried out we would be delighted to work on it. Thanks a ton for your time and for making Grafana!\r\n","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84137) <br\/>All committers have signed the CLA.","Hi @yuri-tceretian! Thanks a ton for the update: I had no idea... I looked at the new implementation and it looks great \ud83d\ude3c. Thanks for taking the time to look over the code \ud83d\ude38"],"labels":["area\/backend","pr\/external"]},{"title":"Tool tip scroll does not work in 10.4.0","body":"### What happened?\n\nI've tested Grafana 10.4.0 with ```GF_FEATURE_TOGGLES_ENABLE=newVizTooltips``` but the tool tip scroll does not show\r\n![Screenshot_20240310_103106](https:\/\/github.com\/grafana\/grafana\/assets\/2118079\/3d92c4e0-5052-4576-a52f-6f24da1d179c)\r\n\r\nRelates to #82177\n\n### What did you expect to happen?\n\nA scroll bar should be pressent\n\n### Did this work before?\n\nno\n\n### How do we reproduce it?\n\n1. run grafana 10.4.0 \r\n2. Add a time series panel with metrics with many series\r\n3.\r\n\n\n### Is the bug inside a dashboard panel?\n\nBody is too long to add it here\n\n### Environment (with versions)?\n\nGrafana: 10.4.0\r\nOS: Docker\r\nBrowser: chrome\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":["it should become scrollable once you anchor it by clicking. otherwise, how do you expect to scroll it when you cannot hover into it?\r\n\r\nalso, i should mention that there have been quite a few changes to `newVizTooltips` since 10.4. i would recommend trying the latest nightly: https:\/\/grafana.com\/grafana\/download\/nightly?edition=oss"],"labels":["area\/tooltip"]},{"title":"Chore: upgrade go-sql-driver\/mysql","body":"**What is this feature?**\r\n\r\nUpgrades github.com\/go-sql-driver\/mysql\r\n\r\n**Why do we need this feature?**\r\n\r\n10 months of fixes and compatibility improvements\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["@diegommm @undef1nd @suntala I'm happy to rebase and fix up the go.mod conflicts. Is this something you're willing to accept? We're stuck on 9.x until this lands"],"labels":["area\/backend","pr\/external"]},{"title":"Storage: Drop-in poller replacement using postgress notify\/listen","body":"This demonstrates how we can use some of the same infrastructure from #83772 in a simpler way, just replacing poller while using all the existing broadcaster infrastructure.\r\n\r\nThere are plenty of rough edges to be smoothed out, but it's functional.","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84129) <br\/>All committers have signed the CLA.","I like the approach, borrowing into https:\/\/github.com\/grafana\/grafana\/pull\/83772","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166045\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/backend","area\/backend\/db\/migration"]},{"title":"InfluxDB: Have maxDataPoints input for flux variable queries","body":"We calculate the maxDataPoints based on the panel size. For the variables there is no panel size so we cannot calculate the maxDataPoints. We use a default value https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/services\/query\/query.go#L324\n\nFor flux we have an enforcer https:\/\/github.com\/grafana\/grafana\/blob\/main\/pkg\/tsdb\/influxdb\/flux\/executor.go#L32-L33\nSo it ends up as 1000.\n\nFor some cases users might need more than 1000 points. So we will give that option to users by adding maxDataPoints input in VariableEditor. In order to support maxDataPoints we need `CustomVariableSupport`. Loki might be a good example how we can add that support https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/plugins\/datasource\/loki\/components\/VariableQueryEditor.tsx","comments":[],"labels":["type\/feature-request","datasource\/InfluxDB"]},{"title":"Prometheus: Support gzip header for prometheus api","body":"issue:\r\nhttps:\/\/github.com\/grafana\/grafana\/issues\/84116","comments":["[![CLA assistant check](https:\/\/cla-assistant.io\/pull\/badge\/signed)](https:\/\/cla-assistant.io\/grafana\/grafana?pullRequest=84115) <br\/>All committers have signed the CLA.","hello?","> hello?\r\n\r\nHello @wanghaao \ud83d\udc4b \r\nThanks for the contribution.\r\nThere is a global setting already for gzip. I don't think this is necessary. \r\nhttps:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/configure-grafana\/#enable_gzip","> > hello?\r\n> \r\n> Hello @wanghaao \ud83d\udc4b Thanks for the contribution. There is a global setting already for gzip. I don't think this is necessary. https:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/configure-grafana\/#enable_gzip\r\n\r\n@itsmylife Thanks for your answer.\r\n\r\n\"enable_gzip\" must be set in the initial stage, but I only need to add a custom \"gzip\" header in DataSource.\r\n![grafana\u622a\u56fe](https:\/\/github.com\/grafana\/grafana\/assets\/24750785\/e983704a-e43a-48c4-b801-946c85a99d4e)\r\n","There are a couple of things going on here, the config setting controls whether grafana itself gzips its responses, not anything to do with datasource requests afaik.\r\n\r\nThat said, golang http client should handle gzipped responses transparently https:\/\/pkg.go.dev\/net\/http#Response so this code needs to be checked to make sure it's not duplicating or conflicting with internal golang behavior.\r\n\r\nCan you provide any more details about the specific scenario you're trying to fix? Ideally details of what you have configured, what the expected behavior is, and what you are seeing?"],"labels":["datasource\/Prometheus","area\/backend","pr\/external"]},{"title":"Option to change font size in State timeline","body":"**Why is this needed**:\r\n\r\nIn certain screen sizes the State timeline panel needs to have the option to change font sizes so it's visible. \r\n\r\nHere we can see an example:\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/30987258\/c502694d-3cc6-49a7-85bb-36549952d9ab)\r\n\r\n\r\nIn other panels, is it possible to change the size with CSS, but in this case, as this is a canvas, is not possible for us.\r\n\r\n**What would you like to be added**:\r\n\r\nTo have the option to change font sizes\r\n","comments":[],"labels":["type\/feature-request","area\/panel\/state-timeline"]},{"title":"Dashboards: Share button should not be so prominent in toolbar","body":"### What happened?\n\nThe new blue \"Share\" button added in https:\/\/github.com\/grafana\/grafana\/issues\/77298 \/ https:\/\/github.com\/grafana\/grafana\/issues\/72741 is distracting. The prominent placement and color suggests it is the primary action in the toolbar, which I'd imagine is not aligned with real-world user expectations in nearly all cases.\r\n\r\nFor non-public use, sharing a dashboard or panel has always been as simple as copy\/pasting the URL. If I wanted to do something fancy like preserving the data in a snapshot, I was happy to spend a couple extra seconds to find and open the sharing modal.\r\n\r\nI realize this may conflict with your goal to increase adoption, but the addition of the button feels like a step in the wrong direction and negatively affects user experience.\r\n\r\nBased on the screenshots in the PR and design spec (and also perhaps the only real use case), it seems like maybe this was intended to be used only on public dashboards, so I am filing this as a bug.\n\n### What did you expect to happen?\n\nThe share button would not be displayed so prominently.\n\n### Did this work before?\n\nIn previous versions it was a transparent icon that did not distract from the primary purpose of Grafana.\n\n### How do we reproduce it?\n\n1. Upgrade Grafana to 10.4.0\r\n2. View any dashboard\r\n3. Get distracted by the blue share button\r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana:\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nA package manager (APT, YUM, BREW, etc.)\n\n### Datasource(s)?\n\n_No response_","comments":["+1. Before 10.4.0 the tiny 'Share' icon was as its place. Starting from 10.4.0 this bright blue button is definetly distracting and looks like alien","I feel the same way."],"labels":["area\/frontend","area\/ux","team\/grafana-dashboards"]},{"title":"Alerting docs: add `Template variable interpolation` section in file provisioning","body":"Closes https:\/\/github.com\/grafana\/grafana\/issues\/71007. Relates to https:\/\/github.com\/grafana\/grafana\/issues\/71006\r\n\r\n- How to interpolate environment variables in your alerting provisioning files.\r\n- How to avoid interpolation using $$.\r\n- Which fields are interpolated and which aren't. (ex. Labels are interpolated but Annotations aren't)","comments":["This PR must be merged before a backport PR will be created.","This PR must be merged before a backport PR will be created."],"labels":["type\/docs","area\/alerting","no-changelog","backport v10.4.x"]},{"title":"AngularMigration: Allow dashboard by dashboard migration","body":"This PR allows to do the Angular migration dashboard by dashboard and removes the confusion from the initial approach - where the feature flag would migrate all dashboards until the next page refresh, so the user could end up with broken dashboards without the ability to see how the dashboard was looking before.\r\n\r\nThe URL feature flags are treated as strings and are bypassing the previous implementation. I'm expecting to revert to that functionality after we're done with the migrations.\r\n\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/88068998\/94dbf4f4-1d73-496e-a4ac-8720c832bcfb\r\n\r\n\r\n\r\n\r\n\r\n**Special notes for your reviewer:**\r\n- Know issue -> after saving a dashboard the revert banner will persist until refresh. I believe we can fix this in a follow-up, as the user is instructed to save and refresh the dashboard to persist the migration.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["Both links above take you gete.\r\n\r\n![Screenshot_20240318-033731_Chrome](https:\/\/github.com\/grafana\/grafana\/assets\/900951\/cf34a1e8-027f-4ccd-b932-1d11f6ff15c4)\r\n","@nmarrs the gdev dashboard is migrating fine for me \ud83e\udd14 ","> @nmarrs the gdev dashboard is migrating fine for me \ud83e\udd14\r\n\r\nI will re-review later today - maybe all the things I hard coded for testing was messing things up \ud83d\ude05 "],"labels":["area\/dashboard","type\/angular-2-react","area\/frontend","no-backport","no-changelog"]},{"title":"More accessible panel\/visualization descriptions for screen readers","body":"Each chart would be good to have a description such as \u201cline chart with 4 lines\u201d, \u201cValue Chart with a single value\u201d that a screen reader is the only thing picking up that text to read in the header of each card.\r\n\r\n**Steps to reproduce**:\r\n\r\n**Actual Result**:\r\n\r\n**Expected Result**\r\n\r\n**Relevant WCAG Criteria:** [#.#.# WCAG Criterion](link to https:\/\/www.w3.org\/WAI\/WCAG21\/quickref\/?versions=2.0)\r\n\r\n**Environment**:\r\n- Grafana version:\r\n- Data source type & version:\r\n- User OS & Browser:\r\n- Others:\r\n","comments":["@imatwawana please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/accessibility","internal"]},{"title":"Feature request: Ability to edit line thickness in dashboards globally per user","body":"Without needing to go edit each line chart, a quick on dashboard OR a preference per user to increase the line from the default size 1 to a 3 or user\u2019s choice.\r\n\r\n**Steps to reproduce**:\r\n\r\n**Actual Result**:\r\n\r\n**Expected Result**\r\n\r\n**Relevant WCAG Criteria:** [#.#.# WCAG Criterion](link to https:\/\/www.w3.org\/WAI\/WCAG21\/quickref\/?versions=2.0)\r\n\r\n**Environment**:\r\n- Grafana version:\r\n- Data source type & version:\r\n- User OS & Browser:\r\n- Others:\r\n","comments":["@imatwawana please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/accessibility","internal"]},{"title":"Tables can't be ready properly by JAWS","body":"If you go to the \u201cmore\u201d (vertical ellipsis) of a chart (line chart for example) Click Explore and you\u2019ll see a Table with date\/time and a count.  Convert to be an actual table for screen reader navigation.  Within JAWS for example crtl+alt+arrows should navigate cells and read just the contents of the cell.  The way it is now the it\u2019s read as 1 line i.e. it\u2019ll read the date\/time and number value making it not possible to navigate for a value and only then read the date\/time.\r\n\r\n**Steps to reproduce**:\r\n\r\n**Actual Result**:\r\n\r\n**Expected Result**\r\n\r\n**Relevant WCAG Criteria:** [#.#.# WCAG Criterion](link to https:\/\/www.w3.org\/WAI\/WCAG21\/quickref\/?versions=2.0)\r\n\r\n**Environment**:\r\n- Grafana version:\r\n- Data source type & version:\r\n- User OS & Browser:\r\n- Others:\r\n","comments":["@imatwawana please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/accessibility","internal"]},{"title":"Grafana in Windows 11 Contrast Themes doesn't work well","body":"In Windows Settings turn on a Contrast Theme for a dark background with light text\/elements in the foreground.  Then use MS Edge and a Grafana dashboard or generally browsing Grafana notice that some charts lines don\u2019t appear visible at contrast levels.  Also in various places on the site I recall checkboxes that can\u2019t be seen.\r\n\r\n**Steps to reproduce**:\r\n\r\n**Actual Result**:\r\n\r\n**Expected Result**\r\n\r\n**Relevant WCAG Criteria:** [#.#.# WCAG Criterion](link to https:\/\/www.w3.org\/WAI\/WCAG21\/quickref\/?versions=2.0)\r\n\r\n**Environment**:\r\n- Grafana version:\r\n- Data source type & version:\r\n- User OS & Browser: Windows 11 & MS Edge\r\n- Others:\r\n","comments":["@imatwawana please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["type\/accessibility","internal"]},{"title":"Chore: Add golangci-lint depgaurd rules for sub-modules","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nThis adds `depgaurd` rules to prevent importing of `github.com\/grafana\/grafana` in submodules.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo make sure sub-modules are properly decoupled from core grafana.\r\n\r\n**Who is this feature for?**\r\n\r\n@grafana\/grafana-app-platform-squad \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["When I run `make golangci-lint` I got following errors. And I don't see backend-linting has run in for this PR. \r\n\r\n<details><summary>Error message<\/summary>\r\n\r\n```\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/resource.go:4:2: import 'k8s.io\/apimachinery\/pkg\/api\/errors' is not allowed from list 'apimachinery' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/api\/errors\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/resource.go:5:2: import 'k8s.io\/apimachinery\/pkg\/apis\/meta\/v1' is not allowed from list 'apimachinery' (depguard)\r\n        metav1 \"k8s.io\/apimachinery\/pkg\/apis\/meta\/v1\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/resource.go:6:2: import 'k8s.io\/apimachinery\/pkg\/runtime' is not allowed from list 'apimachinery' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/resource.go:7:2: import 'k8s.io\/apimachinery\/pkg\/runtime\/schema' is not allowed from list 'apimachinery' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\/schema\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/unstructured.go:4:2: import 'encoding\/json' is not allowed from list 'apimachinery' (depguard)\r\n        \"encoding\/json\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/unstructured.go:6:2: import 'k8s.io\/apimachinery\/pkg\/apis\/meta\/v1\/unstructured' is not allowed from list 'apimachinery' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/apis\/meta\/v1\/unstructured\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/unstructured.go:7:2: import 'k8s.io\/apimachinery\/pkg\/runtime' is not allowed from list 'apimachinery' (depguard)\r\n        runtime \"k8s.io\/apimachinery\/pkg\/runtime\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/unstructured.go:8:2: import 'k8s.io\/kube-openapi\/pkg\/common' is not allowed from list 'apimachinery' (depguard)\r\n        openapi \"k8s.io\/kube-openapi\/pkg\/common\"\r\n        ^\r\npkg\/apimachinery\/apis\/common\/v0alpha1\/unstructured.go:9:2: import 'k8s.io\/kube-openapi\/pkg\/validation\/spec' is not allowed from list 'apimachinery' (depguard)\r\n        spec \"k8s.io\/kube-openapi\/pkg\/validation\/spec\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:4:2: import 'net\/http' is not allowed from list 'apiserver' (depguard)\r\n        \"net\/http\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:6:2: import 'k8s.io\/apimachinery\/pkg\/runtime' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:7:2: import 'k8s.io\/apimachinery\/pkg\/runtime\/schema' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\/schema\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:8:2: import 'k8s.io\/apimachinery\/pkg\/runtime\/serializer' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\/serializer\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:9:2: import 'k8s.io\/apiserver\/pkg\/authorization\/authorizer' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apiserver\/pkg\/authorization\/authorizer\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:10:2: import 'k8s.io\/apiserver\/pkg\/registry\/generic' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apiserver\/pkg\/registry\/generic\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:11:2: import 'k8s.io\/apiserver\/pkg\/server' is not allowed from list 'apiserver' (depguard)\r\n        genericapiserver \"k8s.io\/apiserver\/pkg\/server\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:12:2: import 'k8s.io\/kube-openapi\/pkg\/common' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/kube-openapi\/pkg\/common\"\r\n        ^\r\npkg\/apiserver\/builder\/common.go:13:2: import 'k8s.io\/kube-openapi\/pkg\/spec3' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/kube-openapi\/pkg\/spec3\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:4:2: import 'fmt' is not allowed from list 'apiserver' (depguard)\r\n        \"fmt\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:5:2: import 'net\/http' is not allowed from list 'apiserver' (depguard)\r\n        \"net\/http\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:6:2: import 'runtime' is not allowed from list 'apiserver' (depguard)\r\n        goruntime \"runtime\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:7:2: import 'runtime\/debug' is not allowed from list 'apiserver' (depguard)\r\n        \"runtime\/debug\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:8:2: import 'strconv' is not allowed from list 'apiserver' (depguard)\r\n        \"strconv\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:9:2: import 'strings' is not allowed from list 'apiserver' (depguard)\r\n        \"strings\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:10:2: import 'time' is not allowed from list 'apiserver' (depguard)\r\n        \"time\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:12:2: import 'golang.org\/x\/mod\/semver' is not allowed from list 'apiserver' (depguard)\r\n        \"golang.org\/x\/mod\/semver\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:13:2: import 'k8s.io\/apimachinery\/pkg\/apis\/meta\/v1' is not allowed from list 'apiserver' (depguard)\r\n        metav1 \"k8s.io\/apimachinery\/pkg\/apis\/meta\/v1\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:14:2: import 'k8s.io\/apimachinery\/pkg\/runtime' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:15:2: import 'k8s.io\/apimachinery\/pkg\/runtime\/serializer' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/runtime\/serializer\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:16:2: import 'k8s.io\/apimachinery\/pkg\/version' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apimachinery\/pkg\/version\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:17:2: import 'k8s.io\/apiserver\/pkg\/endpoints\/openapi' is not allowed from list 'apiserver' (depguard)\r\n        openapinamer \"k8s.io\/apiserver\/pkg\/endpoints\/openapi\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:18:2: import 'k8s.io\/apiserver\/pkg\/registry\/generic' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apiserver\/pkg\/registry\/generic\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:19:2: import 'k8s.io\/apiserver\/pkg\/server' is not allowed from list 'apiserver' (depguard)\r\n        genericapiserver \"k8s.io\/apiserver\/pkg\/server\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:20:2: import 'k8s.io\/apiserver\/pkg\/util\/openapi' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/apiserver\/pkg\/util\/openapi\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:21:2: import 'k8s.io\/client-go\/kubernetes\/scheme' is not allowed from list 'apiserver' (depguard)\r\n        k8sscheme \"k8s.io\/client-go\/kubernetes\/scheme\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:22:2: import 'k8s.io\/kube-openapi\/pkg\/common' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/kube-openapi\/pkg\/common\"\r\n        ^\r\npkg\/apiserver\/builder\/helper.go:24:2: import 'github.com\/grafana\/grafana\/pkg\/apiserver\/endpoints\/filters' is not allowed from list 'apiserver': apiserver is not allowed to import grafana core (depguard)\r\n        \"github.com\/grafana\/grafana\/pkg\/apiserver\/endpoints\/filters\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:4:2: import 'maps' is not allowed from list 'apiserver' (depguard)\r\n        \"maps\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:5:2: import 'strings' is not allowed from list 'apiserver' (depguard)\r\n        \"strings\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:7:2: import 'github.com\/grafana\/grafana-plugin-sdk-go\/experimental\/apis\/data\/v0alpha1' is not allowed from list 'apiserver': apiserver is not allowed to import grafana core (depguard)\r\n        data \"github.com\/grafana\/grafana-plugin-sdk-go\/experimental\/apis\/data\/v0alpha1\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:8:2: import 'k8s.io\/kube-openapi\/pkg\/common' is not allowed from list 'apiserver' (depguard)\r\n        common \"k8s.io\/kube-openapi\/pkg\/common\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:9:2: import 'k8s.io\/kube-openapi\/pkg\/spec3' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/kube-openapi\/pkg\/spec3\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:10:2: import 'k8s.io\/kube-openapi\/pkg\/validation\/spec' is not allowed from list 'apiserver' (depguard)\r\n        spec \"k8s.io\/kube-openapi\/pkg\/validation\/spec\"\r\n        ^\r\npkg\/apiserver\/builder\/openapi.go:12:2: import 'github.com\/grafana\/grafana\/pkg\/apimachinery\/apis\/common\/v0alpha1' is not allowed from list 'apiserver': apiserver is not allowed to import grafana core (depguard)\r\n        \"github.com\/grafana\/grafana\/pkg\/apimachinery\/apis\/common\/v0alpha1\"\r\n        ^\r\npkg\/apiserver\/builder\/request_handler.go:4:2: import 'fmt' is not allowed from list 'apiserver' (depguard)\r\n        \"fmt\"\r\n        ^\r\npkg\/apiserver\/builder\/request_handler.go:5:2: import 'net\/http' is not allowed from list 'apiserver' (depguard)\r\n        \"net\/http\"\r\n        ^\r\npkg\/apiserver\/builder\/request_handler.go:7:2: import 'github.com\/gorilla\/mux' is not allowed from list 'apiserver' (depguard)\r\n        \"github.com\/gorilla\/mux\"\r\n        ^\r\npkg\/apiserver\/builder\/request_handler.go:8:2: import 'k8s.io\/client-go\/rest' is not allowed from list 'apiserver' (depguard)\r\n        restclient \"k8s.io\/client-go\/rest\"\r\n        ^\r\npkg\/apiserver\/builder\/request_handler.go:9:2: import 'k8s.io\/kube-openapi\/pkg\/spec3' is not allowed from list 'apiserver' (depguard)\r\n        \"k8s.io\/kube-openapi\/pkg\/spec3\"\r\n        ^\r\npkg\/apiserver\/registry\/generic\/strategy.go:4:2: import 'context' is not allowed from list 'apiserver' (depguard)\r\n        \"context\"\r\n        ^\r\nmake: *** [golangci-lint] Error 1\r\n\r\n```\r\n<\/details>"],"labels":["no-backport","no-changelog"]},{"title":"Chore: Upgrade golangci-lint to v1.56.2","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nUpdates golangci-lint to [v1.56.2](https:\/\/github.com\/golangci\/golangci-lint\/releases\/tag\/v1.56.2)\r\n\r\n**Why do we need this feature?**\r\n\r\nThis is needed to support checks of sub-modules with the latest release of [depgaurd](https:\/\/github.com\/golangci\/golangci-lint\/pull\/4207)\r\n\r\n**Who is this feature for?**\r\n\r\n@grafana\/grafana-app-platform-squad \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["I have an up-to-date, error-free PR https:\/\/github.com\/grafana\/grafana\/pull\/84998\r\nDo you mind reviewing it?"],"labels":["no-backport","no-changelog"]},{"title":"Automatically add mandatory labels to group_by in rule's notification settings","body":null,"comments":["@yuri-tceretian please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["internal"]},{"title":"Dashboards: With new dashboard, prompt to save dashboard missing","body":"### What happened?\n\nFrom creating a new dashboard and editing it without saving, navigating away via a data link does not prompt to save.\n\n### What did you expect to happen?\n\nAny sort of navigating away from an unsaved change in a dashboard should have a prompt to save.\n\n### Did this work before?\n\nNot sure.\n\n### How do we reproduce it?\n\n1. Create a new dashboard, and add a visualization\r\n2. From the panel edit page, select the table panel\r\n3. Select a tempo datasource and get it so trace links show up on the table\r\n4. Either via \"Apply\" or the breadcrumbs, navigate to the dashboard without saving\r\n5. Click a trace link\r\n\r\nIt will navigate to the trace link without prompting to save.\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: Cloud\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nI use Grafana Cloud\n\n### Datasource(s)?\n\n_No response_","comments":["Is this a bug or a feature proposal?","IMO a bug - when you navigate away from edited dashboards in other ways you get the pop up asking if you want to leave the page, which would be the feature, the bug is that it's not showing in certain circumstances, and to help with the prioritisation, this is more likely to affect onboarding users than existing users, so there's onboarding friction here, which is not a good thing."],"labels":["type\/bug","area\/dashboard","team\/grafana-dashboards"]},{"title":"Dashboards: 'Dashboard has been updated by another session' is shown in error","body":"### What happened?\n\nThe Grafana UI is generating errors and toasts indicating that another user has updated a dashboard, but only one user is logged in, and in a single browser window.\r\n\r\nI have witnessed this in two places:\r\n\r\n- When editing a panel, a pop-up is randomly occasionally displayed which says \"This dashboard has been updated by another session\" (see screenshot)\r\n\r\n- When viewing a dashboard, the dashboard reloads and a green toast message appears to say \"Dashboard updated\".\r\n\r\nIn both instances, the actual content of the dashboard has not visibly changed.\r\n\r\nThis behaviour was seen across multiple Grafana (Cloud) instances simultaneously.\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/1423165\/d6970f9f-f261-487e-a8e3-fece49763eb8)\r\n\n\n### What did you expect to happen?\n\nGrafana should not be receiving a message that a dashboard has been updated, because in the occurrences of this issue, there was only 1 user using Grafana at the time.\r\n\n\n### Did this work before?\n\nYes\n\n### How do we reproduce it?\n\nThis is definitely an intermittent issue :-) but this would be a way to reproduce it, if it does appear:\r\n\r\n1. Create a Grafana Cloud instance.\r\n2. Import a dashboard.\r\n3. Open the dashboard.\r\n4. Wait until the green toast message \"Dashboard updated\" is displayed.\r\n\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: Grafana v11.0.0-67746 (5f6bf93dd5)\r\nOS: Linux + various others\r\nBrowser: Firefox + various others\r\n\n\n### Grafana platform?\n\nI use Grafana Cloud\n\n### Datasource(s)?\n\n_No response_","comments":["@monodot please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:"],"labels":["area\/backend","area\/live","internal"]},{"title":"PoC: Create DS service per request","body":null,"comments":[],"labels":["area\/backend"]},{"title":"datatrails: hackathon 2024-03: plugin extensions prototype","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["Contains an early merge of this PR:\r\n- #84295"],"labels":["area\/frontend"]},{"title":"Expressions: Create json schema for query types","body":"(extracted from https:\/\/github.com\/grafana\/grafana\/pull\/82391)\r\n\r\nThis builds schemas for expression queries and saves them in a local file.  The schemas will be attached to the query service apiserver in another PR.\r\n\r\nIt is still unclear to me if including these files is useful or not:\r\n<img width=\"302\" alt=\"image\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/705951\/953ed2b7-541e-455e-8dc6-e9bc11e97516\">\r\nThe schemas target two different usages (in panels and in query) both require more properties to be useful as standalone schemas.  \r\n","comments":[],"labels":["area\/backend","area\/frontend","no-backport","area\/schema","no-changelog"]},{"title":"Dashboard - 'No Data' shown on PDF export when using Library Panel as a shared query","body":"This issue is coming from this [escalation](https:\/\/github.com\/grafana\/support-escalations\/issues\/9567)\r\n\r\n## Problem\r\n\r\nIn Grafana, it's possible to share query results across different panels using the Dashboard datasource ([documentation](https:\/\/grafana.com\/docs\/grafana\/latest\/panels-visualizations\/query-transform-data\/share-query\/)). However, in the scenario where a panel is using a Library Panel as a \"shared query\" the feature does not function as expected with PDF exports.\r\n[Ops Grafana Dashboard](https:\/\/ops.grafana-ops.net\/d\/bdeqypytrh4hsa)\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/239999\/5a6bd72e-738a-4f10-8bf5-6a47bdd12cf5)\r\n\r\n*Expected behavior*\r\nAll the panels should show data\r\n\r\n*Current behavior*\r\nAll the panels that depend on a shared query that originates from a library panel show \"no Data\"\r\n\r\n## Technical Notes\r\n\r\n##### *TL:DR*  During PDF export `Dashboard` Datasource does not support panels that are using Library Panel as a shared query.\r\n----- \r\nThe current issue can also be observed when viewing the \"shared query panel\" and refreshing the page. The \"view panel\" URL is currently being used for the \"PDF rendering\". \r\n\r\n<details>\r\n<summary>\ud83c\udfa6 Video Showing Current Behaviour on Panel View<\/summary>\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/239999\/dae91b50-b9ea-4e39-8b2c-ce2ce12b2710\r\n\r\n<\/details>\r\n\r\n### *Root Cause*\r\n\r\nSince Grafana 9.3 ([PR](https:\/\/github.com\/grafana\/grafana\/pull\/50560)), library panels load on the frontend side. A key change was that only the `name` and `uid` of the library panel are stored. Consequently, when a panel loads, it must make an HTTP call to the backend to retrieve the library panel information.\r\n\r\nChecking the code responsible for handling \"shared requests\" ([Dashboard Datasource code](https:\/\/github.com\/grafana\/grafana\/blob\/main\/public\/app\/plugins\/datasource\/dashboard\/runSharedRequest.ts#L37))  I saw there is no logic related to source panels dependent on library panels. As a result, when attempting to view a panel using a Library Panel as a shared query (using the URL directly), the necessary call to fetch data from the library panel is not made. \r\n\r\n#### Why PDF report is broken?\r\n\r\nGenerating a PDF involves the image renderer taking a screenshot of a standalone panel (the view panel URL), which for this scenario is showing \"No Data\"\r\n\r\n*This issue is also present on dashboards rendered by the Scenes Library*.\r\n\r\n####  Workaround for PDF Reporting\r\n\r\nThe only method to ensure PDF data is generated without encountering the \"No Data\" issue is to unlink the library panel from the dashboard.\r\n\r\n\r\n\r\n\r\n\r\n","comments":[],"labels":["area\/frontend\/library-panels","internal","team\/grafana-dashboards"]},{"title":"Bump go.opentelemetry.io\/collector\/pdata from 1.0.1 to 1.3.0","body":"Bumps [go.opentelemetry.io\/collector\/pdata](https:\/\/github.com\/open-telemetry\/opentelemetry-collector) from 1.0.1 to 1.3.0.\n<details>\n<summary>Release notes<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/releases\">go.opentelemetry.io\/collector\/pdata's releases<\/a>.<\/em><\/p>\n<blockquote>\n<h2>v1.2.0\/v0.95.0<\/h2>\n<h3>Images and binaries here: <a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector-releases\/releases\/tag\/v0.95.0\">https:\/\/github.com\/open-telemetry\/opentelemetry-collector-releases\/releases\/tag\/v0.95.0<\/a><\/h3>\n<h2>End User Changelog<\/h2>\n<h3>\ud83d\uded1 Breaking changes \ud83d\uded1<\/h3>\n<ul>\n<li><code>all<\/code>: scope name for all generated Meter\/Tracer funcs now includes full package name (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9494\">#9494<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udca1 Enhancements \ud83d\udca1<\/h3>\n<ul>\n<li><code>confighttp<\/code>: Adds support for Snappy decompression of HTTP requests. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/7632\">#7632<\/a>)<\/li>\n<li><code>configretry<\/code>: Validate <code>max_elapsed_time<\/code>, ensure it is larger than <code>max_interval<\/code> and <code>initial_interval<\/code> respectively. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9489\">#9489<\/a>)<\/li>\n<li><code>configopaque<\/code>: Mark module as stable (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9167\">#9167<\/a>)<\/li>\n<li><code>otlphttpexporter<\/code>: Add support for json content encoding when exporting telemetry (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6945\">#6945<\/a>)<\/li>\n<li><code>confmap\/converter\/expandconverter, confmap\/provider\/envprovider, confmap\/provider\/fileprovider, confmap\/provider\/httprovider, confmap\/provider\/httpsprovider, confmap\/provider\/yamlprovider<\/code>: Split confmap.Converter and confmap.Provider implementation packages out of confmap. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/4759\">#4759<\/a>, <a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9460\">#9460<\/a>)<\/li>\n<\/ul>\n<h2>API Changelog<\/h2>\n<h3>\ud83d\uded1 Breaking changes \ud83d\uded1<\/h3>\n<ul>\n<li><code>all<\/code>: Bump minimum go version to go 1.21 (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9507\">#9507<\/a>)<\/li>\n<li><code>service\/telemetry<\/code>: Delete generated_config types, use go.opentelemetry.io\/contrib\/config types instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9546\">#9546<\/a>)<\/li>\n<li><code>configcompression<\/code>: Remove deprecated <code>configcompression<\/code> types, constants and methods. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9388\">#9388<\/a>)<\/li>\n<li><code>component<\/code>: Remove <code>host.ReportFatalError<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6344\">#6344<\/a>)<\/li>\n<li><code>configgrpc<\/code>: Remove deprecated <code>configgrpc.ServerConfig.ToListener<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9481\">#9481<\/a>)<\/li>\n<li><code>confmap<\/code>: Remove deprecated <code>confmap.WithErrorUnused<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9484\">#9484<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udea9 Deprecations \ud83d\udea9<\/h3>\n<ul>\n<li><code>confignet<\/code>: Deprecate <code>confignet.NetAddr<\/code> and <code>confignet.TCPAddr<\/code> in favor of <code>confignet.AddrConfig<\/code> and <code>confignet.TCPAddrConfig<\/code>. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9509\">#9509<\/a>)<\/li>\n<li><code>config\/configgrpc<\/code>: Deprecate <code>configgrpc.ClientConfig.SanitizedEndpoint<\/code>, <code>configgrpc.ServerConfig.ToListener<\/code> and <code>configgrpc.ServerConfig.ToListenerContext<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9481\">#9481<\/a>, <a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9482\">#9482<\/a>)<\/li>\n<li><code>scraperhelper<\/code>: Deprecate ScraperControllerSettings, use ControllerConfig instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/li>\n<\/ul>\n<h2>v1.1.0\/v0.94.0<\/h2>\n<h2>End User Changelog<\/h2>\n<h3>\ud83d\uded1 Breaking changes \ud83d\uded1<\/h3>\n<ul>\n<li><code>receiver\/otlp<\/code>: Update gRPC code from <code>codes.InvalidArgument<\/code> to <code>codes.Internal<\/code> when a permanent error doesn't contain a gRPC status (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9415\">#9415<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udea9 Deprecations \ud83d\udea9<\/h3>\n<ul>\n<li><code>configgrpc<\/code>: Deprecate GRPCClientSettings, use ClientConfig instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udca1 Enhancements \ud83d\udca1<\/h3>\n<ul>\n<li><code>mdatagen<\/code>: Add a generated test that checks the config struct using <code>componenttest.CheckConfigStruct<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9438\">#9438<\/a>)<\/li>\n<li><code>component<\/code>: Add <code>component.UseLocalHostAsDefaultHost<\/code> feature gate that changes default endpoints from 0.0.0.0 to localhost (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/8510\">#8510<\/a>)\nThe only component in this repository affected by this is the OTLP receiver.<\/li>\n<\/ul>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Changelog<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/blob\/main\/CHANGELOG-API.md\">go.opentelemetry.io\/collector\/pdata's changelog<\/a>.<\/em><\/p>\n<blockquote>\n<h2>v1.3.0\/v0.96.0<\/h2>\n<h3>\ud83d\udea9 Deprecations \ud83d\udea9<\/h3>\n<ul>\n<li><code>configgrpc<\/code>: Deprecates <code>ToServer<\/code>.  Use <code>ToServerContext<\/code> instead. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9624\">#9624<\/a>)<\/li>\n<li><code>component<\/code>: deprecate component.ErrNilNextConsumer (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9526\">#9526<\/a>)<\/li>\n<li><code>configtls<\/code>: Rename TLSClientSetting, TLSServerSetting, and TLSSetting based on the naming convention used in other config packages. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9474\">#9474<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udca1 Enhancements \ud83d\udca1<\/h3>\n<ul>\n<li><code>receivertest<\/code>: add support for metrics in contract checker (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9551\">#9551<\/a>)<\/li>\n<\/ul>\n<h2>v1.2.0\/v0.95.0<\/h2>\n<h3>\ud83d\uded1 Breaking changes \ud83d\uded1<\/h3>\n<ul>\n<li><code>all<\/code>: Bump minimum go version to go 1.21 (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9507\">#9507<\/a>)<\/li>\n<li><code>service\/telemetry<\/code>: Delete generated_config types, use go.opentelemetry.io\/contrib\/config types instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9546\">#9546<\/a>)<\/li>\n<li><code>configcompression<\/code>: Remove deprecated <code>configcompression<\/code> types, constants and methods. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9388\">#9388<\/a>)<\/li>\n<li><code>component<\/code>: Remove <code>host.ReportFatalError<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6344\">#6344<\/a>)<\/li>\n<li><code>configgrpc<\/code>: Remove deprecated <code>configgrpc.ServerConfig.ToListener<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9481\">#9481<\/a>)<\/li>\n<li><code>confmap<\/code>: Remove deprecated <code>confmap.WithErrorUnused<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9484\">#9484<\/a>)<\/li>\n<\/ul>\n<h3>\ud83d\udea9 Deprecations \ud83d\udea9<\/h3>\n<ul>\n<li><code>confignet<\/code>: Deprecate <code>confignet.NetAddr<\/code> and <code>confignet.TCPAddr<\/code> in favor of <code>confignet.AddrConfig<\/code> and <code>confignet.TCPAddrConfig<\/code>. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9509\">#9509<\/a>)<\/li>\n<li><code>config\/configgrpc<\/code>: Deprecate <code>configgrpc.ClientConfig.SanitizedEndpoint<\/code>, <code>configgrpc.ServerConfig.ToListener<\/code> and <code>configgrpc.ServerConfig.ToListenerContext<\/code> (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9481\">#9481<\/a>, <a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9482\">#9482<\/a>)<\/li>\n<li><code>scraperhelper<\/code>: Deprecate ScraperControllerSettings, use ControllerConfig instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/li>\n<\/ul>\n<h2>v1.1.0\/v0.94.0<\/h2>\n<h3>\ud83d\uded1 Breaking changes \ud83d\uded1<\/h3>\n<ul>\n<li>\n<p><code>confignet<\/code>: Remove deprecated <code>DialContext<\/code> and <code>ListenContext<\/code> functions (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9363\">#9363<\/a>)<\/p>\n<\/li>\n<li>\n<p><code>confmap\/converter\/expandconverter<\/code>: Add <code>confmap.ConverterSettings<\/code> argument to experimental <code>expandconverter.New<\/code> function. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/5615\">#5615<\/a>, <a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9162\">#9162<\/a>)<\/p>\n<ul>\n<li>The <code>confmap.ConverterSettings<\/code> struct currently has no fields. It will be used to pass a logger.<\/li>\n<\/ul>\n<\/li>\n<li>\n<p><code>component<\/code>: Remove deprecated funcs and types (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9283\">#9283<\/a>)<\/p>\n<\/li>\n<li>\n<p><code>otlpexporter<\/code>: Config struct is moving from embedding the deprecated GRPCClientSettings struct to using ClientConfig instead. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/p>\n<\/li>\n<li>\n<p><code>otlphttpexporter<\/code>: otlphttpexporter.Config embeds the struct confighttp.ClientConfig instead of confighttp.HTTPClientSettings (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/p>\n<\/li>\n<li>\n<p><code>otlpreceiver<\/code>: HTTPConfig struct is moving from embedding the deprecated ServerSettings struct to using HTTPServerConfig instead. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/p>\n<\/li>\n<li>\n<p><code>component<\/code>: Validate component.Type at creation and unmarshaling time. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9208\">#9208<\/a>)<\/p>\n<ul>\n<li>A component.Type must start with an ASCII alphabetic character and can only contain ASCII alphanumeric characters and '_'.<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<h3>\ud83d\udea9 Deprecations \ud83d\udea9<\/h3>\n<ul>\n<li><code>configcompressions<\/code>: Deprecate <code>IsCompressed<\/code>.  Use <code>CompressionType.IsCompressed instead<\/code> instead. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9435\">#9435<\/a>)<\/li>\n<li><code>configcompression<\/code>: Deprecate <code>CompressionType<\/code>, use <code>Type<\/code> instead. (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9416\">#9416<\/a>)<\/li>\n<li><code>confighttp<\/code>: Deprecate CORSSettings, use CORSConfig instead (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/6767\">#6767<\/a>)<\/li>\n<\/ul>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Commits<\/summary>\n<ul>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/af71d1d9bccce444eb71d57e1dceb3f41d52ce7f\"><code>af71d1d<\/code><\/a> [chore] Prepare release v1.3.0\/v0.96.0 (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9680\">#9680<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/409359f0f578355e98ba16c0c56c55aca7f08a4a\"><code>409359f<\/code><\/a> [chore] Fix prepare-release.yml (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9675\">#9675<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/2fa6df8ad7488db15daf9296f228487fdea78a52\"><code>2fa6df8<\/code><\/a> [configgrpc] Add <code>ToServerContext<\/code>  (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9624\">#9624<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/6affda628707970bfdb875036b72cbf3ff04e9cd\"><code>6affda6<\/code><\/a> [chore] fixes intendation issues in yaml file (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9668\">#9668<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/94b5951a3ec9526765bd631728d4f7fe12fad6bd\"><code>94b5951<\/code><\/a> [chore] validate version format to prepare-release workflow (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9409\">#9409<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/cb4c1d5eda667dd535aee1341e1ab738fd59c8fc\"><code>cb4c1d5<\/code><\/a> Update module google.golang.org\/grpc to v1.62.0 (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9650\">#9650<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/fb912b97c0e98b380f9ebf9e70e81ece23e3fdb2\"><code>fb912b9<\/code><\/a> Update github-actions deps (major) (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9426\">#9426<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/afcbe928f578d9f0b0ce7c66f5d4286dc53ff195\"><code>afcbe92<\/code><\/a> [chore] update codeboten affiliation (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9662\">#9662<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/c6c4c16d49d2897340a06224be1fbde54f37ecbf\"><code>c6c4c16<\/code><\/a> [chore] Remove or update mentions to spanmetrics processor (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9665\">#9665<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/commit\/df6f8fddccb93fa173235cc99e6d1da250a530cb\"><code>df6f8fd<\/code><\/a> [otelcol] Allow passing confmap.Providers to otelcol.Collector (<a href=\"https:\/\/redirect.github.com\/open-telemetry\/opentelemetry-collector\/issues\/9228\">#9228<\/a>)<\/li>\n<li>Additional commits viewable in <a href=\"https:\/\/github.com\/open-telemetry\/opentelemetry-collector\/compare\/pdata\/v1.0.1...pdata\/v1.3.0\">compare view<\/a><\/li>\n<\/ul>\n<\/details>\n<br \/>\n\n\n[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=go.opentelemetry.io\/collector\/pdata&package-manager=go_modules&previous-version=1.0.1&new-version=1.3.0)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["area\/backend","dependencies","go"]},{"title":"Grafana: Implement submitting and validating an access token in the onprem instance","body":"After the user enters their access token into the frontend and clicks submit:\n\n1. Access token is sent to the Grafana backend, e.g. POST \/api\/cloudmigrations\/token (`POST \/token`)\n\n### Implement\n#### Create migration\n**Method:** `POST`\n**Path:** `\/migration`\n**Request:**\n```json\n{\n\t\"authToken\": \"...\"\n}\n```\n**Response:**\n```json\n{\n\t\"id\": \"\",\n\t\"stack\": \"name of stack\"\n}\n```\n#### Update migration\n**Method:** `POST`\n**Path:** `\/migration\/:id`\n**Request:**\n```json\n{\n\t\"authToken\": \"...\"\n}\n```\n\n 2. Grafana backend makes a request to the Cloud Migration Service that includes the authorization token in the header. Refer to https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/699 for how to make this request\n\nToken as a request header `Authorization: Bearer $TOKEN`\n\nPOST to `\/api\/v1\/validate-key` CMS\n\nBase Url (make this configurable): https:\/\/grafana.com\/cloud-migrations\/\n\n3. Upon receiving a successful status code from this call, the token should be stored in the cloud_migrations table as an encrypted secret\n\nDoD:\n\n- [ ] User submits token and gets back ok message or error\n- [ ] Fake the submission to CMS, just assume \"ok\" response\n- [ ] Store token in the database with \"ok\" response\n\n================","comments":["Depends on cloud_migrations table being in place\n\nNeed to determine what the URL will actually be for CMS from outside our clusters. ","@mmandrus please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","Dependencies are: \n\n- https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/659\n- https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/670\n- https:\/\/github.com\/grafana\/grafana-operator-experience-squad\/issues\/689\n\nIf there are any issues with these, @leandro-deveikis has some suggestions for workarounds for testing"],"labels":["area\/backend","team\/operator-experience","internal"]},{"title":"chore(deps): upgrade Faro to v1.4.2","body":"<!--\n\nThank you for sending a pull request! Here are some tips:\n\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\n\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\n\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\n\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\n\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\n\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\n\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\n\n-->\n\n**What is this feature?**\n\nUpgrade Faro to v 1.4.2\n\n**Why do we need this feature?**\n\nNewest features and fixes\n\n**Who is this feature for?**\n\nDevs and SREs\n\n**Which issue(s) does this PR fix?**:\n\n<!--\n\n- Automatically closes linked issue when the Pull Request is merged.\n\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\n\n-->\n\nFixes #\n\n**Special notes for your reviewer:**\n\nPlease check that:\n- [ ] It works as expected from a user's perspective.\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\n","comments":[],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"LibraryPanelRBAC: Fix issue with importing dashboards containing library panels","body":"Fixes an issue where users couldn't import dashboards containing library panels if the libraryPanelRBAC feature flag was enabled.\r\n\r\nWhen we're importing a dashboard containing library panels, we first check if we already have any library panels in the DB with the same UID as those in the dashboard we're importing. If it doesn't exist, a `404` is returned from the server, but if any other error code is returned, an error is thrown.\r\nPart of the issue was the line\r\n```\r\nentities.Get(\"\/:uid\", authorize(ac.EvalPermission(ActionLibraryPanelsRead, uidScope)), routing.Wrap(l.getHandler))\r\n```\r\nin libraryelements\/api.go.\r\nIf `EvalPermission` fails it always causes a `403` to be returned, when what we want is a `404`.\r\nTo fix this behavior, I've changed it so we change the line to\r\n```\r\nentities.Get(\"\/:uid\", authorize(ac.EvalPermission(ActionLibraryPanelsRead)), routing.Wrap(l.getHandler))\r\n```\r\nand add the logic for returning the correct error code to the get handler.\r\n\r\nUnfortunately that alone isn't enough as it sort of introduces another issue when we try to access a library panel we don't have permission for, returning a `404` instead of a `403`.\r\nThis is because the `getLibraryElements` function in libraryelements\/database.go has some logic to filter out library panels the requesting user doesn't have permission for. But that means we can't tell from the result whether the library panel just doesn't exist, or if we don't have permissions for it.\r\nTo fix this, I've made that particular piece of logic run only if we _don't_ have libraryPanelRBAC enabled.","comments":[],"labels":["type\/bug","area\/backend","add to changelog","area\/frontend\/library-panels"]},{"title":"@grafana\/data: Add enableStandardOptions parameter for panel plugin ","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\n\r\nCurrently, to disable standard options need to add them to array in the panel configuration like that\r\n```\r\nconst plugin = new PanelPlugin<PanelOptions>(Panel)\r\n  .useFieldConfig({\r\n    disableStandardOptions: [\r\n      FieldConfigProperty.Unit,\r\n      FieldConfigProperty.Color,\r\n      FieldConfigProperty.Min,\r\n      FieldConfigProperty.Max,\r\n      FieldConfigProperty.Decimals,\r\n      FieldConfigProperty.DisplayName,\r\n      FieldConfigProperty.NoValue,\r\n      FieldConfigProperty.Links,\r\n      FieldConfigProperty.Mappings,\r\n      'unitScale' as never,\r\n      'fieldMinMax' as never,\r\n    ],\r\n  })\r\n```\r\n\r\nThe current approach forces the plugin developers to keep the list is up to date. Instead of that it would be more convenient to have a whitelist with enabled standard options instead of disabling.\r\n\r\n\r\n**What would you like to be added**:\r\n\r\nA new parameter which enables only passed options which is more convenient and does't require the plugin developers to follow on the parameters updates\r\n\r\n```\r\nconst plugin = new PanelPlugin<PanelOptions>(Panel)\r\n  .useFieldConfig({\r\n    enableStandardOptions: [], \/\/ disable all standard options\r\n  })\r\n```\r\n\r\n\r\n**Who is this feature for?**\r\n\r\nPlugin developers\r\n","comments":[],"labels":["type\/feature-request","area\/plugins"]},{"title":"Grafana UI: Cannot interact with form elements using standard testing libraries","body":"### What happened?\n\nTesting libraries such as React testing lib and Playwright test suggest writing tests based on user-visible behaviour rather than relying on implementation details such as element order, function names etc. When interacting with form controls, it's considered good practice to query them by the associated label ([getByLabel](https:\/\/playwright.dev\/docs\/api\/class-framelocator#frame-locator-get-by-label) (Playwright) and [getByLabelTest](https:\/\/testing-library.com\/docs\/queries\/bylabeltext#api) (React testing lib). For some of our form components, these methods are not working as expected. \r\n\r\nForm components such as `Switch`, `Checkbox`, `RadioButtonGroup`, `Input` and `Select` are rarely used on their own. They're often wrapped inside `InlineField` or `Field` and that's when querying by label seem to be broken in most cases. I think there may be different reasons for that, and possibly multiple issues at the same time. But I think one of the issues is that we're using both for\/htmlFor relationship between label\/form **and** `aria-label` (read more about different approached [here](https:\/\/testing-library.com\/docs\/queries\/bylabeltext#api)). We should choose one of the two approaches and stick to that. \r\n\r\nHere are some examples where it doesn't work. \r\n\r\n```ts\r\n<InlineField label=\"Inline field with switch\">\r\n  <InlineSwitch\r\n    value={booleanValue}\r\n    onChange={(event) => setBooleanValue(event.currentTarget.checked)}\r\n    id=\"inline-field-with-switch\"\r\n  \/>\r\n<\/InlineField>\r\n\r\n<InlineField label=\"Inline field with checkbox\">\r\n  <Checkbox\r\n    id=\"inline-field-with-checkbox\"\r\n    value={booleanValue}\r\n    onChange={(event) => setBooleanValue(event.currentTarget.checked)}\r\n  \/>\r\n<\/InlineField>\r\n\r\n<InlineField label=\"Inline field with select\">\r\n  <Select\r\n    value={stringValue}\r\n    options={values}\r\n    onChange={(values) => setStringValue(values.value!)}\r\n    id=\"inline-field-with-select\"\r\n  \/>\r\n<\/InlineField>\r\n```\r\n\r\n\n\n### What did you expect to happen?\n\nInteracting with form elements using standard testing lib apis to work\n\n### Did this work before?\n\nDon't think so\n\n### How do we reproduce it?\n\nSee examples above. Also FWIW, have pushed some [example](https:\/\/github.com\/grafana\/grafana\/commit\/b4ace6caacc9ab75511bfedd8f810af4b0d3de1b) forms components along with Playwright tests that I expect to work to a remote branch.\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana:\r\nOS:\r\nBrowser:\r\n\n\n### Grafana platform?\n\nNone\n\n### Datasource(s)?\n\n_No response_","comments":["Thanks for reporting this! I think this is more of an issue with specific components (unless you have specific examples where this doesn't work with `Input` or `TextArea`) than form elements in general:\r\n- Testing `Select` is [a bit different](https:\/\/github.com\/grafana\/grafana\/blob\/401265522e584e4e71a1d92d5af311564b1ec33e\/contribute\/style-guides\/testing.md#testing-select-components) as it requires using `inputId` instead of `id` to properly associate it. \r\n- `InlineSwitch` has a `label` inside, which messes up the association when used inside `Field`, which provides own label and association. We had a PR from an external contributor related to that, but I don't remember what happened to it.\r\n- `CheckBox` has the same issue because it's also wrapped in a label of its own. \r\n\r\nTo sum up, I see issues with two specific components that should be fixed, which narrows the scope. Feel free to provide examples for other components. We also have some recommendations for [writing tests with a11y in mind](https:\/\/github.com\/grafana\/grafana\/blob\/401265522e584e4e71a1d92d5af311564b1ec33e\/contribute\/style-guides\/accessibility.md), which is related to this. ","@sunker please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","Great, thanks for quick feedback @Clarity-89. Yes this could very well be an issue with just these two components, thanks for clarifying. Is addressing these issues something you're planning to work on anytime soon? ","> Great, thanks for quick feedback @Clarity-89. Yes this could very well be an issue with just these two components, thanks for clarifying. Is addressing these issues something you're planning to work on anytime soon?\r\n\r\nI'll need to see how much effort it requires, as I remember making the changes was breaking layout in many cases. Meanwhile I think you'd be able to work around the issues by either omitting the label in the Field or overriding `htmlFor` there not to match the id of the Checkbox\/Switch.  ",">I'll need to see how much effort it requires, as I remember making the changes was breaking layout in many cases. Meanwhile I think you'd be able to work around the issues by either omitting the label in the Field or overriding htmlFor there not to match the id of the Checkbox\/Switch.\r\n\r\nMaybe I'm missing some thing, but I couldn't get that to work. Would you be able to share an example? For the InlineSwitch, I could get the following to work:\r\n```ts\r\n<InlineField label=\"Inline field with switch\">\r\n  <InlineSwitch\r\n    label=\"Inline field with switch\"\r\n    value={booleanValue}\r\n    onChange={(event) => setBooleanValue(event.currentTarget.checked)}\r\n  \/>\r\n<\/InlineField>\r\n\/\/in my test\r\ngetByLabel('Inline field with switch').uncheck();\r\n```\r\n\r\nUsing `getByRole` would be equally as fine (or even better) ofc. ","It seems like the example for the `InlineSwitch` you have is the best one. For the checkbox I was able to get the following to work by omitting the checkbox label:\r\n```tsx\r\n<InlineField label=\"Inline field with checkbox\">\r\n  <Checkbox\r\n    id=\"inline-field-with-checkbox\"\r\n    value={booleanValue}\r\n    onChange={(event) => setBooleanValue(event.currentTarget.checked)}\r\n  \/>\r\n<\/InlineField>\r\n\r\n\/\/ In test\r\nscreen.getByRole('checkbox', { name: 'Inline field with checkbox' });\r\n```\r\nI don't think it's that common to have a checkbox with a label inside inline field, it's probably more of an issue inside `Field`, where we want to have both field and checkbox labels. In that case you'll need to combine both labels when querying:\r\n```tsx\r\n<Field label=\"Field label\">\r\n  <Checkbox\r\n    label={'Checkbox label'}\r\n    id=\"inline-field-with-checkbox\"\r\n    value={booleanValue}\r\n    onChange={(event) => setBooleanValue(event.currentTarget.checked)}\r\n  \/>\r\n<\/Field>\r\n\r\n\/\/ In test\r\nscreen.getByRole('checkbox', { name: 'Field label Checkbox label' });\r\n```\r\n\r\nIt works the same way for `InlineLabel`. ","Nice, thanks again @Clarity-89. \r\n\r\nThe labels in InlineSwitch and Checkbox messes up [actionability checks](https:\/\/playwright.dev\/docs\/actionability#introduction) in Playwright, so one has to bypass actionability which is not ideal:\r\n```ts\r\nawait page.getByRole('checkbox', { name: 'TLS Enabled' }).uncheck({ force: true });\r\n```\r\n\r\nIf the you (frontend platform) work on improvements to these component it would be great if you could keep me (or someone else from the plugin-platform) in the loop so we can also check that they're 100% compatible with Playwright best pratices. \r\n\r\nI've added a [guide](https:\/\/grafana.com\/developers\/plugin-tools\/e2e-test-a-plugin\/selecting-elements#form-element-examples) in the plugin-e2e docs with some examples on how to interact with a few of the most common plugin components in a consistent way. No requirement ocf, but you can take a look if you want. ","\r\n> The labels in InlineSwitch and Checkbox messes up [actionability checks](https:\/\/playwright.dev\/docs\/actionability#introduction) in Playwright, so one has to bypass actionability which is not ideal:\r\n> \r\n> ```ts\r\n> await page.getByRole('checkbox', { name: 'TLS Enabled' }).uncheck({ force: true });\r\n> ```\r\n> \r\n> If the you (frontend platform) work on improvements to these component it would be great if you could keep me (or someone else from the plugin-platform) in the loop so we can also check that they're 100% compatible with Playwright best pratices.\r\n> \r\n> I've added a [guide](https:\/\/grafana.com\/developers\/plugin-tools\/e2e-test-a-plugin\/selecting-elements#form-element-examples) in the plugin-e2e docs with some examples on how to interact with a few of the most common plugin components in a consistent way. No requirement ocf, but you can take a look if you want.\r\n\r\nI was just looking at this yesterday and the issue with Checkbox and more so with Switch, is that we use the `label` there to provide custom toggle element and for it to work, it needs to have an associated label. In short, I don't see a way around having an internal label inside Checkbox or Switch. \r\n\r\nThis seems like a limitation with the Playwright as the same tests are working normally with the testing library. It looks to me that the issue is that the underlying `input type=\"checkbox\"` element is not visible (on purpose) and Playwright is waiting for it to be visible and this is something that removing the internal label will not fix? ",">It looks to me that the issue is that the underlying input type=\"checkbox\" element is not visible (on purpose) and Playwright is waiting for it to be visible and this is something that removing the internal label will not fix? \r\n\r\nYeah it's not actually the label that is the problem - it's the fact that the input is not visible that messes up actionability checks. Not an area of my expertise, but feel like there should be ways to make it visible, no? ","> Yeah it's not actually the label that is the problem - it's the fact that the input is not visible that messes up actionability checks. Not an area of my expertise, but feel like there should be ways to make it visible, no?\r\n\r\nThe way the Checkbox and Switch component work is by hiding the original input element and using a div, etc., with custom styles. If we show the original input, it'll mess up the layout. \r\n"],"labels":["effort\/medium","internal"]},{"title":"Add View option to panel options in EmbeddedDashboard component","body":"<!-- Please only use this template for submitting feature requests -->\r\n\r\n**Why is this needed**:\r\nTo view the panel in fullscreen.\r\n\r\n\r\n**What would you like to be added**:\r\nAn option **View** should be added to the dots menu for the panel, to have the ability to view the panel fullscreen. Also would be great to have **Back** button to get back to the dashboard.\r\n\r\n**Who is this feature for?**\r\nFor everybody who uses `EmbeddedDashboard` from `@grafana\/runtime` in plugins.\r\n\r\n**Current**\r\n<img width=\"393\" alt=\"Screenshot 2024-03-06 at 12 44 41\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/6388760\/cc39e0cf-52db-4735-b2da-560f2031738f\">\r\n\r\n**Expected**\r\n<img width=\"470\" alt=\"Screenshot 2024-03-06 at 12 45 48\" src=\"https:\/\/github.com\/grafana\/grafana\/assets\/6388760\/30056212-83d6-4b01-b216-00d239b1eb05\">\r\n","comments":["@kozhuhds please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","sadly it\u2019s not super simple to implement, as the view panel state is implemented using url state.  and the view action in the panel menu is a link. \r\n\r\nBut we can easily add a special embedded view panel action. We would need a special back to dashboard button somewhere as the way we get back from view panel in a normal dashboard is via breadcrumb or button in the navtoolbar, both those options do not work in the embedded scenario. "],"labels":["type\/feature-request","area\/dashboard","internal","area\/panel-chrome","team\/grafana-dashboards"]},{"title":"Bump anchore\/sbom-action from 0.14.2 to 0.15.9","body":"Bumps [anchore\/sbom-action](https:\/\/github.com\/anchore\/sbom-action) from 0.14.2 to 0.15.9.\n<details>\n<summary>Release notes<\/summary>\n<p><em>Sourced from <a href=\"https:\/\/github.com\/anchore\/sbom-action\/releases\">anchore\/sbom-action's releases<\/a>.<\/em><\/p>\n<blockquote>\n<h2>v0.15.9<\/h2>\n<h2>Changes in v0.15.9<\/h2>\n<ul>\n<li>reduce syft debug level (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/446\">#446<\/a>) [<a href=\"https:\/\/github.com\/kzantow\">kzantow<\/a>]<\/li>\n<li>update Syft to v0.105.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/442\">#442<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.8<\/h2>\n<h2>Changes in v0.15.8<\/h2>\n<ul>\n<li>Update Syft to v0.103.1 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/441\">#441<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.7<\/h2>\n<h2>Changes in v0.15.7<\/h2>\n<ul>\n<li>chore: migrate action to use node v20.11.0 (Iron) FROM node v16.x.x (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/440\">#440<\/a>) [<a href=\"https:\/\/github.com\/spiffcs\">spiffcs<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.6<\/h2>\n<h2>Changes in v0.15.6<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.102.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/438\">#438<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.5<\/h2>\n<h2>Changes in v0.15.5<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.101.1 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/437\">#437<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.4<\/h2>\n<h2>Changes in v0.15.4<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.101.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/436\">#436<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.3<\/h2>\n<h2>Changes in v0.15.3<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.100.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/435\">#435<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.2<\/h2>\n<h2>Changes in v0.15.2<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.99.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/432\">#432<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<li>chore: fix github-script invocation in update-snapshots workflow (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/433\">#433<\/a>) [<a href=\"https:\/\/github.com\/willmurphyscode\">willmurphyscode<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.1<\/h2>\n<h2>Changes in v0.15.1<\/h2>\n<ul>\n<li>chore(deps): update Syft to v0.98.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/431\">#431<\/a>) [<a href=\"https:\/\/github.com\/anchore-actions-token-generator\">anchore-actions-token-generator<\/a>]<\/li>\n<li>Add config input (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/430\">#430<\/a>) [<a href=\"https:\/\/github.com\/eyakubovich\">eyakubovich<\/a>]<\/li>\n<li>chore: pin and upgrade gh actions (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/429\">#429<\/a>) [<a href=\"https:\/\/github.com\/willmurphyscode\">willmurphyscode<\/a>]<\/li>\n<\/ul>\n<h2>v0.15.0<\/h2>\n<!-- raw HTML omitted -->\n<\/blockquote>\n<p>... (truncated)<\/p>\n<\/details>\n<details>\n<summary>Commits<\/summary>\n<ul>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/9fece9e20048ca9590af301449208b2b8861333b\"><code>9fece9e<\/code><\/a> fix: reduce syft debug level (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/446\">#446<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/f3355df2ccd621f5873fe3c7c653ebdc5ef1bcb2\"><code>f3355df<\/code><\/a> chore(deps): update Syft to v0.105.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/442\">#442<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/b6a39da80722a2cb0ef5d197531764a89b5d48c3\"><code>b6a39da<\/code><\/a> chore(deps): update Syft to v0.103.1 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/441\">#441<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/767b08fd8822486ad890abb8f1d31721bebd651c\"><code>767b08f<\/code><\/a> chore: migrate action from 16 -&gt; 20 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/440\">#440<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/c6aed38a4323b393d05372c58a74c39ae8386d02\"><code>c6aed38<\/code><\/a> chore(deps): update Syft to v0.102.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/438\">#438<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/24b0d5238516480139aa8bc6f92eeb7b54a9eb0a\"><code>24b0d52<\/code><\/a> chore(deps): update Syft to v0.101.1 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/437\">#437<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/41f7a6c033dbcdf78917f23b652c8b8146298c85\"><code>41f7a6c<\/code><\/a> chore(deps): update Syft to v0.101.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/436\">#436<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/c7f031d9249a826a082ea14c79d3b686a51d485a\"><code>c7f031d<\/code><\/a> chore(deps): update Syft to v0.100.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/435\">#435<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/719133684c7d294116626d1344fe64f0d2ff3e9e\"><code>7191336<\/code><\/a> chore(deps): update Syft to v0.99.0 (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/432\">#432<\/a>)<\/li>\n<li><a href=\"https:\/\/github.com\/anchore\/sbom-action\/commit\/b05b28be1ab1c43946343bdf76be6be4a370e2d2\"><code>b05b28b<\/code><\/a> chore: fix github-script invocation (<a href=\"https:\/\/redirect.github.com\/anchore\/sbom-action\/issues\/433\">#433<\/a>)<\/li>\n<li>Additional commits viewable in <a href=\"https:\/\/github.com\/anchore\/sbom-action\/compare\/v0.14.2...v0.15.9\">compare view<\/a><\/li>\n<\/ul>\n<\/details>\n<br \/>\n\n\n[![Dependabot compatibility score](https:\/\/dependabot-badges.githubapp.com\/badges\/compatibility_score?dependency-name=anchore\/sbom-action&package-manager=github_actions&previous-version=0.14.2&new-version=0.15.9)](https:\/\/docs.github.com\/en\/github\/managing-security-vulnerabilities\/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[\/\/]: # (dependabot-automerge-start)\n[\/\/]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options<\/summary>\n<br \/>\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n<\/details>","comments":[],"labels":["dependencies","github_actions"]},{"title":"Grafana explore misses some of the label values for Loki datasource ","body":"### What happened?\r\n\r\nGrafana explore query builder fails to return **all** Loki label values when using the query builder label discovery.\r\nFirst label discovery requests are not impacted  since it uses Loki labels API, but further discovery requests do.\r\nCurrently, the only way to consistently extract all values is to use a single label selection since it returns all label values from the Loki labels API. \r\n\r\n\r\n\r\n### What did you expect to happen?\r\n\r\n* All labels to be returned in the label filters discovery\r\n* Label API used consistently for label discovery in the label filters interaction returning all matching labels\r\n\r\n### Did this work before?\r\n\r\nNot identifed\r\n\r\n### How do we reproduce it?\r\n\r\n1. Install grafana and create Loki datasource to point to Loki instance.\r\n2. Select 2+ filters in the label discovery (label filters) in Grafana. \r\n3. Check for missing label values as you add more filters:\r\n\r\nBelow image shows first label discovery using labels\/values loki API, but further requests don't:\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/8014577\/d6283327-2c78-4e4f-bd41-ee4eca1f4021)\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/8014577\/5d2f9d4c-dd6c-4755-bfc6-f993238a19de)\r\n\r\n\r\n\r\n\r\n### Is the bug inside a dashboard panel?\r\n\r\nGrafana explore for Loki datasource - query builder\r\n\r\n### Environment (with versions)?\r\n\r\nGrafana: 10.4.0\r\nOS: Windows 10 (client)\r\nBrowser: Chrome Version 122.0.6261.95 (Official Build) (64-bit)\r\n\r\n\r\n### Grafana platform?\r\n\r\nKubernetes\r\n\r\n### Datasource(s)?\r\n\r\nLoki","comments":["Tested on Grafana 10.2.0 and 10.4.0. \r\nBased on my testing, \/series request is used to query the other label values, but that call seems to be capped and not returning all expected labels for all scenarios.\r\nIs there any reason why the [loki labels api](https:\/\/grafana.com\/docs\/loki\/latest\/reference\/api\/#list-label-values-within-a-range-of-time) is not used for this case? Labels API does work as expected using the query parameter introduced in loki 2.7, so it can be used to filter out the labels based on previous selections.\r\n\r\nGrafana also falls back to the \/series request (instead of label\/*\/values endpoint) when using a stream filter with the label_values function. This causes custom Loki dashboards to miss the expected labels as well.\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/8014577\/e9595512-47a2-4c83-9152-89e6efa060e8)\r\n","This is also related to https:\/\/github.com\/grafana\/loki\/issues\/8781 "],"labels":["datasource\/Loki"]},{"title":"Prometheus data source: label values requests aren't cancelled","body":"### What happened?\n\nThis is in the context of setting up a dashboard variable with Label values from a Prometheus datasource:\r\n\r\nIf the user changes the prompt for the filtered values, the requests to the grafana backend aren\u2019t cancelled. If the requests are expensive and come at a high frequency they can overwhelm the prometheus backend.\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/assets\/21020035\/d32cd599-5181-4338-a3d2-9fb44c9ba537\r\n\r\n\n\n### What did you expect to happen?\n\nPrevious requests (especially the ones after 0:43 in the recording) should be cancelled before they return since their response will not be visualized anyways.\n\n### Did this work before?\n\nwhen the form included a basic text field without autocompletion, this wasn't a problem\n\n### How do we reproduce it?\n\nSee recording\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nGrafana: Grafana v11.0.0-67812 (3f2820a552)\r\nOS: MacOS\r\nBrowser: Google Chrome 122.0.6261.94 (Official Build) (arm64)\r\n\r\n\n\n### Grafana platform?\n\nI use Grafana Cloud\n\n### Datasource(s)?\n\nPrometheus","comments":[],"labels":["datasource\/Prometheus","internal"]},{"title":"Graphite: Feature request to support different time ranges for multiple requests","body":"**What is this?**\n\nTo have the Graphite data source respect each target's time range when there are multiple queries run in Alerting with Expressions using the `sseGroupByDatasource` feature toggle on.\n\n**Context and why we are doing this:**\n\nGraphite allows one time range per request and applies this same range to all targets(queries) in the request.\n\nChallenge: Alerting allows multiple time ranges when there are multiple queries. Expressions has a feature toggle that would benefit other data sources that have queries that rely on other queries and should all be run together, sseGroupByDatasource. When this toggle is turned on, it breaks Graphite's respect to the time range because of how Graphite backend was built originally, to make one request with all the same time range.\n\nSee See https:\/\/github.com\/grafana\/support-escalations\/issues\/9529 for more detail.","comments":[],"labels":["type\/feature-request","datasource\/Graphite","area\/backend","area\/datasource\/backend","area\/expressions"]},{"title":"Drag and dropping a row inside another row throws error","body":"Currently, when a user drags and drops a row in the area of another uncollapsed row, it crashes the dashboard and throws `SceneGridRow must be a child of SceneGridLayout` because it is parented to that row.\r\n\r\nWe need find a way to not allow this behaviour. I am thinking maybe we can group the uncollapsed row and its panels in react grid and have that entire area highlighted so it's visible to a user that they cannot drop a row in there, but I'm not sure.","comments":["I thought this would be an easier fix, but I couldn't figure something out that isn't quite ugly. I'll come back later to this and figure a better solution."],"labels":["type\/bug","area\/dashboard","area\/scenes","team\/grafana-dashboards"]},{"title":"Fix row repeater grid size","body":"Quick and dirty fix for the issue where repeated rows have panels with wrong grid size. This happens when adding, for example, a new viz. After the addition, all layout children are repositioned and their gridSize updated, but repeated panels have their children inside the `sources` prop within the `RowRepeaterBehaviour`, which is not updated with the new positions, thus breaking the dashboard. \r\n\r\nA better way is to refactor the layout positioning logic, which I understand is due sometime soon, so we should wait for that and fix it there, along with other grid size issues that might exist.","comments":[],"labels":["area\/frontend"]},{"title":"Row repeated panels do not update their grid position","body":"The issue here is related to the sources in `RowRepeaterBehaviour` not being updated like the other grid layout children regarding grid sizes. \r\n\r\nThis bug happens when adding, for example, a new viz. After the addition, all layout children are repositioned and their gridSize updated, but repeated panels have their children inside the sources prop within the `RowRepeaterBehaviour`, which is not updated with the new positions, thus showing the panels in wrong positions.\r\n\r\nTo reproduce:\r\n- Add a row with a panel.\r\n- Repeat that panel through row controls\r\n- Add a new viz in edit mode\r\n- Exit panel edit and go back to the dashboard\r\n\r\nThe dashboard now has panels in wrong places, being outside their respective rows.","comments":["@mdvictor please add one or more appropriate labels. Here are some tips:\r\n\r\n- if you are making an issue, TODO, or reminder for yourself or your team, please add one label that best describes the product or feature area. Please also add the issue to your project board. :rocket:\r\n\r\n- if you are making an issue for any other reason (docs typo, you found a bug, etc), please add at least one label that best describes the product or feature that you are discussing (e.g. `area\/alerting`, `datasource\/loki`, `type\/docs`, `type\/bug`, etc). [Our issue triage](https:\/\/github.com\/grafana\/grafana\/blob\/main\/ISSUE_TRIAGE.md#3-categorizing-an-issue) doc also provides additional guidance on labeling. :rocket:\r\n\r\n Thank you! :heart:","[This](https:\/\/github.com\/grafana\/grafana\/pull\/83909) is a hacky fix but I understand a bigger refactor is needed for panel positioning in scenes, so we should probably wait for that."],"labels":["type\/bug","area\/dashboard","area\/scenes","internal","team\/grafana-dashboards"]},{"title":"Prometheus: Use queryType rather than range|instant flags","body":"Update the query model so we save: `queryType: range | instant` rather than having two flags. This will allow us to cleanly add more types and does not allow for invalid (both range+instant = true) query configs. But that also requires https:\/\/github.com\/grafana\/grafana\/issues\/60061 to be resolved first. Right now Prometheus allows both types at the same time.\r\n\r\nLoki did before: https:\/\/github.com\/grafana\/grafana\/pull\/43727","comments":[],"labels":["datasource\/Prometheus"]},{"title":"[ON HOLD] Library panels: Normal panel being edited can be saved as a Library Panel ","body":null,"comments":[],"labels":["internal","team\/grafana-dashboards"]},{"title":"Serviceaccounts: UI says updated instead of created upon creating SA","body":"We make a toast from the backend when calling apis to SA.\r\n\r\nDue to the implementation of the calls to the backend we are showing \"updated service account\"\r\ninstead of \"created service account\" when creating the SAs\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/7727602\/b76df7a3-4893-4c18-8539-fa5d1ae8f8c9)\r\n\r\nOn creating a new service account we are calling the APIs:\r\n1. Create Service account\r\n2. Update Service account\r\n\r\n\r\n\r\n\r\n\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/c9ac6dd3e7464278800d2a853b6d19ba55a7854a\/public\/app\/features\/serviceaccounts\/ServiceAccountCreatePage.tsx#L57-L72\r\n","comments":[],"labels":["area\/auth","area\/auth\/serviceaccount"]},{"title":"DashboardScene: Homepage dashboard loaded differently if access via ?orgId=1 in URL","body":"I'm noticing inconsistent behaviour when loading the OSS homepage dashboard. I have the `dashboardSceneForViewers` feature enabled\r\n\r\n - When i navigate to http:\/\/localhost:3000\/ my breadcrumbs read Home > Dashboards > Home, and there's an extra gap at the top of the page that clips the dashboard as it scrolls. (bug!)\r\n - When I navigate directly to http:\/\/localhost:3000\/?orgId=1 , I get correct breadcrumbs and no extra gap at the top of the page\r\n\r\n| Incorrect | Correct |\r\n| --- | --- |\r\n| ![image](https:\/\/github.com\/grafana\/grafana\/assets\/46142\/732ba9f9-c971-43f5-8c22-1ead40a351b5) | ![image](https:\/\/github.com\/grafana\/grafana\/assets\/46142\/e61acd9e-c8ba-44e7-a6dd-adf98ad52c0c) |\r\n","comments":[],"labels":["area\/scenes","internal","team\/grafana-dashboards"]},{"title":"Feature Request: Enable Global API Keys or Service Accounts for Cross-Organization Access in Grafana","body":"<!-- Please use this template exclusively for submitting feature requests -->\r\n\r\n### Why This is Needed:\r\n- Our current Grafana setup involves multiple organizations, each aligned with a different team.\r\n- The need is to access every dashboard (via GET requests) using a single access key.\r\n- Present limitations: service accounts and API keys are only scoped within individual organizations.\r\n\r\n### Suggested Addition:\r\n- Implement a global API key or global service accounts for broader access control.\r\n\r\n### Intended Beneficiaries:\r\n- Companies looking to integrate Grafana into other applications seamlessly.\r\n","comments":[],"labels":["type\/feature-request","area\/auth\/serviceaccount"]},{"title":"Explore workspaces","body":null,"comments":[],"labels":["area\/backend","area\/explore","area\/frontend","area\/backend\/db\/migration"]},{"title":"Docs: add `Provisioning` section to `Install on Kubernetes` docs","body":"This PR adds a **Provision Grafana resources using configuration files** section to the [Install Grafana on Kubernetes docs](https:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/installation\/kubernetes\/). \r\n\r\nIt provides step-by-step instructions for provisioning Grafana resources within Kubernetes, using a persistent volume to supply the configuration files to the Grafana pod.\r\n\r\n\r\nFollow-up note: after this, we could add similar Provisioning instructions on the [Grafana on Helm Charts documentation](https:\/\/grafana.com\/docs\/grafana\/latest\/setup-grafana\/installation\/helm\/).\r\n\r\n\r\n\r\n","comments":["This PR must be merged before a backport PR will be created."],"labels":["type\/docs","no-changelog","backport v10.4.x"]},{"title":"Docker: use command instead of entrypoint","body":"### What happened?\n\n**What would you like to be added**:\r\nMove the `grafana-server` command to a [CMD](https:\/\/docs.docker.com\/engine\/reference\/builder\/#cmd). The entrypoint script should only be executed if grafana is started as server and execute the specified command (or the default CMD). E.g. do something like:\r\n\r\n```bash\r\nif [ \"$1\" = \"grafana-server\" ]; then\r\n    # do stuff\r\nfi\r\n\r\nexec \"$@\"\r\n```\r\n\r\n**Why is this needed**:\r\nThe current version starts grafana in the entrypoint:\r\nhttps:\/\/github.com\/grafana\/grafana\/blob\/f2c3d23140ca8eedb7d3881b1398d6888aaa1ef6\/packaging\/docker\/run.sh#L80\r\nThis is bad because it does not allow to run the container with a custom command (`docker run  grafana\/grafana whoami`).\r\n\r\nSee also: https:\/\/github.com\/docker-library\/official-images\/blob\/d28cb89e79417cac50c2a8ae163a9b3b79167f79\/README.md#consistency\n\n### What did you expect to happen?\n\nExecute the specified command.\n\n### Did this work before?\n\nn\/a\n\n### How do we reproduce it?\n\nCan run custom commands in the image: `docker run --rm grafana\/grafana echo \"test\"`\r\n\r\nNote: This pattern is broken in all Grafana Docker images, i.e `grafana\/loki`, `grafana\/promtail` etc.\r\n\r\nI don't know why #38361 was closed.\n\n### Is the bug inside a dashboard panel?\n\n_No response_\n\n### Environment (with versions)?\n\nn\/a\n\n### Grafana platform?\n\nDocker\n\n### Datasource(s)?\n\n_No response_","comments":["Hi @J0WI,\r\n\r\nThanks for opening this issue.\r\n\r\nI will forward this to our Engineers so that they can have a look and might be able to tell more details about it.\r\n","Moving to backend services squad as they own the dockerfile for grafana and CICD"],"labels":["type\/build-packaging","area\/backend","area\/docker","triage\/needs-confirmation"]},{"title":"Logs: Explore Table UI - default table options when adding to dashboard","body":"**What is this feature?**\r\nNoticed that the inspect and filter options (which are used in the explore UI) were not set when adding explore table to a dashboard.\r\n\r\n**Why do we need this feature?**\r\nMore consistent UI when adding explore table to dashboard.\r\n\r\n**Who is this feature for?**\r\nLogs users that use table\r\n\r\n**Special notes for your reviewer:**\r\nThis was the low-hanging fruit, I tried adding the footer as well, but that appears to be `TableFooterCalc` and not something that is currently working when passed into the panel. \r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["Looks like there's an issue with https:\/\/github.com\/grafana\/grafana\/pull\/83642 which doesn't seem to be playing well with the inspect mode in the table, so let's hold off on this until that is taken care of."],"labels":["area\/explore","area\/frontend"]},{"title":"datatrails: add generally embeddable scene to `@grafana\/runtime`","body":"<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https:\/\/github.com\/grafana\/grafana\/blob\/main\/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n\r\n**What is this feature?**\r\n\r\n`DataTrailsEmbedded` scene has been added to `@grafana\/runtime` so that app plugins can embed the data trails \"explore metrics\" experience.\r\n\r\nNote:\r\n- This PR extends from https:\/\/github.com\/grafana\/grafana\/pull\/84521\r\n\r\n# Usage example (from other plugins)\r\n\r\nUnless you can import from this branch's `@grafana\/runtime`, you can still get the functionality by using `import * as runtime...` as shown below. Typescript will not like it, but the javascript will function.\r\n\r\n\r\n(if this gets merged, the `* as runtime` import will not be necessary, as your plugin will be able to reference the type definitions from a new version of `@grafana\/runtime`)\r\n```ts\r\nimport * as runtime  from '@grafana\/runtime'\r\n\r\n\r\nexport function PageFour() {\r\n  const s = useStyles2(getStyles);\r\n\r\n  const trail = new runtime.DataTrailEmbedded({\r\n    metric: 'ALERTS',\r\n    dsRef: {},\r\n    timeRange: new SceneTimeRange({from: 'now-1h', to: 'now'}),\r\n  });\r\n\r\n\r\n  return (\r\n    <PluginPage layout={PageLayoutType.Canvas}>\r\n      <div className={s.page} data-testid={testIds.pageFour.container}>\r\n          <trail.Component model={trail} \/>\r\n      <\/div>\r\n    <\/PluginPage>\r\n  );\r\n}\r\n```\r\n\r\n![image](https:\/\/github.com\/grafana\/grafana\/assets\/38694490\/eae6b908-4aa1-43f8-9dd5-0c11dd708e99)\r\n\r\n(Note: The dark magenta on the labels has been removed)\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https:\/\/grafana.com\/docs\/writers-toolkit\/writing-guide\/contribute-release-notes\/) doc.\r\n","comments":["\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166104\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166429\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/166730\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). ","\u274c Failed to run Playwright plugin e2e tests. <br \/> <br \/> Click [here](https:\/\/storage.googleapis.com\/releng-pipeline-artifacts-dev\/168047\/playwright-report\/index.html) to browse the Playwright report and trace viewer. <br \/> For information on how to run Playwright tests locally, refer to the [Developer guide](https:\/\/github.com\/grafana\/grafana\/blob\/main\/contribute\/developer-guide.md#to-run-the-playwright-tests). "],"labels":["area\/frontend","no-backport","no-changelog"]},{"title":"Dashboard Scenes M2: Bug bash","body":"Extracted from #78389 \n\n```[tasklist]\n### Known Bugs\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/78405\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/80454\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81218\n- [ ] Two annotation queries with the same name works in old arch but not in scenes\n- [x] [Navigating to a widget panel edit throws an error.](https:\/\/github.com\/grafana\/grafana\/pull\/81934)\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/80877\n- [x] PanelEdit: pageNav model is wrong, breadcrumbs include Page Not Found segment\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81469\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81931\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/80434\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81631\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81883\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/82137\n- [x] Remove debug and \"View as dashboard\" buttons from the dashboard\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/82502\n- [x] When switching viz type in panel edit mode some vizualization take the whole screen causing panel inspect drawer to disappear\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/82907\n- [x] Mark dashboard as favorite from the toolbar does not work\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/82925\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/81632\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83292\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83375\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83477\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83503\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83613\n- [ ] Variable dropdown clips its options\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83624\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83690\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83827\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83888\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83908\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83912\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83916\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/83917\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84155\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84174\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84194\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84199\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84212\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84302\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84562\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84563\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84564\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84565\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84566\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84567\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84568\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84569\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84570\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84573\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84574\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84575\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84576\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84577\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84578\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84717\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84727\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84807\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84818\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84830\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84847\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/84915\n- [ ] https:\/\/github.com\/grafana\/grafana\/issues\/85023\n```","comments":[],"labels":["type\/epic","internal","team\/grafana-dashboards"]},{"title":"Data source: Changing Loki server URL does not change TLS serverName","body":"### What happened?\n\nI created a data source with URL `https:\/\/loki:3100`, enabled TLS validation with a custom CA certificate. It worked.\r\n\r\nLater, I change the URL to `https:\/\/loki2:3100`. However every panel fails with a TLS error:\r\n\r\n> `Get \"https:\/\/loki2:3100\/loki\/api\/v1\/query_range?direction=backward&end=1709566583228000000&limit=1000&query=%7B%7D&start=1709562983228000000&step=2000ms\": tls: failed to verify certificate: x509: certificate is valid for loki2, loki2.logging.svc, not loki`\r\n\r\nLooking into the Grafana database, I can see that `url` correctly changed to `https:\/\/loki2:3100`, however `json_data` contains `\"serverName\":\"loki\"`. It has not been updated, expected the new location to use the old server name, and validation fails every time.\n\n### What did you expect to happen?\n\nUpdating the URL of a Loki data source is possible.\n\n### Did this work before?\n\nI haven't tried another Grafana version. It worked before I updated the data source obviously.\n\n### How do we reproduce it?\n\n1. Create a Loki data source\r\n2. Update the URL\n\n### Is the bug inside a dashboard panel?\n\nno\n\n### Environment (with versions)?\n\nGrafana: 10.3.3\n\n### Grafana platform?\n\nDocker\n\n### Datasource(s)?\n\nLoki","comments":[],"labels":["datasource\/Loki"]},{"title":"Add FolderUID for library elements","body":"Reverts grafana\/grafana#83776","comments":["\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **revert-83776-revert-79572-deprecate_folderid_library_elements** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","**Error**: Contact #proj-ephemeral-hg-instances if it is not a compile error\n\n handling pull request comment event: running grafana-build deb: executing command: stdout= stderr=go: downloading dagger.io\/dagger v0.9.8\ngo: downloading github.com\/urfave\/cli\/v2 v2.25.7\ngo: downloading go.opentelemetry.io\/otel v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracehttp v1.17.0\ngo: downloading go.opentelemetry.io\/otel\/exporters\/otlp\/otlptrace\/otlptracegrpc v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/sdk v1.18.0\ngo: downloading go.opentelemetry.io\/otel\/trace v1.18.0\ngo: downloading golang.org\/x\/sync v0.6.0\ngo: downloading github.com\/go-logr\/logr v1.2.4\ngo: downloading go.opentelemetry.io\/otel\/metric v1.18.0\ngo: downloading go.opentelemetry.io\/proto\/otlp v1.0.0\ngo: downloading google.golang.org\/genproto\/googleapis\/rpc v0.0.0-20230711160842-782d3b101e98\ngo: downloading google.golang.org\/grpc v1.58.0\ngo: downloading google.golang.org\/protobuf v1.31.0\ngo: downloading github.com\/go-logr\/stdr v1.2.2\ngo: downloading golang.org\/x\/sys v0.14.0\ngo: downloading github.com\/cpuguy83\/go-md2man\/v2 v2.0.2\ngo: downloading github.com\/xrash\/smetrics v0.0.0-20201216005158-039620a65673\ngo: downloading github.com\/cenkalti\/backoff\/v4 v4.2.1\ngo: downloading github.com\/grpc-ecosystem\/grpc-gateway\/v2 v2.16.0\ngo: downloading github.com\/Khan\/genqlient v0.6.0\ngo: downloading github.com\/vektah\/gqlparser\/v2 v2.5.6\ngo: downloading github.com\/Masterminds\/semver v1.5.0\ngo: downloading github.com\/russross\/blackfriday\/v2 v2.1.0\ngo: downloading github.com\/golang\/protobuf v1.5.3\ngo: downloading golang.org\/x\/net v0.12.0\ngo: downloading github.com\/99designs\/gqlgen v0.17.31\ngo: downloading golang.org\/x\/exp v0.0.0-20231110203233-9a3e6036ecaa\ngo: downloading github.com\/adrg\/xdg v0.4.0\ngo: downloading github.com\/mitchellh\/go-homedir v1.1.0\ngo: downloading google.golang.org\/genproto\/googleapis\/api v0.0.0-20230711160842-782d3b101e98\ngo: downloading golang.org\/x\/text v0.11.0\n2024\/03\/05 09:42:22 OTEL_EXPORTER_OTLP_ENDPOINT not set. Disabling tracing.\ntime=2024-03-05T09:42:28.433Z level=INFO msg=\"Initializing tar.gz artifact with options\" name=grafana-pro \"build ID\"=12345 version=10.1.0 distro=linux\/amd64\/dynamic static=false enterprise=true\n2024\/03\/05 09:42:28 if git -C src checkout revert-83776-revert-79572-deprecate_folderid_library_elements; then echo \"checked out revert-83776-revert-79572-deprecate_folderid_library_elements\"; else exit 3; fi\n2024\/03\/05 09:45:01 if git -C src checkout main; then echo \"checked out main\"; else exit 3; fi\ntime=2024-03-05T09:45:04.734Z level=INFO msg=\"Initializing backend artifact with options\" static=false version=10.1.0 name=grafana-pro distro=linux\/amd64\/dynamic\n2024\/03\/05 09:45:04 if git -C src checkout revert-83776-revert-79572-deprecate_folderid_library_elements; then echo \"checked out revert-83776-revert-79572-deprecate_folderid_library_elements\"; else exit 3; fi\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"Adding artifact to dag...\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler count=1\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler count=5\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler count=0\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\n2024\/03\/05 09:45:04 Building with command 'if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi'\n2024\/03\/05 09:45:04 Building with command 'if [ -d pkg\/cmd\/grafana-server ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-server -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-server; fi'\n2024\/03\/05 09:45:04 Building with command 'if [ -d pkg\/cmd\/grafana-cli ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-cli -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-cli; fi'\n2024\/03\/05 09:45:04 Building with command 'if [ -d pkg\/cmd\/grafana-example-apiserver ]; then go build -ldflags=\"-X \\\"main.version=10.1.0\\\" -X \\\"main.commit=$(cat .\/.buildinfo.commit)\\\" -X \\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\" -X \\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\" \" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana-example-apiserver -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana-example-apiserver; fi'\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/grafana-pro\/linux\/amd64\/dynamic service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting dependencies...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"got dependencies\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler count=0\ntime=2024-03-05T09:45:04.751Z level=INFO msg=\"getting builder...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"got builder\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"building directory...\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"done building directory\" artifact=10.1.0 filename=deb:pro:linux\/amd64\/dynamic\/grafana-enterprise\/public service=ArtifactHandler\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler count=0\ntime=2024-03-05T09:45:48.592Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/npm-packages service=ArtifactHandler\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler count=0\ntime=2024-03-05T09:45:48.606Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=bin\/bundled-plugins service=ArtifactHandler\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"getting dependencies...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"got dependencies\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler count=0\ntime=2024-03-05T09:45:48.620Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"building directory...\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"done building directory\" artifact=deb:pro:linux\/amd64\/dynamic filename=10.1.0\/storybook service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.tar.gz service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"getting builder...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"got builder\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"building file...\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"done building file\" artifact=deb:pro:linux\/amd64\/dynamic filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb service=ArtifactHandler\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Done adding artifact\" filename=grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb artifact=deb:pro:linux\/amd64\/dynamic\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Exporting artifacts...\"\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Started exporting artifact...\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Acquiring semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Acquired semaphore\" artifact=deb:pro:linux\/amd64\/dynamic action=export\ntime=2024-03-05T09:45:48.633Z level=INFO msg=\"Exporting artifact\" artifact=deb:pro:linux\/amd64\/dynamic action=export\nerror exporting artifact 'grafana-pro_10.1.0_12345_linux_amd64-dynamic.deb': input: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\ninput: resolve: container: from: withExec: withExec: withExec: withExec: withExec: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withEnvVariable: withDirectory: withDirectory: withDirectory: withDirectory: withFile: withDirectory: withDirectory: withDirectory: withFile: withFile: withWorkdir: withFile: withMountedCache: withFile: withFile: withFile: withExec: withExec: withExec: withExec: directory: process \"\/bin\/sh -c if [ -d pkg\/cmd\/grafana ]; then go build -ldflags=\\\"-X \\\\\\\"main.version=10.1.0\\\\\\\" -X \\\\\\\"main.commit=$(cat .\/.buildinfo.commit)\\\\\\\" -X \\\\\\\"main.buildBranch=$(cat .\/.buildinfo.branch)\\\\\\\" -X \\\\\\\"main.enterpriseCommit=$(cat .\/.buildinfo.enterprise-commit)\\\\\\\" \\\" -o=bin\/grafana-pro\/linux\/amd64\/dynamic\/grafana -trimpath -tags=osusergo,pro .\/pkg\/cmd\/grafana; fi\" did not complete successfully: exit code: 1\n\nStdout:\n\nStderr:\n# github.com\/grafana\/grafana\/pkg\/extensions\/accesscontrol\/acimpl\npkg\/extensions\/accesscontrol\/acimpl\/service.go:169:21: e.fallback.GetUserPermissionsInOrg undefined (type fallback has no field or method GetUserPermissionsInOrg)\nexit status 1\n exit status 1","\/deploy-to-hg","- Preparing your instance. A comment containing your instance's url will be added to this PR when the instance is ready.\n- Your instance will be ready in ~10 minutes.\n- Check the GitHub actions tab to follow the workflow progress\n- Slack channel: #proj-ephemeral-hg-instances\n- Building instance with **revert-83776-revert-79572-deprecate_folderid_library_elements** oss branch and **main** enterprise branch. [How to choose a branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#deploying-a-grafana-and-grafana-enterprise-branch-together)","- Your instance can be accessed at: https:\/\/ephemeral1511182183819idafurj.grafana-dev.net\n- The instance is not using the CDN assets.\n- [How to access \/ How to update instance config \/ How to build a specific branch](https:\/\/github.com\/grafana\/hosted-grafana\/wiki\/Ephemeral-instances#choosing-which-oss-and-enterprise-branches-are-used-to-build-the-instance)"],"labels":["area\/backend","area\/backend\/db\/migration","no-backport","no-changelog"]}]